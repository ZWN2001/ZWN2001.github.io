<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>毕设从调研到完工 | ZWN's blog</title><meta name="author" content="琉璃月"><meta name="copyright" content="琉璃月"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="毕设从调研到完工 基于个性推荐的商家自播带货系统 题目概述 自播带货APP系统是一种利用互联网平台和直播技术进行商品展示、咨询答复、导购和后台服务的新型服务方式。该系统允许商家通过自己开设的直播间，由主播进行商品推介和销售。  通过自播带货APP系统，商家可以实现近距离的商品展示，将产品的特点和优势直观地展示给观众。主播可以通过直播实时与观众互动，回答他们的问题，提供专业的咨询和导购服务，帮助观众"><meta property="og:type" content="article"><meta property="og:title" content="毕设从调研到完工"><meta property="og:url" content="https://zwn2001.space/posts/Undergraduate-Course/%E6%AF%95%E8%AE%BE%E4%BB%8E%E8%B0%83%E7%A0%94%E5%88%B0%E5%AE%8C%E5%B7%A5/index.html"><meta property="og:site_name" content="ZWN&#39;s blog"><meta property="og:description" content="毕设从调研到完工 基于个性推荐的商家自播带货系统 题目概述 自播带货APP系统是一种利用互联网平台和直播技术进行商品展示、咨询答复、导购和后台服务的新型服务方式。该系统允许商家通过自己开设的直播间，由主播进行商品推介和销售。  通过自播带货APP系统，商家可以实现近距离的商品展示，将产品的特点和优势直观地展示给观众。主播可以通过直播实时与观众互动，回答他们的问题，提供专业的咨询和导购服务，帮助观众"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zwn2001.space/img/cover/24.jpg"><meta property="article:published_time" content="2024-01-03T13:30:28.000Z"><meta property="article:modified_time" content="2024-08-09T00:56:26.714Z"><meta property="article:author" content="琉璃月"><meta property="article:tag" content="毕设"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zwn2001.space/img/cover/24.jpg"><link rel="shortcut icon" href="/img/favicon.webp"><link rel="canonical" href="https://zwn2001.space/posts/Undergraduate-Course/%E6%AF%95%E8%AE%BE%E4%BB%8E%E8%B0%83%E7%A0%94%E5%88%B0%E5%AE%8C%E5%B7%A5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:-1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:{limitDay:200,position:"top",messagePrev:"距离上次更新已经过去",messageNext:"天啦！注意内容可能过时。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:300},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"毕设从调研到完工",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-08-09 08:56:26"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/transpancy.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/rightmenu.css"><link rel="stylesheet" href="/css/loadimg.css"><link rel="stylesheet" href="/css/project.css"><link type="text/html" rel="stylesheet" href="/css/wide_screen.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"><style>#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before{content:"\A";white-space:pre}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator{display:none}</style><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" src="/img/favicon.webp"><div class="loading-image-dot"></div><div id="loading-percentage"></div></div></div><script>const loadingPercentage=document.getElementById("loading-percentage");loadingPercentage.style.color="black";let loadingPercentageTimer=setInterval(function(){var e=document.querySelector(".pace-progress");e&&(e=e.getAttribute("data-progress-text"))!==loadingPercentage.textContent&&"60%"===(loadingPercentage.textContent=e)&&clearInterval(loadingPercentageTimer)},100);const preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()})</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">149</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/cover/24.jpg)"><nav id="nav"><span id="blog-info"><a href="/" title="ZWN's blog"><span class="site-name">ZWN's blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">毕设从调研到完工</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-01-03T13:30:28.000Z" title="发表于 2024-01-03 21:30:28">2024-01-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-09T00:56:26.714Z" title="更新于 2024-08-09 08:56:26">2024-08-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0-%E8%AF%BE%E5%A4%96%E6%8B%93%E5%B1%95/">学习-课外拓展</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>毕设从调研到完工</h1><p>基于个性推荐的商家自播带货系统</p><h2 id="题目概述">题目概述</h2><p>自播带货APP系统是一种利用互联网平台和直播技术进行商品展示、咨询答复、导购和后台服务的新型服务方式。该系统允许商家通过自己开设的直播间，由主播进行商品推介和销售。 通过自播带货APP系统，商家可以实现近距离的商品展示，将产品的特点和优势直观地展示给观众。主播可以通过直播实时与观众互动，回答他们的问题，提供专业的咨询和导购服务，帮助观众做出购买决策。该系统还提供了后台服务功能，商家可以在后台管理系统中对商品进行管理和上架，设置商品的价格、库存等信息。同时，商家可以通过系统统计分析观众的购买行为和偏好，为观众提供个性化的推荐和服务，提高销售转化率。</p><p>自播带货APP系统的优势在于，它打破了传统的线下购物限制，消除了时间和空间的限制。观众可以随时随地通过手机或电脑参与直播，享受到线上购物的便利和快捷。同时，系统提供了实时的互动功能，观众可以与主播进行即时的沟通和交流，获得更好的购物体验。</p><p> </p><h2 id="软件过程核心思路与开发计划">软件过程核心思路与开发计划</h2><p>参考软件工程的可行性分析、需求分析、软件设计、软件开发、测试维护的流程，<strong>不对各个阶段做完全明确性的划分，同时对各个阶段的顺序不作硬性规定</strong>，各个阶段可以<strong>相互穿插相互验证</strong>以提高整体的进度推进速度（比如在调研时就思考部分软件设计问题并进行原型开发与验证），同时在整个过程中贯穿<strong>设计与测试</strong>流程，采用<strong>敏捷、迭代</strong>和<strong>原型化</strong>以及<strong>增量模型</strong>的思想规范整个软件过程。</p><img src="开发计划.png" alt="开发计划" style="zoom:100%"><p> </p><h2 id="需求调研">需求调研</h2><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=U6-nvttFko0u-9l71wMOCQcLdY6Vnj_lAJzAHhXyAusVwtdr9-ZRLsvwKaJ2woUpcvD_1w8L3dKQ1HI_ldhe-YAgfEJG3MPU7A_NSHeQW63GkF2IR5pM2FZbIJXAYrQyHFuqcsHOOEY=&amp;uniplatform=NZKPT&amp;flag=copy">魏晓芳,郭芳蓉. “村播带货”方兴未艾 助力乡村振兴[N]. 泉州晚报,2023-10-18(008).</a></p></blockquote><p>该论文阐述了当下村民选择通过直播的形式带动农产品销售，为农村带来更高经济效益，同时也指出了乡村直播中人才缺口大、直播平台使用困难、人气流量不足、标准化程度低等问题，这对本<strong>系统的易用性、平台标准化</strong>提出了相对于现有产品的更高要求。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=U6-nvttFko2i-4C9Ze5g6T7I-jimHBFraDPVLjagLjN7m10JRn-HoNd-RamW9TSPMrG7mDf4LR_pIsGm1X4v_5ze28VwInpmoA2U-rbzQfQosO4DPvs0PptrgLWpPFzod5JEfCY_HXI=&amp;uniplatform=NZKPT&amp;flag=copy">白杨. 全域兴趣电商，让乡村发展有了新可能[N]. 21世纪经济报道,2023-12-29(012).</a></p></blockquote><p>该论文对直播带货背景下的乡村优质产品获得优价、产品标准化程度低等方面阐述了直播平台所带来的一系列经济与社会效益，同时对内容平台通过技术的创新，打破传统模式，强调<strong>即时互动</strong>，以及<strong>更加浓厚的社交属性</strong>提出更高要求。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=U6-nvttFko1_SUB9btiF94Fu77dWE-x1yxBVKZX69pGopPzlZvuJjGQwyvwdE4uVnNBAn89q2e-B4oun2YL1sf04vflZlQQ_M8AsDNrNsRs1a5iIAdwkU2xpD6HjJH4f09m215mIn6I=&amp;uniplatform=NZKPT&amp;flag=copy">张鑫,张杰.直播背景下电商供应链混合渠道定价与选择策略[J/OL].系统管理学报:1-22[2024-01-07]</a></p></blockquote><p>该文本文在融入直播方式的背景下，根据制造商在传统网络零售渠道、品牌商家自播渠道和网红直播渠道之间的选择，建立了3种直播带货供应链模型（分别简称为自播模式、网红模式和混合模式），通过进行博弈与均衡分析，解决了： 如果品牌方想要拓展直播渠道，自播模式、网红模式和混合模式的选择问题，在不同模式下均衡定价和利润的影响因素问题，以及品牌方最优选择模式下，商家自播和网红直播的比例的分配问题。</p><p>该文通过研究，提出要深耕商家自播渠道，合理布局网红直播渠道。品牌方最优选择尽管是同时建立自播和网红直播渠道，但侧重点一定还是要放在长期培养忠诚度更高、成本更低的私域流量，网红直播渠道主要承载了开拓市场、引流的功能，因此，要根据产品生命周期和品牌价值合理分配产品在不同渠道之间的分销比例，保持渠道间的良性互动。</p><p>该研究论证了自播平台相对于直播平台的优势，同时也对平台发展提出一系列建议。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=U6-nvttFko3eluANgJeL_Ol0cOgz9_ht77qJ4UFRB0BVe8SqF0CfEn_sSvI75duQ0cw9E7f5SsHMQMd8Dblzb8xgYFZB394OXz4aZNC7Tu5LIeX25TXzsrz4KDAPlalJ&amp;uniplatform=NZKPT&amp;flag=copy">李素娟.电商直播交互模式对消费者购买行为的影响研究[J].现代营销(下旬刊),2023(11):114-116.</a></p></blockquote><p>该文从交互模式视角切入，研究电商直播的人机交互和人际交互对消费者购买行为的影响机制，提出应丰富电商直播中人机交互和人际交互的输出内容。该文研究结果显示，电商直播的交互性能够有效提升消费者感知经济支持、感知结构化支持和感知社会化支持。表明电商平台和商户在使用直播模式时，要深入把握电商直播交互内容引流的本质，重视电商直播网站展示内容、设计和导航性等人机环节的顾客体验升级。</p><p>该研究尤其对本系统的<strong>交互设计</strong>提出了更高要求，通过更优的人机交互设计达到更好的用户体验。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=vdPasdvfHvtotChL26x4u8JKuez1RYhHcqphsvxN4oLdZhSCtD2S9d24UaSYrE2euItI9m7NsO-IbYil0HNu-NBPZap8QyITzGmSBmLGyAdUdIJO_B4453NnzRu-Lga-BNSs-3CHwXk=&amp;uniplatform=NZKPT&amp;flag=copy">李倩.“电商+直播”发展逻辑与消费者购买心理影响因素分析[J].商场现代化</a></p></blockquote><p>该文从“电商+直播”模式的内涵和功能进行阐述，分析了“电商+直播”的发展逻辑，并在此背景下分析了消费者购买心理的影响因素，最后就“电商+直播”发展中存在的问题以及改善路径进行了进一步的研究探讨。</p><p>该文提出，直播氛围就是事先设定出来的直播空间、直播段子、直播话术等，以此营造出适合消费的直播氛围，在此氛围之下能够快速激发消费者的消费欲望。可以说，在当下的网络环境中，直播平台上的直播氛围与平台外观设计、导航界面友好性、信息内容质量等息息相关，有研究表明，直播氛围与消费心理的冲动性之间呈现明显的正相关性，即直播氛围越强烈，消费者产生冲动消费心理的可能性越大。该方面研究对本系统的界面交互设计优化与友好性有一定借鉴意义。</p><p>该文提出了当前直播平台存在的一系列<strong>交互性与内容审核</strong>问题，就本系统的交互性与管理设计提出更高要求。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=vdPasdvfHvtnMNGCyxer8bxJAG_IVb8c8xvVtQpbH233emJiJ68-juZcFoSbcxsl1K5pbp_Ne19s5_LKYIoFygqoQMk1azjbDWR9O5K8CychZI44TZpwNFqrpPAo9TRR&amp;uniplatform=NZKPT&amp;flag=copy">王照元.内容电商平台对消费行为及品牌营销策略的影响研究——以抖音为例</a></p></blockquote><p>该文研究发现，在内容电商平台中，消费者表现出与传统电商平台不同的消费行为特征。内容电商平台为消费者提供了更多的信息和互动机会，对消费决策产生了积极的影响。此外，在内容电商平台上进行品牌营销能够有效提升品牌认知、品牌忠诚度，并对品牌销售业绩产生积极影响。</p><p>同样也就本系统的<strong>交互性设计</strong>提出更高要求，同时也就平台如何呈现给消费者更好的内容带来了更多思考。</p><hr><p>需求调研结果摘要：</p><ol><li><p>目标用户：调研结果显示，目标用户主要包括消费者和商家。消费者希望通过自播带货系统获得个性化的购物体验和方便的购买渠道，他们希望系统能够提供丰富的商品选择、个性化推荐和便捷的购买流程。</p><p>商家希望通过自播带货系统提升产品销售和品牌曝光。</p></li><li><p><strong>视频直播</strong>功能：消费者对于系统提供实时视频直播功能感兴趣，以便观看产品展示和了解商品特点。他们希望能够与主播互动、提问并获得实时回答。</p><p>商家普遍需要系统提供实时视频直播功能，以展示产品、演示使用方法，并与观众互动。</p></li><li><p><strong>商品</strong>浏览和筛选：消费者希望系统能够提供多样化的商品浏览和筛选方式，例如按类别、价格、品牌等进行筛选，以便快速找到感兴趣的商品。</p></li><li><p>用户<strong>交互</strong>和界面设计：对于系统的用户界面和交互要求简洁明了、易于使用。他们希望能够快速上手，并能够快速找到所需功能和信息。</p></li><li><p>个性化<strong>推荐</strong>：消费者对于系统能够根据他们的喜好和购买历史提供个性化推荐非常感兴趣。他们希望系统能够推荐符合他们兴趣和需求的商品，提高购买的准确性和满意度。</p></li><li><p>购物车管理和<strong>订单</strong>跟踪：消费者希望能够方便地管理购物车和跟踪订单状态，他们希望系统能够提供清晰的购物车界面和实时的订单更新信息。</p></li><li><p><strong>数据分析</strong>和报告：商家对于系统提供数据分析和报告功能的需求较高。他们希望能够了解销售情况、用户行为和推广效果等关键指标，以便做出决策和优化策略。</p></li><li><p><strong>安全和隐私</strong>：用户对于数据安全和用户隐私保护非常重视。他们希望系统能够采取合适的安全措施，确保商家和用户的敏感信息不被泄露或滥用。</p></li><li><p>数据<strong>安全和隐私</strong>保护：消费者对于个人数据的安全和隐私保护非常关注。他们希望系统能够采取适当的安全措施，保护他们的个人信息不被泄露或滥用。</p></li></ol><p>这些调研结果将为系统的设计和开发提供指导，并确保系统能够满足商家的期望和需求。在实际的系统设计和开发过程中，进一步细化和详细讨论这些需求，以确保系统能够满足商家的具体业务场景和要求。</p><p> </p><h2 id="需求分析">需求分析</h2><p>下面是基于个性推荐的商家自播带货系统的软件需求分析（<strong>功能性需求</strong>）：</p><ul><li><p>用户管理</p><ul><li><strong>注册和登录</strong>：提供用户注册和登录功能，确保用户身份的唯一性和安全性。</li><li><strong>用户资料管理</strong>：允许用户更改个人资料和密码。</li></ul></li><li><p>观众功能</p><ul><li><p><strong>浏览分区直播</strong>：为用户提供用户所选分区下的直播列表。</p></li><li><p><strong>浏览直播推荐</strong>：为用户提供直播推荐列表，展示不同主播的直播内容。</p></li><li><p><strong>观看直播</strong>：允许用户选择并观看感兴趣的直播。</p></li><li><p><strong>发送弹幕</strong>：提供弹幕功能，让用户可以实时与主播和其他观众互动。</p></li><li><p><strong>个性推荐</strong>：根据用户的历史观看记录、购买行为和个人偏好，为观众提供个性化的推荐直播内容。</p></li><li><p><strong>购物车操作</strong>：允许用户在观看直播时将商品添加到购物车，并允许编辑内容</p></li><li><p><strong>收货信息操作</strong>：允许用户管理、编辑自己的收货信息</p></li><li><p><strong>购买商品</strong>：允许用户在直播过程中购买展示的商品。</p></li><li><p><strong>查看订单</strong>：提供订单管理功能，让用户查看已购买的商品订单。</p></li><li><p><strong>退货</strong>：允许用户在一定的退货期限内申请退货。</p></li></ul></li><li><p>主播功能</p><ul><li><strong>直播管理</strong>：允许主播登录并进行直播操作，同时可以管理直播内容，包括直播时间、主题等。</li><li><strong>弹幕互动</strong>：主播可以与观众通过弹幕进行实时互动。</li><li><strong>上架商品</strong>：提供商品管理功能，让主播可以将商品上架到直播间展示。</li><li><strong>下架商品</strong>：允许主播下架已经售完或不再需要展示的商品。</li><li><strong>流水分析</strong>：提供销售统计和分析功能，让主播了解直播销售情况和观众购买行为。</li></ul></li><li><p>推荐系统</p><ul><li><strong>用户画像建立</strong>：基于观众的历史观看记录、购买行为和评价等信息，建立用户画像。</li><li><strong>推荐算法</strong>：使用个性化推荐算法，根据用户画像和实时观看行为，为观众推荐相关的直播内容和商品。</li><li><strong>实时更新</strong>：推荐系统应该能够实时更新用户画像和推荐结果，以适应观众的兴趣和偏好的变化。</li></ul></li></ul><img src="需求分析.png" alt="需求分析" style="zoom:60%"><p> </p><h2 id="技术选型与技术可行性验证">技术选型与技术可行性验证</h2><h3 id="开发框架">开发框架</h3><p>后端：选用<strong>SprigBoot+SpringMVC</strong>，Spring过于繁杂，SpringCloud略显复杂。</p><p>前端：在调研Android原生与Flutter后选用<strong>Flutter</strong>，Android原生优势在于有更丰富和强大的依赖库，Flutter则有更高的开发效率与更美观的界面。</p><p>其他：MySql数据库，Redis+Hive</p><img src="架构.png" alt="架构" style="zoom:60%"><p> </p><h3 id="相关系统的论文研读与总结">相关系统的论文研读与总结</h3><h4 id="李红阳-刘剑飞-韩长宇等-基于Android的视频直播系统客户端设计与实现-J-南开大学学报-自然科学版-2019-52-02-1-6"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=yO8aEz8cbf2K8RHyPtAekehAkef01lZu36RZZOfbGdl4aUJ9F7zIs3aO9er5bj_xe7JE6RtSMf4SF2Jdn0OoGLFP-_gko4jORTDSeb_ybcecxQhIMzPoPtRLN8KZYfBXQ69fdJlqaTQ=&amp;uniplatform=NZKPT&amp;flag=copy">李红阳,刘剑飞,韩长宇等.基于Android的视频直播系统客户端设计与实现[J].南开大学学报(自然科学版),2019,52(02):1-6.</a></h4><img src="论文方案架构1.jpg" style="zoom:60%"><p>该论文提出的方案是通过Android 手机摄像头和麦克风采集NV21 和PCM 原始数据，调用FFmpeg 将采集到的视音频原始数据进行H.264/AAC 编码并封装成FLV 格式，然后将压缩的数据通过RTMP流媒体协议推流到流媒体服务器；流媒体服务器接收到手机客户端发送的请求后，可向用户提供基于RTMP 协议的流媒体视频直播服务。</p><p>该论文提出了完整的直播系统视频采集与编码推流方案，该方案优点在于通过JNI调用C语言的FFmpeg进行视频编码，能够有较高的编码效率与二次开发灵活性，并进行了丰富的额外功能拓展，同时采用RTMP协议提高了视频流传输效率且有较低的延迟。</p><p>缺点在于需要通过编写 mk 文件来指定所要编译生成的so库名、引用的头文件目录、需要编译的.c 或.cpp 文件以及.a 静态库文件等，从而完成跨平台编译FFmpeg类库的任务，相对较为复杂。提供的基于RTMP 协议的流媒体视频直播服务对于移动客户端来说适用性较差（移动客户端普遍使用HlS格式）</p><h4 id="陈小楠-基于ANDROID平台的视频直播系统的研究与实现-D-北京工业大学-2020-DOI-10-26935-d-cnki-gbjgu-2018-000121"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=yO8aEz8cbf3uenuJDxtPo7huoVONBKQrf5OPDsz8B1u-eNvl4jA7M9-7km8AalmcKeWtPsQSFmZZ7r4S039UaksK3AQQckZSXxwfsJxPbzfG5NVbZwM9C5vXI80d6Vt-Y48Q6hd5YgA=&amp;uniplatform=NZKPT&amp;flag=copy">陈小楠. 基于ANDROID平台的视频直播系统的研究与实现[D].北京工业大学,2020.DOI:10.26935/d.cnki.gbjgu.2018.000121.</a></h4><p>该论文着重对直播平台的交互与适配、直播技术实现以及弹幕等技术问题进行了设计、实现，最后总实现了视频直播系统，进行了完整的软件工程实践，对于直播系统的功能设计有一定借鉴意义。</p><blockquote><p>评价是又臭又长，关键技术点和整体设计放两张图一笔带过，聊天室用了非常简单的socket+handler还疯狂扔截图，一看几乎全是模板代码，最后还不忘扯一句eventBus，又是一笔带过，一点设计都没有，给人感觉就是安卓菜鸡。整篇里能看的也就讲视频播放系统那块，有还算不错的设计。</p></blockquote><h4 id="黄小萍-邓敦杰-基于Android的视频直播系统的设计与实现-J-传媒论坛-2021-4-09-171-172"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=yO8aEz8cbf0KQYXoIgvFYiI6NorEF78qoW2fwCyFKT_y1-krAiZmZYpRIUQsJ6YWRAdg-bCfuWV2yDVkBHD_ZgUUtvqyuCtock0ndKUpH_uRFCjKPvWH4GNSAMOcA--uReGByHW0Bz0=&amp;uniplatform=NZKPT&amp;flag=copy">黄小萍,邓敦杰.基于Android的视频直播系统的设计与实现[J].传媒论坛,2021,4(09):171-172.</a></h4><p>我说这篇论文怎么看着这么熟悉呢，一看参考文献，就是上面的第一篇论文，评价是纯纯浪费时间。</p><p> </p><h3 id="核心功能技术调研-直播播放技术调研">核心功能技术调研 - 直播播放技术调研</h3><h4 id="Android-IJKPlayer">Android - <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/bilibili/ijkplayer">IJKPlayer</a></h4><p>Bilibili开源的 Github 31K+ star 的原生播放器，基于ffmpeg开发，有非常优秀的性能，能够在更低功耗下保证较好的播放效果，且大小很小。缺点在于Android调试相对复杂，<code>method channel</code>带来部分性能损失。</p><h4 id="Flutter-video-player">Flutter - <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pub-web.flutter-io.cn/packages/video_player">video_player</a></h4><p>Flutter最优秀的视频播放依赖之一，有Flutter最简洁强大的视频相关的基础功能提供，维护频繁，缺点在于功能很基本。</p><h4 id="Flutter-video-player-rtmp-ext">Flutter - <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pub-web.flutter-io.cn/packages/video_player_rtmp_ext">video_player_rtmp_ext</a></h4><p>参考ExoPlayer（google推出的开源播放器）与IJKPlayer的以c语言为主的Flutter播放器，对m3u8有额外支持，但是比较古早，维护较少</p><h4 id="Flutter-flutter-gstreamer-player">Flutter - <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pub-web.flutter-io.cn/packages/flutter_gstreamer_player">flutter_gstreamer_player</a></h4><p>流式播放器，貌似不兼容m3u8，且处理较为复杂，排除</p><h4 id="Flutter-just-audio">Flutter - <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pub-web.flutter-io.cn/packages/just_audio">just_audio</a></h4><p>Flutter中UI非常好看的播放器，但大部分UI针对普通视频而非直播，且直播仍然是流式。</p><h4 id="总结">总结</h4><p>直播播放器调研目的在于选择更高效简易的播放器，在平衡 系统设计、开发工作量 和 依赖完善、丰富程度 的基础上，挑选最佳解决方案。</p><p> </p><h3 id="核心功能技术调研-直播推流技术调研">核心功能技术调研 - 直播推流技术调研</h3><h4 id="移动端为主的推流方案-flutter-livepush-plugin">移动端为主的推流方案 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pub-web.flutter-io.cn/packages/flutter_livepush_plugin">flutter_livepush_plugin</a></h4><p>集成Flutter框架的直播推流SDK，好处是api非常丰富，坏处是丰富到无从下手，尝试后发现文档与实际SDK有部分出入，怀疑是文档api长时间未更新，没有其他额外教程，存在较大的试错风险。且使用移动端推流本就非常耗费性能。</p><h4 id="PC端为主的推流方案：-OBS">PC端为主的推流方案： OBS</h4><p>OBS可以说是免费且强大的推流软件，有相当成熟的社区且在直播领域占有非常大的份额。同时也可以使用手机进行串流以进行移动+PC的直播模式（考虑到PC摄像头一般画质比较差）</p><h4 id="总结-2">总结</h4><p>直播推流技术调研的目的在于综合考虑各方解决方案后选择成本更低，效果更好，更容易上手的推流方案，且直接决定了主播端应用的设计、架构和开发。</p><p> </p><h3 id="核心功能技术调研-直播服务器技术调研">核心功能技术调研 - 直播服务器技术调研</h3><h4 id="SRS"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ossrs/srs">SRS</a></h4><p>SRS(Simple Realtime Server)是一个简单高效的实时视频服务器，支持RTMP、WebRTC、HLS、HTTP-FLV、SRT等多种实时流媒体协议。SRS Stack是一个一体化、开箱即用、开源的视频解决方案，可部署在云上或自建机房，以直播和WebRTC等能力赋能你的业务。</p><p>SRS使用C++开发，相对而言有较高的运行与处理性能，有丰富的文档和博客以及完善的社区支持，有非常多的相关功能，缺点就是有点过多。</p><h4 id="livego"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/gwuhaolin/livego">livego</a></h4><p>简单高效的直播服务器：</p><ul><li>安装和使用非常简单；</li><li>纯 Golang 编写，性能高，跨平台；</li><li>支持常用的传输协议、文件格式、编码格式；</li></ul><p>传输协议与编码格式支持相对也较好，有点在于功能简洁，开箱即用。且基于Golang在服务端性能较好。</p><h3 id="核心功能技术原型验证与测试">核心功能技术原型验证与测试</h3><p>完成了部分前端架构设计与UI等代码编写，搭建完成后端推流服务器，并在PC进行了OBS推流与客户端观看的测试。</p><p>代码方面，主要使用移动端video_player、服务器livego、PC推流OBS的方案，图中左下角为电脑摄像头，中间为OBS推流直播，右侧为投影到电脑的手机实时画面，运行的是编写的客户端demo，背景为客户端代码。</p><p>经过验证与测试，证明了这套方案的可行性，同时发现的缺点主要在于直播延迟较大，约20s，主要原因在于服务器带宽较小且有其他服务在运行造成出网延迟较大，此外直播播放选用的是flv格式的视频源，本身就存在较大延迟，换到hlv格式（m3u8源）后有一定缓解。</p><img src="原型与调试.png" alt="原型与调试" style="zoom:60%"><h3 id="非核心功能技术-推荐算法-技术选型">非核心功能技术 - 推荐算法 技术选型</h3><p>常见推荐算法有<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E6%B5%81%E8%A1%8C%E5%BA%A6%E7%9A%84%E7%AE%97%E6%B3%95">基于流行度的算法</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E7%AE%97%E6%B3%95">基于用户行为数据的算法</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E5%86%85%E5%AE%B9%E7%9A%84%E7%AE%97%E6%B3%95">基于内容的算法</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E7%9A%84%E6%8E%A8%E8%8D%90">基于关联规则的推荐</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E6%95%88%E7%94%A8%E6%8E%A8%E8%8D%90">基于效用推荐</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E5%9F%BA%E4%BA%8E%E7%9F%A5%E8%AF%86%E6%8E%A8%E8%8D%90">基于知识推荐</a>，<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html#%E7%BB%84%E5%90%88%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95">组合推荐算法</a>等，综合来看<strong>最终倾向于使用基于标签的算法</strong>，本质上是一种基于内容的算法，这种推荐仅需要得到两类信息: 项目特征的描述和用户过去的喜好信息。</p><ul><li>利用领域专家给项目打标签的方法， 也即<code>传统的分类系统(Taxonomy)</code>，</li><li>另一种是用户给项目打标签， 也即<code>大众分类系统 (Folksolomy)</code>。</li></ul><p>这种推荐系统的优点在于:</p><ul><li><strong>易于实现</strong>，不需要用户数据因此<strong>不存在稀疏性和冷启动问题</strong>。</li><li>基于物品本身特征推荐，因此<strong>不存在过度推荐热门的问题</strong>。</li></ul><p>然而，缺点在于<strong>抽取的特征既要保证准确性又要具有一定的实际意义，否则很难保证推荐结果的相关性</strong>。豆瓣网采用人工维护tag的策略，依靠用户去维护内容的tag的准确性。由于商品是由卖家而非网站登记的，<strong>数据的规范性差</strong>，这会给基于内容的推荐带来一定困难。</p><p>在此过程中我参考了淘宝的推荐策略：</p><blockquote><p>淘宝推荐系统的目标就是要为各个产品提供商品，店铺，人，类目属性各种维度的推荐。它的核心就是以类目属性和社会属性为纽带，将人，商品和店铺建立起联系。</p><p>淘宝的宝贝推荐原则:</p><ul><li>基于内容的和关联规则</li><li>全网优质宝贝算分</li><li>根据推荐属性筛选TOP</li><li>基于推荐属性的关联关系</li><li>采用搜索引擎存储和检索优质宝贝</li><li>加入个性化用户信息</li></ul><p>根据用户的购买和收藏记录产生可推荐的关联规则。对优质宝贝的算分需要考虑商品的相关属性，包括描述，评价，名称，违规，收藏人气，累计销量，UV，以及PV等等。此外，推荐系统根据用户的浏览，收藏，购买行为以及反馈信息，在Hadoop上来计算用户带权重的标签，用于进行个性化推荐。</p><p>在个性化推荐之上，淘宝还实现了基于内容的广告投放。由于个性化推荐出来的物品是用户所感兴趣的，可以想象，基于此之上的广告投放也应该会行之有效。</p><p>众所周知，淘宝具有海量的数据和商品问题，这里列举了淘宝数据的一些参数: 超过8亿种在线商品，100万产品，4万属性，等等。在淘宝实现推荐系统可能遇到的各种各样的难题，其中有:</p><ul><li><strong>商品种类繁多，生命周期短，很难及时收集到足够多的点击或购买数据</strong>，这使得基于用户行为的推荐方法，比如基于物品的推荐方法，发挥空间有限。</li><li><strong>因为商品是由卖家而非网站登记的，数据的规范性差，这又给基于内容的推荐带来了很大的困难。</strong></li><li>8亿种商品中，<strong>重复的商品种类应该非常多，需要尽量避免推荐重复种类的商品给用户，但在数据规范性差、区分度差的情况下，如何归并重复商品种类，这本身也是个很大的难题。</strong></li><li>大多数推荐系统只需要考虑如何满足买家的需求，在淘宝，<strong>还要考虑卖家的需求</strong>。</li></ul><hr><p>摘自：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://pdai.tech/md/algorithm/alg-domain-suggest.html">https://pdai.tech/md/algorithm/alg-domain-suggest.html</a></p></blockquote><p>此外我也考虑了协同过滤算法，相对而言协同过滤侧重使用用户对于商品的历史交互记录，即用户-商品二维矩阵，会有更高的复杂度，实现起来也更复杂，所以最终还是考虑<strong>首选基于内容的算法，其次可以考虑 Item-Based 协同过滤</strong>。</p><blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://d.wanfangdata.com.cn/thesis/ChJUaGVzaXNOZXdTMjAyMzEyMjISCUQwMjQxMzgyNxoIOXB2eDNldGc%3D">沈尚腾. 面向网络直播平台的推荐系统设计与实现[D]. 四川:电子科技大学,2021.</a></p><p>该论文中涉及了采用基于内容的推荐算法的实时推荐模块，介绍了其所设计的推荐算法原理，该算法以基本的内容推荐为基础，借鉴了基于物品的协同过滤思想，通过循环的反馈-学习构成用户画像的动态变化过程，并基于长短期用户画像生成推荐列表。（p24-30）</p><p>在论文第五章中介绍了推荐系统使用的环境依赖与具体部署过程，着重介绍了Hadoop的环境搭建与配置，对推荐系统的开发提供了技术指导。</p><hr><p>tag-based：</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/laiyaling/p/14040569.html">https://www.cnblogs.com/laiyaling/p/14040569.html</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=yO8aEz8cbf0OV5IQdEItXM54AY0zzbb1BGn3pEFJ6qi2aY-CI3mCq5aVYqFGd_qQ79T33AtTntnamDeqcFf6pJkSjCFwe5wWW9wxf7axA4qbzcaRiKZEMqT7Jc_b2FggEJP4FDW0KiDCFTTmrHZLkl0Liz5ejY68iuGwD-pfVwo=&amp;uniplatform=NZKPT&amp;language=CHS">王家南. 基于文本标签的个性化推荐算法研究[D].郑州大学,2019.</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://kns.cnki.net/kcms2/article/abstract?v=yO8aEz8cbf1MwgW_uRFE3jwFtf9FTC7dnLS_bidmvs9ESVZZegJdNHvmIQUdl6l05GukzDcBneQjKapBjxIktorHwwsqh_vmOIv7xDOoznVnkqyB6JYR4p-p6NlKNGVjezIubpVn5UJ_9GYBtNh4RNqb3ANGVJOr&amp;uniplatform=NZKPT&amp;language=CHS">陈正. 基于标签的多媒体推荐算法研究[D].南京理工大学,2021.DOI:10.27241/d.cnki.gnjgu.2021.003174.</a></p><hr><p>Item-Based:</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://dl.acm.org/doi/abs/10.1145/371920.372071">Badrul Sarwar, George Karypis, Joseph Konstan, and John Riedl. 2001. Item-based collaborative filtering recommendation algorithms.</a></p></blockquote><h4 id="意义">意义</h4><p>相对于系统开发中的其他任务，我本人对于推荐算法并不熟悉，所以在调研与原型阶段则需要花更多时间去查找相关资料并学习相关知识，对于这一模块的构建能够在初期就有大概的认识，避免在后期需求分析完成后软件设计时对这一重要模块的设计出现无从下手的情况，作为项目中非常大的不确定因素，前期调研的准确性也有助于我更清晰的对该模块工作量进行评估，从而对项目整体进度把握有更明晰的思路。</p><p> </p><h3 id="非核心功能原型-弹幕墙">非核心功能原型 - 弹幕墙</h3><img src="弹幕墙.png" alt="弹幕墙" style="zoom:35%"><p>比较简单的功能，这里用原型验证其可行性。</p><p> </p><h2 id="软件设计">软件设计</h2><h3 id="概要设计">概要设计</h3><p>系统纵向分为三端，即<strong>主播管理端，服务端，用户端</strong>。</p><p>业务上，将系统分为<strong>基本业务部分、直播流处理部分</strong>与<strong>推荐系统部分</strong>三大部分。</p><img src="用例图.png" alt="用例图" style="zoom:60%"><p>横向分为四个模块，首先是<strong>直播服务模块</strong>，主要功能包括观众功能中的<strong>浏览直播推荐、观看直播、发送弹幕</strong>，主播功能中的<strong>直播管理与弹幕互动</strong>，其次是<strong>商品管理模块</strong>，主要功能包括观众功能中的购买商品、购物车、收货地址相关操作，查看订单、退货，主播功能中的<strong>上架商品、下架商品</strong>，第三是<strong>数据处理模块</strong>，主要包括主播功能中的<strong>流水分析</strong>以及<strong>推荐系统中的全部功能</strong>，最后是<strong>用户管理模块</strong>，包括注册登录与用户信息管理。如下图</p><img src="系统横向模块划分.png" alt="系统横向模块划分" style="zoom:60%"><p> </p><h4 id="UI概要">UI概要</h4><p>用户所使用的app移动客户端方面，参照谷歌 <strong>Material Design3</strong> 风格规范进行UI设计，主要包括<strong>直播间分区与展示、直播间观看与交互、用户个人界面、商品购买相关界面</strong>等UI设计工作，主要参考了主流直播平台交互进行设计，同时在购物历史等界面借鉴了经典电商平台如淘宝等应用的UI设计思路，主打简洁高效。</p><img src="UI概要-app.png" alt="UI概要-app" style="zoom:100%"><p> </p><p>主播所使用的PC客户端方面，参照微软<strong>Fluent Design</strong> 风格规范进行UI设计，主要涉及<strong>统计图绘制、商品操作相关界面、弹幕展示与交互</strong>等UI设计工作，主要交互思路参考了bilibili直播姬的交互设计，同时增加系统托盘等桌面端常用小功能及其UI。</p><p>统计图概要Demo：</p><img src="UI概要-exe-Chart.png" alt="UI概要-客户端-Chart" style="zoom:60%"><p>迭代计划：增加<strong>数据筛选与对比</strong>功能，酌情<strong>丰富图表种类</strong></p><p>弹幕概要Demo：（半透明风格）</p><img src="UI概要-exe-弹幕.png" alt="UI概要-客户端-弹幕交互" style="zoom:60%"><p>迭代计划：UI优化（与移动客户端UI同步优化迭代）</p><h4 id="数据库-基本业务部分概要设计">数据库-基本业务部分概要设计</h4><p>E-R模型如下：</p><img src="ER.png" alt="ER模型" style="zoom:100%"><p> </p><h3 id="详细设计">详细设计</h3><h4 id="关键模块流程">关键模块流程</h4><p>用户看直播、交互与购物</p><img src="顺序图-用户.png" alt="顺序图-用户看直播、交互与购物" style="zoom:80%"><p>主播开直播、交互与商品管理</p><img src="顺序图-主播.png" alt="顺序图-主播开直播、交互与商品管理" style="zoom:80%"><p> </p><h4 id="关键业务流程与相关数据结构">关键业务流程与相关数据结构</h4><p>用户进入直播间购物流程图如下</p><img src="购物流程图.png" alt="购物流程图" style="zoom:80%"><p><strong>相关数据结构</strong></p><img src="Commodity.png" alt="商品数据结构示意" style="zoom:80%"><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:live_video_commerce/entity/commodity/commodity_specification.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Commodity</span></span>&#123;</span><br><span class="line">  <span class="comment">//商品id</span></span><br><span class="line">  <span class="built_in">int</span> cid;</span><br><span class="line">  <span class="comment">//商品名称</span></span><br><span class="line">  <span class="built_in">String</span> commodityName;</span><br><span class="line">  <span class="comment">//主播id</span></span><br><span class="line">  <span class="built_in">String</span> anchorId;</span><br><span class="line">  <span class="comment">//主播名称</span></span><br><span class="line">  <span class="built_in">String</span> anchorName;</span><br><span class="line">  <span class="comment">//商品最低单价</span></span><br><span class="line">  <span class="built_in">double</span> price;</span><br><span class="line">  <span class="comment">//运费</span></span><br><span class="line">  <span class="built_in">double</span> freight;</span><br><span class="line">  <span class="comment">//商品规格</span></span><br><span class="line">  <span class="built_in">List</span>&lt;CommoditySpecification&gt; specification;</span><br><span class="line">  <span class="comment">//商品图片</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; imageUrl;</span><br><span class="line"></span><br><span class="line">  Commodity(&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.cid,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.commodityName,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.anchorId,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.anchorName,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.price,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.freight,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.specification,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.imageUrl,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Commodity.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;CommoditySpecification&gt; specification = (json[<span class="string">&#x27;specification&#x27;</span>] <span class="keyword">as</span> <span class="built_in">List</span>&lt;<span class="built_in">dynamic</span>&gt;).map((e) =&gt; CommoditySpecification.fromJson(e)).toList();</span><br><span class="line">    <span class="comment">//price为specification的最小值</span></span><br><span class="line">    <span class="built_in">double</span> price = specification[<span class="number">0</span>].price;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> element <span class="keyword">in</span> specification) &#123;</span><br><span class="line">      <span class="keyword">if</span>(element.price &lt; price)&#123;</span><br><span class="line">        price = element.price;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; images = (json[<span class="string">&#x27;imageUrl&#x27;</span>] <span class="keyword">as</span> <span class="built_in">List</span>).map((item) =&gt; item <span class="keyword">as</span> <span class="built_in">String</span>).toList();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Commodity(</span><br><span class="line">      cid: json[<span class="string">&#x27;cid&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>,</span><br><span class="line">      commodityName: json[<span class="string">&#x27;commodityName&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">      anchorId: json[<span class="string">&#x27;anchorId&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">      anchorName: json[<span class="string">&#x27;anchorName&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">      price: price,</span><br><span class="line">      freight: json[<span class="string">&#x27;freight&#x27;</span>] <span class="keyword">as</span> <span class="built_in">double</span>,</span><br><span class="line">      specification: specification,</span><br><span class="line">      imageUrl: images,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; toJson () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&#x27;id&#x27;</span>: cid,</span><br><span class="line">      <span class="string">&#x27;name&#x27;</span>: commodityName,</span><br><span class="line">      <span class="string">&#x27;anchorId&#x27;</span>: anchorId,</span><br><span class="line">      <span class="string">&#x27;anchorName&#x27;</span>: anchorName,</span><br><span class="line">      <span class="string">&#x27;price&#x27;</span>: price,</span><br><span class="line">      <span class="string">&#x27;freight&#x27;</span>: freight,</span><br><span class="line">      <span class="string">&#x27;specification&#x27;</span>: specification,</span><br><span class="line">      <span class="string">&#x27;image&#x27;</span>: imageUrl,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//深拷贝</span></span><br><span class="line">  Commodity clone() &#123;</span><br><span class="line">    <span class="keyword">return</span> Commodity(</span><br><span class="line">      cid: cid,</span><br><span class="line">      commodityName: commodityName,</span><br><span class="line">      anchorId: anchorId,</span><br><span class="line">      anchorName: anchorName,</span><br><span class="line">      price: price,</span><br><span class="line">      freight: freight,</span><br><span class="line">      specification: specification.map((e) =&gt; e.clone()).toList(),</span><br><span class="line">      imageUrl: imageUrl,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommoditySpecification</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> cid;</span><br><span class="line">  <span class="built_in">int</span> id;</span><br><span class="line">  <span class="built_in">String</span> imageUrl;</span><br><span class="line">  <span class="built_in">String</span> specification;</span><br><span class="line">  <span class="built_in">double</span> price;</span><br><span class="line"></span><br><span class="line">  CommoditySpecification(&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.cid,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.id,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.imageUrl,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.specification,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.price,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> CommoditySpecification.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="keyword">return</span> CommoditySpecification(</span><br><span class="line">      cid: json[<span class="string">&#x27;cid&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>,</span><br><span class="line">      id: json[<span class="string">&#x27;id&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>,</span><br><span class="line">      imageUrl: json[<span class="string">&#x27;imageUrl&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">      specification: json[<span class="string">&#x27;specification&#x27;</span>] <span class="keyword">as</span> <span class="built_in">String</span>,</span><br><span class="line">      price: json[<span class="string">&#x27;price&#x27;</span>] <span class="keyword">as</span> <span class="built_in">double</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; toJson () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&#x27;cid&#x27;</span>: cid,</span><br><span class="line">      <span class="string">&#x27;id&#x27;</span>: id,</span><br><span class="line">      <span class="string">&#x27;imageUrl&#x27;</span>: imageUrl,</span><br><span class="line">      <span class="string">&#x27;specification&#x27;</span>: specification,</span><br><span class="line">      <span class="string">&#x27;price&#x27;</span>: price,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//深拷贝</span></span><br><span class="line">  CommoditySpecification clone() &#123;</span><br><span class="line">    <span class="keyword">return</span> CommoditySpecification(</span><br><span class="line">      cid: cid,</span><br><span class="line">      id: id,</span><br><span class="line">      imageUrl: imageUrl,</span><br><span class="line">      specification: specification,</span><br><span class="line">      price: price,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> </p><h4 id="数据库详细设计">数据库详细设计</h4><p>用户表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> users</span><br><span class="line">(</span><br><span class="line">    uid       <span class="type">char</span>(<span class="number">11</span>)      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    nickname  <span class="type">varchar</span>(<span class="number">8</span>)    <span class="keyword">null</span>,</span><br><span class="line">    gender    bool          <span class="keyword">null</span>,</span><br><span class="line">    login_key <span class="type">varchar</span>(<span class="number">128</span>)  <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    avatar    <span class="type">varchar</span>(<span class="number">128</span>)  <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> users_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index users_uid_uindex</span><br><span class="line">    <span class="keyword">on</span> users (uid);</span><br></pre></td></tr></table></figure><p>用户收货信息表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> receiving_info</span><br><span class="line">(</span><br><span class="line">    id               <span class="type">int</span> auto_increment ,</span><br><span class="line">    uid              <span class="type">char</span>(<span class="number">11</span>)     <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    name             <span class="type">varchar</span>(<span class="number">8</span>)   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    phone             <span class="type">char</span>(<span class="number">11</span>)     <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    locate_area       <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    detailed_address  <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">constraint</span> receiving_info_pk</span><br><span class="line">        <span class="keyword">primary</span> key (id),</span><br><span class="line">    <span class="keyword">constraint</span> receiving_info_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index receiving_info_id_uindex</span><br><span class="line">    <span class="keyword">on</span> receiving_info (id);</span><br></pre></td></tr></table></figure><p>用户默认收货信息表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user_default_receiving_info</span><br><span class="line">(</span><br><span class="line">    uid <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    id  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> user_default_receiving_info_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid),</span><br><span class="line">    <span class="keyword">constraint</span> user_default_receiving_info_receiving_info_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (id) <span class="keyword">references</span> receiving_info (id),</span><br><span class="line">    <span class="keyword">constraint</span> user_default_receiving_info_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index user_default_receiving_info_uid_uindex</span><br><span class="line">    <span class="keyword">on</span> user_default_receiving_info (uid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>主播表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> anchor</span><br><span class="line">(</span><br><span class="line">    uid      <span class="type">char</span>(<span class="number">11</span>)     <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    nickname <span class="type">varchar</span>(<span class="number">8</span>)   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    gender   bool         <span class="keyword">null</span>,</span><br><span class="line">    avatar   <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> anchor_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index anchor_uid_uindex</span><br><span class="line">    <span class="keyword">on</span> anchor (uid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>商品表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> commodity</span><br><span class="line">(</span><br><span class="line">    cid            <span class="type">int</span> auto_increment,</span><br><span class="line">    uid            <span class="type">char</span>(<span class="number">11</span>)         <span class="keyword">not</span> <span class="keyword">null</span>,# 所属主播</span><br><span class="line">    rid            <span class="type">int</span>              <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commodity_name <span class="type">varchar</span>(<span class="number">32</span>)      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    price          <span class="keyword">double</span>           <span class="keyword">not</span> <span class="keyword">null</span>, #应该删掉</span><br><span class="line">    freight        <span class="keyword">double</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> commodity_pk</span><br><span class="line">        <span class="keyword">primary</span> key (cid),</span><br><span class="line">    <span class="keyword">constraint</span> commodity_live_room_rid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (rid) <span class="keyword">references</span> live_room (rid),</span><br><span class="line">    <span class="keyword">constraint</span> commodity_anchor_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> anchor (uid);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index commodity_cid_uindex</span><br><span class="line">    <span class="keyword">on</span> commodity (cid);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">create</span> index commodity_uid_index</span><br><span class="line">    <span class="keyword">on</span> commodity (uid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>商品图片</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> commodity_images</span><br><span class="line">(</span><br><span class="line">    cid   <span class="type">int</span>          <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    image <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> commodity_images_pk</span><br><span class="line">        <span class="keyword">primary</span> key (cid,image),</span><br><span class="line">    <span class="keyword">constraint</span> commodity_images_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (cid) <span class="keyword">references</span> commodity (cid)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>商品规格表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> commodity_specification</span><br><span class="line">(</span><br><span class="line">    cid           <span class="type">int</span>          <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    id            <span class="type">int</span>          <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    image_url     <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification <span class="type">varchar</span>(<span class="number">32</span>)  <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    price         <span class="keyword">double</span>       <span class="keyword">not</span> <span class="keyword">null</span>，</span><br><span class="line">    <span class="keyword">constraint</span> commodity_specification_pk</span><br><span class="line">        <span class="keyword">primary</span> key (cid,id),</span><br><span class="line">    <span class="keyword">constraint</span> commodity_specification_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (cid) <span class="keyword">references</span> commodity (cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index commodity_specification_id_index</span><br><span class="line">    <span class="keyword">on</span> commodity_specification (id);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>商品浏览历史</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> commodity_browse_history</span><br><span class="line">(</span><br><span class="line">    uid  <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    browse_date <span class="type">date</span>     <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> commodity_browse_history_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid,cid,browse_date),</span><br><span class="line">    <span class="keyword">constraint</span> commodity_browse_history_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>板块表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> section</span><br><span class="line">(</span><br><span class="line">    sid          <span class="type">int</span> auto_increment,</span><br><span class="line">    section_name <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> section_pk</span><br><span class="line">        <span class="keyword">primary</span> key (sid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index section_sid_uindex</span><br><span class="line">    <span class="keyword">on</span> section (sid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>直播间表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> live_room</span><br><span class="line">(</span><br><span class="line">    rid         <span class="type">int</span> auto_increment,</span><br><span class="line">    uid         <span class="type">char</span>(<span class="number">11</span>)     <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    section_id  <span class="type">int</span>          <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">    room_name   <span class="type">varchar</span>(<span class="number">8</span>)   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    live_url    <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cover_url   <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    danmu_url   <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    room_description <span class="type">varchar</span>(<span class="number">32</span>)  <span class="keyword">null</span>,</span><br><span class="line">    live_status bool         <span class="keyword">not</span> nnull,</span><br><span class="line">    <span class="keyword">constraint</span> live_room_pk</span><br><span class="line">        <span class="keyword">primary</span> key (rid),</span><br><span class="line">    <span class="keyword">constraint</span> live_room_anchor_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> anchor (uid),</span><br><span class="line">    <span class="keyword">constraint</span> live_room_section_sid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (section_id) <span class="keyword">references</span> section (sid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index live_room_rid_uindex</span><br><span class="line">    <span class="keyword">on</span> live_room (rid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>弹幕表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> bullet</span><br><span class="line">(</span><br><span class="line">    rid        <span class="type">int</span>         <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    uid        <span class="type">char</span>(<span class="number">11</span>)    <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    time_stamp <span class="type">char</span>(<span class="number">64</span>)    <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    content    <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> bullet_pk</span><br><span class="line">        <span class="keyword">primary</span> key (rid,uid,time_stamp),</span><br><span class="line">    <span class="keyword">constraint</span> bullet_anchor_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> anchor (uid),</span><br><span class="line">    <span class="keyword">constraint</span> bullet_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index bullet_uindex</span><br><span class="line">    <span class="keyword">on</span> bullet (rid,uid,time_stamp);</span><br></pre></td></tr></table></figure><p>订单表(废弃)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orders</span><br><span class="line">(</span><br><span class="line">    oid               <span class="type">int</span> auto_increment,</span><br><span class="line">    uid               <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    receiving_info_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commodity_id      <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification_id  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    status            <span class="type">smallint</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    created_at        datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    pay_at            datetime <span class="keyword">null</span>,</span><br><span class="line">    ship_at           datetime <span class="keyword">null</span>,</span><br><span class="line">    complete_at       datetime <span class="keyword">null</span>,</span><br><span class="line">    total_price       <span class="keyword">double</span>   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    quantity          <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> orders_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> orders_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (commodity_id) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> orders_receiving_info_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (receiving_info_id) <span class="keyword">references</span> receiving_info (id),</span><br><span class="line">    <span class="keyword">constraint</span> orders_commodity_specification_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (specification_id) <span class="keyword">references</span> commodity_specification (id),</span><br><span class="line">    <span class="keyword">constraint</span> orders_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index orders_oid_uindex</span><br><span class="line">    <span class="keyword">on</span> orders (oid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>订单商品信息表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_commodity</span><br><span class="line">(</span><br><span class="line">    oid               <span class="type">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    uid               <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commodity_id      <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    receiving_info_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification_id  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    quantity          <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    total_price       <span class="keyword">double</span>   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (commodity_id) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_commodity_specification_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (specification_id) <span class="keyword">references</span> commodity_specification (cid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_receiving_info_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (receiving_info_id) <span class="keyword">references</span> receiving_info (id),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index order_commodity_oid_uindex</span><br><span class="line">    <span class="keyword">on</span> order_commodity (oid);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>订单状态表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_status</span><br><span class="line">(</span><br><span class="line">    oid          <span class="type">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    order_status <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    create_at   datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    pay_at       datetime <span class="keyword">null</span>,</span><br><span class="line">    ship_at      datetime <span class="keyword">null</span>,</span><br><span class="line">    complete_at  datetime <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> order_status_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> order_status_order_commodity_oid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (oid) <span class="keyword">references</span> order_commodity (oid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>用户关注的直播间</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user_room_follow</span><br><span class="line">(</span><br><span class="line">    uid     <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    room_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> user_room_follow_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid,room_id),</span><br><span class="line">    <span class="keyword">constraint</span> user_room_follow_live_room_rid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (room_id) <span class="keyword">references</span> live_room (rid),</span><br><span class="line">    <span class="keyword">constraint</span> user_room_follow_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>用户的商品浏览历史</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user_commerce_browse</span><br><span class="line">(</span><br><span class="line">    uid         <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commerce_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    browse_time datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> user_commerce_browse_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid,commerce_id),</span><br><span class="line">    <span class="keyword">constraint</span> user_commerce_browse_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (commerce_id) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> user_commerce_browse_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index user_commerce_browse_index</span><br><span class="line">    <span class="keyword">on</span> user_commerce_browse(uid,commerce_id);</span><br></pre></td></tr></table></figure><p>用户的直播浏览历史</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> user_room_browse</span><br><span class="line">(</span><br><span class="line">    uid         <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    room_id     <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    browse_time datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> user_room_browse_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid,room_id),</span><br><span class="line">    <span class="keyword">constraint</span> user_room_browse_room_rid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (room_id) <span class="keyword">references</span> live_room (rid),</span><br><span class="line">    <span class="keyword">constraint</span> user_room_browse_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index user_room_browse_index</span><br><span class="line">    <span class="keyword">on</span> user_room_browse(uid,room_id);</span><br></pre></td></tr></table></figure><p>用户加购</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> shopping_cart</span><br><span class="line">(</span><br><span class="line">    uid         <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid         <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    counts      <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    add_time datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> shopping_cart_pk</span><br><span class="line">        <span class="keyword">primary</span> key (uid,cid,specification_id),</span><br><span class="line">    <span class="keyword">constraint</span> shopping_cart_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (cid) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> shopping_cart_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid),</span><br><span class="line">    <span class="keyword">constraint</span> shopping_cart_specification_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (specification_id) <span class="keyword">references</span> commodity_specification(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index shopping_cart_index</span><br><span class="line">    <span class="keyword">on</span> shopping_cart(uid,cid,specification_id);</span><br></pre></td></tr></table></figure><p> </p><h4 id="系统基本业务模块功能IPO详细设计">系统基本业务模块功能IPO详细设计</h4><img src="系统模块功能详细设计.png" alt="系统模块功能详细设计" style="zoom:60%"><p> </p><h2 id="开发">开发</h2><h3 id="API接口">API接口</h3><h3 id="UI与相应业务逻辑迭代">UI与相应业务逻辑迭代</h3><img src="直播购物UI.png" alt="直播购物UI" style="zoom:60%"> <img src="个人购物结算UI.png" alt="个人购物结算UI" style="zoom:60%"><p>此次迭代在原有的UI的Demo的基础上，对直播间中商品展示以及购买、结算的UI与逻辑进行了设计与开发，以详细设计的业务流程为蓝本进行了逻辑设计与开发，完成了一组可使用的直播间商品浏览、购买、结算等一系列操作的用户界面设计开发。</p><p>此外，对原有的”我的“界面进行了丰富与细化，将其重构为功能入口，同时实现了购物车选择、删除、增删、结算等操作的UI与逻辑。</p><h4 id="迭代信息与记录">迭代信息与记录</h4><p>相关Git记录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">commit a6f73d26cd1bb822097159c8343d3a17c99a21fe</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Thu Jan 25 22:51:13 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix:收货信息将地址属性拆分；feat：新增、编辑收货信息demo UI</span><br><span class="line"></span><br><span class="line">commit d1a100bf12c739f3db7fbab38995639d96743c38</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Thu Jan 25 19:41:14 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix:收货信息增加id；feat：我的收货信息初步UI</span><br><span class="line"></span><br><span class="line">commit 89cdc604482a45fa5813304529aeb09adbb7d9eb</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Thu Jan 25 09:20:22 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix:浅拷贝造成的bug</span><br><span class="line"></span><br><span class="line">commit d63cb5fbf24dcc075ab2d7a6c5c7a4472e8cfa97</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Wed Jan 24 23:51:39 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:规格选择，修正specification设计问题（没有价格），新增规格选择UI与逻辑</span><br><span class="line">    todo：存在一个bug：选择规格后从确认订单界面返回重新选择规格时只剩选过的规格，原因应该是浅拷贝。不如直接改成传递selectedIndex值</span><br><span class="line"></span><br><span class="line">commit e9d62c4b09f6595842da2c9b44874cf5d7951425</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Mon Jan 22 22:50:11 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix：修正order数据结构，修正件数计算组件的回调使用错误；feat：购物车跳转到订单确认，订单确认中订单卡片支持多同一主播商品，增加件数与价格计算逻辑</span><br><span class="line"></span><br><span class="line">commit 1195cf563ae69fef44c904902e5833a35a47b1a6</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Mon Jan 22 20:50:21 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:调整购物车商品删除逻辑</span><br><span class="line"></span><br><span class="line">commit e8a812cf55307be667e6743ebc1aa2b032c3754b</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Mon Jan 22 20:28:05 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:调整购物车商品选择逻辑</span><br><span class="line"></span><br><span class="line">commit 530c14efcc96ea5b14fcda35ffc494c7376016d2</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Mon Jan 22 11:02:19 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:调整购物车卡片样式</span><br><span class="line"></span><br><span class="line">commit e410a9d6a46782a0997714ac262d81b1a1d3048b</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Mon Jan 22 10:00:43 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:购物车逻辑</span><br><span class="line"></span><br><span class="line">commit b724cca7e3ac8f8e6ce18f0e39bd813a5df3adfb</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 21 23:40:13 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:购物车界面UI demo，计数组件新增自定义参数：大小，排布</span><br><span class="line"></span><br><span class="line">commit 2a4d2cae304743cc51321106835b380327c969b3</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 21 16:08:45 2024 +0800</span><br><span class="line"></span><br><span class="line">    refactor:重构用户界面</span><br><span class="line"></span><br><span class="line">commit 9742df1768077d94363406cd852dadf96bdb9cda</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 21 11:13:24 2024 +0800</span><br><span class="line"></span><br><span class="line">    style：去除直播间界面弃用代码</span><br><span class="line"></span><br><span class="line">commit e7a2495b0dfb8a6c98a2f0fd7df570ffbd064298</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 21 11:11:23 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:针对直播界面中商品相关的逻辑解耦</span><br><span class="line"></span><br><span class="line">commit ad1ab1265c5f0bceb281d5381e43ce097f27d4d0</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 21 10:36:55 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat：确认订单时增删件数</span><br><span class="line"></span><br><span class="line">commit a4f2df7929a2c737bb27e729de71fea8fa76c3d8</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sat Jan 20 22:50:55 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat：确认订单</span><br><span class="line"></span><br><span class="line">commit 7247e4bfc10104715fc14091dece7a4f6bceee37</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sat Jan 20 17:21:41 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:商品规格对象化</span><br><span class="line"></span><br><span class="line">commit d4c9c2fc009f51d32ba68ba205a1b1700ec5dcda</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Fri Jan 19 23:44:37 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:直播商品浏览与商品详情</span><br><span class="line"></span><br><span class="line">commit 7a4141541b5a28138e7ddaeadec58f0a2ed081b4</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Fri Jan 19 18:00:18 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:商品列表</span><br><span class="line"></span><br><span class="line">commit 4cbc485798a9f036c9294dd69d4deee77f8e9ce9</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Fri Jan 19 17:06:20 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:消息列表自动滚动到底部</span><br><span class="line"></span><br><span class="line">commit 87464b52ad8042b6ab52824f9accd2a1b848930c</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Fri Jan 19 16:39:26 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix:修复弹幕无法隐藏</span><br><span class="line"></span><br><span class="line">commit 2b5eeab4dbc76494580b80d32abd6060c19ac368</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Thu Jan 18 23:19:23 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:尝试重构直播间：speed_dial方案（弃用）购物组件可考虑该方案</span><br><span class="line"></span><br><span class="line">commit 8482a4979eb586ad818b8ea5011bc8988ec87e24</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Thu Jan 18 19:51:50 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:重构直播间 demo</span><br></pre></td></tr></table></figure><p> </p><h3 id="直播间逻辑与功能迭代">直播间逻辑与功能迭代</h3><blockquote><p>主要参考学习了 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xiaoyaocz/dart_simple_live">dart_simple_live</a> 的直播播放逻辑</p></blockquote><p>此次迭代的主要工作是针对直播播放器原型的问题进行改进优化，同时对弹幕性能差、直播控制代码等进行优化。</p><p>直播播放器原型的问题主要在于UI与交互逻辑耦合度较高，导致整体性能差，代码维护困难，使用体验欠佳。究其原因，一方面，在于原型使用的<code>video_player</code>依赖只是提供了最基本的视频播放功能，视频控制部分的UI与逻辑需要开发者自己设计开发，该过程尤其是播放器整体的代码划分与设计对开发者要求较高；另一方面，在于原型开发时并没有进行太过细致设计，仅完成了相应功能，所以需要开发阶段进行详细分析、设计与重构。</p><p>此次迭代我参考了现有播放器的播放逻辑，一方面，针对播放器的依赖使用进行重新考虑，另一方面，主要学习了现有成熟项目的直播与直播控制的模块设计，针对直播播放、弹幕、手势、控制逻辑等子模块的设计与解耦进行了学习与思考。</p><p>具体UML如下：</p><img src="播放器逻辑迭代1.png" alt="播放器逻辑迭代" style="zoom:100%"><blockquote><p>其中，Mixin 是一种在多个类层次结构中重用代码的方法。mixin 是面向对象程序设计语言中的类，其他类可以访问 mixin 类的方法、变量而不必成为其子类。Mixin 的作用就是 <strong>在多个类层次结构中重用类的代码</strong>，在类中混入其他功能，来增强代码的复用能力。<strong>可以使用 <code>with</code> 关键字将多个 mixins 放入同一个类中</strong>，而且 dart 对这个数量没有作任何限制。</p><p>在逻辑表现上，mixin的作用类似于聚合，所以图中用聚合来表示</p></blockquote><p>具体思路为：将不同子模块控制代码分别在不同Mixin中进行定义实现，通过继承自<code>GetController</code>的<code>PlayerController</code>完成对播放器接口的逻辑封装实现，最终由<code>LiveRoomController</code>继承该控制类并完成界面的属性、数据、状态的管理以及具体方法的逻辑实现。</p><h4 id="迭代信息与记录-2">迭代信息与记录</h4><p>相关git记录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">commit 7ba03c5eaf029bc6781d986be62b2d129d1c1fe6</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 18:53:55 2024 +0800</span><br><span class="line"></span><br><span class="line">    fix:修正一系列直播bug</span><br><span class="line"></span><br><span class="line">commit 7b36c835ee0a2cdefe386c9e21f8a2a25158f96c</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 18:06:12 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat：路由换为适合get的路由方式；fix：修正controller没有put</span><br><span class="line"></span><br><span class="line">commit 43fc04277281024acb619dd90c6b2492bf5a80c9</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 12:50:29 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:直播间部分控制逻辑；修正直播间对象的数据结构</span><br><span class="line"></span><br><span class="line">commit be5dbdbf8c9beea897aeefcb4bf376ebc2f3a339</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 10:56:20 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:直播控制初步 与视频控制</span><br><span class="line"></span><br><span class="line">commit 051f4c7551755f562cf3e7cbc3b949e177991476</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 10:04:12 2024 +0800</span><br><span class="line"></span><br><span class="line">    feat:player控制器</span><br><span class="line"></span><br><span class="line">commit 6bab2a46ad13bd6ca545564427c512ccbe3d1fb9</span><br><span class="line">Author: Karl Eric &lt;2134356214@qq.com&gt;</span><br><span class="line">Date:   Sun Jan 28 09:14:43 2024 +0800</span><br><span class="line"></span><br><span class="line">    迁移弹幕</span><br></pre></td></tr></table></figure><p> </p><h3 id="订单业务数据结构与数据库设计迭代">订单业务数据结构与数据库设计迭代</h3><p>在设计订单相关的数据库结构时，更多地直接参考了数据结构设计，而没有考虑业务本身以及数据库范式，导致在后端业务开发时发现数据库设计不能很好地满足业务的效率需求。</p><p>此次迭代主要针对订单相关的数据库以及数据结构进行重构与迭代。首先针对原有的数据库表进行了分析，造成其效率低的主要原因在于，存在用户一次性购买了同一主播的多个商品的情况，这些订单的订单号、订单的状态信息都是相同的，而这些信息在数据库表中相当于被多次存储，属于无效的<strong>冗余</strong>数据，实际上，该数据库表不满足范式中的2NF。同时，在逻辑上，订单的状态数据与订单的商品购买数据本就是不相关的数据结构，<strong>耦合</strong>在一张表中导致在单独查询订单商品数据或状态数据时都需要到同一张表中查询，导致在数据库结构需要改动时需要同时检查订单商品数据和状态数据的所有业务代码。</p><p>基于此，此次迭代主要完成了将订单业务数据结构与数据库重构，将其订单商品数据与状态数据解耦，重构对应的数据结构并重新进行数据库设计，主要的类及其关系设计如下类图所示：</p><img src="订单业务数据结构与数据库设计迭代1.png" alt="订单业务数据结构与数据库设计迭代" style="zoom:100%"><p>主要将原本的订单实体类中订单的状态数据与订单的商品购买数据进行了拆分，同时根据业务需要对细粒度进行划分，不同细粒度对应不同对象，细粒度由小到大分为<code>OrderMini</code>，<code>Order</code>，<code>OrderDetail</code>，其中<code>OrderMini</code>主要用作订单列表中对订单的简略信息获取，<code>Order</code>主要用于仅需要获取订单状态+商品信息或订单状态+收货信息或订单状态+商品规格等不完全组合场景，<code>OrderDetail</code>主要用作对单笔订单详情的展示。</p><p>同时基于此思路完成数据库订单表的重构，由于订单业务与其他业务的弱耦合，所以没有其他业务模块受影响。主要思路即将原表拆分为 订单商品信息表和订单状态表，可以通过订单id进行关联，具体表结构见迭代信息与记录。</p><p>此次迭代与重构主要解决了订单业务在开发中发现的设计与实际的不契合的问题，针对数据结构与数据库的可读性、可维护性与效率进行了优化，提高了业务可用性、稳定性与健壮性。</p><h4 id="迭代信息与记录-3">迭代信息与记录</h4><p>原数据库表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orders</span><br><span class="line">(</span><br><span class="line">    oid               <span class="type">int</span> auto_increment,</span><br><span class="line">    uid               <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    receiving_info_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commodity_id      <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification_id  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    status            <span class="type">smallint</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    created_at        datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    pay_at            datetime <span class="keyword">null</span>,</span><br><span class="line">    ship_at           datetime <span class="keyword">null</span>,</span><br><span class="line">    complete_at       datetime <span class="keyword">null</span>,</span><br><span class="line">    total_price       <span class="keyword">double</span>   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    quantity          <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> orders_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> orders_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (commodity_id) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> orders_receiving_info_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (receiving_info_id) <span class="keyword">references</span> receiving_info (id),</span><br><span class="line">    <span class="keyword">constraint</span> orders_commodity_specification_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (specification_id) <span class="keyword">references</span> commodity_specification (id),</span><br><span class="line">    <span class="keyword">constraint</span> orders_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index orders_oid_uindex</span><br><span class="line">    <span class="keyword">on</span> orders (oid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>迭代后数据库表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 订单商品信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_commodity</span><br><span class="line">(</span><br><span class="line">    oid               <span class="type">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    uid               <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    commodity_id      <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    receiving_info_id <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    specification_id  <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    quantity          <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    total_price       <span class="keyword">double</span>   <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_commodity_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (commodity_id) <span class="keyword">references</span> commodity (cid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_commodity_specification_cid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (specification_id) <span class="keyword">references</span> commodity_specification (cid),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_receiving_info_id_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (receiving_info_id) <span class="keyword">references</span> receiving_info (id),</span><br><span class="line">    <span class="keyword">constraint</span> order_commodity_users_uid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (uid) <span class="keyword">references</span> users (uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index order_commodity_oid_uindex</span><br><span class="line">    <span class="keyword">on</span> order_commodity (oid);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 订单状态表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> order_status</span><br><span class="line">(</span><br><span class="line">    oid          <span class="type">char</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    order_status <span class="type">int</span>      <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    create_at   datetime <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    pay_at       datetime <span class="keyword">null</span>,</span><br><span class="line">    ship_at      datetime <span class="keyword">null</span>,</span><br><span class="line">    complete_at  datetime <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> order_status_pk</span><br><span class="line">        <span class="keyword">primary</span> key (oid),</span><br><span class="line">    <span class="keyword">constraint</span> order_status_order_commodity_oid_fk</span><br><span class="line">        <span class="keyword">foreign</span> key (oid) <span class="keyword">references</span> order_commodity (oid)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> </p><h2 id="测试">测试</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://zwn2001.space">琉璃月</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zwn2001.space/posts/Undergraduate-Course/%E6%AF%95%E8%AE%BE%E4%BB%8E%E8%B0%83%E7%A0%94%E5%88%B0%E5%AE%8C%E5%B7%A5/">https://zwn2001.space/posts/Undergraduate-Course/%E6%AF%95%E8%AE%BE%E4%BB%8E%E8%B0%83%E7%A0%94%E5%88%B0%E5%AE%8C%E5%B7%A5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zwn2001.space" target="_blank">ZWN's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%AF%95%E8%AE%BE/">毕设</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/24.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/Graduate-Works/Experiences/2024BUAA%E5%A4%8D%E8%AF%95%E4%B8%93%E4%B8%9A%E8%AF%BE%E6%8B%BE%E9%81%97/" title="BUAA复试专业课拾遗"><img class="cover" src="/img/cover/54.jpg" onerror='onerror=null,src="/img/404.webp"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">BUAA复试专业课拾遗</div></div></a></div><div class="next-post pull-right"><a href="/posts/Undergraduate-Course/2023%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BE%E8%AE%BE%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" title="2023数据库课设经验分享"><img class="cover" src="/img/cover/5.jpg" onerror='onerror=null,src="/img/404.webp"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2023数据库课设经验分享</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">琉璃月</div><div class="author-info__description">我虽无意逐鹿，却知苍生苦楚</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">149</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ZWN2001"><i class="fab fa-github"></i><span>我的Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZWN2001" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">新域名：www.zwn2001.space，有效期：10年。https://www.zwn-blog.xyz已过期。访问时建议科学上网，否则博客内公式渲染会出现问题且速度慢。Ctrl+shift+r可强制刷新网站以避免浏览器缓存造成的更新不及时</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">毕设从调研到完工</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">题目概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E8%BF%87%E7%A8%8B%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E8%AE%A1%E5%88%92"><span class="toc-number">1.2.</span> <span class="toc-text">软件过程核心思路与开发计划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E8%B0%83%E7%A0%94"><span class="toc-number">1.3.</span> <span class="toc-text">需求调研</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.4.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E4%B8%8E%E6%8A%80%E6%9C%AF%E5%8F%AF%E8%A1%8C%E6%80%A7%E9%AA%8C%E8%AF%81"><span class="toc-number">1.5.</span> <span class="toc-text">技术选型与技术可行性验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">开发框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BA%E6%96%87%E7%A0%94%E8%AF%BB%E4%B8%8E%E6%80%BB%E7%BB%93"><span class="toc-number">1.5.2.</span> <span class="toc-text">相关系统的论文研读与总结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%8E%E7%BA%A2%E9%98%B3-%E5%88%98%E5%89%91%E9%A3%9E-%E9%9F%A9%E9%95%BF%E5%AE%87%E7%AD%89-%E5%9F%BA%E4%BA%8EAndroid%E7%9A%84%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0-J-%E5%8D%97%E5%BC%80%E5%A4%A7%E5%AD%A6%E5%AD%A6%E6%8A%A5-%E8%87%AA%E7%84%B6%E7%A7%91%E5%AD%A6%E7%89%88-2019-52-02-1-6"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">李红阳,刘剑飞,韩长宇等.基于Android的视频直播系统客户端设计与实现[J].南开大学学报(自然科学版),2019,52(02):1-6.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%88%E5%B0%8F%E6%A5%A0-%E5%9F%BA%E4%BA%8EANDROID%E5%B9%B3%E5%8F%B0%E7%9A%84%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A0%94%E7%A9%B6%E4%B8%8E%E5%AE%9E%E7%8E%B0-D-%E5%8C%97%E4%BA%AC%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6-2020-DOI-10-26935-d-cnki-gbjgu-2018-000121"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">陈小楠. 基于ANDROID平台的视频直播系统的研究与实现[D].北京工业大学,2020.DOI:10.26935&#x2F;d.cnki.gbjgu.2018.000121.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%84%E5%B0%8F%E8%90%8D-%E9%82%93%E6%95%A6%E6%9D%B0-%E5%9F%BA%E4%BA%8EAndroid%E7%9A%84%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0-J-%E4%BC%A0%E5%AA%92%E8%AE%BA%E5%9D%9B-2021-4-09-171-172"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">黄小萍,邓敦杰.基于Android的视频直播系统的设计与实现[J].传媒论坛,2021,4(09):171-172.</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94-%E7%9B%B4%E6%92%AD%E6%92%AD%E6%94%BE%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94"><span class="toc-number">1.5.3.</span> <span class="toc-text">核心功能技术调研 - 直播播放技术调研</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Android-IJKPlayer"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">Android - IJKPlayer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Flutter-video-player"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">Flutter - video_player</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Flutter-video-player-rtmp-ext"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">Flutter - video_player_rtmp_ext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Flutter-flutter-gstreamer-player"><span class="toc-number">1.5.3.4.</span> <span class="toc-text">Flutter - flutter_gstreamer_player</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Flutter-just-audio"><span class="toc-number">1.5.3.5.</span> <span class="toc-text">Flutter - just_audio</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.5.3.6.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94-%E7%9B%B4%E6%92%AD%E6%8E%A8%E6%B5%81%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94"><span class="toc-number">1.5.4.</span> <span class="toc-text">核心功能技术调研 - 直播推流技术调研</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%B8%BA%E4%B8%BB%E7%9A%84%E6%8E%A8%E6%B5%81%E6%96%B9%E6%A1%88-flutter-livepush-plugin"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">移动端为主的推流方案 flutter_livepush_plugin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PC%E7%AB%AF%E4%B8%BA%E4%B8%BB%E7%9A%84%E6%8E%A8%E6%B5%81%E6%96%B9%E6%A1%88%EF%BC%9A-OBS"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">PC端为主的推流方案： OBS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">1.5.4.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94-%E7%9B%B4%E6%92%AD%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94"><span class="toc-number">1.5.5.</span> <span class="toc-text">核心功能技术调研 - 直播服务器技术调研</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SRS"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">SRS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#livego"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">livego</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF%E5%8E%9F%E5%9E%8B%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%B5%8B%E8%AF%95"><span class="toc-number">1.5.6.</span> <span class="toc-text">核心功能技术原型验证与测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%8A%80%E6%9C%AF-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95-%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-number">1.5.7.</span> <span class="toc-text">非核心功能技术 - 推荐算法 技术选型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%84%8F%E4%B9%89"><span class="toc-number">1.5.7.1.</span> <span class="toc-text">意义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%8E%9F%E5%9E%8B-%E5%BC%B9%E5%B9%95%E5%A2%99"><span class="toc-number">1.5.8.</span> <span class="toc-text">非核心功能原型 - 弹幕墙</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.</span> <span class="toc-text">软件设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%A6%81%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text">概要设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UI%E6%A6%82%E8%A6%81"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">UI概要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9F%BA%E6%9C%AC%E4%B8%9A%E5%8A%A1%E9%83%A8%E5%88%86%E6%A6%82%E8%A6%81%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">数据库-基本业务部分概要设计</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.2.</span> <span class="toc-text">详细设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%A8%A1%E5%9D%97%E6%B5%81%E7%A8%8B"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">关键模块流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B%E4%B8%8E%E7%9B%B8%E5%85%B3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">关键业务流程与相关数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">数据库详细设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97%E5%8A%9F%E8%83%BDIPO%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">系统基本业务模块功能IPO详细设计</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91"><span class="toc-number">1.7.</span> <span class="toc-text">开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#API%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.7.1.</span> <span class="toc-text">API接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UI%E4%B8%8E%E7%9B%B8%E5%BA%94%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E8%BF%AD%E4%BB%A3"><span class="toc-number">1.7.2.</span> <span class="toc-text">UI与相应业务逻辑迭代</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E4%BF%A1%E6%81%AF%E4%B8%8E%E8%AE%B0%E5%BD%95"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">迭代信息与记录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%92%AD%E9%97%B4%E9%80%BB%E8%BE%91%E4%B8%8E%E5%8A%9F%E8%83%BD%E8%BF%AD%E4%BB%A3"><span class="toc-number">1.7.3.</span> <span class="toc-text">直播间逻辑与功能迭代</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E4%BF%A1%E6%81%AF%E4%B8%8E%E8%AE%B0%E5%BD%95-2"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">迭代信息与记录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E4%B8%9A%E5%8A%A1%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%BF%AD%E4%BB%A3"><span class="toc-number">1.7.4.</span> <span class="toc-text">订单业务数据结构与数据库设计迭代</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E4%BF%A1%E6%81%AF%E4%B8%8E%E8%AE%B0%E5%BD%95-3"><span class="toc-number">1.7.4.1.</span> <span class="toc-text">迭代信息与记录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.8.</span> <span class="toc-text">测试</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/Graduate-Works/Paper-Read/%E8%AF%BBpaper8-Copiloting-the-Copilots/" title="读paper8-Copiloting_the_Copilots"><img src="/img/cover/2.jpg" onerror='this.onerror=null,this.src="/img/404.webp"' alt="读paper8-Copiloting_the_Copilots"></a><div class="content"><a class="title" href="/posts/Graduate-Works/Paper-Read/%E8%AF%BBpaper8-Copiloting-the-Copilots/" title="读paper8-Copiloting_the_Copilots">读paper8-Copiloting_the_Copilots</a><time datetime="2024-09-18T10:29:57.000Z" title="发表于 2024-09-18 18:29:57">2024-09-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Graduate-Works/Paper-Read/%E8%AF%BBpaper7-RAP-Gen-Retrieval-Augmented-Patch-Generation-with-CodeT5/" title="读paper7-RAP-Gen_Retrieval_Augmented_Patch_Generation_with_CodeT5"><img src="/img/cover/21.jpg" onerror='this.onerror=null,this.src="/img/404.webp"' alt="读paper7-RAP-Gen_Retrieval_Augmented_Patch_Generation_with_CodeT5"></a><div class="content"><a class="title" href="/posts/Graduate-Works/Paper-Read/%E8%AF%BBpaper7-RAP-Gen-Retrieval-Augmented-Patch-Generation-with-CodeT5/" title="读paper7-RAP-Gen_Retrieval_Augmented_Patch_Generation_with_CodeT5">读paper7-RAP-Gen_Retrieval_Augmented_Patch_Generation_with_CodeT5</a><time datetime="2024-09-17T02:02:32.000Z" title="发表于 2024-09-17 10:02:32">2024-09-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Graduate-Works/DL/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/" title="深度学习-注意力机制"><img src="/img/cover/35.jpg" onerror='this.onerror=null,this.src="/img/404.webp"' alt="深度学习-注意力机制"></a><div class="content"><a class="title" href="/posts/Graduate-Works/DL/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/" title="深度学习-注意力机制">深度学习-注意力机制</a><time datetime="2024-09-13T13:50:25.000Z" title="发表于 2024-09-13 21:50:25">2024-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Graduate-Works/Course-Notes/%E7%A0%94%E4%B8%80%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97/" title="研一课程笔记-并行计算"><img src="/img/cover/36.jpg" onerror='this.onerror=null,this.src="/img/404.webp"' alt="研一课程笔记-并行计算"></a><div class="content"><a class="title" href="/posts/Graduate-Works/Course-Notes/%E7%A0%94%E4%B8%80%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0-%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97/" title="研一课程笔记-并行计算">研一课程笔记-并行计算</a><time datetime="2024-09-09T14:55:28.000Z" title="发表于 2024-09-09 22:55:28">2024-09-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Graduate-Works/Course-Notes/%E7%A0%94%E4%B8%80%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%80%BC%E5%88%86%E6%9E%90/" title="研一课程笔记-数值分析"><img src="/img/cover/19.jpg" onerror='this.onerror=null,this.src="/img/404.webp"' alt="研一课程笔记-数值分析"></a><div class="content"><a class="title" href="/posts/Graduate-Works/Course-Notes/%E7%A0%94%E4%B8%80%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%80%BC%E5%88%86%E6%9E%90/" title="研一课程笔记-数值分析">研一课程笔记-数值分析</a><time datetime="2024-09-05T14:25:32.000Z" title="发表于 2024-09-05 22:25:32">2024-09-05</time></div></div></div></div></div></div></main><footer id="footer" style="background:0 0"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();" rel="external nofollow noreferrer"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();" rel="external nofollow noreferrer"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();" rel="external nofollow noreferrer"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.google.com/search?q=&quot;+window.getSelection().toString());" rel="external nofollow noreferrer"><i class="iconfont icon-baidu"></i><span>搜索</span></a><a class="rightMenu-item" href="javascript:rmf.searchinThisPage();" rel="external nofollow noreferrer"><i class="fas fa-search"></i><span>站内搜索</span></a><a class="rightMenu-item" href="#post-comment" onclick="rmf.yinyong()"><i class="fa-solid fa-message"></i><span>引用文本评论</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()" rel="external nofollow noreferrer"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()" rel="external nofollow noreferrer"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();" rel="external nofollow noreferrer"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();" rel="external nofollow noreferrer"><i class="iconfont icon-fanti"></i><span>繁简转换</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();" rel="external nofollow noreferrer"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="javascript:fullScreen();" rel="external nofollow noreferrer"><i class="fas fa-expand"></i><span>进入全屏</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://unpkg.com/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://unpkg.com/katex/dist/katex.min.css"><script src="https://unpkg.com/katex/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>function getGiscusTheme(e){return"dark"===e?"dark":"light"}function loadGiscus(){var e,t=Object.assign({src:"https://giscus.app/client.js","data-repo":"ZWN2001/ZWN2001.github.io","data-repo-id":"R_kgDOGH1XWg","data-category-id":"DIC_kwDOGH1XWs4CXnHJ","data-mapping":"pathname","data-theme":getGiscusTheme(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},{"data-lang":"zh-CN","data-loading":"lazy",crossorigin:"anonymous","data-mapping":"og:title","data-input-position":"top","data-category":"Announcements"}),a=document.createElement("script");for(e in t)a.setAttribute(e,t[e]);document.getElementById("giscus-wrap").insertAdjacentElement("afterbegin",a)}function changeGiscusTheme(e){var t;e={setConfig:{theme:getGiscusTheme(e)}},(t=document.querySelector("iframe.giscus-frame"))&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")}function loadOtherComment(){loadGiscus()}btf.addModeChange("giscus",changeGiscusTheme),btf.loadComment(document.getElementById("giscus-wrap"),loadGiscus)</script></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script><script type="text/javascript" src="/js/rightmenu.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>var parent,child;document.getElementById("recent-posts")&&"/"===location.pathname&&(parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/编程知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 琉璃月の编程知识 (13)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/实用知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 琉璃月の实用知识 (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/学习-课外拓展/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 琉璃月の学习-课外拓展 (31)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/学习-课内知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 琉璃月の学习-课内知识 (57)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://zwn2001.space/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>',console.log("已挂载magnet"),parent.insertAdjacentHTML("afterbegin",child))</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#f2f2f2;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:#b30070}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style></body></html>