<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>服务开发 | ZWN's blog</title><meta name="author" content="洛雪"><meta name="copyright" content="洛雪"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="服务开发 Chapter-1：绪论 什么是服务   定义为在一个应用软件内部的一种方法、过程、或通讯。   旨在满足某些业务需求的应用程序的操作。   区别于系统的，服务一个或者一组相对较小且独立的功能单元，   用户可以感知最小功能集。   优势   服务每个模块就相当于一个单独的项目，代码量明显减少，遇到问题也相对来说比较好解决   服务每个模块都可以使用不同的开发技术，开发模式更灵活   服"><meta property="og:type" content="article"><meta property="og:title" content="服务开发"><meta property="og:url" content="https://zwn2001.space/posts/a5d0e82b.html"><meta property="og:site_name" content="ZWN&#39;s blog"><meta property="og:description" content="服务开发 Chapter-1：绪论 什么是服务   定义为在一个应用软件内部的一种方法、过程、或通讯。   旨在满足某些业务需求的应用程序的操作。   区别于系统的，服务一个或者一组相对较小且独立的功能单元，   用户可以感知最小功能集。   优势   服务每个模块就相当于一个单独的项目，代码量明显减少，遇到问题也相对来说比较好解决   服务每个模块都可以使用不同的开发技术，开发模式更灵活   服"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zwn2001.space/img/cover2/1-min.jpg"><meta property="article:published_time" content="2023-06-05T05:06:30.000Z"><meta property="article:modified_time" content="2023-08-02T05:21:33.862Z"><meta property="article:author" content="洛雪"><meta property="article:tag" content="服务开发"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zwn2001.space/img/cover2/1-min.jpg"><link rel="shortcut icon" href="/img/favicon.webp"><link rel="canonical" href="https://zwn2001.space/posts/a5d0e82b.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="manifest" href="/pwa/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/pwa/16.png"><link rel="mask-icon" href="/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:-1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:{limitDay:200,position:"top",messagePrev:"距离上次更新已经过去",messageNext:"天啦！注意内容可能过时。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:300},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://unpkg.com/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!0,islazyload:!0,isAnchor:!0,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"服务开发",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-08-02 13:21:33"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,a){0!==a&&(a=864e5*a,t={value:t,expiry:(new Date).getTime()+a},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=o=>new Promise((t,e)=>{const a=document.createElement("script");a.src=o,a.async=!0,a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.getCSS=(o,n=!1)=>new Promise((t,e)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onerror=e,a.onload=a.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};e=saveToLocal.get("theme"),"dark"===e?activateDarkMode():"light"===e&&activateLightMode(),e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/transpancy.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/rightmenu.css"><link rel="stylesheet" href="/css/loadimg.css"><link rel="stylesheet" href="/css/project.css"><link type="text/html" rel="stylesheet" href="/css/wide_screen.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"><style>#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags:before{content:"\A";white-space:pre}#recent-posts>.recent-post-item>.recent-post-info>.article-meta-wrap>.tags>.article-meta__separator{display:none}</style><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png"><div class="loading-image-dot"></div><div id="loading-percentage"></div></div></div><script>const loadingPercentage=document.getElementById("loading-percentage");loadingPercentage.style.color="black";let loadingPercentageTimer=setInterval(function(){var e=document.querySelector(".pace-progress");e&&(e=e.getAttribute("data-progress-text"))!==loadingPercentage.textContent&&"60%"===(loadingPercentage.textContent=e)&&clearInterval(loadingPercentageTimer)},100);const preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()})</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">129</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/cover2/1-min.jpg)"><nav id="nav"><span id="blog-info"><a href="/" title="ZWN's blog"><span class="site-name">ZWN's blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">服务开发</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-05T05:06:30.000Z" title="发表于 2023-06-05 13:06:30">2023-06-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-02T05:21:33.862Z" title="更新于 2023-08-02 13:21:33">2023-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0-%E8%AF%BE%E5%86%85%E7%9F%A5%E8%AF%86/">学习-课内知识</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>服务开发</h1><h2 id="Chapter-1：绪论">Chapter-1：绪论</h2><h3 id="什么是服务">什么是服务</h3><ul><li><p>定义为在一个<strong>应用软件内部的一种方法</strong>、<strong>过程</strong>、<strong>或通讯</strong>。</p></li><li><p>旨在满足某些业务需求的应用程序的操作。</p></li><li><p>区别于系统的，服务一个或者一组相对较小且独立的<strong>功能单元</strong>，</p></li><li><p>用户可以感知最小功能集。</p></li></ul><h3 id="优势">优势</h3><ul><li><p><strong>服务每个模块就相当于一个单独的项目</strong>，代码量明显减少，遇到问题也相对来说比较好解决</p></li><li><p><strong>服务每个模块都可以使用不同的开发技术</strong>，开发模式更灵活</p></li><li><p><strong>服务强调结构上的“松耦合”</strong>，而在功能上则可以整合为一个统一的整体，可以实现有效的拆分应用，实现敏捷开发和部署</p></li></ul><h3 id="API帮助开发者">API帮助开发者</h3><ul><li><p>快速的应用开发与部署</p></li><li><p>多通道集成</p></li><li><p>敏捷的服务组合</p></li><li><p>内部和外部服务的市场</p></li></ul><h2 id="Web技术方案：从RPC到REST">Web技术方案：从RPC到REST</h2><h3 id="web的基石">web的基石</h3><ul><li><p><strong>URI</strong>：地址</p></li><li><p><strong>HTTP</strong>：传输</p></li><li><p><strong>HyperText</strong>：表达（除了HTML外，也可以是带有超链接的XML或 JSON）</p></li><li><p><strong>MIME</strong>：扩展</p><ul><li>本意为多目的Internet邮件扩展，最初目的是为了在发送电子邮件时附加多媒体数据，让邮件客户程序能根据其类型进行处理。</li><li>当它被HTTP协议支持之后，它的意义就更为显著了。它使得HTTP传输的不仅是普通的文本，而变得丰富多彩</li></ul></li></ul><h3 id="常用的媒体类型（MIME）">常用的媒体类型（MIME）</h3><ul><li><p>text/html：HTML格式的文档</p></li><li><p>text/xml（application/xml）：XML格式的文本</p></li><li><p>text/json（application/json）： JSON格式的文本</p></li><li><p>image/gif（image/jpeg、image/png）：GIF（JPEG、PNG）格式的图片</p></li><li><p>audio/mp4（audio/mpeg、audio/vnd.wave）：MP4（MPEG、WAVE）格式的音频文件</p></li><li><p>video/mp4（video/mpeg、video/quicktime）：MP4（MPEG、QUICKTIME）格式的视频文件</p></li></ul><blockquote><p>&quot;text/json&quot;和&quot;application/json&quot;都是表示JSON数据格式的MIME类型（Multipurpose Internet Mail Extensions）。</p><p>&quot;text/json&quot;是一种过时的MIME类型，它指示传输的内容是文本，并且是JSON格式的。但是，由于JSON数据可以包含非文本字符，例如二进制数据，因此&quot;text/json&quot;并不是最佳的MIME类型。</p><p>&quot;application/json&quot;是当前推荐使用的MIME类型。它指示传输的内容是JSON格式的数据，并且可以包含任何类型的数据，包括文本和二进制数据。</p></blockquote><h3 id="Http动词">Http动词</h3><ol><li><p>GET：获取资源，请求指定的页面信息，并返回实体主体。</p></li><li><p>POST：提交数据，向指定资源提交数据进行处理请求（例如提交表单或上传文件）。数据被包含在请求体中。</p></li><li><p>PUT：更新资源，向指定资源位置上传最新内容，覆盖原始资源。</p></li><li><p>DELETE：删除资源，请求服务器删除指定的页面。</p></li><li><p>HEAD：获取报头信息，与GET方法类似，但是服务器不返回实体主体，只返回报头信息。</p></li><li><p>OPTIONS：获取资源支持的HTTP方法，请求查询服务器支持的HTTP方法。</p></li></ol><h3 id="REST">REST</h3><p>Rest 的宗旨是从资源的角度来观察整个网络，分布在各处的资源由URI确定，而客户端的应用通过URI来获取资源的<strong>表征</strong>。获得这些表征致使这些应用程序转变了其<strong>状态</strong>。随着不断获取资源的表征，客户端应用不断地转变着其状态</p><p>Rest语境下，Web应用的目的是将所拥有的的资源提供给资源请求者，资源请求者使用标准的HTTP协议请求资源</p><h3 id="从RPC到ROA">从RPC到ROA</h3><h4 id="XML-RPC">XML-RPC</h4><p>远程过程调用（remote procedure call，RPC)的分布式计算协议</p><ul><li><p>通过<strong>XML</strong>将调用函数封装，并使用<strong>HTTP协议</strong>作为传送机制</p></li><li><p>XML-RPC透过向<strong>装置了这个协定的服务器</strong>发出HTTP请求</p></li><li><p>发出请求的用户端一般都是需要向远端系统要求呼叫的软件</p></li><li><p>这个标准慢慢演变成为今日的SOAP协定</p></li></ul><h4 id="SOAP">SOAP</h4><p>简单对象访问协议Simple Object Access Protocol</p><ul><li><p>一种标准化的通讯规范，主要用于Web服务（web service）中</p></li><li><p>一个 SOAP 消息可以发送到一个具有 Web Service 功能的 Web 站点</p></li><li><p>数据是用一种标准化的可分析的结构来传递的，可以直接被第三方站点所利用</p></li></ul><h4 id="REST-2">REST</h4><p>表征状态转移（Representational State Transfer）</p><ul><li><p>采用Web 服务使用标准的 HTTP 方法 (GET/PUT/POST/DELETE) 将所有 Web 系统的服务抽象为资源</p></li><li><p>从<strong>资源</strong>的角度来观察整个网络，分布在各处的资源由<strong>URI</strong>确定，而客户端的应用通过URI来获取资源的表征</p></li><li><p>对于各种资源的操作最后总是能抽象成为增删改查四种基本操作；在定义了定位资源的规则以后，对于资源的操作通过标准的Http协议就可以实现</p></li></ul><h4 id="组成RPC模式的Web服务核心">组成RPC模式的Web服务核心</h4><ul><li>通讯：简单对象访问协议（SOAP）<ul><li>提供了一个标准的<strong>封装结构</strong>，用来在各种不同的互联网协议（如SMTP、HTTP和FTP）上传输XML文档。</li><li>通过使用这样的标准消息格式，异构的中间件系统可以实现互操作</li></ul></li><li>描述：Web服务描述语言（WSDL）<ul><li>描述了<strong>接口</strong>，即Web服务支持的一系列标准格式的操作。它标准化了操作的输入和输出参数的表示以及服务的协议绑定，消息在线传输的方式。</li><li>使用WSDL，不同的客户端可以自动理解如何与Web服务交互</li></ul></li><li>发布：通用描述、发现和集成（UDDI）<ul><li>提供了一种通过搜索名称、标识符、类别或Web服务实现的规范来广告和发现Web服务的全局注册表</li></ul></li></ul><blockquote><p>通用描述、发现和集成（UDDI，Universal Description, Discovery, and Integration）是一种基于Web服务的注册中心，它提供了一种标准的方式来描述、发现和集成Web服务。UDDI的主要目的是帮助企业和组织在Web上发布和发现Web服务，从而实现企业间的互操作性。</p><p>UDDI有三个主要组件：业务注册（Business Registration）、服务注册（Service Registration）和查询（Inquiry）。业务注册允许企业在UDDI注册中心注册自己的业务，包括企业名称、地址、联系人等信息。服务注册允许企业注册自己的Web服务，包括服务名称、服务描述、服务接口等信息。查询允许企业和组织通过UDDI注册中心查询和发现Web服务，以实现Web服务的集成和互操作。</p><p>UDDI是一种基于XML的标准，它定义了一组XML文档类型和API，用于描述、发现和集成Web服务。UDDI标准由OASIS（Organization for the Advancement of Structured Information Standards）组织制定和维护，目前已经成为Web服务的重要标准之一。</p><p>总之，UDDI是一种基于Web服务的注册中心，它提供了一种标准的方式来描述、发现和集成Web服务，帮助企业和组织在Web上发布和发现Web服务，从而实现企业间的互操作性。</p></blockquote><h4 id="RPC关键特点">RPC关键特点</h4><p>RPC是一种面向<strong>操作</strong>的架构风格，RPC式架构的设计方法是<strong>把系统分解为一个个动作</strong></p><p>在面向RPC的分析中，它会被视为将被客户端调用的动作(action)</p><p>本质上RPC架构的Web Service就是跨Web的过程调用，我们实现的是一个定制的操作，所有的开发和本地的没有什么区别，Web Service提供了跨Web的技术基础</p><h3 id="回到ROA—REST风格的Web服务"><strong>回到</strong>ROA—REST风格的Web服务</h3><p>REST是一种面向资源的架构风格</p><p>站在<strong>资源的角度</strong>思考应用，需要考虑的是</p><ul><li><p>有<strong>哪些资源</strong>可供操作？这一点很重要，这是后续设计API的基础</p></li><li><p>资源如何<strong>表述</strong>？即请求者怎么要资源？提供者怎么给资源？</p></li><li><p>状态转移的<strong>条件</strong>？即什么时候改变资源？</p></li></ul><h4 id="REST-vs-SOAP">REST vs. SOAP</h4><p>REST对于<strong>资源型服务接口</strong>来说很合适，同时特别适合对于<strong>效率要求很高</strong>，但是对于<strong>安全要求不高</strong>的场景。</p><p>SOAP的成熟性可以给需要提供给<strong>多开发语言</strong>的，<strong>对于安全性要求较高</strong>的接口设计带来便利</p><blockquote><p>REST（Representational State Transfer）和SOAP（Simple Object Access Protocol）都是用于构建分布式系统的Web服务协议，但它们在很多方面有所不同。</p><p>相同点：</p><ol><li>都是用于构建分布式系统的Web服务协议。</li><li>都基于HTTP协议。</li><li>都使用XML作为数据交换格式。</li></ol><p>不同点：</p><ol><li>REST是基于<strong>资源</strong>的，SOAP是基于<strong>操作</strong>的。REST的核心是资源，每个资源都有一个唯一的URI，而SOAP的核心是操作，每个操作都有一个唯一的操作名。</li><li>REST使用HTTP的GET、POST、PUT、DELETE等方法来实现对资源的CRUD操作，而SOAP使用XML消息来实现对操作的调用。</li><li>REST的消息体可以是XML、JSON、HTML等格式，而SOAP的消息体只能是XML格式。</li><li>REST使用URL来定位资源，而SOAP使用XML命名空间来定位操作。</li><li>REST的性能比SOAP更好，因为REST使用HTTP协议的缓存机制，而SOAP需要在每个消息中包含完整的描述信息。</li><li>REST的设计更加简单，易于理解和实现，而SOAP的设计更加复杂，需要使用更多的标准和规范。</li></ol><p>总之，REST和SOAP都有各自的优缺点，选择哪种协议取决于具体的应用场景和需求。</p></blockquote><h3 id="RESTful-服务的优势">RESTful 服务的优势</h3><ul><li>使用统一的接口操作资源</li><li>RESTful Web服务接口更易于使用，更加贴近 Web 本身的工作方式，也更加自然</li><li>无状态性，可伸缩性好，更易于负载均衡</li><li>安全操作与幂指相等特性<ul><li>HTTP 的 GET、HEAD 请求本质上应该是安全的调用</li><li>HTTP 的 PUT、DELTE 调用，具有幂指相等特性 ,或称为幂等性(idempotent)</li></ul></li><li>RESTful Web 服务更容易实现缓存</li><li>更适合开放API场景</li></ul><h2 id="资源和表述">资源和表述</h2><h3 id="资源的本质">资源的本质</h3><h4 id="什么是资源">什么是资源</h4><ul><li><p>任何寄宿于Web可供操作的“事物”均可视为资源，就其本质而言，任何足够重要并被引用的事物都可以是资源。</p></li><li><p>信息系统中的资源一般是可以保存到计算机里面的虚拟资源，统称为“信息资源(information resource)”</p></li><li><p>信息资源可以看做是物理资源的一种抽象</p></li><li><p>某种意义上，这种资源抽象又具有物理含义</p></li></ul><p>资源可以具有多种表现形式，这种资源的呈现形式，称作资源的表征（Representation）。</p><p>资源请求者和资源拥有者只有在对事物的命名上达成一致以后才能针对这个事物实现相互通信。因此，每个资源必须拥有自己的唯一标识，互联网中使用 URI 来唯一标记一个资源，包含了 <strong>URL</strong> 和 <strong>URN</strong></p><ul><li><p>URL（Uniform Resource Loader）：统一资源定位符，侧重于 “<strong>定位</strong>” 二字。</p></li><li><p>URN（Uniform Resource Name）：统一资源名称，侧重于 “<strong>命名</strong>” 二字。</p></li></ul><h3 id="表述的本质"><strong>表述的本质</strong></h3><p>从资源请求者的角度看，它并不关心资源是什么，因为它从来看不到资源，它看到的永远只是资源的URL和表述（Representation）。</p><p>在客户端-服务器端之间转移的，并不是资源本身，而是资源的表述，即就是资源当前状态的某种合适的表达。资源的表述，可以有多种格式，例如 <code>json</code>/<code>xml</code>/<code>html</code>/纯文本等等</p><h4 id="松耦合与前后端分离"><strong>松耦合与前后端分离</strong></h4><p>一个松散耦合的系统中，客户端和远程服务并不知道，也不需要知道对方是如何实现的，这样他们各自的实现就可以根据需要进行更改，而不必担心会破坏对方已有的实现</p><p>前后端分离也已成为互联网项目开发的标准使用方式，前端所有用到的展现数据都是后端通过同步或异步接口方式提供，前端只负责展现，后端负责处理逻辑与数据的存储</p><p>通过资源的表述来间接完成交互，实际上就是隔离了客户端与服务端、前端与后端，使得请求服务的一方的操作不会直接影响到服务提供者，而服务提供者也可以安全地分享自己的资源</p><h3 id="超媒体与HATEOAS">超媒体与HATEOAS</h3><ul><li><p>超文本（HyperText）</p><ul><li>是用<strong>超链接</strong>的方法，将各种不同空间的文字信息组织在一起的网状文本，其中的文字包含有可以链接到其他文档的地址，以实现从当前阅读位置直接切换到超文本链接所指向的文本继续访问。</li></ul></li><li><p>超媒体（HyperMedia）</p><ul><li>是超级媒体的缩写。超媒体是一种采用<strong>非线性网状结构</strong>对块状多媒体信息（包括文本、图像、视频等）进行组织和管理的技术 。</li><li>超媒体在本质上和超文本是一样的，只不过超文本技术在诞生的初期管理的对象是纯文本，所以叫做超文本。</li></ul></li></ul><p>超媒体体现了一种“关联”关系</p><h4 id="HATEOAS（超媒体策略">HATEOAS（<strong>超媒体策略</strong></h4><p>HATEOAS（Hypermedia as the Engine of Application State）是一种RESTful API设计原则，它强调在API中使用<strong>超媒体</strong>作为<strong>应用状态的引擎</strong>，以便客户端可以通过在响应中包含的链接来自动发现和使用API中的资源。</p><p>具体来说，HATEOAS要求API返回的响应中包含了指向其他相关资源的链接，这些链接可以让客户端发现和使用API中的其他资源。这些链接通常使用标准的超媒体格式来表示，以便客户端可以自动解析和使用这些链接。</p><p><strong>使用HATEOAS可以使API更加灵活和易于使用，因为客户端不需要事先知道API中所有的资源和操作，而是可以通过响应中的链接来自动发现和使用这些资源和操作。这也使得API更容易演化和扩展，因为API的开发人员可以添加、删除或修改资源和操作，而不必担心客户端的兼容性问题</strong>。u只要能理解超媒体，REST客户端几乎不需要其他额外知识就能与应用程序或服务器进行交互.</p><p>总之，HATEOAS是一种强调使用超媒体作为应用状态引擎的RESTful API设计原则，它可以使API更加灵活、易于使用和演化。</p><h3 id="Http操作">Http操作</h3><p><strong>PATCH</strong>：根据提供的表述信息修改资源的部分状态。如果有某些资源状态在提供的表述中没被提到，这些状态就保持不变。PATCH类似于PUT，但允许对资源状态进行一些细粒度的改动</p><p><strong>LINK</strong>：将其他资源连接到当前资源</p><p><strong>UNLINK</strong>：销毁当前资源和其他某些资源的连接关系</p><h4 id="DELETE">DELETE</h4><p>DELETE很明显<strong>不是一个安全的方法</strong>。发送一个DELETE请求的效果不同于未发送DELETE请求。但是DELETE方法有另外一个很有用的属性：它是幂等的(idempotent)</p><h4 id="POST">POST</h4><h5 id="POST-to-Append">POST-to-Append</h5><p>POST-to-append，向某个资源发送一条POST请求用以在该资源的下一级中创送一个新的资源。当客户端发送一个POST-to-append请求的时候，它会在请求的实体消息体中添加所希望创建的资源的表述信息并发送给服务器</p><p>对POST-to-Append请求而言，最常见的响应码是201 (Created)它用于告知客户端一个新的资源已经创建成功。Location报头用于告诉客户端这个新资源的URL地址。另一种常见的响应码是202 (Accepted)，这表示服务器打算按照提供的表述信息来创建一个资源，但是现在还没有真正创建完成</p><h6 id="既不安全也不幂等">既不安全也不幂等</h6><ol><li>不安全：POST请求通常用于向服务器提交数据，因此POST请求可能会对服务器上的数据进行修改或创建新的资源，这使得POST请求不安全，因为它可能会对服务器上的数据造成影响。</li><li>不幂等：幂等是指对同一个资源的多次请求，结果应该是相同的，不会产生任何副作用。但是，POST请求不是幂等的，因为每次请求都会向服务器提交不同的数据，导致每次请求的结果都可能不同，而且每次请求都可能会对服务器上的数据进行修改或创建新的资源。</li></ol><h5 id="Overloaded-POST">Overloaded POST</h5><p>大部分浏览器只支持GET/POST方法，这使得我们无法完美的实现REST。对于这样的情况，大致有两种解决方法：</p><ul><li><p>一种是在表单里加入一个_method之类名字的隐藏字段，用于表示真正的方法</p></li><li><p>另一种是使用X-HTTP-METHOD-OVERRIDE头信息来重载POST</p></li></ul><p>可以将任何数据作为POST请求的一部分发送出去，不论是出于什么目的，这都是合法的。此时的POST并不真正表示“创建一个新的资源”，而是表示“任意而为(whatever)”这样POST请求实际上没有任何协议语义了（但肯定有动作语义/应用语义的）。将POST这种“任意而为(whatever)”用法称为重载的(overloaded) POST。因为一个重载的POST请求没有协议语义，你只能在应用语义的层面上来理解它</p><h4 id="PUT">PUT</h4><h5 id="PUT-vs-POST">PUT vs. POST</h5><p>创建操作可以使用POST，也可以使用PUT。区别在于POST是作用在一个集合资源之上的（/articles），而PUT操作是作用在一个具体资源之上的（/articles/123）</p><p>如果URL可以在客户端确定，那么就使用PUT。如果是在服务端确定，那么就使用POST</p><h4 id="PATCH">PATCH</h4><p>PATCH请求是HTTP协议中的一种请求方法，用于对资源进行<strong>局部更新</strong>。与PUT请求不同的是，<strong>PATCH请求只需要更新资源的部分内容，而PUT请求则需要更新整个资源</strong>。PATCH请求通常用于更新资源的某些属性，而不是整个资源。在RESTful API设计中，PATCH请求被广泛应用于对资源的部分更新。</p><h5 id="PATCH方法既不是安全的，也不能保证幂等">PATCH方法既不是安全的，也不能保证幂等</h5><p>一个PATCH 请求有可能结果是等幂的，这种情况下，如果你不小心对同一个文档应用了两次patch，你可能会在第二次收到一个错误信息。但这并没有定义在相关标准中。考虑到PATCH的协议语义，它跟POST一样，是一个不安全的操作。</p><h2 id="领域模型与领域驱动设计">领域模型与领域驱动设计</h2><h3 id="领域与领域模型">领域与领域模型</h3><p>任何一个系统都会属于<strong>某个特定的领域</strong>，而这个领域的<strong>核心业务</strong>是确定的，领域本质上可以理解为就是一个<strong>问题域</strong>。只要我们确定了系统所属的领域，那这个系统的核心业务，即要解决的<strong>关键问题</strong>、问题的<strong>范围边界</strong>就基本确定了</p><p><strong>通过建立领域模型来描述领域中的核心问题，这就是模型驱动的思想</strong>。</p><h4 id="领域驱动设计（DDD）">领域驱动设计（DDD）</h4><h5 id="什么是域模型">什么是域模型</h5><p>域模型（<code>domain model</code>）英文又称为问题域模型（<code>problem space model</code>）。维基百科(<code>Wikipedia</code>)对它的定义是<code>A conceptual model of all the topics related to a specific problem</code> 。 可以翻译成： “域模型是针对某个特定问题的所有相关方面的抽象模型”。 这个定义有几个要点：第一是“特定问题”， 也即是说<strong>域模型是针对性某个问题域而言的</strong>， 脱离的这个特定问题，域模型的构建其实不存在一个最优或者是最合理的构建。 第二是抽象， <strong>域模型是一个抽象模型， 不是对某个问题的各个相关方面的一个映射， 也不是解决方案的构建</strong>。</p><p>关于域模型， 经常会看到大家把<strong>逻辑数据模型</strong>(<code>logical data model</code>) 或者是<strong>物理数据模型</strong>(<code>physical data model</code>)和域模型混为一谈。 甚至有同学把数据里的表结构抽取出来作为域模型来研究。 其实这是域模型的最大误区。 <strong>数据模型实质上都归属于结果域模型</strong>（<code>solution space model</code>）, <strong>是对某个问题域的解决方案的一个描述， 实质上是对解决方案的一个具体描述</strong>。</p><p>另外一个常见的误区和领域驱动设计（<code>DDD, Domain Driven Design</code>）有关。 我个人对DDD比较推崇， 但是DDD里提到的域模型实质上是结果域模型（<code>Solution Space Model</code>）, 不是问题域模型。 我在这个系列的文章里集中介绍的是问题域模型的构建， 而不是结果域模型的构建。这两者的区别在于前者的建立主要是为了统一我们对未知世界的了解， 也就是说我们需要统一思想， 搞清楚我们要解决什么问题和问题的本质。 而后者的主要是想解决针对近些年来敏捷开发模式中所普遍存在的对领域认知不完整而导致设计不合理的问题。 前者是一个对未知方向的探索过程，适用在一个相对较为模糊的命题，产出是对语言，边界和思路的统一。后者是一个方法论，适用于具体一个项目， 产出是一个项目的数据模型。</p><p>总结一下：（问题）域模型是为了准确定义需要解决问题而构造的抽象模型。特别值得强调的是域模型的功能是统一认知：对要解决的问题有一个完整，规范，并且是一致的认识。</p><p> </p><h5 id="DDD是什么">DDD是什么</h5><p><strong>wiki释义：</strong></p><p>领域驱动设计（英语：Domain-driven design，缩写 <strong>DDD</strong>）是一种通过<strong>将实现连接到持续进化的模型</strong>来<strong>满足复杂需求</strong>的软件开发方法。领域驱动设计的前提是：</p><ul><li>把项目的<strong>主要重点放在核心领域（core domain）和域逻辑</strong></li><li>把复杂的设计放在有界域（bounded context）的模型上</li><li>发起一个创造性的合作之间的技术和<a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/w/index.php%3Ftitle%3D%E5%9F%9F%E7%95%8C%E4%B8%93%E5%AE%B6%26action%3Dedit%26redlink%3D1" rel="external nofollow noreferrer">域界专家</a>以迭代地完善的概念模式，解决特定领域的问题</li></ul><p>领域驱动设计是一种由<strong>域模型</strong>来驱动着系统设计的思想，不是通过存储数据词典(DB表字段、ES Mapper字段等等)来驱动系统设计。<strong>领域模型是对业务模型的抽象，DDD是把业务模型翻译成系统架构设计的一种方式。</strong></p><p> </p><h5 id="为什么建立一个领域模型是重要的">为什么建立一个领域模型是重要的</h5><p>领域驱动设计告诉我们，在通过软件实现一个业务系统时，建立一个领域模型是非常重要和必要的，因为领域模型具有以下特点：</p><ol><li>领域模型是对具有某个边界的领域的一个抽象，<strong>反映了领域内用户业务需求的本质</strong>；领域模型是有边界的，只反应了我们在领域内所关注的部分；</li><li>领域模型<strong>只反映业务</strong>，和任何技术实现无关；领域模型不仅能反映领域中的一些<strong>实体概念</strong>，如货物，书本，应聘记录，地址，等；还能反映领域中的一些<strong>过程概念</strong>，如资金转账，等；</li><li>领域模型<strong>确保了我们的软件的业务逻辑都在一个模型中</strong>，都在一个地方；这样对提高软件的可维护性，业务可理解性以及可重用性方面都有很好的帮助；</li><li>领域模型能够帮助开发人员相对平滑地将领域知识转化为软件构造；</li><li>领域模型贯穿软件分析、设计，以及开发的整个过程；领域专家、设计人员、开发人员通过领域模型进行交流，彼此共享知识与信息；因为大家面向的都是同一个模型，所以可以防止需求走样，可以让软件设计开发人员做出来的软件真正满足需求；</li><li>要建立正确的领域模型并不简单，需要领域专家、设计、开发人员积极沟通共同努力，然后才能使大家对领域的认识不断深入，从而不断细化和完善领域模型；</li><li>为了让领域模型看的见，我们需要用一些方法来表示它；图是表达领域模型最常用的方式，但不是唯一的表达方式，代码或文字描述也能表达领域模型；</li><li>领域模型是整个软件的核心，是软件中最有价值和最具竞争力的部分；设计足够精良且符合业务需求的领域模型能够更快速的响应需求变化；</li></ol><h4 id="DDD的主要任务">DDD的主要任务</h4><ul><li>一是如何发现系统中的聚合(Aggregate)。所谓聚合是一组相关的<strong>领域对象</strong>（或者称为<strong>实体</strong>），是由业务和逻辑紧密关联的实体和值对象组合而成的</li><li>二是如何划分限界上下文(Bounded Context)</li></ul><p>这两个元素可谓是DDD的核心概念，分别对应了单个业务功能模块内核心的领域对象，以及如何划分业务功能的边界。通过这种建模方法，可以方便开发者和领域专家更好的快速地配合进行开发</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/1.png" style="zoom:80%"><h3 id="理解领域，识别资源，划分服务">理解领域，识别资源，划分服务</h3><h4 id="理解领域">理解领域</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/2.png" style="zoom:50%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/3.png" style="zoom:50%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/4.png" style="zoom:50%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/5.png" style="zoom:50%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/6.png" style="zoom:50%"><h4 id="识别资源">识别资源</h4><ul><li><p>资源即实体，实体即对象</p><ul><li>这个对象代表的是业务对象，有明确的业务含义，类似供应商，采购订单，产品，合同等，这些业务对象正是我们在领域驱动设计时候经常会识别的领域对象</li></ul></li><li><p>聚合用来封装真正的不变性，而不是简单地将对象组合在一起</p><ul><li>聚合内有一套不变的业务规则，各实体和值对象按照统一的业务规则运行，实现对象数据的一致性，边界之外的任何东西都与该聚合无关，这就是聚合能实现业务高内聚的原因</li></ul></li><li><p>聚合内数据强一致性，而聚合之间数据保持最终一致性，为实现服务内聚合之间的解耦，及以聚合为单位的服务组合和拆分，应避免跨聚合的领域服务调用和跨聚合的数据库表关联</p></li></ul><h4 id="划分服务">划分服务</h4><p>理想情况下，界限上下文与微服务可以一一对应，但在实际项目中，又会根据实际业务做一些灵活的调整，包括将多个界限上下文进行合并，对应的就是将相对简单的服务合并在一起；</p><p>但一般而言，聚合是服务的最小单元（一个界限上下文可以包括多个聚合），打破聚合，就很有可能破坏事务一致性和业务约束</p><p>如果粗粒度的体现业务价值的接口服务全部都变成了细粒度的数据库访问类细粒度接口服务，就会失去接口本身的意义，同时又将本身应该完全内聚在服务内部的业务逻辑全部暴露到外层去解决</p><h4 id="在边界上定义接口">在边界上定义接口</h4><p>面向资源进行 RESTful 服务设计，资源的识别和定义可以参考领域设计的思路进行。</p><ul><li><p>首先定义领域对象，将领域对象建模为对应的资源。</p></li><li><p>然后再考虑看这个资源应该暴露哪些能力接口出来。</p></li></ul><h3 id="REST成熟度模型"><strong>REST</strong>成熟度模型</h3><h4 id="level-0：HTTP传输">level 0：HTTP传输</h4><p>只是使用 HTTP 作为传输方式（大多数是使用POST请求） 。这种方式可以理解为重载的<strong>POST</strong>，实际上所有的请求都是发往同一个服务端口（URI），请求的具体内容都在POST过去的文件中；这其实也是远程方法调用（RPC）的一种具体形式，XML-RPC和大多数SOAP服务都属于此类。</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/7.png" style="zoom:50%"><h4 id="level-1：面向资源为中心">level 1：面向资源为中心</h4><p>这一层级引入了资源的概念，并对每个资源都赋予了URI。但层级的所有请求也都是使用Post实现的。</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/8.png" style="zoom:50%"><h4 id="level-2：利用-HTTP动词语义">level 2：利用 HTTP动词语义</h4><p>本层级的服务使用 HTTP 语法来执行操作</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/9.png" style="zoom:50%"><h4 id="level-3：利用超媒体控制">level 3：利用超媒体控制</h4><p>本层级的基本思想是资源通过<strong>超媒体</strong>描述自己的能力和连接关系，由GET请求返回的资源表示中包含资源能够执行操作的链接，这实际就是HATEOAS原则</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/10.png" style="zoom:55%"><h2 id="设计只读的资源服务"><strong>设计只读的资源服务</strong></h2><h3 id="设计过程">设计过程</h3><ul><li>资源分析与设计</li><li>设计资源表述</li><li>把资源相互链接起来</li><li>规划服务交互的响应</li></ul><h3 id="ROA-VS-RPC（前面铺垫过">ROA VS. RPC（前面铺垫过</h3><p>ROA是一种基于资源的架构风格，它强调将<strong>资源</strong>作为系统的核心概念，以资源为中心来设计和实现系统。在ROA中，每个资源都有一个唯一的标识符（URI），并且可以通过HTTP协议中的GET、POST、PUT、DELETE等方法来对资源进行操作。</p><p>RPC是一种<strong>远程调用协议</strong>，它允许程序在不同的计算机或进程之间通过网络进行通信，实现像本地调用一样的远程调用。在RPC中，客户端通过调用远程服务端的函数来实现分布式系统的功能。</p><p>它们的主要不同点在于：</p><ol><li>ROA是基于资源的架构风格，而RPC是基于远程调用的协议。ROA强调将资源作为系统的核心概念，以资源为中心来设计和实现系统，而RPC则强调远程调用的过程。</li><li>ROA使用HTTP协议中的方法来对资源进行操作，如GET、POST、PUT、DELETE等，而RPC使用自定义的协议和数据格式来实现远程调用。</li><li>ROA通常使用RESTful API来实现，而RPC通常使用SOAP、XML-RPC、JSON-RPC等协议来实现。</li><li>ROA更加灵活，可以支持多种数据格式和协议，而RPC则需要使用特定的协议和数据格式。</li><li>ROA的优势在于它的资源导向设计，可以更好地支持多种客户端和服务端，使得系统更加可扩展和可维护。RPC的优势在于它的远程调用机制，可以使得客户端和服务端之间的通信更加高效和简单。</li></ol><p>总的来说，ROA和RPC都是用于构建分布式系统的架构风格，<strong>但ROA更加注重资源的管理和操作，而RPC更加注重远程调用的过程</strong>。在具体的系统设计中，可以根据实际需求选择合适的架构风格。</p><h3 id="web地图服务">web地图服务</h3><h4 id="资源分析与设计">资源分析与设计</h4><h5 id="几个步骤">几个步骤</h5><ul><li>理解服务功能</li><li>梳理必要的资源</li><li>创建只读资源</li><li>给资源命名</li><li>给资源命名的讨论</li></ul><h5 id="一些总结">一些总结</h5><ul><li><p>RESTful 服务通过资源(resources)来暴露数据(data)和算法(algorithms)。有关数据的资源常常构成一个层次结构；<strong>由很少的资源开始，然后逐渐扩展为具有许多叶结点</strong></p></li><li><p>要理解“<strong>把算法暴露为资源</strong>”这一方式。不要从动作（如“在地图上搜索地点”）方面来考虑，而<strong>要从该动作的结果方面来考虑</strong>（如“地图上符合搜索条件的地点”）</p></li></ul><h4 id="设计资源表述">设计资源表述</h4><p>现在要考虑当客户端请求一个资源时，服务器应返回什么数据(data)及采用什么数据格式(data format)？即，服务已经构思好了，现在要决定为表述(representation)采用什么格式。</p><ul><li><strong>传达资源状态的表述</strong><ul><li>传达资源状态是表述(representation)的主要用途</li></ul></li><li><strong>推进状态</strong><ul><li>表述(representation)的另一个用途是<strong>推进状态</strong></li><li>一个资源的表述应该链接到邻近的资源（这里“邻近”的含义依据上下文而定），比如可能的下个应用状态(application state)。这样做是为了实现连通性(connectedness)——通过跟随链接(following links)从一个资源到另一个资源的能力</li><li>这样实现的其实还是一个超媒体策略</li></ul></li><li><strong>链接到其他状态的表述</strong><ul><li>计算机程序无法自己决定跟随哪个链接，它只按程序员的指示去做。Web服务在表述（representation）里提供链接(links)时，必须同时在这些表述里附上机器可读的 (machine-readable) 信息、指出各个链接是关于什么的。这样，程序员就可以编写客户端程序来读取这些信息，然后确定哪些链接是符合当前目标的</li><li>这些链接推进的是应用状态(application state)。假如一个资源可以用PUT来修改，或者它在响应POST请求时可以产生新资源，那么它的表述(representation)还应包含推进资源状态（resource state）的链接。该表述应提供必要信息，以说明对POST或PUT请求的要求。</li></ul></li></ul><h5 id="表述格式的选择：XHTML"><strong>表述格式的选择：XHTML</strong></h5><p>纯文本和Json的缺点在于它们都不是通常所认为的“超媒体”格式，即没法直接在浏览器中解析使用，如腾讯地图返回的Json格式表述在浏览器中的显示结果仍然是文本；而XML格式的文档中虽然有自描述的结构信息，也没有用于展现的格式信息</p><p>为此，我们选择一种折中方案，XHTML，即可扩展超文本标记语言。XHTML表现方式与超文本标记语言(HTML)类似，不过语法上更加严格，另外它增加了扩展能力。标准的XHTML文档兼容HTML，保留了浏览器呈现格式所需的标记，所有浏览器都能够正确显示；同时，XHTML又是可扩展的，每个标签都增加了一个class属性，通过使用class属性，可以传递资源的更多信息</p><h2 id="REST安全性和与用户有关的资源设计">REST安全性和与用户有关的资源设计</h2><h3 id="REST安全性设计">REST安全性设计</h3><h4 id="为什么服务安全性很重要">为什么服务安全性很重要</h4><ul><li>保护数据</li><li>防止DDos</li><li>商业影响（避免商业损失）</li></ul><h4 id="安全性三方面">安全性三方面</h4><p>①对客户端做身份认证</p><p>②对敏感的数据做加密，并且防止篡改</p><p>③身份认证之后的访问控制</p><h4 id="认证与授权">认证与授权</h4><ul><li><p>认证(authentication)要做的，就是把请求跟用户关联起来</p></li><li><p>授权(authorization)要做的，就是确定某给定用户可做哪些操作</p></li></ul><h4 id="用户身份验证和授权机制">用户身份验证和授权机制</h4><p>服务器可以用来针对客户端的请求发送质询（challenge），客户端根据质询提供身份验证凭证。质询与应答流程如下：</p><ul><li><p>服务器端向客户端返回401（Unauthorized，未授权）状态码，并在WWW-Authenticate头中添加如何进行验证的信息，其中至少包含有一种质询方式。</p></li><li><p>客户端可以在请求中添加Authorization字段进行验证，其Value为身份验证的凭证信息。当Web服务客户端发出一个HTTP请求时，它将在报头Authorization字段里附上一些证书（credentials）</p></li><li><p>在服务收到该请求后，检查证书是否代表某一特定账户（认证），以及该用户是否被允许做它所请求的操作（授权）。若这两个条件都能满足，那么服务将处理该请求，若请求里没有有效的证书，或者该证书未能通过授权，那么服务器将继续发送响应代码401，并在WWW-Authenticate响应报头里指出如何发送有效的证书</p></li></ul><h4 id="OAuth2-0"><strong>OAuth2.0</strong></h4><ul><li><p>认证模式是：<strong>用户名</strong> <strong>+</strong> <strong>密码</strong> <strong>+</strong> <strong>访问令牌</strong> <strong>+</strong> <strong>刷新令牌</strong></p></li><li><p>核心思想是：用户使用用户名和密码登录系统后，客户端（用户访问系统的设备）会收到一对令牌，包括访问权限令牌和刷新令牌。</p></li><li><p>访问令牌用于访问系统中的所有服务。</p></li><li><p>到期后，系统使用刷新令牌生成一对新的令牌。</p></li></ul><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/11.png" style="zoom:55%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/12.png" style="zoom:55%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/13.png" style="zoom:55%"><h4 id="JWT">JWT</h4><p>JWT令牌由三部分构成：头、载荷和签名</p><ul><li><p>头：包含加密算法 令牌类型等信息</p></li><li><p>载荷：包含用户信息 签发时间和过期时间等信息</p></li><li><p>签名：使用编码后（base64编码）的header和payload再加上我们提供的一个公钥，然后使用header中指定的签名算法进行签名。作用是保证JWT没有被篡改过</p></li></ul><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/14.png" style="zoom:55%"><h5 id="优点">优点</h5><ul><li>因为json的通用性，所以JWT是可以进行跨语言支持的</li><li>因为有了payload部分，所以JWT可以在自身存储一些其他业务逻辑所必要的非敏感信息</li><li>JWT构成非常简单，字节占用很小，非常便于传输</li><li>不需要在服务端保存会话信息, 所以它易于应用的扩展</li><li>使用无状态、可扩展的方式处理应用的用户会话。服务端可以通过内嵌的声明信息，很容易地获取用户的会话信息，而不需要去访问用户或会话的数据库。</li></ul><h3 id="用户也是一种资源">用户也是一种资源</h3><p>有了用户概念，应用可以提供更加个性化的服务；另一方面，应用可以根据用户的行为和表现改进应用，拓展业务。</p><p>用户画像即用户信息标签化，利用互联网搜集与用户相关的“一切“信息，抽取其中关键词，用简洁的标签来作为用户特征。它可以完美地抽象出一个用户的信息全貌，作为应用大数据的根基，然后用于各类数据挖掘、个性化搜索推荐等工作中</p><p>pass</p><h2 id="设计可读写的面向资源的服务">设计可读写的面向资源的服务</h2><p><strong>面向资源架构的服务设计过程可以归纳为以下六个步骤</strong></p><ul><li><strong>资源分析与设计</strong></li><li><strong>规划资源暴露的操作</strong></li><li><strong>设计服务端资源表述</strong></li><li><strong>设计客户端资源表述</strong></li><li><strong>建立资源之间的链接</strong></li><li><strong>规划服务交互的响应</strong></li></ul><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/15.png" style="zoom:55%"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/16.png" style="zoom:55%"><h2 id="设计更好的服务——咖啡店的启发">设计更好的服务——咖啡店的启发</h2><p>关键在于采用异步方式处理服务</p><h3 id="需要解决的问题">需要解决的问题</h3><h4 id="通过缓存提升可伸缩性"><strong>通过缓存提升可伸缩性</strong></h4><p>为防止服务因过载而崩溃，可以使用一个逆向代理（reverse proxy）来缓存并提供那些频繁访问的资源表述。</p><p>在架构里增设了Web缓存（逆向代理），再加上有缓存元数据，<strong>客户端获取资源时就不会给服务器增添很大负担了</strong></p><p>缓存的另一个有利之处是：<strong>它屏蔽掉了服务器的间隙性故障，并通过提高资源可用率来帮助灾难恢复</strong></p><h4 id="无状态性"><strong>无状态性</strong></h4><p>所谓有状态指的是要求在多个异步操作的序列间维持事务资源的一定状态，但这就阻碍了消息的自由传递，因为消息只能向特定服务器传递，系统无法横向扩展，这也就等于损害了可伸缩性</p><h4 id="异常处理"><strong>异常处理</strong></h4><p>几种常见的错误处理策略里边有一个共同之处，如果损失不大，就不去追究原因，而是要快速处理，<strong>这种效益优先的原则，保证了星巴克经营的利益，因为建立一种纠错方案所花费的代价可能要比就此罢休更加高昂</strong></p><h5 id="①重试">①<strong>重试</strong></h5><p>当一大组操作（例如一次事务）中的某些操作失败时，我们基本有两种选择：</p><ul><li>回退已完成的操作</li><li>重试失败的操作</li></ul><p>如果重试有较大的概率能成功，那就可以考虑重试方式。如果失败的原因是违反了业务规则，那重试就不太可能会成功。如果失败的原因是某个外部系统挂了，那重试就有可能会成功。</p><blockquote><p>还记得幂等性吗？这里有一种特殊的重试：幂等接收器重试（retry with Idempotent Receiver）。在这种场景中，我们可以简单地重试所有操作，因为接收器成功之后便会忽略重复的消息</p></blockquote><h5 id="②补偿">②<strong>补偿</strong></h5><p>补偿是回退所有已完成的操作，让系统回到一致的状态。</p><p>例如：网上购物中中某个环节出错了，电商平台通常会采取补救措施（向信用卡退款）或者重试（把丢失的货物重新发送）的策略；在金融交易中，这些“补偿动作”能在交易失败时对已扣款进行退款处理</p><h4 id="善用状态码"><strong>善用状态码</strong></h4><p>状态代码是具有丰富语义的确认信息。让服务返回有意义状态代码，并且令客户端懂得如何处理状态代码，这相当于，我们给HTTP简单的请求响应机制增加了一层协调协议，从而提高了分布式系统的健壮性和可靠性</p><h2 id="Jersey服务实现">Jersey服务实现</h2><p>pass</p><h2 id="OpenAPI设计">OpenAPI设计</h2><p>我们需要解决如何把我们的服务描述清楚的问题。也就是说，需要服务开发者能够将API以某种规范的格式公开，而且API 文档能够及时更新以提高工作效率</p><h3 id="OpenAPI-规范（OAS）">OpenAPI 规范（OAS）</h3><p>OpenAPI 规范（OAS）定义了一个标准的、语言无关的 RESTful API 接口规范。</p><p>正确定义规范文档后，开发者就可以使用最少的实现逻辑来理解远程服务并与之交互。</p><blockquote><p>OpenAPI 规范（OAS）是一种用于描述 RESTful API 的标准格式，它使用 YAML 或 JSON 格式来定义 API 的接口信息，包括 API 的路径、参数、请求和响应格式等。OAS 的主要目的是为了提供一种统一的标准，使得不同的开发者和开发团队可以更加容易地理解和使用 API，从而提高 API 的可靠性和可用性。</p></blockquote><h3 id="Swagger">Swagger</h3><p>Swagger是一款RESTFUL接口的文档在线自动生成+功能测试功能软件。目标是为REST APIs 定义一个标准的，与语言无关的接口，使人和计算机在看不到源码或者看不到文档或者不能通过网络流量检测的情况下能发现和理解各种服务的功能</p><p>当服务通过Swagger定义，消费者就能与远程的服务互动通过少量的实现逻辑。类似于低级编程接口，Swagger去掉了调用服务时的很多猜测</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/18.png" style="zoom:55%"><h2 id="微服务架构">微服务架构</h2><blockquote><p>微服务架构是一种软件架构风格，它将一个大型的应用程序拆分成多个小型的服务，每个服务都运行在独立的进程中，服务之间通过轻量级的通信机制进行交互。每个服务都专注于完成一个特定的业务功能，可以独立部署、扩展和维护，从而提高了系统的可靠性、可扩展性和灵活性。</p><p>在微服务架构中，每个服务都可以使用不同的编程语言、数据库和技术栈，开发团队可以根据自己的需求和技能选择最合适的技术栈，从而提高了团队的生产力和创新性。此外，微服务架构还可以使得应用程序更加容易部署到云环境中，从而实现弹性伸缩和自动化运维。</p><p>但是，微服务架构也带来了一些挑战，例如服务之间的通信和协调、服务的数据一致性、服务的安全性和监控等方面都需要更加复杂的处理。因此，在采用微服务架构时需要仔细考虑架构设计和实现细节，以确保系统的可靠性和可维护性。</p></blockquote><h3 id="什么是微服务架构">什么是微服务架构</h3><p>微服务是由以单一应用程序构成的小服务，自己拥有自己的进程与轻量化处理，服务依业务功能设计，以全自动的方式部署，与其他服务使用HTTP API通信；</p><p>微服务是一种架构概念，核心思想在于通过将业务功能和需求分解到各个不同的服务中进行管理，实现对业务整体解耦。围绕业务模式创建应用服务，应用服务可独立地进行开发、迭代、部署，从而可以使项目架构更加清晰明确。</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/19.png" style="zoom:55%"><h3 id="微服务架构的特性与挑战">微服务架构的特性与挑战</h3><h4 id="特性">特性</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/21.png" style="zoom:55%"><h4 id="挑战">挑战</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/20.png" style="zoom:55%"><h3 id="Spring-Cloud-Netflix体系">Spring Cloud Netflix<strong>体系</strong></h3><h4 id="负载均衡">负载均衡</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/22.png" style="zoom:55%"><h4 id="服务网关——Netflix-Zuul">服务网关——Netflix Zuul</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/23.png" style="zoom:55%"><h4 id="服务调用映射——Open-Feign">服务调用映射——Open Feign</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/24.png" style="zoom:55%"><h4 id="监控和断路器——Hystrix">监控和断路器——Hystrix</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/404.webp" data-original="/posts/a5d0e82b/25.png" style="zoom:55%"><h5 id="什么是降级呢"><strong>什么是降级呢</strong></h5><p>降级是为了更好的用户体验，当一个方法调用异常时，不是简单等待，而是返回一个友好的提示给客户端，不调用真实服务逻辑，转为调用一个 fallback本地方法，保证服务链条的完整，避免服务雪崩。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://zwn2001.space">洛雪</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zwn2001.space/posts/a5d0e82b.html">https://zwn2001.space/posts/a5d0e82b.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zwn2001.space" target="_blank">ZWN's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91/">服务开发</a></div><div class="post_share"><div class="social-share" data-image="/img/cover2/1-min.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/14ee3806.html" title="PID算法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1/6.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">PID算法</div></div></a></div><div class="next-post pull-right"><a href="/posts/133d9777.html" title="SDU选课黑白名单"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1/30.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SDU选课黑白名单</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">洛雪</div><div class="author-info__description">我虽无意逐鹿，却知苍生苦楚</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">129</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/ZWN2001"><i class="fab fa-github"></i><span>我的Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZWN2001" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">新域名：www.zwn2001.space，有效期：10年。https://www.zwn-blog.xyz已过期。访问时建议科学上网，否则博客内公式渲染会出现问题且速度慢</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">服务开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chapter-1%EF%BC%9A%E7%BB%AA%E8%AE%BA"><span class="toc-number">1.1.</span> <span class="toc-text">Chapter-1：绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.1.1.</span> <span class="toc-text">什么是服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.2.</span> <span class="toc-text">优势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API%E5%B8%AE%E5%8A%A9%E5%BC%80%E5%8F%91%E8%80%85"><span class="toc-number">1.1.3.</span> <span class="toc-text">API帮助开发者</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%EF%BC%9A%E4%BB%8ERPC%E5%88%B0REST"><span class="toc-number">1.2.</span> <span class="toc-text">Web技术方案：从RPC到REST</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E7%9A%84%E5%9F%BA%E7%9F%B3"><span class="toc-number">1.2.1.</span> <span class="toc-text">web的基石</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B%EF%BC%88MIME%EF%BC%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">常用的媒体类型（MIME）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http%E5%8A%A8%E8%AF%8D"><span class="toc-number">1.2.3.</span> <span class="toc-text">Http动词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REST"><span class="toc-number">1.2.4.</span> <span class="toc-text">REST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8ERPC%E5%88%B0ROA"><span class="toc-number">1.2.5.</span> <span class="toc-text">从RPC到ROA</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XML-RPC"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">XML-RPC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SOAP"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">SOAP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#REST-2"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">REST</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E6%88%90RPC%E6%A8%A1%E5%BC%8F%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E6%A0%B8%E5%BF%83"><span class="toc-number">1.2.5.4.</span> <span class="toc-text">组成RPC模式的Web服务核心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RPC%E5%85%B3%E9%94%AE%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.5.5.</span> <span class="toc-text">RPC关键特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E5%88%B0ROA%E2%80%94REST%E9%A3%8E%E6%A0%BC%E7%9A%84Web%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.6.</span> <span class="toc-text">回到ROA—REST风格的Web服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#REST-vs-SOAP"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">REST vs. SOAP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTful-%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">1.2.7.</span> <span class="toc-text">RESTful 服务的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E5%92%8C%E8%A1%A8%E8%BF%B0"><span class="toc-number">1.3.</span> <span class="toc-text">资源和表述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">资源的本质</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B5%84%E6%BA%90"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">什么是资源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BF%B0%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">表述的本质</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%BE%E8%80%A6%E5%90%88%E4%B8%8E%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">松耦合与前后端分离</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E5%AA%92%E4%BD%93%E4%B8%8EHATEOAS"><span class="toc-number">1.3.3.</span> <span class="toc-text">超媒体与HATEOAS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HATEOAS%EF%BC%88%E8%B6%85%E5%AA%92%E4%BD%93%E7%AD%96%E7%95%A5"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">HATEOAS（超媒体策略</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.4.</span> <span class="toc-text">Http操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DELETE"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">DELETE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">POST</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#POST-to-Append"><span class="toc-number">1.3.4.2.1.</span> <span class="toc-text">POST-to-Append</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%97%A2%E4%B8%8D%E5%AE%89%E5%85%A8%E4%B9%9F%E4%B8%8D%E5%B9%82%E7%AD%89"><span class="toc-number">1.3.4.2.1.1.</span> <span class="toc-text">既不安全也不幂等</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Overloaded-POST"><span class="toc-number">1.3.4.2.2.</span> <span class="toc-text">Overloaded POST</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PUT"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">PUT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#PUT-vs-POST"><span class="toc-number">1.3.4.3.1.</span> <span class="toc-text">PUT vs. POST</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PATCH"><span class="toc-number">1.3.4.4.</span> <span class="toc-text">PATCH</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#PATCH%E6%96%B9%E6%B3%95%E6%97%A2%E4%B8%8D%E6%98%AF%E5%AE%89%E5%85%A8%E7%9A%84%EF%BC%8C%E4%B9%9F%E4%B8%8D%E8%83%BD%E4%BF%9D%E8%AF%81%E5%B9%82%E7%AD%89"><span class="toc-number">1.3.4.4.1.</span> <span class="toc-text">PATCH方法既不是安全的，也不能保证幂等</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E4%B8%8E%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.4.</span> <span class="toc-text">领域模型与领域驱动设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E4%B8%8E%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">领域与领域模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%EF%BC%88DDD%EF%BC%89"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">领域驱动设计（DDD）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%9F%9F%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.1.1.1.</span> <span class="toc-text">什么是域模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DDD%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.4.1.1.2.</span> <span class="toc-text">DDD是什么</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E6%98%AF%E9%87%8D%E8%A6%81%E7%9A%84"><span class="toc-number">1.4.1.1.3.</span> <span class="toc-text">为什么建立一个领域模型是重要的</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDD%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">DDD的主要任务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E8%A7%A3%E9%A2%86%E5%9F%9F%EF%BC%8C%E8%AF%86%E5%88%AB%E8%B5%84%E6%BA%90%EF%BC%8C%E5%88%92%E5%88%86%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.4.2.</span> <span class="toc-text">理解领域，识别资源，划分服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%90%86%E8%A7%A3%E9%A2%86%E5%9F%9F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">理解领域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%86%E5%88%AB%E8%B5%84%E6%BA%90"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">识别资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%92%E5%88%86%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">划分服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E8%BE%B9%E7%95%8C%E4%B8%8A%E5%AE%9A%E4%B9%89%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">在边界上定义接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REST%E6%88%90%E7%86%9F%E5%BA%A6%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.4.3.</span> <span class="toc-text">REST成熟度模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#level-0%EF%BC%9AHTTP%E4%BC%A0%E8%BE%93"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">level 0：HTTP传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#level-1%EF%BC%9A%E9%9D%A2%E5%90%91%E8%B5%84%E6%BA%90%E4%B8%BA%E4%B8%AD%E5%BF%83"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">level 1：面向资源为中心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#level-2%EF%BC%9A%E5%88%A9%E7%94%A8-HTTP%E5%8A%A8%E8%AF%8D%E8%AF%AD%E4%B9%89"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">level 2：利用 HTTP动词语义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#level-3%EF%BC%9A%E5%88%A9%E7%94%A8%E8%B6%85%E5%AA%92%E4%BD%93%E6%8E%A7%E5%88%B6"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">level 3：利用超媒体控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%8F%AA%E8%AF%BB%E7%9A%84%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.</span> <span class="toc-text">设计只读的资源服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">设计过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ROA-VS-RPC%EF%BC%88%E5%89%8D%E9%9D%A2%E9%93%BA%E5%9E%AB%E8%BF%87"><span class="toc-number">1.5.2.</span> <span class="toc-text">ROA VS. RPC（前面铺垫过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%9C%B0%E5%9B%BE%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.3.</span> <span class="toc-text">web地图服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">资源分析与设计</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%A0%E4%B8%AA%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.5.3.1.1.</span> <span class="toc-text">几个步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93"><span class="toc-number">1.5.3.1.2.</span> <span class="toc-text">一些总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E8%B5%84%E6%BA%90%E8%A1%A8%E8%BF%B0"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">设计资源表述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A8%E8%BF%B0%E6%A0%BC%E5%BC%8F%E7%9A%84%E9%80%89%E6%8B%A9%EF%BC%9AXHTML"><span class="toc-number">1.5.3.2.1.</span> <span class="toc-text">表述格式的选择：XHTML</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#REST%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E4%B8%8E%E7%94%A8%E6%88%B7%E6%9C%89%E5%85%B3%E7%9A%84%E8%B5%84%E6%BA%90%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.</span> <span class="toc-text">REST安全性和与用户有关的资源设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#REST%E5%AE%89%E5%85%A8%E6%80%A7%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text">REST安全性设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8%E6%80%A7%E5%BE%88%E9%87%8D%E8%A6%81"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">为什么服务安全性很重要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%80%A7%E4%B8%89%E6%96%B9%E9%9D%A2"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">安全性三方面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">认证与授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83%E6%9C%BA%E5%88%B6"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">用户身份验证和授权机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OAuth2-0"><span class="toc-number">1.6.1.5.</span> <span class="toc-text">OAuth2.0</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JWT"><span class="toc-number">1.6.1.6.</span> <span class="toc-text">JWT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">1.6.1.6.1.</span> <span class="toc-text">优点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%B9%9F%E6%98%AF%E4%B8%80%E7%A7%8D%E8%B5%84%E6%BA%90"><span class="toc-number">1.6.2.</span> <span class="toc-text">用户也是一种资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%8F%AF%E8%AF%BB%E5%86%99%E7%9A%84%E9%9D%A2%E5%90%91%E8%B5%84%E6%BA%90%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.7.</span> <span class="toc-text">设计可读写的面向资源的服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%9C%8D%E5%8A%A1%E2%80%94%E2%80%94%E5%92%96%E5%95%A1%E5%BA%97%E7%9A%84%E5%90%AF%E5%8F%91"><span class="toc-number">1.8.</span> <span class="toc-text">设计更好的服务——咖啡店的启发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.8.1.</span> <span class="toc-text">需要解决的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E7%BC%93%E5%AD%98%E6%8F%90%E5%8D%87%E5%8F%AF%E4%BC%B8%E7%BC%A9%E6%80%A7"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">通过缓存提升可伸缩性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E7%8A%B6%E6%80%81%E6%80%A7"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">无状态性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">1.8.1.3.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E9%87%8D%E8%AF%95"><span class="toc-number">1.8.1.3.1.</span> <span class="toc-text">①重试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E8%A1%A5%E5%81%BF"><span class="toc-number">1.8.1.3.2.</span> <span class="toc-text">②补偿</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%96%84%E7%94%A8%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.8.1.4.</span> <span class="toc-text">善用状态码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jersey%E6%9C%8D%E5%8A%A1%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.9.</span> <span class="toc-text">Jersey服务实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenAPI%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.10.</span> <span class="toc-text">OpenAPI设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#OpenAPI-%E8%A7%84%E8%8C%83%EF%BC%88OAS%EF%BC%89"><span class="toc-number">1.10.1.</span> <span class="toc-text">OpenAPI 规范（OAS）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Swagger"><span class="toc-number">1.10.2.</span> <span class="toc-text">Swagger</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84"><span class="toc-number">1.11.</span> <span class="toc-text">微服务架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84"><span class="toc-number">1.11.1.</span> <span class="toc-text">什么是微服务架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E7%9A%84%E7%89%B9%E6%80%A7%E4%B8%8E%E6%8C%91%E6%88%98"><span class="toc-number">1.11.2.</span> <span class="toc-text">微服务架构的特性与挑战</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%80%A7"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%91%E6%88%98"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">挑战</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-Cloud-Netflix%E4%BD%93%E7%B3%BB"><span class="toc-number">1.11.3.</span> <span class="toc-text">Spring Cloud Netflix体系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">负载均衡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E2%80%94%E2%80%94Netflix-Zuul"><span class="toc-number">1.11.3.2.</span> <span class="toc-text">服务网关——Netflix Zuul</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94Open-Feign"><span class="toc-number">1.11.3.3.</span> <span class="toc-text">服务调用映射——Open Feign</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E6%8E%A7%E5%92%8C%E6%96%AD%E8%B7%AF%E5%99%A8%E2%80%94%E2%80%94Hystrix"><span class="toc-number">1.11.3.4.</span> <span class="toc-text">监控和断路器——Hystrix</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%99%8D%E7%BA%A7%E5%91%A2"><span class="toc-number">1.11.3.4.1.</span> <span class="toc-text">什么是降级呢</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/7328da20.html" title="删除gitignore修改前提交的大文件"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover3/3-min.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="删除gitignore修改前提交的大文件"></a><div class="content"><a class="title" href="/posts/7328da20.html" title="删除gitignore修改前提交的大文件">删除gitignore修改前提交的大文件</a><time datetime="2023-07-10T13:50:49.000Z" title="发表于 2023-07-10 21:50:49">2023-07-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/54161dd4.html" title="记一次博客公式渲染排查"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover3/2-min.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="记一次博客公式渲染排查"></a><div class="content"><a class="title" href="/posts/54161dd4.html" title="记一次博客公式渲染排查">记一次博客公式渲染排查</a><time datetime="2023-06-23T01:21:51.000Z" title="发表于 2023-06-23 09:21:51">2023-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/88a0f6f.html" title="A-star路径规划"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2/15-min.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="A-star路径规划"></a><div class="content"><a class="title" href="/posts/88a0f6f.html" title="A-star路径规划">A-star路径规划</a><time datetime="2023-06-19T13:17:15.000Z" title="发表于 2023-06-19 21:17:15">2023-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/14ee3806.html" title="PID算法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1/6.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="PID算法"></a><div class="content"><a class="title" href="/posts/14ee3806.html" title="PID算法">PID算法</a><time datetime="2023-06-17T12:06:22.000Z" title="发表于 2023-06-17 20:06:22">2023-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a5d0e82b.html" title="服务开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2/1-min.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="服务开发"></a><div class="content"><a class="title" href="/posts/a5d0e82b.html" title="服务开发">服务开发</a><time datetime="2023-06-05T05:06:30.000Z" title="发表于 2023-06-05 13:06:30">2023-06-05</time></div></div></div></div></div></div></main><footer id="footer" style="background:0 0"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();" rel="external nofollow noreferrer"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();" rel="external nofollow noreferrer"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();" rel="external nofollow noreferrer"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.google.com/search?q=&quot;+window.getSelection().toString());" rel="external nofollow noreferrer"><i class="iconfont icon-baidu"></i><span>搜索</span></a><a class="rightMenu-item" href="javascript:rmf.searchinThisPage();" rel="external nofollow noreferrer"><i class="fas fa-search"></i><span>站内搜索</span></a><a class="rightMenu-item" href="#post-comment" onclick="rmf.yinyong()"><i class="fa-solid fa-message"></i><span>引用文本评论</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()" rel="external nofollow noreferrer"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()" rel="external nofollow noreferrer"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()" rel="external nofollow noreferrer"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()" rel="external nofollow noreferrer"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()" rel="external nofollow noreferrer"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();" rel="external nofollow noreferrer"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();" rel="external nofollow noreferrer"><i class="iconfont icon-fanti"></i><span>繁简转换</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();" rel="external nofollow noreferrer"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="javascript:fullScreen();" rel="external nofollow noreferrer"><i class="fas fa-expand"></i><span>进入全屏</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="https://unpkg.com/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://unpkg.com/pangu/dist/browser/pangu.min.js").then(()=>{pangu.autoSpacingPage()})}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://unpkg.com/katex/dist/katex.min.css"><script src="https://unpkg.com/katex/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach(a=>{btf.wrap(a,"div",{class:"katex-wrap"})})</script><script>function getGiscusTheme(e){return"dark"===e?"dark":"light"}function loadGiscus(){var e,t=Object.assign({src:"https://giscus.app/client.js","data-repo":"ZWN2001/ZWN2001.github.io","data-repo-id":"R_kgDOGH1XWg","data-category-id":"DIC_kwDOGH1XWs4CXnHJ","data-mapping":"pathname","data-theme":getGiscusTheme(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0},{"data-lang":"zh-CN","data-loading":"lazy",crossorigin:"anonymous","data-mapping":"og:title","data-input-position":"top","data-category":"Announcements"}),a=document.createElement("script");for(e in t)a.setAttribute(e,t[e]);document.getElementById("giscus-wrap").insertAdjacentElement("afterbegin",a)}function changeGiscusTheme(e){var t;e={setConfig:{theme:getGiscusTheme(e)}},(t=document.querySelector("iframe.giscus-frame"))&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")}function loadOtherComment(){loadGiscus()}btf.addModeChange("giscus",changeGiscusTheme),btf.loadComment(document.getElementById("giscus-wrap"),loadGiscus)</script></div><script type="text/javascript" src="https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js"></script><script type="text/javascript" src="/js/rightmenu.js"></script><script type="text/javascript" src="/js/memos/waterfall.min.js"></script><script type="text/javascript" src="/js/memos/project.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax src="https://fastly.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script><script data-pjax>function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载github calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://my-hexo-github-calender.vercel.app/api/?ZWN2001",["#ebedf0","#f1f8ff","#dbedff","#c8e1ff","#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],"ZWN2001")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style><script data-pjax>var parent,child;document.getElementById("recent-posts")&&"/"===location.pathname&&(parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/编程知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 洛雪の编程知识 (16)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/实用知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 洛雪の实用知识 (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/学习-课外拓展/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 洛雪の学习-课外拓展 (20)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://zwn2001.space/categories/学习-课内知识/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 洛雪の学习-课内知识 (57)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://zwn2001.space/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>',console.log("已挂载magnet"),parent.insertAdjacentHTML("afterbegin",child))</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(50% - 5px);background:#f2f2f2;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:#b30070}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a=c[o],i=function(){c=c.filter(function(t){return a!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(a)};(t=a).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),i()):(e=new Image,n=t.getAttribute("data-original"),e.onload=function(){t.src=n,t.removeAttribute("data-original"),i()},t.src!==n&&(e.src=n))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this)</script></body></html>