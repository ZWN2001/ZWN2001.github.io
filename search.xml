<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>é‰´æƒæŠ€æœ¯</title>
      <link href="/2022/03/21/%E9%89%B4%E6%9D%83%E6%8A%80%E6%9C%AF/"/>
      <url>/2022/03/21/%E9%89%B4%E6%9D%83%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h1>é‰´æƒæŠ€æœ¯</h1><h2 id="ä»çŠ¶æ€è¯´èµ·">ä»çŠ¶æ€è¯´èµ·</h2><p><strong>HTTP æ— çŠ¶æ€</strong></p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒHTTP æ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒHTTP è¯·æ±‚æ–¹å’Œå“åº”æ–¹é—´æ— æ³•ç»´æŠ¤çŠ¶æ€ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå®ƒä¸çŸ¥é“å‰åçš„è¯·æ±‚éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p>ä½†æœ‰çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤çŠ¶æ€ã€‚æœ€å…¸å‹çš„ï¼Œä¸€ä¸ªç”¨æˆ·ç™»é™†å¾®åšï¼Œå‘å¸ƒã€å…³æ³¨ã€è¯„è®ºï¼Œéƒ½åº”æ˜¯åœ¨ç™»å½•åçš„ç”¨æˆ·çŠ¶æ€ä¸‹çš„ã€‚</p><p><strong>æ ‡è®°</strong></p><p>é‚£è§£å†³åŠæ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ ‡è®°ã€‚</p><blockquote><p>åœ¨å­¦æ ¡æˆ–å…¬å¸ï¼Œå…¥å­¦å…¥èŒé‚£ä¸€å¤©èµ·ï¼Œä¼šå½•å…¥ä½ çš„èº«ä»½ã€è´¦æˆ·ä¿¡æ¯ï¼Œç„¶åç»™ä½ å‘ä¸ªå¡ï¼Œä»Šååœ¨å›­åŒºå†…ï¼Œä½ çš„é—¨ç¦ã€æ‰“å¡ã€æ¶ˆè´¹éƒ½åªéœ€è¦åˆ·è¿™å¼ å¡ã€‚</p></blockquote><p><strong>å‰ç«¯å­˜å‚¨</strong></p><p>è¿™å°±æ¶‰åŠåˆ°ä¸€å‘ã€ä¸€å­˜ã€ä¸€å¸¦ï¼Œå‘å¥½åŠï¼Œç™»é™†æ¥å£ç›´æ¥è¿”å›ç»™å‰ç«¯ï¼Œå­˜å‚¨å°±éœ€è¦å‰ç«¯æƒ³åŠæ³•äº†ã€‚</p><blockquote><p>å‰ææ˜¯ï¼Œä½ è¦æŠŠå¡å¸¦åœ¨èº«ä¸Šã€‚</p></blockquote><p>å‰ç«¯çš„å­˜å‚¨æ–¹å¼æœ‰å¾ˆå¤šã€‚</p><ul><li>æœ€çŸ¬çš„ï¼ŒæŒ‚åˆ°å…¨å±€å˜é‡ä¸Šï¼Œä½†è¿™æ˜¯ä¸ªã€Œä½“éªŒå¡ã€ï¼Œä¸€æ¬¡åˆ·æ–°é¡µé¢å°±æ²¡äº†</li><li>é«˜ç«¯ç‚¹çš„ï¼Œå­˜åˆ° cookieã€localStorage ç­‰é‡Œï¼Œè¿™å±äºã€Œä¼šå‘˜å¡ã€ï¼Œæ— è®ºæ€ä¹ˆåˆ·æ–°ï¼Œåªè¦æµè§ˆå™¨æ²¡æ¸…æ‰æˆ–è€…è¿‡æœŸï¼Œå°±ä¸€ç›´æ‹¿ç€è¿™ä¸ªçŠ¶æ€ã€‚</li></ul><p>å‰ç«¯å­˜å‚¨è¿™é‡Œä¸å±•å¼€äº†ã€‚</p><p>æœ‰åœ°æ–¹å­˜äº†ï¼Œè¯·æ±‚çš„æ—¶å€™å°±å¯ä»¥æ‹¼åˆ°å‚æ•°é‡Œå¸¦ç»™æ¥å£äº†ã€‚</p><h2 id="HTTP-Basic-Authentication">HTTP Basic Authentication</h2><blockquote><p>è¿™ç§æˆæƒæ–¹å¼æ˜¯<strong>æµè§ˆå™¨éµå®ˆhttpåè®®å®ç°çš„åŸºæœ¬æˆæƒæ–¹å¼</strong>ã€‚HTTPåè®®è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼ŒHTTPåè®®å®šä¹‰äº†åŸºæœ¬è®¤è¯è®¤è¯å…è®¸HTTPæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œç”¨æˆ·èº«ä»½è¯çš„æ–¹æ³•ã€‚</p></blockquote><p>1ã€å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®æ­¤æ—¶ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å°šæœªè¢«éªŒè¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.0</span><br><span class="line">Host:www.google.com</span><br></pre></td></tr></table></figure><p>2ã€æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€éªŒè¯è¯·æ±‚ä»£ç <strong>401</strong>,ï¼ˆ**WWW-Authenticate: Basic realm=â€<a href="http://google.com">google.com</a>â€**è¿™å¥è¯æ˜¯å…³é”®ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯ä¸ä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥ç•Œé¢ï¼‰æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¤§æŠµå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.0 401 Unauthorised</span><br><span class="line">Server: SokEvo/1.0</span><br><span class="line">WWW-Authenticate: Basic realm=â€google.comâ€</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></table></figure><p>3ã€å½“ç¬¦åˆhttp1.0æˆ–1.1è§„èŒƒçš„å®¢æˆ·ç«¯ï¼ˆWEBæµè§ˆå™¨å¦‚IEï¼ŒFIREFOXï¼‰<strong>æ”¶åˆ°401è¿”å›å€¼</strong>æ—¶ï¼Œå°†<strong>è‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªç™»å½•çª—å£</strong>ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img src="https://gitee.com/skyyemperor/pic/raw/master/2021/04/Snip_04-17_10-27-12.png" alt=""></p><p>4ã€ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œå°†ç”¨æˆ·ååŠå¯†ç ä»¥BASE64ç¼–ç ï¼Œå¹¶å°†å¯†æ–‡æ”¾å…¥å‰ä¸€æ¡è¯·æ±‚ä¿¡æ¯ä¸­ï¼Œåˆ™å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€æ¡è¯·æ±‚ä¿¡æ¯åˆ™å˜æˆå¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.0</span><br><span class="line">Host:www.google.com</span><br><span class="line">Authorization: Basic dXNlcjE6cGFzcw==</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šdXNlcjE6cGFzcw==è¡¨ç¤ºåŠ å¯†åçš„ç”¨æˆ·ååŠå¯†ç ï¼ˆç”¨æˆ·å:å¯†ç  ç„¶åé€šè¿‡base64ç¼–ç ï¼Œç¼–ç è¿‡ç¨‹æ˜¯æµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºåŠ å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ï¼‰</p></blockquote><p>5ã€æœåŠ¡å™¨æ”¶åˆ°ä¸Šè¿°è¯·æ±‚ä¿¡æ¯åï¼Œå°†Authorizationå­—æ®µåçš„ç”¨æˆ·ä¿¡æ¯å–å‡ºã€è§£å¯†ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ååŠå¯†ç ä¸ç”¨æˆ·æ•°æ®åº“è¿›è¡Œæ¯”è¾ƒéªŒè¯ã€‚</p><ul><li>è‹¥ç”¨æˆ·ååŠå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®è¯·æ±‚ï¼Œå°†æ‰€è¯·æ±‚èµ„æºå‘é€ç»™å®¢æˆ·ç«¯</li><li>è‹¥ç”¨æˆ·ååŠå¯†ç ä¸æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™ä¼šè¿”å›401ï¼Œè¡¨ç¤ºè®¤è¯å¤±è´¥</li></ul><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>base64åŠ å¯†æ˜¯å¯é€†çš„ï¼Œä¸å®‰å…¨</li></ul><h2 id="session-cookie">session-cookie</h2><blockquote><p>åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„cookieæ¥å®ç°å‰åç«¯çš„è®¤è¯ã€‚</p></blockquote><p>1ã€æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯<strong>é¦–æ¬¡è®¿é—®</strong>æ—¶<strong>åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºsession</strong>ï¼Œç„¶åä¿å­˜session(æˆ‘ä»¬å¯ä»¥å°†sessionä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨redisä¸­ï¼Œæ¨èä½¿ç”¨åè€…)ï¼Œç„¶åç»™è¿™ä¸ªsessionç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†å­—ç¬¦ä¸²,ç„¶ååœ¨å“åº”å¤´ä¸­ç§ä¸‹è¿™ä¸ªå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚<br>2ã€<strong>æµè§ˆå™¨</strong>ä¸­æ”¶åˆ°è¯·æ±‚å“åº”çš„æ—¶å€™ä¼šè§£æå“åº”å¤´ï¼Œç„¶åå°†<strong>sidä¿å­˜åœ¨æœ¬åœ°cookie</strong>ä¸­ã€‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šè¯¥åŸŸåä¸‹çš„cookieä¿¡æ¯(å…¶ä¸­å°±åŒ…æ‹¬sid)ã€‚<br>3ã€<strong>æœåŠ¡å™¨</strong>åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šå»<strong>è§£æè¯·æ±‚å¤´cookieä¸­çš„sid</strong>ï¼Œæ ¹æ®è¿™ä¸ªsidå»æ‰¾æœåŠ¡å™¨ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯çš„sessionï¼Œåˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚</p><p>å…¸å‹çš„ session ç™»é™†/éªŒè¯æµç¨‹ï¼š</p><p><img src="1.png" alt=""></p><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>cookieä¾èµ–äºæµè§ˆå™¨</li><li>cookieå®¹æ˜“è¢«çªƒå–(ä¾‹XSSæ”»å‡»)</li><li>éšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§</li></ul><h2 id="Token">Token</h2><p>1ã€å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½•</p><p>2ã€æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç </p><p>3ã€éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯</p><p>4ã€å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… Local Storage é‡Œ</p><p>5ã€å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token</p><p>6ã€æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ®</p><p><img src="2.png" alt=""></p><h3 id="refresh-token">refresh token</h3><p>tokenï¼Œä½œä¸ºæƒé™å®ˆæŠ¤è€…ï¼Œæœ€é‡è¦çš„å°±æ˜¯ã€Œå®‰å…¨ã€ã€‚</p><p>ä¸šåŠ¡æ¥å£ç”¨æ¥é‰´æƒçš„ tokenï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º access tokenã€‚è¶Šæ˜¯æƒé™æ•æ„Ÿçš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬è¶Šå¸Œæœ› access token æœ‰æ•ˆæœŸè¶³å¤ŸçŸ­ï¼Œä»¥é¿å…è¢«ç›—ç”¨ã€‚ä½†è¿‡çŸ­çš„æœ‰æ•ˆæœŸä¼šé€ æˆ access token ç»å¸¸è¿‡æœŸï¼Œè¿‡æœŸåæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ä¸€ç§åŠæ³•æ˜¯ï¼Œè®©ç”¨æˆ·é‡æ–°ç™»å½•è·å–æ–° tokenï¼Œæ˜¾ç„¶ä¸å¤Ÿå‹å¥½ï¼Œè¦çŸ¥é“æœ‰çš„ access token è¿‡æœŸæ—¶é—´å¯èƒ½åªæœ‰å‡ åˆ†é’Ÿã€‚</p><p>å¦å¤–ä¸€ç§åŠæ³•æ˜¯ï¼Œå†æ¥ä¸€ä¸ª tokenï¼Œä¸€ä¸ªä¸“é—¨ç”Ÿæˆ access token çš„ tokenï¼Œæˆ‘ä»¬ç§°ä¸º refresh tokenã€‚</p><ul><li>access token ç”¨æ¥è®¿é—®ä¸šåŠ¡æ¥å£ï¼Œç”±äºæœ‰æ•ˆæœŸè¶³å¤ŸçŸ­ï¼Œç›—ç”¨é£é™©å°ï¼Œä¹Ÿå¯ä»¥ä½¿è¯·æ±‚æ–¹å¼æ›´å®½æ¾çµæ´»</li><li>refresh token ç”¨æ¥è·å– access tokenï¼Œæœ‰æ•ˆæœŸå¯ä»¥é•¿ä¸€äº›ï¼Œé€šè¿‡ç‹¬ç«‹æœåŠ¡å’Œä¸¥æ ¼çš„è¯·æ±‚æ–¹å¼å¢åŠ å®‰å…¨æ€§ï¼›ç”±äºä¸å¸¸éªŒè¯ï¼Œä¹Ÿå¯ä»¥å¦‚å‰é¢çš„ session ä¸€æ ·å¤„ç†</li></ul><p>æœ‰äº† refresh token åï¼Œå‡ ç§æƒ…å†µçš„è¯·æ±‚æµç¨‹å˜æˆè¿™æ ·ï¼š</p><p><img src="3.png" alt=""></p><p>å¦‚æœ refresh token ä¹Ÿè¿‡æœŸäº†ï¼Œå°±åªèƒ½é‡æ–°ç™»å½•äº†ã€‚</p><h3 id="session-å’Œ-token">session å’Œ token</h3><p>session å’Œ token éƒ½æ˜¯è¾¹ç•Œå¾ˆæ¨¡ç³Šçš„æ¦‚å¿µï¼Œå°±åƒå‰é¢è¯´çš„ï¼Œrefresh token ä¹Ÿå¯èƒ½ä»¥ session çš„å½¢å¼ç»„ç»‡ç»´æŠ¤ã€‚</p><p>ç‹­ä¹‰ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸è®¤ä¸º session æ˜¯ã€Œç§åœ¨ cookie ä¸Šã€æ•°æ®å­˜åœ¨æœåŠ¡ç«¯ã€çš„è®¤è¯æ–¹æ¡ˆï¼Œtoken æ˜¯ã€Œå®¢æˆ·ç«¯å­˜å“ªéƒ½è¡Œã€æ•°æ®å­˜åœ¨ token é‡Œã€çš„è®¤è¯æ–¹æ¡ˆã€‚å¯¹ session å’Œ token çš„å¯¹æ¯”æœ¬è´¨ä¸Šæ˜¯ã€Œå®¢æˆ·ç«¯å­˜ cookie / å­˜åˆ«åœ°å„¿ã€ã€ã€ŒæœåŠ¡ç«¯å­˜æ•°æ® / ä¸å­˜æ•°æ®ã€çš„å¯¹æ¯”ã€‚</p><h2 id="JWTå®ç°">JWTå®ç°</h2><h3 id="JWTé•¿ä»€ä¹ˆæ ·ï¼Ÿ">JWTé•¿ä»€ä¹ˆæ ·ï¼Ÿ</h3><p>JWTæ˜¯ç”±ä¸‰æ®µä¿¡æ¯æ„æˆçš„ï¼Œå°†è¿™ä¸‰æ®µä¿¡æ¯æ–‡æœ¬ç”¨<code>.</code>é“¾æ¥ä¸€èµ·å°±æ„æˆäº†Jwtå­—ç¬¦ä¸²ã€‚å°±åƒè¿™æ ·:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="selector-class">.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9</span><span class="selector-class">.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span></span><br></pre></td></tr></table></figure><h3 id="JWTçš„æ„æˆ">JWTçš„æ„æˆ</h3><p>ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸º<strong>å¤´éƒ¨ï¼ˆheader)</strong>,ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸º<strong>è½½è·ï¼ˆpayload</strong>, ç±»ä¼¼äºé£æœºä¸Šæ‰¿è½½çš„ç‰©å“)ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯<strong>ç­¾è¯ï¼ˆsignature)</strong>ã€‚</p><p>ğŸŒ³<strong>header</strong></p><p>jwtçš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ul><li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯jwt</li><li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256</li></ul><p>å®Œæ•´çš„å¤´éƒ¨å°±åƒä¸‹é¢è¿™æ ·çš„JSONï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;typ&quot;</span>: <span class="string">&quot;JWT&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;alg&quot;</span>: <span class="string">&quot;HS256&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°†å¤´éƒ¨è¿›è¡Œbase64åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„),æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9</span><br></pre></td></tr></table></figure><p>ğŸŒ³<strong>payload</strong></p><p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚è¿™ä¸ªåå­—åƒæ˜¯ç‰¹æŒ‡é£æœºä¸Šæ‰¿è½½çš„è´§å“ï¼Œè¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p><ul><li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</li><li>å…¬å…±çš„å£°æ˜</li><li>ç§æœ‰çš„å£°æ˜</li></ul><p><strong>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</strong> (å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨) ï¼š</p><ul><li><strong>iss</strong>: jwtç­¾å‘è€…</li><li><strong>sub</strong>: jwtæ‰€é¢å‘çš„ç”¨æˆ·</li><li><strong>aud</strong>: æ¥æ”¶jwtçš„ä¸€æ–¹</li><li><strong>exp</strong>: jwtçš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</li><li><strong>nbf</strong>: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„.</li><li><strong>iat</strong>: jwtçš„ç­¾å‘æ—¶é—´</li><li><strong>jti</strong>: jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</li></ul><p><strong>å…¬å…±çš„å£°æ˜</strong> ï¼š<br>å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯.ä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†.</p><p><strong>ç§æœ‰çš„å£°æ˜</strong> ï¼š<br>ç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºbase64æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p><p>å®šä¹‰ä¸€ä¸ªpayload:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;sub&quot;</span>: <span class="string">&quot;1234567890&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;userId&quot;</span>: <span class="number">34</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°†å…¶è¿›è¡Œbase64åŠ å¯†ï¼Œå¾—åˆ°Jwtçš„ç¬¬äºŒéƒ¨åˆ†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwidXNlcklkIjozNH0=</span><br></pre></td></tr></table></figure><p>ğŸŒ³<strong>signature</strong></p><p>jwtçš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>header (base64åçš„)</li><li>payload (base64åçš„)</li><li>secret</li></ul><p>è¿™ä¸ªéƒ¨åˆ†éœ€è¦base64åŠ å¯†åçš„headerå’Œbase64åŠ å¯†åçš„payloadä½¿ç”¨<code>.</code>è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡headerä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç›<code>secret</code>ç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº†jwtçš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// javascript</span></span><br><span class="line"><span class="keyword">var</span> encodedString = base64UrlEncode(header) + <span class="string">&#x27;.&#x27;</span> + base64UrlEncode(payload);</span><br><span class="line"></span><br><span class="line"><span class="comment">//TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span></span><br><span class="line"><span class="keyword">var</span> signature = HMACSHA256(encodedString, <span class="string">&#x27;secret&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å°†è¿™ä¸‰éƒ¨åˆ†ç”¨<code>.</code>è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²,æ„æˆäº†æœ€ç»ˆçš„jwt:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šsecretæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œjwtçš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œsecretå°±æ˜¯ç”¨æ¥è¿›è¡Œjwtçš„ç­¾å‘å’Œjwtçš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ªsecret, é‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘jwtäº†ã€‚</p></blockquote><p><strong>ä¼˜ç‚¹</strong></p><ul><li>å› ä¸ºjsonçš„é€šç”¨æ€§ï¼Œæ‰€ä»¥JWTæ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼ŒåƒJAVA,JavaScript,NodeJS,PHPç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</li><li>å› ä¸ºæœ‰äº†payloadéƒ¨åˆ†ï¼Œæ‰€ä»¥JWTå¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</li><li>ä¾¿äºä¼ è¾“ï¼Œjwtçš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</li><li>å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯, æ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•</li></ul><p><strong>å®‰å…¨ç›¸å…³</strong></p><ul><li>ä¸åº”è¯¥åœ¨jwtçš„payloadéƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</li><li>ä¿æŠ¤å¥½secretç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</li><li>å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨httpsåè®®</li></ul><h2 id="è‡ªå®šä¹‰å®ç°">è‡ªå®šä¹‰å®ç°</h2><p>1ã€å®¢æˆ·ç«¯å‘æ¥ç”¨æˆ·åå’Œå¯†ç ï¼ŒæœåŠ¡ç«¯éªŒè¯ä¹‹åï¼Œä¼šä»æ•°æ®åº“å¾—åˆ°ä¸€ä¸ªuserId(ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†)</p><p>2ã€æœåŠ¡ç«¯æ ¹æ®è¿™ä¸ªuserIdæ¥ç”ŸæˆTOKENï¼Œç»„è£…ä¸€ä¸ªå­—ç¬¦ä¸² <code>date()+&quot;system-token-&quot;+userId</code>ï¼Œå°†è¿™æ®µå­—ç¬¦ä¸²ç”¨md5åŠ å¯†ä½œä¸ºtokenï¼›tokenæœ‰æ•ˆæœŸä¸èƒ½è¿‡é•¿ï¼Œä½†æ˜¯ä¸èƒ½è®©ç”¨æˆ·é¢‘ç¹ç™»å½•ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨refresh_tokenç”¨æ¥åˆ·æ–°tokenï¼Œç»„è£…ä¸€ä¸ªå­—ç¬¦ä¸² <code>date()+&quot;system-refresh_token-&quot;+userId</code>ï¼Œå°†è¿™æ®µå­—ç¬¦ä¸²ç”¨md5åŠ å¯†ä½œä¸ºtokenã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1618632535180system-token-34  -&gt;  0b80013ba2b117e62336a14f2b040dc4</span><br><span class="line">1618632535182system-refresh_token-34  -&gt;  0b4b264d76c934d6ef85323187086afe</span><br></pre></td></tr></table></figure><p>3ã€å°†tokenå’ŒuserIdä½œä¸ºä¸€ä¸ªé”®å€¼å­˜åˆ°redisæ•°æ®åº“ï¼Œå°†refresh_tokentokenå’ŒuserIdä½œä¸ºä¸€ä¸ªé”®å€¼å­˜åˆ°redisæ•°æ®åº“ï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">token:0b80013ba2b117e62336a14f2b040dc4 : 34  -&gt;  redis          <span class="comment"># tokenè¿‡æœŸæ—¶é—´2å°æ—¶</span></span><br><span class="line">refresh_token:0b4b264d76c934d6ef85323187086afe : 34  -&gt;  redis  <span class="comment"># refresh_tokenè¿‡æœŸæ—¶é—´ä¸€ä¸ªæœˆ</span></span><br></pre></td></tr></table></figure><p>4ã€è‹¥ç”¨æˆ·å¯†ç æ­£ç¡®ï¼Œå°±å°†tokenå’Œrefresh_tokenå‘é€ç»™å®¢æˆ·ç«¯</p><p>5ã€æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°ç©è€äº†ã€‚å®¢æˆ·ç«¯åœ¨éœ€è¦é‰´æƒçš„æ¥å£ä¸Šï¼Œä½¿ç”¨è¯·æ±‚å¤´å¸¦ä¸Šè¿™ä¸ªtokenã€‚</p><p>6ã€æœåŠ¡ç«¯æ¥æ”¶åˆ°è¿™ä¸ªtokenï¼Œå¯ä»¥åœ¨redisä¸­æŸ¥è¯¢è¿™ä¸ªtokenå¯¹åº”çš„userId</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis.get(<span class="string">&quot;token:0b80013ba2b117e62336a14f2b040dc4&quot;</span>)  -&gt;  34</span><br></pre></td></tr></table></figure><p>7ã€è‹¥tokenè¿‡æœŸï¼ŒæœåŠ¡ç«¯åœ¨redisæŸ¥è¯¢çš„å€¼ä¸ºç©ºï¼Œå°±è¿”å›ä¸€ä¸ª<code>tokenå¤±æ•ˆçš„çŠ¶æ€ç </code>ï¼Œå®¢æˆ·ç«¯åˆ©ç”¨refresh_tokenæ¥è·å–æ–°çš„tokenï¼Œé¿å…ç”¨æˆ·é‡å¤ç™»å½•ã€‚</p><h2 id="JWTè¯¦ç»†ä½¿ç”¨">JWTè¯¦ç»†ä½¿ç”¨</h2><h3 id="å¼•å…¥ä¾èµ–">å¼•å…¥ä¾èµ–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å¼•å…¥JWT--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.10</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆtoken">ç”Ÿæˆtoken</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Calendar instance = Calendar.getInstance();</span><br><span class="line">        instance.add(Calendar.SECOND,<span class="number">20</span>);</span><br><span class="line">        String token = JWT.create()</span><br><span class="line">                .withHeader(map) <span class="comment">//å¯ä»¥ä¸è®¾å®šï¼Œå°±æ˜¯ä½¿ç”¨é»˜è®¤çš„</span></span><br><span class="line">                .withClaim(<span class="string">&quot;userId&quot;</span>,<span class="number">20</span>)<span class="comment">//payload  //è‡ªå®šä¹‰ç”¨æˆ·å</span></span><br><span class="line">                .withClaim(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">                .withExpiresAt(instance.getTime()) <span class="comment">//æŒ‡å®šä»¤ç‰Œè¿‡æœŸæ—¶é—´</span></span><br><span class="line">                .sign(Algorithm.HMAC256(<span class="string">&quot;fdahuifeuw78921&quot;</span>));<span class="comment">//ç­¾å</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®ä»¤ç‰Œå’Œç­¾åè§£ææ•°æ®">æ ¹æ®ä»¤ç‰Œå’Œç­¾åè§£ææ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JWTVerifier jwtVerifier = JWT.require(Algorithm.HMAC256(<span class="string">&quot;fdahuif921&quot;</span>)).build();</span><br><span class="line">        DecodedJWT decodedJWT = jwtVerifier.verify(token);</span><br><span class="line">        decodedJWT.getClaim(<span class="string">&quot;userId&quot;</span>).asInt();<span class="comment">//è·å–è´Ÿè½½é‡Œé¢å¯¹åº”çš„å†…å®¹</span></span><br><span class="line">        decodedJWT.getClaim(<span class="string">&quot;username&quot;</span>).asString();</span><br><span class="line">        decodedJWT.getExpiresAt();<span class="comment">//è·å–è¿‡æœŸæ—¶é—´</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸è§å¼‚å¸¸ä¿¡æ¯">å¸¸è§å¼‚å¸¸ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SignatureVerificationException <span class="comment">//ç­¾åä¸ä¸€è‡´å¼‚å¸¸</span></span><br><span class="line">TokenExpiredException <span class="comment">//ä»¤ç‰Œè¿‡æœŸå¼‚å¸¸</span></span><br><span class="line">AlgorithmMismatchException <span class="comment">//ç®—æ³•ä¸åŒ¹é…å¼‚å¸¸</span></span><br><span class="line">InvalidClaimException <span class="comment">//å¤±æ•ˆçš„payloadå¼‚å¸¸ï¼ˆä¼ ç»™å®¢æˆ·ç«¯åï¼Œtokenè¢«æ”¹åŠ¨ï¼ŒéªŒè¯ä¸ä¸€è‡´ï¼‰</span></span><br></pre></td></tr></table></figure><h2 id="å°è£…å·¥å…·ç±»">å°è£…å·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String SIGNATURE = <span class="string">&quot;token!@#$%^7890&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆtoken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map //ä¼ å…¥payload</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¿”å›token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getToken</span><span class="params">(Map&lt;String,String&gt; map)</span></span>&#123;</span><br><span class="line">        JWTCreator.Builder builder = JWT.create();</span><br><span class="line">        map.forEach((k,v)-&gt;&#123;</span><br><span class="line">            builder.withClaim(k,v);</span><br><span class="line">        &#125;);</span><br><span class="line">        Calendar instance = Calendar.getInstance();</span><br><span class="line">        instance.add(Calendar.SECOND,<span class="number">7</span>);</span><br><span class="line">        builder.withExpiresAt(instance.getTime());</span><br><span class="line">        <span class="keyword">return</span> builder.sign(Algorithm.HMAC256(SIGNATURE)).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">verify</span><span class="params">(String token)</span></span>&#123;</span><br><span class="line">        JWT.require(Algorithm.HMAC256(SIGNATURE)).build().verify(token);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–tokenä¸­payload</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DecodedJWT <span class="title">getToken</span><span class="params">(String token)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> JWT.require(Algorithm.HMAC256(SIGNATURE)).build().verify(token);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringBootæ•´åˆJWT">SpringBootæ•´åˆJWT</h2><h3 id="ç™»å½•æ—¶ç”Ÿæˆtoken">ç™»å½•æ—¶ç”Ÿæˆtoken</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//controllerå±‚æ¥æ”¶æ•°æ®ï¼Œç”Ÿæˆtokenï¼Œå¹¶å“åº”</span></span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    User userDB = userService.login(user);</span><br><span class="line">    Map&lt;String,String&gt; payload = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    payload.put(<span class="string">&quot;id&quot;</span>,userDB.getId());</span><br><span class="line">    payload.put(<span class="string">&quot;name&quot;</span>,userDB.getName());</span><br><span class="line">    <span class="comment">//ç”ŸæˆJWTä»¤ç‰Œ</span></span><br><span class="line">    String token = JWTUtils.getToken(payload);</span><br><span class="line">    map.put(<span class="string">&quot;state&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;è®¤è¯æˆåŠŸ&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;token&quot;</span>,token);<span class="comment">//å“åº”token</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    map.put(<span class="string">&quot;state&quot;</span>,<span class="string">&quot;false&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>,e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å£°æ˜ä¸€ä¸ªtokenæ‹¦æˆªå™¨ç±»">å£°æ˜ä¸€ä¸ªtokenæ‹¦æˆªå™¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liup.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.AlgorithmMismatchException;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.SignatureVerificationException;</span><br><span class="line"><span class="keyword">import</span> com.auth0.jwt.exceptions.TokenExpiredException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.office.utils.JWTUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JWTéªŒè¯æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//ä»¤ç‰Œå»ºè®®æ˜¯æ”¾åœ¨è¯·æ±‚å¤´ä¸­ï¼Œè·å–è¯·æ±‚å¤´ä¸­ä»¤ç‰Œ</span></span><br><span class="line">        String token = request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            JWTUtils.verify(token);<span class="comment">//éªŒè¯ä»¤ç‰Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;<span class="comment">//æ”¾è¡Œè¯·æ±‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SignatureVerificationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ— æ•ˆç­¾å&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (TokenExpiredException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;tokenè¿‡æœŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AlgorithmMismatchException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;tokenç®—æ³•ä¸ä¸€è‡´&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;tokenå¤±æ•ˆ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(<span class="string">&quot;state&quot;</span>,<span class="keyword">false</span>);<span class="comment">//è®¾ç½®çŠ¶æ€</span></span><br><span class="line">        <span class="comment">//å°†mapè½¬åŒ–æˆjsonï¼Œresponseä½¿ç”¨çš„æ˜¯Jackson</span></span><br><span class="line">        String json = <span class="keyword">new</span> ObjectMapper().writeValueAsString(map);</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().print(json);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ‹¦æˆªå™¨">é…ç½®æ‹¦æˆªå™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.office.interceptor.JWTInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> JWTInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/user/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="OAuth">OAuth</h2><blockquote><p>OAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ª<strong>å¼€æ”¾æ ‡å‡†</strong>ï¼Œ<strong>å…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹</strong>ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘ç”¨æˆ·å¾æ±‚æˆæƒã€‚</p><p>æˆ‘ä»¬å¸¸è§çš„æä¾›OAuthè®¤è¯æœåŠ¡çš„å‚å•†æœ‰æ”¯ä»˜å®ï¼ŒQQ,å¾®ä¿¡ã€‚</p></blockquote><p><strong>OAuth 2.0 è§„å®šäº†å››ç§è·å¾—ä»¤ç‰Œçš„æµç¨‹ã€‚</strong></p><ul><li>æˆæƒç ï¼ˆauthorization-codeï¼‰</li><li>éšè—å¼ï¼ˆimplicitï¼‰</li><li>å¯†ç å¼ï¼ˆpasswordï¼‰ï¼š</li><li>å®¢æˆ·ç«¯å‡­è¯ï¼ˆclient credentialsï¼‰</li></ul><blockquote><p>æ³¨æ„ï¼Œä¸ç®¡å“ªä¸€ç§æˆæƒæ–¹å¼ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéƒ½å¿…é¡»å…ˆåˆ°ç³»ç»Ÿå¤‡æ¡ˆï¼Œè¯´æ˜è‡ªå·±çš„èº«ä»½ï¼Œç„¶åä¼šæ‹¿åˆ°ä¸¤ä¸ªèº«ä»½è¯†åˆ«ç ï¼šå®¢æˆ·ç«¯ IDï¼ˆclient IDï¼‰å’Œå®¢æˆ·ç«¯å¯†é’¥ï¼ˆclient secretï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä»¤ç‰Œè¢«æ»¥ç”¨ï¼Œæ²¡æœ‰å¤‡æ¡ˆè¿‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ˜¯ä¸ä¼šæ‹¿åˆ°ä»¤ç‰Œçš„ã€‚</p></blockquote><ul><li><p><strong>æˆæƒç æ–¹å¼</strong></p><blockquote><p><strong>æˆæƒç ï¼ˆauthorization codeï¼‰æ–¹å¼ï¼ŒæŒ‡çš„æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆç”³è¯·ä¸€ä¸ªæˆæƒç ï¼Œç„¶åå†ç”¨è¯¥ç è·å–ä»¤ç‰Œã€‚</strong></p></blockquote><p>è¿™é‡Œä»¥ç äº‘(<a href="http://gitee.com">gitee.com</a>)çš„QQç™»å½•ä¸ºä¾‹(<a href="https://wiki.connect.qq.com/%E4%BD%BF%E7%94%A8authorization_code%E8%8E%B7%E5%8F%96access_token">QQå®˜æ–¹æ–‡æ¡£</a>)ï¼š</p><p><strong>1ã€ç™»å½• <a href="https://connect.qq.com/devuser.html#/">QQ äº’è”å¹³å°</a>ï¼Œæ³¨å†Œæˆä¸ºå¼€å‘è€…ï¼Œæ³¨å†Œä¸€ä¸ªåº”ç”¨</strong></p><p><strong>2ã€è·å–Authorization Code</strong></p><p>è¯·æ±‚åœ°å€ï¼š <a href="https://graph.qq.com/oauth2.0/authorize">https://graph.qq.com/oauth2.0/authorize</a></p><p><img src="https://gitee.com/skyyemperor/pic/raw/master/2021/04/Snip_04-17_13-15-48.png" alt=""></p><p>å¦‚æœç”¨æˆ·æˆåŠŸç™»å½•å¹¶æˆæƒï¼Œåˆ™ä¼šè·³è½¬åˆ°æŒ‡å®šçš„å›è°ƒåœ°å€ï¼Œå¹¶åœ¨redirect_uriåœ°å€åå¸¦ä¸ŠAuthorization Codeå’ŒåŸå§‹çš„stateå€¼ã€‚å¦‚ <a href="http://graph.qq.com/demo/index.jsp?code=9A5F************************06AF&amp;state=test">http://graph.qq.com/demo/index.jsp?code=9A5F************************06AF&amp;state=test</a><br>æ³¨æ„ï¼šæ­¤codeä¼šåœ¨10åˆ†é’Ÿå†…è¿‡æœŸã€‚</p><p><strong>3ã€é€šè¿‡Authorization Codeè·å–Access Token(åç«¯è¯·æ±‚)</strong></p><p><img src="https://gitee.com/skyyemperor/pic/raw/master/2021/04/Snip_04-17_13-17-30.png" alt=""></p><p><strong>4ã€ä¹‹åå³å¯é€šè¿‡Access Tokenè·å–QQçš„ç”¨æˆ·ä¿¡æ¯</strong></p></li><li><p><strong>éšè—å¼</strong></p><p>æœ‰äº› Web åº”ç”¨æ˜¯çº¯å‰ç«¯åº”ç”¨ï¼Œæ²¡æœ‰åç«¯ã€‚è¿™æ—¶å°±ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹å¼äº†ï¼Œå¿…é¡»å°†ä»¤ç‰Œå‚¨å­˜åœ¨å‰ç«¯ã€‚<strong>å…è®¸ç›´æ¥å‘å‰ç«¯é¢å‘ä»¤ç‰Œã€‚è¿™ç§æ–¹å¼æ²¡æœ‰æˆæƒç è¿™ä¸ªä¸­é—´æ­¥éª¤ï¼Œæ‰€ä»¥ç§°ä¸ºï¼ˆæˆæƒç ï¼‰â€œéšè—å¼â€ï¼ˆimplicitï¼‰ã€‚</strong></p></li><li><p><strong>å¯†ç å¼</strong></p><p><strong>å¦‚æœä½ é«˜åº¦ä¿¡ä»»æŸä¸ªåº”ç”¨ï¼ŒRFC 6749 ä¹Ÿå…è®¸ç”¨æˆ·æŠŠç”¨æˆ·åå’Œå¯†ç ï¼Œç›´æ¥å‘Šè¯‰è¯¥åº”ç”¨ã€‚è¯¥åº”ç”¨å°±ä½¿ç”¨ä½ çš„å¯†ç ï¼Œç”³è¯·ä»¤ç‰Œï¼Œè¿™ç§æ–¹å¼ç§°ä¸º&quot;å¯†ç å¼&quot;ï¼ˆpasswordï¼‰ã€‚</strong></p></li><li><p><strong>å‡­è¯å¼</strong></p><p><strong>é€‚ç”¨äºæ²¡æœ‰å‰ç«¯çš„å‘½ä»¤è¡Œåº”ç”¨ï¼Œå³åœ¨å‘½ä»¤è¡Œä¸‹è¯·æ±‚ä»¤ç‰Œã€‚</strong></p></li></ul><blockquote><p>å‚è€ƒhttps://blog.csdn.net/wang839305939/article/details/78713124</p><p><a href="http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html">http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html</a></p><p><a href="https://blog.csdn.net/Top_L398/article/details/109361680?utm_source=app&amp;app_version=5.2.1&amp;code=app_1562916241&amp;uLinkId=usr1mkqgl919blen">https://blog.csdn.net/Top_L398/article/details/109361680?utm_source=app&amp;app_version=5.2.1&amp;code=app_1562916241&amp;uLinkId=usr1mkqgl919blen</a></p><p><a href="https://juejin.cn/post/6898630134530752520">https://juejin.cn/post/6898630134530752520</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿åŸ¹è®­-junitå•å…ƒæµ‹è¯•ä¸springbootå…¥é—¨æŒ‡å—</title>
      <link href="/2022/03/17/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
      <url>/2022/03/17/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1>åŸºæœ¬æ“ä½œ</h1><p>ä¾èµ–æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ç°åœ¨æœ‰è¿™æ ·çš„<code>Controller</code>ï¼Œæˆ‘æƒ³å¯¹æ‰€æœ‰æ–¹æ³•è¿›è¡Œå•å…ƒæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">login</span><span class="params">(<span class="meta">@RequestBody</span> Map&lt;String,Object&gt; params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.login((String)params.get(<span class="string">&quot;id&quot;</span>),(String)params.get(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user/changePassword&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">changePassword</span><span class="params">(<span class="meta">@RequestBody</span> Map&lt;String,Object&gt; params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.changePassword((String)params.get(<span class="string">&quot;role&quot;</span>),(String)params.get(<span class="string">&quot;id&quot;</span>),</span><br><span class="line">                (String)params.get(<span class="string">&quot;newPassword&quot;</span>),(String)params.get(<span class="string">&quot;oldPassword&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user/resetPassword&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">resetPassword</span><span class="params">(<span class="meta">@RequestBody</span> Map&lt;String,Object&gt; params)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.resetPassword((String)params.get(<span class="string">&quot;sid&quot;</span>),(String)params.get(<span class="string">&quot;mail&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/confirmReset&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">confirmReset</span><span class="params">(<span class="meta">@RequestParam</span> String sid, <span class="meta">@RequestParam</span> String token)</span></span>&#123;</span><br><span class="line">        System.out.println(sid+<span class="string">&quot;--&quot;</span>+token);</span><br><span class="line">        <span class="keyword">return</span> userService.confirmReset( sid, token);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³é”®å•å‡»ç±»åï¼Œé€‰æ‹©<code>Go to</code>ï¼Œé€‰æ‹©<code>Test</code>ï¼Œé€‰æ‹©<code>Create new test</code>ï¼Œ</p><img src="1.png" style="zoom:67%;" /><p>ä¼šå¼¹å‡ºè¿™æ ·çš„çª—å£ï¼Œä½ å¯ä»¥é€‰æ‹©ä½ è¦æµ‹è¯•çš„æ–¹æ³•ï¼Œç„¶åokå³å¯ï¼š</p><img src="2.png" style="zoom:67%;" /><p>ç„¶åæµ‹è¯•ç±»å°±ä¼šè¢«è‡ªåŠ¨åˆ›å»ºï¼Œä½ å¯ä»¥åœ¨<code>test/java/packageName/folderName</code>ç›®å½•ä¸‹æ‰¾åˆ°ä»–ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬åœ¨ç±»åå‰åŠ å…¥æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ³¨è§£æ¥è‡ªåŒ…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è‡ªåŠ¨æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span> UserController controller;</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥å†™æµ‹è¯•ä»£ç äº†ã€‚</p><p>æˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ³¨å…¥çš„<code>controller</code>è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼Œå¹¶ä½¿ç”¨<code>Assertions</code>çš„æ–¹æ³•æµ‹è¯•ç›¸åº”æ–¹æ³•ï¼Œå¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map parm = <span class="keyword">new</span> HashMap();</span><br><span class="line">    parm.put(<span class="string">&quot;id&quot;</span>,<span class="number">1037</span>);</span><br><span class="line">    parm.put(<span class="string">&quot;password&quot;</span>,<span class="number">123456</span>);</span><br><span class="line">    Assertions.assertNotNull(controller.login(parm));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»è¿™ä¸ªæ–¹æ³•å·¦è¾¹çš„è¿è¡Œç¬¦å·å°±å¯ä»¥è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœä¸é€šè¿‡å°±ä¼šæœ‰æŠ¥é”™ï¼š</p><img src="3.png" style="zoom:30%;" /><p>å¦‚æœé€šè¿‡ï¼Œä¼šè‡ªåŠ¨<code>exit 0</code>ï¼š</p><img src="4.png" style="zoom:30%;" /><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç‚¹å‡»æµ‹è¯•ç±»æ—è¾¹çš„è¿è¡Œç¬¦å·è¿è¡Œæ‰€æœ‰æµ‹è¯•æ–¹æ³•ã€‚</p><h1>å…¶ä»–æ“ä½œ</h1><h2 id="æ¡ä»¶æµ‹è¯•">æ¡ä»¶æµ‹è¯•</h2><p>åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ’å‡ºæŸäº›<code>@Test</code>æ–¹æ³•ï¼Œä¸è¦è®©å®ƒè¿è¡Œï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å®ƒæ ‡è®°ä¸€ä¸ª<code>@Disabled</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Disabled</span><br><span class="line">@Test</span><br><span class="line">void testBug101() &#123;</span><br><span class="line">    // è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ³¨é‡Šæ‰<code>@Test</code>ï¼Œè€Œæ˜¯è¦åŠ ä¸€ä¸ª<code>@Disabled</code>ï¼Ÿè¿™æ˜¯å› ä¸ºæ³¨é‡Šæ‰<code>@Test</code>ï¼ŒJUnitå°±ä¸çŸ¥é“è¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œè€ŒåŠ ä¸Š<code>@Disabled</code>ï¼ŒJUnitä»ç„¶è¯†åˆ«å‡ºè¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œåªæ˜¯æš‚æ—¶ä¸è¿è¡Œã€‚å®ƒä¼šåœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tests run: 68, Failures: 2, Errors: 0, Skipped: 5</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼<code>@Disabled</code>è¿™ç§æ³¨è§£å°±ç§°ä¸ºæ¡ä»¶æµ‹è¯•ï¼ŒJUnitæ ¹æ®ä¸åŒçš„æ¡ä»¶æ³¨è§£ï¼Œå†³å®šæ˜¯å¦è¿è¡Œå½“å‰çš„<code>@Test</code>æ–¹æ³•ã€‚</p><h2 id="å¼‚å¸¸æµ‹è¯•">å¼‚å¸¸æµ‹è¯•</h2><p>å¦‚æœä½ æƒ³æ•è·è¿è¡Œæ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä½ å¯ä»¥ï¼š`</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Assertions.assertThrows(NullPointerException.class,()-&gt;&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>æ›´å…·ä½“åœ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Assertions.assertThrows(NullPointerException.class,<span class="keyword">new</span> Executable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Factorial.fact(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å‚æ•°åŒ–æµ‹è¯•">å‚æ•°åŒ–æµ‹è¯•</h2><p>å¦‚æœå¾…æµ‹è¯•çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä¸€ç»„æ•°æ®ï¼š å¯ä»¥æŠŠæµ‹è¯•æ•°æ®ç»„ç»‡èµ·æ¥ ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®è°ƒç”¨ç›¸åŒçš„æµ‹è¯•æ–¹æ³•</p><p>å‚æ•°åŒ–æµ‹è¯•å’Œæ™®é€šæµ‹è¯•ç¨å¾®ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸€ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦æ¥æ”¶è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œç„¶åï¼Œä¼ å…¥ä¸€ç»„å‚æ•°åå¤è¿è¡Œã€‚</p><p>JUnitæä¾›äº†ä¸€ä¸ª<code>@ParameterizedTest</code>æ³¨è§£ï¼Œç”¨æ¥è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ã€‚</p><p>å‡è®¾æˆ‘ä»¬æƒ³å¯¹<code>Math.abs()</code>è¿›è¡Œæµ‹è¯•ï¼Œå…ˆç”¨ä¸€ç»„æ­£æ•°è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = &#123; 0, 1, 5, 100 &#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testAbs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    assertEquals(x, Math.abs(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†ç”¨ä¸€ç»„è´Ÿæ•°è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = &#123; -1, -5, -100 &#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testAbsNegative</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    Assertions.assertEquals(-x, Math.abs(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°å‚æ•°åŒ–æµ‹è¯•çš„æ³¨è§£æ˜¯<code>@ParameterizedTest</code>ï¼Œè€Œä¸æ˜¯æ™®é€šçš„<code>@Test</code>ã€‚</p><p>å®é™…çš„æµ‹è¯•åœºæ™¯å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ª<code>StringUtils.capitalize()</code>æ–¹æ³•ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå¤§å†™ï¼Œåç»­å­—æ¯å˜ä¸ºå°å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">capitalize</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Character.toUpperCase(s.charAt(<span class="number">0</span>)) + s.substring(<span class="number">1</span>).toLowerCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç»™å‡ºè¾“å…¥ï¼Œè¿˜è¦ç»™å‡ºé¢„æœŸè¾“å‡ºã€‚å› æ­¤ï¼Œæµ‹è¯•æ–¹æ³•è‡³å°‘éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCapitalize</span><span class="params">(String input, String result)</span> </span>&#123;</span><br><span class="line">    Assertions.assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨é—®é¢˜æ¥äº†ï¼šå‚æ•°å¦‚ä½•ä¼ å…¥ï¼Ÿ</p><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡<code>@MethodSource</code>æ³¨è§£ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŒåçš„é™æ€æ–¹æ³•æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCapitalize</span><span class="params">(String input, String result)</span> </span>&#123;</span><br><span class="line">    Assertions.assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> List&lt;Arguments&gt; <span class="title">testCapitalize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> List.of( <span class="comment">// arguments:</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;Abc&quot;</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;APPLE&quot;</span>, <span class="string">&quot;Apple&quot;</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;gooD&quot;</span>, <span class="string">&quot;Good&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼šé™æ€æ–¹æ³•<code>testCapitalize()</code>è¿”å›äº†ä¸€ç»„æµ‹è¯•å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸¤ä¸ª<code>String</code>ï¼Œæ­£å¥½ä½œä¸ºæµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¼ å…¥ã€‚</p><h1>PS.</h1><h2 id="ä¸€">ä¸€</h2><p>å¦‚æœä½ è¦åˆå§‹åŒ–å¯¹è±¡ï¼Œä¸å¿…åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­éƒ½å†™ä¸Šåˆå§‹åŒ–ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡<code>@BeforeEach</code>æ¥åˆå§‹åŒ–ï¼Œé€šè¿‡<code>@AfterEach</code>æ¥æ¸…ç†èµ„æºã€‚æ ‡è®°ä¸º<code>@BeforeEach</code>å’Œ<code>@AfterEach</code>çš„æ–¹æ³•ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ¯ä¸ª<code>@Test</code>æ–¹æ³•å‰åè‡ªåŠ¨è¿è¡Œã€‚</p><h2 id="äºŒ">äºŒ</h2><p>æˆ‘ä»¬ä½¿ç”¨æ–­è¨€çš„æ—¶å€™å°½é‡ä¸è¦å»æ–­è¨€<code>Double</code>å¯¹è±¡ã€‚å¯¹äºåŒç²¾åº¦æ•°ï¼Œç»å¯¹æœ‰å¿…è¦ä½¿ç”¨å¢é‡è¿›è¡Œæ¯”è¾ƒï¼Œä»¥é¿å…æµ®ç‚¹èˆå…¥çš„é—®é¢˜ã€‚</p><h2 id="ä¸‰ã€å¸¸ç”¨æ–­è¨€">ä¸‰ã€å¸¸ç”¨æ–­è¨€</h2><h3 id="assertEquals"><code>assertEquals</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertEquals(Object expected, Object actual)</span><br><span class="line">assertEquals(String message, Object expected, Object actual)</span><br></pre></td></tr></table></figure><ul><li><code>String message</code>ï¼š å¯é€‰å‚æ•°ï¼Œå°†åœ¨å‘ç”Ÿé”™è¯¯æ—¶æŠ¥å‘Šè¿™ä¸ªæ¶ˆæ¯</li><li><code>Object expected</code>ï¼š æœŸæœ›å€¼ï¼Œä¸€èˆ¬ä¸ºç”¨æˆ·æŒ‡å®šçš„å†…å®¹</li><li><code>Object actual</code>ï¼š è¢«æµ‹è¯•çš„ä»£ç å®é™…è¿”å›çš„ç»“æœ</li></ul><p>å½“<code>expected</code>ï¼ˆæœŸæœ›å€¼ï¼‰å’Œ<code>actual</code>ï¼ˆå®é™…å€¼ï¼‰ä¸º<code>float</code> æˆ–è€… <code>double</code> ç±»å‹æ—¶ï¼Œè¿˜å¯ä»¥æœ‰å¦ä¸€ä¸ªå‚æ•° <code>delta</code>ï¼š</p><p>ä¾‹ï¼š<code> assertEquals(String message, float expected, float actual, float delta)</code></p><p>delta è¿™ä¸ªå‚æ•°ä¸ºè¯¯å·®å‚æ•°ï¼Œè¡¨ç¤ºå¦‚æœ <code>expected</code> å’Œ <code>actual</code> ä¹‹é—´çš„å·®å€¼åœ¨ <code>delta</code> èŒƒå›´ä¹‹å†…åˆ™è®¤ä¸ºè¯¥æ–­è¨€çš„ç»“æœæ˜¯æ­£ç¡®çš„ã€‚</p><h3 id="assertTrue-ä¸-assertFalse"><code>assertTrue</code> ä¸ <code>assertFalse</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertTrue(<span class="keyword">boolean</span> condition)</span><br><span class="line">assertTrue(String message, <span class="keyword">boolean</span> condition)</span><br></pre></td></tr></table></figure><ul><li><code>String message</code>ï¼š å¯é€‰å‚æ•°ï¼Œå°†åœ¨å‘ç”Ÿé”™è¯¯æ—¶æŠ¥å‘Šè¿™ä¸ªæ¶ˆæ¯</li><li><code>boolean condition</code>ï¼šå¾…éªŒè¯çš„ <code>Boolean</code> ç±»å‹å€¼</li></ul><p><code>assertTrue</code> è¯¥æ–­è¨€ç”¨æ¥éªŒè¯ç»™å®šçš„å¸ƒå°”å‹å€¼æ˜¯å¦ä¸ºçœŸï¼Œå¦‚æœç»“æœä¸ºå‡ï¼Œåˆ™éªŒè¯å¤±è´¥ï¼›<br>ç›¸åï¼Œ<code>assertFalse</code> ç”¨æ¥éªŒè¯ç»™å®šçš„å¸ƒå°”å‹å€¼æ˜¯å¦ä¸ºå‡ï¼Œå¦‚æœç»“æœä¸ºçœŸï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚</p><h3 id="assertNull-ä¸-assertNotNull"><code>assertNull</code> ä¸ <code>assertNotNull</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertNull(Object object)</span><br><span class="line">assertNull(String message, Object object)</span><br></pre></td></tr></table></figure><ul><li><code>String message</code>ï¼š å¯é€‰å‚æ•°ï¼Œå°†ä¼šåœ¨å‘ç”Ÿé”™è¯¯æ—¶æŠ¥å‘Šè¿™ä¸ªæ¶ˆæ¯</li><li><code>Object object</code>ï¼š å¾…éªŒè¯æ˜¯å¦ä¸º <code>Null</code> çš„å¯¹è±¡</li></ul><p><code>assertNull</code> è¯¥æ–­è¨€ç”¨æ¥éªŒè¯ç»™å®šçš„å¯¹è±¡æ˜¯å¦ä¸º <code>Null</code> ,å¦‚æœç»™å®šå¯¹è±¡ä¸º é<code>Null</code>ï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚<br>ç›¸åï¼Œ<code>assertNotNull</code> ç”¨æ¥éªŒè¯ç»™å®šçš„å¯¹è±¡æ˜¯å¦ä¸º é<code>Null</code>ï¼Œå¦‚æœä¸º <code>Null</code>ï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚</p><h3 id="assertSame-ä¸-assertNotSame"><code>assertSame</code> ä¸ <code>assertNotSame</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertSame(Object expected, Object actual)</span><br><span class="line">assertSame(String message, Object expected, Object actual)</span><br></pre></td></tr></table></figure><ul><li><code>String message</code>ï¼š å¯é€‰å‚æ•°ï¼Œå°†ä¼šåœ¨å‘ç”Ÿé”™è¯¯æ—¶æŠ¥å‘Šè¿™ä¸ªæ¶ˆæ¯</li><li><code>Object expected</code>ï¼šæœŸæœ›å€¼</li><li><code>Object actual</code>ï¼šè¢«æµ‹è¯•ä»£ç è¿”å›çš„å®é™…å€¼</li></ul><p><code>assertSame</code> è¯¥æ–­è¨€ç”¨æ¥éªŒè¯<code> expected</code> å’Œ <code>actual</code> çš„å¼•ç”¨æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœä¸æ˜¯åŒä¸€å¼•ç”¨ï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚ç›¸åï¼Œ<code>assertNotSame</code> ç”¨æ¥éªŒè¯ <code>expected</code> å’Œ <code>actual</code> çš„å¼•ç”¨æ˜¯å¦ä¸ºä¸åŒå¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœä¸ºåŒä¸€å¯¹è±¡å¼•ç”¨ï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚</p><h1>SpringBootå…¥é—¨æŒ‡å—</h1><h2 id="åŸºæœ¬ç»“æ„è®¤çŸ¥">åŸºæœ¬ç»“æ„è®¤çŸ¥</h2><p>é¦–å…ˆï¼Œä½ è¦å¯¹åŸºæœ¬çš„ç»“æ„æœ‰ä¸€å®šçš„è®¤è¯†ï¼š</p><img src="5.png" style="zoom:37%;" /><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¯¹è±¡é›†åˆ<code>bean</code>ï¼ˆæˆ–è€…<code>entity</code>ã€<code>pojo</code>ï¼‰ï¼Œé…ç½®æ–‡ä»¶é›†åˆ<code>config</code>ï¼Œå¦‚æœä½ ä½¿ç”¨<code>MyBatis</code>ï¼Œä½ ä¼šç”¨åˆ°æ˜ å°„é›†åˆ<code>mapper</code>ã€‚</p><h2 id="springè®¤çŸ¥">springè®¤çŸ¥</h2><p>å…¶æ¬¡ï¼Œ<code>springBoot</code>ä¼šæ¶‰åŠä¸€äº›åŸºæœ¬çš„<code>spring</code>åŸç†ï¼Œä½ è‡³å°‘éœ€è¦å¯¹<code>spring</code>çš„è¿™ä¸¤æ–¹é¢æœ‰ä¸€å®šçš„è®¤è¯†ï¼š</p><h3 id="IoCå®¹å™¨"><code>IoC</code>å®¹å™¨</h3><p>ä¼ ç»Ÿçš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ§åˆ¶æƒåœ¨ç¨‹åºæœ¬èº«ï¼Œç¨‹åºçš„æ§åˆ¶æµç¨‹å®Œå…¨ç”±å¼€å‘è€…æ§åˆ¶ï¼Œä¾‹å¦‚ï¼š</p><p><code>CartServlet</code>åˆ›å»ºäº†<code>BookService</code>ï¼Œåœ¨åˆ›å»º<code>BookService</code>çš„è¿‡ç¨‹ä¸­ï¼Œåˆåˆ›å»ºäº†<code>DataSource</code>ç»„ä»¶ã€‚è¿™ç§æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ï¼Œä¸€ä¸ªç»„ä»¶å¦‚æœè¦ä½¿ç”¨å¦ä¸€ä¸ªç»„ä»¶ï¼Œå¿…é¡»å…ˆçŸ¥é“å¦‚ä½•æ­£ç¡®åœ°åˆ›å»ºå®ƒã€‚</p><p>åœ¨<code>IoC</code>æ¨¡å¼ä¸‹ï¼Œæ§åˆ¶æƒå‘ç”Ÿäº†åè½¬ï¼Œå³ä»åº”ç”¨ç¨‹åºè½¬ç§»åˆ°äº†<code>IoC</code>å®¹å™¨ï¼Œæ‰€æœ‰ç»„ä»¶ä¸å†ç”±åº”ç”¨ç¨‹åºè‡ªå·±åˆ›å»ºå’Œé…ç½®ï¼Œè€Œæ˜¯ç”±<code>IoC</code>å®¹å™¨è´Ÿè´£ï¼Œè¿™æ ·ï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½å¹¶ä¸”é…ç½®å¥½çš„ç»„ä»¶ã€‚ä¸ºäº†èƒ½è®©ç»„ä»¶åœ¨<code>IoC</code>å®¹å™¨ä¸­è¢«â€œè£…é…â€å‡ºæ¥ï¼Œéœ€è¦æŸç§â€œ<strong>æ³¨å…¥</strong>â€æœºåˆ¶ï¼Œä¾‹å¦‚ï¼Œ<code>BookService</code>è‡ªå·±å¹¶ä¸ä¼šåˆ›å»º<code>DataSource</code>ï¼Œè€Œæ˜¯ç­‰å¾…å¤–éƒ¨é€šè¿‡<code>setDataSource()</code>æ–¹æ³•æ¥<strong>æ³¨å…¥</strong>ä¸€ä¸ª<code>DataSource</code>ã€‚</p><p>è¿™ç§ä¾èµ–æ³¨å…¥çš„æ€æƒ³ä¼šè®©ä½ æ›´å¿«åœ°ç†è§£<code>SpringBoot</code>çš„<code>@Autowired</code>æˆ–è€…<code>@Resource</code></p><h3 id="AOP"><code>AOP</code></h3><p><code>AOP</code>æ˜¯<code>Aspect Oriented Programming</code>ï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p><p>é‚£ä»€ä¹ˆæ˜¯<code>AOP</code>ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹<code>OOP</code>ï¼š<code>Object Oriented Programming</code>ï¼Œ<code>OOP</code>ä½œä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¨¡å¼ï¼Œè·å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œ<code>OOP</code>çš„ä¸»è¦åŠŸèƒ½æ˜¯æ•°æ®å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚</p><p>è€Œ<code>AOP</code>æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹æ–¹å¼ï¼Œå®ƒå’Œ<code>OOP</code>ä¸åŒï¼Œ<code>OOP</code>æŠŠç³»ç»Ÿçœ‹ä½œå¤šä¸ªå¯¹è±¡çš„äº¤äº’ï¼Œ<code>AOP</code>æŠŠç³»ç»Ÿåˆ†è§£ä¸ºä¸åŒçš„å…³æ³¨ç‚¹ï¼Œæˆ–è€…ç§°ä¹‹ä¸ºåˆ‡é¢ï¼ˆ<code>Aspect</code>ï¼‰ã€‚</p><p><code>AOP</code>æŠ€æœ¯çœ‹ä¸Šå»æ¯”è¾ƒç¥ç§˜ï¼Œä½†å®é™…ä¸Šï¼Œå®ƒæœ¬è´¨å°±æ˜¯ä¸€ä¸ªåŠ¨æ€ä»£ç†ï¼Œè®©æˆ‘ä»¬æŠŠä¸€äº›å¸¸ç”¨åŠŸèƒ½å¦‚æƒé™æ£€æŸ¥ã€æ—¥å¿—ã€äº‹åŠ¡ç­‰ï¼Œä»æ¯ä¸ªä¸šåŠ¡æ–¹æ³•ä¸­å‰¥ç¦»å‡ºæ¥ã€‚</p><h1><code>springboot</code>åŸºæœ¬è®¤çŸ¥ä¸å¸¸ç”¨æ³¨è§£</h1><p><code>SpringBoot</code>åŸºäºæ³¨è§£è¿›è¡Œå¼€å‘ã€‚</p><p>æ¨è<code>MyBatis</code>è€Œä¸æ˜¯<code>JPA</code>æˆ–è€…<code>Hibernate</code>ã€‚</p><h2 id="ç»“æ„ç›¸å…³">ç»“æ„ç›¸å…³</h2><h3 id="Component">@Component</h3><p><code>@Component</code>æ³¨è§£ç”¨äºæ ‡æ³¨ä¸€ä¸ªæ™®é€šçš„ç»„ä»¶ç±»ï¼Œå®ƒæ²¡æœ‰æ˜ç¡®çš„ä¸šåŠ¡èŒƒå›´ï¼Œåªæ˜¯é€šçŸ¥Springè¢«æ­¤æ³¨è§£çš„ç±»éœ€è¦è¢«çº³å…¥åˆ°Spring Beanå®¹å™¨ä¸­å¹¶è¿›è¡Œç®¡ç†ã€‚</p><h3 id="Controller">@Controller</h3><p><code>@Controller</code>æ˜¯<code>@Component</code>æ³¨è§£çš„ä¸€ä¸ªå»¶ä¼¸ï¼Œ<a href="http://mp.weixin.qq.com/s?__biz=Mzg2MjEwMjI1Mg==&amp;mid=2247488534&amp;idx=1&amp;sn=109a9ecbc8784fb71b5b92809d04449a&amp;chksm=ce0da395f97a2a83513f039a1b9f47ccd12701cdffac8bb0f3b24bbab13033338b6f9898a518&amp;scene=21#wechat_redirect">Spring</a>ä¼šè‡ªåŠ¨æ‰«æå¹¶é…ç½®è¢«è¯¥æ³¨è§£æ ‡æ³¨çš„ç±»ã€‚æ­¤æ³¨è§£ç”¨äºæ ‡æ³¨Spring MVCçš„æ§åˆ¶å™¨ã€‚</p><h3 id="RestController">@RestController</h3><p><code>@RestController</code>æ˜¯åœ¨Spring 4.0å¼€å§‹å¼•å…¥çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹å®šçš„æ§åˆ¶å™¨æ³¨è§£ã€‚æ­¤æ³¨è§£ç›¸å½“äº<code>@Controller</code>å’Œ<code>@ResponseBody</code>çš„å¿«æ·æ–¹å¼ã€‚å½“ä½¿ç”¨æ­¤æ³¨è§£æ—¶ï¼Œä¸éœ€è¦å†åœ¨æ–¹æ³•ä¸Šä½¿ç”¨<code>@ResponseBody</code>æ³¨è§£</p><img src="6.png" style="zoom:47%;" /><h3 id="Service">@Service</h3><p><code>@Service</code>æ³¨è§£æ˜¯<code>@Component</code>çš„ä¸€ä¸ªå»¶ä¼¸ï¼ˆç‰¹ä¾‹ï¼‰ï¼Œå®ƒç”¨äºæ ‡æ³¨ä¸šåŠ¡é€»è¾‘ç±»ã€‚ä¸<code>@Component</code>æ³¨è§£ä¸€æ ·ï¼Œè¢«æ­¤æ³¨è§£æ ‡æ³¨çš„ç±»ï¼Œä¼šè‡ªåŠ¨è¢«Springæ‰€ç®¡ç†ã€‚</p><img src="7.png" style="zoom:47%;" /><h3 id="Repository">@Repository</h3><p><code>@Repository</code>æ³¨è§£ä¹Ÿæ˜¯<code>@Component</code>æ³¨è§£çš„å»¶ä¼¸ï¼Œä¸<code>@Component</code>æ³¨è§£ä¸€æ ·ï¼Œè¢«æ­¤æ³¨è§£æ ‡æ³¨çš„ç±»ä¼šè¢«Springè‡ªåŠ¨ç®¡ç†èµ·æ¥ï¼Œ<code>@Repository</code>æ³¨è§£ç”¨äºæ ‡æ³¨DAOå±‚çš„æ•°æ®æŒä¹…åŒ–ç±»ã€‚</p><img src="8.webp" style="zoom:67%;" /><h3 id="Mapper">@Mapper</h3><p>ä½ å¯ä»¥ä½¿ç”¨æ­¤æ³¨è§£æ›¿ä»£<code>@Repository</code>ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><ul><li><code>@Mapper</code>ä¸éœ€è¦é…ç½®æ‰«æåœ°å€ï¼Œé€šè¿‡<a href="https://so.csdn.net/so/search?q=xml&amp;spm=1001.2101.3001.7020">xml</a>é‡Œé¢çš„namespaceé‡Œé¢çš„æ¥å£åœ°å€ï¼Œç”Ÿæˆäº†Beanåæ³¨å…¥åˆ°<code>Service</code>å±‚ä¸­ã€‚</li><li><code>@Repository</code>éœ€è¦åœ¨Springä¸­é…ç½®æ‰«æåœ°å€ï¼Œç„¶åç”ŸæˆDaoå±‚çš„Beanæ‰èƒ½è¢«æ³¨å…¥åˆ°<code>Service</code>å±‚ä¸­ï¼šå¦‚ä¸‹ï¼Œåœ¨å¯åŠ¨ç±»ä¸­é…ç½®æ‰«æåœ°å€ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span>   <span class="comment">//æ·»åŠ å¯åŠ¨ç±»æ³¨è§£</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.anson.dao&quot;)</span>  <span class="comment">//é…ç½®mapperæ‰«æåœ°å€</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">application</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        SpringApplication.run(application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½ ä¸æƒ³å†™xmlï¼Œå¯ä»¥è¿™æ ·ï¼Œä½†ä¸æ¨èï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zwn.learndemo.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span>  </span>&#123;</span><br><span class="line">    <span class="meta">@Select(value = &quot;SELECT * FROM user WHERE account = #&#123;account&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">getUserByAccount</span><span class="params">(<span class="meta">@Param(&quot;account&quot;)</span>String account)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;INSERT INTO user (account, password,username) VALUES (#&#123;account&#125;, #&#123;password&#125;, #&#123;username&#125;)&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">addUser</span><span class="params">(<span class="meta">@Param(&quot;account&quot;)</span>String account, <span class="meta">@Param(&quot;password&quot;)</span>String password, <span class="meta">@Param(&quot;username&quot;)</span> String username)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;UPDATE user SET password = #&#123;newPwd&#125; WHERE account = #&#123;account&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">changePassword</span><span class="params">(<span class="meta">@Param(&quot;account&quot;)</span>String account, <span class="meta">@Param(&quot;newPwd&quot;)</span>String newPwd)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºxmlæ˜¯å¯ä»¥å†™åŠ¨æ€sqlçš„ï¼Œå‚è§ï¼š<a href="https://zwn2001.github.io/2021/11/06/web%E8%B8%A9%E5%9D%91%E6%B1%87%E6%80%BB/">https://zwn2001.github.io/2021/11/06/webè¸©å‘æ±‡æ€»/</a></p><h2 id="è¯·æ±‚ç›¸å…³">è¯·æ±‚ç›¸å…³</h2><h3 id="ResponseBody">@ResponseBody</h3><p><code>@ResponseBody</code>ä¼š<strong>è‡ªåŠ¨å°†æ§åˆ¶å™¨ä¸­æ–¹æ³•çš„è¿”å›å€¼å†™å…¥åˆ°HTTPå“åº”ä¸­</strong>ã€‚ç‰¹åˆ«çš„ï¼Œ<code>@ResponseBody</code>æ³¨è§£åªèƒ½ç”¨åœ¨è¢«<code>@Controller</code>æ³¨è§£æ ‡è®°çš„ç±»ä¸­ã€‚</p><h3 id="RequestBody">@RequestBody</h3><p><code>@RequestBody</code><strong>åœ¨å¤„ç†è¯·æ±‚æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨</strong>ï¼Œå®ƒ<strong>å¯ä»¥å°†è¯·æ±‚ä¸»ä½“ä¸­çš„å‚æ•°ç»‘å®šï¼ˆååºåˆ—åŒ–ï¼‰åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­</strong>ï¼Œè¯·æ±‚ä¸»ä½“å‚æ•°æ˜¯é€šè¿‡<code>HttpMessageConverter</code>ä¼ é€’çš„ï¼Œæ ¹æ®è¯·æ±‚ä¸»ä½“ä¸­çš„å‚æ•°åä¸å¯¹è±¡çš„å±æ€§åè¿›è¡ŒåŒ¹é…å¹¶ç»‘å®šå€¼ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>@Valid</code>æ³¨è§£å¯¹è¯·æ±‚ä¸»ä½“ä¸­çš„å‚æ•°è¿›è¡Œæ ¡éªŒã€‚</p><img src="9.png" style="zoom:47%;" /><h3 id="RequestParam">@RequestParam</h3><p>è·å–è¯·æ±‚å‚æ•°çš„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/User&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getUser&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">(<span class="meta">@RequestParam(&quot;uid&quot;)</span>Integer id, Model model)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id:&quot;</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä½ ä¸å†™<code>@RequestParam</code>æˆ–è€…<code>@RequestBody</code>ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤§é—®é¢˜ã€‚</p><h3 id="RequestMapping">@RequestMapping</h3><p><code>@RequestMapping</code>æ³¨è§£çš„ä¸»è¦ç”¨é€”æ˜¯<strong>å°†Webè¯·æ±‚ä¸è¯·æ±‚å¤„ç†ç±»ä¸­çš„æ–¹æ³•è¿›è¡Œæ˜ å°„</strong>ã€‚Spring MVCå’ŒSpring WebFluxéƒ½é€šè¿‡<strong>RquestMappingHandlerMapping</strong>å’Œ<strong>RequestMappingHndlerAdapter</strong>ä¸¤ä¸ªç±»æ¥æä¾›å¯¹<code>@RequestMapping</code>æ³¨è§£çš„æ”¯æŒã€‚</p><p><code>@RequestMapping</code>æ³¨è§£<strong>å¯¹è¯·æ±‚å¤„ç†ç±»ä¸­çš„è¯·æ±‚å¤„ç†æ–¹æ³•è¿›è¡Œæ ‡æ³¨</strong>ï¼›<code>@RequestMapping</code>æ³¨è§£æ‹¥æœ‰ä»¥ä¸‹çš„å…­ä¸ªé…ç½®å±æ€§ï¼š</p><ul><li>value:æ˜ å°„çš„è¯·æ±‚URLæˆ–è€…å…¶åˆ«å</li><li>method:å…¼å®¹HTTPçš„æ–¹æ³•å</li><li>params:æ ¹æ®HTTPå‚æ•°çš„å­˜åœ¨ã€ç¼ºçœæˆ–å€¼å¯¹è¯·æ±‚è¿›è¡Œè¿‡æ»¤</li><li>header:æ ¹æ®HTTP Headerçš„å­˜åœ¨ã€ç¼ºçœæˆ–å€¼å¯¹è¯·æ±‚è¿›è¡Œè¿‡æ»¤</li><li>consume:è®¾å®šåœ¨HTTPè¯·æ±‚æ­£æ–‡ä¸­å…è®¸ä½¿ç”¨çš„åª’ä½“ç±»å‹</li><li>product:åœ¨HTTPå“åº”ä½“ä¸­å…è®¸ä½¿ç”¨çš„åª’ä½“ç±»å‹</li></ul><p>æç¤ºï¼šåœ¨ä½¿ç”¨<code>@RequestMapping</code>ä¹‹å‰ï¼Œè¯·æ±‚å¤„ç†ç±»è¿˜éœ€è¦ä½¿ç”¨<code>@Controller</code>æˆ–<code>@RestController</code>è¿›è¡Œæ ‡è®°</p><img src="10.png" style="zoom:47%;" /><p>ä½ å¯ä»¥ç®€å•åœ°è®¤ä¸ºæ˜¯å¯¹<code>BaseUrl</code>çš„è¿½åŠ ä»¥ä½¿å¾—æœåŠ¡å™¨çŸ¥é“å¦‚ä½•å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</p><h3 id="GetMapping">@GetMapping</h3><p><code>@GetMapping</code>æ³¨è§£ç”¨äºå¤„ç†HTTP GETè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚æ˜ å°„åˆ°å…·ä½“çš„å¤„ç†æ–¹æ³•ä¸­ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>@GetMapping</code>æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒç›¸å½“äºæ˜¯<code>@RequestMapping(method=RequestMethod.GET)</code>çš„å¿«æ·æ–¹å¼ã€‚</p><h3 id="PostMapping">@PostMapping</h3><p><code>@PostMapping</code>æ³¨è§£ç”¨äºå¤„ç†HTTP POSTè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚æ˜ å°„åˆ°å…·ä½“çš„å¤„ç†æ–¹æ³•ä¸­ã€‚<code>@PostMapping</code>ä¸<code>@GetMapping</code>ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒç›¸å½“äºæ˜¯<code>@RequestMapping(method=HttpMethod.POST)</code>çš„å¿«æ·æ–¹å¼ã€‚</p><h3 id="PutMapping">@PutMapping</h3><p><code>@PutMapping</code>æ³¨è§£ç”¨äºå¤„ç†HTTP PUTè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚æ˜ å°„åˆ°å…·ä½“çš„å¤„ç†æ–¹æ³•ä¸­ï¼Œ<code>@PutMapping</code>æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äºæ˜¯<code>@RequestMapping(method=HttpMethod.PUT)</code>çš„å¿«æ·æ–¹å¼ã€‚</p><h3 id="DeleteMapping">@DeleteMapping</h3><p><code>@DeleteMapping</code>æ³¨è§£ç”¨äºå¤„ç†HTTP DELETEè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚æ˜ å°„åˆ°åˆ é™¤æ–¹æ³•ä¸­ã€‚<code>@DeleteMapping</code>æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒç›¸å½“äºæ˜¯<code>@RequestMapping(method=HttpMethod.DELETE)</code>çš„å¿«æ·æ–¹å¼ã€‚</p><h2 id="JPAæ³¨è§£ï¼ˆå¦‚æœç”¨åˆ°ï¼Œè¿˜æ˜¯åˆ—å‡ºæ¥ï¼‰">JPAæ³¨è§£ï¼ˆå¦‚æœç”¨åˆ°ï¼Œè¿˜æ˜¯åˆ—å‡ºæ¥ï¼‰</h2><p><code>@Entity</code>ï¼š<code>@Table(name=â€œâ€)</code>ï¼šè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ã€‚è¿™ä¸¤ä¸ªæ³¨è§£ä¸€èˆ¬ä¸€å—ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœè¡¨åå’Œå®ä½“ç±»åç›¸åŒçš„è¯ï¼Œ<code>@Table</code>å¯ä»¥çœç•¥ã€‚</p><p><code>@MappedSuperClass</code>ï¼šç”¨åœ¨ç¡®å®šæ˜¯çˆ¶ç±»çš„<code>entity</code>ä¸Šï¼Œçˆ¶ç±»çš„å±æ€§å­ç±»å¯ä»¥ç»§æ‰¿ã€‚</p><p><code>@NoRepositoryBean</code>ï¼šä¸€èˆ¬ç”¨ä½œçˆ¶ç±»çš„<code>repository</code>ï¼Œæœ‰è¿™ä¸ªæ³¨è§£ï¼Œspringä¸ä¼šå»å®ä¾‹åŒ–è¯¥<code>repository</code>ã€‚</p><p><code>@Column</code>ï¼šå¦‚æœå­—æ®µåä¸åˆ—åç›¸åŒï¼Œåˆ™å¯ä»¥çœç•¥ã€‚</p><p><code>@Id</code>ï¼šè¡¨ç¤ºè¯¥å±æ€§ä¸ºä¸»é”®ã€‚</p><p><code>@GeneratedValue(strategy = GenerationType.SEQUENCE,generator = â€œrepair_seqâ€)</code>ï¼šè¡¨ç¤ºä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯<code>sequence</code>(å¯ä»¥ä¸ºAutoã€IDENTITYã€nativeç­‰ï¼ŒAutoè¡¨ç¤ºå¯åœ¨å¤šä¸ªæ•°æ®åº“é—´åˆ‡æ¢)ï¼ŒæŒ‡å®š<code>sequence</code>çš„åå­—æ˜¯<code>repair_seq</code>ã€‚</p><p><code>@SequenceGeneretor(name = â€œrepair_seqâ€, sequenceName = â€œseq_repairâ€, allocationSize = 1)</code>ï¼šnameä¸º<code>sequence</code>çš„åç§°ï¼Œ<code>sequenceName</code>ä¸ºæ•°æ®åº“çš„<code>sequence</code>åç§°ï¼Œä¸¤ä¸ªåç§°å¯ä»¥ä¸€è‡´ã€‚</p><p><code>@Transient</code>ï¼šè¡¨ç¤ºè¯¥å±æ€§å¹¶éä¸€ä¸ªåˆ°æ•°æ®åº“è¡¨çš„å­—æ®µçš„æ˜ å°„ï¼ŒORMæ¡†æ¶å°†å¿½ç•¥è¯¥å±æ€§ã€‚</p><p><code>@JsonIgnore</code>ï¼šä½œç”¨æ˜¯jsonåºåˆ—åŒ–æ—¶å°†Java beanä¸­çš„ä¸€äº›å±æ€§å¿½ç•¥æ‰ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½å—å½±å“ã€‚</p><p><code>@JoinColumn(name=â€œloginIdâ€)</code>:ä¸€å¯¹ä¸€ï¼šæœ¬è¡¨ä¸­æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„å¤–é”®ã€‚ä¸€å¯¹å¤šï¼šå¦ä¸€ä¸ªè¡¨æŒ‡å‘æœ¬è¡¨çš„å¤–é”®ã€‚</p><p><code>@OneToOneã€@OneToManyã€@ManyToOne</code>ï¼šå¯¹åº”<code>hibernate</code>é…ç½®æ–‡ä»¶ä¸­çš„ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ã€‚</p><h2 id="å…¶ä»–">å…¶ä»–</h2><h3 id="AutoWired">@AutoWired</h3><p>åœ¨Spring Bootåº”ç”¨å¯åŠ¨æ—¶ï¼ŒSpringå®¹å™¨ä¼šè‡ªåŠ¨è£…è½½ä¸€ä¸ª<code>org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor</code>å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æ‰«æåˆ°<code>@Autowired</code>æ³¨è§£æ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨å°±ä¼šæ‰¾ç›¸åº”ç±»å‹çš„Beanï¼Œå¹¶ä¸”å®ç°æ³¨å…¥ã€‚</p><h3 id="Resource">@Resource</h3><p>å¯ä»¥è®¤ä¸ºï¼Œè·Ÿä¸Šé¢æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</p><p>å®é™…ä¸Š:</p><ul><li><p><code>@Autowired</code>æ˜¯Springæä¾›çš„ï¼Œé»˜è®¤æŒ‰ç…§<strong>byType</strong> æ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯æŒ‰beançš„<strong>ç±»å‹</strong>æ¥ä¼ å…¥ã€‚å¦‚æœéœ€è¦æŒ‡å®šåå­—ï¼Œé‚£ä¹ˆéœ€è¦ä½¿<code>@Qualifier(â€œè¿™æ˜¯beançš„åå­—â€)</code>ã€‚</p></li><li><p><code>@Resource</code>é»˜è®¤æŒ‰ <strong>byName</strong> è‡ªåŠ¨æ³¨å…¥ï¼Œæ˜¯<a href="https://so.csdn.net/so/search?q=J2EE&amp;spm=1001.2101.3001.7020">J2EE</a>æä¾›çš„ã€‚</p></li><li><p><code>@Resource</code>æœ‰ä¸¤ä¸ªä¸­é‡è¦çš„å±æ€§ï¼š<code>name</code>å’Œ<code>type</code> ã€‚Springå°†<code>@Resource</code>æ³¨è§£çš„<code>name</code>å±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œ<code>type</code>å±æ€§åˆ™è§£æä¸º<code>bean</code>çš„ç±»å‹ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨<code>name</code>å±æ€§ï¼Œåˆ™ä½¿ç”¨<strong>byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥</strong>ï¼Œè€Œä½¿ç”¨<code>type</code>å±æ€§æ—¶åˆ™ä½¿ç”¨<strong>byTypeè‡ªåŠ¨æ³¨å…¥ç­–ç•¥</strong>ã€‚å¦‚æœæ—¢ä¸æŒ‡å®šnameä¹Ÿä¸æŒ‡å®štypeå±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡<strong>åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥</strong>ã€‚</p></li></ul><h4 id="Resourceè£…é…é¡ºåº">@Resourceè£…é…é¡ºåº</h4><p>(1) å¦‚æœåŒæ—¶æŒ‡å®šäº†<code>name</code>å’Œ<code>type</code>ï¼Œåˆ™ä»Springä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°å”¯ä¸€åŒ¹é…çš„<code>bean</code>è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸;<br>(2) å¦‚æœæŒ‡å®šäº†<code>name</code>ï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾åç§°ï¼ˆ<code>id</code>ï¼‰åŒ¹é…çš„<code>bean</code>è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸;<br>(3) å¦‚æœæŒ‡å®šäº†<code>type</code>ï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°ç±»å‹åŒ¹é…çš„å”¯ä¸€<code>bean</code>è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°æˆ–è€…æ‰¾åˆ°å¤šä¸ªï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸;<br>(4) å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®š<code>name</code>ï¼Œåˆæ²¡æœ‰æŒ‡å®š<code>type</code>ï¼Œåˆ™è‡ªåŠ¨æŒ‰ç…§<code>byName</code>æ–¹å¼è¿›è¡Œè£…é…ï¼›å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™å›é€€ä¸ºä¸€ä¸ªåŸå§‹ç±»å‹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ™è‡ªåŠ¨è£…é…ï¼›</p><h3 id="Data">@Data</h3><p>è¿™ä¸ªæ³¨è§£æ¥è‡ª<code>import lombok.Data;</code></p><p>éœ€è¦å¼•å…¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ³¨è§£å¯ä»¥å¤§å¤§ç®€åŒ–ä½ çš„<code>Bean</code></p><h4 id="å¦">å¦</h4><p><code>lombok</code>çš„å…¶ä»–æ³¨è§£</p><p><code>@Data</code> ï¼š æ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„<code>get</code>ã€<code>set</code>ã€<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>æ–¹æ³•<br><code>@AllArgsConstructor </code>ï¼š æ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„å…¨å‚æ„é€ <br><code>@NoArgsConstructor</code> ï¼š æ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„æ— å‚æ„é€ <br><code>@Setter</code> ï¼š æ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› <code>set</code> æ–¹æ³•<br><code>@Getter</code>ï¼š æ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› <code>get</code> æ–¹æ³•<br><code>@EqualsAndHashCode</code> ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›å¯¹åº”çš„ <code>equals</code> å’Œ <code>hashCode</code> æ–¹æ³•</p><h1>ç°æœ‰ä»£ç åˆ†æ</h1><p>è¿™é‡Œæ˜¯ä¸ªäººå¯¹lxqè€å¸ˆçš„<code>java-server</code>çš„ä¸€äº›åˆ†æä¸è¯„ä»·ã€‚</p><p>é¦–å…ˆï¼Œè¿™ä¸ªé¡¹ç›®æ ·ä¾‹æ¯”è¾ƒå…¨ã€‚è¿™æ˜¯ä¼˜ç‚¹ï¼Œä¹Ÿæ˜¯ç¼ºç‚¹ã€‚</p><p>ä¼˜ç‚¹åœ¨äºï¼Œé¡¹ç›®ç»™å‡ºäº†å®Œæ•´çš„åç«¯æ¶æ„ä¸å¾ˆå¤šçŸ¥è¯†æ ·ä¾‹ï¼Œæ¯”å¦‚å¤šçº¿ç¨‹ï¼ˆ<code>Thread</code>æ–‡ä»¶å¤¹ï¼‰ã€<code>socket</code>ï¼ˆ<code>socket</code>æ–‡ä»¶å¤¹ï¼‰ã€java IOï¼ˆ<code>stream</code>æ–‡ä»¶å¤¹ï¼‰ï¼Œä¹Ÿç»™äº†å¤§å®¶å¾ˆå¤šå­¦ä¹ çš„æ ·ä¾‹ã€‚</p><p>ä½†åŒæ ·çš„ï¼Œæ‰€æœ‰çš„çŸ¥è¯†æ··åˆåœ¨åŒä¸€ä¸ªé¡¹ç›®é‡Œï¼Œå¯¼è‡´æˆ‘ä»¬åœ¨åˆæ¬¡æ‰“å¼€è¿™ä¸ªé¡¹ç›®æ—¶å®¹æ˜“ä¸€å¤´é›¾æ°´ï¼Œéš¾ä»¥åˆ†è¾¨å„ä¸ªæ–‡ä»¶å¤¹çš„åŠŸèƒ½ï¼Œæ— å½¢ä¸­æ‹”é«˜äº†å­¦ä¹ æˆæœ¬ã€‚</p><p>å…¶æ¬¡ï¼Œæœ‰ä¸€äº›æŠ€æœ¯å·²ç»å¼€å§‹è¿‡æ—¶æˆ–è€…æœ‰æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ¯”å¦‚<code>socket</code>ï¼Œï¼ˆæˆ‘æƒ³ä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆè¿˜è¦åœ¨<code>springboot</code>é‡Œæ”¾<code>socket</code>ï¼‰ï¼Œæ¯”å¦‚<code>JPA</code>ä¸<code>hibernate</code>ï¼Œ<code>mybatis</code>åœ¨å¾ˆå¤š<code>springboot</code>é¡¹ç›®ä¸­éƒ½å¹¿æ³›åœ°å–ä»£äº†<code>JPA</code>ï¼Œç”šè‡³å…¶ä»–æ›´ä¸ºå‰æ²¿çš„<code>Druid</code>ã€<code>Radis</code>ï¼Œè™½ç„¶<code>JPA</code>çš„å…¥é—¨æˆæœ¬ä½ï¼Œä½†åœ¨åŠŸèƒ½ä¸Šè¿˜æ˜¯å—é™ï¼Œè€Œä¸”<code>Hibernate</code>çš„ç¼ºç‚¹å°±æ˜¯å­¦ä¹ é—¨æ§›ä¸ä½ï¼Œè¦ç²¾é€šé—¨æ§›æ›´é«˜ï¼Œè€Œä¸”æ€ä¹ˆè®¾è®¡O/Ræ˜ å°„ï¼ˆO/Ræ˜ å°„å±‚æ˜¯æŒä¹…å±‚çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå®ƒçš„æ•°æ®æ¨¡å‹æ˜¯å¯¹è±¡æ¨¡å‹ï¼ˆ<code>Object</code>ï¼‰ï¼Œå­˜å‚¨æ¨¡å‹æ˜¯å…³ç³»æ¨¡å‹ï¼ˆ<code>Relational</code>ï¼‰ï¼‰ï¼Œåœ¨æ€§èƒ½å’Œå¯¹è±¡æ¨¡å‹ä¹‹é—´å¦‚ä½•æƒè¡¡å–å¾—å¹³è¡¡ï¼Œä»¥åŠæ€æ ·ç”¨å¥½<code>Hibernate</code>æ–¹é¢éœ€è¦ä½ çš„ç»éªŒå’Œèƒ½åŠ›éƒ½å¾ˆå¼ºæ‰è¡Œã€‚</p><p>è€Œä¸”æˆ‘ä¸å–œæ¬¢<code>hibernate</code>çš„ä¸€ä¸ªå¾ˆå¤§çš„åŸå› å°±æ˜¯ï¼Œä½ éœ€è¦é¢å¤–çš„å»å­¦ä¹ <code>hibernate</code>çš„æ³¨è§£ï¼Œå¹¶ä¸”è¿™äº›æ³¨è§£æ˜¯ç›´æ¥åŠ åˆ°ä½ çš„å®ä½“ç±»ä¸­çš„ï¼Œè¿™æ‰“ç ´äº†å®ä½“ç±»çš„çº¯ç²¹æ€§è€Œå°†æ¨¡å‹ï¼ˆå¯¹è±¡ï¼‰ä¸æ•°æ®æŒä¹…å±‚è€¦åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶é™åˆ¶äº†ä¸¤è€…çš„çµæ´»æ€§ã€‚ï¼ˆå½“ç„¶ï¼Œä¸ªäººæ„è§ï¼Œè§ä»è§æ™ºï¼Œè€Œä¸”<code>hibernate</code>æ€§èƒ½ç¡®å®ä¼˜äº<code>mybatis</code>ï¼‰</p><p>ç‰¢éªšå‘å®Œï¼Œæˆ‘åˆ é™¤äº†ä¸€äº›ç”¨ä¸åˆ°çš„demoï¼Œç®€åŒ–åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼ˆåªè¦æ˜¯æ²¡åˆ çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„å†…å®¹éƒ½ä¸åŠ¨ï¼‰ï¼š</p><img src="11.png" style="zoom:47%;" /><p>äº²æµ‹å¯ä»¥è¿è¡Œã€‚</p><h1>å‚è€ƒ</h1><blockquote><p><a href="https://www.liaoxuefeng.com/">https://www.liaoxuefeng.com/</a></p><p><a href="https://blog.csdn.net/sinat_34241861/article/details/107306986">https://blog.csdn.net/sinat_34241861/article/details/107306986</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typoraç™½å«–æ•™ç¨‹</title>
      <link href="/2022/03/15/Typora-for-free/"/>
      <url>/2022/03/15/Typora-for-free/</url>
      
        <content type="html"><![CDATA[<p>è‡´è°¢ï¼š <a href="https://space.bilibili.com/265524138">è½è™¾ä¸å­¤é¹œé½é£</a></p><p><a href="https://www.bilibili.com/video/BV11a41187zh?spm_id_from=333.999.0.0">è§†é¢‘æ•™ç¨‹ - by è½è™¾ä¸å­¤é¹œé½é£</a></p><p><a href="https://zwn2001.github.io/2022/03/15/Typora-for-free/typora%E7%99%BD%E5%AB%961.1.5_by%E8%90%BD%E8%99%BE%E4%B8%8E%E5%AD%A4%E9%B9%9C%E9%BD%90%E9%A3%9E.zip">ç ´è§£æ–‡ä»¶ä¸‹è½½ - made by è½è™¾ä¸å­¤é¹œé½é£</a></p><p><a href="https://www.cnblogs.com/LiuDanK/articles/15638323.html">ä»–çš„åšå®¢æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨çŸ¥è¯†(æ‚è°ˆ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ä¸æ±‡æ€» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å“åŸç”Ÿ-æœåŠ¡</title>
      <link href="/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E6%9C%8D%E5%8A%A1/"/>
      <url>/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1>åŸºæœ¬æ¦‚å¿µ</h1><h2 id="ä¸ºå•¥è¦æœ‰æœåŠ¡">ä¸ºå•¥è¦æœ‰æœåŠ¡</h2><p>ä¸¾è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨éŸ³ä¹æ’­æ”¾å™¨çš„æ¡Œé¢å°ç»„ä»¶å¼€å§‹æ’­æ”¾éŸ³ä¹ï¼Œä½†ä½ æ£€æŸ¥åå°ç¨‹åºå¹¶æ²¡æœ‰å¯åŠ¨éŸ³ä¹appï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œè€Œä¸”æ˜¯åå°æœåŠ¡ã€‚</p><p>å®˜ç½‘å¯¹æœåŠ¡å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p><code>Service</code> æ˜¯ä¸€ç§å¯åœ¨åå°æ‰§è¡Œé•¿æ—¶é—´è¿è¡Œæ“ä½œè€Œä¸æä¾›ç•Œé¢çš„åº”ç”¨ç»„ä»¶ã€‚<strong>æœåŠ¡å¯ç”±å…¶ä»–åº”ç”¨ç»„ä»¶å¯åŠ¨ï¼Œè€Œä¸”å³ä½¿ç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨ï¼ŒæœåŠ¡ä»å°†åœ¨åå°ç»§ç»­è¿è¡Œ</strong>ã€‚æ­¤å¤–ï¼Œç»„ä»¶å¯é€šè¿‡ç»‘å®šåˆ°æœåŠ¡ä¸ä¹‹è¿›è¡Œäº¤äº’ï¼Œç”šè‡³æ˜¯æ‰§è¡Œè¿›ç¨‹é—´é€šä¿¡ (IPC)ã€‚ä¾‹å¦‚ï¼ŒæœåŠ¡å¯åœ¨åå°å¤„ç†ç½‘ç»œäº‹åŠ¡ã€æ’­æ”¾éŸ³ä¹ï¼Œæ‰§è¡Œæ–‡ä»¶ I/O æˆ–ä¸å†…å®¹æä¾›ç¨‹åºè¿›è¡Œäº¤äº’ã€‚</p></blockquote><h2 id="ç”Ÿå‘½å‘¨æœŸç›¸å…³">ç”Ÿå‘½å‘¨æœŸç›¸å…³</h2><p>æœåŠ¡åŸºæœ¬ä¸ŠåŒ…å«ä¸¤ç§çŠ¶æ€</p><table><thead><tr><th style="text-align:left">çŠ¶æ€</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">Started</td><td style="text-align:left">Androidçš„åº”ç”¨ç¨‹åºç»„ä»¶ï¼Œå¦‚æ´»åŠ¨ï¼Œé€šè¿‡<code>startService()</code>å¯åŠ¨äº†æœåŠ¡ï¼Œåˆ™æœåŠ¡æ˜¯StartedçŠ¶æ€ã€‚ä¸€æ—¦å¯åŠ¨ï¼ŒæœåŠ¡å¯ä»¥åœ¨åå°æ— é™æœŸè¿è¡Œï¼Œå³ä½¿å¯åŠ¨å®ƒçš„ç»„ä»¶å·²ç»è¢«é”€æ¯ã€‚</td></tr><tr><td style="text-align:left">Bound</td><td style="text-align:left">å½“Androidçš„åº”ç”¨ç¨‹åºç»„ä»¶é€šè¿‡<code>bindService()</code>ç»‘å®šäº†æœåŠ¡ï¼Œåˆ™æœåŠ¡æ˜¯BoundçŠ¶æ€ã€‚BoundçŠ¶æ€çš„æœåŠ¡æä¾›äº†ä¸€ä¸ªå®¢æˆ·æœåŠ¡å™¨æ¥å£æ¥å…è®¸ç»„ä»¶ä¸æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œå¦‚å‘é€è¯·æ±‚ï¼Œè·å–ç»“æœï¼Œç”šè‡³é€šè¿‡IPCæ¥è¿›è¡Œè·¨è¿›ç¨‹é€šä¿¡ã€‚</td></tr></tbody></table><p>æœåŠ¡æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¯ä»¥å®ç°ç›‘æ§æœåŠ¡çŠ¶æ€çš„å˜åŒ–ï¼Œå¯ä»¥åœ¨åˆé€‚çš„é˜¶æ®µæ‰§è¡Œå·¥ä½œã€‚ä¸‹é¢çš„å·¦å›¾å±•ç¤ºäº†å½“æœåŠ¡é€šè¿‡<code>startService()</code>è¢«åˆ›å»ºæ—¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå³å›¾åˆ™æ˜¾ç¤ºäº†å½“æœåŠ¡é€šè¿‡<code>bindService()</code>è¢«åˆ›å»ºæ—¶çš„ç”Ÿå‘½å‘¨æœŸï¼š</p><p><img src="0.jpg" alt="ç”Ÿå‘½å‘¨æœŸ"></p><p>è¦åˆ›å»ºæœåŠ¡ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªServiceåŸºç±»æˆ–è€…å®ƒçš„å·²çŸ¥å­ç±»çš„Javaç±»ã€‚ServiceåŸºç±»å®šä¹‰äº†ä¸åŒçš„å›è°ƒæ–¹æ³•å’Œå¤šæ•°é‡è¦æ–¹æ³•ã€‚ä½ ä¸éœ€è¦å®ç°æ‰€æœ‰çš„å›è°ƒæ–¹æ³•ã€‚è™½ç„¶å¦‚æ­¤ï¼Œç†è§£æ‰€æœ‰çš„æ–¹æ³•è¿˜æ˜¯éå¸¸é‡è¦çš„ã€‚å®ç°è¿™äº›å›è°ƒèƒ½ç¡®ä¿ä½ çš„åº”ç”¨ä»¥ç”¨æˆ·æœŸæœ›çš„æ–¹å¼å®ç°ã€‚</p><table><thead><tr><th style="text-align:left">å›è°ƒ</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">onStartCommand()</td><td style="text-align:left">å…¶ä»–ç»„ä»¶(å¦‚æ´»åŠ¨)é€šè¿‡è°ƒç”¨startService()æ¥è¯·æ±‚å¯åŠ¨æœåŠ¡æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœä½ å®ç°è¯¥æ–¹æ³•ï¼Œä½ æœ‰è´£ä»»åœ¨å·¥ä½œå®Œæˆæ—¶é€šè¿‡stopSelf()æˆ–è€…stopService()æ–¹æ³•æ¥åœæ­¢æœåŠ¡ã€‚</td></tr><tr><td style="text-align:left">onBind</td><td style="text-align:left">å½“å…¶ä»–ç»„ä»¶æƒ³è¦é€šè¿‡bindService()æ¥ç»‘å®šæœåŠ¡æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœä½ å®ç°è¯¥æ–¹æ³•ï¼Œä½ éœ€è¦è¿”å›IBinderå¯¹è±¡æ¥æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»¥ä¾¿å®¢æˆ·æ¥ä¸æœåŠ¡é€šä¿¡ã€‚ä½ å¿…é¡»å®ç°è¯¥æ–¹æ³•ï¼Œå¦‚æœä½ ä¸å…è®¸ç»‘å®šï¼Œåˆ™ç›´æ¥è¿”å›nullã€‚</td></tr><tr><td style="text-align:left">onUnbind()</td><td style="text-align:left">å½“å®¢æˆ·ä¸­æ–­æ‰€æœ‰æœåŠ¡å‘å¸ƒçš„ç‰¹æ®Šæ¥å£æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚</td></tr><tr><td style="text-align:left">onRebind()</td><td style="text-align:left">å½“æ–°çš„å®¢æˆ·ç«¯ä¸æœåŠ¡è¿æ¥ï¼Œä¸”æ­¤å‰å®ƒå·²ç»é€šè¿‡onUnbind(Intent)é€šçŸ¥æ–­å¼€è¿æ¥æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚</td></tr><tr><td style="text-align:left">onCreate()</td><td style="text-align:left">å½“æœåŠ¡é€šè¿‡onStartCommand()å’ŒonBind()è¢«ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¯¥è°ƒç”¨è¦æ±‚æ‰§è¡Œä¸€æ¬¡æ€§å®‰è£…ã€‚</td></tr><tr><td style="text-align:left">onDestroy()</td><td style="text-align:left">å½“æœåŠ¡ä¸å†æœ‰ç”¨æˆ–è€…è¢«é”€æ¯æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚ä½ çš„æœåŠ¡éœ€è¦å®ç°è¯¥æ–¹æ³•æ¥æ¸…ç†ä»»ä½•èµ„æºï¼Œå¦‚çº¿ç¨‹ï¼Œå·²æ³¨å†Œçš„ç›‘å¬å™¨ï¼Œæ¥æ”¶å™¨ç­‰ã€‚</td></tr></tbody></table><p>è‡³äºæ–‡æ¡£ï¼Œå®˜ç½‘å†™çš„éå¸¸è¯¦ç»†ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šå¯è®²ä¹‹å¤„ã€‚</p><p>å¯ä»¥ç›´æ¥å‚è€ƒ<a href="https://developer.android.com/guide/components/services?hl=zh-cn">å®˜ç½‘</a>ã€‚ï¼ˆæœ¬æ¥æƒ³ä¿å­˜ä¸€ä»½htmlï¼Œä½†ä¼šå¯¼è‡´åšå®¢æ¸²æŸ“å‡ºé”™ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦ç§‘å­¦ä¸Šç½‘ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å“åŸç”Ÿ-å¹¿æ’­</title>
      <link href="/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E5%B9%BF%E6%92%AD/"/>
      <url>/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E5%B9%BF%E6%92%AD/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><ul><li>æˆ‘ä»¬ä¸Šå­¦æ—¶éƒ½æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Œå½“æˆ‘ä»¬åœ¨ç«è½¦ç«™åˆ—è½¦å€™è½¦å®¤ä¸­ç­‰å¾…æ—¶ï¼Œæ¯å½“æœ‰æŸæ¬¡åˆ—è½¦å¼€å§‹æ£€ç¥¨æˆ–è€…è¿›ç«™ä¸Šè½¦æ—¶ï¼Œå°±ä¼šæ’­æ”¾é€šçŸ¥æ¥å‘ŠçŸ¥åœ¨å€™è½¦å®¤ç­‰å¾…çš„äººä»¬è¯¥æ¶ˆæ¯ã€‚</li><li>ä¸ºäº†ä¾¿äºè¿›è¡Œç³»ç»Ÿçº§åˆ«çš„æ¶ˆæ¯é€šçŸ¥ï¼ŒAndroidå¼•å…¥äº†ä¸€å¥—ç±»ä¼¼çš„å¹¿æ’­æœºåˆ¶ï¼Œç„¶è€Œæ¯”ä¸Šè¿°æƒ…æ™¯è¦çµæ´»å¾—å¤šã€‚æ­¤æ–‡å°†å¯¹<strong>Androidå¹¿æ’­æœºåˆ¶</strong>çš„æ–¹æ–¹é¢é¢åšå‡ºè¯¦å°½çš„ä»‹ç»ã€‚</li></ul><hr><h1>Androidå¹¿æ’­æœºåˆ¶ç®€ä»‹</h1><p>å‰é¢æˆ‘ä»¬æåˆ°ï¼ŒAndroidçš„å¹¿æ’­æœºåˆ¶æ›´åŠ çš„çµæ´»ï¼Œè¿™æ˜¯å› ä¸ºAndroidå…è®¸æ¯ä¸ªåº”ç”¨åªå¯¹è‡ªå·±æ„Ÿå…´è¶£çš„å¹¿æ’­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·è¯¥ç¨‹åºå°±åªä¼šæ”¶åˆ°è‡ªå·±æ‰€å…³å¿ƒçš„å¹¿æ’­å†…å®¹ã€‚<br>Androidå¹¿æ’­åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼š<strong>å¹¿æ’­å‘é€è€…</strong>å’Œ<strong>å¹¿æ’­æ¥æ”¶è€…</strong>ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>BroadcastReceiver</code>æŒ‡çš„å°±æ˜¯<strong>å¹¿æ’­æ¥æ”¶è€…</strong>ï¼ˆ<strong>å¹¿æ’­æ¥æ”¶å™¨</strong>ï¼‰ã€‚</p><p><strong>å¹¿æ’­æœºåˆ¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å‘é€æ–¹å¹¶ä¸å…³å¿ƒæ¥æ”¶æ–¹æ˜¯å¦æ¥åˆ°æ•°æ®ï¼Œä¹Ÿä¸å…³å¿ƒæ¥æ”¶æ–¹æ˜¯å¦‚ä½•å¤„ç†æ•°æ®çš„</strong>ã€‚</p><blockquote><p>å‰åŠå¥ï¼Œæœ‰ç‚¹ç±»ä¼¼äºUDP</p></blockquote><p>Androidä¸­å¹¿æ’­çš„æ˜¯æ“ä½œç³»ç»Ÿä¸­äº§ç”Ÿçš„å„ç§å„æ ·çš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œæ”¶åˆ°ä¸€æ¡çŸ­ä¿¡å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ”¶åˆ°çŸ­ä¿¡æ¯çš„äº‹ä»¶ã€‚è€ŒAndroidæ“ä½œç³»ç»Ÿä¸€æ—¦å†…éƒ¨äº§ç”Ÿäº†è¿™äº›äº‹ä»¶ï¼Œå°±ä¼šå‘æ‰€æœ‰çš„å¹¿æ’­æ¥æ”¶å™¨å¯¹è±¡æ¥å¹¿æ’­è¿™äº›äº‹ä»¶ã€‚</p><p><strong>BraodcastReceiver(å¹¿æ’­æ¥æ”¶å™¨)æ˜¯ä¸ºäº†å®ç°ç³»ç»Ÿå¹¿æ’­è€Œæä¾›çš„ä¸€ç§ç»„ä»¶ï¼Œå¹¶ä¸”å¹¿æ’­äº‹ä»¶å¤„ç†æœºåˆ¶æ˜¯ç³»ç»Ÿçº§åˆ«çš„</strong>ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‘å‡ºä¸€ç§å¹¿æ’­æ¥æµ‹è¯•æ˜¯å¦æ”¶åˆ°çŸ­ä¿¡ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªBraodcastReceiveræ¥æ¥å—å¹¿æ’­ï¼Œå½“æ”¶åˆ°çŸ­ä¿¡æ—¶æç¤ºç”¨æˆ·ã€‚æˆ‘ä»¬æ—¢å¯ä»¥ç”¨Intentæ¥å¯åŠ¨ä¸€ä¸ªç»„ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨sendBroadcast()æ–¹æ³•å‘èµ·ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„äº‹ä»¶å¹¿æ’­æ¥ä¼ é€’æ¶ˆæ¯ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­å¼€å‘BroadcastReceiverï¼Œç„¶åæŠŠå¹¿æ’­æ¥æ”¶å™¨è¿™ä¸ªç±»æˆ–è€…å¯¹è±¡æ³¨å†Œåˆ°Androidæ“ä½œç³»ç»Ÿä¸Šå»ï¼Œè®©æ“ä½œç³»ç»ŸçŸ¥é“ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨æ­£åœ¨ç­‰å¾…æ¥æ”¶Androidæ“ä½œç³»ç»Ÿçš„å¹¿æ’­ï¼Œå³åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­å®ç°BroadcastReceiveræ¥ç›‘å¬å’Œå“åº”å¹¿æ’­çš„Intentã€‚</p><p><strong>å½“æœ‰å¹¿æ’­äº‹ä»¶äº§ç”Ÿæ—¶ï¼ŒAndroidæ“ä½œç³»ç»Ÿé¦–å…ˆå‘Šè¯‰æ³¨å†Œåˆ°å…¶ä¸Šé¢çš„å¹¿æ’­æ¥æ”¶å™¨äº§ç”Ÿäº†ä¸€ä¸ªæ€ä¹ˆæ ·çš„äº‹ä»¶ï¼Œæ¯ä¸ªæ¥æ”¶å™¨é¦–å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯æˆ‘è¿™ä¸ªæ¥æ”¶å™¨éœ€è¦çš„äº‹ä»¶ï¼Œå¦‚æœæ˜¯å®ƒæ‰€éœ€è¦çš„äº‹ä»¶ï¼Œå†è¿›è¡Œç›¸åº”çš„å¤„ç†</strong>ã€‚</p><p>ä¾‹å­ï¼Œæˆ‘ä»¬æŠŠéªšæ‰°ç”µè¯çš„é»‘åå•æ”¾åˆ°æ•°æ®åº“ä¸­å»ï¼Œå½“æ¥åˆ°ç”µè¯æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªæ¥ç”µè¯äº‹ä»¶ï¼Œäº‹å…ˆåœ¨Androidæ“ä½œç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªBroadcastReceiverçš„å¯¹è±¡ï¼Œå½“äº§ç”Ÿäº‹ä»¶çš„æ—¶å€™ï¼Œä¼šé€šçŸ¥æˆ‘ä»¬çš„å¹¿æ’­æ¥æ”¶å™¨å¯¹è±¡ï¼Œæ¥æ”¶å™¨å¯¹è±¡æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œå°±ä¼šåˆ°æ•°æ®åº“é‡Œé¢å»å–æ‰€æœ‰é»‘åå•ç”µè¯å’Œæ¥åˆ°çš„è¿™ä¸ªç”µè¯å·ç è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåŒ¹é…å°±ç›´æ¥æŒ‚æ‰ã€‚</p><h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2><ul><li>åŒä¸€åº”ç”¨å…·æœ‰å¤šä¸ªè¿›ç¨‹çš„ä¸åŒç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡</li><li>ä¸åŒåº”ç”¨é—´çš„ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡</li><li>ä¸Androidç³»ç»Ÿåœ¨ç‰¹å®šæƒ…å†µä¸‹çš„é€šä¿¡<ul><li>å¦‚ï¼šç³»ç»Ÿå¼€æœºï¼Œç½‘ç»œå˜åŒ–ç­‰</li></ul></li></ul><blockquote><p>ä»¥ä¸Šåªè¯´æ˜é€‚åˆå¹¿æ’­æœºåˆ¶çš„åº”ç”¨åœºæ™¯ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯ç†è®ºä¸Šå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å®é™…å¼€å‘æ²¡æœ‰äººè¿™ä¹ˆåšï¼š</p><ul><li>åŒä¸€åº”ç”¨å†…åŒä¸€ç»„ä»¶çš„æ¶ˆæ¯é€šä¿¡ï¼šæ˜¾ç„¶æ‰©å±•å˜é‡çš„ä½œç”¨åŸŸã€æ¥å£å›è°ƒã€<code>Handler-Message</code>ç­‰æ–¹å¼éƒ½èƒ½æ›´ç®€å•çš„å®ç°ã€‚</li><li>åŒä¸€åº”ç”¨å†…çš„ä¸åŒç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡(å•ä¸ªè¿›ç¨‹)ï¼šå¯¹äºç®€å•çš„çš„æƒ…å†µï¼Œä¾é æ¥å£çš„å›è°ƒæ–¹å¼å°±å¯è§£å†³ï¼›è€Œè¾ƒä¸ºå¤æ‚çš„æƒ…å†µï¼Œæ›´æ¨èç›´æ¥ä½¿ç”¨<code>EventBus</code>ç­‰ã€‚</li></ul></blockquote><h2 id="å®ç°åŸç†">å®ç°åŸç†</h2><h3 id="è®¾è®¡æ¨¡å¼ä¸æ¨¡å‹">è®¾è®¡æ¨¡å¼ä¸æ¨¡å‹</h3><p>Androidä¸­çš„å¹¿æ’­ä½¿ç”¨äº†<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼Œæ¨¡å‹ä¸º<strong>åŸºäºæ¶ˆæ¯çš„å‘å¸ƒ/è®¢é˜…äº‹ä»¶æ¨¡å‹</strong>ã€‚</p><blockquote><p>ä»è®¾è®¡æ¨¡å¼ä¸Šè®²ï¼Œå¹¿æ’­çš„å‘é€è€…å’Œæ¥æ”¶è€…æå¤§ç¨‹åº¦çš„<strong>è§£è€¦</strong>ï¼Œä½¿å¾—ç³»ç»Ÿæ–¹ä¾¿é›†æˆï¼Œå®¹æ˜“æ‰©å±•</p></blockquote><h4 id="æ¨¡å‹æˆå‘˜ï¼š">æ¨¡å‹æˆå‘˜ï¼š</h4><ul><li>æ¶ˆæ¯å‘å¸ƒè€…(å¹¿æ’­å‘å¸ƒè€…)</li><li>æ¶ˆæ¯è®¢é˜…è€…(å¹¿æ’­æ¥æ”¶è€…)</li><li>æ¶ˆæ¯ä¸­å¿ƒ(AMSï¼ŒActivity Manager Service)</li></ul><blockquote><p>æ­¤å¤„æˆ‘ä»¬æ‰©å±•ä¸€ä¸‹ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼çš„å…³ç³»</p><ul><li><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼å±äºå¹¿ä¹‰ä¸Šçš„è§‚å¯Ÿè€…æ¨¡å¼</strong><br>å‰è€…æ—¶æœ€å¸¸ç”¨çš„ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼Œä¸”ä»<strong>è§£è€¦</strong>å’Œ<strong>é‡ç”¨</strong>è§’åº¦ä¸Šçœ‹æ›´ä¼˜äºå…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼</li><li>å‘å¸ƒè®¢é˜…æ¨¡å¼åŠ å…¥æ¶ˆæ¯ä¸­å¿ƒï¼Œå®ç°å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„è§£è€¦ï¼š<ul><li>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…éœ€è¦ç›´æ¥è®¢é˜…ç›®æ ‡äº‹ä»¶ï¼Œåœ¨ç›®æ ‡å‘å‡ºå†…å®¹æ”¹å˜çš„äº‹ä»¶åï¼Œç›´æ¥æ¥æ”¶äº‹ä»¶å¹¶ä½œå‡ºå“åº”ã€‚</li><li>åœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå¤šäº†ä¸€ä¸ªæ¶ˆæ¯ä¸­å¿ƒï¼Œä¸€æ–¹é¢ä»å‘å¸ƒè€…æ¥æ”¶äº‹ä»¶ï¼Œå¦ä¸€æ–¹é¢å‘è®¢é˜…è€…å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…éœ€è¦ä»æ¶ˆæ¯ä¸­å¿ƒè®¢é˜…äº‹ä»¶ã€‚ä»¥æ­¤é¿å…å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´äº§ç”Ÿä¾èµ–å…³ç³»ã€‚</li></ul></li></ul></blockquote><h3 id="å®ç°æµç¨‹">å®ç°æµç¨‹</h3><ol><li>å¹¿æ’­æ¥æ”¶è€…<code>BroadcastReceiver</code>é€šè¿‡<code>Binder</code>æœºåˆ¶å‘AMS(<code>Activity Manager Service</code>)è¿›è¡Œ<strong>æ³¨å†Œ</strong>ï¼›</li><li>å¹¿æ’­å‘é€è€…é€šè¿‡**<code>binder</code>æœºåˆ¶**å‘AMSå‘é€å¹¿æ’­ï¼›</li><li>AMSæŸ¥æ‰¾ç¬¦åˆç›¸åº”æ¡ä»¶ï¼ˆ<code>IntentFilter</code>/<code>Permission</code>ç­‰ï¼‰çš„<code>BroadcastReceiver</code></li><li>AMSå°†å¹¿æ’­å‘é€åˆ°ä¸Šè¿°ç¬¦åˆæ¡ä»¶çš„<code>BroadcastReceiver</code>ç›¸åº”çš„<strong>æ¶ˆæ¯å¾ªç¯é˜Ÿåˆ—</strong>ä¸­</li><li><code>BroadcastReceiver</code>é€šè¿‡æ¶ˆæ¯å¾ªç¯æ‰§è¡Œæ‹¿åˆ°æ­¤å¹¿æ’­ï¼Œ<strong>å›è°ƒ</strong><code>BroadcastReceiver</code>ä¸­çš„<code>onReceive()</code>æ–¹æ³•ã€‚</li></ol><blockquote><p>å¹¿æ’­å‘é€è€…å’Œå¹¿æ’­æ¥æ”¶è€…çš„æ‰§è¡Œæ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œå‘å‡ºå»çš„å¹¿æ’­ä¸ä¼šå…³å¿ƒæœ‰æ— æ¥æ”¶è€…æ¥æ”¶ï¼Œä¹Ÿä¸ç¡®å®šæ¥æ”¶è€…åˆ°åº•æ˜¯ä½•æ—¶æ‰èƒ½æ¥æ”¶åˆ°ã€‚</p></blockquote><hr><h2 id="å¹¿æ’­çš„ç±»å‹">å¹¿æ’­çš„ç±»å‹</h2><p>ä¸»è¦åˆ†ä¸ºä¸€ä¸‹å››ç±»ï¼š</p><ol><li><code>Normal Broadcast</code>(æ™®é€šå¹¿æ’­)ï¼šé€šå¸¸è°ƒç”¨<code>sendBroadcast(Intent)(Intent, String)</code>æ–¹æ³•å‘é€</li><li><code>System Broadcast</code>(ç³»ç»Ÿå¹¿æ’­)ï¼šå‘ç”Ÿå„ç§äº‹ä»¶æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å‘é€</li><li><code>Ordered Broadcast</code>(æœ‰åºå¹¿æ’­)ï¼šè°ƒç”¨<code>sendOrderedBroadcast(Intent, String)</code>æ–¹æ³•å‘é€</li><li><code>Local Broadcast</code>(æœ¬åœ°å¹¿æ’­)ï¼šè°ƒç”¨<code>LocalBroadcastManager.sendBroadcast(intent)</code>æ–¹æ³•å‘é€</li><li><code>Sticky Broadcast</code>(ç²˜æ€§å¹¿æ’­)ï¼šå·²å¼ƒç”¨(API 21)</li></ol><h4 id="1-Normal-Broadcast-æ™®é€šå¹¿æ’­">1. Normal Broadcast(æ™®é€šå¹¿æ’­)</h4><p>å¼€å‘è€…è‡ªå®šä¹‰çš„<code>intent</code>ï¼Œä»¥<code>Context.sendBroadcast()</code>ï¼Œ<code>Context.sendBroadcastAsUser()</code>ç­‰æ–¹æ³•å‘é€è¯¥<code>intent</code>ã€‚</p><ul><li>å‘é€ç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> <span class="built_in">Intent</span>();</span><br><span class="line">intent.<span class="built_in">setAction</span>(BROADCAST_ACTION);</span><br><span class="line"><span class="comment">//æœ€æ™®é€šçš„å‘é€æ–¹å¼</span></span><br><span class="line"><span class="built_in">sendBroadcast</span>(intent);</span><br><span class="line"><span class="comment">//é™„å¸¦æƒé™çš„å‘é€æ–¹å¼ï¼Œå£°æ˜æ­¤æƒé™çš„BroadcastReceiveræ‰èƒ½æ¥æ”¶æ­¤å¹¿æ’­</span></span><br><span class="line"><span class="built_in">sendBroadcast</span>(intent,RECEIVER_PREMISSION);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»¥ä¸‹ä¸¤ç§ä¸å¸¸è§ï¼Œæ˜¯å› ä¸ºåªæœ‰é¢„è£…åœ¨ç³»ç»Ÿæ˜ åƒä¸­çš„ç¨‹åºæ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="comment">//æŒ‡æ˜æ¥æ”¶äººçš„å‘é€æ–¹å¼</span></span><br><span class="line"><span class="built_in">sendBroadcastAsUser</span>(intent,USER_HANDLER);</span><br><span class="line"><span class="comment">//æŒ‡æ˜æ¥æ”¶äººä»¥åŠå¯¹åº”æƒé™çš„å‘é€æ–¹å¼</span></span><br><span class="line"><span class="built_in">sendBroadcastAsUser</span>(intent,USER_HANDLER,RECEIVER_PREMISSION);</span><br></pre></td></tr></table></figure><ul><li>è‹¥è¢«æ³¨å†Œäº†çš„<code>BroadCastReceiver</code>æ³¨å†Œçš„<code>intentFilter</code>çš„<code>action</code>ä¸ä¸Šè¿°åŒ¹é…ï¼Œåˆ™ä¼šæ¥æ”¶æ­¤å¹¿æ’­ï¼Œä¸”é¡ºåºæ˜¯æ— åºçš„ã€‚å¦‚æœå‘é€æ—¶æœ‰ç›¸åº”çš„æƒé™è¦æ±‚ï¼Œåˆ™<code>BroadCastReceiver</code>åªæœ‰æ‹¥æœ‰ç›¸åº”çš„æƒé™æ‰èƒ½æ¥å—ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyBroadcastReceiver&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:permission</span>=<span class="string">&quot;RECEIVER_PREMISSION&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;BROADCAST_ACTION&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-System-Broadcast-ç³»ç»Ÿå¹¿æ’­">2. System Broadcast(ç³»ç»Ÿå¹¿æ’­)</h4><blockquote><p>æ–‡æœ«æä¾›è¯¦ç»†ç³»ç»Ÿå¹¿æ’­æ¸…å•ï¼Œä¸åŒ…å«ä½¿ç”¨è¯´æ˜ï¼ˆä½äºSDKä¸‹boradcast_action.txt ï¼‰ï¼Œè¯·è‡ªè¡ŒæŸ¥æ‰¾<a href="https://developer.android.com/reference/packages.html">Googleå®˜æ–¹æ–‡æ¡£</a></p></blockquote><ul><li>Androidç³»ç»Ÿä¸­å†…ç½®äº†å¤šä¸ªç³»ç»Ÿå¹¿æ’­ï¼Œåªè¦æ¶‰åŠåˆ°æ‰‹æœºçš„åŸºæœ¬æ“ä½œï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šå‘å‡ºç›¸åº”çš„ç³»ç»Ÿå¹¿æ’­ã€‚</li><li>æ¯ä¸ªç³»ç»Ÿå¹¿æ’­éƒ½å…·æœ‰ç‰¹å®šçš„<code>intent-filter</code>ï¼Œå…¶ä¸­ä¸»è¦åŒ…æ‹¬å…·ä½“çš„<code>action</code>ï¼Œç³»ç»Ÿå¹¿æ’­å‘å‡ºåï¼Œå°†è¢«ç›¸åº”çš„<code>BroadcastReceiver</code>æ¥æ”¶ã€‚ç³»ç»Ÿå¹¿æ’­åœ¨ç³»ç»Ÿå†…éƒ¨å½“ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæœ‰ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºã€‚</li></ul><h4 id="3-Ordered-Broadcast-æœ‰åºå¹¿æ’­">3. Ordered Broadcast(æœ‰åºå¹¿æ’­))</h4><ul><li>å‘é€å‡ºå»çš„å¹¿æ’­è¢«<code>BroadcastReceiver</code>æŒ‰ç…§å…ˆåå¾ªåºæ¥æ”¶ã€‚</li></ul><blockquote><p>æœ‰åºå¹¿æ’­çš„æœ‰åºå¹¿æ’­ä¸­çš„â€œæœ‰åºâ€æ˜¯é’ˆå¯¹å¹¿æ’­æ¥æ”¶è€…è€Œè¨€çš„</p></blockquote><ul><li>å‘é€æ–¹å¼ï¼š<ul><li>å®šä¹‰è¿‡ç¨‹ä¸æ™®é€šå¹¿æ’­ä¸€æ ·ï¼Œè°ƒç”¨<code>sendOrderedBroadcast()</code>ï¼ŒåŒæ ·ä¹Ÿæœ‰å¯¹åº”çš„<code>sendOrderedBroadcastAsUser()</code>æ–¹æ³•ï¼Œåªä¸è¿‡åŒæ ·é’ˆå¯¹äºé¢„è£…åœ¨ç³»ç»Ÿæ˜ åƒçš„åº”ç”¨ã€‚</li></ul></li><li>ç‰¹ç‚¹<ol><li>æŒ‰é¡ºåºæ¥æ”¶</li><li>å…è®¸ä¼˜å…ˆçº§é«˜çš„<code>BroadcastReceiver</code>æˆªæ–­å¹¿æ’­ã€‚</li><li>å…è®¸ä¼˜å…ˆçº§é«˜çš„<code>BroadcastReceiver</code>ä¿®æ”¹å¹¿æ’­</li></ol></li><li>æ¥å—é¡ºåº<ul><li><code>priority</code>å€¼ä¸åŒï¼šç”±å¤§åˆ°å°æ’åº</li><li><code>priority</code>å€¼ç›¸åŒï¼šåŠ¨æ€æ³¨å†Œä¼˜äºé™æ€æ³¨å†Œ</li></ul></li></ul><h4 id="4-Local-Broadcast-æœ¬åœ°å¹¿æ’­">4. Local Broadcast(æœ¬åœ°å¹¿æ’­)</h4><ul><li>å¯ä»¥ç†è§£æˆä¸€ç§å±€éƒ¨å¹¿æ’­çš„å½¢å¼ï¼Œå¹¿æ’­çš„å‘é€è€…å’Œæ¥æ”¶è€…éƒ½åŒå±äºä¸€ä¸ªApp</li><li>ç›¸æ¯”äºå…¨å±€å¹¿æ’­ï¼Œæœ¬åœ°å¹¿æ’­ä¼˜åŠ¿ä½“ç°åœ¨ï¼š<ul><li>å®‰å…¨æ€§æ›´é«˜ï¼›</li><li>æ›´åŠ é«˜æ•ˆã€‚</li></ul></li><li>å¼•å…¥åŸå› ï¼š<ul><li>å…¶ä»–Appå¯èƒ½ä¼šé’ˆå¯¹æ€§çš„å‘å‡ºä¸å½“å‰App <code>intent-filter</code>ç›¸åŒ¹é…çš„å¹¿æ’­ï¼Œç”±æ­¤å¯¼è‡´å½“å‰Appä¸æ–­æ¥æ”¶åˆ°å¹¿æ’­å¹¶å¤„ç†ï¼›</li><li>å…¶ä»–Appå¯ä»¥æ³¨å†Œä¸å½“å‰Appä¸€è‡´çš„<code>intent-filter</code>ç”¨äºæ¥æ”¶å¹¿æ’­ï¼Œè·å–å¹¿æ’­å…·ä½“ä¿¡æ¯ã€‚</li></ul></li><li>è§£å†³æ–¹æ¡ˆ<ol><li>å…¨å±€å¹¿æ’­<strong>é™åˆ¶ä¸ºå±€éƒ¨å¹¿æ’­</strong>(æœ¬è´¨ä»ä¸ºä¸€ä¸ªå…¨å±€å¹¿æ’­)</li><li>ä½¿ç”¨æœ¬åœ°å¹¿æ’­</li></ol></li><li>æ–¹æ¡ˆ1çš„å…·ä½“å®ç°ï¼š<ul><li>å¯¹äºåŒä¸€Appå†…éƒ¨å‘é€å’Œæ¥æ”¶å¹¿æ’­ï¼Œå°†<code>exported</code>å±æ€§äººä¸ºè®¾ç½®æˆ<code>false</code>ï¼Œä½¿å¾—éæœ¬Appå†…éƒ¨å‘å‡ºçš„æ­¤å¹¿æ’­ä¸è¢«æ¥æ”¶ï¼›</li><li>åœ¨å¹¿æ’­å‘é€å’Œæ¥æ”¶æ—¶ï¼Œéƒ½å¢åŠ ä¸Šç›¸åº”çš„<code>permission</code>ï¼Œç”¨äºæƒé™éªŒè¯ï¼›</li><li>å‘é€å¹¿æ’­æ—¶ï¼ŒæŒ‡å®šç‰¹å®šå¹¿æ’­æ¥æ”¶å™¨æ‰€åœ¨çš„åŒ…åï¼Œå…·ä½“æ˜¯é€šè¿‡<code>intent.setPackage(packageName)</code>æŒ‡å®šåœ¨ï¼Œè¿™æ ·æ­¤å¹¿æ’­å°†åªä¼šå‘é€åˆ°æ­¤åŒ…ä¸­çš„Appå†…ä¸ä¹‹ç›¸åŒ¹é…çš„æœ‰æ•ˆå¹¿æ’­æ¥æ”¶å™¨ä¸­ã€‚</li></ul></li><li>æ–¹æ¡ˆ2çš„å…·ä½“å®ç°ï¼š<br>ä½¿ç”¨å°è£…å¥½çš„<code>LocalBroadcastManager</code>ç±»ã€‚<br>ä½¿ç”¨æ–¹å¼ä¸Šä¸é€šå¸¸çš„å…¨å±€å¹¿æ’­å‡ ä¹ç›¸åŒï¼Œåªæ˜¯æ³¨å†Œ/å–æ¶ˆæ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨å’Œå‘é€å¹¿æ’­æ—¶å°†ä¸»è°ƒ<code>context</code>å˜æˆäº†<code>LocalBroadcastManager</code>çš„å•ä¸€å®ä¾‹ã€‚</li></ul><blockquote><p>å¯¹äº<code>LocalBroadcastManager</code>æ–¹å¼å‘é€çš„åº”ç”¨å†…å¹¿æ’­ï¼Œåªèƒ½é€šè¿‡<code>LocalBroadcastManager</code>åŠ¨æ€æ³¨å†Œçš„<code>ContextReceiver</code>æ‰æœ‰å¯èƒ½æ¥æ”¶åˆ°ï¼ˆé™æ€æ³¨å†Œæˆ–å…¶ä»–æ–¹å¼åŠ¨æ€æ³¨å†Œçš„<code>ContextReceiver</code>æ˜¯æ¥æ”¶ä¸åˆ°çš„ï¼‰</p></blockquote><p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ä¾‹åŒ–MyBroadcastReceiver</span></span><br><span class="line">mBroadcastReceiver = <span class="keyword">new</span> MyBroadcastReceiver();</span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–IntentFilter</span></span><br><span class="line">IntentFilter intentFilter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾—åˆ°LocalBroadcastManagerå®ä¾‹</span></span><br><span class="line">LocalBroadcastManager localBroadcastManager = LocalBroadcastManager.getInstance(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®æ¥æ”¶å¹¿æ’­çš„ç±»å‹</span></span><br><span class="line">intentFilter.addAction(BROADCAST_ACTION);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ¨æ€æ³¨å†Œ</span></span><br><span class="line">localBroadcastManager.registerReceiver(mBroadcastReceiver, intentFilter);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–æ¶ˆæ³¨å†Œ</span></span><br><span class="line">localBroadcastManager.unregisterReceiver(mBroadcastReceiver);</span><br></pre></td></tr></table></figure><h1>BroadcastReceiver</h1><h2 id="è‡ªå®šä¹‰BroadcastReceiver">è‡ªå®šä¹‰BroadcastReceiver</h2><ul><li>ç»§æ‰¿åŸºç±»<code>BroadcaseReceiver</code></li><li>å®ç°æŠ½è±¡æ–¹æ³•<code>onReceive(context, intent)</code></li></ul><blockquote><ul><li>æ”¶åˆ°å¹¿æ’­åï¼Œä¼šè‡ªåŠ¨å›è°ƒ<code>onReceive(..)</code>æ–¹æ³•</li><li>é€šå¸¸ï¼Œ<code>onReceive(..)</code>æ–¹æ³•ä¼šæ¶‰åŠåˆ°ä¸å…¶ä»–ç»„ä»¶çš„äº¤äº’ï¼Œå¦‚å‘é€<code>Notification</code>ï¼Œå¯åŠ¨<code>service</code>ç­‰</li><li>é»˜è®¤æƒ…å†µï¼Œ<code>BroadcaseReceiver</code>è¿è¡Œåœ¨UIçº¿ç¨‹ï¼Œå› æ­¤ï¼Œ<code>onReceive(..)</code>æ–¹æ³•ä¸èƒ½æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå¦åˆ™<code>ANR</code></li></ul></blockquote><ul><li>ç®€å•çš„è‡ªå®šä¹‰Demoï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿BroadcastReceiveråŸºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">&quot;MyBroadcastReceiver&quot;</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        sb.append(<span class="string">&quot;Action: &quot;</span> + intent.getAction() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;URI: &quot;</span> + intent.toUri(Intent.URI_INTENT_SCHEME).toString() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        String log = sb.toString();</span><br><span class="line">        Log.d(TAG, log);</span><br><span class="line">        Toast.makeText(context, log, Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="BroadcastReceiveræ³¨å†Œç±»å‹">BroadcastReceiveræ³¨å†Œç±»å‹</h2><h3 id="1-é™æ€æ³¨å†Œ">1. é™æ€æ³¨å†Œ</h3><ul><li>åœ¨<code>AndroidManifest.xml</code>æ–‡ä»¶ä¸­é€šè¿‡<code>&lt;receiver&gt;</code>è¿›è¡Œæ³¨å†Œ</li><li>è§„åˆ™åŠå®ä¾‹è¯´æ˜ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;receiver</span><br><span class="line">    <span class="comment">//BroadcastReceiverå­ç±»çš„ç±»å</span></span><br><span class="line">    <span class="attr">android</span>:name=<span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¯å¦ä½¿ç”¨è¯¥BroadcastReceiver</span></span><br><span class="line">    <span class="attr">android</span>:enabled=[<span class="string">&quot;true&quot;</span> | <span class="string">&quot;false&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­¤broadcastReceiverèƒ½å¦æ¥æ”¶å…¶ä»–Appçš„å‘å‡ºçš„å¹¿æ’­</span></span><br><span class="line">    <span class="comment">//å…¶é»˜è®¤å€¼æ˜¯ç”±receiverä¸­æœ‰æ— intent-filterå†³å®šçš„ï¼Œå¦‚æœæœ‰intent-filterï¼Œé»˜è®¤å€¼ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalse</span></span><br><span class="line">    <span class="attr">android</span>:exported=[<span class="string">&quot;true&quot;</span> | <span class="string">&quot;false&quot;</span>]</span><br><span class="line">  </span><br><span class="line">    <span class="attr">android</span>:icon=<span class="string">&quot;drawable resource&quot;</span></span><br><span class="line">    <span class="attr">android</span>:label=<span class="string">&quot;string resource&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…·æœ‰ç›¸åº”æƒé™çš„å¹¿æ’­å‘é€æ–¹å‘é€çš„å¹¿æ’­æ‰èƒ½è¢«æ­¤broadcastReceiveræ‰€æ¥æ”¶</span></span><br><span class="line">    <span class="attr">android</span>:permission=<span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//broadcastReceiverè¿è¡Œæ‰€å¤„çš„è¿›ç¨‹ã€‚</span></span><br><span class="line">    <span class="comment">//é»˜è®¤ä¸ºappçš„è¿›ç¨‹ï¼Œå¯ä»¥æŒ‡å®šç‹¬ç«‹çš„è¿›ç¨‹</span></span><br><span class="line">    <span class="comment">//Androidå››å¤§åŸºæœ¬ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡æ­¤å±æ€§æŒ‡å®šè‡ªå·±çš„ç‹¬ç«‹è¿›ç¨‹</span></span><br><span class="line">    <span class="attr">android</span>:process=<span class="string">&quot;string&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‡å®šæ­¤å¹¿æ’­æ¥æ”¶å™¨å°†ç”¨äºæ¥æ”¶ç‰¹å®šçš„å¹¿æ’­ç±»å‹</span></span><br><span class="line">    <span class="comment">//æœ¬ä¾‹ä¸­ç»™å‡ºçš„æ—¶ç³»ç»Ÿå¼€æœºåè‡ªèº«å‘å‡ºçš„å¹¿æ’­</span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span></span><br><span class="line">&lt;/receiver&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè¿°é™æ€æ–¹æ³•æ³¨å†Œçš„<code>MyBroadcastReceiver</code>ï¼Œåœ¨<code>app</code>é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿæˆ–è‡ªåŠ¨å®ä¾‹åŒ–<code>MyBroadcastReceiver</code>ï¼Œå¹¶æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ã€‚</p><h3 id="2-åŠ¨æ€æ³¨å†Œ">2. åŠ¨æ€æ³¨å†Œ</h3><ul><li>åœ¨ä»£ç ä¸­è°ƒç”¨<code>Context.registerReceiver()</code>ï¼Œ</li><li>å…¸å‹å†™æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BROADCAST_ACTION = <span class="string">&quot;com.example.whd_alive&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> BroadcastReceiver mBroadcastReceiver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–MyBroadcastReceiver </span></span><br><span class="line">        mBroadcastReceiver = <span class="keyword">new</span> MyBroadcastReceiver();</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–IntentFilter</span></span><br><span class="line">        IntentFilter intentFilter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è®¾ç½®æ¥æ”¶å¹¿æ’­çš„ç±»å‹</span></span><br><span class="line">        intentFilter.addAction(BROADCAST_ACTION);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åŠ¨æ€æ³¨å†Œ</span></span><br><span class="line">        registerReceiver(mBroadcastReceiver, intentFilter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”€æ¯å¹¿æ’­</span></span><br><span class="line">    <span class="comment">//å½“æ­¤Activityå®ä¾‹åŒ–æ—¶ï¼Œä¼šåŠ¨æ€å°†MyBroadcastReceiveræ³¨å†Œåˆ°ç³»ç»Ÿä¸­</span></span><br><span class="line">    <span class="comment">//å½“æ­¤Activityé”€æ¯æ—¶ï¼ŒåŠ¨æ€æ³¨å†Œçš„MyBroadcastReceiverå°†ä¸å†æ¥æ”¶åˆ°ç›¸åº”çš„å¹¿æ’­</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        unregisterReceiver(mBroadcastReceiver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šAndroidä¸­æ‰€æœ‰ä¸è§‚å¯Ÿè€…æ¨¡å¼æœ‰å…³çš„è®¾è®¡ä¸­ï¼Œä¸€æ—¦æ¶‰åŠåˆ°registerï¼Œå¿…å®šåœ¨ç›¸åº”çš„æ—¶æœºéœ€è¦unregisterã€‚å› æ­¤ï¼Œä¸Šä¾‹åœ¨<code>onDestroy()</code>å›è°ƒéœ€è¦<code>unregisterReceiver(mBroadcastReceiver)</code>ã€‚</p></blockquote><h1>å¹¿æ’­å¤„ç†æœºåˆ¶</h1><p><img src="0.jpg" alt=""></p><ol><li>å½“å‘é€ä¸²è¡Œå¹¿æ’­(<code>ordered=true</code>)çš„æƒ…å†µä¸‹ï¼š<ul><li>é™æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶è€…(<code>receivers</code>)ï¼Œé‡‡ç”¨ä¸²è¡Œå¤„ç†ï¼›</li><li>åŠ¨æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶è€…(<code>registeredReceivers</code>)ï¼Œé‡‡ç”¨ä¸²è¡Œå¤„ç†ï¼›</li></ul></li><li>å½“å‘é€å¹¶è¡Œå¹¿æ’­(<code>ordered=false</code>)çš„æƒ…å†µä¸‹ï¼š<ul><li>é™æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶è€…(<code>receivers</code>)ï¼Œä¾ç„¶é‡‡ç”¨ä¸²è¡Œå¤„ç†ï¼›</li><li>åŠ¨æ€æ³¨å†Œçš„å¹¿æ’­æ¥æ”¶è€…(<code>registeredReceivers</code>)ï¼Œé‡‡ç”¨å¹¶è¡Œå¤„ç†ï¼›</li></ul></li></ol><p>ç®€å•æ¥è¯´ï¼Œé™æ€æ³¨å†Œçš„<code>receivers</code>å§‹ç»ˆé‡‡ç”¨ä¸²è¡Œæ–¹å¼æ¥å¤„ç†ï¼ˆ<code>processNextBroadcast</code>ï¼‰ï¼› åŠ¨æ€æ³¨å†Œçš„<code>registeredReceivers</code>å¤„ç†æ–¹å¼æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œæ–¹å¼, å–å†³äºå¹¿æ’­çš„å‘é€æ–¹å¼(<code>processNextBroadcast</code>)ã€‚</p><p>é™æ€æ³¨å†Œçš„å¹¿æ’­å¾€å¾€å…¶æ‰€åœ¨è¿›ç¨‹è¿˜æ²¡æœ‰åˆ›å»ºï¼Œè€Œè¿›ç¨‹åˆ›å»ºç›¸å¯¹æ¯”è¾ƒè€—è´¹ç³»ç»Ÿèµ„æºçš„æ“ä½œï¼Œæ‰€ä»¥ è®©é™æ€æ³¨å†Œçš„å¹¿æ’­ä¸²è¡ŒåŒ–ï¼Œèƒ½é˜²æ­¢å‡ºç°ç¬é—´å¯åŠ¨å¤§é‡è¿›ç¨‹çš„å–·äº•æ•ˆåº”ã€‚</p><p>**ANRæ—¶æœºï¼š**åªæœ‰ä¸²è¡Œå¹¿æ’­æ‰éœ€è¦è€ƒè™‘è¶…æ—¶ï¼Œå› ä¸ºæ¥æ”¶è€…æ˜¯ä¸²è¡Œå¤„ç†çš„ï¼Œå‰ä¸€ä¸ª<code>receiver</code>å¤„ç†æ…¢ï¼Œä¼šå½±å“åä¸€ä¸ªreceiverï¼›å¹¶è¡Œå¹¿æ’­ é€šè¿‡ä¸€ä¸ªå¾ªç¯ä¸€æ¬¡æ€§å‘æ‰€æœ‰çš„<code>receiver</code>åˆ†å‘å¹¿æ’­äº‹ä»¶ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å½¼æ­¤å½±å“çš„é—®é¢˜ï¼Œåˆ™æ²¡æœ‰å¹¿æ’­è¶…æ—¶ï¼›</p><ul><li>ä¸²è¡Œå¹¿æ’­è¶…æ—¶æƒ…å†µ1ï¼šæŸä¸ªå¹¿æ’­æ€»å¤„ç†æ—¶é—´ &gt; 2* receiveræ€»ä¸ªæ•° * mTimeoutPeriod, å…¶ä¸­<code>mTimeoutPeriod</code>ï¼Œå‰å°é˜Ÿåˆ—é»˜è®¤ä¸º10sï¼Œåå°é˜Ÿåˆ—é»˜è®¤ä¸º60s;</li><li>ä¸²è¡Œå¹¿æ’­è¶…æ—¶æƒ…å†µ2ï¼šæŸä¸ªreceiverçš„æ‰§è¡Œæ—¶é—´è¶…è¿‡<code>mTimeoutPeriod</code>ï¼›</li></ul><p><strong>ä¸åŒæ³¨å†Œæ–¹å¼çš„å¹¿æ’­æ¥æ”¶å™¨å›è°ƒonReceive(context, intent)ä¸­çš„contextå…·ä½“ç±»å‹</strong>ï¼š</p><ul><li>é™æ€æ³¨å†Œ(å…¨å±€+æœ¬åœ°)ï¼š<ul><li>å›è°ƒ<code>onReceive(context, intent)</code>ä¸­çš„<code>context</code>å…·ä½“æŒ‡çš„æ˜¯<code>ReceiverRestrictedContext</code></li></ul></li><li>å…¨å±€åŠ¨æ€æ³¨å†Œï¼š<ul><li>å›è°ƒ<code>onReceive(context, intent)</code>ä¸­çš„<code>context</code>å…·ä½“æŒ‡çš„æ˜¯<code>Activity Context</code>ï¼›</li></ul></li><li>LocalBroadcastManageråŠ¨æ€æ³¨å†Œ<ul><li>å›è°ƒ<code>onReceive(context, intent)</code>ä¸­çš„<code>context</code>å…·ä½“æŒ‡çš„æ˜¯<code>Application Context</code>ã€‚</li></ul></li></ul><hr><h1>Android 7.0ä»¥åçš„æ–°ç‰¹æ€§</h1><p>ä»¥ä¸Šæˆ‘ä»¬è®¨è®ºäº†è€ç”Ÿå¸¸è°ˆçš„å†…å®¹ï¼Œä¸‹é¢æˆ‘ä»¬è°ˆä¸€è°ˆAndroid 7.0ä»¥åçš„æ–°å˜åŒ–</p><ul><li>Android 7.0èµ·ï¼Œç³»ç»Ÿä¸å†å‘é€ä»¥ä¸‹ç³»ç»Ÿå¹¿æ’­ï¼š<ul><li><code>ACTION_NEW_PICTURE</code></li><li><code>ACTION_NEW_VIDEO</code></li></ul></li><li>é’ˆå¯¹Android 7.0 (APIçº§åˆ«24)å’Œæ›´é«˜ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºå¿…é¡»é€šè¿‡<code>registerReceiver()</code>æ³¨å†Œä»¥ä¸‹å¹¿æ’­ã€‚åœ¨<code>AndroidManifest</code>ä¸­å£°æ˜<code>&lt;receiver&gt;</code>èµ·ä½œç”¨ã€‚<ul><li><code>CONNECTIVITY_ACTION</code></li></ul></li><li>Android 8.0èµ·ï¼Œåº”ç”¨æ— æ³•åœ¨<code>Manifest</code>ä¸­æ³¨å†Œå¤§éƒ¨åˆ†éšå¼ç³»ç»Ÿå¹¿æ’­(å³ï¼Œå¹¶éä¸“é—¨é’ˆå¯¹æ­¤åº”ç”¨çš„å¹¿æ’­)ï¼Œæ­¤æ„ä¹Ÿæ˜¯åœ¨äºé™ä½éšAndroidåŒæ—¶è¿è¡Œçš„åº”ç”¨å¢å¤šï¼Œå‘ç”Ÿæ€§èƒ½å˜å·®çš„å‡ ç‡ã€‚</li></ul><hr><h1>å‡ºäºå®‰å…¨è€ƒè™‘çš„å¹¿æ’­ä½¿ç”¨æœ€ä½³å®è·µ</h1><ul><li>å¦‚ä¸éœ€è¦å‘åº”ç”¨ç¨‹åºä¹‹å¤–çš„ç»„ä»¶å‘é€å¹¿æ’­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ”¯æŒåº“<code>Support Library</code>ä¸­<code>LocalBroadcastManager</code>å‘é€å’Œæ¥æ”¶æœ¬åœ°å¹¿æ’­ã€‚</li><li><strong>å¦‚æœè®¸å¤šåº”ç”¨ç¨‹åºæ¸…å•ä¸­æ³¨å†Œæ¥æ”¶ç›¸åŒçš„å¹¿æ’­ï¼Œå®ƒä¼šå¯¼è‡´ç³»ç»Ÿå¯åŠ¨å¤§é‡çš„åº”ç”¨ç¨‹åºï¼Œä»è€Œå¯¹è®¾å¤‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒäº§ç”Ÿé‡å¤§å½±å“</strong>ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œè¯·ä½¿ç”¨åŠ¨æ€æ³¨å†Œè€Œä¸æ˜¯<code>Manifest</code>å£°æ˜ã€‚æœ‰æ—¶ï¼ŒAndroidç³»ç»Ÿæœ¬èº«ä¼šå¼ºåˆ¶ä½¿ç”¨ä¸Šä¸‹æ–‡æ³¨å†Œçš„æ¥æ”¶å™¨ã€‚ä¾‹å¦‚ï¼Œ<code>CONNECTIVITY_ACTION</code>å¹¿æ’­åªå…è®¸åŠ¨æ€æ³¨å†Œã€‚</li><li><code>onReceive(Context, Intent)</code>è¿è¡Œåœ¨UIçº¿ç¨‹ï¼Œä¸è¦è¿›è¡Œè€—æ—¶æ“ä½œ<ul><li>å¦‚è€—æ—¶æ“ä½œå¿…ä¸å¯å°‘ï¼Œç”Ÿæˆå­çº¿ç¨‹ã€‚<br><strong>å…·ä½“åšæ³•æ˜¯åœ¨ onReceive() ä¸­å¼€å¯ä¸€ä¸ª serviceï¼Œå°†è€—æ—¶æ“ä½œç½®äº service ä¸­ï¼ˆå­çº¿ç¨‹ï¼‰</strong></li></ul></li><li>ä¸è¦ä½¿ç”¨éšå«çš„æ„å›¾ä¼ æ’­æ•æ„Ÿä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥è¢«ä»»ä½•æ³¨å†Œçš„åº”ç”¨ç¨‹åºè¯»å–ã€‚<ul><li>è§£å†³æ–¹æ¡ˆ ï¼š <code>permission</code> /  <code>setPackage(String)</code> / <code>LocalBroadcastManager</code>.</li></ul></li><li>å½“æ³¨å†Œä¸€ä¸ª<code>BroadcastReceiver</code>ï¼Œä»»ä½•åº”ç”¨ç¨‹åºéƒ½å¯ä»¥å‘é€æ½œåœ¨çš„æ¶æ„å¹¿æ’­åˆ°ä½ çš„åº”ç”¨çš„<code>BroadcastReceiver</code>ã€‚<ul><li>è§£å†³æ–¹æ¡ˆ ï¼š <code>permission</code> /  <code>android:exported = &quot;false&quot;</code> / <code>LocalBroadcastManager</code>.</li></ul></li><li>å¹¿æ’­æ“ä½œçš„å‘½åç©ºé—´æ˜¯å…¨å±€çš„ã€‚ç¡®ä¿æ“ä½œåç§°å’Œå…¶ä»–å­—ç¬¦ä¸²éƒ½æ˜¯åœ¨æ‚¨è‡ªå·±çš„åç§°ç©ºé—´ä¸­ç¼–å†™çš„ï¼Œå¦åˆ™æ‚¨å¯èƒ½ä¼šæ— æ„ä¸­ä¸å…¶ä»–åº”ç”¨ç¨‹åºå‘ç”Ÿå†²çªã€‚</li><li>ä¸è¦ä»<code>BroadcastReceiver</code>å¼€å§‹æ´»åŠ¨ï¼Œè¿™ä¹ˆåšä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒå¾ˆå·®ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæœ‰ä¸æ­¢ä¸€ä¸ª<code>BroadcastReceiver</code>ã€‚ç›¸åï¼Œ<u>è€ƒè™‘ä½¿ç”¨<code>Notification</code></u>ã€‚</li><li>åœ¨Android ä¸­å¦‚æœè¦å‘é€ä¸€ä¸ªå¹¿æ’­å¿…é¡»ä½¿ç”¨sendBroadCast å‘ç³»ç»Ÿå‘é€å¯¹å…¶æ„Ÿå…´è¶£çš„å¹¿æ’­æ¥æ”¶å™¨ä¸­ã€‚</li><li>ä½¿ç”¨å¹¿æ’­å¿…é¡»è¦æœ‰ä¸€ä¸ªintent å¯¹è±¡å¿…è®¾ç½®å…¶actionåŠ¨ä½œå¯¹è±¡</li><li>ä½¿ç”¨å¹¿æ’­å¿…é¡»åœ¨é…ç½®æ–‡ä»¶ä¸­æ˜¾å¼çš„æŒ‡æ˜è¯¥å¹¿æ’­å¯¹è±¡</li><li>æ¯æ¬¡æ¥æ”¶å¹¿æ’­éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ¥æ”¶å¹¿æ’­çš„å¯¹è±¡</li><li>åœ¨BroadCast ä¸­å°½é‡ä¸è¦å¤„ç†å¤ªå¤šé€»è¾‘é—®é¢˜ï¼Œå»ºè®®å¤æ‚çš„é€»è¾‘äº¤ç»™Activity æˆ–è€… Service å»å¤„ç†</li><li>å¦‚æœåœ¨AndroidManifest.xmlä¸­æ³¨å†Œï¼Œå½“åº”ç”¨ç¨‹åºå…³é—­çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ¥æ”¶åˆ°å¹¿æ’­ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­æ³¨å†Œå°±ä¸äº§ç”Ÿè¿™ç§æƒ…å†µäº†ã€‚</li></ul><h1>å‚è€ƒ</h1><blockquote><p><a href="https://www.jianshu.com/p/e236a2669797">https://www.jianshu.com/p/e236a2669797</a></p><p><a href="https://developer.aliyun.com/article/13367">https://developer.aliyun.com/article/13367</a></p><p><a href="https://blog.csdn.net/q376794191/article/details/85292952">https://blog.csdn.net/q376794191/article/details/85292952</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å®‰å“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§»åŠ¨äº’è”ç½‘å¼€å‘-WIFI-DIRECT</title>
      <link href="/2022/03/10/%E7%A7%BB%E5%8A%A8%E4%BA%92%E8%81%94%E7%BD%91%E5%BC%80%E5%8F%91-WIFI-DIRECT/"/>
      <url>/2022/03/10/%E7%A7%BB%E5%8A%A8%E4%BA%92%E8%81%94%E7%BD%91%E5%BC%80%E5%8F%91-WIFI-DIRECT/</url>
      
        <content type="html"><![CDATA[<h1>æŠ€æœ¯ä»‹ç»</h1><p>2010å¹´10æœˆï¼ŒWi-Fi Allianceï¼ˆwi-fiè”ç›Ÿï¼‰å‘å¸ƒWi-Fi Directç™½çš®ä¹¦ï¼Œç™½çš®ä¹¦ä¸­ä»‹ç»äº†æœ‰å…³äºè¿™ç§æŠ€æœ¯çš„åŸºæœ¬ä¿¡æ¯ã€è¿™ç§æŠ€æœ¯çš„ç‰¹ç‚¹å’Œè¿™ç§æŠ€æœ¯çš„åŠŸèƒ½ï¼Œ</p><p>Wi-Fi Directæ ‡å‡†æ˜¯æŒ‡å…è®¸æ— çº¿ç½‘ç»œä¸­çš„è®¾å¤‡æ— éœ€é€šè¿‡æ— çº¿è·¯ç”±å™¨å³å¯ç›¸äº’è¿æ¥ã€‚ä¸è“ç‰™æŠ€æœ¯ç±»ä¼¼ï¼Œè¿™ç§æ ‡å‡†å…è®¸æ— çº¿è®¾å¤‡ä»¥ç‚¹å¯¹ç‚¹å½¢å¼äº’è¿ï¼Œè€Œä¸”åœ¨ä¼ è¾“é€Ÿåº¦ä¸ä¼ è¾“è·ç¦»æ–¹é¢åˆ™æ¯”è“ç‰™æœ‰å¤§å¹…æå‡ã€‚</p><h2 id="WIFI-Directæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿï¼ˆç‰¹ç‚¹ï¼‰">WIFI Directæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿï¼ˆç‰¹ç‚¹ï¼‰</h2><p>1ã€æ— çº¿ç½‘ç»œä¸­çš„è®¾å¤‡<strong>æ— éœ€é€šè¿‡æ— çº¿è·¯ç”±å™¨å³å¯ç›¸äº’è¿æ¥</strong>ï¼›<br>2ã€<strong>æ”¯æŒä¸€å¯¹ä¸€ç›´è¿ï¼Œä¹Ÿå¯ä»¥å®ç°å¤šå°è®¾å¤‡åŒæ—¶è¿æ¥</strong>ï¼›<br>3ã€æ”¯æŒæ‰€æœ‰çš„Wi-Fiè®¾å¤‡ï¼Œä»11a/b/gè‡³11nï¼Œ<strong>ä¸åŒæ ‡å‡†çš„Wi-Fiè®¾å¤‡ä¹‹é—´ä¹Ÿå¯ä»¥ç›´æ¥äº’è”</strong>ï¼›<br>4ã€ç§»åŠ¨æ€§ä¸ä¾¿æºæ€§ï¼šWi-Fi Directè®¾å¤‡èƒ½å¤Ÿéšæ—¶éšåœ°å®ç°äº’ç›¸è¿æ¥ã€‚ç”±äºä¸éœ€è¦Wi-Fiè·¯ç”±å™¨æˆ–æ¥å…¥ç‚¹ï¼Œå› æ­¤<strong>Wi-Fi</strong>è®¾å¤‡å¯ä»¥åœ¨ä»»ä½•åœ°ç‚¹å®ç°è¿æ¥ã€‚<br>5ã€å³æ—¶å¯ç”¨æ€§ï¼šç”¨æˆ·å°†å¾—ä»¥åˆ©ç”¨å¸¦å›å®¶çš„ç¬¬ä¸€éƒ¨Wi-Fi Directè®¤è¯è®¾å¤‡å»ºç«‹ç›´æ¥è¿æ¥ã€‚ä¾‹å¦‚ï¼Œä¸€éƒ¨æ–°è´­ä¹°çš„Wi-Fi Directç¬”è®°æœ¬å¯ä»¥ä¸ç”¨æˆ·å·²æœ‰çš„ä¼ ç»ŸWi-Fiè®¾å¤‡åˆ›å»ºç›´æ¥è¿æ¥ã€‚<br>6ã€æ˜“ç”¨æ€§ï¼šWi-Fi Directè®¾å¤‡å‘ç°ï¼ˆDevice Discoveryï¼‰ä¸æœåŠ¡å‘ç°ï¼ˆService Discoveryï¼‰åŠŸèƒ½å¸®åŠ©ç”¨æˆ·ç¡®å®šå¯ç”¨çš„è®¾å¤‡ä¸æœåŠ¡ï¼Œç„¶åå»ºç«‹è¿æ¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·æƒ³è¦æ‰“å°æ–‡ä»¶ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡ä¸Šè¿°æœåŠ¡è¿æ¥åˆ°å“ªä¸ªWi-Fiç½‘ç»œæ‹¥æœ‰æ‰“å°æœºã€‚<br>7ã€ç®€å•è€Œå®‰å…¨çš„è¿æ¥ï¼šWi-Fi Directè®¾å¤‡é‡‡ç”¨Wi-Fi Protected Setupâ„¢ç®€åŒ–äº†åœ¨è®¾å¤‡ä¹‹é—´åˆ›å»ºå®‰å…¨è¿æ¥çš„è¿‡ç¨‹ã€‚ç”¨æˆ·å¯ä»¥æŒ‰ä¸‹ä»»ä¸€è®¾å¤‡ä¸Šçš„æŒ‰é’®ï¼Œä¹Ÿå¯ä»¥è¾“å…¥PINç ï¼ˆå³è®¾å¤‡æ˜¾ç¤ºçš„PINç ï¼‰ï¼Œè½»æ¾åˆ›å»ºå®‰å…¨è¿æ¥ã€‚</p><p>ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼šWi-Fi DirectæŠ€æœ¯æ˜¯Wi-Fiäº§ä¸šé“¾å‘è“ç‰™æŠ€æœ¯å‘èµ·çš„æŒ‘æˆ˜ï¼Œå®ƒè¯•å›¾å®Œå…¨å–ä»£è“ç‰™ã€‚</p><h1>æŠ¥é”™ä¸è§£å†³</h1><blockquote><p>The minCompileSdk (31) specified in a dependencyâ€™s AAR metadata (META-INF/com/android/build/gradle/aar-metadata.properties) is greater than this moduleâ€™s compileSdkVersion (android-30).<br>Dependency: androidx.appcompat:appcompat:1.6.0-alpha01.</p></blockquote><p>ä½†æˆ‘çœ‹äº†ä¸€çœ¼æˆ‘ä¾èµ–ç”¨çš„æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;androidx.appcompat:appcompat:1.3.0&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ‰ç‚¹ä¸æ˜æ‰€ä»¥ä½†å°†ç¼–è¯‘ç‰ˆæœ¬è¿˜æ˜¯æ”¹æˆäº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compileSdkVersion <span class="number">31</span></span><br></pre></td></tr></table></figure><p>ç„¶åè¦å¯¹æ‰€æœ‰ä½¿ç”¨<code>&lt;intent-filter&gt;</code>çš„activityåŠ <code>android:exported=&quot;true&quot;</code>(Manifesté‡Œ)</p><blockquote><p>åº”è¯¥æ˜¯<code>android-31</code>æ–°åŠ çš„ç‰¹æ€§</p></blockquote><h1>æŠ€æœ¯è¦ç‚¹</h1><h2 id="åŸç”Ÿ">åŸç”Ÿ</h2><p>è¿™é‡Œç”¨äº†ä¸€ä¸ªå¾ˆä¹…ä»¥å‰å†™çš„ç»ƒæ‰‹é¡¹ç›®ï¼Œç¿»å‡ºæ¥çš„æ—¶å€™åªå‰©æºç å’Œæ³¨é‡Šäº†ã€‚å½“åˆå¼€å‘æ—¶å€Ÿé‰´äº†ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå› ä¸ºæ³¨é‡Šé½å…¨å°±ä¸€ç›´ç•™ç€ï¼Œç°åœ¨æ¥è¡¥å……ä¸€äº›æ–‡æ¡£ã€‚</p><h3 id="ä¸»è¦çš„æŠ€æœ¯ç‚¹">ä¸»è¦çš„æŠ€æœ¯ç‚¹</h3><ul><li>å¹¿æ’­æœºåˆ¶çš„ç†è§£ä¸ç›‘å¬</li><li>èŠå¤©ç•Œé¢çš„æ„å»ºï¼ˆUIé—®é¢˜ï¼Œeasyï¼Œä¸è¿‡å¤šåˆ†æï¼Œåšå¥½çŠ¶æ€ç®¡ç†å°±å¥½ï¼Œå°¤å…¶æ˜¯å¼‚æ­¥ï¼‰</li><li>service</li><li>æ•°æ®ä¼ è¾“</li></ul><h3 id="é€»è¾‘æµç¨‹">é€»è¾‘æµç¨‹</h3><p><img src="0.png" alt="é€»è¾‘æµç¨‹"></p><h3 id="å¹¿æ’­æœºåˆ¶">å¹¿æ’­æœºåˆ¶</h3><p><a href="https://zwn2001.github.io/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E5%B9%BF%E6%92%AD/">æˆ‘çš„åšå®¢ï¼šå¹¿æ’­</a></p><p>åœ¨æœ¬é¡¹ç›®ä¸­æˆ‘ä»¬åªéœ€è¦æ¥æ”¶å¹¿æ’­ï¼Œæˆ–è€…è¯´ï¼Œæˆ‘ä»¬æ›´ä¾§é‡äº<code>receiver</code>ã€‚</p><p>ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬è¦è®¾ç½®å¯¹å“ªäº›å¹¿æ’­è¿›è¡Œç›‘å¬ï¼Œæˆ–è€…è¯´ï¼Œå¦‚ä½•å¯¹æ‰€æœ‰å¹¿æ’­è¿›è¡Œè¿‡æ»¤ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬è¦å®ç°æˆ‘ä»¬çš„ç›‘å¬åçš„ä¸»ä½“åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•é‡å†™<code>onReceive</code>ã€‚</p><h4 id="è¿‡æ»¤">è¿‡æ»¤</h4><p>è¿‡æ»¤å™¨ä¼šåœ¨æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨æ—¶ç”¨åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶ä½œä¸ºå¹¿æ’­æ¥æ”¶å™¨ç±»çš„é™æ€æˆå‘˜å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IntentFilter <span class="title">getIntentFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    IntentFilter intentFilter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">    intentFilter.addAction(WifiP2pManager.WIFI_P2P_STATE_CHANGED_ACTION);</span><br><span class="line">    intentFilter.addAction(WifiP2pManager.WIFI_P2P_PEERS_CHANGED_ACTION);</span><br><span class="line">    intentFilter.addAction(WifiP2pManager.WIFI_P2P_CONNECTION_CHANGED_ACTION);</span><br><span class="line">    intentFilter.addAction(WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION);</span><br><span class="line">    <span class="keyword">return</span> intentFilter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜æœ‰å…¶ä»–äº‹ä»¶å¯ä»¥ç›‘å¬ã€‚</p><h4 id="ç›‘å¬">ç›‘å¬</h4><p>â€‹        é’ˆå¯¹æˆ‘ä»¬è¿‡æ»¤å™¨çš„ç›‘å¬å†…å®¹ï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰å„è‡ªçš„å¤„ç†å‡½æ•°å³å¯ã€‚</p><p>â€‹        è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å°†è·å–åˆ°çš„ä¿¡æ¯é€šçŸ¥åˆ°<code>WifiP2pManager</code>ï¼Œé‚£ä¹ˆåœ¨å¹¿æ’­æ¥æ”¶å™¨çš„ç±»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦<code>WifiP2pManager</code>å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡éœ€è¦å…ˆäº<code>WifiBroadcastReceiver</code>å®Œæˆåˆå§‹åŒ–ï¼Œåœ¨<code>WifiBroadcastReceiver</code>å¯¹è±¡é”€æ¯åç”±javaåƒåœ¾å¤„ç†æœºåˆ¶è‡ªè¡Œå›æ”¶ã€‚</p><p>â€‹        åŒæ—¶ï¼Œé‡å†™<code>WifiP2pManager.ChannelListener</code>æ¥å£ï¼Œå¯¹channelè¿›è¡Œç›‘å¬ã€‚</p><p>â€‹        <code>WifiP2pManager</code>å¯¹è±¡å¹¶æ²¡æœ‰å®Œå…¨æ‰§è¡Œæ“ä½œçš„èƒ½åŠ›ï¼Œç›¸åå¾—ï¼Œä»–æ­£æ˜¯é€šè¿‡åœ¨æ“ä½œï¼ˆå‡½æ•°ï¼‰ä¸­ç»‘å®šç›¸åº”çš„ç›‘å¬å™¨æ¥è¾¾åˆ°ç›‘å¬å¹¶å¤„ç†ç»“æœçš„åŠŸèƒ½ã€‚</p><p>â€‹        é¡¹ç›®ä¸­åªç”¨äº†<code>ChannelListener</code>å’Œ<code>ActionListener</code>ï¼Œè¿˜æœ‰å…¶ä»–æ²¡æœ‰ä½¿ç”¨åˆ°çš„ç›‘å¬å™¨ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„åŠŸèƒ½ã€‚é€šè¿‡åˆ†ç›‘å¬å™¨çš„æ–¹å¼å®Œæˆæ“ä½œè½»é‡åŒ–ä¸è§£è€¦ã€‚</p><p>â€‹        è‡³äºä¸ºå•¥æ²¡æœ‰é‡å†™<code>ActionListener</code>æ¥å£ï¼Œå› ä¸ºè¿™ä¸ªç›‘å¬å™¨æœ¬èº«å°±æ˜¯ç”¨äºåˆ¤æ–­æ“ä½œè¿”å›å€¼ï¼Œæˆ–è€…è¯´ï¼Œåˆ¤æ–­å‡½æ•°æ˜¯å¦æˆåŠŸçš„ã€‚</p><h3 id="UIè¦ç‚¹">UIè¦ç‚¹</h3><p>èŠå¤©ç•Œé¢çš„å›¾ç‰‡åŠ è½½ä½¿ç”¨çš„æ˜¯<a href="https://muyangmin.github.io/glide-docs-cn/"><code>Glide</code></a>ã€‚ç•Œé¢æ•´ä½“æ˜¯ä¸€ä¸ª<code>RecyclerView</code>ï¼Œå¦‚æœä½ é—®ä¸ºå•¥ä¸ç”¨<code>LIstView</code>ï¼Œé‚£æˆ‘åªèƒ½æ‹¿ä»–çš„æ€§èƒ½è·Ÿä½ ä¾ƒä¸€ä¼šå„¿äº†ï¼Œè¿™ç‚¹ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ä¸­ä¹Ÿæœ‰æåˆ°ï¼Œä¸å†èµ˜è¿°ã€‚</p><h4 id="LayoutInflater"><code>LayoutInflater</code></h4><p>èŠå¤©ç•Œé¢çš„ä¿¡æ¯éƒ½æ˜¯ä½¿ç”¨<code>LayoutInflater</code>è¿›è¡Œå¸ƒå±€åŠ è½½ç„¶åè°ƒç”¨å¯¹åº”çš„<code>Holder</code>è¿›è¡ŒUIæ¸²æŸ“çš„ã€‚</p><p><code>LayoutInflater</code>ä½¿ç”¨çš„æ–¹æ³•ï¼š<br><code>LayoutInflater.inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot)</code>ã€‚<br>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ€»å…±éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºï¼š</p><ul><li>resourceï¼šå¸ƒå±€èµ„æºæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å°†è¦æ ¹æ®å®ƒæ¥åˆ›å»ºæ–°çš„è§†å›¾ã€‚</li><li>rootï¼šæ ¹å¸ƒå±€ã€‚å¯ä»¥è®¾ç½®ä¸º<code>Null</code>ã€‚å¦‚æœä¸º<code>Null</code>ï¼Œ<strong>é‚£æ–°å¸ƒå±€ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„æ ¹å¸ƒå±€å‚æ•°ï¼ˆæ³¨æ„ï¼šæ˜¯æ–°è§†å›¾çš„æ ¹å¸ƒå±€ï¼‰å°±ä¸ä¼šè¢«è®¾ç½®æˆä»»ä½•å¸ƒå±€å‚æ•°ï¼Œåªæœ‰ç­‰æ·»åŠ åˆ°çˆ¶å¸ƒå±€æ—¶å€™ï¼Œé‡æ–°èµ‹ç»™è¿™ä¸ªæ ¹å¸ƒå±€æ–°çš„å¸ƒå±€å‚æ•°ï¼Œå¹¶ä¸”ç¬¬ä¸‰ä¸ªå‚æ•°å°†æ¯«æ— ä½œç”¨</strong>ã€‚æˆ‘ä»¬åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°è®²è§£ç¬¬äºŒä¸ªå‚æ•°åœ¨éNullæƒ…å†µã€‚</li><li>attachToRootï¼š<strong>æ˜¯å¦å°†æ–°çš„å¸ƒå±€æ·»åŠ åˆ°æ ¹å¸ƒå±€ï¼ˆroot)ï¼Œè®°ä½è¿™ä¸ªå‚æ•°åªæœ‰åœ¨ç¬¬äºŒä¸ªå‚æ•°éNullçš„æƒ…å†µæ‰ç”Ÿæ•ˆ</strong>ã€‚å¦‚æœæ­¤å‚æ•°ä¸º<code>false</code>ï¼Œé‚£ä¹ˆæ–°çš„è§†å›¾ä¸ä¼šè¢«æ·»åŠ è¿›æ ¹å¸ƒå±€ï¼Œåªä¼šå°†æ–°çš„è§†å›¾æ ¹å¸ƒå±€çš„å¸ƒå±€å‚æ•°è½¬æ¢æˆ<code>root</code>çš„æ ¹å¸ƒå±€å‚æ•°ã€‚å¦‚æœæ­¤å‚æ•°ä¸º<code>true</code>ï¼Œé‚£ä¹ˆé™¤äº†å°†æ–°çš„è§†å›¾æ ¹å¸ƒå±€çš„å¸ƒå±€å‚æ•°è½¬æ¢æˆ<code>root</code>çš„æ ¹å¸ƒå±€å‚æ•°ï¼Œ<code>LayoutInflater</code>è¿˜ä¼šè°ƒç”¨<code>root.addView(temp, params)</code>æ–¹æ³•ï¼Œå°†æ–°çš„è§†å›¾æ·»åŠ è¿›æ ¹å¸ƒå±€ã€‚</li></ul><p>å†æ·±ç©¶å°±æ¶‰åŠåˆ°å¤ªå¤šå®‰å“<code>View</code>çš„åŸç†äº†ï¼Œæ•…ç‚¹åˆ°ä¸ºæ­¢ã€‚ä½†æˆ‘è§‰å¾—ï¼ŒåŸºæœ¬çš„è§†å›¾æ ‘çš„æ¦‚å¿µè¿˜æ˜¯è¦æœ‰çš„ã€‚</p><h4 id="å¼‚æ­¥ä¸çŠ¶æ€ç®¡ç†">å¼‚æ­¥ä¸çŠ¶æ€ç®¡ç†</h4><p><a href="https://zwn2001.github.io/2021/10/27/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%BC%82%E6%AD%A5/">æˆ‘çš„åšå®¢ï¼šå¼‚æ­¥ä¸çŠ¶æ€ç®¡ç†</a></p><h3 id="service">service</h3><p>â€‹        è¦ç»†è¯´æœåŠ¡å¯å¤ªæœ‰çš„è¯´äº†ã€‚ã€‚ã€‚ç»™ä¸€ä»½å‚è€ƒå§ï¼š<a href="https://zwn2001.github.io/2022/03/11/%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F-%E6%9C%8D%E5%8A%A1/">æˆ‘çš„åšå®¢ï¼šservice</a></p><p>â€‹        åœ¨è¯¥ç¨‹åºä¸­ï¼Œå¿…ç„¶å­˜åœ¨ä¸€å°è®¾å¤‡æ‹…ä»»æœåŠ¡å™¨çš„è§’è‰²ï¼Œé‚£ä¹ˆæœåŠ¡å™¨çš„åŠŸèƒ½å®ç°åˆ™éœ€è¦ä½¿ç”¨æœåŠ¡åœ¨åå°å®Œæˆã€‚</p><p>â€‹        ç¨‹åºä¸­çš„æœåŠ¡ä¸»è¦å®Œæˆä¸¤é¡¹ä»»åŠ¡ï¼Œé¦–å…ˆæ˜¯å¯åŠ¨socketæœåŠ¡å™¨å¹¶è¿è¡ŒæœåŠ¡çº¿ç¨‹çš„ä»£ç ï¼Œå…¶æ¬¡æ˜¯è¿è¡Œæ¶ˆæ¯æ›´æ–°çš„çº¿ç¨‹ä»£ç ï¼Œå³æ¯ç§’å‘å‰å°activityå‘é€æ¶ˆæ¯æ›´æ–°çš„è¯·æ±‚ï¼Œåœ¨èŠå¤©ç•Œé¢åˆå§‹åŒ–ç”¨æˆ·èº«ä»½åï¼Œå¦‚æœæ˜¯æœåŠ¡ç«¯ï¼Œåˆ™ç»‘å®šä¸€ä¸ªç›¸å…³çš„æœåŠ¡ã€‚</p><h3 id="æ•°æ®åˆ†å‘-ä»¥æ–‡ä»¶åˆ†å‘ä¸ºä¾‹">æ•°æ®åˆ†å‘ - ä»¥æ–‡ä»¶åˆ†å‘ä¸ºä¾‹</h3><p>æ¯ä¸ªèŠå¤©æ•°æ®éƒ½ä¼šè¢«å°è£…æˆ<code>messageBean</code>å¯¹è±¡ï¼Œç”¨äºè®°å½•æ•°æ®ç±»å‹ã€æ—¶é—´ã€å†…å®¹ã€‚</p><p>æ‰€æœ‰æ•°æ®å…¶å®éƒ½å¯ä»¥ä½œä¸ºæ–‡ä»¶è¿›è¡Œåˆ†å‘ï¼Œå°¤å…¶æ˜¯è¯­éŸ³ã€‚</p><p>é¦–å…ˆï¼Œè¦çº¦å®šä¼ è¾“çš„æ•°æ®æ ¼å¼ï¼šäºŒè¿›åˆ¶ä¼ è¾“ï¼Œæ–‡ä»¶ç±»å‹ï¼ˆintï¼‰ + æ•°æ®é•¿åº¦ï¼ˆäºŒè¿›åˆ¶é•¿åº¦ï¼‰+ äºŒè¿›åˆ¶æ•°æ®æµã€‚</p><p>è¿™é‡Œè¦æ³¨æ„ï¼Œé¦–å…ˆä¼ è¾“çš„æ˜¯<code>messageBean</code>çš„æ•°æ®ï¼Œç¼–ç æ–¹å¼ä¸º<code>GsonUtil.toJsonStr(messageBean).getBytes()</code>ï¼Œç„¶åä¼ é€’æ–‡ä»¶å†…å®¹ï¼Œè¿™é‡Œä½¿ç”¨<code>byte[] buffer = new byte[1024];</code>è¿™æ ·çš„ç¼“å†²å­—èŠ‚æ•°ç»„å¯¹æ–‡ä»¶è¿›è¡Œè¯»å–ä¸ä¼ è¾“ã€‚</p><h2 id="Flutter">Flutter</h2><p>â€‹        Flutterå¯¹WiFiç›´è¿çš„å®ç°æ˜¯æ¥è‡ª<a href="https://pub.flutter-io.cn/packages/flutter_p2p_plus"><code>flutter_p2p_plus: ^1.0.2</code></a>ï¼Œæœ¬è´¨ä¸Šå…¶å®æ˜¯é€šè¿‡<code>PlatformChannel</code>å¯¹åŸç”Ÿå‡½æ•°è¿›è¡Œçš„å°è£…ã€‚</p><p>â€‹       ç›¸è¾ƒäºåŸç”Ÿçš„æ•´ä¸ªå¼€å‘ï¼Œflutterå°è£…äº†å¹¿æ’­çš„ç›‘å¬å™¨ä»¥åŠWiFiçš„äº‹ä»¶ç›‘å¬å™¨å¹¶é¢„ç•™äº†æ¥å£ï¼Œå¹¶å¯¹<code>WiFiP2pManager</code>åŠå…¶<code>channel</code>è¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–äº†æ•´ä¸ªæ“ä½œæµç¨‹ã€‚ï¼ˆè™½ç„¶è¿™ç»™è°ƒè¯•å¸¦æ¥äº†ä¸€äº›å›°éš¾ï¼‰ã€‚</p><p>â€‹       flutterçš„æ³¨å†Œç›‘å¬äº‹ä»¶çš„é€»è¾‘æ˜¯ï¼Œå‘ä¸€ä¸ªListä¸­addä½ æƒ³è¦ç›‘å¬äº‹ä»¶çš„ç›‘å¬å™¨ï¼ˆä¸å¤„ç†å‡½æ•°ï¼‰ï¼Œè°ƒç”¨<code>FlutterP2pPlus.register()</code>é€šè¿‡<code>Platformchannel</code>å¯¹åŸç”Ÿè¿›è¡Œæ“ä½œï¼ˆæ›´å‡†ç¡®åœ°è¯´ï¼Œ<code>methodChannel</code>)ï¼ŒåŒæ ·åœ°ï¼Œç¨‹åºè¦åœ¨<code>initState</code>æ—¶å®Œæˆæ³¨å†Œå¹¶<code>addObserver</code>ï¼Œ<code>dispose</code>æ—¶è§£ç»‘æ‰€æœ‰ç›‘å¬å™¨é‡Šæ”¾èµ„æºå¹¶<code>removeObserver</code>ï¼Œè¿™ä¸¤ä¸ª<code>Observer</code>æ–¹æ³•æ˜¯é€šè¿‡å½“å‰ç±»ç»§æ‰¿<code>WidgetsBindingObserver</code>å®ç°çš„ã€‚</p><p>â€‹        å½“ç„¶æˆ‘ä¹Ÿå¾ˆå¥½å¥‡è¿™ä¸ªç±»é‡Œé¢éƒ½å®šä¹‰äº†ä»€ä¹ˆã€‚äºæ˜¯æˆ‘çœ‹äº†ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„æºç ï¼ˆæ—¶é—´æœ‰é™ï¼Œåªèƒ½å…ˆçœ‹è¿™äº›ï¼‰ã€‚</p><p>æºç çš„æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;WidgetsBindingObserver&gt; _observers = &lt;WidgetsBindingObserver&gt;[];</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown">Registers the given object as a binding observer. Binding</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">observers are notified when various application events occur,</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">for example when the system locale changes. Generally, one</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">widget in the widget tree registers itself as a binding</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">observer, and converts the system state into inherited widgets.</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown">For example, the [WidgetsApp] widget registers as a binding</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">observer and passes the screen size to a [MediaQuery] widget</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">each time it is built, which enables other widgets to use the</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">[MediaQuery.of] static method and (implicitly) the</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">[InheritedWidget] mechanism to be notified whenever the screen</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">size changes (e.g. whenever the screen rotates).</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown">See also:</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet"> *</span> [removeObserver], to release the resources reserved by this method.</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet"> *</span> [WidgetsBindingObserver], which has an example of using this method.</span></span></span><br><span class="line"><span class="keyword">void</span> addObserver(WidgetsBindingObserver observer) =&gt; _observers.add(observer);</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown">Unregisters the given observer. This should be used sparingly as</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">it is relatively expensive (O(N) in the number of registered</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">observers).</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown">See also:</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet"> *</span> [addObserver], for the method that adds observers in the first place.</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet"> *</span> [WidgetsBindingObserver], which has an example of using this method.</span></span></span><br><span class="line"><span class="built_in">bool</span> removeObserver(WidgetsBindingObserver observer) =&gt; _observers.remove(observer);</span><br></pre></td></tr></table></figure><p>â€‹        å¯ä»¥çœ‹åˆ°å…¶å®è¿™ä¸¤ä¸ªå‡½æ•°åªæ˜¯å¯¹ä¸€ä¸ªæ³›å‹ä¸º<code>WidgetsBindingObserver</code>çš„<code>List</code>è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªç±»åˆå¯¹è¿™ä¸ªListåšäº†ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ</p><p>â€‹        äº‹å®ä¸Šï¼Œè¿™ä¸ªç±»é€šè¿‡<code>mixin WidgetsBinding on BindingBase, ServicesBinding, SchedulerBinding, GestureBinding, RendererBinding, SemanticsBinding </code>å°†<code>List</code>ä¸­çš„<code>widget layer</code>ä¸<code>flutter engine</code>è¿›è¡Œè¿é€šã€‚</p><p>â€‹        æ­¤æ—¶å°±ä¸å¾—ä¸æ¥ä¸€å¼ flutteræ¶æ„å›¾ï¼š</p><p><img src="1.png" alt=""></p><p>â€‹        Layerä½œä¸ºç»˜åˆ¶äº§ç‰©çš„æŒæœ‰è€…ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å¯ä»¥åœ¨ä¸åŒçš„frameä¹‹é—´å¤ç”¨ç»˜åˆ¶äº§ç‰©ï¼ˆå¦‚æœæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼‰ä¸åˆ’åˆ†ç»˜åˆ¶è¾¹ç•Œï¼Œç¼©å°é‡ç»˜èŒƒå›´ï¼Œè·Ÿ<code>engine</code>æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><p>â€‹        å¦‚æœæ³¨æ„åˆ°è¿™ä¸€å¥ï¼Œä½ å¯èƒ½ä¼šæœ‰ç­”æ¡ˆï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which enables other widgets to use the[MediaQuery.of] <span class="keyword">static</span> method and (implicitly) the [InheritedWidget] mechanism to be notified whenever the screen size changes .</span><br></pre></td></tr></table></figure><p>â€‹        è¯´ç™½äº†ï¼ŒçŠ¶æ€ç®¡ç†ã€‚</p><p>ï¼ˆ<a href="https://www.sunmoonblog.com/2019/12/23/dart-mixin/"><code>dart</code>å…³é”®å­—ï¼Œ<code>mixin</code> ä¸ <code>on</code></a> ï¼‰</p><h1>å‚è€ƒ</h1><blockquote><p><a href="https://zhuanlan.zhihu.com/p/300975829">WIFI Directæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</a></p><p><a href="https://www.jianshu.com/p/2a70861fd0fa">LayoutInflater</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>opencv_basic</title>
      <link href="/2022/02/26/opencv-basic/"/>
      <url>/2022/02/26/opencv-basic/</url>
      
        <content type="html"><![CDATA[<h1>å›¾åƒåŸºæœ¬æ“ä½œ</h1><h2 id="è¯»å–å›¾åƒ">è¯»å–å›¾åƒ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retval =cv2.imread (filename[,flags])</span><br></pre></td></tr></table></figure><img src="imread.png" style="zoom: 80%;" /><p>å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå¦‚ï¼š</p><img src="51.png" style="zoom: 70%;" /><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚</p><h2 id="æ˜¾ç¤ºå›¾åƒ">æ˜¾ç¤ºå›¾åƒ</h2><img src="imshow.png" style="zoom: 100%;" /><p>åœ¨æ˜¾ç¤ºå›¾åƒä¸­ï¼Œè¿˜æ¶‰åŠå…¶ä»–å‡½æ•°</p><img src="waitkey.png" style="zoom: 80%;" /><img src="destroyWindow.png" style="zoom: 80%;" /><p>ä»¥ä¸‹çš„å¾ˆå¤šä¾‹å­é‡Œéƒ½ä¼šè§åˆ°è¿™å‡ ä¸ªå‡½æ•°</p><h2 id="ä¿å­˜å›¾åƒ">ä¿å­˜å›¾åƒ</h2><img src="imwrite.png" style="zoom: 80%;" /><h1>å›¾åƒå¤„ç†åŸºç¡€</h1><h2 id="åŸºæœ¬å›¾åƒ">åŸºæœ¬å›¾åƒ</h2><h3 id="äºŒå€¼å›¾">äºŒå€¼å›¾</h3><p>ä»…åŒ…å«é»‘è‰²å’Œç™½è‰²ï¼Œç”¨01è¿›è¡Œè¡¨ç¤ºã€‚</p><h3 id="ç°åº¦å›¾">ç°åº¦å›¾</h3><p><strong>å¯ä»¥åœ¨è¯»å–æ—¶å°†å‚æ•°è®¾ä¸º0ï¼Œå³ä¸ºç°åº¦å›¾</strong></p><p>â€‹        é€šå¸¸ï¼Œ è®¡ç®—æœºä¼šå°†ç°åº¦å¤„ç†ä¸º256ä¸ªç°åº¦çº§ï¼Œ ç”¨æ•°å€¼åŒºé—´[0,255]æ¥è¡¨ç¤ºã€‚ å…¶ä¸­ï¼Œ æ•°å€¼â€255â€è¡¨ç¤ºçº¯ç™½è‰²ï¼Œ æ•°å€¼â€0â€è¡¨ç¤ºçº¯é»‘è‰²ï¼Œ å…¶ä½™çš„æ•°å€¼è¡¨ç¤ºä»çº¯ç™½åˆ°çº¯é»‘ä¹‹é—´ä¸åŒçº§åˆ«çš„ç°åº¦ã€‚ç”¨äºè¡¨ç¤º256ä¸ªç°åº¦çº§çš„æ•°å€¼0~255, æ­£å¥½å¯ä»¥ç”¨ä¸€ä¸ªå­—èŠ‚(8ä½äºŒè¿›åˆ¶å€¼ï¼‰æ¥è¡¨ç¤ºã€‚ <strong>æ‰€ä»¥ç°åº¦å›¾ä¸€å®šæ˜¯å•é€šé“çš„</strong></p><h3 id="å½©å›¾ï¼ˆä»¥RGBè‰²å½©ç©ºé—´ä¸ºä¾‹ï¼‰">å½©å›¾ï¼ˆä»¥RGBè‰²å½©ç©ºé—´ä¸ºä¾‹ï¼‰</h3><p><strong>è¯»å–æ—¶å‚æ•°ä¸º1ï¼Œæˆ–è€…çœç•¥</strong></p><p>â€‹       åœ¨ RGB è‰²å½©ç©ºé—´ä¸­ï¼Œ å­˜åœ¨ R (red, çº¢è‰²ï¼‰é€šé“ã€ G (green, ç»¿è‰²ï¼‰é€šé“å’Œ B (blue, è“è‰²ï¼‰é€š<br>é“ï¼Œ å…±ä¸‰ä¸ªé€šé“ã€‚ æ¯ä¸ªè‰²å½©é€šé“å€¼çš„èŒƒå›´éƒ½åœ¨[0,255]ä¹‹é—´ ï¼Œ æˆ‘ä»¬ç”¨è¿™ä¸‰ä¸ªè‰²å½©é€šé“çš„ç»„åˆè¡¨ç¤ºé¢œè‰²ã€‚<br>ä»¥æ¯”è¾ƒé€šä¿—çš„æ–¹å¼æ¥è§£é‡Šå°±æ˜¯ï¼Œ æœ‰ä¸‰ä¸ªæ²¹æ¼†æ¡¶ï¼Œ åˆ†åˆ«è£…äº†çº¢è‰²ã€ ç»¿è‰²ã€ è“è‰²çš„æ²¹æ¼†ï¼Œ æˆ‘ä»¬åˆ†åˆ«ä»æ¯ä¸ªæ²¹æ¼†æ¡¶ä¸­å–å®¹æ˜Ÿä¸º0~255ä¸ªå•ä½çš„ä¸ç­‰æ˜Ÿçš„æ²¹æ¼†ï¼Œ å°†ä¸‰ç§æ²¹æ¼†æ··åˆå°±å¯ä»¥è°ƒé…å‡ºä¸€ç§æ–°çš„é¢œè‰²ã€‚ä¸‰ç§æ²¹æ¼†ç»è¿‡ä¸åŒçš„ç»„åˆï¼Œ å…±å¯ä»¥è°ƒé…å‡ºæ‰€æœ‰å¸¸è§çš„256x256x256=16 777 216ç§é¢œè‰²ã€‚</p><p>â€‹       é€šå¸¸ç”¨ä¸€ä¸ªä¸‰ç»´æ•°ç»„æ¥è¡¨ç¤ºä¸€å¹…RGBè‰²å½©ç©ºé—´çš„å½©è‰²å›¾åƒã€‚ä¸€èˆ¬æƒ…å†µä¸‹ ï¼Œ åœ¨RGBè‰²å½©ç©ºé—´ä¸­ï¼Œ å›¾åƒé€šé“çš„é¡ºåºæ˜¯Râ”Gâ”B, å³ç¬¬1ä¸ªé€šé“æ˜¯Ré€šé“ ï¼Œ ç¬¬2ä¸ªé€šé“æ˜¯Gé€šé“ï¼Œ ç¬¬3ä¸ªé€šé“æ˜¯Bé€šé“ã€‚ <strong>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ åœ¨OpenCVä¸­ï¼Œ é€šé“çš„é¡ºåºæ˜¯Bâ”Gâ”R</strong>ã€‚</p><h2 id="åƒç´ å¤„ç†">åƒç´ å¤„ç†</h2><p>â€‹        éœ€è¦è¯´æ˜çš„æ˜¯ ï¼Œ åœ¨OpenCVä¸­ï¼Œ æœ€å°çš„æ•°æ®ç±»å‹æ˜¯æ— ç¬¦å·çš„8ä½æ•°ã€‚ å› æ­¤ ï¼Œ åœ¨OpenCVä¸­å®é™…ä¸Šå¹¶æ²¡æœ‰äºŒå€¼å›¾åƒè¿™ç§æ•°æ®ç±»å‹ï¼Œ äºŒå€¼å›¾åƒç»å¸¸æ˜¯é€šè¿‡å¤„ç†å¾—åˆ°çš„ ï¼Œ ç„¶åä½¿ç”¨0è¡¨ç¤ºé»‘è‰²ï¼Œ ä½¿ç”¨255è¡¨ç¤ºç™½è‰²ã€‚</p><p>â€‹        å¯ä»¥å°†äºŒå€¼å›¾åƒç†è§£ä¸ºç‰¹æ®Šçš„ç°åº¦å›¾åƒï¼Œ è¿™é‡Œä»…ä»¥ç°åº¦å›¾åƒä¸ºä¾‹è®¨è®ºåƒç´ çš„è¯»å–å’Œä¿®æ”¹ã€‚ é€šè¿‡2.1èŠ‚çš„åˆ†æå¯çŸ¥ï¼Œ å¯ä»¥å°†å›¾åƒç†è§£ä¸ºä¸€ä¸ªçŸ©é˜µï¼Œåœ¨é¢å‘Pythonçš„OpenCV(Open CV for Python)ä¸­ï¼Œ<strong>å›¾åƒå°±æ˜¯ Numpy åº“ä¸­çš„æ•°ç»„</strong>ã€‚ ä¸€ä¸ª OpenCV ç°åº¦å›¾åƒæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œ å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼è®¿é—´å…¶ä¸­çš„åƒç´ å€¼ã€‚ ä¾‹å¦‚ï¼Œ å¯ä»¥ä½¿ç”¨image[0,0]è®¿é—´å›¾åƒimageç¬¬0è¡Œç¬¬0åˆ—ä½ç½®ä¸Šçš„åƒç´ ç‚¹ã€‚ ç¬¬0è¡Œç¬¬0åˆ—ä½äºå›¾åƒçš„å·¦ä¸Šè§’ ï¼Œ å…¶ä¸­ç¬¬1ä¸ªç´¢å¼•è¡¨ç¤ºç¬¬0è¡Œï¼Œ ç¬¬2ä¸ªç´¢å¼•è¡¨ç¤ºç¬¬0åˆ—ã€‚</p><p>â€‹         åŒæ ·åœ°ï¼Œå½©å›¾å°±æ˜¯ä¸‰ç»´æ•°ç»„ï¼Œåˆ†åˆ«æ˜¯BGRä¸‰ä¸ªäºŒç»´æ•°ç»„ã€‚ï¼ˆRGBè‰²å½©ç©ºé—´ï¼‰ã€‚</p><img src="0.png" style="zoom: 80%;" /><p>è¿™éƒ¨åˆ†å»ºè®®å¤šå­¦numpyã€‚</p><h2 id="é€šé“æ“ä½œï¼ˆåŸºäºRGBï¼‰">é€šé“æ“ä½œï¼ˆåŸºäºRGBï¼‰</h2><h3 id="é€šé“æ‹†åˆ†">é€šé“æ‹†åˆ†</h3><h4 id="é€šè¿‡ç´¢å¼•æ‹†åˆ†-numpy">é€šè¿‡ç´¢å¼•æ‹†åˆ†(numpy)</h4><p>å¦‚ä¸‹è¯­å¥åˆ†åˆ«ä»ä¸­æå–äº†Bé€šé“ã€ Gé€šé“ã€ Ré€šé“ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b=img[: ,: ,O]</span><br><span class="line">g=img[: ,: ,<span class="number">1</span>]</span><br><span class="line">r=img[: ,: ,<span class="number">2</span>] </span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡å‡½æ•°æ‹†åˆ†">é€šè¿‡å‡½æ•°æ‹†åˆ†</h4><p>å‡½æ•°<code>cv2.split()</code>èƒ½å¤Ÿæ‹†åˆ†å›¾åƒçš„é€šé“ã€‚ ä¾‹å¦‚ï¼Œ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­å¥æ‹†åˆ†å½©è‰²BGRå›¾åƒimg, å¾—åˆ°Bé€šé“å›¾åƒbã€ Gé€šé“å›¾åƒgå’ŒRé€šé“å›¾åƒrã€‚</p><p><code>b,g,r=cv2.split (img) </code></p><p>ä¸Šè¿°è¯­å¥ä¸å¦‚ä¸‹è¯­å¥æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b = cv2.split (a) [<span class="number">0</span>]</span><br><span class="line">g = cv2.split (a) [<span class="number">1</span>]</span><br><span class="line">r = cv2.split (a) [<span class="number">2</span>]</span><br></pre></td></tr></table></figure><h3 id="é€šé“åˆå¹¶">é€šé“åˆå¹¶</h3><p>é€šé“åˆå¹¶æ˜¯é€šé“æ‹†åˆ†çš„é€†è¿‡ç¨‹ï¼Œ é€šè¿‡åˆå¹¶é€šé“å¯ä»¥å°†ä¸‰ä¸ªé€šé“çš„ç°åº¦å›¾åƒæ„æˆä¸€å¹…å½©è‰²å›¾åƒã€‚ å‡½æ•°cv2.merge(ï¼‰å¯ä»¥å®ç°å›¾åƒé€šé“çš„åˆå¹¶ï¼Œ ä¾‹å¦‚æœ‰Bé€šé“å›¾åƒbã€ Gé€šé“å›¾åƒgå’ŒRé€šé“å›¾åƒr, ä½¿ç”¨å‡½æ•°<code>cv2.merge()</code>å¯ä»¥å°†è¿™ä¸‰ä¸ªé€šé“åˆå¹¶ä¸ºä¸€å¹…BGRçš„ä¸‰é€šé“å½©è‰²å›¾åƒã€‚ å…¶å®ç°çš„è¯­å¥ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bgr=cv2.merge ([b,g,r]) </span><br></pre></td></tr></table></figure><p>å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>)</span><br><span class="line">    b, g, r = cv2.split(src)</span><br><span class="line">    bgr = cv2.merge([b, g, r])</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>,bgr)</span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><h2 id="å›¾åƒå±æ€§">å›¾åƒå±æ€§</h2><p>åœ¨å›¾åƒå¤„ç†è¿‡ç¨‹ä¸­ï¼Œ ç»å¸¸éœ€è¦è·å–å›¾åƒçš„å±æ€§ï¼Œ ä¾‹å¦‚å›¾åƒçš„å¤§å°ã€‚</p><ul><li><p>shape: å¦‚æœæ˜¯å½©è‰²å›¾åƒï¼Œ åˆ™è¿”å›åŒ…å«è¡Œæ•° åˆ—æ•° é€šé“æ•°çš„æ•°ç»„ï¼›å¦‚æœæ˜¯äºŒå€¼å›¾åƒæˆ–è€…ç°åº¦å›¾åƒï¼Œ åˆ™ä»…è¿”å›è¡Œæ•°å’Œåˆ—æ•°ã€‚ é€šè¿‡è¯¥å±æ€§çš„è¿”å›å€¼æ˜¯å¦åŒ…å«é€šé“æ•°ï¼Œ å¯ä»¥åˆ¤æ–­ä¸€å¹…å›¾åƒæ˜¯ç°åº¦å›¾åƒï¼ˆæˆ–äºŒå€¼å›¾åƒï¼‰è¿˜æ˜¯å½©è‰²å›¾åƒã€‚</p></li><li><p>sizeï¼šè¿”å›å›¾åƒçš„åƒç´ æ•°ç›®ã€‚ å…¶å€¼ä¸ºè¡Œxåˆ—xé€šé“æ•°â€ï¼Œ ç°åº¦å›¾åƒæˆ–è€…äºŒå€¼å›¾åƒçš„é€šé“æ•°ä¸º1ã€‚</p></li></ul><h1>å›¾åƒè¿ç®—</h1><h2 id="åŠ æ³•">åŠ æ³•</h2><h3 id="åŠ å·è¿ç®—ç¬¦">åŠ å·è¿ç®—ç¬¦</h3><img src="1.png" style="zoom: 80%;" /><h3 id="add-å‡½æ•°"><code>add()</code>å‡½æ•°</h3><img src="2.png" style="zoom: 80%;" /><img src="3.png" style="zoom: 80%;" /><h3 id="åŠ æƒå’Œ">åŠ æƒå’Œ</h3><img src="4.png" style="zoom: 80%;" /><h2 id="æŒ‰ä½é€»è¾‘">æŒ‰ä½é€»è¾‘</h2><h3 id="æŒ‰ä½ä¸">æŒ‰ä½ä¸</h3><img src="5.png" style="zoom: 80%;" /><p>ä»»ä½•æ•°ä¸0éƒ½æ˜¯0ï¼Œä¸255åˆ™ä¸å˜ï¼Œéƒ½æ˜¯äºŒè¿›åˆ¶çš„æŒ‰ä½ä¸</p><h3 id="æŒ‰ä½æˆ–ä¸æŒ‰ä½éã€æŒ‰ä½å¼‚æˆ–">æŒ‰ä½æˆ–ä¸æŒ‰ä½éã€æŒ‰ä½å¼‚æˆ–</h3><p>ä¸æŒ‰ä½ä¸ç±»ä¼¼ã€‚</p><p>æŒ‰ä½æˆ–ï¼š<code>dst = cv2.bitwise_or(src[,mask])</code></p><p>æŒ‰ä½éï¼š<code>dst = cv2.bitwise_not(src[,mask])</code></p><p>æŒ‰ä½å¼‚æˆ–ï¼š<code>dst = cv2.bitwise_xor(src[,mask])</code></p><h3 id="æ©æ¨¡">æ©æ¨¡</h3><img src="6.png" style="zoom: 80%;" /><p>å¯ä»¥ç†è§£ä¸ºç»“æœåœ¨è¿”å›å‰ä¸æ©æ¨¡è¿›è¡Œäº†æŒ‰ä½ä¸ã€‚</p><h2 id="å›¾åƒä¸æ•°å€¼çš„è¿ç®—">å›¾åƒä¸æ•°å€¼çš„è¿ç®—</h2><img src="7.png" style="zoom: 80%;" /><h2 id="ä½å¹³é¢åˆ†è§£ä¸å…¶åº”ç”¨">ä½å¹³é¢åˆ†è§£ä¸å…¶åº”ç”¨</h2><img src="8.png" style="zoom: 80%;" /><p>ä¾‹å­ï¼š</p><img src="9.png" style="zoom: 80%;" /><h3 id="åº”ç”¨ï¼šåŠ è§£å¯†ä¸æ•°å­—æ°´å°">åº”ç”¨ï¼šåŠ è§£å¯†ä¸æ•°å­—æ°´å°</h3><p>åŠ è§£å¯†æ˜¯ä½¿ç”¨å¯†é’¥å›¾åƒå¯¹åŸå›¾è¿›è¡Œä½è¿ç®—ï¼Œæ•°å­—æ°´å°æ˜¯åœ¨æœ€ä½ä½å¹³é¢åµŒå…¥ä¿¡æ¯ï¼Œå› ä¸ºè¿™æ ·å¯¹åŸå›¾å½±å“æœ€å°ã€‚</p><p>è¿™é‡Œä»…ä»‹ç»äº†åŸå§‹è½½ä½“å›¾åƒä¸ºç°åº¦å›¾åƒçš„æƒ…å†µï¼Œåœ¨å®é™…ä¸­å¯ä»¥æ ¹æ®éœ€è¦åœ¨å¤šä¸ªé€šé“å†…åµŒå…¥ç›¸åŒçš„æ°´å°ï¼ˆæé«˜é²æ£’æ€§ï¼Œå³ä½¿éƒ¨åˆ†æ°´å°ä¸¢å¤±ï¼Œä¹Ÿèƒ½æå–å‡ºå®Œæ•´æ°´å°ä¿¡æ¯ï¼‰ï¼Œæˆ–åœ¨å„ä¸ªä¸åŒçš„é€šé“å†…åµŒå…¥ä¸åŒçš„æ°´å°ï¼ˆæé«˜åµŒå…¥å®¹é‡ï¼‰ã€‚åœ¨å½©è‰²å›¾åƒçš„å¤šä¸ªé€šé“å†…åµŒå…¥æ°´å°çš„æ–¹æ³•ï¼Œä¸åœ¨ç°åº¦å›¾åƒå†…åµŒå…¥æ°´å°çš„æ–¹æ³•ç›¸åŒã€‚</p><h1>è‰²å½©ç©ºé—´</h1><p>RGBæ˜¯å¸¸è§çš„è‰²å½©è¡¨ç¤ºæ–¹æ³•ï¼Œä½†å¯¹äºäººçœ¼æ¥è®²ï¼Œå¾ˆéš¾ç›´è§‚åœ°å°†ä¸€ç§è‰²å½©çš„RGBåŒºåˆ†å¼€æ¥ï¼Œå¹¶ä¸”åœ¨è®¡ç®—æœºå¤„ç†è‰²å½©æ—¶ï¼Œä¹Ÿæœ‰å¾ˆå¤šå…¶ä»–çš„é¢œè‰²è¡¨ç°å½¢å¼ï¼Œè¿™å°±å½¢æˆäº†è‰²å½©ç©ºé—´ã€‚</p><h2 id="è‰²å½©ç©ºé—´ä¸¾ä¾‹">è‰²å½©ç©ºé—´ä¸¾ä¾‹</h2><p>1ï¼‰RGBé¢œè‰²ç©ºé—´</p><p>RGBï¼ˆçº¢ç»¿è“ï¼‰æ˜¯ä¾æ®äººçœ¼è¯†åˆ«çš„é¢œè‰²å®šä¹‰å‡ºçš„ç©ºé—´ï¼Œå¯è¡¨ç¤ºå¤§éƒ¨åˆ†é¢œè‰²ã€‚ä½†åœ¨ç§‘å­¦ç ”ç©¶ä¸€èˆ¬ä¸é‡‡ç”¨RGBé¢œè‰²ç©ºé—´ï¼Œå› ä¸ºå®ƒçš„ç»†èŠ‚éš¾ä»¥è¿›è¡Œæ•°å­—åŒ–çš„è°ƒæ•´ã€‚å®ƒå°†è‰²è°ƒï¼Œäº®åº¦ï¼Œé¥±å’Œåº¦ä¸‰ä¸ªé‡æ”¾åœ¨ä¸€èµ·è¡¨ç¤ºï¼Œå¾ˆéš¾åˆ†å¼€ã€‚å®ƒæ˜¯æœ€é€šç”¨çš„é¢å‘ç¡¬ä»¶çš„å½©è‰²æ¨¡å‹ã€‚è¯¥æ¨¡å‹ç”¨äºå½©è‰²ç›‘è§†å™¨å’Œä¸€å¤§ç±»å½©è‰²è§†é¢‘æ‘„åƒã€‚</p><img src="rgb_color_space.jpg" alt="rgb_color_space" style="zoom:50%;" /><p>2ï¼‰CMY/CMYKé¢œè‰²ç©ºé—´</p><p>CMYæ˜¯å·¥ä¸šå°åˆ·é‡‡ç”¨çš„é¢œè‰²ç©ºé—´ã€‚å®ƒä¸RGBå¯¹åº”ã€‚ç®€å•çš„ç±»æ¯”RGBæ¥æºäºæ˜¯ç‰©ä½“å‘å…‰ï¼Œè€ŒCMYæ˜¯ä¾æ®<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%E5%8F%8D%E5%B0%84%E5%85%89">åå°„å…‰</a>å¾—åˆ°çš„ã€‚å…·ä½“åº”ç”¨å¦‚æ‰“å°æœºï¼šä¸€èˆ¬é‡‡ç”¨å››è‰²å¢¨ç›’ï¼Œå³CMYåŠ é»‘è‰²å¢¨ç›’</p><p>3ï¼‰HSV/HSBé¢œè‰²ç©ºé—´</p><p>HSVé¢œè‰²ç©ºé—´æ˜¯ä¸ºäº†æ›´å¥½çš„æ•°å­—åŒ–å¤„ç†é¢œè‰²è€Œæå‡ºæ¥çš„ã€‚æœ‰è®¸å¤šç§HSXé¢œè‰²ç©ºé—´ï¼Œå…¶ä¸­çš„Xå¯èƒ½æ˜¯V,ä¹Ÿå¯èƒ½æ˜¯Iï¼Œä¾æ®å…·ä½“ä½¿ç”¨è€ŒXå«ä¹‰ä¸åŒã€‚Hæ˜¯è‰²è°ƒï¼ŒSæ˜¯é¥±å’Œåº¦ï¼ŒIæ˜¯å¼ºåº¦ã€‚HSBï¼ˆHue, Saturation, Brightnessï¼‰é¢œè‰²æ¨¡å‹ï¼Œè¿™ä¸ªé¢œè‰²æ¨¡å‹å’ŒHSLé¢œè‰²æ¨¡å‹åŒæ ·éƒ½æ˜¯ç”¨æˆ·å°å¼æœºå›¾å½¢ç¨‹åºçš„é¢œè‰²è¡¨ç¤ºï¼Œ ç”¨å…­è§’å½¢é”¥ä½“è¡¨ç¤ºè‡ªå·±çš„é¢œè‰²æ¨¡å‹ã€‚</p><p><img src="hsv_color_space.jpg" alt="hsv_color_space"></p><img src="11.png" style="zoom: 80%;" /><p>4ï¼‰HSI/HSLé¢œè‰²ç©ºé—´</p><p>HSIé¢œè‰²ç©ºé—´æ˜¯ä¸ºäº†æ›´å¥½çš„æ•°å­—åŒ–å¤„ç†é¢œè‰²è€Œæå‡ºæ¥çš„ã€‚æœ‰è®¸å¤šç§HSXé¢œè‰²ç©ºé—´ï¼Œå…¶ä¸­çš„Xå¯èƒ½æ˜¯V,ä¹Ÿå¯èƒ½æ˜¯Iï¼Œä¾æ®å…·ä½“ä½¿ç”¨è€ŒXå«ä¹‰ä¸åŒã€‚Hæ˜¯è‰²è°ƒï¼ŒSæ˜¯é¥±å’Œåº¦ï¼ŒIæ˜¯å¼ºåº¦ã€‚HSLï¼ˆHue, Saturation, Lightnessï¼‰é¢œè‰²æ¨¡å‹ï¼Œè¿™ä¸ªé¢œè‰²æ¨¡å‹éƒ½æ˜¯ç”¨æˆ·å°å¼æœºå›¾å½¢ç¨‹åºçš„é¢œè‰²è¡¨ç¤ºï¼Œ ç”¨å…­è§’å½¢é”¥ä½“è¡¨ç¤ºè‡ªå·±çš„é¢œè‰²æ¨¡å‹ã€‚</p><img src="hsi_color_space.jpg" alt="hsi_color_space" style="zoom:67%;" /><p>5ï¼‰Labé¢œè‰²ç©ºé—´</p><p><a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/Lab%E9%A2%9C%E8%89%B2%E6%A8%A1%E5%9E%8B">Labé¢œè‰²æ¨¡å‹</a>æ˜¯ç”±CIEï¼ˆ<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%E5%9B%BD%E9%99%85%E7%85%A7%E6%98%8E%E5%A7%94%E5%91%98%E4%BC%9A">å›½é™…ç…§æ˜å§”å‘˜ä¼š</a>ï¼‰åˆ¶å®šçš„ä¸€ç§è‰²å½©æ¨¡å¼ã€‚è‡ªç„¶ç•Œä¸­ä»»ä½•ä¸€ç‚¹è‰²éƒ½å¯ä»¥åœ¨Labç©ºé—´ä¸­è¡¨è¾¾å‡ºæ¥ï¼Œå®ƒçš„<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4">è‰²å½©ç©ºé—´</a>æ¯”RGBç©ºé—´è¿˜è¦å¤§ã€‚å¦å¤–ï¼Œè¿™ç§æ¨¡å¼æ˜¯ä»¥æ•°å­—åŒ–æ–¹å¼æ¥æè¿°äººçš„è§†è§‰æ„Ÿåº”ï¼Œ ä¸è®¾å¤‡æ— å…³ï¼Œæ‰€ä»¥å®ƒå¼¥è¡¥äº†RGBå’ŒCMYKæ¨¡å¼å¿…é¡»ä¾èµ–äºè®¾å¤‡è‰²å½©ç‰¹æ€§çš„ä¸è¶³ã€‚ç”±äºLabçš„è‰²å½©ç©ºé—´è¦æ¯”RGBæ¨¡å¼å’ŒCMYKæ¨¡å¼çš„è‰²å½©ç©ºé—´å¤§ã€‚è¿™å°±æ„å‘³ç€RGBä»¥åŠCMYKæ‰€èƒ½æè¿°çš„è‰²å½©ä¿¡æ¯åœ¨Labç©ºé—´ä¸­éƒ½èƒ½ å¾—ä»¥å½±å°„ã€‚<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/Lab%E9%A2%9C%E8%89%B2%E6%A8%A1%E5%9E%8B">Labé¢œè‰²æ¨¡å‹</a>å–åæ ‡Labï¼Œå…¶ä¸­Läº®åº¦ï¼›açš„æ­£æ•°ä»£è¡¨çº¢è‰²ï¼Œè´Ÿç«¯ä»£è¡¨ç»¿è‰²ï¼›bçš„æ­£æ•°ä»£è¡¨é»„è‰²ï¼Œ è´Ÿç«¯ä»£è¡¨å…°è‰²(a,b)æœ‰L=116f(y)-16, a=500[f(x/0.982)-f(y)], b=200[f(y)-f(z/1.183 )]ï¼›å…¶ä¸­ï¼š f(x)=7.787x+0.138, x&lt;0.008856; f(x)=(x)1/3,x&gt;0.008856</p><img src="lab_color_space.jpg" alt="lab_color_space" style="zoom:50%;" /><p>6ï¼‰YUV/YCbCré¢œè‰²ç©ºé—´</p><p>YUVæ˜¯é€šè¿‡äº®åº¦-è‰²å·®æ¥æè¿°é¢œè‰²çš„é¢œè‰²ç©ºé—´ã€‚</p><p>äº®åº¦ä¿¡å·ç»å¸¸è¢«ç§°ä½œYï¼Œè‰²åº¦ä¿¡å·æ˜¯ç”±ä¸¤ä¸ªäº’ç›¸ç‹¬ç«‹çš„ä¿¡å·ç»„æˆã€‚è§†<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%E9%A2%9C%E8%89%B2%E7%B3%BB%E7%BB%9F">é¢œè‰²ç³»ç»Ÿ</a>å’Œæ ¼å¼ä¸åŒï¼Œä¸¤ç§è‰²åº¦ä¿¡å·ç»å¸¸è¢«ç§°ä½œUVæˆ–PbPræˆ–CbCrã€‚è¿™äº›éƒ½æ˜¯ç”±ä¸åŒçš„ç¼–ç æ ¼å¼æ‰€äº§ç”Ÿçš„ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œä»–ä»¬çš„æ¦‚å¿µåŸºæœ¬ç›¸åŒã€‚åœ¨DVDä¸­ï¼Œè‰²åº¦ä¿¡å·è¢«å­˜å‚¨æˆCbå’ŒCrï¼ˆCä»£è¡¨é¢œè‰²ï¼Œbä»£è¡¨è“è‰²ï¼Œrä»£è¡¨çº¢è‰²ï¼‰ã€‚</p><p>YCbCrï¼š</p><img src="10.png" style="zoom: 80%;" /><h2 id="è‰²å½©ç©ºé—´è½¬æ¢">è‰²å½©ç©ºé—´è½¬æ¢</h2><img src="12.png" style="zoom: 80%;" /><img src="13.png" style="zoom: 80%;" /><img src="14.png" style="zoom: 80%;" /><img src="15.png" style="zoom: 80%;" /><p>ç­‰ç­‰</p><h2 id="alphaé€šé“">alphaé€šé“</h2><p>åœ¨RGBè‰²å½©ç©ºé—´ä¸‰ä¸ªé€šé“çš„åŸºç¡€ä¸Š ï¼Œè¿˜å¯ä»¥åŠ ä¸Šä¸€ä¸ªAé€šé“ï¼Œä¹Ÿå«alphaé€šé“ï¼Œè¡¨ç¤ºé€æ˜åº¦ã€‚è¿™ç§4 ä¸ªé€šé“çš„è‰²å½©ç©ºé—´è¢«ç§°ä¸ºRGBAè‰²å½©ç©ºé—´ï¼ŒPNGå›¾åƒæ˜¯ä¸€ç§å…¸å‹çš„4é€šé“å›¾åƒã€‚alpha é€šé“çš„èµ‹å€¼èŒƒå›´æ˜¯[0,1]ï¼Œ æˆ–è€…[0,255]ï¼Œ è¡¨ç¤ºä»é€æ˜åˆ°ä¸é€æ˜ã€‚</p><h1>å‡ ä½•å˜æ¢</h1><p>ç•¥</p><h1>é˜ˆå€¼å¤„ç†</h1><p>é˜ˆå€¼å¤„ç†æ˜¯æŒ‡å‰”é™¤å›¾åƒå†…åƒç´ å€¼é«˜äºä¸€å®šå€¼æˆ–è€…ä½äºä¸€å®šå€¼çš„åƒç´ ç‚¹ã€‚</p><h2 id="é˜ˆå€¼åŒ–å¤„ç†">é˜ˆå€¼åŒ–å¤„ç†</h2><img src="16.png" style="zoom: 80%;" /><img src="17.png" style="zoom: 80%;" /><p>å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>,src)</span><br><span class="line">    ret,dst = cv2.threshold(src,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>,dst)</span><br><span class="line"></span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="52.png" style="zoom: 60%;" /><p>æˆ–è€…ï¼Œä¿®æ”¹ç›¸åº”å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret,dst = cv2.threshold(src,<span class="number">70</span>,<span class="number">150</span>,cv2.THRESH_BINARY)</span><br></pre></td></tr></table></figure><img src="53.png" style="zoom: 40%;" /><p>åäºŒå€¼åŒ–ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret,dst = cv2.threshold(src,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY_INV)</span><br></pre></td></tr></table></figure><img src="54.png" style="zoom: 60%;" /><h2 id="è‡ªé€‚åº”é˜ˆå€¼å¤„ç†">è‡ªé€‚åº”é˜ˆå€¼å¤„ç†</h2><p>å¯¹äºè‰²å½©å‡è¡¡çš„å›¾åƒï¼Œç›´æ¥ä½¿ç”¨ä¸€ä¸ªé˜ˆå€¼å°±èƒ½å®Œæˆå¯¹å›¾åƒçš„é˜ˆå€¼åŒ–å¤„ç†ã€‚ ä½†æ˜¯ï¼Œæœ‰æ—¶å›¾åƒçš„è‰²å½©æ˜¯ä¸å‡è¡¡çš„ï¼Œæ­¤æ—¶å¦‚æœåªä½¿ç”¨ä¸€ä¸ªé˜ˆå€¼ï¼Œå°±æ— æ³•å¾—åˆ°æ¸…æ™°æœ‰æ•ˆçš„é˜ˆå€¼åˆ†å‰²ç»“æœå›¾åƒã€‚</p><p>åœ¨è¿›è¡Œé˜ˆå€¼å¤„ç†æ—¶ï¼Œè‡ªé€‚åº”é˜ˆå€¼å¤„ç†çš„æ–¹å¼é€šè¿‡è®¡ç®—æ¯ä¸ªåƒç´ ç‚¹å‘¨å›´ä¸´è¿‘åŒºåŸŸçš„åŠ æƒå¹³å‡å€¼è·å¾—é˜ˆå€¼ï¼Œå¹¶ä½¿ç”¨è¯¥é—¯å€¼å¯¹å½“å‰åƒç´ ç‚¹è¿›è¡Œå¤„ç†ã€‚<strong>ä¸æ™®é€šçš„é˜ˆå€¼å¤„ç†æ–¹æ³•ç›¸æ¯”ï¼Œè‡ªé€‚åº”é˜ˆå€¼å¤„ç†èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†æ˜æš—å·®å¼‚è¾ƒå¤§çš„å›¾åƒ</strong>ã€‚</p><p><u><strong>å¤„ç†çš„å›¾åƒå¿…é¡»æ˜¯å…«ä½å•é€šé“å›¾åƒ ï¼ï¼</strong></u></p><img src="18.png" style="zoom: 80%;" /><img src="19.png" style="zoom: 80%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line">    dst = cv2.adaptiveThreshold(src, <span class="number">255</span>, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line"></span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="55.png" style="zoom: 60%;" /><h2 id="æœ€ä¼˜é˜ˆå€¼å‡½æ•°">æœ€ä¼˜é˜ˆå€¼å‡½æ•°</h2><p>å®é™…å¤„ç†çš„å›¾åƒå¾€å¾€æ˜¯å¾ˆå¤æ‚çš„ï¼Œ ä¸å¤ªå¯èƒ½åƒä¸Šè¿°imgé‚£æ · ï¼Œ ä¸€çœ¼å°±è§‚å¯Ÿå‡ºæœ€åˆé€‚çš„é˜ˆå€¼ã€‚ å¦‚æœä¸€ä¸ªä¸ªå»å°è¯•ï¼Œ å·¥ä½œé‡æ— ç–‘æ˜¯å·¨å¤§çš„ã€‚Otsuæ–¹æ³•èƒ½å¤Ÿæ ¹æ®å½“å‰å›¾åƒç»™å‡ºæœ€ä½³çš„ç±»é—´åˆ†å‰²é˜ˆå€¼ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œ <strong>Otsuæ–¹æ³•ä¼šéå†æ‰€æœ‰å¯èƒ½é˜ˆå€¼ï¼Œ ä»è€Œæ‰¾åˆ°æœ€ä½³çš„é˜ˆå€¼ã€‚</strong></p><p>åœ¨ OpenCV ä¸­ï¼Œ é€šè¿‡åœ¨å‡½æ•°<code> cv2.threshold ()</code>ä¸­å¯¹å‚æ•°<code> type</code> çš„ç±»å‹å¤šä¼ é€’ ä¸€ä¸ªå‚æ•° â€œcv2.THRESH_ OTSUâ€ ï¼Œ å³å¯å®ç°Otsuæ–¹å¼çš„é˜ˆå€¼åˆ†å‰²ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ <strong>åœ¨ä½¿ç”¨Otsuæ–¹æ³•æ—¶ï¼Œ è¦æŠŠé˜ˆå€¼è®¾ä¸º0ã€‚æ­¤æ—¶çš„å‡½æ•°<code>cv2.threshold()</code>ä¼šè‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜é˜ˆå€¼ï¼Œ å¹¶å°†è¯¥é˜ˆå€¼è¿”å›</strong>ã€‚</p><p><u><strong>å¤„ç†çš„å›¾åƒå¿…é¡»æ˜¯å…«ä½å•é€šé“å›¾åƒ ï¼ï¼</strong></u></p><img src="20.png" style="zoom: 80%;" /><ul><li>è®¾å®šçš„é˜ˆå€¼ä¸º0ã€‚</li><li>è¿”å›å€¼tæ˜¯Otsuæ–¹æ³•è®¡ç®—å¾—åˆ°å¹¶ä½¿ç”¨çš„æœ€ä¼˜é˜ˆå€¼ã€‚</li><li>éœ€è¦æ³¨æ„ï¼Œå¦‚æœé‡‡ç”¨æ™®é€šçš„é˜ˆå€¼åˆ†å‰²ï¼Œè¿”å›çš„é—¯å€¼å°±æ˜¯è®¾å®šçš„é˜ˆå€¼ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line">    t,dst = cv2.threshold(src, <span class="number">0</span>,<span class="number">255</span>, cv2.THRESH_BINARY+cv2.THRESH_OTSU)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line"></span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="56.png" style="zoom: 60%;" /><h1>å›¾åƒå¹³æ»‘å¤„ç†ï¼ˆæ»¤æ³¢ï¼‰</h1><p>å¦‚æœé’ˆå¯¹å›¾åƒå†…çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹éƒ½è¿›è¡Œä¸Šè¿°å¹³æ»‘å¤„ç†ï¼Œ å°±èƒ½å¤Ÿå¯¹æ•´å¹…å›¾åƒå®Œæˆå¹³æ»‘å¤„ç†ï¼Œ æœ‰æ•ˆåœ°å»é™¤å›¾åƒå†…çš„å™ªå£°ä¿¡æ¯ã€‚<strong>å›¾åƒå¹³æ»‘å¤„ç†çš„åŸºæœ¬åŸç†æ˜¯ï¼Œ å°†å™ªå£°æ‰€åœ¨åƒç´ ç‚¹çš„åƒç´ å€¼å¤„ç†ä¸ºå…¶å‘¨å›´ä¸´è¿‘åƒç´ ç‚¹çš„å€¼çš„è¿‘ä¼¼å€¼</strong>ã€‚</p><h2 id="å‡å€¼æ»¤æ³¢">å‡å€¼æ»¤æ³¢</h2><h3 id="åŸç†">åŸç†</h3><p>å‡å€¼æ»¤æ³¢æ˜¯æŒ‡ç”¨å½“å‰åƒç´ ç‚¹å‘¨å›´NÂ·Nä¸ªåƒç´ å€¼çš„å‡å€¼æ¥ä»£æ›¿å½“å‰åƒç´ å€¼ã€‚åœ¨è¿›è¡Œå‡å€¼æ»¤æ³¢æ—¶ï¼Œé¦–å…ˆè¦è€ƒè™‘éœ€è¦å¯¹å‘¨å›´å¤šå°‘ä¸ªåƒç´ ç‚¹<strong>å–å¹³å‡å€¼</strong>ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä»¥å½“å‰åƒç´ ç‚¹ä¸ºä¸­å¿ƒï¼Œ å¯¹è¡Œæ•°å’Œåˆ—æ•°ç›¸ç­‰çš„ä¸€å—åŒºåŸŸå†…çš„æ‰€æœ‰åƒç´ ç‚¹çš„åƒç´ å€¼æ±‚å¹³å‡ã€‚é’ˆå¯¹è¾¹ç¼˜åƒç´ ç‚¹ï¼Œ å¯ä»¥åªå–å›¾åƒå†…å­˜åœ¨çš„å‘¨å›´é‚»åŸŸç‚¹çš„åƒç´ å€¼å‡å€¼ã€‚</p><p>ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mo>Ã—</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">5\times5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>å‡å€¼æ»¤æ³¢ä¸ºä¾‹ï¼Œç›¸å½“äºï¼š</p><img src="21.png" style="zoom: 80%;" /><h3 id="å‡½æ•°">å‡½æ•°</h3><img src="22.png" style="zoom: 80%;" /><img src="23.png" style="zoom: 80%;" /><p>å·ç§¯æ ¸å°ï¼Œæ»¤æ³¢æ•ˆæœå·®ï¼Œå·ç§¯æ ¸å¤§ï¼Œå›¾ç‰‡å¤±çœŸä¸¥é‡ï¼ˆç±»ä¼¼é«˜æ–¯æ¨¡ç³Šï¼‰ï¼Œç±»ä¼¼äºè¿‘è§†çš„æ„Ÿè§‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    dst=cv2.blur(src,(<span class="number">10</span>,<span class="number">10</span>))</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line"></span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="57.png" style="zoom: 60%;" /><h2 id="æ–¹æ¡†æ»¤æ³¢">æ–¹æ¡†æ»¤æ³¢</h2><h3 id="åŸç†-2">åŸç†</h3><p>æ–¹æ¡†æ»¤æ³¢ä¸­ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©æ˜¯å¦å¯¹å‡å€¼æ»¤æ³¢çš„ç»“æœè¿›è¡Œå½’ä¸€åŒ–ï¼Œ å³å¯ä»¥è‡ªç”±é€‰æ‹©æ»¤æ³¢ç»“æœæ˜¯é‚»åŸŸåƒç´ å€¼ä¹‹å’Œçš„å¹³å‡å€¼ï¼Œè¿˜æ˜¯é‚»åŸŸåƒç´ å€¼ä¹‹å’Œã€‚</p><h3 id="å‡½æ•°-2">å‡½æ•°</h3><img src="24.png" style="zoom: 80%;" /><p>å½“ normalize=0æ—¶ï¼Œ å› ä¸ºä¸è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œ å› æ­¤æ»¤æ³¢å¾—åˆ°çš„å€¼å¾ˆå¯èƒ½è¶…è¿‡å½“å‰åƒç´ å€¼èŒƒå›´çš„æœ€å¤§å€¼ï¼Œ ä»è€Œè¢«æˆªæ–­ä¸ºæœ€å¤§å€¼ã€‚ è¿™æ ·ï¼Œ å°±ä¼šå¾—åˆ°ä¸€å¹…çº¯ç™½è‰²çš„å›¾åƒã€‚</p><h2 id="é«˜æ–¯æ»¤æ³¢">é«˜æ–¯æ»¤æ³¢</h2><h3 id="åŸç†-3">åŸç†</h3><p>åœ¨è¿›è¡Œå‡å€¼æ»¤æ³¢å’Œæ–¹æ¡†æ»¤æ³¢æ—¶ï¼Œå…¶é‚»åŸŸå†…æ¯ä¸ªåƒç´ çš„æƒé‡æ˜¯ç›¸ç­‰çš„ã€‚åœ¨é«˜æ–¯æ»¤æ³¢ä¸­ï¼Œ<strong>ä¼šå°†ä¸­å¿ƒç‚¹çš„æƒé‡å€¼åŠ å¤§ï¼Œ è¿œç¦»ä¸­å¿ƒç‚¹çš„æƒé‡å€¼å‡å°ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè®¡ç®—é‚»åŸŸå†…å„ä¸ªåƒç´ å€¼ä¸åŒæƒé‡çš„å’Œ</strong>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><img src="25.png" style="zoom: 80%;" /><h3 id="å‡½æ•°-3">å‡½æ•°</h3><img src="26.png" style="zoom: 80%;" /><p><strong><u>æ»¤æ³¢æ ¸å¿…é¡»æ˜¯å¥‡æ•°ï¼ï¼</u></strong></p><p>åœ¨è¯¥å‡½æ•°ä¸­ï¼Œ <code>sigmaY</code>å’Œ<code>borderType</code>æ˜¯å¯é€‰å‚æ•°ã€‚ <code>sigmaX</code>æ˜¯å¿…é€‰å‚æ•°ï¼Œ ä½†æ˜¯å¯ä»¥å°†è¯¥å‚æ•°è®¾ç½®ä¸º0, è®©å‡½æ•°è‡ªå·±å»è®¡ç®—<code>sigmaX</code>çš„å…·ä½“å€¼ã€‚<br>å®˜æ–¹æ–‡æ¡£å»ºè®®æ˜¾å¼åœ°æŒ‡å®š<code>ksize</code>ã€ <code>sigmaX</code>å’Œ<code>sigmaYä¸‰</code>ä¸ªå‚æ•°çš„å€¼ï¼Œ ä»¥é¿å…å°†æ¥å‡½æ•°ä¿®æ”¹åå¯èƒ½é€ æˆçš„è¯­æ³•é”™è¯¯ã€‚ <strong>å½“ç„¶ï¼Œ åœ¨å®é™…å¤„ç†ä¸­ï¼Œ å¯ä»¥æ˜¾å¼æŒ‡å®š<code>sigmaX</code>å’Œ <code>sigmaY</code>ä¸ºé»˜è®¤å€¼0</strong>ã€‚å› æ­¤ï¼Œ å‡½æ•°<code>cv2.GaussianBlur()</code>çš„å¸¸ç”¨å½¢å¼ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dst = cv2.GaussianBlur (src,ksize,<span class="number">0</span>,<span class="number">0</span>) </span><br></pre></td></tr></table></figure><p>æ•ˆæœç•¥å¥½äºæ–¹æ¡†æ»¤æ³¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    dst = cv2.GaussianBlur(src, (<span class="number">9</span>, <span class="number">9</span>), <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line"></span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="58.png" style="zoom: 60%;" /><h2 id="ä¸­å€¼æ»¤æ³¢">ä¸­å€¼æ»¤æ³¢</h2><h3 id="åŸç†-4">åŸç†</h3><p>ä¸­å€¼æ»¤æ³¢ä¼šå–å½“å‰åƒç´ ç‚¹åŠå…¶å‘¨å›´ä¸´è¿‘åƒç´ ç‚¹ï¼ˆä¸€å…±æœ‰å¥‡æ•°ä¸ªåƒç´ ç‚¹ï¼‰çš„åƒç´ å€¼ï¼Œå°†è¿™äº›åƒç´ å€¼æ’åºï¼Œç„¶å<strong>å°†ä½äºä¸­é—´ä½ç½®çš„åƒç´ å€¼</strong>ä½œä¸ºå½“å‰åƒç´ ç‚¹çš„åƒç´ å€¼ã€‚(å–ä¸­ä½æ•°)</p><h3 id="å‡½æ•°-4">å‡½æ•°</h3><img src="27.png" style="zoom: 80%;" /><h2 id="åŒè¾¹æ»¤æ³¢">åŒè¾¹æ»¤æ³¢</h2><h3 id="åŸç†-5">åŸç†</h3><p>å‰è¿°æ»¤æ³¢æ–¹å¼åŸºæœ¬éƒ½åªè€ƒè™‘äº†ç©ºé—´çš„æƒé‡ä¿¡æ¯ï¼Œ è¿™ç§æƒ…å†µè®¡ç®—èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œ ä½†æ˜¯åœ¨è¾¹ç¼˜ä¿¡æ¯çš„å¤„ç†ä¸Šå­˜åœ¨è¾ƒå¤§çš„é—®é¢˜ã€‚åœ¨å‡å€¼æ»¤æ³¢ã€ æ–¹æ¡†æ»¤æ³¢ã€ é«˜æ–¯æ»¤æ³¢ä¸­ï¼Œ éƒ½ä¼šè®¡ç®—è¾¹ç¼˜ä¸Šå„ä¸ªåƒç´ ç‚¹çš„åŠ æƒå¹³å‡å€¼ï¼Œ ä»è€Œæ¨¡ç³Šè¾¹ç¼˜æ¯ã€‚</p><p>åŒè¾¹æ»¤æ³¢åœ¨è®¡ç®—æŸä¸€ä¸ªåƒç´ ç‚¹çš„æ–°å€¼æ—¶ï¼Œ ä¸ä»…è€ƒè™‘è·ç¦»ä¿¡æ¯ï¼ˆè·ç¦»è¶Šè¿œï¼Œæƒé‡è¶Šå°ï¼‰ï¼Œè¿˜è€ƒè™‘è‰²å½©ä¿¡æ¯ï¼ˆè‰²å½©å·®åˆ«è¶Šå¤§ï¼Œæƒé‡è¶Šå°ï¼‰ã€‚åŒè¾¹æ»¤æ³¢ç»¼åˆè€ƒè™‘è·ç¦»å’Œè‰²å½©çš„æƒé‡ç»“æœï¼Œæ—¢èƒ½å¤Ÿæœ‰æ•ˆåœ°å»é™¤å™ªå£°ï¼Œåˆèƒ½å¤Ÿè¾ƒå¥½åœ°ä¿æŠ¤è¾¹ç¼˜ä¿¡æ¯ã€‚</p><p>åœ¨åŒè¾¹æ»¤æ³¢ä¸­ï¼Œ<strong>å½“å¤„åœ¨è¾¹ç¼˜æ—¶ï¼Œä¸å½“å‰ç‚¹è‰²å½©ç›¸è¿‘çš„åƒç´ ç‚¹ï¼ˆé¢œè‰²è·ç¦»å¾ˆè¿‘ï¼‰ä¼šè¢«ç»™äºˆè¾ƒå¤§çš„æƒé‡å€¼ï¼›è€Œä¸å½“å‰è‰²å½©å·®åˆ«è¾ƒå¤§çš„åƒç´ ç‚¹ï¼ˆé¢œè‰²è·ç¦»å¾ˆè¿œï¼‰ä¼šè¢«ç»™äºˆè¾ƒå°çš„æƒé‡å€¼ï¼ˆæç«¯æƒ…å†µä¸‹æƒé‡å¯èƒ½ä¸º0, ç›´æ¥å¿½ç•¥è¯¥ç‚¹ï¼‰</strong>ï¼Œè¿™æ ·å°±ä¿æŠ¤äº†è¾¹ç¼˜ä¿¡æ¯ã€‚</p><h3 id="å‡½æ•°-5">å‡½æ•°</h3><img src="28.png" style="zoom: 80%;" /><p>åŒè¾¹æ»¤æ³¢å¯¹è¾¹ç¼˜çš„ä¿æŠ¤å¾ˆå¥½ï¼Œä½†å¯¹å™ªå£°çš„å¤„ç†ä¸æ˜¯å¾ˆå¥½ã€‚</p><h2 id="2Då·ç§¯">2Då·ç§¯</h2><img src="29.png" style="zoom: 80%;" /><h1>å½¢æ€å­¦æ“ä½œ</h1><p>è¿™ä¸€éƒ¨åˆ†æ˜¯ä»¥åå¾ˆå¤šæ“ä½œçš„åŸºç¡€ï¼Œä»¥åå¾ˆå¤šæ“ä½œæˆ–å¤šæˆ–å°‘éƒ½è·Ÿå½¢æ€å­¦æœ‰å…³ç³»ã€‚</p><h2 id="è…èš€">è…èš€</h2><h3 id="åŸç†-6">åŸç†</h3><p>è…èš€èƒ½å¤Ÿå°†å›¾åƒçš„è¾¹ç•Œç‚¹æ¶ˆé™¤ï¼Œä½¿å›¾åƒæ²¿ç€è¾¹ç•Œå‘å†…æ”¶ç¼©ï¼Œä¹Ÿå¯ä»¥å°†å°äºæŒ‡å®šç»“æ„ä½“å…ƒç´ çš„éƒ¨åˆ†å»é™¤ã€‚<strong>è…èš€ç”¨æ¥â€œæ”¶ç¼©â€œæˆ–è€…â€œç»†åŒ–â€äºŒå€¼å›¾åƒä¸­çš„å‰æ™¯ï¼Œå€Ÿæ­¤å®ç°å»é™¤å™ªå£°ã€å…ƒç´ åˆ†å‰²ç­‰åŠŸèƒ½</strong>ã€‚åœ¨è…èš€è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ä¸€ä¸ª<strong>ç»“æ„å…ƒ</strong>æ¥é€ä¸ªåƒç´ åœ°æ‰«æè¦è¢«è…èš€çš„å›¾åƒï¼Œå¹¶æ ¹æ®ç»“æ„å…ƒå’Œè¢«è…èš€å›¾åƒçš„å…³ç³»æ¥ç¡®å®šè…èš€ç»“æœã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè…èš€æ“ä½œç­‰å½¢æ€å­¦æ“ä½œæ˜¯<strong>é€ä¸ªåƒç´ </strong>åœ°æ¥å†³å®šå€¼çš„ï¼Œæ¯æ¬¡åˆ¤å®šçš„ç‚¹éƒ½æ˜¯ä¸ç»“æ„å…ƒä¸­å¿ƒç‚¹æ‰€å¯¹åº”çš„ç‚¹ã€‚å›¾8-3ä¸­çš„ä¸¤å¹…å›¾åƒè¡¨ç¤ºç»“æ„å…ƒä¸å‰æ™¯è‰²çš„ä¸¤ç§ä¸åŒå…³ç³»ã€‚æ ¹æ®è¿™ä¸¤ç§ä¸åŒçš„å…³ç³»æ¥å†³å®šï¼Œè…èš€ç»“æœå›¾åƒä¸­çš„ç»“æ„å…ƒä¸­å¿ƒç‚¹æ‰€å¯¹åº”ä½ç½®åƒç´ ç‚¹çš„åƒç´ å€¼ã€‚</p><img src="30.png" style="zoom: 80%;" /><h3 id="å‡½æ•°-6">å‡½æ•°</h3><img src="31.png" style="zoom: 80%;" /><img src="32.png" style="zoom: 80%;" /><p>ä¾‹å¦‚ï¼š</p><img src=".png" style="zoom: 80%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,-<span class="number">1</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    kernel = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.uint8)</span><br><span class="line">    dst = cv2.erode(src, kernel)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="59.png" style="zoom: 60%;" /><h2 id="è†¨èƒ€">è†¨èƒ€</h2><h3 id="åŸç†-7">åŸç†</h3><p>ä¸è…èš€ç›¸åï¼ŒåŒæ ·åœ°ï¼Œå¤„ç†æ€è·¯ä¹Ÿä¸å…¶ç›¸åã€‚</p><ul><li>å¦‚æœç»“æ„å…ƒä¸­ä»»æ„ä¸€ç‚¹å¤„åƒå‰æ™¯å›¾åƒä¸­ï¼Œå°±å°†è†¨èƒ€ç»“æœå›¾åƒä¸­å¯¹åº”åƒç´ ç‚¹å¤„ç†ä¸ºå‰æ™¯è‰²ã€‚</li><li>å¦‚æœç»“æ„å…ƒå®Œå…¨å¤„åƒèƒŒæ™¯å›¾åƒå¤–ï¼Œå°±å°†è†¨èƒ€ç»“æœå›¾åƒä¸­å¯¹åº”åƒç´ ç‚¹å¤„ç†ä¸ºèƒŒæ™¯è‰²ã€‚</li></ul><h3 id="å‡½æ•°-7">å‡½æ•°</h3><img src="34.png" style="zoom: 80%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>,-<span class="number">1</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    kernel = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.uint8)</span><br><span class="line">    dst = cv2.dilate(src, kernel)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="60.png" style="zoom: 60%;" /><h2 id="é€šç”¨å½¢æ€å­¦å‡½æ•°">é€šç”¨å½¢æ€å­¦å‡½æ•°</h2><h3 id="å‡½æ•°-8">å‡½æ•°</h3><img src="35.png" style="zoom: 80%;" /><ul><li><p>å¼€è¿ç®—è¿›è¡Œçš„æ“ä½œæ˜¯å…ˆå°†å›¾åƒè…èš€ï¼Œå†å¯¹è…èš€çš„ç»“æœè¿›è¡Œè†¨èƒ€ã€‚å¼€è¿ç®—å¯ä»¥ç”¨åƒå»å™ªã€è®¡æ•°ç­‰ã€‚ï¼ˆè®¡æ•°ï¼šå¯ä»¥åˆ©ç”¨å¼€è¿ç®—å°†è¿æ¥åœ¨ä¸€èµ·çš„ä¸åŒåŒºåŸŸåˆ’åˆ†å¼€ï¼‰</p></li><li><p>é—­è¿ç®—æ˜¯å…ˆè†¨èƒ€ã€ åè…èš€çš„è¿ç®—ï¼Œ å®ƒæœ‰åŠ©äºå…³é—­å‰æ™¯ç‰©ä½“å†…éƒ¨çš„å°å­”ï¼Œ æˆ–å»é™¤ç‰©ä½“ä¸Šçš„å°é»‘ç‚¹ï¼Œè¿˜å¯ä»¥å°†ä¸åŒçš„å‰æ™¯å›¾åƒè¿›è¡Œè¿æ¥ã€‚</p></li><li><p>å½¢æ€å­¦æ¢¯åº¦è¿ç®—æ˜¯ç”¨å›¾åƒçš„è†¨èƒ€å›¾åƒå‡è…èš€å›¾åƒçš„æ“ä½œï¼Œ è¯¥æ“ä½œå¯ä»¥è·å–åŸå§‹å›¾åƒä¸­å‰æ™¯å›¾åƒçš„è¾¹ç¼˜ã€‚</p></li><li><p>ç¤¼å¸½è¿ç®—æ˜¯ç”¨åŸå§‹å›¾åƒå‡å»å…¶å¼€è¿ç®—å›¾åƒçš„æ“ä½œã€‚ ç¤¼å¸½è¿ç®—èƒ½å¤Ÿè·å–å›¾åƒçš„å™ªå£°ä¿¡æ¯ï¼Œæˆ–è€…å¾—åˆ°æ¯”åŸå§‹å›¾åƒçš„è¾¹ç¼˜æ›´äº®çš„è¾¹ç¼˜ä¿¡æ¯ã€‚</p></li><li><p>é»‘å¸½è¿ç®—æ˜¯ç”¨é—­è¿ç®—å›¾åƒå‡å»åŸå§‹å›¾åƒçš„æ“ä½œã€‚é»‘å¸½è¿ç®—èƒ½å¤Ÿè·å–å›¾åƒå†…éƒ¨çš„å°å­”ï¼Œæˆ–å‰æ™¯è‰²ä¸­çš„å°é»‘ç‚¹ï¼Œ æˆ–è€…å¾—åˆ°æ¯”åŸå§‹å›¾åƒçš„è¾¹ç¼˜æ›´æš—çš„è¾¹ç¼˜éƒ¨åˆ†ã€‚</p></li></ul><h2 id="æ ¸å‡½æ•°">æ ¸å‡½æ•°</h2><img src="36.png" style="zoom: 80%;" /><img src="37.png" style="zoom: 80%;" /><h1>å›¾åƒæ¢¯åº¦</h1><p>å›¾åƒæ¢¯åº¦è®¡ç®—çš„æ˜¯å›¾åƒå˜åŒ–çš„é€Ÿåº¦ã€‚å¯¹åƒå›¾åƒçš„è¾¹ç¼˜éƒ¨åˆ†ï¼Œå…¶ç°åº¦å€¼å˜åŒ–è¾ƒå¤§ï¼Œæ¢¯åº¦å€¼ä¹Ÿè¾ƒå¤§ï¼›ç›¸åï¼Œå¯¹äºå›¾åƒä¸­æ¯”è¾ƒå¹³æ»‘çš„éƒ¨åˆ†ï¼Œ å…¶ç°åº¦å€¼å˜åŒ–è¾ƒå°ï¼Œç›¸åº”çš„æ¢¯åº¦å€¼ä¹Ÿè¾ƒå°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<strong>å›¾åƒæ¢¯åº¦è®¡ç®—çš„æ˜¯å›¾åƒçš„è¾¹ç¼˜ä¿¡æ¯</strong>ã€‚</p><img src="38.png" style="zoom: 80%;" /><p>åŸä¹¦å¯¹æ­¤åšäº†å¾ˆè¯¦ç»†çš„è®²è§£ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒã€‚</p><p><a href="https://mp.weixin.qq.com/s?__biz=MzUyNzY5OTE5Mw==&amp;mid=2247488231&amp;idx=2&amp;sn=490533849bd36d6e9c70d7d2560936b8&amp;chksm=fa7acf71cd0d4667266a339339b834b1ae6fde2ae002e8d0a16c10deb37aebe2bfd605f20058&amp;scene=178&amp;cur_album_id=1343718009222905856#rd">ä»¥ä¸‹å‚è€ƒ</a></p><h2 id="Roberts-ç®—å­"><strong>Roberts ç®—å­</strong></h2><p>Roberts ç®—å­ï¼Œåˆç§°ç½—ä¼¯èŒ¨ç®—å­ï¼Œæ˜¯ä¸€ç§æœ€ç®€å•çš„ç®—å­ï¼Œæ˜¯ä¸€ç§åˆ©ç”¨å±€éƒ¨å·®åˆ†ç®—å­å¯»æ‰¾è¾¹ç¼˜çš„ç®—å­ã€‚ä»–é‡‡ç”¨å¯¹è§’çº¿æ–¹å‘ç›¸é‚»ä¸¤è±¡ç´ ä¹‹å·®è¿‘ä¼¼æ¢¯åº¦å¹…å€¼æ£€æµ‹è¾¹ç¼˜ã€‚<strong>æ£€æµ‹å‚ç›´è¾¹ç¼˜çš„æ•ˆæœå¥½äºæ–œå‘è¾¹ç¼˜ï¼Œå®šä½ç²¾åº¦é«˜ï¼Œå¯¹å™ªå£°æ•æ„Ÿï¼Œæ— æ³•æŠ‘åˆ¶å™ªå£°çš„å½±å“</strong>ã€‚</p><p>1963å¹´ï¼Œ Roberts æå‡ºäº†è¿™ç§å¯»æ‰¾è¾¹ç¼˜çš„ç®—å­ã€‚ Roberts è¾¹ç¼˜ç®—å­æ˜¯ä¸€ä¸ª 2x2 çš„æ¨¡ç‰ˆï¼Œé‡‡ç”¨çš„æ˜¯å¯¹è§’æ–¹å‘ç›¸é‚»çš„ä¸¤ä¸ªåƒç´ ä¹‹å·®ã€‚</p><p><strong>Roberts ç®—å­çš„æ¨¡æ¿åˆ†ä¸ºæ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä»å…¶æ¨¡æ¿å¯ä»¥çœ‹å‡ºï¼Œ Roberts ç®—å­èƒ½è¾ƒå¥½çš„å¢å¼ºæ­£è´Ÿ 45 åº¦çš„å›¾åƒè¾¹ç¼˜</strong>ã€‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dx= \left[\begin{matrix}  -1 &amp; 0 \\ 0 &amp; 1 \\ \end{matrix} \right] \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span><span class="tag"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>y</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dy = \left[\begin{matrix}  0 &amp; -1 \\ 1 &amp; 0 \\ \end{matrix} \right] \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span><span class="tag"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p>Roberts ç®—å­åœ¨æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_x(i,j)=f(i+1,j+1)-f(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>y</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_y(i,j)=f(i,j+1)-f(i+1,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></p><p>Roberts ç®—å­åƒç´ çš„æœ€ç»ˆè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><msqrt><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><msub><mi>d</mi><mi>y</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt><mrow></mrow></mrow><annotation encoding="application/x-tex">S=\sqrt{d_x(i,j)^2+d_y(i,j)^2}{}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.32305399999999995em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.916946em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8769460000000002em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.32305399999999995em;"><span></span></span></span></span></span><span class="mord"></span></span></span></span></p><p>å®ç° Roberts ç®—å­ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡ OpenCV ä¸­çš„ <code>filter2D()</code> è¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å·ç§¯æ ¸å®ç°å¯¹å›¾åƒçš„å·ç§¯è¿ç®—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter2D</span>(<span class="params">src, ddepth, kernel, dst=<span class="literal">None</span>, anchor=<span class="literal">None</span>, delta=<span class="literal">None</span>, borderType=<span class="literal">None</span></span>)</span></span><br></pre></td></tr></table></figure><ul><li>src: è¾“å…¥å›¾åƒ</li><li>ddepth: ç›®æ ‡å›¾åƒæ‰€éœ€çš„æ·±åº¦</li><li>kernel: å·ç§¯æ ¸</li></ul><p>æ¥ä¸‹æ¥å¼€å§‹å†™ä»£ç ï¼Œé¦–å…ˆæ˜¯å›¾åƒçš„è¯»å–ï¼Œå¹¶æŠŠè¿™ä¸ªå›¾åƒè½¬åŒ–æˆç°åº¦å›¾åƒï¼Œè¿™ä¸ªæ²¡å•¥å¥½è¯´çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>, cv.COLOR_BGR2GRAY)</span><br><span class="line">rgb_img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦åŒ–å¤„ç†å›¾åƒ</span></span><br><span class="line">grayImage = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯ä½¿ç”¨ Numpy æ„å»ºå·ç§¯æ ¸ï¼Œå¹¶å¯¹ç°åº¦å›¾åƒåœ¨ x å’Œ y çš„æ–¹å‘ä¸Šåšä¸€æ¬¡å·ç§¯è¿ç®—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Roberts ç®—å­</span></span><br><span class="line">kernelx = np.array([[-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>]], dtype=<span class="built_in">int</span>)</span><br><span class="line">kernely = np.array([[<span class="number">0</span>, -<span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]], dtype=<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">x = cv.filter2D(grayImage, cv.CV_16S, kernelx)</span><br><span class="line">y = cv.filter2D(grayImage, cv.CV_16S, kernely)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåœ¨è¿›è¡Œäº† Roberts ç®—å­å¤„ç†ä¹‹åï¼Œè¿˜éœ€è¦è°ƒç”¨convertScaleAbs()å‡½æ•°è®¡ç®—ç»å¯¹å€¼ï¼Œå¹¶å°†å›¾åƒè½¬æ¢ä¸º8ä½å›¾è¿›è¡Œæ˜¾ç¤ºï¼Œç„¶åæ‰èƒ½è¿›è¡Œå›¾åƒèåˆï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è½¬ uint8 ,å›¾åƒèåˆ</span></span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Roberts = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>æœ€åæ˜¯é€šè¿‡ pyplot å°†å›¾åƒæ˜¾ç¤ºå‡ºæ¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">titles = [<span class="string">&#x27;åŸå§‹å›¾åƒ&#x27;</span>, <span class="string">&#x27;Robertsç®—å­&#x27;</span>]</span><br><span class="line">images = [rgb_img, Roberts]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="number">2</span>, i + <span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(titles[i])</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p><img src="39.png" style="zoom: 80%;" /><h2 id="Prewitt-ç®—å­"><strong>Prewitt ç®—å­</strong></h2><p>Prewitt ç®—å­æ˜¯ä¸€ç§ä¸€é˜¶å¾®åˆ†ç®—å­çš„è¾¹ç¼˜æ£€æµ‹ï¼Œåˆ©ç”¨åƒç´ ç‚¹ä¸Šä¸‹ã€å·¦å³é‚»ç‚¹çš„ç°åº¦å·®ï¼Œåœ¨è¾¹ç¼˜å¤„è¾¾åˆ°æå€¼æ£€æµ‹è¾¹ç¼˜ï¼Œå»æ‰éƒ¨åˆ†ä¼ªè¾¹ç¼˜ï¼Œå¯¹å™ªå£°å…·æœ‰å¹³æ»‘ä½œç”¨ã€‚</p><p>ç”±äº Prewitt ç®—å­é‡‡ç”¨ 3 * 3 æ¨¡æ¿å¯¹åŒºåŸŸå†…çš„åƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œè€Œ Robert ç®—å­çš„æ¨¡æ¿ä¸º 2 * 2 ï¼Œæ•… Prewitt ç®—å­çš„è¾¹ç¼˜æ£€æµ‹ç»“æœåœ¨æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘å‡æ¯” Robert ç®—å­æ›´åŠ æ˜æ˜¾ã€‚<strong>Prewittç®—å­é€‚åˆç”¨æ¥è¯†åˆ«å™ªå£°è¾ƒå¤šã€ç°åº¦æ¸å˜çš„å›¾åƒ</strong>ã€‚</p><p>Prewitt ç®—å­çš„æ¨¡ç‰ˆå¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dx =  \left[\begin{matrix}1 &amp; 0 &amp; -1 \\1 &amp; 0 &amp; -1 \\ 1 &amp; 0 &amp; -1\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>y</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dy =  \left[\begin{matrix}-1 &amp; -1 &amp; -1 \\0 &amp; 0 &amp; 0 \\ 1 &amp; 1 &amp; 1\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p>åœ¨ä»£ç å®ç°ä¸Šï¼Œ Prewitt ç®—å­çš„å®ç°è¿‡ç¨‹ä¸ Roberts ç®—å­æ¯”è¾ƒç›¸ä¼¼ï¼Œæˆ‘å°±ä¸å¤šä»‹ç»ï¼Œç›´æ¥è´´ä»£ç äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>, cv.COLOR_BGR2GRAY)</span><br><span class="line">rgb_img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦åŒ–å¤„ç†å›¾åƒ</span></span><br><span class="line">grayImage = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Prewitt ç®—å­</span></span><br><span class="line">kernelx = np.array([[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>]],dtype=<span class="built_in">int</span>)</span><br><span class="line">kernely = np.array([[-<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],[-<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],[-<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>]],dtype=<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">x = cv.filter2D(grayImage, cv.CV_16S, kernelx)</span><br><span class="line">y = cv.filter2D(grayImage, cv.CV_16S, kernely)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬ uint8 ,å›¾åƒèåˆ</span></span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Prewitt = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">titles = [<span class="string">&#x27;åŸå§‹å›¾åƒ&#x27;</span>, <span class="string">&#x27;Prewitt ç®—å­&#x27;</span>]</span><br><span class="line">images = [rgb_img, Prewitt]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="number">2</span>, i + <span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(titles[i])</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><img src="40.png" style="zoom: 80%;" /><p>ä»ç»“æœä¸Šæ¥çœ‹ï¼Œ Prewitt ç®—å­å›¾åƒé”åŒ–æå–çš„è¾¹ç¼˜è½®å»“ï¼Œå…¶æ•ˆæœå›¾çš„è¾¹ç¼˜æ£€æµ‹ç»“æœæ¯” Robert ç®—å­æ›´åŠ æ˜æ˜¾ã€‚</p><h2 id="Sobel-ç®—å­"><strong>Sobel ç®—å­</strong></h2><p>Sobel ç®—å­çš„ä¸­æ–‡åç§°æ˜¯ç´¢è´å°”ç®—å­ï¼Œæ˜¯ä¸€ç§ç”¨äºè¾¹ç¼˜æ£€æµ‹çš„ç¦»æ•£å¾®åˆ†ç®—å­ï¼Œå®ƒç»“åˆäº†é«˜æ–¯å¹³æ»‘å’Œå¾®åˆ†æ±‚å¯¼ã€‚</p><p><strong>Sobel ç®—å­åœ¨ Prewitt ç®—å­çš„åŸºç¡€ä¸Šå¢åŠ äº†æƒé‡çš„æ¦‚å¿µï¼Œè®¤ä¸ºç›¸é‚»ç‚¹çš„è·ç¦»è¿œè¿‘å¯¹å½“å‰åƒç´ ç‚¹çš„å½±å“æ˜¯ä¸åŒçš„ï¼Œè·ç¦»è¶Šè¿‘çš„åƒç´ ç‚¹å¯¹åº”å½“å‰åƒç´ çš„å½±å“è¶Šå¤§ï¼Œä»è€Œå®ç°å›¾åƒé”åŒ–å¹¶çªå‡ºè¾¹ç¼˜è½®å»“</strong>ã€‚</p><p>ç®—æ³•æ¨¡ç‰ˆå¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>x</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dx =  \left[\begin{matrix}1 &amp; 0 &amp; -1 \\2 &amp; 0 &amp; -2 \\ 1 &amp; 0 &amp; -1\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">2</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>d</mi><mi>y</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">dy =  \left[\begin{matrix}-1 &amp; -2 &amp; -1 \\0 &amp; 0 &amp; 0 \\ 1 &amp; 2 &amp; 1\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">2</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p>Sobel ç®—å­æ ¹æ®åƒç´ ç‚¹ä¸Šä¸‹ã€å·¦å³é‚»ç‚¹ç°åº¦åŠ æƒå·®ï¼Œåœ¨è¾¹ç¼˜å¤„è¾¾åˆ°æå€¼è¿™ä¸€ç°è±¡æ£€æµ‹è¾¹ç¼˜ã€‚å¯¹å™ªå£°å…·æœ‰å¹³æ»‘ä½œç”¨ï¼Œæä¾›è¾ƒä¸ºç²¾ç¡®çš„è¾¹ç¼˜æ–¹å‘ä¿¡æ¯ã€‚å› ä¸º Sobel ç®—å­ç»“åˆäº†é«˜æ–¯å¹³æ»‘å’Œå¾®åˆ†æ±‚å¯¼ï¼ˆåˆ†åŒ–ï¼‰ï¼Œå› æ­¤ç»“æœä¼šå…·æœ‰æ›´å¤šçš„æŠ—å™ªæ€§ï¼Œå½“å¯¹ç²¾åº¦è¦æ±‚ä¸æ˜¯å¾ˆé«˜æ—¶ï¼Œ Sobel ç®—å­æ˜¯ä¸€ç§è¾ƒä¸ºå¸¸ç”¨çš„è¾¹ç¼˜æ£€æµ‹æ–¹æ³•ã€‚</p><p>Sobel ç®—å­è¿‘ä¼¼æ¢¯åº¦çš„å¤§å°çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><msqrt><mrow><msubsup><mi>d</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>d</mi><mi>y</mi><mn>2</mn></msubsup></mrow></msqrt><mrow></mrow></mrow><annotation encoding="application/x-tex">G=\sqrt{d_x^2+d_y^2}{}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.84em;vertical-align:-0.6765000000000001em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1635em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.1235em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.8800000000000001em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5zM1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.6765000000000001em;"><span></span></span></span></span></span><span class="mord"></span></span></span></span></p><p>æ¢¯åº¦æ–¹å‘çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi><mo>=</mo><msup><mrow><mi>tan</mi><mo>â¡</mo></mrow><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mrow><mo stretchy="false">(</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac></mstyle><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">\theta=\tan^{-1}{(\dfrac{dy}{dx})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mop"><span class="mop">tan</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8190879999999999em;"><span style="top:-3.06798em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>å¦‚æœä»¥ä¸Šçš„è§’åº¦ Î¸ ç­‰äºé›¶ï¼Œå³ä»£è¡¨å›¾åƒè¯¥å¤„æ‹¥æœ‰çºµå‘è¾¹ç¼˜ï¼Œå·¦æ–¹è¾ƒå³æ–¹æš—ã€‚</p><p>åœ¨ Python ä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›äº† <code>Sobel()</code> å‡½æ•°è¿›è¡Œè¿ç®—ï¼Œæ•´ä½“å¤„ç†è¿‡ç¨‹å’Œå‰é¢çš„ç±»ä¼¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>, cv.COLOR_BGR2GRAY)</span><br><span class="line">rgb_img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦åŒ–å¤„ç†å›¾åƒ</span></span><br><span class="line">grayImage = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sobel ç®—å­</span></span><br><span class="line">x = cv.Sobel(grayImage, cv.CV_16S, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">y = cv.Sobel(grayImage, cv.CV_16S, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬ uint8 ,å›¾åƒèåˆ</span></span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Sobel = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">titles = [<span class="string">&#x27;åŸå§‹å›¾åƒ&#x27;</span>, <span class="string">&#x27;Sobel ç®—å­&#x27;</span>]</span><br><span class="line">images = [rgb_img, Sobel]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="number">2</span>, i + <span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(titles[i])</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><img src="41.png" style="zoom: 80%;" /><h2 id="Laplacian-ç®—å­"><strong>Laplacian ç®—å­</strong></h2><p>æ‹‰æ™®æ‹‰æ–¯ï¼ˆ Laplacian ï¼‰ç®—å­æ˜¯ n ç»´æ¬§å‡ é‡Œå¾·ç©ºé—´ä¸­çš„ä¸€ä¸ªäºŒé˜¶å¾®åˆ†ç®—å­ï¼Œå¸¸ç”¨äºå›¾åƒå¢å¼ºé¢†åŸŸå’Œè¾¹ç¼˜æå–ã€‚</p><p><strong>Laplacian ç®—å­çš„æ ¸å¿ƒæ€æƒ³ï¼šåˆ¤æ–­å›¾åƒä¸­å¿ƒåƒç´ ç°åº¦å€¼ä¸å®ƒå‘¨å›´å…¶ä»–åƒç´ çš„ç°åº¦å€¼ï¼Œå¦‚æœä¸­å¿ƒåƒç´ çš„ç°åº¦æ›´é«˜ï¼Œåˆ™æå‡ä¸­å¿ƒåƒç´ çš„ç°åº¦ï¼›åä¹‹é™ä½ä¸­å¿ƒåƒç´ çš„ç°åº¦ï¼Œä»è€Œå®ç°å›¾åƒé”åŒ–æ“ä½œ</strong>ã€‚</p><p>åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œ Laplacian ç®—å­é€šè¿‡å¯¹é‚»åŸŸä¸­å¿ƒåƒç´ çš„å››æ–¹å‘æˆ–å…«æ–¹å‘æ±‚æ¢¯åº¦ï¼Œå†å°†æ¢¯åº¦ç›¸åŠ èµ·æ¥åˆ¤æ–­ä¸­å¿ƒåƒç´ ç°åº¦ä¸é‚»åŸŸå†…å…¶ä»–åƒç´ ç°åº¦çš„å…³ç³»ï¼Œæœ€åé€šè¿‡æ¢¯åº¦è¿ç®—çš„ç»“æœå¯¹åƒç´ ç°åº¦è¿›è¡Œè°ƒæ•´ã€‚</p><p>Laplacian ç®—å­åˆ†ä¸ºå››é‚»åŸŸå’Œå…«é‚»åŸŸï¼Œå››é‚»åŸŸæ˜¯å¯¹é‚»åŸŸä¸­å¿ƒåƒç´ çš„å››æ–¹å‘æ±‚æ¢¯åº¦ï¼Œå…«é‚»åŸŸæ˜¯å¯¹å…«æ–¹å‘æ±‚æ¢¯åº¦ã€‚</p><p>å››é‚»åŸŸæ¨¡æ¿å¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>H</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">H =  \left[\begin{matrix}0 &amp; -1 &amp; 0 \\-1 &amp; 4 &amp; -1 \\ 0 &amp; -1 &amp; 0\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p>å…«é‚»åŸŸæ¨¡æ¿å¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>H</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.1600em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">H =  \left[\begin{matrix}-1 &amp; -1 &amp; -1 \\-1 &amp; 4 &amp; -1 \\ -1 &amp; -1 &amp; -1\end{matrix}\right] \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â£</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M319 0 H403 V16 H319z M319 0 H403 V16 H319z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¡</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¦</span></span></span><span style="top:-3.3970000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.667em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='0.016em' style='width:0.667em' viewBox='0 0 667 16' preserveAspectRatio='xMinYMin'><path d='M263 0 H347 V16 H263z M263 0 H347 V16 H263z'/></svg></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>â¤</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p>é€šè¿‡æ¨¡æ¿å¯ä»¥å‘ç°ï¼Œå½“é‚»åŸŸå†…åƒç´ ç°åº¦ç›¸åŒæ—¶ï¼Œæ¨¡æ¿çš„å·ç§¯è¿ç®—ç»“æœä¸º0ï¼›å½“ä¸­å¿ƒåƒç´ ç°åº¦é«˜äºé‚»åŸŸå†…å…¶ä»–åƒç´ çš„å¹³å‡ç°åº¦æ—¶ï¼Œæ¨¡æ¿çš„å·ç§¯è¿ç®—ç»“æœä¸ºæ­£æ•°ï¼›å½“ä¸­å¿ƒåƒç´ çš„ç°åº¦ä½äºé‚»åŸŸå†…å…¶ä»–åƒç´ çš„å¹³å‡ç°åº¦æ—¶ï¼Œæ¨¡æ¿çš„å·ç§¯ä¸ºè´Ÿæ•°ã€‚å¯¹å·ç§¯è¿ç®—çš„ç»“æœç”¨é€‚å½“çš„è¡°å¼±å› å­å¤„ç†å¹¶åŠ åœ¨åŸä¸­å¿ƒåƒç´ ä¸Šï¼Œå°±å¯ä»¥å®ç°å›¾åƒçš„é”åŒ–å¤„ç†ã€‚</p><p>åœ¨ OpenCV ä¸­ï¼Œ Laplacian ç®—å­è¢«å°è£…åœ¨ <code>Laplacian()</code> å‡½æ•°ä¸­ï¼Œå…¶ä¸»è¦æ˜¯åˆ©ç”¨Sobelç®—å­çš„è¿ç®—ï¼Œé€šè¿‡åŠ ä¸Š Sobel ç®—å­è¿ç®—å‡ºçš„å›¾åƒ x æ–¹å‘å’Œ y æ–¹å‘ä¸Šçš„å¯¼æ•°ï¼Œå¾—åˆ°è¾“å…¥å›¾åƒçš„å›¾åƒé”åŒ–ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>, cv.COLOR_BGR2GRAY)</span><br><span class="line">rgb_img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦åŒ–å¤„ç†å›¾åƒ</span></span><br><span class="line">grayImage = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Laplacian</span></span><br><span class="line">dst = cv.Laplacian(grayImage, cv.CV_16S, ksize = <span class="number">3</span>)</span><br><span class="line">Laplacian = cv.convertScaleAbs(dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">titles = [<span class="string">&#x27;åŸå§‹å›¾åƒ&#x27;</span>, <span class="string">&#x27;Laplacian ç®—å­&#x27;</span>]</span><br><span class="line">images = [rgb_img, Laplacian]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    plt.subplot(<span class="number">1</span>, <span class="number">2</span>, i + <span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(titles[i])</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><img src="42.png" style="zoom: 80%;" /><h2 id="æœ€å"><strong>æœ€å</strong></h2><p><strong>è¾¹ç¼˜æ£€æµ‹ç®—æ³•ä¸»è¦æ˜¯åŸºäºå›¾åƒå¼ºåº¦çš„ä¸€é˜¶å’ŒäºŒé˜¶å¯¼æ•°ï¼Œä½†å¯¼æ•°é€šå¸¸å¯¹å™ªå£°å¾ˆæ•æ„Ÿï¼Œå› æ­¤éœ€è¦é‡‡ç”¨æ»¤æ³¢å™¨æ¥è¿‡æ»¤å™ªå£°ï¼Œå¹¶è°ƒç”¨å›¾åƒå¢å¼ºæˆ–é˜ˆå€¼åŒ–ç®—æ³•è¿›è¡Œå¤„ç†ï¼Œæœ€åå†è¿›è¡Œè¾¹ç¼˜æ£€æµ‹</strong>ã€‚</p><p>æœ€åæˆ‘å…ˆä½¿ç”¨é«˜æ–¯æ»¤æ³¢å»å™ªä¹‹åï¼Œå†è¿›è¡Œè¾¹ç¼˜æ£€æµ‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>)</span><br><span class="line">rgb_img = cv.cvtColor(img, cv.COLOR_BGR2RGB)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åº¦åŒ–å¤„ç†å›¾åƒ</span></span><br><span class="line">gray_image = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é«˜æ–¯æ»¤æ³¢</span></span><br><span class="line">gaussian_blur = cv.GaussianBlur(gray_image, (<span class="number">3</span>, <span class="number">3</span>), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Roberts ç®—å­</span></span><br><span class="line">kernelx = np.array([[-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>]], dtype = <span class="built_in">int</span>)</span><br><span class="line">kernely = np.array([[<span class="number">0</span>, -<span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]], dtype = <span class="built_in">int</span>)</span><br><span class="line">x = cv.filter2D(gaussian_blur, cv.CV_16S, kernelx)</span><br><span class="line">y = cv.filter2D(gaussian_blur, cv.CV_16S, kernely)</span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Roberts = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Prewitt ç®—å­</span></span><br><span class="line">kernelx = np.array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>], [-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>]], dtype=<span class="built_in">int</span>)</span><br><span class="line">kernely = np.array([[-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]], dtype=<span class="built_in">int</span>)</span><br><span class="line">x = cv.filter2D(gaussian_blur, cv.CV_16S, kernelx)</span><br><span class="line">y = cv.filter2D(gaussian_blur, cv.CV_16S, kernely)</span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Prewitt = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sobel ç®—å­</span></span><br><span class="line">x = cv.Sobel(gaussian_blur, cv.CV_16S, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">y = cv.Sobel(gaussian_blur, cv.CV_16S, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">absX = cv.convertScaleAbs(x)</span><br><span class="line">absY = cv.convertScaleAbs(y)</span><br><span class="line">Sobel = cv.addWeighted(absX, <span class="number">0.5</span>, absY, <span class="number">0.5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰æ™®æ‹‰æ–¯ç®—æ³•</span></span><br><span class="line">dst = cv.Laplacian(gaussian_blur, cv.CV_16S, ksize = <span class="number">3</span>)</span><br><span class="line">Laplacian = cv.convertScaleAbs(dst)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å±•ç¤ºå›¾åƒ</span></span><br><span class="line">titles = [<span class="string">&#x27;Source Image&#x27;</span>, <span class="string">&#x27;Gaussian Image&#x27;</span>, <span class="string">&#x27;Roberts Image&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Prewitt Image&#x27;</span>,<span class="string">&#x27;Sobel Image&#x27;</span>, <span class="string">&#x27;Laplacian Image&#x27;</span>]</span><br><span class="line">images = [rgb_img, gaussian_blur, Roberts, Prewitt, Sobel, Laplacian]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">6</span>):</span><br><span class="line">   plt.subplot(<span class="number">2</span>, <span class="number">3</span>, i+<span class="number">1</span>), plt.imshow(images[i], <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">   plt.title(titles[i])</span><br><span class="line">   plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><img src="43.png" style="zoom: 80%;" /><h1>cannyè¾¹ç¼˜æ£€æµ‹</h1><img src="44.png" style="zoom: 100%;" /><h2 id="éæå¤§æŠ‘åˆ¶">éæå¤§æŠ‘åˆ¶</h2><img src="45.png" style="zoom: 100%;" /><img src="46.png" style="zoom: 100%;" /><h2 id="åŒé˜ˆå€¼ç¡®å®šè¾¹ç¼˜">åŒé˜ˆå€¼ç¡®å®šè¾¹ç¼˜</h2><img src="47.png" style="zoom: 100%;" /><h2 id="å‡½æ•°-9">å‡½æ•°</h2><p>ä»¥ä¸Šå‡ æ­¥æ“ä½œéƒ½å°è£…å¥½äº†ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p><img src="48.png" style="zoom: 100%;" /><p>æ ·ä¾‹ï¼šthresholdä¸¤ä¸ªå€¼è¾ƒå°æ—¶ç²¾åº¦è¾ƒé«˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>, -<span class="number">1</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    dst1 = cv2.Canny(src,<span class="number">128</span>,<span class="number">255</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst1&quot;</span>, dst1)</span><br><span class="line">    dst = cv2.Canny(src, <span class="number">32</span>, <span class="number">128</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;dst2&quot;</span>, dst)</span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="61.png" style="zoom: 60%;" /><h1>å›¾åƒé‡‘å­—å¡”</h1><p>å›¾åƒé‡‘å­—å¡”æ˜¯å›¾åƒå¤šå°ºåº¦è¡¨è¾¾çš„ä¸€ç§ï¼Œæ˜¯ä¸€ç§ä»¥å¤šåˆ†è¾¨ç‡æ¥è§£é‡Šå›¾åƒçš„æœ‰æ•ˆä½†æ¦‚å¿µç®€å•çš„ç»“æ„ã€‚ä¸€å¹…å›¾åƒçš„é‡‘å­—å¡”æ˜¯ä¸€ç³»åˆ—ä»¥é‡‘å­—å¡”å½¢çŠ¶æ’åˆ—çš„åˆ†è¾¨ç‡é€æ­¥é™ä½ï¼Œä¸”æ¥æºäºåŒä¸€å¼ åŸå§‹å›¾çš„å›¾åƒé›†åˆã€‚å…¶é€šè¿‡æ¢¯æ¬¡å‘ä¸‹é‡‡æ ·è·å¾—ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªç»ˆæ­¢æ¡ä»¶æ‰åœæ­¢é‡‡æ ·ã€‚æˆ‘ä»¬å°†ä¸€å±‚ä¸€å±‚çš„å›¾åƒæ¯”å–»æˆé‡‘å­—å¡”ï¼Œå±‚çº§è¶Šé«˜ï¼Œåˆ™å›¾åƒè¶Šå°ï¼Œåˆ†è¾¨ç‡è¶Šä½ã€‚</p><h2 id="é«˜æ–¯é‡‘å­—å¡”">é«˜æ–¯é‡‘å­—å¡”</h2><p>é«˜æ–¯é‡‘å­—å¡”æ˜¯ç”±åº•éƒ¨çš„æœ€å¤§åˆ†è¾¨ç‡å›¾åƒé€æ¬¡å‘ä¸‹é‡‡æ ·å¾—åˆ°çš„ä¸€ç³»åˆ—å›¾åƒã€‚æœ€ä¸‹é¢çš„å›¾åƒåˆ†è¾¨ç‡æœ€é«˜ï¼Œè¶Šå¾€ä¸Šå›¾åƒåˆ†è¾¨ç‡è¶Šä½ã€‚</p><p><strong>è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªé‡å¤é«˜æ–¯å¹³æ»‘å¹¶é‡æ–°å¯¹å›¾åƒé‡‡æ ·çš„è¿‡ç¨‹</strong>ã€‚</p><ol><li>å¯¹äºåŸå§‹å›¾åƒå…ˆè¿›è¡Œä¸€æ¬¡é«˜æ–¯å¹³æ»‘å¤„ç†ï¼Œä½¿ç”¨é«˜æ–¯æ ¸ï¼ˆ<code>5 * 5</code>ï¼‰è¿›è¡Œä¸€æ¬¡å·ç§¯å¤„ç†ã€‚ä¸‹é¢æ˜¯ <code>5 * 5</code> çš„é«˜æ–¯æ ¸ã€‚</li></ol><img src="49.png" style="zoom: 100%;" /><ol><li>æ¥ä¸‹æ¥æ˜¯å¯¹å›¾åƒè¿›è¡Œé‡‡æ ·ï¼Œè¿™ä¸€æ­¥ä¼šå»é™¤å›¾åƒä¸­çš„å¶æ•°è¡Œå’Œå¥‡æ•°åˆ—ï¼Œä»è€Œå¾—åˆ°ä¸€å¼ å›¾åƒã€‚</li><li>å†ç„¶åæ˜¯é‡å¤ä¸Šé¢ä¸¤æ­¥ï¼Œç›´åˆ°å¾—åˆ°æœ€ç»ˆçš„ç›®æ ‡å›¾åƒä¸ºæ­¢ã€‚</li></ol><p>ä»ä¸Šé¢çš„æ­¥éª¤å¯ä»¥çœ‹å‡ºï¼Œå†æ¯æ¬¡å¾ªç¯ä¸­ï¼Œå¾—åˆ°çš„ç»“æœå›¾åƒåªæœ‰åŸå›¾åƒçš„ 1/4 å¤§å°ï¼ˆæ¨ªçºµå‘å‡åšéš”è¡Œé‡‡æ ·ï¼‰ã€‚</p><blockquote><p>æ³¨æ„ï¼šå‘ä¸‹é‡‡æ ·ä¼šé€æ¸ä¸¢å¤±å›¾åƒä¿¡æ¯ï¼Œå±äºéçº¿æ€§çš„å¤„ç†ï¼Œæ­¤è¿‡ç¨‹ä¸å¯é€†ï¼Œå±äºæœ‰æŸå¤„ç†ã€‚</p></blockquote><p>é«˜æ–¯é‡‘å­—å¡”å‘ä¸Šé‡‡æ ·ï¼š</p><ol><li>å°†å›¾åƒåœ¨æ¯ä¸ªæ–¹å‘æ‰©å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œæ–°å¢çš„è¡Œå’Œåˆ—ä»¥ 0 å¡«å……ã€‚</li><li>ä½¿ç”¨é«˜æ–¯æ ¸ï¼ˆ<code>5 * 5</code>ï¼‰å¯¹å¾—åˆ°çš„å›¾åƒè¿›è¡Œä¸€æ¬¡é«˜æ–¯å¹³æ»‘å¤„ç†ï¼Œè·å¾— ã€Œæ–°å¢åƒç´ ã€çš„è¿‘ä¼¼å€¼ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šæ­¤è¿‡ç¨‹ä¸å‘ä¸‹é‡‡æ ·çš„è¿‡ç¨‹ä¸€æ ·ï¼Œå±äºéçº¿æ€§å¤„ç†ï¼Œæ— æ³•é€†è½¬ï¼Œå±äºæœ‰æŸå¤„ç†ã€‚</p></blockquote><p>æ­¤è¿‡ç¨‹å¾—åˆ°çš„å›¾åƒä¸ºæ”¾å¤§åçš„å›¾åƒï¼Œä¸åŸå›¾ç›¸æ¯”ä¼šæ¯”è¾ƒæ¨¡ç³Šï¼Œå› ä¸ºåœ¨ç¼©æ”¾çš„è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ä¸€äº›å›¾åƒä¿¡æ¯ï¼Œå¦‚æœæƒ³åœ¨ç¼©å°å’Œæ”¾å¤§æ•´ä¸ªè¿‡ç¨‹ä¸­å‡å°‘ä¿¡æ¯çš„ä¸¢å¤±ã€‚</p><p>å¦‚æœåœ¨ç¼©æ”¾è¿‡ç¨‹ä¸­æƒ³è¦å‡å°‘å›¾åƒä¿¡æ¯çš„ä¸¢å¤±ï¼Œè¿™å°±å¼•å‡ºäº†ç¬¬äºŒä¸ªå›¾åƒé‡‘å­—å¡” â€”â€” ã€Œæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”ã€ ã€‚</p><h2 id="æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”">æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</h2><p>æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å¯ä»¥è®¤ä¸ºæ˜¯æ®‹å·®é‡‘å­—å¡”ï¼Œç”¨æ¥å­˜å‚¨ä¸‹é‡‡æ ·åå›¾ç‰‡ä¸åŸå§‹å›¾ç‰‡çš„å·®å¼‚ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†åŸºäºé«˜æ–¯é‡‘å­—å¡”ï¼Œä¸€ä¸ªåŸå§‹å›¾åƒ <code>Gi</code> ï¼Œå…ˆè¿›è¡Œå‘ä¸‹é‡‡æ ·å¾—åˆ° <code>G(i-1)</code> ï¼Œå†å¯¹ <code>G(i-1)</code> è¿›è¡Œå‘ä¸Šé‡‡æ ·å¾—åˆ° <code>Up(Down(Gi))</code> ï¼Œæœ€ç»ˆå¾—åˆ°çš„ <code>Up(Down(Gi))</code> ä¸åŸå§‹çš„ <code>Gi</code> æ˜¯å­˜åœ¨å·®å¼‚çš„ã€‚</p><p>è¿™æ˜¯å› ä¸ºå‘ä¸‹é‡‡æ ·ä¸¢å¤±çš„ä¿¡æ¯å¹¶ä¸èƒ½ç”±å‘ä¸Šé‡‡æ ·æ¥è¿›è¡Œæ¢å¤ï¼Œé«˜æ–¯é‡‘å­—å¡”æ˜¯ä¸€ç§æœ‰æŸçš„é‡‡æ ·æ–¹å¼ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å®Œå…¨æ¢å¤åŸå§‹å›¾åƒï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿›è¡Œé‡‡æ ·çš„æ—¶å€™å°±éœ€è¦ä¿ç•™å·®å¼‚ä¿¡æ¯ã€‚</p><p>è¿™å°±æ˜¯æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”çš„æ ¸å¿ƒæ€æƒ³ï¼Œ<strong>æ¯æ¬¡å‘ä¸‹é‡‡æ ·åï¼Œå°†å†æ¬¡å‘ä¸Šé‡‡æ ·ï¼Œå¾—åˆ°å‘ä¸Šé‡‡æ ·çš„ <code>Up(Down(Gi))</code> åï¼Œè®°å½• <code>Up(Down(Gi))</code> ä¸ <code>Gi</code> çš„å·®å¼‚ä¿¡æ¯</strong>ã€‚</p><img src="50.png" style="zoom: 100%;" /><h2 id="å‡½æ•°-10">å‡½æ•°</h2><p>OpenCV ä¸ºå‘ä¸Šé‡‡æ ·å’Œå‘ä¸‹é‡‡æ ·æä¾›äº†ä¸¤ä¸ªå‡½æ•°ï¼š<code>pyrDown()</code> å’Œ <code>pyrUp()</code> ã€‚</p><p><code>pyrDown()</code> çš„åŸå‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def pyrDown(src, dst=None, dstsize=None, borderType=None)</span><br></pre></td></tr></table></figure><ul><li>src: è¡¨ç¤ºè¾“å…¥å›¾åƒã€‚</li><li>dst: è¡¨ç¤ºè¾“å‡ºå›¾åƒï¼Œå®ƒä¸srcç±»å‹ã€å¤§å°ç›¸åŒã€‚</li><li>dstsize: è¡¨ç¤ºé™é‡‡æ ·ä¹‹åçš„ç›®æ ‡å›¾åƒçš„å¤§å°ã€‚</li><li>borderType: è¡¨ç¤ºè¡¨ç¤ºå›¾åƒè¾¹ç•Œçš„å¤„ç†æ–¹å¼ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼šdstsize å‚æ•°æ˜¯æœ‰é»˜è®¤å€¼çš„ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¸æŒ‡å®šç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼æ˜¯æŒ‰ç…§ Size((src.cols+1)/2, (src.rows+1)/2) è®¡ç®—çš„ã€‚è€Œä¸”ä¸ç®¡å¦‚ä½•æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œä¸€å®šå¿…é¡»ä¿è¯æ»¡è¶³ä»¥ä¸‹å…³ç³»å¼ï¼š|dstsize.width * 2 - src.cols| â‰¤ 2;  |dstsize.height * 2 - src.rows| â‰¤ 2ã€‚ä¹Ÿå°±æ˜¯è¯´é™é‡‡æ ·çš„æ„æ€å…¶å®æ˜¯æŠŠå›¾åƒçš„å°ºå¯¸ç¼©å‡ä¸€åŠï¼Œè¡Œå’Œåˆ—åŒæ—¶ç¼©å‡ä¸€åŠã€‚</p></blockquote><p><code>pyrUp()</code> çš„åŸå‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def pyrUp(src, dst=None, dstsize=None, borderType=None)</span><br></pre></td></tr></table></figure><ul><li>src: è¡¨ç¤ºè¾“å…¥å›¾åƒã€‚</li><li>dst: è¡¨ç¤ºè¾“å‡ºå›¾åƒï¼Œå®ƒä¸srcç±»å‹ã€å¤§å°ç›¸åŒã€‚</li><li>dstsize: è¡¨ç¤ºé™é‡‡æ ·ä¹‹åçš„ç›®æ ‡å›¾åƒçš„å¤§å°ã€‚</li><li>borderType: è¡¨ç¤ºè¡¨ç¤ºå›¾åƒè¾¹ç•Œçš„å¤„ç†æ–¹å¼ã€‚</li></ul><p>å‚æ•°é‡Šä¹‰å’Œä¸Šé¢çš„ <code>pyrDown()</code> ä¿æŒä¸€è‡´ã€‚</p><p>ä¸‹é¢æ˜¯é«˜æ–¯é‡‘å­—å¡”å’Œæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”çš„ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="comment">#é«˜æ–¯é‡‘å­—å¡”</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gaussian_pyramid</span>(<span class="params">image</span>):</span></span><br><span class="line">    level = <span class="number">3</span><span class="comment">#è®¾ç½®é‡‘å­—å¡”çš„å±‚æ•°ä¸º3</span></span><br><span class="line">    temp = image.copy()  <span class="comment">#æ‹·è´å›¾åƒ</span></span><br><span class="line">    gaussian_images = []  <span class="comment">#å»ºç«‹ä¸€ä¸ªç©ºåˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(level):</span><br><span class="line">        dst = cv.pyrDown(temp)   <span class="comment">#å…ˆå¯¹å›¾åƒè¿›è¡Œé«˜æ–¯å¹³æ»‘ï¼Œç„¶åå†è¿›è¡Œé™é‡‡æ ·ï¼ˆå°†å›¾åƒå°ºå¯¸è¡Œå’Œåˆ—æ–¹å‘ç¼©å‡ä¸€åŠï¼‰</span></span><br><span class="line">        gaussian_images.append(dst)  <span class="comment">#åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡</span></span><br><span class="line">        cv.imshow(<span class="string">&quot;gaussian&quot;</span>+<span class="built_in">str</span>(i), dst)</span><br><span class="line">        temp = dst.copy()</span><br><span class="line">    <span class="keyword">return</span> gaussian_images</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">laplacian_pyramid</span>(<span class="params">image</span>):</span></span><br><span class="line">    gaussian_images = gaussian_pyramid(image)    <span class="comment">#åšæ‹‰æ™®æ‹‰æ–¯é‡‘å­—å¡”å¿…é¡»ç”¨åˆ°é«˜æ–¯é‡‘å­—å¡”çš„ç»“æœ</span></span><br><span class="line">    level = <span class="built_in">len</span>(gaussian_images)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(level-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> (i-<span class="number">1</span>) &lt; <span class="number">0</span>:</span><br><span class="line">            expand = cv.pyrUp(gaussian_images[i], dstsize = image.shape[:<span class="number">2</span>])</span><br><span class="line">            laplacian = cv.subtract(image, expand)</span><br><span class="line">            <span class="comment"># å±•ç¤ºå·®å€¼å›¾åƒ</span></span><br><span class="line">            cv.imshow(<span class="string">&quot;laplacian_down_&quot;</span>+<span class="built_in">str</span>(i), laplacian)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            expand = cv.pyrUp(gaussian_images[i], dstsize = gaussian_images[i-<span class="number">1</span>].shape[:<span class="number">2</span>])</span><br><span class="line">            laplacian = cv.subtract(gaussian_images[i-<span class="number">1</span>], expand)</span><br><span class="line">            <span class="comment"># å±•ç¤ºå·®å€¼å›¾åƒ</span></span><br><span class="line">            cv.imshow(<span class="string">&quot;laplacian_down_&quot;</span>+<span class="built_in">str</span>(i), laplacian)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">src = cv.imread(<span class="string">&#x27;maliao.jpg&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(src.shape)</span><br><span class="line"><span class="comment"># å…ˆå°†å›¾åƒè½¬åŒ–æˆæ­£æ–¹å½¢ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line">input_image = cv.resize(src, (<span class="number">560</span>, <span class="number">560</span>))</span><br><span class="line"><span class="comment"># è®¾ç½®ä¸º WINDOW_NORMAL å¯ä»¥ä»»æ„ç¼©æ”¾</span></span><br><span class="line">cv.namedWindow(<span class="string">&#x27;input_image&#x27;</span>, cv.WINDOW_AUTOSIZE)</span><br><span class="line">cv.imshow(<span class="string">&#x27;input_image&#x27;</span>, src)</span><br><span class="line">laplacian_pyramid(src)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><h1>å›¾åƒè½®å»“</h1><p>è¾¹ç¼˜æ£€æµ‹è™½ç„¶èƒ½å¤Ÿæ£€æµ‹å‡ºè¾¹ç¼˜ï¼Œä½†è¾¹ç¼˜æ˜¯ä¸è¿ç»­çš„ï¼Œæ£€æµ‹åˆ°çš„è¾¹ç¼˜å¹¶ä¸æ˜¯ä¸€ä¸ªæ•´ä½“ã€‚<strong>å›¾åƒè½®å»“æ˜¯æŒ‡å°†è¾¹ç¼˜è¿æ¥èµ·æ¥å½¢æˆçš„ä¸€ä¸ªæ•´ä½“ï¼Œ ç”¨åƒåç»­çš„è®¡ç®—</strong>ã€‚<br>OpenCVæä¾›äº†æŸ¥æ‰¾å›¾åƒè½®å»“çš„å‡½æ•°<code>cv2.findContours()</code>ï¼Œè¯¥å‡½æ•°èƒ½å¤ŸæŸ¥æ‰¾å›¾åƒå†…çš„è½®å»“ä¿¡æ¯ï¼Œè€Œå‡½æ•°<code>cv2.drawContours()</code> èƒ½å¤Ÿå°†è½®å»“ç»˜åˆ¶å‡ºæ¥ã€‚<br>å›¾åƒè½®å»“æ˜¯å›¾åƒä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹å¾ä¿¡æ¯ï¼Œé€šè¿‡å¯¹å›¾åƒè½®å»“çš„æ“ä½œï¼Œæˆ‘ä»¬èƒ½å¤Ÿè·å–ç›®æ ‡å›¾åƒçš„å¤§å° ã€ä½ç½® ã€æ–¹å‘ç­‰ä¿¡æ¯ã€‚</p><h2 id="æŸ¥æ‰¾ä¸ç»˜åˆ¶">æŸ¥æ‰¾ä¸ç»˜åˆ¶</h2><p>ä¸€ä¸ªè½®å»“å¯¹åº”ç€<strong>ä¸€ç³»åˆ—çš„ç‚¹</strong>ï¼Œè¿™äº›ç‚¹ä»¥æŸç§æ–¹å¼è¡¨ç¤ºå›¾åƒä¸­çš„ä¸€æ¡æ›²çº¿ã€‚åœ¨ OpenCV ä¸­ï¼Œå‡½æ•°<code>cv2.findContours()</code>ç”¨äºæŸ¥æ‰¾å›¾åƒçš„è½®å»“ï¼Œå¹¶èƒ½å¤Ÿæ ¹æ®å‚æ•°è¿”å›ç‰¹å®šè¡¨ç¤ºæ–¹å¼çš„è½®å»“ï¼ˆæ›²çº¿ï¼‰ã€‚å‡½æ•°<code>cv2.drawContours()</code>èƒ½å¤Ÿå°†æŸ¥æ‰¾åˆ°çš„è½®å»“ç»˜åˆ¶åˆ°å›¾åƒä¸Šï¼Œè¯¥å‡½æ•°å¯ä»¥æ ¹æ®å‚æ•°åœ¨å›¾åƒä¸Šç»˜åˆ¶ä¸åŒæ ·å¼ï¼ˆå®å¿ƒï¼ç©ºå¿ƒç‚¹ï¼Œ ä»¥åŠçº¿æ¡çš„ä¸åŒç²—ç»†ã€é¢œè‰²ç­‰ï¼‰çš„è½®å»“ï¼Œå¯ä»¥ç»˜åˆ¶å…¨éƒ¨è½®å»“ä¹Ÿå¯ä»¥ä»…ç»˜åˆ¶æŒ‡å®šçš„è½®å»“ã€‚</p><h3 id="æŸ¥æ‰¾è½®å»“">æŸ¥æ‰¾è½®å»“</h3><p>åœ¨ OpenCV ä¸­ï¼Œè½®å»“æå–å‡½æ•° <code>findContours()</code> å®ç°çš„æ˜¯ 1985 å¹´ç”±ä¸€åå«åš <code>Satoshi Suzuki</code> çš„äººå‘è¡¨çš„ä¸€ç¯‡è®ºæ–‡ä¸­çš„ç®—æ³•ï¼Œå¦‚ä¸‹ï¼š</p><blockquote><p>Satoshi Suzuki and others. Topological structural analysis of digitized binary images by border following. Computer Vision, Graphics, and Image Processing, 30(1):32â€“46, 1985.</p></blockquote><p>å¯¹åŸç†æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»æœæœçœ‹ï¼Œä¸æ˜¯å¾ˆéš¾ç†è§£ã€‚</p><p>å…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&quot;black.png&quot;</span>)</span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># é™å™ª</span></span><br><span class="line">ret, thresh = cv.threshold(gray_img, <span class="number">127</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># å¯»æ‰¾è½®å»“</span></span><br><span class="line">contours, hierarchy = cv.findContours(thresh, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(contours[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾è½®å»“ä½¿ç”¨çš„å‡½æ•°ä¸º <code>findContours()</code> ï¼Œå®ƒçš„åŸå‹å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">contours, hierarchy=cv2.findContours(image, mode, method[, contours[, hierarchy[, offset ]]])  </span><br></pre></td></tr></table></figure><ul><li>contoursï¼šè¿”å›çš„å›¾åƒè½®å»“ï¼Œæ˜¯ä¸ªListï¼Œcontours[i]æ˜¯ç¬¬iä¸ªè½®å»“ï¼Œcontours[i][j]æ˜¯ç¬¬iä¸ªè½®å»“çš„ç¬¬jä¸ªç‚¹</li><li>hierarchyï¼šå›¾åƒçš„æ‹“æ‰‘ä¿¡æ¯ï¼ˆå›¾åƒå±‚æ¬¡ï¼‰</li><li>imageï¼šæºå›¾åƒã€‚</li><li>modeï¼šè¡¨ç¤ºè½®å»“æ£€ç´¢æ¨¡å¼ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cv2.RETR_EXTERNAL è¡¨ç¤ºåªæ£€æµ‹å¤–è½®å»“ã€‚</span><br><span class="line">cv2.RETR_LIST æ£€æµ‹çš„è½®å»“ä¸å»ºç«‹ç­‰çº§å…³ç³»ã€‚</span><br><span class="line">cv2.RETR_CCOMP å»ºç«‹ä¸¤ä¸ªç­‰çº§çš„è½®å»“ï¼Œä¸Šé¢çš„ä¸€å±‚ä¸ºå¤–è¾¹ç•Œï¼Œé‡Œé¢çš„ä¸€å±‚ä¸ºå†…å­”çš„è¾¹ç•Œä¿¡æ¯ã€‚å¦‚æœå†…å­”å†…è¿˜æœ‰ä¸€ä¸ªè¿é€šç‰©ä½“ï¼Œè¿™ä¸ªç‰©ä½“çš„è¾¹ç•Œä¹Ÿåœ¨é¡¶å±‚ã€‚</span><br><span class="line">cv2.RETR_TREE å»ºç«‹ä¸€ä¸ªç­‰çº§æ ‘ç»“æ„çš„è½®å»“ã€‚</span><br></pre></td></tr></table></figure><ul><li>methodï¼šè¡¨ç¤ºè½®å»“è¿‘ä¼¼æ–¹æ³•ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv2.CHAIN_APPROX_NONE å­˜å‚¨æ‰€æœ‰çš„è½®å»“ç‚¹ã€‚</span><br><span class="line">cv2.CHAIN_APPROX_SIMPLE å‹ç¼©æ°´å¹³æ–¹å‘ï¼Œå‚ç›´æ–¹å‘ï¼Œå¯¹è§’çº¿æ–¹å‘çš„å…ƒç´ ï¼Œåªä¿ç•™è¯¥æ–¹å‘çš„ç»ˆç‚¹åæ ‡ï¼Œä¾‹å¦‚ä¸€ä¸ªçŸ©å½¢è½®å»“åªéœ€4ä¸ªç‚¹æ¥ä¿å­˜è½®å»“ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥ä½¿ç”¨ <code>print(len(contours[0]))</code> å‡½æ•°å°†åŒ…å«çš„ç‚¹çš„æ•°é‡æ‰“å°å‡ºæ¥ï¼Œæ¯”å¦‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨å‚æ•° <code>cv2.CHAIN_APPROX_NONE</code> è½®å»“ç‚¹æœ‰ 1382 ä¸ªï¼Œè€Œä½¿ç”¨å‚æ•° <code>cv2.CHAIN_APPROX_SIMPLE</code> åˆ™è½®å»“ç‚¹åªæœ‰ 4 ä¸ªã€‚</p><img src="62.png" style="zoom: 100%;" /><h3 id="ç»˜åˆ¶è½®å»“">ç»˜åˆ¶è½®å»“</h3><p>ç»˜åˆ¶è½®å»“ä½¿ç”¨åˆ°çš„ OpenCV ä¸ºæˆ‘ä»¬æä¾›çš„ <code>drawContours()</code> è¿™ä¸ªå‡½æ•°ï¼Œä¸‹é¢æ˜¯å®ƒçš„ä¸‰ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># To draw all the contours in an image:</span><br><span class="line">cv2.drawContours(img, contours, -1, (0,255,0), 3)</span><br><span class="line"># To draw an individual contour, say 4th contour:</span><br><span class="line">cv2.drawContours(img, contours, 3, (0,255,0), 3)</span><br><span class="line"># But most of the time, below method will be useful:</span><br><span class="line">cnt = contours[4]</span><br><span class="line">cv2.drawContours(img, [cnt], 0, (0,255,0), 3)</span><br></pre></td></tr></table></figure><p><code>drawContours()</code> å‡½æ•°ä¸­æœ‰äº”ä¸ªå‚æ•°ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æºå›¾åƒã€‚</li><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯åº”è¯¥åŒ…å«è½®å»“çš„åˆ—è¡¨ã€‚</li><li>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åˆ—è¡¨ç´¢å¼•ï¼Œç”¨æ¥é€‰æ‹©è¦ç»˜åˆ¶çš„è½®å»“ï¼Œä¸º-1æ—¶è¡¨ç¤ºç»˜åˆ¶æ‰€æœ‰è½®å»“ã€‚</li><li>ç¬¬å››ä¸ªå‚æ•°æ˜¯è½®å»“é¢œè‰²ã€‚</li><li>ç¬¬äº”ä¸ªå‚æ•°æ˜¯è½®å»“çº¿çš„å®½åº¦ï¼Œä¸º -1 æ—¶è¡¨ç¤ºå¡«å……ã€‚</li></ul><p>æˆ‘ä»¬æ¥ç€å‰é¢çš„ç¤ºä¾‹æŠŠä½¿ç”¨ <code>findContours()</code> æ‰¾å‡ºæ¥çš„è½®å»“ç»˜åˆ¶å‡ºæ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import cv2 as cv</span><br><span class="line"></span><br><span class="line">img = cv.imread(&quot;black.png&quot;)</span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">cv.imshow(&quot;img&quot;, img)</span><br><span class="line"># é™å™ª</span><br><span class="line">ret, thresh = cv.threshold(gray_img, 127, 255, 0)</span><br><span class="line"># å¯»æ‰¾è½®å»“</span><br><span class="line">contours, hierarchy = cv.findContours(gray_img, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"></span><br><span class="line">print(len(contours[0]))</span><br><span class="line"></span><br><span class="line"># ç»˜åˆ¶ç»¿è‰²è½®å»“</span><br><span class="line">cv.drawContours(img, contours, -1, (0,255,0), 3)</span><br><span class="line"></span><br><span class="line">cv.imshow(&quot;draw&quot;, img)</span><br><span class="line"></span><br><span class="line">cv.waitKey(0)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="63.png" style="zoom: 100%;" /><h3 id="ä½¿ç”¨ï¼šæå–å‰æ™¯">ä½¿ç”¨ï¼šæå–å‰æ™¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    src = cv2.imread(<span class="string">&quot;image\\0.png&quot;</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;src&quot;</span>, src)</span><br><span class="line">    grey = cv2.cvtColor(src, cv2.COLOR_BGR2GRAY)  <span class="comment"># ç°åº¦å›¾</span></span><br><span class="line">    ret, binary = cv2.threshold(grey, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)  <span class="comment"># äºŒå€¼åŒ–</span></span><br><span class="line">    counters, hierarchy = cv2.findContours(binary, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)  <span class="comment"># è·å–è½®å»“</span></span><br><span class="line">    mask = np.zeros(src.shape, np.uint8)  <span class="comment"># æŒ‰ç…§åŸå›¾å¤§å°åˆ›å»ºæ©æ¨¡</span></span><br><span class="line">    mask = cv2.drawContours(mask, counters, -<span class="number">1</span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>), -<span class="number">1</span>)  <span class="comment"># ç»™æ©æ¨¡èµ‹å€¼ä¸ºå‰æ™¯å›¾çš„å®å¿ƒè½®å»“</span></span><br><span class="line">    cv2.imshow(<span class="string">&quot;mask&quot;</span>, mask)</span><br><span class="line">    loc = cv2.bitwise_and(src, mask)</span><br><span class="line">    cv2.imshow(<span class="string">&quot;result&quot;</span>, loc)</span><br><span class="line">    cv2.waitKey()</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="64.png" style="zoom: 100%;" /><p><strong>ä»¥ä¸Šçš„ä»£ç åªé’ˆå¯¹æ ·ä¾‹å›¾åƒï¼Œå¹¶ä¸æ™®é€‚</strong></p><h2 id="çŸ©ç‰¹å¾">çŸ©ç‰¹å¾</h2><h3 id="çŸ©çš„è®¡ç®—ï¼šmoments">çŸ©çš„è®¡ç®—ï¼š<code>moments()</code></h3><p><code>moments()</code> å‡½æ•°ä¼šå°†è®¡ç®—å¾—åˆ°çš„çŸ©ä»¥å­—å…¸å½¢å¼è¿”å›ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&quot;number.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># é™å™ª</span></span><br><span class="line">ret, thresh = cv.threshold(gray_img, <span class="number">127</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># å¯»æ‰¾è½®å»“</span></span><br><span class="line">contours, hierarchy = cv.findContours(gray_img, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"></span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># è·å–å›¾åƒçŸ©</span></span><br><span class="line">M = cv.moments(cnt)</span><br><span class="line"><span class="built_in">print</span>(M)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è´¨å¿ƒ</span></span><br><span class="line">cx = <span class="built_in">int</span>(M[<span class="string">&#x27;m10&#x27;</span>] / M[<span class="string">&#x27;m00&#x27;</span>])</span><br><span class="line">cy = <span class="built_in">int</span>(M[<span class="string">&#x27;m01&#x27;</span>] / M[<span class="string">&#x27;m00&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;è´¨å¿ƒä¸ºï¼š[<span class="subst">&#123;cx&#125;</span>, <span class="subst">&#123;cy&#125;</span>]&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å–å¾—äº†è¿™ä¸ªå›¾åƒçš„çŸ©ï¼ŒçŸ© M ä¸­åŒ…å«äº†å¾ˆå¤šè½®å»“çš„ç‰¹å¾ä¿¡æ¯ï¼Œé™¤äº†ç¤ºä¾‹ä¸­å±•ç¤ºçš„è´¨å¿ƒçš„è®¡ç®—ï¼Œè¿˜æœ‰å¦‚ M[â€˜m00â€™] è¡¨ç¤ºè½®å»“é¢ç§¯ã€‚</p><img src="65.png" style="zoom: 100%;" /><p>â€‹        åœ¨ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè™½ç„¶è½®å»“çš„é¢ç§¯ã€å‘¨é•¿ç­‰ç‰¹å¾ä¸å˜ï¼Œä½†æ˜¯æ›´é«˜é˜¶çš„ç‰¹å¾ä¼šéšç€ä½ç½®çš„å˜åŒ–è€Œå‘ç”Ÿå˜åŒ–ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯”è¾ƒä¸åŒä½ç½®çš„ä¸¤ä¸ªå¯¹è±¡çš„ä¸€è‡´æ€§ã€‚è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ³•æ˜¯å¼•å…¥<strong>ä¸­å¿ƒçŸ©</strong>ã€‚ä¸­å¿ƒçŸ©é€šè¿‡åŸå»å‡å€¼è€Œè·å–å¹³ç§»ä¸å˜æ€§ï¼Œå› è€Œèƒ½å¤Ÿæ¯”è¾ƒä¸åŒä½ç½®çš„ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€è‡´ã€‚å¾ˆæ˜æ˜¾ï¼Œ<strong>ä¸­å¿ƒçŸ©å…·æœ‰çš„å¹³ç§»ä¸å˜æ€§ï¼Œä½¿å®ƒèƒ½å¤Ÿå¿½ç•¥ä¸¤ä¸ªå¯¹è±¡çš„ä½ç½®å…³ç³»ï¼Œå¸®åŠ©æˆ‘ä»¬æ¯”è¾ƒä¸åŒä½ç½®ä¸Šä¸¤ä¸ªå¯¹è±¡çš„ä¸€è‡´æ€§</strong>ã€‚</p><p>â€‹        é™¤äº†è€ƒè™‘å¹³ç§»ä¸å˜æ€§å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šè€ƒè™‘ç»è¿‡ç¼©æ”¾åå¤§å°ä¸ä¸€è‡´çš„å¯¹è±¡çš„ä¸€è‡´æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›å›¾åƒåœ¨ç¼©æ”¾å‰åèƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªç¨³å®šçš„ç‰¹å¾å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ ï¼Œè®©å›¾åƒåœ¨ç¼©æ”¾å‰åå…·æœ‰åŒæ ·çš„ç‰¹å¾å€¼ã€‚æ˜¾ç„¶ï¼Œä¸­å¿ƒçŸ©ä¸å…·æœ‰è¿™ä¸ªå±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªå½¢çŠ¶ä¸€è‡´ã€å¤§å°ä¸ä¸€çš„å¯¹è±¡ï¼Œå…¶ä¸­å¿ƒçŸ©æ˜¯æœ‰å·®å¼‚çš„ã€‚</p><p>â€‹        <strong>å½’ä¸€åŒ–ä¸­å¿ƒçŸ©é€šè¿‡é™¤ä»¥ç‰©ä½“æ€»å°ºå¯¸è€Œè·å¾—ç¼©æ”¾ä¸å˜æ€§</strong>ã€‚å®ƒé€šè¿‡ä¸Šè¿°è®¡ç®—æå–å¯¹è±¡çš„å½’ä¸€åŒ–ä¸­å¿ƒçŸ©å±æ€§å€¼ï¼Œè¯¥å±æ€§å€¼ä¸ä»…å…·æœ‰å¹³ç§»ä¸å˜æ€§ï¼Œ è¿˜å…·æœ‰ç¼©æ”¾ä¸å˜æ€§ã€‚åœ¨OpenCVä¸­ï¼Œ å‡½æ•°<code>cv2.moments()</code>ä¼šåŒæ—¶è®¡ç®—ä¸Šè¿°ç©ºé—´çŸ©ã€ä¸­å¿ƒçŸ©å’Œå½’ä¸€åŒ–ä¸­å¿ƒçŸ©ã€‚</p><h3 id="HuçŸ©">HuçŸ©</h3><p>â€‹        HuçŸ©æ˜¯å½’ä¸€åŒ–ä¸­å¿ƒçŸ©çš„çº¿æ€§ç»„åˆã€‚HuçŸ©åœ¨å›¾åƒæ—‹è½¬ã€ç¼©æ”¾ ã€å¹³ç§»ç­‰æ“ä½œåï¼Œä»èƒ½ä¿æŒçŸ©çš„ä¸å˜æ€§ï¼Œæ‰€ä»¥ç»å¸¸ä¼šä½¿ç”¨Huè·æ¥è¯†åˆ«å›¾åƒçš„ç‰¹å¾ã€‚<br>â€‹        åœ¨OpenCVä¸­ï¼Œä½¿ç”¨å‡½æ•°<code>cv2.HuMoments() </code>å¯ä»¥å¾—åˆ°Huè·ã€‚è¯¥å‡½æ•°ä½¿ç”¨<code>cv2.moments()</code>å‡½ æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ï¼Œè¿”å›7ä¸ªHuçŸ©å€¼ã€‚</p><p>â€‹        å‡½æ•°cv2.HuMoments(ï¼‰çš„è¯­æ³•æ ¼å¼ä¸ºï¼š<br><code>hu=cv2.HuMoments (m) </code><br>â€‹         å¼ä¸­è¿”å›å€¼hu, è¡¨ç¤ºè¿”å›çš„HuçŸ©å€¼ï¼›å‚æ•°m, æ˜¯ç”±å‡½æ•°<code>cv2.moments()</code>è®¡ç®—å¾—åˆ°çŸ©ç‰¹å¾å€¼ã€‚</p><img src="66.png" style="zoom: 100%;" /><p>æœ€åä¸€ä¸ªå‚æ•°ç›´æ¥ç½®0å³å¯ã€‚</p><h2 id="è½®å»“æ‹Ÿåˆ">è½®å»“æ‹Ÿåˆ</h2><h3 id="æ­£çŸ©å½¢å’Œæœ€å°çŸ©å½¢">æ­£çŸ©å½¢å’Œæœ€å°çŸ©å½¢</h3><p>è½®å»“å¤–æ¥çŸ©å½¢åˆ†ä¸ºæ­£çŸ©å½¢å’Œæœ€å°çŸ©å½¢ã€‚ä½¿ç”¨ <code>cv2.boundingRect(cnt)</code> æ¥è·å–è½®å»“çš„å¤–æ¥æ­£çŸ©å½¢ï¼Œå®ƒä¸è€ƒè™‘ç‰©ä½“çš„æ—‹è½¬ï¼Œæ‰€ä»¥è¯¥çŸ©å½¢çš„é¢ç§¯ä¸€èˆ¬ä¸ä¼šæœ€å°ï¼›ä½¿ç”¨ <code>cv.minAreaRect(cnt)</code> å¯ä»¥è·å–è½®å»“çš„å¤–æ¥æœ€å°çŸ©å½¢ã€‚</p><img src="67.png" style="zoom: 100%;" /><p>ä¸¤è€…çš„åŒºåˆ«å¦‚ä¸Šå›¾ï¼Œç»¿çº¿ä»£è¡¨çš„æ˜¯å¤–æ¥æ­£çŸ©å½¢ï¼Œçº¢çº¿ä»£è¡¨çš„æ˜¯å¤–æ¥æœ€å°çŸ©å½¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&quot;number.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment"># é™å™ª</span></span><br><span class="line">ret, thresh = cv.threshold(gray_img, <span class="number">127</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># å¯»æ‰¾è½®å»“</span></span><br><span class="line">contours, hierarchy = cv.findContours(gray_img, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"></span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤–æ¥æ­£çŸ©å½¢</span></span><br><span class="line">x, y, w, h = cv.boundingRect(cnt)</span><br><span class="line">cv.rectangle(img, (x, y), (x + w, y + h), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤–æ¥æœ€å°çŸ©å½¢</span></span><br><span class="line">min_rect = cv.minAreaRect(cnt)</span><br><span class="line"><span class="built_in">print</span>(min_rect)</span><br><span class="line"></span><br><span class="line">box = cv.boxPoints(min_rect)</span><br><span class="line">box = np.int0(box)</span><br><span class="line">cv.drawContours(img, [box], <span class="number">0</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">cv.imshow(<span class="string">&quot;draw&quot;</span>, img)</span><br><span class="line"></span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><p><code>boundingRect(cnt)</code> å‡½æ•°çš„è¿”å›å€¼åŒ…å«å››ä¸ªå€¼ï¼ŒçŸ©å½¢æ¡†å·¦ä¸Šè§’çš„åæ ‡ (x, y) ã€å®½åº¦ w å’Œé«˜åº¦ h ã€‚</p><p><code>minAreaRect(cnt)</code> å‡½æ•°çš„è¿”å›å€¼ä¸­è¿˜åŒ…å«æ—‹è½¬ä¿¡æ¯ï¼Œè¿”å›å€¼ä¿¡æ¯ä¸ºåŒ…æ‹¬ä¸­å¿ƒç‚¹åæ ‡ (x,y)ï¼Œå®½é«˜ (w, h) å’Œæ—‹è½¬è§’åº¦ã€‚</p><p>å‚æ•°<code>cnt</code>å¯ä»¥æ˜¯ç°åº¦å›¾æˆ–è€…è½®å»“ã€‚</p><h3 id="æœ€å°åŒ…å›´åœ†">æœ€å°åŒ…å›´åœ†</h3><p><code>center,radius = cv2.minEnclosingCircle(points)</code></p><ul><li>centeræ˜¯æœ€å°åŒ…å›´åœ†çš„ä¸­å¿ƒ</li><li>radiusæ˜¯åŠå¾„</li><li>pointsæ˜¯è½®å»“</li></ul><h3 id="æœ€ä¼˜æ‹Ÿåˆæ¤­åœ†">æœ€ä¼˜æ‹Ÿåˆæ¤­åœ†</h3><p><code>retval = cv2.fitEllipse(points)</code></p><p>ä¼—æ‰€å‘¨çŸ¥æ¯ä¸ªæ¤­åœ†éƒ½æœ‰ç›¸åº”çš„å¤–æ¥çŸ©å½¢ï¼Œè¿”å›å€¼<code>retval</code>åŒ…å«å¤–æ¥çŸ©å½¢çš„è´¨å¿ƒã€å®½ã€é«˜ã€æ—‹è½¬è§’åº¦ç­‰å‚æ•°ä¿¡æ¯ã€‚</p><h3 id="æœ€ä¼˜æ‹Ÿåˆç›´çº¿">æœ€ä¼˜æ‹Ÿåˆç›´çº¿</h3><img src="68.png" style="zoom: 100%;" /><h3 id="æœ€å°å¤–åŒ…ä¸‰è§’å½¢">æœ€å°å¤–åŒ…ä¸‰è§’å½¢</h3><p><code>retval,triangle = cv2.minEnclosingTriangle(points)</code></p><ul><li>retvalï¼šæœ€å°å¤–åŒ…ä¸‰è§’å½¢çš„é¢ç§¯</li><li>triangleï¼šæœ€å°å¤–åŒ…ä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹çš„é›†åˆ</li></ul><h3 id="è½®å»“è¿‘ä¼¼ï¼ˆé€¼è¿‘å¤šè¾¹å½¢ï¼‰">è½®å»“è¿‘ä¼¼ï¼ˆé€¼è¿‘å¤šè¾¹å½¢ï¼‰</h3><p>æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„ç²¾åº¦ï¼Œå®ƒå¯ä»¥å°†è½®å»“å½¢çŠ¶è¿‘ä¼¼ä¸ºé¡¶ç‚¹æ•°é‡è¾ƒå°‘çš„å…¶ä»–å½¢çŠ¶ã€‚å®ƒæ˜¯ç”± Douglas-Peucker ç®—æ³•å®ç°çš„ã€‚</p><p>OpenCV æä¾›çš„å‡½æ•°æ˜¯ <code>approxPolyDP(cnt, epsilon, close)</code></p><ul><li><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è½®å»“ã€‚</p></li><li><p>ç¬¬äºŒä¸ªå‚æ•° epsilon ç”¨äºè½®å»“è¿‘ä¼¼çš„ç²¾åº¦ï¼Œè¡¨ç¤ºåŸå§‹è½®å»“ä¸å…¶è¿‘ä¼¼è½®å»“çš„æœ€å¤§è·ç¦»ï¼Œå€¼è¶Šå°ï¼Œè¿‘ä¼¼è½®å»“è¶Šæ‹ŸåˆåŸè½®å»“ã€‚</p></li><li><p>ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šè¿‘ä¼¼è½®å»“æ˜¯å¦æ˜¯é—­åˆçš„ï¼Œå¸ƒå°”ç±»å‹ã€‚</p></li></ul><p>å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import cv2 as cv</span><br><span class="line"></span><br><span class="line">img = cv.imread(&quot;number.png&quot;)</span><br><span class="line"></span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"># é™å™ª</span><br><span class="line">ret, thresh = cv.threshold(gray_img, 127, 255, 0)</span><br><span class="line"># å¯»æ‰¾è½®å»“</span><br><span class="line">contours, hierarchy = cv.findContours(gray_img, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line"></span><br><span class="line">cnt = contours[0]</span><br><span class="line"></span><br><span class="line"># è®¡ç®— epsilon ï¼ŒæŒ‰ç…§å‘¨é•¿ç™¾åˆ†æ¯”è¿›è¡Œè®¡ç®—ï¼Œåˆ†åˆ«å–å‘¨é•¿ 1% å’Œ 10%</span><br><span class="line">epsilon_1 = 0.1 * cv.arcLength(cnt, True)</span><br><span class="line">epsilon_2 = 0.01 * cv.arcLength(cnt, True)</span><br><span class="line"></span><br><span class="line"># è¿›è¡Œå¤šè¾¹å½¢é€¼è¿‘</span><br><span class="line">approx_1 = cv.approxPolyDP(cnt, epsilon_1, True)</span><br><span class="line">approx_2 = cv.approxPolyDP(cnt, epsilon_2, True)</span><br><span class="line"></span><br><span class="line"># ç”»å‡ºå¤šè¾¹å½¢</span><br><span class="line">image_1 = cv.cvtColor(gray_img, cv.COLOR_GRAY2BGR)</span><br><span class="line">image_2 = cv.cvtColor(gray_img, cv.COLOR_GRAY2BGR)</span><br><span class="line"></span><br><span class="line">cv.polylines(image_1, [approx_1], True, (0, 0, 255), 2)</span><br><span class="line">cv.polylines(image_2, [approx_2], True, (0, 0, 255), 2)</span><br><span class="line">#è¿™é‡Œçš„ç»˜åˆ¶å‡½æ•°ä¼šåœ¨åé¢è®²åˆ°</span><br><span class="line">#å¯ä»¥ç”¨drawContours()ä»£æ›¿</span><br><span class="line"></span><br><span class="line">cv.imshow(&quot;image_1&quot;, image_1)</span><br><span class="line">cv.imshow(&quot;image_2&quot;, image_2)</span><br><span class="line">cv.waitKey(0)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="69.png" style="zoom: 100%;" /><p>ç¬¬ä¸€å¼ å›¾æ˜¯ epsilon ä¸ºåŸå§‹è½®å»“å‘¨é•¿çš„ 10% æ—¶çš„è¿‘ä¼¼è½®å»“ï¼Œç¬¬äºŒå¼ å›¾ä¸­ç»¿çº¿å°±æ˜¯ epsilon ä¸ºåŸå§‹è½®å»“å‘¨é•¿çš„ 1% æ—¶çš„è¿‘ä¼¼è½®å»“ã€‚</p><p><strong>ç°åœ¨ä½¿ç”¨çš„å›¾åƒéƒ½æ˜¯ä»…æœ‰ä¸€ä¸ªè½®å»“çš„å›¾åƒï¼Œå¤„ç†çš„è½®å»“éƒ½æ˜¯contours[0]ã€‚å¦‚æœå¤„ç†çš„åŸå›¾åƒä¸­æœ‰å¤šä¸ªè½®å»“ï¼Œåˆ™éœ€è¦æ³¨æ„æ§åˆ¶è½®å»“çš„ç´¢å¼•ï¼Œå³ contours[i]ä¸­çš„ i å€¼ï¼Œä½¿å…¶æŒ‡å‘ç‰¹å®šçš„è½®å»“</strong>ã€‚</p><h3 id="å‡¸åŒ…">å‡¸åŒ…</h3><p>å‡¸åŒ…å¤–è§‚çœ‹èµ·æ¥ä¸è½®å»“é€¼è¿‘ç›¸ä¼¼ï¼Œåªä¸è¿‡å®ƒæ˜¯ç‰©ä½“æœ€å¤–å±‚çš„ã€Œå‡¸ã€å¤šè¾¹å½¢ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œçº¢è‰²çš„éƒ¨åˆ†ä¸ºæ‰‹æŒçš„å‡¸åŒ…ï¼ŒåŒç®­å¤´éƒ¨åˆ†è¡¨ç¤ºå‡¸ç¼ºé™·(Convexity Defects)ï¼Œå‡¸ç¼ºé™·å¸¸ç”¨æ¥è¿›è¡Œæ‰‹åŠ¿è¯†åˆ«ç­‰ã€‚</p><img src="70.png" style="zoom: 100%;" /><p>å‡½æ•°ï¼š</p><p><code>hull = cv2.convexHull(points[,clockwise[,returnPoints]])</code></p><ul><li>clockwise:å¸ƒå°”å‹å€¼ã€‚ è¯¥å€¼ä¸ºTrueæ—¶ï¼Œå‡¸åŒ…è§’ç‚¹å°†æŒ‰é¡ºæ—¶é’ˆæ–¹å‘æ’åˆ—ï¼›è¯¥å€¼ä¸ºFalseæ—¶ï¼Œ åˆ™ä»¥é€†æ—¶é’ˆæ–¹å‘æ’åˆ—å‡¸åŒ…è§’ç‚¹ã€‚</li><li>returnPoints:å¸ƒå°”å‹å€¼ã€‚ é»˜è®¤å€¼æ˜¯True, å‡½æ•°è¿”å›å‡¸åŒ…è§’ç‚¹çš„x/yè½´åæ ‡ï¼›å½“ä¸º Falseæ—¶å‡½æ•°è¿”å›è½®å»“ä¸­å‡¸åŒ…è§’ç‚¹çš„ç´¢å¼•ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import cv2 as cv</span><br><span class="line"></span><br><span class="line">img = cv.imread(&quot;number.png&quot;)</span><br><span class="line">gray_img = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"># é™å™ª</span><br><span class="line">ret, thresh = cv.threshold(gray_img, 127, 255, 0)</span><br><span class="line"># å¯»æ‰¾è½®å»“</span><br><span class="line">contours, hierarchy = cv.findContours(gray_img, cv.RETR_TREE, cv.CHAIN_APPROX_NONE)</span><br><span class="line">cnt = contours[0]</span><br><span class="line"># ç»˜åˆ¶è½®å»“</span><br><span class="line">image = cv.cvtColor(gray_img, cv.COLOR_GRAY2BGR)</span><br><span class="line">cv.drawContours(image, contours, -1, (0, 0 , 255), 2)</span><br><span class="line"></span><br><span class="line"># å¯»æ‰¾å‡¸åŒ…ï¼Œå¾—åˆ°å‡¸åŒ…çš„è§’ç‚¹</span><br><span class="line">hull = cv.convexHull(cnt)</span><br><span class="line"></span><br><span class="line"># ç»˜åˆ¶å‡¸åŒ…</span><br><span class="line">cv.polylines(image, [hull], True, (0, 255, 0), 2)</span><br><span class="line"></span><br><span class="line">cv.imshow(&quot;image&quot;, image)</span><br><span class="line">cv.waitKey(0)</span><br><span class="line">cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="71.png" style="zoom: 100%;" /><p>è¿˜æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯å¯ä»¥ç”¨æ¥åˆ¤æ–­å›¾å½¢æ˜¯å¦å‡¸å½¢çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(cv.isContourConvex(hull)) # True</span><br></pre></td></tr></table></figure><p>å®ƒçš„è¿”å›å€¼æ˜¯ True æˆ–è€… False ã€‚</p><h4 id="å‡¸ç¼ºé™·">å‡¸ç¼ºé™·</h4><p><code>convexityDefects = cv2.convexityDefects(contour,convexhull)</code></p><img src="72.png" style="zoom: 100%;" /><h2 id="å½¢çŠ¶åœºæ™¯ç®—æ³•æ¯”è¾ƒè½®å»“">å½¢çŠ¶åœºæ™¯ç®—æ³•æ¯”è¾ƒè½®å»“</h2><p>ä½œä¸ºå½’ä¸€åŒ–ä¸­å¿ƒçŸ©çš„æ›¿ä»£ç®—æ³•ã€‚</p><h3 id="è®¡ç®—å½¢çŠ¶åœºæ™¯è·ç¦»">è®¡ç®—å½¢çŠ¶åœºæ™¯è·ç¦»</h3><p>â€‹        OpenCVæä¾›äº†ä½¿ç”¨â€œè·ç¦»â€ä½œä¸ºå½¢çŠ¶æ¯”è¾ƒçš„åº¦é‡æ ‡å‡†ã€‚ è¿™æ˜¯å› ä¸ºå½¢çŠ¶ä¹‹é—´çš„å·®å¼‚å€¼å’Œè·ç¦»æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œ æ¯”å¦‚äºŒè€…éƒ½åªèƒ½æ˜¯é›¶æˆ–è€…æ­£æ•°ï¼Œ åˆæ¯”å¦‚å½“ä¸¤ä¸ªå½¢çŠ¶ä¸€æ¨¡ä¸€æ ·æ—¶è·ç¦»å€¼å’Œå·®å€¼éƒ½ç­‰äºé›¶ã€‚</p><p>â€‹        OpenCVæä¾›äº†å‡½æ•°<code>cv2.createShapeContextDistanceExtractor () </code>ï¼Œ ç”¨äºè®¡ç®—å½¢çŠ¶åœºæ™¯è·ç¦»ã€‚å…¶ä½¿ç”¨çš„â€å½¢çŠ¶ä¸Šä¸‹æ–‡ç®—æ³•â€åœ¨è®¡ç®—è·ç¦»æ—¶ï¼Œ åœ¨æ¯ä¸ªç‚¹ä¸Šé™„åŠ ä¸€ä¸ªâ€œå½¢çŠ¶ä¸Šä¸‹æ–‡â€œæè¿°ç¬¦ï¼Œ è®©æ¯ä¸ªç‚¹éƒ½èƒ½å¤Ÿæ•è·å‰©ä½™ç‚¹ç›¸å¯¹äºå®ƒçš„åˆ†å¸ƒç‰¹å¾ï¼Œ ä»è€Œæä¾›å…¨å±€é‰´åˆ«ç‰¹å¾ã€‚</p><p>â€‹        æœ‰å…³è¯¥å‡½æ•°çš„æ›´å¤šç†è®ºçŸ¥è¯†ï¼Œ å¯ä»¥å‚è€ƒå­¦è€… Belongie ç­‰äºº 2002 å¹´åœ¨IEEE Transactions on Pattern Analysis &amp; Machine Intelligenceä¸Šå‘è¡¨çš„è®ºæ–‡Shape Matching and Object Recognition Using Shape Contextsã€‚</p><p>å‡½æ•°<code>cv2.createShapeContextDistanceExtractor() </code>çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">retval = cv2.createShapeContextDistanceExtractor ( </span><br><span class="line">[,nAngularBins[, </span><br><span class="line">nRadialBins[, </span><br><span class="line">innerRadius[, </span><br><span class="line">outerRadius[, </span><br><span class="line">iterations[, </span><br><span class="line">comparer[, </span><br><span class="line">transf armer]]]]]]])</span><br></pre></td></tr></table></figure><p>å¼ä¸­çš„è¿”å›å€¼ä¸º<code>retval</code>, è¿”å›ç»“æœæ˜¯<code>ShapeDistanceExtractor</code>ç±»å‹çš„å˜é‡<br>è¯¥ç»“æœå¯ä»¥é€šè¿‡å‡½æ•°<code>cv2.ShapeDistanceExtractor.computeDistance()</code>è®¡ç®—ä¸¤ä¸ªä¸åŒå½¢çŠ¶ä¹‹é—´çš„è·ç¦»ã€‚ æ­¤å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>d = cv2.ShapeDistanceExtractor.computeDistance (contour1,contour2)</code> å¼ä¸­ï¼Œ coutour1å’Œcoutour2æ˜¯ä¸åŒçš„è½®å»“ã€‚<br>å‡½æ•°<code>cv2.createShapeContextDistanceExtractor() </code>çš„å‚æ•°éƒ½æ˜¯å¯é€‰å‚æ•°ï¼š</p><ul><li><p><code>nAngularBins</code>: ä¸ºå½¢çŠ¶åŒ¹é…ä¸­ä½¿ç”¨çš„å½¢çŠ¶ä¸Šä¸‹æ–‡æè¿°ç¬¦å»ºç«‹çš„è§’å®¹å™¨çš„æ•°æ˜Ÿã€‚</p></li><li><p><code>nRadialBins</code>: ä¸ºå½¢çŠ¶åŒ¹é…ä¸­ä½¿ç”¨çš„å½¢çŠ¶ä¸Šä¸‹æ–‡æè¿°ç¬¦å»ºç«‹çš„å¾„å‘å®¹å™¨çš„æ•°æ˜Ÿã€‚</p></li><li><p><code>innerRadius</code>ï¼šå½¢çŠ¶ä¸Šä¸‹æ–‡æè¿°ç¬¦çš„å†…åŠå¾„ã€‚</p></li><li><p><code>outerRadius</code>ï¼šå½¢çŠ¶ä¸Šä¸‹æ–‡æè¿°ç¬¦çš„å¤–åŠå¾„ã€‚</p></li><li><p><code>iterations</code>: è¿­ä»£æ¬¡æ•°ã€‚</p></li><li><p><code>comparer</code>ï¼šç›´æ–¹å›¾ä»£ä»·æå–ç®—å­ã€‚ è¯¥å‡½æ•°ä½¿ç”¨äº†ç›´æ–¹å›¾ä»£ä»·æå–ä»¿å‡½æ•°ï¼Œ å¯ä»¥ç›´æ¥é‡‡ç”¨ç›´æ–¹å›¾ä»£ä»·æå–ä»¿å‡½æ•°çš„ç®—å­ä½œä¸ºå‚æ•°ã€‚</p></li><li><p><code>transformer</code>: å½¢çŠ¶å˜æ¢å‚æ•°ã€‚</p></li></ul><h3 id="è®¡ç®—Hausdorffè·ç¦»">è®¡ç®—Hausdorffè·ç¦»</h3><img src="73.png" style="zoom: 100%;" /><h1>ç›´æ–¹å›¾å¤„ç†</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzUyNzY5OTE5Mw==&amp;mid=2247490728&amp;idx=1&amp;sn=7d891e12db0fb896702c58bd7c4f05e8&amp;chksm=fa7ac13ecd0d4828f46613a645df8706dba72b83e07e46b3f68fa4ecffec0b7bdef8c86c73fc&amp;scene=178&amp;cur_album_id=1343718009222905856#rd">å‚è€ƒ</a></p><p>å›¾åƒç°åº¦ç›´æ–¹å›¾æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç›´æ–¹å›¾æ˜¯éƒ½æ˜¯ç”±æ¨ªçºµåæ ‡ç»„æˆçš„ï¼Œè€Œå›¾åƒç›´æ–¹å›¾çš„æ¨ªåæ ‡ X è½´ä¸Šè¡¨ç¤ºçš„æ˜¯åƒç´ ç‚¹çš„ç°åº¦å€¼ï¼ˆä¸æ€»æ˜¯ä» 0 åˆ° 255 çš„èŒƒå›´ï¼‰ï¼Œåœ¨çºµåæ ‡ Y è½´ä¸Šè¡¨ç¤ºçš„ç›¸åº”åƒç´ æ•°ã€‚æ‰€ä»¥ï¼Œç›´æ–¹å›¾æ˜¯å¯ä»¥å¯¹æ•´å¹…å›¾çš„ç°åº¦åˆ†å¸ƒè¿›è¡Œæ•´ä½“äº†è§£çš„å›¾ç¤ºï¼Œé€šè¿‡ç›´æ–¹å›¾æˆ‘ä»¬å¯ä»¥å¯¹å›¾åƒçš„å¯¹æ¯”åº¦ã€äº®åº¦å’Œç°åº¦åˆ†å¸ƒç­‰æœ‰ä¸€ä¸ªç›´è§‚äº†è§£ã€‚ä»ç»Ÿè®¡çš„è§’åº¦è®²ï¼Œç›´æ–¹å›¾æ˜¯å›¾åƒå†…ç°åº¦å€¼çš„ç»Ÿè®¡ç‰¹æ€§ä¸å›¾åƒç°åº¦å€¼ä¹‹é—´çš„å‡½æ•°ã€‚</p><img src="74.png" style="zoom: 100%;" /><p>ä¸Šé¢è¿™å¼ å›¾æ¥è‡ªå®˜æ–¹ç½‘ç«™ï¼Œåœ¨è¿™å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><ul><li>å·¦ä¾§åŒºåŸŸæ˜¾ç¤ºå›¾åƒä¸­è¾ƒæš—åƒç´ çš„æ•°é‡ï¼ˆå·¦ä¾§çš„ç°åº¦çº§æ›´è¶‹è¿‘äº 0 ï¼‰ã€‚</li><li>å³ä¾§åŒºåŸŸåˆ™æ˜¾ç¤ºæ˜äº®åƒç´ çš„æ•°é‡ï¼ˆå³ä¾§çš„ç°åº¦çº§æ›´è¶‹è¿‘äº 255ï¼‰ã€‚</li><li>æš—åŒºåŸŸå¤šäºäº®åŒºåŸŸï¼Œè€Œä¸­é—´è°ƒçš„æ•°é‡ï¼ˆä¸­é—´å€¼çš„åƒç´ å€¼ï¼Œä¾‹å¦‚127é™„è¿‘ï¼‰åˆ™éå¸¸å°‘ã€‚</li></ul><h2 id="ç›´æ–¹å›¾çš„ç»˜åˆ¶">ç›´æ–¹å›¾çš„ç»˜åˆ¶</h2><p>æˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›ä¸ç›´æ–¹å›¾æœ‰å…³çš„æœ¯è¯­ã€‚</p><p><strong>BINS</strong>ï¼šå¦‚æœæˆ‘ä»¬ä¸éœ€è¦åˆ†åˆ«æ‰¾åˆ°æ‰€æœ‰åƒç´ å€¼çš„åƒç´ æ•°ï¼Œè€Œæ˜¯æ‰¾åˆ°åƒç´ å€¼é—´éš”ä¸­çš„åƒç´ æ•°æ€ä¹ˆåŠï¼Ÿ ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦æ‰¾åˆ°ä»‹äº0åˆ°15ä¹‹é—´çš„åƒç´ æ•°ï¼Œç„¶åæ‰¾åˆ°16åˆ°31ä¹‹é—´ï¼Œâ€¦ï¼Œ240åˆ°255ä¹‹é—´çš„åƒç´ æ•°ã€‚åªéœ€è¦16ä¸ªå€¼å³å¯è¡¨ç¤ºç›´æ–¹å›¾ã€‚è¿™å°±æ˜¯åœ¨OpenCVæ•™ç¨‹ä¸­æœ‰å…³ç›´æ–¹å›¾çš„ç¤ºä¾‹ä¸­æ˜¾ç¤ºçš„å†…å®¹ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†æ•´ä¸ªç›´æ–¹å›¾åˆ†æˆ16ä¸ªå­éƒ¨åˆ†ï¼Œæ¯ä¸ªå­éƒ¨åˆ†çš„å€¼å°±æ˜¯å…¶ä¸­æ‰€æœ‰åƒç´ æ•°çš„æ€»å’Œã€‚ æ¯ä¸ªå­éƒ¨åˆ†éƒ½ç§°ä¸ºâ€œ BINâ€ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œbinçš„æ•°é‡ä¸º256ä¸ªï¼ˆæ¯ä¸ªåƒç´ ä¸€ä¸ªï¼‰ï¼Œè€Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œbinçš„æ•°é‡ä»…ä¸º16ä¸ªã€‚BINSç”±OpenCVæ–‡æ¡£ä¸­çš„<code>histSize</code>æœ¯è¯­è¡¨ç¤ºã€‚</p><p><strong>DIMS</strong>ï¼šè¿™æ˜¯æˆ‘ä»¬ä¸ºå…¶æ”¶é›†æ•°æ®çš„å‚æ•°çš„æ•°é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»…æ”¶é›†å…³äºå¼ºåº¦å€¼çš„ä¸€ä»¶äº‹çš„æ•°æ®ã€‚æ‰€ä»¥è¿™é‡Œæ˜¯1ã€‚</p><p><strong>RANGE</strong>ï¼šè¿™æ˜¯æ‚¨è¦æµ‹é‡çš„å¼ºåº¦å€¼çš„èŒƒå›´ã€‚é€šå¸¸ï¼Œå®ƒæ˜¯<code>[0,256]</code>ï¼Œå³æ‰€æœ‰å¼ºåº¦å€¼ã€‚</p><h3 id="ä½¿ç”¨-Matplotlib-ç»˜å›¾">ä½¿ç”¨ Matplotlib ç»˜å›¾</h3><p>Matplotlib å¸¦æœ‰ä¸€ä¸ªå¼ºå¤§çš„ç›´æ–¹å›¾ç»˜å›¾åŠŸèƒ½ï¼š<code>matplotlib.pyplot.hist()</code> ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥æ‰¾åˆ°ç›´æ–¹å›¾è¿›è¡Œç»˜åˆ¶ã€‚</p><p>åœ¨çœ‹ç¤ºä¾‹ä»£ç ä¹‹å‰ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°éœ€è¦å…ˆä»‹ç»ä¸‹ï¼š</p><ul><li>æ•°æ®æºï¼šæ•°æ®æºå¿…é¡»æ˜¯ä¸€ç»´æ•°ç»„ï¼Œé€šå¸¸éœ€è¦é€šè¿‡å‡½æ•° <code>ravel()</code> æ‹‰ç›´å›¾åƒï¼Œè€Œå‡½æ•° <code>ravel()</code> çš„ä½œç”¨æ˜¯å°†å¤šç»´æ•°ç»„é™ä¸ºä¸€ç»´æ•°ç»„ã€‚</li><li>åƒç´ çº§ï¼šä¸€èˆ¬æ˜¯ 256 ï¼Œè¡¨ç¤º [0, 255] ã€‚</li></ul><p>ä»£ç å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&quot;maliao.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">cv.imshow(<span class="string">&quot;img&quot;</span>, img)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">plt.hist(img.ravel(), <span class="number">256</span>, [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><img src="75.png" style="zoom: 70%;" /><p>å½“ç„¶ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥ç»˜åˆ¶ç°åº¦ç›´æ–¹å›¾ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç»˜åˆ¶å‡º <code>r,g,b</code> ä¸åŒé€šé“çš„ç›´æ–¹å›¾ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv.imread(<span class="string">&quot;tiankong.jpg&quot;</span>)</span><br><span class="line">color = (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cv.imshow(<span class="string">&quot;img&quot;</span>, img)</span><br><span class="line">cv.waitKey(<span class="number">0</span>)</span><br><span class="line">cv.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, col <span class="keyword">in</span> <span class="built_in">enumerate</span>(color):</span><br><span class="line">    histr = cv.calcHist([img], [i], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">    plt.plot(histr, color = col)</span><br><span class="line">    plt.xlim([<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><img src="76.png" style="zoom: 60%;" /><h3 id="ä½¿ç”¨opencvç»˜åˆ¶">ä½¿ç”¨opencvç»˜åˆ¶</h3><p>ç•¥</p><h2 id="ç›´æ–¹å›¾å‡è¡¡åŒ–">ç›´æ–¹å›¾å‡è¡¡åŒ–</h2><p>ä¸€å‰¯æ•ˆæœå¥½çš„å›¾åƒé€šå¸¸åœ¨ç›´æ–¹å›¾ä¸Šçš„åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œç›´æ–¹å›¾å‡è¡¡åŒ–å°±æ˜¯ç”¨æ¥æ”¹å–„å›¾åƒçš„å…¨å±€äº®åº¦å’Œå¯¹æ¯”åº¦ã€‚</p><img src="78.png" style="zoom: 100%;" /><p>å‡½æ•°<code>    resultImg= cv.equalizeHist(src)</code>ï¼Œsrcå¿…é¡»æ˜¯å•é€šé“å›¾åƒï¼Œæ‰€ä»¥ï¼š</p><ul><li>ç°åº¦å›¾å‡è¡¡ï¼Œç›´æ¥ä½¿ç”¨ <code>equalizeHist()</code> å‡½æ•°ã€‚</li><li>å½©è‰²å›¾å‡è¡¡ï¼Œåˆ†åˆ«åœ¨ä¸åŒçš„é€šé“å‡è¡¡ååˆå¹¶ã€‚</li></ul><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\0.png&quot;</span>)</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç°åº¦å›¾å‡è¡¡åŒ–</span></span><br><span class="line">    equ = cv.equalizeHist(gray)</span><br><span class="line">    <span class="comment"># ç«–ç›´æ‹¼æ¥åŸå›¾å’Œå‡è¡¡å›¾</span></span><br><span class="line">    result1 = np.vstack((gray, equ))</span><br><span class="line">    cv.imshow(<span class="string">&quot;grey&quot;</span>,result1)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å½©è‰²å›¾åƒå‡è¡¡åŒ–,éœ€è¦åˆ†è§£é€šé“ å¯¹æ¯ä¸€ä¸ªé€šé“å‡è¡¡åŒ–</span></span><br><span class="line">    (b, g, r) = cv.split(img)</span><br><span class="line">    bH = cv.equalizeHist(b)</span><br><span class="line">    gH = cv.equalizeHist(g)</span><br><span class="line">    rH = cv.equalizeHist(r)</span><br><span class="line">    <span class="comment"># åˆå¹¶æ¯ä¸€ä¸ªé€šé“</span></span><br><span class="line">    equ2 = cv.merge((bH, gH, rH))</span><br><span class="line">    <span class="comment"># ç«–ç›´æ‹¼æ¥åŸå›¾å’Œå‡è¡¡å›¾</span></span><br><span class="line">    result2 = np.vstack((img, equ2))</span><br><span class="line">    cv.imshow(<span class="string">&quot;rgb&quot;</span>,result2)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="77.png" style="zoom: 50%;" /><h3 id="åŸç†-8">åŸç†</h3><p>ç›´æ–¹å›¾å‡è¡¡åŒ–çš„ç®—æ³•ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ­¥éª¤ï¼š</p><p>(1)è®¡ç®—ç´¯è®¡ç›´æ–¹å›¾ã€‚<br>(2)å¯¹ç´¯è®¡ç›´æ–¹å›¾è¿›è¡ŒåŒºé—´è½¬æ¢</p><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œ å†åˆ©ç”¨äººçœ¼è§†è§‰è¾¾åˆ°ç›´æ–¹å›¾å‡è¡¡åŒ–çš„ç›®çš„ã€‚</p><img src="79.png" style="zoom: 70%;" /><img src="80.png" style="zoom: 73%;" /><img src="81.png" style="zoom: 70%;" /><h2 id="è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–">è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–</h2><p>æ˜¯æŒ‡åœ¨æ¯ä¸€ä¸ªå°åŒºåŸŸå†…ï¼ˆé»˜è®¤ 8Ã—8 ï¼‰è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰å™ªç‚¹çš„è¯ï¼Œå™ªç‚¹ä¼šè¢«æ”¾å¤§ï¼Œéœ€è¦å¯¹å°åŒºåŸŸå†…çš„å¯¹æ¯”åº¦è¿›è¡Œäº†é™åˆ¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\0.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¨å±€ç›´æ–¹å›¾å‡è¡¡</span></span><br><span class="line">    equ = cv.equalizeHist(img)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡</span></span><br><span class="line">    clahe = cv.createCLAHE(clipLimit=<span class="number">2.0</span>, tileGridSize=(<span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line">    cl1 = clahe.apply(img)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ°´å¹³æ‹¼æ¥ä¸‰å¼ å›¾åƒ</span></span><br><span class="line">    result = np.vstack((img, equ, cl1))</span><br><span class="line">    cv.imshow(<span class="string">&quot;result&quot;</span>,result)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="82.png" style="zoom: 60%;" /><h2 id="äºŒç»´ç›´æ–¹å›¾">äºŒç»´ç›´æ–¹å›¾</h2><p>å¯¹äºä¸€ç»´ç›´æ–¹å›¾ï¼Œæˆ‘ä»¬ä»BGRè½¬æ¢ä¸ºç°åº¦ï¼Œç»˜åˆ¶çš„æ˜¯ç°åº¦çš„æ¯”ä¾‹å…³ç³»ï¼ˆå æ¯”å…³ç³»ï¼‰ï¼Œå¯¹äºäºŒç»´ç›´æ–¹å›¾ï¼Œæˆ‘ä»¬éœ€è¦å°†å›¾åƒä»BGRè½¬æ¢ä¸ºHSVã€‚æˆ‘ä»¬è®¡ç®—å¹¶ç»˜åˆ¶çš„ä¸€ç»´ç›´æ–¹å›¾ï¼Œä¹‹æ‰€ä»¥ç§°ä¸ºä¸€ç»´ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä»…è€ƒè™‘ä¸€ä¸ªç‰¹å¾ï¼Œå³åƒç´ çš„ç°åº¦å¼ºåº¦å€¼ã€‚ ä½†æ˜¯åœ¨äºŒç»´ç›´æ–¹å›¾ä¸­ï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä¸¤ä¸ªç‰¹å¾ã€‚ é€šå¸¸ï¼Œå®ƒç”¨äºé¢œè‰²ç›´æ–¹å›¾ï¼Œå…¶ä¸­ä¸¤ä¸ªç‰¹å¾æ˜¯æ¯ä¸ª<strong>åƒç´ çš„è‰²ç›¸å’Œé¥±å’Œåº¦å€¼</strong>ã€‚</p><p>å¯¹äºäºŒç»´ç›´æ–¹å›¾ï¼Œå…¶å‚æ•°å°†è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p><ul><li><strong>channel = [0,1]</strong>ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åŒæ—¶å¤„ç†Hå’ŒSå¹³é¢ã€‚</li><li><strong>bins = [180,256]</strong>ï¼Œå¯¹äºHå¹³é¢ä¸º180ï¼Œå¯¹äºSå¹³é¢ä¸º256ã€‚</li><li><strong>range = [0,180,0,256]</strong> ï¼Œè‰²ç›¸å€¼ä»‹äº0å’Œ180ä¹‹é—´ï¼Œé¥±å’Œåº¦ä»‹äº0å’Œ256ä¹‹é—´ã€‚</li></ul><p>ä¹Ÿå°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line">img = cv.imread(<span class="string">&#x27;home.jpg&#x27;</span>)</span><br><span class="line">hsv = cv.cvtColor(img,cv.COLOR_BGR2HSV)</span><br><span class="line">hist = cv.calcHist([hsv], [<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>])</span><br></pre></td></tr></table></figure><p>Xè½´æ˜¾ç¤ºSå€¼ï¼ŒYè½´æ˜¾ç¤ºè‰²ç›¸ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\2.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">    hsv = cv.cvtColor(img, cv.COLOR_BGR2HSV)</span><br><span class="line">    hist = cv.calcHist([hsv], [<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">    plt.imshow(hist, interpolation=<span class="string">&#x27;nearest&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="83.png" style="zoom: 70%;" /><h2 id="ç›´æ–¹å›¾åæŠ•å½±">ç›´æ–¹å›¾åæŠ•å½±</h2><h3 id="ç†è®º">ç†è®º</h3><p>è¿™æ˜¯ç”±<strong>Michael J. Swain</strong>å’Œ<strong>Dana H. Ballard</strong>åœ¨ä»–ä»¬çš„è®ºæ–‡ã€Š<strong>é€šè¿‡é¢œè‰²ç›´æ–¹å›¾ç´¢å¼•</strong>ã€‹ä¸­æå‡ºçš„ã€‚</p><p><strong>ç”¨ç®€å•çš„è¯è¯´æ˜¯ä»€ä¹ˆæ„æ€</strong>ï¼Ÿ<strong>å®ƒç”¨äºå›¾åƒåˆ†å‰²æˆ–åœ¨å›¾åƒä¸­æŸ¥æ‰¾æ„Ÿå…´è¶£çš„å¯¹è±¡</strong>ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒåˆ›å»ºçš„å›¾åƒå¤§å°ä¸è¾“å…¥å›¾åƒç›¸åŒï¼ˆä½†åªæœ‰ä¸€ä¸ªé€šé“ï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ å¯¹åº”äºè¯¥åƒç´ å±äºæˆ‘ä»¬ç‰©ä½“çš„æ¦‚ç‡ã€‚ç”¨æ›´ç®€å•çš„è¯æ¥è¯´ï¼Œä¸å…¶ä½™éƒ¨åˆ†ç›¸æ¯”ï¼Œè¾“å‡ºå›¾åƒå°†åœ¨å¯èƒ½æœ‰å¯¹è±¡çš„åŒºåŸŸå…·æœ‰æ›´å¤šçš„ç™½è‰²å€¼ã€‚å¥½å§ï¼Œè¿™æ˜¯ä¸€ä¸ªç›´è§‚çš„è§£é‡Šã€‚ï¼ˆæˆ‘æ— æ³•ä½¿å…¶æ›´ç®€å•ï¼‰ã€‚ç›´æ–¹å›¾åæŠ•å½±ä¸camshiftç®—æ³•ç­‰é…åˆä½¿ç”¨ã€‚</p><p><strong>æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢</strong>ï¼Ÿæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå›¾åƒçš„ç›´æ–¹å›¾ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬æ„Ÿå…´è¶£çš„å¯¹è±¡ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ˜¯èƒŒæ™¯ï¼Œç¦»å¼€æ’­æ”¾å™¨ç­‰ï¼‰ã€‚å¯¹è±¡åº”å°½å¯èƒ½å¡«å……å›¾åƒä»¥è·å¾—æ›´å¥½çš„æ•ˆæœã€‚è€Œä¸”é¢œè‰²ç›´æ–¹å›¾æ¯”ç°åº¦ç›´æ–¹å›¾æ›´å¯å–ï¼Œå› ä¸ºå¯¹è±¡çš„é¢œè‰²å¯¹æ¯”ç°åº¦å¼ºåº¦æ˜¯å®šä¹‰å¯¹è±¡çš„å¥½æ–¹æ³•ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è¯¥ç›´æ–¹å›¾â€œåæŠ•å½±â€åˆ°éœ€è¦æ‰¾åˆ°å¯¹è±¡çš„æµ‹è¯•å›¾åƒä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬è®¡ç®—å‡ºå±äºèƒŒæ™¯çš„æ¯ä¸ªåƒç´ çš„æ¦‚ç‡å¹¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚åœ¨é€‚å½“çš„é˜ˆå€¼ä¸‹äº§ç”Ÿçš„è¾“å‡ºä½¿æˆ‘ä»¬ä»…è·å¾—èƒŒæ™¯ã€‚</p><h3 id="Numpyä¸­çš„ç®—æ³•">Numpyä¸­çš„ç®—æ³•</h3><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æˆ‘ä»¬è¦æŸ¥æ‰¾çš„å¯¹è±¡ï¼ˆä½¿å…¶ä¸ºâ€œ Mâ€ï¼‰å’Œè¦æœç´¢çš„å›¾åƒï¼ˆä½¿å…¶ä¸ºâ€œ Iâ€ï¼‰çš„é¢œè‰²ç›´æ–¹å›¾ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#roiæ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°çš„å¯¹è±¡æˆ–å¯¹è±¡åŒºåŸŸ</span></span><br><span class="line">roi = cv.imread(<span class="string">&#x27;rose_red.png&#x27;</span>)</span><br><span class="line">hsv = cv.cvtColor(roi,cv.COLOR_BGR2HSV)</span><br><span class="line"><span class="comment">#ç›®æ ‡æ˜¯æˆ‘ä»¬æœç´¢çš„å›¾åƒ</span></span><br><span class="line">target = cv.imread(<span class="string">&#x27;rose.png&#x27;</span>)</span><br><span class="line">hsvt = cv.cvtColor(target,cv.COLOR_BGR2HSV)</span><br><span class="line"><span class="comment"># ä½¿ç”¨calcHistæŸ¥æ‰¾ç›´æ–¹å›¾ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨np.histogram2då®Œæˆ</span></span><br><span class="line">M = cv.calcHist([hsv],[<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>] )</span><br><span class="line">I = cv.calcHist([hsvt],[<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>] )</span><br></pre></td></tr></table></figure><ol><li>æ±‚å‡ºæ¯”å€¼<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>M</mi><mi>I</mi></mfrac></mstyle></mrow><annotation encoding="application/x-tex">R = \dfrac{M}{I}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ã€‚ç„¶ååå‘æŠ•å½±Rï¼Œ<strong>å³ä½¿ç”¨Rä½œä¸ºè°ƒè‰²æ¿ï¼Œå¹¶ä»¥æ¯ä¸ªåƒç´ ä½œä¸ºå…¶å¯¹åº”çš„ç›®æ ‡æ¦‚ç‡åˆ›å»ºä¸€ä¸ªæ–°å›¾åƒ</strong>ã€‚å³<code>B(x,y) = R[h(x,y),s(x,y)]</code> å…¶ä¸­hæ˜¯è‰²è°ƒï¼Œsæ˜¯åƒç´ åœ¨(xï¼Œy)çš„é¥±å’Œåº¦ã€‚ä¹‹åï¼Œåº”ç”¨æ¡ä»¶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">B(x,y)=min[B(x,y),1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">h,s,v = cv.split(hsvt)</span><br><span class="line">B = R[h.ravel(),s.ravel()]</span><br><span class="line">B = np.minimum(B,<span class="number">1</span>)</span><br><span class="line">B = B.reshape(hsvt.shape[:<span class="number">2</span>])</span><br></pre></td></tr></table></figure><ol><li>ç°åœ¨å¯¹åœ†ç›˜åº”ç”¨å·ç§¯ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mi>D</mi><mo>âˆ—</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">B=D*B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>ï¼Œå…¶ä¸­Dæ˜¯åœ†ç›˜å†…æ ¸ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">disc = cv.getStructuringElement(cv.MORPH_ELLIPSE,(<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line">cv.filter2D(B,-<span class="number">1</span>,disc,B)</span><br><span class="line">B = np.uint8(B)</span><br><span class="line">cv.normalize(B,B,<span class="number">0</span>,<span class="number">255</span>,cv.NORM_MINMAX)</span><br></pre></td></tr></table></figure><ol><li>ç°åœ¨æœ€å¤§å¼ºåº¦çš„ä½ç½®ç»™äº†æˆ‘ä»¬ç‰©ä½“çš„ä½ç½®ã€‚å¦‚æœæˆ‘ä»¬æœŸæœ›å›¾åƒä¸­æœ‰ä¸€ä¸ªåŒºåŸŸï¼Œåˆ™å¯¹åˆé€‚çš„å€¼è¿›è¡Œé˜ˆå€¼å¤„ç†å°†è·å¾—ä¸é”™çš„ç»“æœã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret,thresh = cv.threshold(B,<span class="number">50</span>,<span class="number">255</span>,<span class="number">0</span>) </span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªå¤©ç©ºçš„å›¾åƒç‰‡æ®µæŸ¥æ‰¾å›¾åƒä¸­æ‰€æœ‰çš„å¤©ç©ºï¼šï¼ˆå›¾ä¸­çº¢æ¡†æ˜¯æˆ‘æä¾›çš„ROIï¼‰</p><img src="84.png" style="zoom: 40%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#æŸ¥æ‰¾æ ·ä¾‹</span></span><br><span class="line">    roi = cv.imread(<span class="string">&quot;image\\1-1.png&quot;</span>)</span><br><span class="line">    hsv = cv.cvtColor(roi, cv.COLOR_BGR2HSV)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å…¨å›¾</span></span><br><span class="line">    target = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>)</span><br><span class="line">    hsvt = cv.cvtColor(target, cv.COLOR_BGR2HSV)</span><br><span class="line">    M = cv.calcHist([hsv], [<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">    I = cv.calcHist([hsvt], [<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">    R = M/I</span><br><span class="line">    </span><br><span class="line">    h, s, v = cv.split(hsvt)</span><br><span class="line">    B = R[h.ravel(), s.ravel()]</span><br><span class="line">    B = np.minimum(B, <span class="number">1</span>)</span><br><span class="line">    B = B.reshape(hsvt.shape[:<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    disc = cv.getStructuringElement(cv.MORPH_ELLIPSE, (<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">    cv.filter2D(B, -<span class="number">1</span>, disc, B)</span><br><span class="line">    B = np.uint8(B)</span><br><span class="line">    cv.normalize(B, B, <span class="number">0</span>, <span class="number">255</span>, cv.NORM_MINMAX)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#é˜ˆå€¼å¤„ç†</span></span><br><span class="line">    ret, thresh = cv.threshold(B, <span class="number">50</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ„é€ æ©æ¨¡</span></span><br><span class="line">    thresh = cv.merge((thresh, thresh, thresh))</span><br><span class="line">    res = cv.bitwise_and(target, thresh)</span><br><span class="line">    res = np.vstack((target, thresh, res))</span><br><span class="line">    cv.imshow(<span class="string">&quot;result&quot;</span>,res)</span><br><span class="line">    </span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><h3 id="OpenCVçš„åæŠ•å½±">OpenCVçš„åæŠ•å½±</h3><p>OpenCVæä¾›äº†ä¸€ä¸ªå†…å»ºçš„å‡½æ•°<strong>cv.calcBackProject</strong>()ã€‚å®ƒçš„å‚æ•°å‡ ä¹ä¸<strong>cv.calchist</strong>()å‡½æ•°ç›¸åŒã€‚å®ƒçš„ä¸€ä¸ªå‚æ•°æ˜¯ç›´æ–¹å›¾ï¼Œä¹Ÿå°±æ˜¯ç‰©ä½“çš„ç›´æ–¹å›¾ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°å®ƒã€‚å¦å¤–ï¼Œåœ¨ä¼ é€’ç»™backprojectå‡½æ•°ä¹‹å‰ï¼Œåº”è¯¥å¯¹å¯¹è±¡ç›´æ–¹å›¾è¿›è¡Œå½’ä¸€åŒ–ã€‚å®ƒè¿”å›æ¦‚ç‡å›¾åƒã€‚ç„¶åæˆ‘ä»¬ç”¨åœ†ç›˜å†…æ ¸å¯¹å›¾åƒè¿›è¡Œå·ç§¯å¹¶åº”ç”¨é˜ˆå€¼ã€‚ä¸‹é¢æ˜¯æˆ‘çš„ä»£ç å’Œç»“æœ:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    roi = cv.imread(<span class="string">&quot;image\\1-1.png&quot;</span>)</span><br><span class="line">    hsv = cv.cvtColor(roi, cv.COLOR_BGR2HSV)</span><br><span class="line"></span><br><span class="line">    target = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>)</span><br><span class="line">    hsvt = cv.cvtColor(target, cv.COLOR_BGR2HSV)</span><br><span class="line">    <span class="comment"># è®¡ç®—å¯¹è±¡çš„ç›´æ–¹å›¾</span></span><br><span class="line">    roihist = cv.calcHist([hsv], [<span class="number">0</span>, <span class="number">1</span>], <span class="literal">None</span>, [<span class="number">180</span>, <span class="number">256</span>], [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">    <span class="comment"># ç›´æ–¹å›¾å½’ä¸€åŒ–å¹¶åˆ©ç”¨åä¼ ç®—æ³•</span></span><br><span class="line">    cv.normalize(roihist, roihist, <span class="number">0</span>, <span class="number">255</span>, cv.NORM_MINMAX)</span><br><span class="line">    dst = cv.calcBackProject([hsvt], [<span class="number">0</span>, <span class="number">1</span>], roihist, [<span class="number">0</span>, <span class="number">180</span>, <span class="number">0</span>, <span class="number">256</span>], <span class="number">1</span>)</span><br><span class="line">    <span class="comment"># ç”¨åœ†ç›˜è¿›è¡Œå·ç§¯</span></span><br><span class="line">    disc = cv.getStructuringElement(cv.MORPH_ELLIPSE, (<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">    cv.filter2D(dst, -<span class="number">1</span>, disc, dst)</span><br><span class="line">    <span class="comment"># åº”ç”¨é˜ˆå€¼ä½œä¸æ“ä½œ</span></span><br><span class="line">    ret, thresh = cv.threshold(dst, <span class="number">50</span>, <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">    thresh = cv.merge((thresh, thresh, thresh))</span><br><span class="line">    res = cv.bitwise_and(target, thresh)</span><br><span class="line">    res = np.vstack((target, thresh, res))</span><br><span class="line">    cv.imshow(<span class="string">&quot;result&quot;</span>,res)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="85.png" style="zoom: 40%;" /><h2 id="è¡¥å……ï¼špyplot-subplot">è¡¥å……ï¼špyplot.subplot()</h2><p>æ¨¡å— <code>matplotlib.pyplot</code> æä¾›äº†å‡½æ•°<code>matplotlib.pyplot.subplot()</code>ç”¨æ¥å‘å½“å‰çª—å£å†…æ·»åŠ ä¸€ä¸ªå­çª—å£å¯¹è±¡ã€‚ è¯¥å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>matplotlib. pyplot.subplot (nrows,ncols,index)</code></p><p>å¼ä¸­ï¼š</p><ul><li>nrowsä¸ºè¡Œæ•°ã€‚</li><li>ncolsä¸ºåˆ—æ•°ã€‚</li><li>indexä¸ºçª—å£åºå·ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œsubplot(2,3,4)è¡¨ç¤ºåœ¨å½“å‰çš„ä¸¤è¡Œä¸‰åˆ—çš„çª—å£çš„ç¬¬4ä¸ªä½ç½®ä¸Šï¼Œæ·»åŠ 1ä¸ªå­çª—å£</p><img src="86.png" style="zoom: 80%;" /><h1>å‚…é‡Œå¶å˜æ¢</h1><h2 id="åŸç†-9">åŸç†</h2><p>â€‹        å›¾åƒå¤„ç†ä¸€èˆ¬åˆ†ä¸º<strong>ç©ºé—´åŸŸ</strong>å¤„ç†å’Œ<strong>é¢‘ç‡åŸŸ</strong>å¤„ç†ã€‚</p><p>â€‹        <strong>ç©ºé—´åŸŸå¤„ç†æ˜¯ç›´æ¥å¯¹å›¾åƒå†…çš„åƒç´ è¿›è¡Œå¤„ç†</strong>ã€‚ ç©ºé—´åŸŸå¤„ç†ä¸»è¦åˆ’åˆ†ä¸ºç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢ä¸¤ç§å½¢å¼ã€‚ ç°åº¦å˜æ¢æ˜¯å¯¹å›¾åƒå†…çš„å•ä¸ªåƒç´ è¿›è¡Œå¤„ç†ï¼Œ æ¯”å¦‚è°ƒèŠ‚å¯¹æ¯”åº¦å’Œå¤„ç†é—¯å€¼ç­‰ã€‚ç©ºé—´æ»¤æ³¢æ¶‰åŠå›¾åƒè´¨æ˜Ÿçš„æ”¹å˜ï¼Œ ä¾‹å¦‚å›¾åƒå¹³æ»‘å¤„ç†ã€‚ ç©ºé—´åŸŸå¤„ç†çš„è®¡ç®—ç®€å•æ–¹ä¾¿ï¼Œè¿ç®—é€Ÿåº¦æ›´å¿«ã€‚<br>â€‹        <strong>é¢‘ç‡åŸŸå¤„ç†æ˜¯å…ˆå°†å›¾åƒå˜æ¢åˆ°é¢‘ç‡åŸŸï¼Œ ç„¶ååœ¨é¢‘ç‡åŸŸå¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œ æœ€åå†é€šè¿‡åå˜æ¢å°†å›¾åƒä»é¢‘ç‡åŸŸå˜æ¢åˆ°ç©ºé—´åŸŸ</strong>ã€‚ å‚…é‡Œå¶å˜æ¢æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§é¢‘åŸŸå˜æ¢ï¼Œ å®ƒèƒ½å¤Ÿå°†å›¾åƒä»ç©ºé—´åŸŸå˜æ¢åˆ°é¢‘ç‡åŸŸï¼Œ è€Œé€†å‚…é‡Œå¶å˜æ¢èƒ½å¤Ÿå°†é¢‘ç‡åŸŸä¿¡æ¯å˜æ¢åˆ°ç©ºé—´åŸŸå†…ã€‚ å‚…é‡Œå¶å˜æ¢åœ¨å›¾åƒå¤„ç†é¢†åŸŸå†…æœ‰ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p><p>â€‹        åœ¨å›¾åƒå¤„ç†è¿‡ç¨‹ä¸­ï¼Œ<strong>å‚…é‡Œå¶å˜æ¢å°±æ˜¯å°†å›¾åƒåˆ†è§£ä¸ºæ­£å¼¦åˆ†é‡å’Œä½™å¼¦åˆ†é‡ä¸¤éƒ¨åˆ†ï¼Œå³å°†å›¾åƒä»ç©ºé—´åŸŸè½¬æ¢åˆ°é¢‘ç‡åŸŸï¼ˆä»¥ä¸‹ç®€ç§°é¢‘åŸŸï¼‰</strong>ã€‚æ•°å­—å›¾åƒç»è¿‡å‚…é‡Œå¶å˜æ¢åï¼Œå¾—åˆ°çš„é¢‘åŸŸå€¼æ˜¯å¤æ•°ã€‚å› æ­¤ï¼Œæ˜¾ç¤ºå‚…é‡Œå¶å˜æ¢çš„ç»“æœéœ€è¦ä½¿ç”¨å®æ•°å›¾åƒ (real image) åŠ è™šæ•°å›¾åƒ (complex image)æˆ–è€…å¹…åº¦å›¾åƒ(magnitude image) åŠ ç›¸ä½å›¾åƒ (phase image) çš„å½¢å¼ã€‚</p><p>â€‹        å› ä¸ºå¹…åº¦å›¾åƒåŒ…å«äº†åŸå›¾åƒä¸­æˆ‘ä»¬æ‰€éœ€è¦çš„å¤§éƒ¨åˆ†ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å›¾åƒå¤„ç†è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä»…ä½¿ç”¨å¹…åº¦å›¾åƒã€‚å½“ç„¶ï¼Œå¦‚æœå¸Œæœ›å…ˆåœ¨é¢‘åŸŸå†…å¯¹å›¾åƒè¿›è¡Œå¤„ç†ï¼Œå†é€šè¿‡é€†å‚…é‡Œå¶å˜æ¢å¾—åˆ°ä¿®æ”¹åçš„ç©ºåŸŸå›¾åƒï¼Œå°±å¿…é¡»åŒæ—¶ä¿ç•™å¹…åº¦å›¾åƒå’Œç›¸ä½å›¾åƒã€‚</p><p>â€‹        å¯¹å›¾åƒè¿›è¡Œå‚…é‡Œå¶å˜æ¢åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å›¾åƒä¸­çš„ä½é¢‘å’Œé«˜é¢‘ä¿¡æ¯ã€‚<strong>ä½é¢‘ä¿¡æ¯å¯¹åº”å›¾åƒå†…å˜åŒ–ç¼“æ…¢çš„ç°åº¦åˆ†é‡ã€‚ é«˜é¢‘ä¿¡æ¯å¯¹åº”å›¾åƒå†…å˜åŒ–è¶Šæ¥è¶Šå¿«çš„ç°åº¦åˆ†é‡ï¼Œæ˜¯ç”±ç°åº¦çš„å°–é”è¿‡æ¸¡é€ æˆçš„</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€å¹…å¤§è‰åŸçš„å›¾åƒä¸­æœ‰ä¸€å¤´ç‹®å­ï¼Œä½é¢‘ä¿¡æ¯å°±å¯¹åº”ç€å¹¿è¢¤çš„é¢œè‰²è¶‹äºä¸€è‡´çš„è‰åŸç­‰ç»†èŠ‚ä¿¡æ¯ï¼Œè€Œé«˜é¢‘ä¿¡æ¯åˆ™å¯¹åº”ç€ç‹®å­çš„è½®å»“ç­‰å„ç§è¾¹ç¼˜åŠå™ªå£°ä¿¡æ¯ã€‚</p><p>â€‹        å¯¹äºä¸åŒé¢‘æ®µçš„ä¿¡æ¯ï¼Œæ»¤æ³¢å™¨èƒ½å¤Ÿå…è®¸ä¸€å®šé¢‘ç‡çš„åˆ†é‡é€šè¿‡æˆ–è€…æ‹’ç»å…¶é€šè¿‡ï¼ŒæŒ‰ç…§å…¶ä½œç”¨æ–¹å¼å¯ä»¥åˆ’åˆ†ä¸ºä½é€šæ»¤æ³¢å™¨å’Œé«˜é€šæ»¤æ³¢å™¨ã€‚</p><ul><li><p><strong>å…è®¸ä½é¢‘ä¿¡å·é€šè¿‡çš„æ»¤æ³¢å™¨ç§°ä¸ºä½é€šæ»¤æ³¢å™¨</strong>ã€‚ä½é€šæ»¤æ³¢å™¨ä½¿é«˜é¢‘ä¿¡å·è¡°å‡è€Œå¯¹ä½é¢‘ä¿¡å·æ”¾è¡Œï¼Œä¼šä½¿å›¾åƒå˜æ¨¡ç³Šã€‚</p></li><li><p><strong>å…è®¸é«˜é¢‘ä¿¡å·é€šè¿‡çš„æ»¤æ³¢å™¨ç§°ä¸ºé«˜é€šæ»¤æ³¢å™¨</strong>ã€‚é«˜é€šæ»¤æ³¢å™¨ä½¿ä½é¢‘ä¿¡å·è¡°å‡è€Œè®©é«˜é¢‘ä¿¡å·é€šè¿‡ï¼Œå°†å¢å¼ºå›¾åƒä¸­å°–é”çš„ç»†èŠ‚ï¼Œ ä½†æ˜¯ä¼šå¯¼è‡´å›¾åƒçš„å¯¹æ¯”åº¦é™ä½ã€‚</p></li></ul><p>å‚…é‡Œå¶å˜æ¢å¯ä»¥å°†å›¾åƒçš„é«˜é¢‘ä¿¡å·å’Œä½é¢‘ä¿¡å·åˆ†ç¦»ã€‚é‚£ä¹ˆå°±å¯ä»¥å¯¹å‚…é‡Œå¶å˜æ¢å¾—åˆ°çš„é«˜é¢‘ä¿¡å·å’Œä½é¢‘ä¿¡å·åˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚é«˜é€šæ»¤æ³¢æˆ–è€…ä½é€šæ»¤æ³¢ã€‚åœ¨å¯¹å›¾åƒçš„é«˜é¢‘æˆ–ä½é¢‘ä¿¡å·è¿›è¡Œå¤„ç†åï¼Œå†è¿›è¡Œé€†å‚…é‡Œå¶å˜æ¢è¿”å›ç©ºåŸŸï¼Œå°±å®Œæˆäº†å¯¹å›¾åƒçš„é¢‘åŸŸå¤„ç†ã€‚é€šè¿‡å¯¹å›¾åƒçš„é¢‘åŸŸå¤„ç†ï¼Œå¯ä»¥å®ç°å›¾åƒå¢å¼ºã€å›¾åƒå»å™ªã€è¾¹ç¼˜æ£€æµ‹ã€ç‰¹å¾æå–ã€å‹ç¼©å’ŒåŠ å¯†ç­‰æ“ä½œã€‚</p><h3 id="PS-ä»€ä¹ˆæ˜¯æ—¶åŸŸï¼ˆç©ºé—´åŸŸï¼‰ï¼Œä»€ä¹ˆæ˜¯é¢‘åŸŸ">PS.ä»€ä¹ˆæ˜¯æ—¶åŸŸï¼ˆç©ºé—´åŸŸï¼‰ï¼Œä»€ä¹ˆæ˜¯é¢‘åŸŸ</h3><p>ä»æˆ‘ä»¬å‡ºç”Ÿï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¸–ç•Œéƒ½ä»¥æ—¶é—´è´¯ç©¿ï¼Œè‚¡ç¥¨çš„èµ°åŠ¿ã€äººçš„èº«é«˜ã€æ±½è½¦çš„è½¨è¿¹éƒ½ä¼šéšç€æ—¶é—´å‘ç”Ÿæ”¹å˜ã€‚è¿™ç§ä»¥æ—¶é—´ä½œä¸ºå‚ç…§æ¥è§‚å¯ŸåŠ¨æ€ä¸–ç•Œçš„æ–¹æ³•æˆ‘ä»¬ç§°å…¶ä¸ºæ—¶åŸŸåˆ†æã€‚è€Œæˆ‘ä»¬ä¹Ÿæƒ³å½“ç„¶çš„è®¤ä¸ºï¼Œä¸–é—´ä¸‡ç‰©éƒ½åœ¨éšç€æ—¶é—´ä¸åœçš„æ”¹å˜ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šé™æ­¢ä¸‹æ¥ã€‚ä½†å¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œç”¨å¦ä¸€ç§æ–¹æ³•æ¥è§‚å¯Ÿä¸–ç•Œçš„è¯ï¼Œä½ ä¼šå‘ç°<strong>ä¸–ç•Œæ˜¯æ°¸æ’ä¸å˜çš„</strong>ï¼Œä½ ä¼šä¸ä¼šè§‰å¾—æˆ‘ç–¯äº†ï¼Ÿæˆ‘æ²¡æœ‰ç–¯ï¼Œè¿™ä¸ªé™æ­¢çš„ä¸–ç•Œå°±å«åš<strong>é¢‘åŸŸ</strong>ã€‚</p><p>å…ˆä¸¾ä¸€ä¸ª<strong>å…¬å¼ä¸Šå¹¶éå¾ˆæ°å½“</strong>ï¼Œä½†æ„ä¹‰ä¸Šå†è´´åˆ‡ä¸è¿‡çš„ä¾‹å­ï¼š</p><p>åœ¨ä½ çš„ç†è§£ä¸­ï¼Œä¸€æ®µéŸ³ä¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å…¶åœ¨æ—¶åŸŸå†…çš„è¡¨ç°</p><img src="88.png" style="zoom: 100%;" /><p>è¿™æ˜¯æˆ‘ä»¬å¯¹éŸ³ä¹æœ€æ™®éçš„ç†è§£ï¼Œä¸€ä¸ªéšç€æ—¶é—´å˜åŒ–çš„éœ‡åŠ¨ã€‚ä½†æˆ‘ç›¸ä¿¡å¯¹äºä¹å™¨å°èƒ½æ‰‹ä»¬æ¥è¯´ï¼ŒéŸ³ä¹æ›´ç›´è§‚çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼šæ˜¯å…¶åœ¨é¢‘åŸŸå†…çš„è¡¨ç°</p><img src="89.png" style="zoom: 100%;" /><p>åœ¨æ—¶åŸŸï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°é’¢ç´çš„ç´å¼¦ä¸€ä¼šä¸Šä¸€ä¼šä¸‹çš„æ‘†åŠ¨ï¼Œå°±å¦‚åŒä¸€æ”¯è‚¡ç¥¨çš„èµ°åŠ¿ï¼›è€Œåœ¨é¢‘åŸŸï¼Œåªæœ‰é‚£ä¸€ä¸ªæ°¸æ’çš„éŸ³ç¬¦ã€‚</p><img src="87.png" style="zoom: 80%;" /><p>ä»ä¿¡å·çš„è§’åº¦æ¥è®²ï¼Œæ—¶é—´æ–¹å‘æ˜¯æ—¶åŸŸï¼Œå› ä¸ºä¿¡å·æ˜¯éšæ—¶é—´å˜åŒ–çš„ã€‚ä½†ä»å›¾åƒçš„è§’åº¦è®²ï¼Œè¿™ä¸ªæ–¹å‘åº”è¯¥ç§°ä½œç©ºé—´çš„æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯ç©ºé—´åŸŸï¼Œå› ä¸ºå›¾åƒåœ¨ç©ºé—´çš„ä¸åŒä½ç½®çš„è¡¨ç¤ºæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><blockquote><p>But what does frequency spectrum means in case of images?</p></blockquote><p>The â€œmathematical equationsâ€ are important, so donâ€™t skip them entirely. But the 2d FFT has an intuitive interpretation, too. For illustration, Iâ€™ve calculated the inverse FFT of a few sample images:</p><p>â€œæ•°å­¦æ–¹ç¨‹å¼â€å¾ˆé‡è¦ï¼Œæ‰€ä»¥ä¸è¦å®Œå…¨è·³è¿‡å®ƒä»¬ã€‚ä½†æ˜¯2d FFT ä¹Ÿæœ‰ä¸€ä¸ªç›´è§‚çš„è§£é‡Šã€‚ä¸ºäº†è¯´æ˜ï¼Œæˆ‘å·²ç»è®¡ç®—äº†ä¸€äº›æ ·æœ¬å›¾åƒçš„å FFT:</p><img src="93.png" style="zoom: 80%;" /><p>As you can see, only one pixel is set in the frequency domain. The result in the image domain (Iâ€™ve only displayed the real part) is a â€œrotated cosine patternâ€ (the imaginary part would be the corresponding sine).</p><p>If I set a different pixel in the frequency domain (at the left border):</p><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåªæœ‰ä¸€ä¸ªåƒç´ æ˜¯è®¾ç½®åœ¨é¢‘ç‡åŸŸã€‚å›¾åƒåŸŸä¸­çš„ç»“æœ(æˆ‘åªæ˜¾ç¤ºäº†å®éƒ¨)æ˜¯ä¸€ä¸ªâ€œæ—‹è½¬ä½™å¼¦å›¾æ¡ˆâ€(è™šéƒ¨å°†æ˜¯å¯¹åº”çš„æ­£å¼¦)ã€‚</p><p>å¦‚æœæˆ‘åœ¨é¢‘ç‡åŸŸ(å·¦è¾¹æ¡†)è®¾ç½®ä¸åŒçš„åƒç´ :</p><img src="94.png" style="zoom: 80%;" /><p>I get a different 2d frequency pattern.</p><p>If I set more than one pixel in the frequency domain:</p><p>æˆ‘å¾—åˆ°äº†ä¸€ä¸ªä¸åŒçš„äºŒç»´é¢‘ç‡æ¨¡å¼ã€‚</p><p>å¦‚æœæˆ‘åœ¨é¢‘ç‡åŸŸè®¾ç½®å¤šäºä¸€ä¸ªåƒç´ :</p><img src="95.png" style="zoom: 80%;" /><p>you get the sum of two cosines.</p><p>So like a 1d wave, that can be represented as a sum of sines and cosines, any 2d image can be represented (loosely speaking) as a sum of â€œrotated sines and cosinesâ€, as shown above.</p><blockquote><p>when we take fft of a image in opencv, we get weird picture. What does this image denote?</p></blockquote><p>It denotes the amplitudes and frequencies of the sines/cosines that, when added up, will give you the original image.</p><blockquote><p>And what is its application?</p></blockquote><p>There are really too many to name them all. Correlation and convolution can be calculated very efficiently using an FFT, but thatâ€™s more of an optimization, you donâ€™t â€œlookâ€ at the FFT result for that. Itâ€™s used for image compression, because the high frequency components are usually just noise.</p><p>ä½ ä¼šå¾—åˆ°ä¸¤ä¸ªä½™å¼¦çš„å’Œã€‚</p><p>å°±åƒä¸€ç»´æ³¢ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºæ­£å¼¦å’Œä½™å¼¦çš„å’Œï¼Œä»»ä½•äºŒç»´å›¾åƒéƒ½å¯ä»¥è¡¨ç¤ºä¸ºâ€œæ—‹è½¬æ­£å¼¦å’Œä½™å¼¦â€çš„å’Œï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚</p><p>å½“æˆ‘ä»¬åœ¨ opencv ä¸­å¯¹ä¸€å¹…å›¾åƒè¿›è¡Œå‚…ç«‹å¶å˜æ¢æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€å¹…å¥‡æ€ªçš„å›¾åƒï¼Œè¿™å¹…å›¾åƒä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ</p><p>å®ƒè¡¨ç¤ºæ­£å¼¦/ä½™å¼¦çš„æŒ¯å¹…å’Œé¢‘ç‡ï¼ŒåŠ èµ·æ¥å°±æ˜¯åŸå§‹å›¾åƒã€‚</p><p>å®ƒçš„åº”ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œæ— æ³•ä¸€ä¸€åˆ—ä¸¾ã€‚ä½¿ç”¨ FFTï¼Œç›¸å…³æ€§å’Œå·ç§¯å¯ä»¥éå¸¸æœ‰æ•ˆåœ°è®¡ç®—ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæ›´ä¼˜åŒ–ï¼ŒFFTçš„ç»“æœå¹¶ä¸ä»¥æ­¤ä¸ºç›®çš„ã€‚å› ä¸ºé«˜é¢‘éƒ¨åˆ†é€šå¸¸åªæ˜¯å™ªéŸ³ï¼Œæ‰€ä»¥å®ƒè¢«ç”¨äºå›¾åƒå‹ç¼©ã€‚</p><h2 id="Numpyä¸­çš„å‚…é‡Œå¶å˜æ¢">Numpyä¸­çš„å‚…é‡Œå¶å˜æ¢</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨NumpyæŸ¥æ‰¾å‚…ç«‹å¶å˜æ¢ã€‚Numpyå…·æœ‰FFTè½¯ä»¶åŒ…æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚<strong>np.fft.fft2</strong>()ä¸ºæˆ‘ä»¬æä¾›äº†é¢‘ç‡è½¬æ¢ï¼Œå®ƒå°†æ˜¯ä¸€ä¸ªå¤æ‚çš„æ•°ç»„ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¾“å…¥å›¾åƒï¼Œå³ç°åº¦å›¾åƒã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒå†³å®šè¾“å‡ºæ•°ç»„çš„å¤§å°ã€‚å¦‚æœå®ƒå¤§äºè¾“å…¥å›¾åƒçš„å¤§å°ï¼Œåˆ™åœ¨è®¡ç®—FFTä¹‹å‰ç”¨é›¶å¡«å……è¾“å…¥å›¾åƒã€‚å¦‚æœå°äºè¾“å…¥å›¾åƒï¼Œå°†è£åˆ‡è¾“å…¥å›¾åƒã€‚å¦‚æœæœªä¼ é€’ä»»ä½•å‚æ•°ï¼Œåˆ™è¾“å‡ºæ•°ç»„çš„å¤§å°å°†ä¸è¾“å…¥çš„å¤§å°ç›¸åŒã€‚</p><p>ç°åœ¨ï¼Œä¸€æ—¦è·å¾—ç»“æœï¼Œé›¶é¢‘ç‡åˆ†é‡ï¼ˆDCåˆ†é‡ï¼‰å°†ä½äºå·¦ä¸Šè§’ã€‚å¦‚æœè¦ä½¿å…¶å±…ä¸­ï¼Œåˆ™éœ€è¦åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šå°†ç»“æœéƒ½ç§»åŠ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>N</mi><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{N}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ã€‚åªéœ€é€šè¿‡å‡½æ•°<strong>np.fft.fftshift</strong>()å³å¯å®Œæˆã€‚ï¼ˆå®ƒæ›´å®¹æ˜“åˆ†æï¼‰ã€‚æ‰¾åˆ°é¢‘ç‡å˜æ¢åï¼Œå°±å¯ä»¥æ‰¾åˆ°å¹…åº¦è°±ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºè¿™å¼ å›¾ï¼Œ<strong>è¶Šé è¿‘ä¸­å¿ƒï¼Œé¢‘ç‡è¶Šä½</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    f = np.fft.fft2(img)</span><br><span class="line">    fshift = np.fft.fftshift(f)</span><br><span class="line">    <span class="comment">#å¯¹å›¾åƒè¿›è¡Œå‚…é‡Œå¶å˜æ¢åï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¤æ•°æ•°ç»„ã€‚ä¸ºäº†æ˜¾ç¤ºä¸ºå›¾åƒï¼Œéœ€è¦å°†å®ƒä»¬çš„å€¼è°ƒæ•´åˆ°[0,255]çš„ç°åº¦ç©ºé—´å†…</span></span><br><span class="line">    magnitude_spectrum = <span class="number">20</span> * np.log(np.<span class="built_in">abs</span>(fshift))</span><br><span class="line">    plt.subplot(<span class="number">121</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.subplot(<span class="number">122</span>), plt.imshow(magnitude_spectrum, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Magnitude Spectrum&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="90.png" style="zoom: 80%;" /><h3 id="é«˜é€šæ»¤æ³¢">é«˜é€šæ»¤æ³¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    f = np.fft.fft2(img)</span><br><span class="line">    fshift = np.fft.fftshift(f)</span><br><span class="line">    rows, cols = img.shape</span><br><span class="line">    crow, ccol = <span class="built_in">int</span>(rows / <span class="number">2</span>), <span class="built_in">int</span>(cols / <span class="number">2</span>)</span><br><span class="line">    <span class="comment"># ä¸­é—´30*30çš„åƒç´ ç½®ä¸º0</span></span><br><span class="line">    fshift[crow - <span class="number">30</span>:crow + <span class="number">30</span>, ccol - <span class="number">30</span>:ccol + <span class="number">30</span>] = <span class="number">0</span></span><br><span class="line">    ishift = np.fft.ifft2(fshift)</span><br><span class="line">    iimg = np.<span class="built_in">abs</span>(ishift)</span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">121</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.subplot(<span class="number">122</span>), plt.imshow(iimg, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;iimg&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="91.png" style="zoom: 80%;" /><p>ä½†è¿™æ ·çš„é«˜é€šæ»¤æ³¢åœ¨å›¾åƒä¸­ä¼šæ˜¾ç¤ºå‡ºä¸€äº›æ³¢çº¹çŠ¶ç»“æ„ï¼Œç§°ä¸º<strong>æŒ¯é“ƒæ•ˆåº”</strong>ã€‚è¿™æ˜¯ç”±æˆ‘ä»¬ç”¨äºé®ç½©çš„çŸ©å½¢çª—å£å¼•èµ·çš„ã€‚æ­¤æ©ç è½¬æ¢ä¸ºæ­£å¼¦å½¢çŠ¶ï¼Œä»è€Œå¯¼è‡´æ­¤é—®é¢˜ã€‚å› æ­¤ï¼ŒçŸ©å½¢çª—å£ä¸ç”¨äºè¿‡æ»¤ã€‚æ›´å¥½çš„é€‰æ‹©æ˜¯é«˜æ–¯çª—å£ã€‚</p><h2 id="OpenCVä¸­çš„å‚…é‡Œå¶å˜æ¢">OpenCVä¸­çš„å‚…é‡Œå¶å˜æ¢</h2><p>OpenCVä¸ºæ­¤æä¾›äº†<strong>cv.dft</strong>()å’Œ<strong>cv.idft</strong>()å‡½æ•°ã€‚å®ƒè¿”å›ä¸å‰ä¸€ä¸ªç›¸åŒçš„ç»“æœï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªé€šé“ã€‚ç¬¬ä¸€ä¸ªé€šé“æ˜¯ç»“æœçš„å®éƒ¨ï¼Œç¬¬äºŒä¸ªé€šé“æ˜¯ç»“æœçš„è™šéƒ¨ã€‚è¾“å…¥å›¾åƒé¦–å…ˆåº”è½¬æ¢ä¸º<code>np.float32</code>ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆåšã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    dft = cv.dft(np.float32(img), flags=cv.DFT_COMPLEX_OUTPUT)</span><br><span class="line">    dft_shift = np.fft.fftshift(dft)</span><br><span class="line">    magnitude_spectrum = <span class="number">20</span> * np.log(cv.magnitude(dft_shift[:, :, <span class="number">0</span>], dft_shift[:, :, <span class="number">1</span>]))</span><br><span class="line">    plt.subplot(<span class="number">121</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.subplot(<span class="number">122</span>), plt.imshow(magnitude_spectrum, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Magnitude Spectrum&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><h3 id="ä½é€šæ»¤æ³¢">ä½é€šæ»¤æ³¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\1.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    dft = cv.dft(np.float32(img), flags=cv.DFT_COMPLEX_OUTPUT)</span><br><span class="line">    dft_shift = np.fft.fftshift(dft)</span><br><span class="line">    magnitude_spectrum = <span class="number">20</span> * np.log(cv.magnitude(dft_shift[:, :, <span class="number">0</span>], dft_shift[:, :, <span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    rows, cols = img.shape</span><br><span class="line">    crow, ccol = <span class="built_in">int</span>(rows / <span class="number">2</span>), <span class="built_in">int</span>(cols / <span class="number">2</span>)</span><br><span class="line">    <span class="comment"># é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ©ç ï¼Œä¸­å¿ƒæ­£æ–¹å½¢ä¸º1ï¼Œå…¶ä½™å…¨ä¸ºé›¶</span></span><br><span class="line">    mask = np.zeros((rows, cols, <span class="number">2</span>), np.uint8)</span><br><span class="line">    mask[crow - <span class="number">30</span>:crow + <span class="number">30</span>, ccol - <span class="number">30</span>:ccol + <span class="number">30</span>] = <span class="number">1</span></span><br><span class="line">    <span class="comment"># åº”ç”¨æ©ç å’Œé€†DFT</span></span><br><span class="line">    fshift = dft_shift * mask</span><br><span class="line">    f_ishift = np.fft.ifftshift(fshift)</span><br><span class="line">    img_back = cv.idft(f_ishift)</span><br><span class="line">    img_back = cv.magnitude(img_back[:, :, <span class="number">0</span>], img_back[:, :, <span class="number">1</span>])</span><br><span class="line">    plt.subplot(<span class="number">121</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Input Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.subplot(<span class="number">122</span>), plt.imshow(img_back, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Magnitude Spectrum&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="92.png" style="zoom: 80%;" /><h3 id="è¸©å‘">è¸©å‘</h3><p>æ»¤æ³¢æ—¶ï¼Œ<code>  crow, ccol = int(rows / 2), int(cols / 2)</code>è€Œä¸èƒ½ç”¨<code>  crow, ccol = rows / 2, cols / 2</code>ï¼Œåè€…ä¼šæŠ¥é”™<code>slice indices must be integers or None or have an __index__ method</code>ï¼Œå› ä¸ºé™¤æ³•è¿”å›çš„æ˜¯æµ®ç‚¹å€¼ï¼Œä¸èƒ½ç›´æ¥ç”¨äºäºŒç»´æ•°ç»„ç´¢å¼•ã€‚</p><p>æˆ–è€…å°†<code>/</code>æ”¹ä¸º<code>//</code>ã€‚</p><h2 id="DFTçš„æ€§èƒ½ä¼˜åŒ–">DFTçš„æ€§èƒ½ä¼˜åŒ–</h2><p>å¯¹äºæŸäº›æ•°ç»„å°ºå¯¸ï¼ŒDFTçš„è®¡ç®—æ€§èƒ½è¾ƒå¥½ã€‚å½“æ•°ç»„å¤§å°ä¸º2çš„å¹‚æ—¶ï¼Œé€Ÿåº¦æœ€å¿«ã€‚å¯¹äºå¤§å°ä¸º2ã€3å’Œ5çš„ä¹˜ç§¯çš„æ•°ç»„ï¼Œä¹Ÿå¯ä»¥éå¸¸æœ‰æ•ˆåœ°è¿›è¡Œå¤„ç†ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æ‹…å¿ƒä»£ç çš„æ€§èƒ½ï¼Œå¯ä»¥åœ¨æ‰¾åˆ°DFTä¹‹å‰å°†æ•°ç»„çš„å¤§å°ä¿®æ”¹ä¸ºä»»ä½•æœ€ä½³å¤§å°(é€šè¿‡å¡«å……é›¶)ã€‚å¯¹äºOpenCVï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨å¡«å……é›¶ã€‚ä½†æ˜¯å¯¹äºNumpyï¼Œæ‚¨æŒ‡å®šFFTè®¡ç®—çš„æ–°å¤§å°ï¼Œå®ƒå°†è‡ªåŠ¨ä¸ºæ‚¨å¡«å……é›¶ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜çš„å¤§å°å‘¢?OpenCVä¸ºæ­¤æä¾›äº†ä¸€ä¸ªå‡½æ•°ï¼Œ<strong>cv.getOptimalDFTSize</strong>()ã€‚å®ƒåŒæ—¶é€‚ç”¨äº<strong>cv.dft</strong>()å’Œ<strong>np.fft.fft2</strong>()ã€‚è®©æˆ‘ä»¬ä½¿ç”¨IPythoné­”æœ¯å‘½ä»¤timeitæ¥æ£€æŸ¥å®ƒä»¬çš„æ€§èƒ½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">16</span>]: img = cv.imread(<span class="string">&#x27;messi5.jpg&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">In [<span class="number">17</span>]: rows,cols = img.shape</span><br><span class="line">In [<span class="number">18</span>]: <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.<span class="built_in">format</span>(rows,cols))</span><br><span class="line"><span class="number">342</span> <span class="number">548</span></span><br><span class="line">In [<span class="number">19</span>]: nrows = cv.getOptimalDFTSize(rows)</span><br><span class="line">In [<span class="number">20</span>]: ncols = cv.getOptimalDFTSize(cols)</span><br><span class="line">In [<span class="number">21</span>]: <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.<span class="built_in">format</span>(nrows,ncols))</span><br><span class="line"><span class="number">360</span> <span class="number">576</span></span><br></pre></td></tr></table></figure><p>å‚è§ï¼Œå°†å¤§å°<code>(342,548)</code>ä¿®æ”¹ä¸º<code>(360ï¼Œ576)</code>ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨é›¶å¡«å……ï¼ˆå¯¹äºOpenCVï¼‰ï¼Œå¹¶æ‰¾åˆ°å…¶DFTè®¡ç®—æ€§èƒ½ã€‚æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„é›¶æ•°ç»„å¹¶å°†æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­æ¥å®Œæˆæ­¤æ“ä½œï¼Œæˆ–è€…ä½¿ç”¨<strong>cv.copyMakeBorder</strong>()ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nimg = np.zeros((nrows,ncols))</span><br><span class="line">nimg[:rows,:cols] = img</span><br></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">right = ncols - cols</span><br><span class="line">bottom = nrows - rows</span><br><span class="line">bordertype = cv.BORDER_CONSTANT ï¼ƒåªæ˜¯ä¸ºäº†é¿å…PDFæ–‡ä»¶ä¸­çš„è¡Œä¸­æ–­</span><br><span class="line">nimg = cv.copyMakeBorder(img,<span class="number">0</span>,bottom,<span class="number">0</span>,right,bordertype, value = <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬è®¡ç®—Numpyå‡½æ•°çš„DFTæ€§èƒ½æ¯”è¾ƒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">22</span>]: %timeit fft1 = np.fft.fft2(img)</span><br><span class="line"><span class="number">10</span> loops, best of <span class="number">3</span>: <span class="number">40.9</span> ms per loop</span><br><span class="line">In [<span class="number">23</span>]: %timeit fft2 = np.fft.fft2(img,[nrows,ncols])</span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">10.4</span> ms per loop</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¾ç¤ºäº†4å€çš„åŠ é€Ÿã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨OpenCVå‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">24</span>]: %timeit dft1= cv.dft(np.float32(img),flags=cv.DFT_COMPLEX_OUTPUT)</span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">13.5</span> ms per loop</span><br><span class="line">In [<span class="number">27</span>]: %timeit dft2= cv.dft(np.float32(nimg),flags=cv.DFT_COMPLEX_OUTPUT)</span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">3.11</span> ms per loop</span><br></pre></td></tr></table></figure><p>å®ƒè¿˜æ˜¾ç¤ºäº†4å€çš„åŠ é€Ÿã€‚æ‚¨è¿˜å¯ä»¥çœ‹åˆ°OpenCVå‡½æ•°æ¯”Numpyå‡½æ•°å¿«3å€å·¦å³ã€‚ä¹Ÿå¯ä»¥å¯¹é€†FFTè¿›è¡Œæµ‹è¯•ï¼Œè¿™ç•™ç»™æ‚¨ç»ƒä¹ ã€‚</p><h1>æ¨¡æ¿åŒ¹é…</h1><p>æ¨¡æ¿åŒ¹é…æ˜¯ä¸€ç§ç”¨äºåœ¨è¾ƒå¤§å›¾åƒä¸­æœç´¢å’ŒæŸ¥æ‰¾æ¨¡æ¿å›¾åƒä½ç½®çš„æ–¹æ³•ã€‚ä¸ºæ­¤ï¼ŒOpenCVå¸¦æœ‰ä¸€ä¸ªå‡½æ•°<code>cv.matchTemplate()</code>ã€‚ å®ƒåªæ˜¯å°†æ¨¡æ¿å›¾åƒæ»‘åŠ¨åˆ°è¾“å…¥å›¾åƒä¸Šï¼ˆå°±åƒåœ¨2Då·ç§¯ä¸­ä¸€æ ·ï¼‰ï¼Œç„¶ååœ¨æ¨¡æ¿å›¾åƒä¸‹æ¯”è¾ƒæ¨¡æ¿å’Œè¾“å…¥å›¾åƒçš„æ‹¼å›¾ã€‚ OpenCVä¸­å®ç°äº†å‡ ç§æ¯”è¾ƒæ–¹æ³•ã€‚ï¼ˆæ‚¨å¯ä»¥æ£€æŸ¥æ–‡æ¡£ä»¥äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼‰ã€‚<strong>å®ƒè¿”å›ä¸€ä¸ªç°åº¦å›¾åƒï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ è¡¨ç¤ºè¯¥åƒç´ çš„é‚»åŸŸä¸æ¨¡æ¿åŒ¹é…çš„ç¨‹åº¦</strong>ã€‚</p><blockquote><p><strong>æ³¨æ„</strong> å¦‚æœä½¿ç”¨<strong>cv.TM_SQDIFF</strong>ä½œä¸ºæ¯”è¾ƒæ–¹æ³•ï¼Œåˆ™æœ€å°å€¼æä¾›æœ€ä½³åŒ¹é…ã€‚</p></blockquote><h2 id="å‡½æ•°-11">å‡½æ•°</h2><p>åœ¨OpenCVå†…ï¼Œ æ¨¡æ¿åŒ¹é…æ˜¯ä½¿ç”¨å‡½æ•°cv2.matchTemplate(ï¼‰å®ç°çš„ã€‚ è¯¥å‡½æ•°çš„è¯­æ³•æ ¼å¼ä¸ºï¼š<code>result=cv2.matchTemplate (image,templ,method[,mask]) </code><br>å…¶ä¸­ï¼š</p><ul><li>imageä¸ºåŸå§‹å›¾åƒï¼Œ å¿…é¡»æ˜¯8ä½æˆ–è€…32ä½çš„æµ®ç‚¹å‹å›¾åƒã€‚</li><li>templä¸ºæ¨¡æ¿å›¾åƒã€‚ <strong>å®ƒçš„å°ºå¯¸å¿…é¡»å°äºæˆ–ç­‰äºåŸå§‹å›¾åƒï¼Œ å¹¶ä¸”ä¸åŸå§‹å›¾åƒå…·æœ‰åŒæ ·çš„ç±»å‹</strong>ã€‚</li><li>methodä¸ºåŒ¹é…æ–¹æ³•ã€‚ è¯¥å‚æ•°é€šè¿‡ <code>TemplateMatchModes</code>å®ç°ï¼Œ æœ‰6ç§å¯èƒ½çš„å€¼ã€‚</li></ul><img src="96.png" style="zoom: 80%;" /><ul><li>mask ä¸ºæ¨¡æ¿å›¾åƒæ©æ¨¡ã€‚å®ƒå¿…é¡»å’Œæ¨¡æ¿å›¾åƒ tempi å…·æœ‰ç›¸åŒçš„ç±»å‹å’Œå¤§å°ã€‚é€šå¸¸æƒ…å†µä¸‹è¯¥å€¼ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚å½“å‰ï¼Œè¯¥å‚æ•°ä»…æ”¯æŒTM_SQDIFFå’ŒTM_CCORR_NORMEDä¸¤ä¸ªå€¼ã€‚</li></ul><p>å¦‚æœè¾“å…¥å›¾åƒçš„å¤§å°ä¸º<code>(WxH)</code>ï¼Œè€Œæ¨¡æ¿å›¾åƒçš„å¤§å°ä¸º<code>(wxh)</code>ï¼Œ<strong>åˆ™è¾“å‡ºå›¾åƒçš„å¤§å°å°†ä¸º<code>(W - w + 1ï¼ŒH - h + 1)</code></strong>ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼Œåœ¨è¿›è¡Œæ¨¡æ¿åŒ¹é…æ—¶ï¼Œ æ¨¡æ¿åœ¨åŸå§‹å›¾åƒå†…éå†ã€‚ åœ¨æ°´å¹³æ–¹å‘ä¸Šï¼š</p><ul><li><p>éå†çš„èµ·å§‹åæ ‡æ˜¯åŸå§‹å›¾åƒå·¦æ•°ç¬¬1ä¸ªåƒç´ å€¼ï¼ˆåºå·ä»1å¼€å§‹ï¼‰ã€‚</p></li><li><p>æœ€åä¸€æ¬¡æ¯”è¾ƒæ˜¯å½“æ¨¡æ¿å›¾åƒä½äºåŸå§‹å›¾åƒçš„æœ€å³ä¾§æ—¶ï¼Œ æ­¤æ—¶å…¶å·¦ä¸Šè§’åƒç´ ç‚¹æ‰€åœ¨çš„ä½ç½®æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>âˆ’</mo><mi>w</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W-w+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p></li></ul><p>å› æ­¤ï¼Œ è¿”å›å€¼resultåœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¤§å°æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>âˆ’</mo><mi>w</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W-w+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼ˆæ°´å¹³æ–¹å‘ä¸Šçš„æ¯”è¾ƒæ¬¡æ•°ï¼‰ã€‚ç«–ç›´æ–¹å‘åŒç†ã€‚</p><hr><p>å¾—åˆ°ç»“æœåï¼Œå¯ä»¥ä½¿ç”¨<code>cv.minMaxLoc()</code>å‡½æ•°æŸ¥æ‰¾æœ€å¤§/æœ€å°å€¼åœ¨å“ªã€‚å°†å…¶ä½œä¸ºçŸ©å½¢çš„å·¦ä¸Šè§’ï¼Œå¹¶ä»¥<code>(wï¼Œh)</code>ä½œä¸ºçŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ã€‚è¯¥çŸ©å½¢æ˜¯æ‚¨æ¨¡æ¿çš„åŒºåŸŸã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ ï¼Œ <strong>å‡½æ•°<code>cv2.matchTemplate()</code>é€šè¿‡å‚æ•°methodæ¥å†³å®šä½¿ç”¨ä¸åŒçš„æŸ¥æ‰¾æ–¹æ³•ã€‚å¯¹åƒä¸åŒçš„æŸ¥æ‰¾æ–¹æ³•ï¼Œ è¿”å›å€¼resultå…·æœ‰ä¸åŒçš„å«ä¹‰</strong>ã€‚ ä¾‹å¦‚ï¼š</p><ul><li><p>methodçš„å€¼ä¸º<code>cv2.TM_SQDIFF</code>å’Œ<code>cv2.TM_SQDIFF_NORMED</code>æ—¶ ï¼Œ resultå€¼ä¸º0è¡¨ç¤ºåŒ¹é…åº¦æœ€å°ï¼Œå€¼è¶Šå¤§ ï¼Œ è¡¨ç¤ºåŒ¹é…åº¦è¶Šå·®ã€‚</p></li><li><p>method çš„å€¼ä¸º <code>cv2.TM_CCORR </code>ã€<code>cv2.TM_CCORR_NORMED</code>ã€<code>cv2.TM_CCOEFF </code>å’Œ<code>cv2.TM_CCOEFF _NORMED</code>æ—¶ï¼Œ resultçš„å€¼è¶Šå°è¡¨ç¤ºåŒ¹é…åº¦è¶Šå·®ï¼Œ å€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…åº¦è¶Šå¥½ã€‚</p></li></ul><p>ä»ä¸Šè¿°åˆ†æå¯ä»¥çœ‹å‡º ï¼Œ æŸ¥æ‰¾æ–¹æ³•ä¸åŒï¼Œ ç»“æœçš„åˆ¤å®šæ–¹å¼ä¹Ÿä¸åŒã€‚ <strong>åœ¨æŸ¥æ‰¾æœ€ä½³åŒ¹é…æ—¶ ï¼Œ é¦–å…ˆè¦ç¡®å®šä½¿ç”¨çš„æ˜¯ä½•ç§method, ç„¶åå†ç¡®å®šåˆ°åº•æ˜¯æŸ¥æ‰¾æœ€å¤§å€¼ï¼Œ è¿˜æ˜¯æŸ¥æ‰¾æœ€å°å€¼</strong>ã€‚</p><p>æŸ¥æ‰¾æœ€å€¼ï¼ˆæå€¼ï¼‰ä¸æœ€å€¼æ‰€åœ¨çš„ä½ç½®ï¼Œ å¯ä»¥ä½¿ç”¨<code> cv2.minMaxLoc()</code> å‡½æ•°å®ç°ã€‚ è¯¥å‡½æ•°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>minVal,maxVal,minLoc,maxLoc=cv2.minMaxLoc (src[,mask])</code></p><p>å…¶ä¸­ï¼š</p><ul><li><code>src</code>ä¸º<strong>å•é€šé“æ•°ç»„</strong>ã€‚</li><li><code>minVal</code>ä¸ºè¿”å›çš„æœ€å°å€¼ï¼Œ å¦‚æœæ²¡æœ‰æœ€å°å€¼ï¼Œ åˆ™å¯ä»¥æ˜¯NULLï¼ˆç©ºå€¼ï¼‰ã€‚</li><li><code>maxVal</code>ä¸ºè¿”å›çš„æœ€å¤§å€¼ï¼Œ å¦‚æœæ²¡æœ‰æœ€å°å€¼ï¼Œ åˆ™å¯ä»¥æ˜¯NULLã€‚</li><li><code>minLoc</code>ä¸ºæœ€å¤§å€¼çš„ä½ç½®ï¼Œ å¦‚æœæ²¡æœ‰æœ€å¤§å€¼ï¼Œ åˆ™å¯ä»¥æ˜¯NULLã€‚</li><li><code>maxLoc</code>ä¸ºæœ€å¤§å€¼çš„ä½ç½®ï¼Œ å¦‚æœæ²¡æœ‰æœ€å¤§å€¼ï¼Œ åˆ™å¯ä»¥æ˜¯NULLã€‚</li></ul><h2 id="å•æ¨¡æ¿åŒ¹é…">å•æ¨¡æ¿åŒ¹é…</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&quot;image\\0.png&quot;</span>, <span class="number">0</span>)</span><br><span class="line">    img2 = img.copy()</span><br><span class="line">    target = cv.imread(<span class="string">&#x27;image\\target-0.png&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">    w, h = target.shape[::-<span class="number">1</span>]</span><br><span class="line">    <span class="comment"># åˆ—è¡¨ä¸­æ‰€æœ‰çš„6ç§æ¯”è¾ƒæ–¹æ³•</span></span><br><span class="line">    methods = [<span class="string">&#x27;cv.TM_CCOEFF&#x27;</span>, <span class="string">&#x27;cv.TM_CCOEFF_NORMED&#x27;</span>, <span class="string">&#x27;cv.TM_CCORR&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;cv.TM_CCORR_NORMED&#x27;</span>, <span class="string">&#x27;cv.TM_SQDIFF&#x27;</span>, <span class="string">&#x27;cv.TM_SQDIFF_NORMED&#x27;</span>]</span><br><span class="line">    l = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> meth <span class="keyword">in</span> methods:</span><br><span class="line">        img = img2.copy()</span><br><span class="line">        method = <span class="built_in">eval</span>(meth)</span><br><span class="line">        <span class="comment"># åº”ç”¨æ¨¡æ¿åŒ¹é…</span></span><br><span class="line">        res = cv.matchTemplate(img, target, method)</span><br><span class="line">        min_val, max_val, min_loc, max_loc = cv.minMaxLoc(res)</span><br><span class="line">        <span class="comment"># å¦‚æœæ–¹æ³•æ˜¯TM_SQDIFFæˆ–TM_SQDIFF_NORMEDï¼Œåˆ™å–æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">if</span> method <span class="keyword">in</span> [cv.TM_SQDIFF, cv.TM_SQDIFF_NORMED]:</span><br><span class="line">            top_left = min_loc</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            top_left = max_loc</span><br><span class="line">        bottom_right = (top_left[<span class="number">0</span>] + w, top_left[<span class="number">1</span>] + h)</span><br><span class="line">        cv.rectangle(img, top_left, bottom_right, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">        plt.subplot(<span class="number">6</span>, <span class="number">2</span>, l), plt.imshow(res, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">        plt.title(<span class="string">&#x27;Matching Result&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">        plt.subplot(<span class="number">6</span>, <span class="number">2</span>, l + <span class="number">1</span>), plt.imshow(img, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">        plt.title(meth), plt.xticks([]), plt.yticks([])</span><br><span class="line">        l = l + <span class="number">2</span></span><br><span class="line">   </span><br><span class="line">    plt.show()</span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¾ç„¶ï¼Œç›¸å…³ç³»æ•°åŒ¹é…åœ¨è¿™å¼ å›¾ç‰‡ä¸­å‡ºäº†é—®é¢˜ï¼Œè€Œä¸”å…¶ä»–å›¾ç‰‡ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜</p><img src="97.png" style="zoom: 80%;" /><h2 id="å¤šæ¨¡æ¿åŒ¹é…">å¤šæ¨¡æ¿åŒ¹é…</h2><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœç´¢çš„å­å›¾åœ¨æ•´ä¸ªè¾“å…¥å›¾åƒå†…ä»…å‡ºç°äº†ä¸€æ¬¡ã€‚ä½†æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œè¦æœç´¢çš„æ¨¡æ¿å›¾åƒå¾ˆå¯èƒ½åœ¨è¾“å…¥å›¾åƒå†…å‡ºç°äº†å¤šæ¬¡ï¼Œè¿™æ—¶å°±éœ€è¦æ‰¾å‡ºå¤šä¸ªåŒ¹é…ç»“æœã€‚è€Œå‡½æ•°<code>cv2.minMaxLoc()</code>ä»…ä»…èƒ½å¤Ÿæ‰¾å‡ºæœ€å€¼ï¼Œæ— æ³•ç»™å‡ºæ‰€æœ‰åŒ¹é…åŒºåŸŸçš„ä½ç½®ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œè¦æƒ³åŒ¹é…å¤šä¸ªç»“æœï¼Œä½¿ç”¨å‡½æ•°<code>cv2.minMaxLoc()</code>æ˜¯æ— æ³•å®ç°çš„éœ€è¦åˆ©ç”¨é˜ˆå€¼è¿›è¡Œå¤„ç†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img_rgb = cv.imread(<span class="string">&#x27;image\\4.png&#x27;</span>)</span><br><span class="line">    img_gray = cv.cvtColor(img_rgb, cv.COLOR_BGR2GRAY)</span><br><span class="line">    target = cv.imread(<span class="string">&#x27;image\\target-4.png&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">    w, h = target.shape[::-<span class="number">1</span>]</span><br><span class="line">    res = cv.matchTemplate(img_gray, target, cv.TM_CCOEFF_NORMED)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#è¿™é‡Œçš„é˜ˆå€¼æ˜¯è‡ªå·±å®šçš„</span></span><br><span class="line">    threshold = <span class="number">0.8</span></span><br><span class="line">    loc = np.where(res &gt;= threshold)</span><br><span class="line">    <span class="comment">#å‡½æ•°zip(ï¼‰ç”¨å¯è¿­ä»£çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å¯¹è±¡ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ç”±è¿™äº›å…ƒç»„ç»„æˆçš„åˆ—è¡¨ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> pt <span class="keyword">in</span> <span class="built_in">zip</span>(*loc[::-<span class="number">1</span>]):</span><br><span class="line">        cv.rectangle(img_rgb, pt, (pt[<span class="number">0</span>] + w, pt[<span class="number">1</span>] + h), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">    cv.imwrite(<span class="string">&#x27;res.png&#x27;</span>, img_rgb)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä½¿ç”¨å‡½æ•°<code>numpy.where()</code>åœ¨å‡½æ•°<code>cv2.matchTemplate()</code>çš„è¾“å‡ºå€¼ä¸­æŸ¥æ‰¾æŒ‡å®šå€¼ï¼Œ å¾—åˆ°çš„å½¢å¼&quot;ï¼ˆè¡Œå·ï¼Œ åˆ—å·ï¼‰ï¼‚çš„ä½ç½®ç´¢å¼•ã€‚ä½†æ˜¯ï¼Œå‡½æ•°<code>cv2.rectangle()</code>ä¸­ç”¨äºæŒ‡å®šé¡¶ç‚¹çš„å‚æ•°æ‰€ä½¿ç”¨çš„æ˜¯å½¢å¼ä¸º&quot;ï¼ˆåˆ—å·ï¼Œ è¡Œå·ï¼‰&quot;çš„ä½ç½®ç´¢å¼•ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨å‡½æ•°<code>cv2.rectangle() </code>ç»˜åˆ¶çŸ©å½¢å‰ ï¼Œ è¦å…ˆå°†å‡½æ•°<code> numpy.where()</code>å¾—åˆ°çš„ä½ç½®ç´¢å¼•åšâ€œè¡Œåˆ—äº’æ¢ï¼‚ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­å¥å®ç°locå†…è¡Œåˆ—ä½ç½®çš„äº’æ¢ï¼š</p><p><code>loc[::-1] </code>ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><img src="98.png" style="zoom: 120%;" /><p>æ³¨æ„åˆ°ï¼Œ æœ¬æ¥åœ¨å‡½æ•°<code>cv2.rectangle()</code>ä¸­è®¾ç½®çš„è¾¹ç•Œå®½åº¦ä¸º2, ä½†å®é™…ä¸Šæ ‡è®°å‡ºæ¥çš„å®½åº¦è¿œè¿œå¤§äº2ã€‚è¿™æ˜¯å› ä¸ºåœ¨å½“å‰çš„åŒºåŸŸå†…ï¼Œ å­˜åœ¨å¤šä¸ªå¤§äºå½“å‰æŒ‡å®šé˜ˆå€¼0.8çš„æƒ…å†µï¼Œæ‰€ä»¥å°†å®ƒä»¬éƒ½åšäº†æ ‡è®°ã€‚è¿™æ ·ï¼Œå¤šä¸ªå®½åº¦ä¸º2çš„çŸ©å½¢å°±åˆåœ¨äº†ä¸€èµ·ï¼Œæ˜¾å¾—è¾¹ç•Œæ¯”è¾ƒç²—ã€‚å¯ä»¥å°è¯•ä¿®æ”¹é˜ˆå€¼ï¼Œè°ƒæ•´å®½åº¦ï¼Œè§‚å¯Ÿä¸åŒçš„æ¼”ç¤ºæ•ˆæœã€‚</p><h1>ç‰¹å¾åŒ¹é…</h1><p>æœ¬éƒ¨åˆ†å¯ä»¥è®¤ä¸ºæ˜¯ä¸Šä¸€éƒ¨åˆ†åœ°è¿›é˜¶ã€‚</p><p>â€‹        å¤§å¤šæ•°äººéƒ½ä¼šç©æ‹¼å›¾æ¸¸æˆã€‚ä½ ä¼šå¾—åˆ°å¾ˆå¤šå°å›¾åƒï¼Œéœ€è¦æ­£ç¡®ç»„è£…å®ƒä»¬ä»¥å½¢æˆå¤§çš„çœŸå®å›¾åƒã€‚é—®é¢˜æ˜¯ï¼Œä½ æ€ä¹ˆåšï¼Ÿå°†ç›¸åŒçš„ç†è®ºæŠ•å½±åˆ°è®¡ç®—æœºç¨‹åºä¸Šï¼Œä»¥ä¾¿è®¡ç®—æœºå¯ä»¥ç©æ‹¼å›¾æ¸¸æˆå‘¢ï¼Ÿå¦‚æœè®¡ç®—æœºå¯ä»¥ç©æ‹¼å›¾æ¸¸æˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç»™è®¡ç®—æœºæä¾›å¾ˆå¤šè‡ªç„¶é£å…‰çš„çœŸå®å›¾åƒï¼Œå¹¶å‘Šè¯‰è®¡ç®—æœºå°†æ‰€æœ‰è¿™äº›å›¾åƒæ‹¼æ¥æˆä¸€ä¸ªå¤§å›¾åƒå‘¢ï¼Ÿå¦‚æœè®¡ç®—æœºå¯ä»¥å°†å¤šä¸ªè‡ªç„¶å›¾åƒç¼åˆåœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆå¦‚ä½•ç»™å»ºç­‘ç‰©æˆ–ä»»ä½•ç»“æ„æä¾›å¤§é‡å›¾ç‰‡å¹¶å‘Šè¯‰è®¡ç®—æœºä»ä¸­åˆ›å»º3Dæ¨¡å‹å‘¢ï¼Ÿ</p><p>â€‹        å¥½äº†ï¼Œé—®é¢˜å’Œæƒ³è±¡åŠ›è¿˜åœ¨ç»§ç»­ã€‚ä½†è¿™å…¨éƒ½å–å†³äºæœ€åŸºæœ¬çš„é—®é¢˜ï¼šä½ å¦‚ä½•ç©æ‹¼å›¾æ¸¸æˆï¼Ÿä½ å¦‚ä½•å°†è®¸å¤šè¢«æ‰°çš„å›¾åƒç‰‡æ®µæ’åˆ—æˆä¸€ä¸ªå¤§çš„å•å¼ å›¾åƒï¼Ÿä½ å¦‚ä½•å°†è®¸å¤šè‡ªç„¶å›¾åƒæ‹¼æ¥åˆ°ä¸€å¼ å›¾åƒä¸Šï¼Ÿ</p><p>â€‹        ç­”æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾<strong>ç‹¬ç‰¹çš„ï¼Œæ˜“äºè·Ÿè¸ªå’Œæ¯”è¾ƒçš„ç‰¹å®šæ¨¡æ¿æˆ–ç‰¹å®šç‰¹å¾</strong>ã€‚å¦‚æœæˆ‘ä»¬å¯¹è¿™ç§ç‰¹å¾è¿›è¡Œå®šä¹‰ï¼Œå¯èƒ½ä¼šå‘ç°å¾ˆéš¾ç”¨è¯­è¨€æ¥è¡¨è¾¾å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“å®ƒä»¬æ˜¯ä»€ä¹ˆã€‚å¦‚æœæœ‰äººè¦æ±‚ä½ æŒ‡å‡ºä¸€é¡¹å¯ä»¥åœ¨å¤šå¼ å›¾åƒä¸­è¿›è¡Œæ¯”è¾ƒçš„è‰¯å¥½ç‰¹å¾ï¼Œåˆ™å¯ä»¥æŒ‡å‡ºå…¶ä¸­ä¸€é¡¹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä½¿æ˜¯å°å­©ä¹Ÿå¯ä»¥ç©è¿™äº›æ¸¸æˆçš„åŸå› ã€‚æˆ‘ä»¬åœ¨å›¾åƒä¸­æœç´¢è¿™äº›ç‰¹å¾ï¼Œæ‰¾åˆ°å®ƒä»¬ï¼Œåœ¨å…¶ä»–å›¾åƒä¸­å¯»æ‰¾ç›¸åŒçš„ç‰¹å¾å¹¶å°†å®ƒä»¬å¯¹é½ã€‚ä»…æ­¤è€Œå·²ã€‚ï¼ˆåœ¨æ‹¼å›¾æ¸¸æˆä¸­ï¼Œæˆ‘ä»¬æ›´å¤šåœ°ç ”ç©¶äº†ä¸åŒå›¾åƒçš„è¿ç»­æ€§ï¼‰ã€‚æ‰€æœ‰è¿™äº›å±æ€§éƒ½æ˜¯æˆ‘ä»¬å›ºæœ‰çš„ã€‚</p><p>â€‹        å› æ­¤ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜æ‰©å±•åˆ°æ›´å¤šï¼Œä½†å˜å¾—æ›´åŠ å…·ä½“ã€‚è¿™äº›ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç­”æ¡ˆå¯¹äºè®¡ç®—æœºä¹Ÿåº”è¯¥æ˜¯å¯ä»¥ç†è§£çš„ã€‚ï¼‰</p><p>â€‹        å¾ˆéš¾è¯´äººç±»å¦‚ä½•å‘ç°è¿™äº›ç‰¹å¾ã€‚è¿™å·²ç»åœ¨æˆ‘ä»¬çš„å¤§è„‘ä¸­è¿›è¡Œäº†ç¼–ç ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ·±å…¥ç ”ç©¶æŸäº›å›¾ç‰‡å¹¶æœç´¢ä¸åŒçš„æ¨¡æ¿ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œçœ‹ä»¥ä¸‹çš„å›¾ç‰‡ï¼š</p><img src="125.png" style="zoom: 80%;" /><p>â€‹        å›¾åƒéå¸¸ç®€å•ã€‚åœ¨å›¾åƒçš„é¡¶éƒ¨ï¼Œç»™å‡ºäº†å…­ä¸ªå°å›¾åƒå—ã€‚ä½ çš„é—®é¢˜æ˜¯åœ¨åŸå§‹å›¾åƒä¸­æ‰¾åˆ°è¿™äº›è¡¥ä¸çš„ç¡®åˆ‡ä½ç½®ã€‚ä½ å¯ä»¥æ‰¾åˆ°å¤šå°‘æ­£ç¡®çš„ç»“æœï¼Ÿ</p><p>â€‹        Aå’ŒBæ˜¯å¹³å¦çš„è¡¨é¢ï¼Œå®ƒä»¬æ•£å¸ƒåœ¨å¾ˆå¤šåŒºåŸŸä¸Šã€‚å¾ˆéš¾æ‰¾åˆ°è¿™äº›è¡¥ä¸çš„ç¡®åˆ‡ä½ç½®ã€‚</p><p>â€‹        Cå’ŒDæ›´ç®€å•ã€‚å®ƒä»¬æ˜¯å»ºç­‘ç‰©çš„è¾¹ç¼˜ã€‚ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå¤§æ¦‚çš„ä½ç½®ï¼Œä½†æ˜¯å‡†ç¡®çš„ä½ç½®ä»ç„¶å¾ˆå›°éš¾ã€‚è¿™æ˜¯å› ä¸ºæ²¿ç€è¾¹ç¼˜çš„æ¯ä¸ªåœ°æ–¹çš„å›¾æ¡ˆéƒ½æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯ï¼Œåœ¨è¾¹ç¼˜ï¼Œæƒ…å†µæœ‰æ‰€ä¸åŒã€‚å› æ­¤ï¼Œä¸å¹³å¦åŒºåŸŸç›¸æ¯”ï¼Œè¾¹ç¼˜æ˜¯æ›´å¥½çš„ç‰¹å¾ï¼Œä½†ä¸å¤Ÿå¥½ï¼ˆåœ¨æ‹¼å›¾æ¸¸æˆä¸­æ¯”è¾ƒè¾¹ç¼˜çš„è¿ç»­æ€§å¾ˆå¥½ï¼‰ã€‚</p><p>â€‹        æœ€åï¼ŒEå’ŒFæ˜¯å»ºç­‘ç‰©çš„æŸäº›è§’è½ã€‚è€Œä¸”å¾ˆå®¹æ˜“æ‰¾åˆ°å®ƒä»¬ã€‚å› ä¸ºåœ¨æ‹è§’å¤„ï¼Œæ— è®ºå°†æ­¤ä¿®è¡¥ç¨‹åºç§»åŠ¨åˆ°ä½•å¤„ï¼Œå®ƒçš„å¤–è§‚éƒ½å°†æœ‰æ‰€ä¸åŒã€‚å› æ­¤ï¼Œå®ƒä»¬å¯ä»¥è¢«è§†ä¸ºå¾ˆå¥½çš„ç‰¹å¾ã€‚å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬è¿›å…¥æ›´ç®€å•ï¼ˆä¸”è¢«å¹¿æ³›ä½¿ç”¨çš„å›¾åƒï¼‰ä»¥æ›´å¥½åœ°ç†è§£ã€‚</p><img src="126.png" style="zoom: 80%;" /><p>â€‹        å°±åƒä¸Šé¢ä¸€æ ·ï¼Œè“è‰²è¡¥ä¸æ˜¯å¹³å¦åŒºåŸŸï¼Œå¾ˆéš¾æ‰¾åˆ°å’Œè·Ÿè¸ªã€‚æ— è®ºä½ å°†è“è‰²è¡¥ä¸ç§»åˆ°ä½•å¤„ï¼Œå®ƒçœ‹èµ·æ¥éƒ½ä¸€æ ·ã€‚é»‘è‰²è¡¥ä¸æœ‰ä¸€ä¸ªè¾¹ç¼˜ã€‚å¦‚æœä½ æ²¿å‚ç›´æ–¹å‘ï¼ˆå³æ²¿æ¸å˜ï¼‰ç§»åŠ¨å®ƒï¼Œåˆ™å®ƒä¼šå‘ç”Ÿå˜åŒ–ã€‚æ²¿ç€è¾¹ç¼˜ï¼ˆå¹³è¡Œäºè¾¹ç¼˜ï¼‰ç§»åŠ¨ï¼Œçœ‹èµ·æ¥ç›¸åŒã€‚å¯¹äºçº¢è‰²è¡¥ä¸ï¼Œè¿™æ˜¯ä¸€ä¸ªè§’è½ã€‚æ— è®ºä½ å°†è¡¥ä¸ç§»åŠ¨åˆ°ä½•å¤„ï¼Œå®ƒçœ‹èµ·æ¥éƒ½ä¸åŒï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯<strong>å”¯ä¸€çš„</strong>ã€‚å› æ­¤ï¼ŒåŸºæœ¬ä¸Šï¼Œæ‹ç‚¹è¢«è®¤ä¸ºæ˜¯å›¾åƒä¸­çš„è‰¯å¥½ç‰¹å¾ã€‚ï¼ˆä¸ä»…æ˜¯è§’è½ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ–‘ç‚¹ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸é”™çš„åŠŸèƒ½ï¼‰ã€‚</p><p>â€‹        å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬å›ç­”äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œâ€œè¿™äº›ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿâ€ã€‚ä½†æ˜¯å‡ºç°äº†ä¸‹ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°å®ƒä»¬ï¼Ÿè¿˜æ˜¯æˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°è§’è½ï¼Ÿæˆ‘ä»¬ä»¥ä¸€ç§ç›´è§‚çš„æ–¹å¼å›ç­”äº†è¿™ä¸€é—®é¢˜ï¼Œå³å¯»æ‰¾å›¾åƒä¸­åœ¨å…¶å‘¨å›´æ‰€æœ‰åŒºåŸŸä¸­ç§»åŠ¨ï¼ˆå°‘é‡ï¼‰å˜åŒ–æœ€å¤§çš„åŒºåŸŸã€‚åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œè¿™å°†è¢«æŠ•å½±åˆ°è®¡ç®—æœºè¯­è¨€ä¸­ã€‚å› æ­¤ï¼Œæ‰¾åˆ°è¿™äº›å›¾åƒç‰¹å¾ç§°ä¸ºç‰¹å¾æ£€æµ‹ã€‚</p><p>â€‹        æˆ‘ä»¬åœ¨å›¾åƒä¸­æ‰¾åˆ°äº†ç‰¹å¾ã€‚æ‰¾åˆ°å®ƒä¹‹åï¼Œä½ åº”è¯¥èƒ½å¤Ÿåœ¨å…¶ä»–å›¾åƒä¸­æ‰¾åˆ°ç›¸åŒçš„å›¾åƒã€‚æ€ä¹ˆåšï¼Ÿæˆ‘ä»¬å›´ç»•è¯¥ç‰¹å¾é‡‡å–ä¸€ä¸ªåŒºåŸŸï¼Œæˆ‘ä»¬ç”¨è‡ªå·±çš„è¯­è¨€è§£é‡Šå®ƒï¼Œä¾‹å¦‚â€œä¸Šéƒ¨æ˜¯è“å¤©ï¼Œä¸‹éƒ¨æ˜¯å»ºç­‘ç‰©çš„åŒºåŸŸï¼Œåœ¨å»ºç­‘ç‰©ä¸Šæœ‰ç»ç’ƒç­‰â€ï¼Œè€Œä½ åœ¨å¦ä¸€ä¸ªå»ºç­‘ç‰©ä¸­æœç´¢ç›¸åŒçš„åŒºåŸŸå›¾ç‰‡ã€‚åŸºæœ¬ä¸Šï¼Œä½ æ˜¯åœ¨æè¿°ç‰¹å¾ã€‚åŒæ ·ï¼Œè®¡ç®—æœºè¿˜åº”è¯¥æè¿°ç‰¹å¾å‘¨å›´çš„åŒºåŸŸï¼Œä»¥ä¾¿å¯ä»¥åœ¨å…¶ä»–å›¾åƒä¸­æ‰¾åˆ°å®ƒã€‚æ‰€è°“çš„æè¿°ç§°ä¸º<strong>ç‰¹å¾æè¿°</strong>ã€‚è·å¾—ç‰¹å¾åŠå…¶æè¿°åï¼Œä½ å¯ä»¥åœ¨æ‰€æœ‰å›¾åƒä¸­æ‰¾åˆ°ç›¸åŒçš„åŠŸèƒ½å¹¶å°†å®ƒä»¬å¯¹é½ï¼Œç¼åˆåœ¨ä¸€èµ·æˆ–è¿›è¡Œæ‰€éœ€çš„æ“ä½œã€‚</p><p>â€‹        å› æ­¤ï¼Œåœ¨æ­¤æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾OpenCVä¸­çš„ä¸åŒç®—æ³•æ¥æŸ¥æ‰¾åŠŸèƒ½ï¼Œå¯¹å…¶è¿›è¡Œæè¿°ï¼Œè¿›è¡ŒåŒ¹é…ç­‰ã€‚</p><h2 id="å“ˆé‡Œæ–¯è§’æ£€æµ‹">å“ˆé‡Œæ–¯è§’æ£€æµ‹</h2><h3 id="åŸç†-10">åŸç†</h3><p>[è®ºæ–‡åŸæ–‡](<a href="https://zwn2001.github.io/2022/02/26/opencv-basic/A">https://zwn2001.github.io/2022/02/26/opencv-basic/A</a> Combined Corner and Edge Detector.pdf)</p><p>åœ¨ä¸Šä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°è§’æ˜¯å›¾åƒä¸­å„ä¸ªæ–¹å‘ä¸Šå¼ºåº¦å˜åŒ–å¾ˆå¤§çš„åŒºåŸŸã€‚<strong>Chris Harriså’ŒMike Stephensåœ¨1988å¹´çš„è®ºæ–‡ã€Šç»„åˆå¼æ‹è§’å’Œè¾¹ç¼˜æ£€æµ‹å™¨</strong>ã€‹ä¸­åšäº†ä¸€æ¬¡å°è¯•æ‰¾åˆ°è¿™äº›æ‹è§’çš„å°è¯•ï¼Œæ‰€ä»¥ç°åœ¨å°†å…¶ç§°ä¸ºå“ˆé‡Œæ–¯æ‹è§’æ£€æµ‹å™¨ã€‚ä»–æŠŠè¿™ä¸ªç®€å•çš„æƒ³æ³•å˜æˆäº†æ•°å­¦å½¢å¼ã€‚å®ƒåŸºæœ¬ä¸Šæ‰¾åˆ°äº†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mtext>ï¼Œ</mtext><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(uï¼Œv)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>åœ¨æ‰€æœ‰æ–¹å‘ä¸Šä½ç§»çš„å¼ºåº¦å·®å¼‚ã€‚è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><img src="127.png" style="zoom: 100%;" /><p>å¯ä»¥ç”¨å¦‚ä¸‹å›¾æ¥è¡¨ç¤ºï¼š</p><img src="128.png" style="zoom: 100%;" /><h3 id="å‡½æ•°-12">å‡½æ•°</h3><p><code>cv.cornerHarris(img,blockSize,ksize,k)</code></p><p>å…¶å‚æ•°ä¸ºï¼š</p><ul><li>img è¾“å…¥å›¾åƒï¼Œåº”ä¸º<strong>ç°åº¦å’Œfloat32ç±»å‹</strong>ã€‚</li><li>blockSize æ˜¯æ‹è§’æ£€æµ‹è€ƒè™‘çš„<strong>é‚»åŸŸå¤§å°</strong></li><li>ksize ä½¿ç”¨çš„Sobelå¯¼æ•°çš„å…‰åœˆå‚æ•°ã€‚</li><li>k ç­‰å¼ä¸­çš„å“ˆé‡Œæ–¯æ£€æµ‹å™¨è‡ªç”±å‚æ•°ã€‚</li><li>dst è¿”å›å€¼ï¼Œç°åº¦å›¾åƒ</li></ul><p><code>corners = cv2.cornerSubPix(gray, np.float32(centroids), (5, 5), (-1, -1), criteria)</code><br>å…·æœ‰äºšåƒç´ ç²¾åº¦çš„è§’ç‚¹ï¼šæœ‰æ—¶å¯èƒ½éœ€è¦ä»¥æœ€å¤§çš„ç²¾åº¦æ‰¾åˆ°è§’ç‚¹ã€‚OpenCVé™„å¸¦äº†ä¸€ä¸ªå‡½æ•°cv2.cornerSubPixï¼ˆï¼‰ï¼Œå®ƒå¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–ä»¥äºšåƒç´ ç²¾åº¦æ£€æµ‹åˆ°çš„è§’ç‚¹ã€‚</p><h3 id="æ ·ä¾‹">æ ·ä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\0.jpg&#x27;</span>)</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    <span class="comment"># å¯»æ‰¾å“ˆé‡Œæ–¯è§’</span></span><br><span class="line">    gray = np.float32(gray)</span><br><span class="line">    dst = cv.cornerHarris(gray, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0.04</span>)</span><br><span class="line">    dst = cv.dilate(dst, <span class="literal">None</span>)<span class="comment">#è†¨èƒ€</span></span><br><span class="line">    ret, dst = cv.threshold(dst, <span class="number">0.01</span> * dst.<span class="built_in">max</span>(), <span class="number">255</span>, <span class="number">0</span>)</span><br><span class="line">    cv.imshow(<span class="string">&quot;dst&quot;</span>, dst)</span><br><span class="line">    dst = np.uint8(dst)</span><br><span class="line">    <span class="comment"># å¯»æ‰¾è´¨å¿ƒ</span></span><br><span class="line">    ret1, labels, stats, centroids = cv.connectedComponentsWithStats(dst)</span><br><span class="line">    <span class="comment"># å®šä¹‰åœæ­¢å’Œå®Œå–„æ‹è§’çš„æ¡ä»¶</span></span><br><span class="line">    criteria = (cv.TERM_CRITERIA_EPS + cv.TERM_CRITERIA_MAX_ITER, <span class="number">100</span>, <span class="number">0.001</span>)</span><br><span class="line">    corners = cv.cornerSubPix(gray, np.float32(centroids), (<span class="number">5</span>, <span class="number">5</span>), (-<span class="number">1</span>, -<span class="number">1</span>), criteria)</span><br><span class="line">    <span class="comment"># ç»˜åˆ¶è§’ç‚¹å’Œç»†åŒ–çš„äºšåƒç´ ç‚¹</span></span><br><span class="line">    res = np.hstack((centroids, corners))</span><br><span class="line">    res = np.int0(res)</span><br><span class="line">    <span class="comment"># Harrisè§’ç‚¹ç”¨çº¢è‰²åƒç´ æ ‡è®°ï¼Œç²¾ç»†è§’ç‚¹ç”¨ç»¿è‰²åƒç´ æ ‡è®°</span></span><br><span class="line">    img[res[:, <span class="number">1</span>], res[:, <span class="number">0</span>]] = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>]</span><br><span class="line">    img[res[:, <span class="number">3</span>], res[:, <span class="number">2</span>]] = [<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    gray = cv.cvtColor(gray, cv.COLOR_GRAY2BGR)</span><br><span class="line">    gray[res[:, <span class="number">1</span>], res[:, <span class="number">0</span>]] = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>]</span><br><span class="line">    gray[res[:, <span class="number">3</span>], res[:, <span class="number">2</span>]] = [<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>]</span><br><span class="line">    cv.imshow(<span class="string">&quot;gray&quot;</span>, gray)</span><br><span class="line">    cv.imshow(<span class="string">&#x27;cornerSubPix res&#x27;</span>, img)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    cv.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="129.png" style="zoom: 100%;" /><h2 id="Shi-tomasæ‹è§’æ£€æµ‹å™¨å’Œç›Šäºè·Ÿè¸ªçš„ç‰¹å¾">Shi-tomasæ‹è§’æ£€æµ‹å™¨å’Œç›Šäºè·Ÿè¸ªçš„ç‰¹å¾</h2><h3 id="åŸç†-11">åŸç†</h3><p>åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†Harris Corner Detectorã€‚1994å¹´ä¸‹åŠå¹´ï¼ŒJã€‚Shiå’ŒC. Tomasiåœ¨ä»–ä»¬çš„è®ºæ–‡ã€Š<strong>æœ‰ç›Šäºè·Ÿè¸ªçš„ç‰¹å¾</strong>ã€‹ä¸­åšäº†ä¸€ä¸ªå°ä¿®æ”¹ï¼Œä¸Harris Harris Detectorç›¸æ¯”ï¼Œæ˜¾ç¤ºäº†æ›´å¥½çš„ç»“æœã€‚å“ˆé‡Œæ–¯è§’è½æ¢æµ‹å™¨çš„è®¡åˆ†åŠŸèƒ½ç”±ä¸‹å¼ç»™å‡ºï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><msub><mi>Î»</mi><mn>1</mn></msub><msub><mi>Î»</mi><mn>2</mn></msub><mo>âˆ’</mo><mi>k</mi><mo stretchy="false">(</mo><msub><mi>Î»</mi><mn>1</mn></msub><mo>+</mo><msub><mi>Î»</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">R=Î»_1Î»_2âˆ’k(Î»_1+Î»_2)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå²æ‰˜é©¬è¥¿æå‡ºï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>Î»</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>Î»</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R=min(Î»_1,Î»_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>å¦‚æœå¤§äºé˜ˆå€¼ï¼Œåˆ™å°†å…¶è§†ä¸ºæ‹è§’ã€‚å¦‚æœåƒåœ¨Harris Corner Detectorä¸­é‚£æ ·åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î»</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>Î»</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">Î»_1âˆ’Î»_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ç©ºé—´ä¸­ç»˜åˆ¶å®ƒï¼Œåˆ™ä¼šå¾—åˆ°å¦‚ä¸‹å›¾åƒï¼š</p><img src="130.png" style="zoom: 100%;" /><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î»</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">Î»_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î»</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">Î»_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¤§äºæœ€å°å€¼<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î»</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Î»_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">Î»</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œæ‰å°†å…¶è§†ä¸ºæ‹è§’ï¼ˆç»¿è‰²åŒºåŸŸï¼‰ã€‚</p><h3 id="æ ·ä¾‹-2">æ ·ä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\5.png&#x27;</span>)</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    corners = cv.goodFeaturesToTrack(gray, <span class="number">25</span>, <span class="number">0.01</span>, <span class="number">10</span>)</span><br><span class="line">    corners = np.int0(corners)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> corners:</span><br><span class="line">        x, y = i.ravel()</span><br><span class="line">        cv.circle(img, (x, y), <span class="number">3</span>, <span class="number">255</span>, -<span class="number">1</span>)</span><br><span class="line">    plt.imshow(img), plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="131.png" style="zoom: 40%;" /><p>æ­¤åŠŸèƒ½æ›´é€‚åˆè·Ÿè¸ªã€‚æˆ‘ä»¬å°†çœ‹åˆ°ä½¿ç”¨å®ƒçš„æ—¶æœºã€‚</p><h2 id="SIFTå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢">SIFTå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢</h2><p>[è®ºæ–‡åŸæ–‡](<a href="https://zwn2001.github.io/2022/02/26/opencv-basic/Distinctive">https://zwn2001.github.io/2022/02/26/opencv-basic/Distinctive</a> Image Features from Scale-Invariant Keypoints.pdf)</p><p>åœ¨å‰ä¸¤ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€äº›åƒHarrisè¿™æ ·çš„æ‹è§’æ£€æµ‹å™¨ã€‚å®ƒä»¬æ˜¯æ—‹è½¬ä¸å˜çš„ï¼Œè¿™æ„å‘³ç€å³ä½¿å›¾åƒæ—‹è½¬äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰¾åˆ°ç›¸åŒçš„è§’ã€‚å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºè½¬è§’åœ¨æ—‹è½¬çš„å›¾åƒä¸­ä¹Ÿä»ç„¶æ˜¯è½¬è§’ã€‚ä½†æ˜¯ç¼©æ”¾å‘¢ï¼Ÿå¦‚æœç¼©æ”¾å›¾åƒï¼Œåˆ™æ‹è§’å¯èƒ½ä¸æ˜¯è§’ã€‚ä¾‹å¦‚ï¼Œæ£€æŸ¥ä¸‹é¢çš„ç®€å•å›¾åƒã€‚åœ¨åŒä¸€çª—å£ä¸­æ”¾å¤§å°çª—å£ä¸­å°å›¾åƒä¸­çš„æ‹è§’æ—¶ï¼Œè¯¥è§’æ˜¯å¹³å¦çš„ã€‚å› æ­¤ï¼ŒHarrisæ‹è§’ä¸æ˜¯å°ºåº¦ä¸å˜çš„ã€‚</p><img src="132.png" style="zoom: 120%;" /><p>å› æ­¤ï¼Œåœ¨2004å¹´ï¼Œä¸åˆ—é¢ å“¥ä¼¦æ¯”äºšå¤§å­¦çš„D.Loweåœ¨ä»–çš„è®ºæ–‡ã€Šå°ºåº¦ä¸å˜å…³é”®ç‚¹ä¸­çš„ç‹¬ç‰¹å›¾åƒç‰¹å¾ã€‹ä¸­æå‡ºäº†ä¸€ç§æ–°ç®—æ³•ï¼Œå³å°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢(SIFT)ï¼Œè¯¥ç®—æ³•æå–å…³é”®ç‚¹å¹¶è®¡ç®—å…¶æè¿°ç®—ç¬¦ã€‚SIFTç®—æ³•ä¸»è¦åŒ…æ‹¬å››ä¸ªæ­¥éª¤ã€‚ æˆ‘ä»¬å°†ä¸€ä¸€çœ‹åˆ°å®ƒä»¬ã€‚</p><h1>éœå¤«å˜æ¢</h1><p>éœå¤«å˜æ¢æ˜¯ä¸€ç§åœ¨å›¾åƒä¸­å¯»æ‰¾ç›´çº¿ã€åœ†å½¢ä»¥åŠå…¶ä»–ç®€å•å½¢çŠ¶çš„æ–¹æ³•ã€‚éœå¤«å˜æ¢é‡‡ç”¨ç±»ä¼¼äº<strong>æŠ•ç¥¨</strong>çš„æ–¹å¼æ¥è·å–å½“å‰å›¾åƒå†…çš„å½¢çŠ¶é›†åˆï¼Œè¯¥å˜æ¢ç”± Paul Houghï¼ˆéœå¤«ï¼‰äº1962å¹´é¦–æ¬¡æå‡ºã€‚æœ€åˆçš„éœå¤«å˜æ¢åªèƒ½ç”¨äºæ£€æµ‹ç›´çº¿ï¼Œç»è¿‡å‘å±•åï¼Œéœå¤«å˜æ¢ä¸ä»…èƒ½å¤Ÿè¯†åˆ«ç›´çº¿ï¼Œè¿˜èƒ½è¯†åˆ«å…¶ä»–ç®€å•çš„å›¾å½¢ç»“æ„ï¼Œå¸¸è§çš„æœ‰åœ†ã€æ¤­åœ†ç­‰ã€‚<br>æœ¬ç« ä¸»è¦ä»‹ç»éœå¤«ç›´çº¿å˜æ¢å’Œéœå¤«åœ†å˜æ¢ã€‚éœå¤«ç›´çº¿å˜æ¢ç”¨æ¥åœ¨å›¾åƒå†…å¯»æ‰¾ç›´çº¿ï¼Œéœå¤«åœ†å˜æ¢ç”¨æ¥åœ¨å›¾åƒå†…å¯»æ‰¾åœ†ã€‚åœ¨ OpenCV ä¸­ï¼Œå‰è€…å¯ä»¥ç”¨å‡½æ•°<code> cv2.HoughLines()</code>å’Œå‡½æ•°<code>cv2.HoughLinesP()</code>å®ç°ï¼Œ åè€…å¯ä»¥ç”¨å‡½æ•°<code>cv2.HoughCircles()</code>å®ç°ã€‚</p><h2 id="éœå¤«çº¿å˜æ¢">éœå¤«çº¿å˜æ¢</h2><h3 id="åŸç†-12">åŸç†</h3><p>ä¸€æ¡ç›´çº¿å¯ç”±ä¸¤ä¸ªç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A=(x_1,y_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">B=(x_2,y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ç¡®å®š(ç¬›å¡å°”åæ ‡)</p><img src="99.png" style="zoom: 120%;" /><p>å¦ä¸€æ–¹é¢ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mi>k</mi><mi>x</mi><mo>+</mo><mi>q</mi></mrow><annotation encoding="application/x-tex">y = kx + q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span>ï¼Œä¹Ÿå¯ä»¥å†™æˆå…³äºï¼ˆk,qï¼‰çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆéœå¤«ç©ºé—´ï¼‰ï¼š</p><img src="100.png" style="zoom: 100%;" /><p>å¯¹åº”çš„å˜æ¢å¯ä»¥é€šè¿‡å›¾å½¢ç›´è§‚è¡¨ç¤ºï¼š</p><img src="101.png" style="zoom: 100%;" /><p>å˜æ¢åçš„ç©ºé—´æˆä¸º<strong>éœå¤«ç©ºé—´</strong>ã€‚å³ï¼š<strong>ç¬›å¡å°”åæ ‡ç³»ä¸­ä¸€æ¡ç›´çº¿ï¼Œå¯¹åº”éœå¤«ç©ºé—´çš„ä¸€ä¸ªç‚¹</strong>ã€‚</p><p>åè¿‡æ¥åŒæ ·æˆç«‹ï¼ˆ<strong>éœå¤«ç©ºé—´çš„ä¸€æ¡ç›´çº¿ï¼Œå¯¹åº”ç¬›å¡å°”åæ ‡ç³»çš„ä¸€ä¸ªç‚¹</strong>ï¼‰ï¼š</p><img src="102.png" style="zoom: 100%;" /><p>å†æ¥çœ‹çœ‹Aã€Bä¸¤ä¸ªç‚¹ï¼Œå¯¹åº”éœå¤«ç©ºé—´çš„æƒ…å½¢ï¼š</p><img src="103.png" style="zoom: 100%;" /><p>ä¸€æ­¥æ­¥æ¥ï¼Œå†çœ‹ä¸€ä¸‹ä¸‰ä¸ªç‚¹å…±çº¿çš„æƒ…å†µï¼š</p><img src="104.png" style="zoom: 100%;" /><hr><p><strong>æ ¹æœ¬åŸç†ï¼š</strong></p><p><strong>å¯ä»¥çœ‹å‡ºå¦‚æœç¬›å¡å°”åæ ‡ç³»çš„ç‚¹å…±çº¿ï¼Œè¿™äº›ç‚¹åœ¨éœå¤«ç©ºé—´å¯¹åº”çš„ç›´çº¿äº¤äºä¸€ç‚¹ï¼šè¿™ä¹Ÿæ˜¯å¿…ç„¶ï¼Œå…±çº¿åªæœ‰ä¸€ç§å–å€¼å¯èƒ½</strong>ã€‚é‚£ä¹ˆï¼Œ<strong>å¯¹äºç¬›å¡å°”ç©ºé—´ä¸­çš„ä¸€æ¡ç›´çº¿ï¼Œç›´çº¿ä¸Šæ‰€æœ‰ç‚¹åœ¨éœå¤«ç©ºé—´å†…å¯¹åº”çš„ç›´çº¿ä¸€å®šäº¤äºä¸€ç‚¹</strong>ã€‚éœå¤«å˜æ¢çš„æŠ•ç¥¨ç­–ç•¥å°±ç±»ä¼¼äºé˜ˆå€¼å¤„ç†ï¼Œåœ¨æŸç‚¹ç›¸äº¤çš„ç›´çº¿è¶…è¿‡ä¸€å®šæ•°é‡ï¼Œåˆ™è®¤ä¸ºç¬›å¡å°”ç©ºé—´ä¸­å­˜åœ¨è¿™æ ·çš„ä¸€æ¡ç›´çº¿ã€‚</p><hr><p>å¦‚æœä¸æ­¢ä¸€æ¡ç›´çº¿å‘¢ï¼Ÿå†çœ‹çœ‹å¤šä¸ªç‚¹çš„æƒ…å†µï¼ˆæœ‰ä¸¤æ¡ç›´çº¿ï¼‰ï¼š</p><img src="105.png" style="zoom: 100%;" /><p>å…¶å®ï¼ˆ3ï¼Œ2ï¼‰ä¸ï¼ˆ4ï¼Œ1ï¼‰ä¹Ÿå¯ä»¥ç»„æˆç›´çº¿ï¼Œåªä¸è¿‡å®ƒæœ‰ä¸¤ä¸ªç‚¹ç¡®å®šï¼Œè€Œå›¾ä¸­Aã€Bä¸¤ç‚¹æ˜¯ç”±ä¸‰æ¡ç›´çº¿æ±‡æˆï¼Œè¿™ä¹Ÿæ˜¯<strong>éœå¤«å˜æ¢çš„åå¤„ç†çš„åŸºæœ¬æ–¹å¼</strong>ï¼š<strong>é€‰æ‹©ç”±å°½å¯èƒ½å¤šç›´çº¿æ±‡æˆçš„ç‚¹</strong>ã€‚</p><p>çœ‹çœ‹ï¼Œéœå¤«ç©ºé—´ï¼šé€‰æ‹©ç”±ä¸‰æ¡äº¤æ±‡ç›´çº¿ç¡®å®šçš„ç‚¹ï¼ˆä¸­é—´å›¾ï¼‰ï¼Œå¯¹åº”çš„ç¬›å¡å°”åæ ‡ç³»çš„ç›´çº¿ï¼ˆå³å›¾ï¼‰ã€‚</p><img src="106.png" style="zoom: 100%;" /><p>åˆ°è¿™é‡Œé—®é¢˜ä¼¼ä¹è§£å†³äº†ï¼Œå·²ç»å®Œæˆäº†éœå¤«å˜æ¢çš„æ±‚è§£ï¼Œä½†æ˜¯å¦‚æœåƒä¸‹å›¾è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p><img src="107.png" style="zoom: 80%;" /><p>k=âˆæ˜¯ä¸æ–¹ä¾¿è¡¨ç¤ºçš„ï¼Œè€Œä¸”qæ€ä¹ˆå–å€¼å‘¢ï¼Œè¿™æ ·ä¸æ˜¯åŠæ³•ã€‚å› æ­¤è€ƒè™‘<strong>å°†ç¬›å¡å°”åæ ‡ç³»æ¢ä¸ºï¼šæåæ ‡è¡¨ç¤º</strong>ã€‚</p><img src="108.png" style="zoom: 80%;" /><p><strong>ä¸Šå›¾å³è¾¹å…¬å¼ç«Ÿç„¶æ˜¯é”™çš„ï¼Œæåæ ‡å…¬å¼å¦‚ä¸‹ï¼Œè‡ªå·±çœ‹çš„æ—¶å€™è¦ä¿®æ­£ä¸‹ï¼š</strong></p><p><img src="https://www.zhihu.com/equation?tex=xcos%5Ctheta+%2B+y+sin%5Ctheta%3D+%5Crho" alt="[å…¬å¼]"></p><p>åœ¨æåæ ‡ç³»ä¸‹ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼š<strong>æåæ ‡çš„ç‚¹â†’éœå¤«ç©ºé—´çš„ç›´çº¿ï¼Œåªä¸è¿‡éœå¤«ç©ºé—´ä¸å†æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>k</mi><mo separator="true">,</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(k,q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span>çš„å‚æ•°ï¼Œè€Œæ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>Ï</mi><mo separator="true">,</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\rho,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">Ï</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span>çš„å‚æ•°</strong>ï¼Œç»™å‡ºå¯¹æ¯”å›¾ï¼š</p><img src="109.png" style="zoom: 80%;" /><p><strong>å¦‚æœçº¿åœ¨åŸç‚¹ä¸‹æ–¹é€šè¿‡ï¼Œåˆ™å®ƒå°†å…·æœ‰æ­£çš„Ïä¸”è§’åº¦å°äº180ã€‚å¦‚æœçº¿åœ¨åŸç‚¹ä¸Šæ–¹ï¼Œåˆ™å°†è§’åº¦å–ä¸ºå°äº180ï¼Œè€Œä¸æ˜¯å¤§äº180çš„è§’åº¦ã€‚Ïå–è´Ÿå€¼ã€‚ä»»ä½•å‚ç›´çº¿å°†å…·æœ‰0åº¦ï¼Œæ°´å¹³çº¿å°†å…·æœ‰90åº¦</strong>ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹éœå¤«å˜æ¢å¦‚ä½•å¤„ç†çº¿æ¡ã€‚ä»»ä½•ä¸€æ¡çº¿éƒ½å¯ä»¥ç”¨(Ïï¼ŒÎ¸)è¿™ä¸¤ä¸ªæœ¯è¯­è¡¨ç¤ºã€‚å› æ­¤ï¼Œé¦–å…ˆåˆ›å»º2Dæ•°ç»„æˆ–ç´¯åŠ å™¨ï¼ˆä»¥ä¿å­˜ä¸¤ä¸ªå‚æ•°çš„å€¼ï¼‰ï¼Œå¹¶å°†å…¶åˆå§‹è®¾ç½®ä¸º0ã€‚è®©è¡Œè¡¨ç¤ºÏï¼Œåˆ—è¡¨ç¤ºÎ¸ã€‚é˜µåˆ—çš„å¤§å°å–å†³äºæ‰€éœ€çš„ç²¾åº¦ã€‚å‡è®¾æ‚¨å¸Œæœ›è§’åº¦çš„ç²¾åº¦ä¸º1åº¦ï¼Œåˆ™éœ€è¦180åˆ—ã€‚å¯¹äºÏï¼Œæœ€å¤§è·ç¦»å¯èƒ½æ˜¯å›¾åƒçš„å¯¹è§’çº¿é•¿åº¦ã€‚å› æ­¤ï¼Œä»¥ä¸€ä¸ªåƒç´ ç²¾åº¦ä¸ºå‡†ï¼Œè¡Œæ•°å¯ä»¥æ˜¯å›¾åƒçš„å¯¹è§’çº¿é•¿åº¦ã€‚</p><p>è€ƒè™‘ä¸€ä¸ª<code>100x100</code>çš„å›¾åƒï¼Œä¸­é—´æœ‰ä¸€æ¡æ°´å¹³çº¿ã€‚å–ç›´çº¿çš„ç¬¬ä¸€ç‚¹ã€‚æ‚¨çŸ¥é“å®ƒçš„<code>(xï¼Œy)</code>å€¼ã€‚ç°åœ¨åœ¨çº¿æ€§æ–¹ç¨‹å¼ä¸­ï¼Œå°†å€¼Î¸= 0,1,2ï¼Œâ€¦ 180æ”¾è¿›å»ï¼Œç„¶åæ£€æŸ¥å¾—åˆ°Ïã€‚å¯¹äºæ¯å¯¹(Ïï¼ŒÎ¸)ï¼Œåœ¨ç´¯åŠ å™¨ä¸­å¯¹åº”çš„(Ïï¼ŒÎ¸)å•å…ƒæ ¼å°†å€¼å¢åŠ 1ã€‚æ‰€ä»¥ç°åœ¨åœ¨ç´¯åŠ å™¨ä¸­ï¼Œå•å…ƒæ ¼(50,90)= 1ä»¥åŠå…¶ä»–ä¸€äº›å•å…ƒæ ¼ã€‚</p><p>ç°åœ¨ï¼Œå¯¹è¡Œçš„ç¬¬äºŒä¸ªç‚¹ã€‚æ‰§è¡Œä¸ä¸Šè¿°ç›¸åŒçš„æ“ä½œã€‚é€’å¢(Ïï¼ŒÎ¸)å¯¹åº”çš„å•å…ƒæ ¼ä¸­çš„å€¼ã€‚è¿™æ¬¡ï¼Œå•å…ƒæ ¼<code>(50,90)=2</code>ã€‚å®é™…ä¸Šï¼Œæ‚¨æ­£åœ¨å¯¹(Ïï¼ŒÎ¸)å€¼è¿›è¡ŒæŠ•ç¥¨ã€‚æ‚¨å¯¹çº¿è·¯ä¸Šçš„æ¯ä¸ªç‚¹éƒ½ç»§ç»­æ‰§è¡Œæ­¤è¿‡ç¨‹ã€‚åœ¨æ¯ä¸ªç‚¹ä¸Šï¼Œå•å…ƒæ ¼(50,90)éƒ½ä¼šå¢åŠ æˆ–æŠ•ç¥¨ï¼Œè€Œå…¶ä»–å•å…ƒæ ¼å¯èƒ½ä¼šæˆ–å¯èƒ½ä¸ä¼šæŠ•ç¥¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œæœ€åï¼Œå•å…ƒæ ¼(50,90)çš„æŠ•ç¥¨æ•°å°†æœ€é«˜ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨åœ¨ç´¯åŠ å™¨ä¸­æœç´¢æœ€å¤§ç¥¨æ•°ï¼Œåˆ™å°†è·å¾—(50,90)å€¼ï¼Œè¯¥å€¼è¡¨ç¤ºè¯¥å›¾åƒä¸­çš„ä¸€æ¡çº¿ä¸åŸç‚¹çš„è·ç¦»ä¸º50ï¼Œè§’åº¦ä¸º90åº¦ã€‚åœ¨ä¸‹é¢çš„åŠ¨ç”»ä¸­å¾ˆå¥½åœ°æ˜¾ç¤ºäº†è¯¥å›¾ç‰‡(å›¾ç‰‡æä¾›ï¼šAmos Storkey)</p><p>é™¤æ­¤ä»¥å¤–ï¼Œä¹ŸåŒæ ·å¯ä»¥ä½¿ç”¨é˜ˆå€¼å¯¹ç¥¨æ•°è¿›è¡Œå¤„ç†ã€‚</p><img src="111.gif" style="zoom: 140%;" /><p><strong>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éå†Î¸çš„å€¼ï¼Œä»0-180Â°ï¼Œå¹¶ä¸”åŒæ—¶ä»£å…¥ï¼ˆx,yï¼‰çš„å€¼ï¼Œæ±‚å¾—å¯¹åº”çš„Ïã€‚</strong></p><p><strong>æ‰¾åˆ°0-180Â°ä¸­ï¼Œå“ªä¸ªåº¦æ•°ä¸‹çš„Ïå€¼ç›¸åŒçš„æ•°é‡æœ€å¤šã€‚è¿™åå‘è¯´æ˜äº†ï¼Œåœ¨ä¸€ä¸ªÏå’ŒÎ¸ç»„æˆçš„å‡½æ•°ä¸­ï¼Œç¬¦åˆçš„ç‚¹æ•°æœ€å¤šã€‚</strong></p><h3 id="å‡½æ•°ä¸ç¤ºä¾‹">å‡½æ•°ä¸ç¤ºä¾‹</h3><p>å‡½æ•°cv2.HoughLines() çš„è¯­æ³•æ ¼å¼ä¸ºï¼š<br><code>lines=cv2.HoughLines (image,rho,theta,threshold) </code><br>å¼ä¸­ï¼š</p><ul><li><p>imageæ˜¯è¾“å…¥å›¾åƒ ï¼Œ å³æºå›¾åƒï¼Œ <strong>å¿…é¡»æ˜¯8ä½çš„å•é€šé“äºŒå€¼å›¾åƒ</strong>ã€‚ å¦‚æœæ˜¯å…¶ä»–ç±»å‹çš„å›¾åƒï¼Œ åœ¨è¿›è¡Œéœå¤«å˜æ¢ä¹‹å‰ï¼Œ éœ€è¦å°†å…¶ä¿®æ”¹ä¸ºæŒ‡å®šæ ¼å¼ã€‚</p><ul><li><strong>è¾“å…¥å›¾åƒåº”è¯¥æ˜¯äºŒè¿›åˆ¶å›¾åƒï¼Œå› æ­¤åœ¨åº”ç”¨éœå¤«å˜æ¢ä¹‹å‰ï¼Œå»ºè®®åº”ç”¨é˜ˆå€¼äºŒå€¼åŒ–æˆ–ä½¿ç”¨Cannyè¾¹ç¼˜æ£€æµ‹</strong>ã€‚</li></ul></li><li><p>rhoä¸ºä»¥åƒç´ ä¸ºå•ä½çš„è·ç¦»Ïçš„ç²¾åº¦ï¼Œä¸€èˆ¬ä¸º1ã€‚</p></li><li><p>thetaä¸ºè§’åº¦Î¸çš„ç²¾åº¦ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ ä½¿ç”¨çš„ç²¾åº¦æ˜¯<code>np.pi/180</code> ï¼Œ è¡¨ç¤ºè¦æœç´¢æ‰€æœ‰å¯èƒ½çš„è§’åº¦ã€‚</p></li><li><p>thresholdæ˜¯é˜ˆå€¼ã€‚ <strong>è¯¥å€¼è¶Šå°ï¼Œ åˆ¤å®šå‡ºçš„ç›´çº¿å°±è¶Šå¤š</strong>ã€‚ é€šè¿‡ä¸Šä¸€èŠ‚çš„åˆ†æå¯çŸ¥ï¼Œè¯†åˆ«ç›´çº¿æ—¶ï¼Œè¦åˆ¤å®šæœ‰å¤šå°‘ä¸ªç‚¹ä½åƒè¯¥ç›´çº¿ä¸Šã€‚åœ¨åˆ¤å®šç›´çº¿æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå¯¹ç›´çº¿æ‰€ç©¿è¿‡çš„ç‚¹çš„æ•°æ˜Ÿè¿›è¡Œè¯„ä¼°ï¼Œå¦‚æœç›´çº¿æ‰€ç©¿è¿‡çš„ç‚¹çš„æ•°é‡å°äºé˜ˆå€¼ï¼Œåˆ™è®¤ä¸ºè¿™äº›ç‚¹æ°å¥½ï¼ˆå¶ç„¶ï¼‰åœ¨ç®—æ³•ä¸Šæ„æˆç›´çº¿ï¼Œ ä½†æ˜¯åœ¨æºå›¾åƒä¸­è¯¥ç›´çº¿å¹¶ä¸å­˜åœ¨ï¼›å¦‚æœå¤§äºé˜ˆå€¼ï¼Œåˆ™è®¤ä¸ºç›´çº¿å­˜åœ¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœé˜ˆå€¼è¾ƒå°ï¼Œå°±ä¼šå¾—åˆ°è¾ƒå¤šçš„ç›´çº¿ï¼›é˜ˆå€¼è¾ƒå¤§ï¼Œå°±ä¼šå¾—åˆ°è¾ƒå°‘çš„ç›´çº¿ã€‚</p></li><li><p>è¿”å›å€¼linesä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€å¯¹æµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°çš„ç›´çº¿çš„å‚æ•°ï¼Œå³(Ïï¼ŒÎ¸)ï¼Œ<code>numpy.ndarray</code>ç±»å‹ã€‚</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\hflines.png&#x27;</span>)</span><br><span class="line">    img2 = img.copy()</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    edges = cv.Canny(gray, <span class="number">50</span>, <span class="number">150</span>, apertureSize=<span class="number">3</span>)</span><br><span class="line">    lines = cv.HoughLines(edges, <span class="number">1</span>, np.pi / <span class="number">180</span>, <span class="number">200</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        rho, theta = line[<span class="number">0</span>]</span><br><span class="line">        a = np.cos(theta)</span><br><span class="line">        b = np.sin(theta)</span><br><span class="line">        x0 = a * rho</span><br><span class="line">        y0 = b * rho</span><br><span class="line">        x1 = <span class="built_in">int</span>(x0 + <span class="number">1000</span> * (-b))</span><br><span class="line">        y1 = <span class="built_in">int</span>(y0 + <span class="number">1000</span> * (a))</span><br><span class="line">        x2 = <span class="built_in">int</span>(x0 - <span class="number">1000</span> * (-b))</span><br><span class="line">        y2 = <span class="built_in">int</span>(y0 - <span class="number">1000</span> * (a))</span><br><span class="line">        cv.line(img, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">    res = np.vstack((img2, img))</span><br><span class="line">    cv.imshow(<span class="string">&quot;res&quot;</span>,res)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="112.png" style="zoom: 60%;" /><p>è¾ƒç²—çš„ç›´çº¿æ˜¯å› ä¸ºæœ‰å¤šæ¡ç›´çº¿é è¿‘åœ¨ä¸€èµ· ï¼Œ å³æ£€æµ‹å‡ºäº†é‡å¤çš„ç»“æœã€‚ åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œ ä½¿ç”¨éœå¤«å˜æ¢å¯èƒ½å°†å›¾åƒä¸­æœ‰é™ä¸ªç‚¹ç¢°å·§å¯¹é½çš„éç›´çº¿å…³ç³»æ£€æµ‹ä¸ºç›´çº¿ï¼Œ è€Œå¯¼è‡´è¯¯æ£€æµ‹ï¼Œ å°¤å…¶æ˜¯ä¸€äº›å¤æ‚èƒŒæ™¯çš„å›¾åƒï¼Œ è¯¯æ£€æµ‹ä¼šå¾ˆæ˜æ˜¾ã€‚ æ­¤å›¾ä¸­è¯¥é—´é¢˜è™½ç„¶å¹¶ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ï¼Œ ä½†æ˜¯å¦‚æœå°†é˜ˆå€¼ thresholdçš„å€¼è®¾ç½®å¾—ç¨å°äº›ï¼Œ ä»ç„¶ä¼šå‡ºç°è¾ƒå¤šé‡å¤çš„æ£€æµ‹ç»“æœã€‚</p><h3 id="æ¦‚ç‡éœå¤«å˜æ¢">æ¦‚ç‡éœå¤«å˜æ¢</h3><p>æ¦‚ç‡éœå¤«å˜æ¢å¯¹åŸºæœ¬éœå¤«å˜æ¢ç®—æ³•è¿›è¡Œäº†ä¸€äº›ä¿®æ­£ï¼Œæ˜¯éœå¤«å˜æ¢ç®—æ³•çš„ä¼˜åŒ–ã€‚å®ƒæ²¡æœ‰è€ƒè™‘æ‰€æœ‰çš„ç‚¹ã€‚ç›¸åï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªè¶³ä»¥è¿›è¡Œçº¿æ£€æµ‹çš„éšæœºç‚¹å­é›†å³å¯ã€‚</p><p>ä¸ºäº†æ›´å¥½åœ°åˆ¤æ–­ç›´çº¿ï¼ˆçº¿æ®µï¼‰ï¼Œæ¦‚ç‡éœå¤«å˜æ¢ç®—æ³•è¿˜å¯¹é€‰å–ç›´çº¿çš„æ–¹æ³•ä½œäº†ä¸¤ç‚¹æ”¹è¿›ï¼š</p><ul><li><p><strong>æ‰€æ¥å—ç›´çº¿çš„æœ€å°é•¿åº¦</strong>ã€‚å¦‚æœæœ‰è¶…è¿‡é˜ˆå€¼ä¸ªæ•°çš„åƒç´ ç‚¹æ„æˆäº†ä¸€æ¡ç›´çº¿ï¼Œä½†æ˜¯è¿™æ¡ç›´çº¿å¾ˆçŸ­ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæ¥å—è¯¥ç›´çº¿ä½œä¸ºåˆ¤æ–­ç»“æœï¼Œè€Œè®¤ä¸ºè¿™æ¡ç›´çº¿ä»…ä»…æ˜¯å›¾åƒä¸­çš„è‹¥å¹²ä¸ªåƒç´ ç‚¹æ°å¥½éšæœºæ„æˆäº†ä¸€ç§ç®—æ³•ä¸Šçš„ç›´çº¿å…³ç³»è€Œå·²ï¼Œå®é™…ä¸ŠåŸå›¾ä¸­å¹¶ä¸å­˜åœ¨è¿™æ¡ç›´çº¿ã€‚</p></li><li><p><strong>æ¥å—ç›´çº¿æ—¶å…è®¸çš„æœ€å¤§åƒç´ ç‚¹é—´è·</strong>ã€‚å¦‚æœæœ‰è¶…è¿‡é˜ˆå€¼ä¸ªæ•°çš„åƒç´ ç‚¹æ„æˆäº†ä¸€æ¡ç›´çº¿ï¼Œä½†æ˜¯è¿™ç»„åƒç´ ç‚¹ä¹‹é—´çš„è·ç¦»éƒ½å¾ˆè¿œï¼Œå°±ä¸ä¼šæ¥å—è¯¥ç›´çº¿ä½œä¸ºåˆ¤æ–­ç»“æœï¼Œè€Œè®¤ä¸ºè¿™æ¡ç›´çº¿ä»…ä»…æ˜¯å›¾åƒä¸­çš„è‹¥å¹²ä¸ªåƒç´ ç‚¹æ°å¥½éšæœºæ„æˆäº†ä¸€ç§ç®—æ³•ä¸Šçš„ç›´çº¿å…³ç³»è€Œå·²ï¼Œå®é™…ä¸ŠåŸå§‹å›¾åƒä¸­å¹¶ä¸å­˜åœ¨è¿™æ¡ç›´çº¿ã€‚</p></li></ul><p>æ¦‚ç‡éœå¤«å˜æ¢æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„éœå¤«å˜æ¢çš„ä¼˜åŒ–ã€‚å®ƒæ²¡æœ‰è€ƒè™‘æ‰€æœ‰è¦ç‚¹ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œ<strong>å®ƒä»…é‡‡ç”¨éšæœºçš„ç‚¹å­é›†ï¼Œè¶³ä»¥è¿›è¡Œçº¿æ£€æµ‹ã€‚åªæ˜¯æˆ‘ä»¬å¿…é¡»é™ä½é˜ˆå€¼</strong>ã€‚</p><h4 id="å‡½æ•°ä¸ç¤ºä¾‹-2">å‡½æ•°ä¸ç¤ºä¾‹</h4><p><code>lines = cv2.HoughLinesP(image, rho, theta, threshold, minLineLength,maxLineGap)</code></p><ul><li><p>imageæ˜¯è¾“å…¥å›¾åƒï¼Œå³æºå›¾åƒï¼Œå¿…é¡»ä¸º8ä½çš„å•é€šé“äºŒå€¼å›¾åƒã€‚å¯¹åƒå…¶ä»–ç±»å‹çš„å›¾åƒï¼Œåœ¨è¿›è¡Œéœå¤«å˜æ¢ä¹‹å‰ï¼Œéœ€è¦å°†å…¶ä¿®æ”¹ä¸ºè¿™ä¸ªæŒ‡å®šçš„æ ¼å¼ã€‚</p></li><li><p>rhoä¸ºä»¥åƒç´ ä¸ºå•ä½çš„è·ç¦»Ïçš„ç²¾åº¦ï¼Œä¸€èˆ¬ä¸º1ã€‚</p></li><li><p>thetaä¸ºè§’åº¦Î¸çš„ç²¾åº¦ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ ä½¿ç”¨çš„ç²¾åº¦æ˜¯<code>np.pi/180</code> ï¼Œ è¡¨ç¤ºè¦æœç´¢æ‰€æœ‰å¯èƒ½çš„è§’åº¦ã€‚</p></li><li><p>thresholdæ˜¯é˜ˆå€¼ã€‚ <strong>è¯¥å€¼è¶Šå°ï¼Œ åˆ¤å®šå‡ºçš„ç›´çº¿å°±è¶Šå¤š</strong>ã€‚</p></li><li><p>minLineLengthç”¨æ¥æ§åˆ¶æ¥å—ç›´çº¿çš„æœ€å°é•¿åº¦ï¼Œé»˜è®¤ä¸º0ã€‚</p></li><li><p>maxLineGapç”¨æ¥æ§åˆ¶æ¥å—å…±çº¿çº¿æ®µä¹‹é—´çš„æœ€å°é—´éš”ï¼Œå³ä¸€æ¡çº¿ä¸­ä¸¤ç‚¹çš„æœ€å¤§é—´éš”ï¼Œé»˜è®¤ä¸º0ã€‚</p></li><li><p>è¿”å›å€¼linesä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€å¯¹æµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°çš„ç›´çº¿çš„å‚æ•°ï¼Œå³(Ïï¼ŒÎ¸)ï¼Œ<code>numpy.ndarray</code>ç±»å‹ã€‚</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\hflines.png&#x27;</span>)</span><br><span class="line">    img2 = img.copy()</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    edges = cv.Canny(gray, <span class="number">50</span>, <span class="number">150</span>, apertureSize=<span class="number">3</span>)</span><br><span class="line">    lines = cv.HoughLinesP(edges, <span class="number">1</span>, np.pi / <span class="number">180</span>, <span class="number">100</span>, minLineLength=<span class="number">100</span>, maxLineGap=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        x1, y1, x2, y2 = line[<span class="number">0</span>]</span><br><span class="line">        cv.line(img, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">    res = np.vstack((img2, img))</span><br><span class="line">    cv.imshow(<span class="string">&quot;res&quot;</span>, res)</span><br><span class="line"></span><br><span class="line">    cv.waitKey()</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="113.png" style="zoom: 60%;" /><p>ç»†å¿ƒè§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œè¿™é‡Œç”»å‡ºæ¥çš„æ˜¯çº¿æ®µã€‚</p><h2 id="éœå¤«åœ†å˜æ¢">éœå¤«åœ†å˜æ¢</h2><p>åœ†åœ¨æ•°å­¦ä¸Šè¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mrow><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>âˆ’</mo><msub><mi>y</mi><mrow><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(xâˆ’x_{center})^2+(yâˆ’y_{center})^2=r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{center},y_{center})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ce</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>æ˜¯åœ†çš„ä¸­å¿ƒï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span>æ˜¯åœ†çš„åŠå¾„ã€‚ä»ç­‰å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰3ä¸ªå‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦3Dç´¯åŠ å™¨è¿›è¡Œéœå¤«å˜æ¢ï¼Œè¿™å°†éå¸¸ä½æ•ˆã€‚å› æ­¤ï¼ŒOpenCVä½¿ç”¨æ›´åŠ æŠ€å·§æ€§çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨è¾¹ç¼˜çš„æ¢¯åº¦ä¿¡æ¯çš„<strong>Houghæ¢¯åº¦æ–¹æ³•</strong>ã€‚</p><p>è¿™ç§æ–¹æ³•é‡‡ç”¨çš„ç­–ç•¥æ˜¯ä¸¤è½®ç­›é€‰ã€‚ <strong>ç¬¬1è½®ç­›é€‰æ‰¾å‡ºå¯èƒ½å­˜åœ¨åœ†çš„ä½ç½®ï¼ˆåœ†å¿ƒï¼‰ï¼›ç¬¬2è½®å†æ ¹æ®ç¬¬1è½®çš„ç»“æœç­›é€‰å‡ºåŠå¾„å¤§å°</strong>ã€‚</p><p>ä¸ç”¨æ¥å†³å®šæ˜¯å¦æ¥å—ç›´çº¿çš„ä¸¤ä¸ªå‚æ•°â€æ¥å—ç›´çº¿çš„æœ€å°é•¿åº¦ (<code>minLineLength</code>) â€å’Œâ€œæ¥å—ç›´çº¿æ—¶å…è®¸çš„æœ€å¤§åƒç´ ç‚¹é—´è· (<code>MaxLineGap</code>) â€ç±»ä¼¼ï¼Œ éœå¤«åœ†å˜æ¢ä¹Ÿæœ‰å‡ ä¸ªç”¨äºå†³å®šæ˜¯å¦æ¥å—åœ†çš„å‚æ•°ï¼šåœ†å¿ƒé—´çš„æœ€å°è·ç¦»ã€ åœ†çš„æœ€å°åŠå¾„ã€ åœ†çš„æœ€å¤§åŠå¾„ã€‚</p><h3 id="å‡½æ•°-13">å‡½æ•°</h3><p>åœ¨OpenCVä¸­ ï¼Œ å®ç°éœå¤«åœ†å˜æ¢çš„æ˜¯å‡½æ•°<code>cv2.HoughCircles ()</code>ï¼Œ <strong>è¯¥å‡½æ•°å°†Cannyè¾¹ç¼˜æ£€æµ‹å’Œéœå¤«å˜æ¢ç»“åˆ</strong>ã€‚ å…¶è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>circles=cv2.HoughCircles (image, method, dp, minDist, param1, param2, minRadius, maxRadius) </code></p><ul><li><p><code>image</code>ï¼šè¾“å…¥å›¾åƒï¼Œ å³æºå›¾åƒï¼Œ ç±»å‹ä¸º<strong>8ä½çš„å•é€šé“ç°åº¦å›¾åƒ</strong>ã€‚</p></li><li><p><code>method</code>: æ£€æµ‹æ–¹æ³•ã€‚ æˆªæ­¢åˆ°OpenCV 4.0.0-preç‰ˆæœ¬ ï¼Œ HOUGH_GRADIENTæ˜¯å”¯ä¸€å¯ç”¨çš„å‚æ•°å€¼ã€‚ è¯¥å‚æ•°ä»£è¡¨çš„æ˜¯éœå¤«åœ†æ£€æµ‹ä¸­ä¸¤è½®æ£€æµ‹æ‰€ä½¿ç”¨çš„æ–¹æ³•ã€‚</p></li><li><p><code>dp</code> ï¼š<strong>ç´¯è®¡å™¨åˆ†è¾¨ç‡ï¼Œ å®ƒæ˜¯ä¸€ä¸ªåˆ†å‰²æ¯”ç‡ï¼Œ ç”¨æ¥æŒ‡å®šå›¾åƒåˆ†è¾¨ç‡ä¸åœ†å¿ƒç´¯åŠ å™¨åˆ†è¾¨ç‡çš„æ¯”ä¾‹</strong>ã€‚ ä¾‹å¦‚ï¼Œ å¦‚æœ<code>dp=1</code>, åˆ™è¾“å…¥å›¾åƒå’Œç´¯åŠ å™¨å…·æœ‰ç›¸åŒçš„åˆ†è¾¨ç‡ã€‚</p></li><li><p><code>minDist</code>ï¼š<strong>åœ†å¿ƒé—´çš„æœ€å°é—´è·</strong>ã€‚ è¯¥å€¼è¢«ä½œä¸ºé˜ˆå€¼ä½¿ç”¨ï¼Œ å¦‚æœå­˜åœ¨åœ†å¿ƒé—´è·ç¦»å°äºè¯¥å€¼çš„å¤šä¸ªåœ†ï¼Œåˆ™ä»…æœ‰ä¸€ä¸ªä¼šè¢«æ£€æµ‹å‡ºæ¥ã€‚ å› æ­¤ï¼Œ å¦‚æœè¯¥å€¼å¤ªå°ï¼Œ åˆ™ä¼šæœ‰å¤šä¸ªä¸´è¿‘çš„åœ†è¢«æ£€æµ‹å‡ºæ¥ï¼›å¦‚æœè¯¥å€¼å¤ªå¤§ï¼Œ åˆ™å¯èƒ½ä¼šåœ¨æ£€æµ‹æ—¶æ¼æ‰ä¸€äº›åœ†ã€‚</p></li><li><p><code>param1</code>: è¯¥å‚æ•°æ˜¯ç¼ºçœçš„ ï¼Œ åœ¨ç¼ºçœæ—¶é»˜è®¤å€¼ä¸º100ã€‚ å®ƒå¯¹åº”çš„æ˜¯Cannyè¾¹ç¼˜æ£€æµ‹å™¨çš„é«˜é˜ˆå€¼ï¼ˆ<strong>ä½é˜ˆå€¼æ˜¯é«˜é˜ˆå€¼çš„äºŒåˆ†ä¹‹ä¸€</strong>ï¼‰ã€‚</p></li><li><p><code>param2</code>: <strong>åœ†å¿ƒä½ç½®å¿…é¡»æ”¶åˆ°çš„æŠ•ç¥¨æ•°</strong>ã€‚ åªæœ‰åœ¨ç¬¬1è½®ç­›é€‰è¿‡ç¨‹ä¸­ï¼ŒæŠ•ç¥¨æ•°è¶…è¿‡è¯¥å€¼çš„åœ†ï¼Œæ‰æœ‰èµ„æ ¼è¿›å…¥ç¬¬2è½®çš„ç­›é€‰ã€‚ å› æ­¤ï¼Œè¯¥å€¼è¶Šå¤§ï¼Œæ£€æµ‹åˆ°çš„åœ†è¶Šå°‘ï¼›è¯¥å€¼è¶Šå°ï¼Œæ£€æµ‹åˆ°çš„åœ†è¶Šå¤šã€‚è¿™ä¸ªå‚æ•°æ˜¯ç¼ºçœçš„ï¼Œåœ¨ç¼ºçœæ—¶å…·æœ‰é»˜è®¤å€¼100ã€‚</p></li><li><p><code>minRadius</code>ï¼š<strong>åœ†åŠå¾„çš„æœ€å°å€¼ï¼Œå°äºè¯¥å€¼çš„åœ†ä¸ä¼šè¢«æ£€æµ‹å‡ºæ¥</strong>ã€‚ è¯¥å‚æ•°æ˜¯ç¼ºçœçš„ï¼Œåœ¨ç¼ºçœæ—¶å…·æœ‰é»˜è®¤å€¼0ï¼Œæ­¤æ—¶è¯¥å‚æ•°ä¸èµ·ä½œç”¨ã€‚</p></li><li><p><code>maxRadius</code>ï¼š<strong>åœ†åŠå¾„çš„æœ€å¤§å€¼ï¼Œå¤§äºè¯¥å€¼çš„åœ†ä¸ä¼šè¢«æ£€æµ‹å‡ºæ¥</strong>ã€‚è¯¥å‚æ•°æ˜¯ç¼ºçœçš„ï¼Œåœ¨ç¼ºçœæ—¶å…·æœ‰é»˜è®¤å€¼0ï¼Œæ­¤æ—¶è¯¥å‚æ•°ä¸èµ·ä½œç”¨ã€‚</p></li><li><p><code>circles</code>: è¿”å›å€¼ï¼Œç”±åœ†å¿ƒåæ ‡å’ŒåŠå¾„æ„æˆçš„<code>numpy.ndarray</code>ã€‚</p></li></ul><p>â€‹         éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨è°ƒç”¨å‡½æ•° <code>cv2.HoughLinesCircles()</code>ä¹‹å‰ï¼Œè¦å¯¹æºå›¾åƒè¿›è¡Œå¹³æ»‘æ“ä½œï¼Œä»¥å‡å°‘å›¾åƒä¸­çš„å™ªå£°ï¼Œé¿å…å‘ç”Ÿè¯¯åˆ¤ã€‚</p><h3 id="æ ·ä¾‹-3">æ ·ä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\6.png&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">    img = cv.medianBlur(img, <span class="number">5</span>)<span class="comment">#ä¸­å€¼æ»¤æ³¢</span></span><br><span class="line">    cimg = cv.cvtColor(img, cv.COLOR_GRAY2BGR)</span><br><span class="line">    circles = cv.HoughCircles(img, cv.HOUGH_GRADIENT, <span class="number">1</span>, <span class="number">20</span>,</span><br><span class="line">                              param1=<span class="number">50</span>, param2=<span class="number">50</span>, minRadius=<span class="number">0</span>, maxRadius=<span class="number">0</span>)</span><br><span class="line">    circles = np.uint16(np.around(circles))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> circles[<span class="number">0</span>, :]:</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶å¤–åœ†</span></span><br><span class="line">        cv.circle(cimg, (i[<span class="number">0</span>], i[<span class="number">1</span>]), i[<span class="number">2</span>], (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶åœ†å¿ƒ</span></span><br><span class="line">        cv.circle(cimg, (i[<span class="number">0</span>], i[<span class="number">1</span>]), <span class="number">2</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">3</span>)</span><br><span class="line">    img = cv.cvtColor(img, cv.COLOR_GRAY2BGR)</span><br><span class="line">    res = np.hstack((img, cimg))</span><br><span class="line">    cv.imshow(<span class="string">&#x27;detected circles&#x27;</span>, res)</span><br><span class="line">    cv.imwrite(<span class="string">&#x27;res.png&#x27;</span>, res)</span><br><span class="line">    cv.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="114.png" style="zoom: 100%;" /><img src="116.png" style="zoom: 100%;" /><p>æ³¨ï¼šä¸åŒå›¾åƒé—´çš„æ£€æµ‹éœ€è¦è°ƒå‚ï¼Œå°¤å…¶æ˜¯<code>parm2</code>ï¼Œç¬¬äºŒå¼ å›¾è¦è°ƒæˆ32</p><h1>å›¾åƒåˆ†å‰²ä¸æå–</h1><h2 id="åˆ†æ°´å²­ç®—æ³•">åˆ†æ°´å²­ç®—æ³•</h2><h3 id="åŸç†-13">åŸç†</h3><p>â€‹           ä»»ä½•ç°åº¦å›¾åƒéƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåœ°å½¢è¡¨é¢ï¼Œå…¶ä¸­é«˜å¼ºåº¦è¡¨ç¤ºå±±å³°ï¼Œä½å¼ºåº¦è¡¨ç¤ºå±±è°·ã€‚ä½ å¼€å§‹ç”¨ä¸åŒé¢œè‰²çš„æ°´(æ ‡ç­¾)å¡«å……æ¯ä¸ªå­¤ç«‹çš„å±±è°·(å±€éƒ¨æœ€å°å€¼)ã€‚éšç€æ°´ä½çš„ä¸Šå‡ï¼Œæ ¹æ®é™„è¿‘çš„å±±å³°(å¡åº¦)ï¼Œæ¥è‡ªä¸åŒå±±è°·çš„æ°´æ˜æ˜¾ä¼šå¼€å§‹åˆå¹¶ï¼Œé¢œè‰²ä¹Ÿä¸åŒã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ è¦<strong>åœ¨æ°´èåˆçš„åœ°æ–¹å»ºé€ å±éšœ</strong>ã€‚ä½ ç»§ç»­å¡«æ»¡æ°´ï¼Œå»ºé€ éšœç¢ï¼Œ<strong>ç›´åˆ°æ‰€æœ‰çš„å±±å³°éƒ½åœ¨æ°´ä¸‹ã€‚ç„¶åä½ åˆ›å»ºçš„å±éšœå°†è¿”å›ä½ çš„åˆ†å‰²ç»“æœ</strong>ã€‚è¿™å°±æ˜¯WatershedèƒŒåçš„â€œæ€æƒ³â€ã€‚</p><p>â€‹        ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šç”±äºå›¾åƒä¸­çš„å™ªå£°æˆ–å…¶ä»–ä¸è§„åˆ™æ€§è€Œäº§ç”Ÿè¿‡åº¦åˆ†å‰²çš„ç»“æœã€‚å› æ­¤OpenCVå®ç°äº†ä¸€ä¸ª<strong>åŸºäºæ ‡è®°çš„åˆ†æ°´å²­ç®—æ³•</strong>ï¼Œä½ å¯ä»¥æŒ‡å®šå“ªäº›æ˜¯è¦åˆå¹¶çš„å±±è°·ç‚¹ï¼Œå“ªäº›ä¸æ˜¯ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>äº¤äº’å¼çš„å›¾åƒåˆ†å‰²</strong>ã€‚æˆ‘ä»¬æ‰€åšçš„æ˜¯ç»™æˆ‘ä»¬çŸ¥é“çš„å¯¹è±¡èµ‹äºˆä¸åŒçš„æ ‡ç­¾ã€‚<strong>ç”¨ä¸€ç§é¢œè‰²(æˆ–å¼ºåº¦)æ ‡è®°æˆ‘ä»¬ç¡®å®šä¸ºå‰æ™¯æˆ–å¯¹è±¡çš„åŒºåŸŸï¼Œç”¨å¦ä¸€ç§é¢œè‰²æ ‡è®°æˆ‘ä»¬ç¡®å®šä¸ºèƒŒæ™¯æˆ–éå¯¹è±¡çš„åŒºåŸŸï¼Œæœ€åç”¨<code>0</code>æ ‡è®°æˆ‘ä»¬ä¸ç¡®å®šçš„åŒºåŸŸ</strong>ã€‚è¿™æ˜¯æˆ‘ä»¬çš„æ ‡è®°ã€‚ç„¶ååº”ç”¨åˆ†æ°´å²­ç®—æ³•ã€‚ç„¶åæˆ‘ä»¬çš„æ ‡è®°å°†ä½¿ç”¨æˆ‘ä»¬ç»™å‡ºçš„æ ‡ç­¾è¿›è¡Œæ›´æ–°ï¼Œå¯¹è±¡çš„è¾¹ç•Œå€¼å°†ä¸º<code>-1</code>ã€‚</p><img src="115.gif" style="zoom: 120%;" /><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>ç›´æ¥ä½¿ç”¨åˆ†æ°´å²­ç®—æ³•æœ‰æ—¶æ•ˆæœå¹¶ä¸å¥½ï¼Œè¿™æ˜¯å›¾åƒä¸­çš„å™ªå£°ã€è¾¹ç•Œç›¸äº¤ã€æ¨¡ç³Šç­‰åŸå› å¯¼è‡´çš„ã€‚</p><p>æˆ‘ä»¬å…ˆä»å¯»æ‰¾ç¡¬å¸çš„è¿‘ä¼¼ä¼°è®¡å¼€å§‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨OtsuäºŒå€¼åŒ–ã€‚</p><img src="117.png" style="zoom: 100%;" /><p>ç°åœ¨æˆ‘ä»¬éœ€è¦å»é™¤å›¾åƒä¸­çš„ä»»ä½•ç™½ç‚¹å™ªå£°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å½¢æ€å­¦æ‰©å¼ ã€‚è¦å»é™¤å¯¹è±¡ä¸­çš„ä»»ä½•å°å­”ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å½¢æ€å­¦ä¾µèš€ï¼ˆå¼€è¿ç®—ï¼‰ã€‚å¯¹äºå‰æ™¯åŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è·ç¦»å˜æ¢å‡½æ•°æ‰¾åˆ°ã€‚å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç¡®å®šï¼Œé è¿‘å¯¹è±¡ä¸­å¿ƒçš„åŒºåŸŸæ˜¯å‰æ™¯ï¼Œè€Œç¦»å¯¹è±¡ä¸­å¿ƒå¾ˆè¿œçš„åŒºåŸŸæ˜¯èƒŒæ™¯ã€‚<strong>æˆ‘ä»¬ä¸ç¡®å®šçš„å”¯ä¸€åŒºåŸŸæ˜¯ç¡¬å¸çš„è¾¹ç•ŒåŒºåŸŸ</strong>ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æå–æˆ‘ä»¬å¯ç¡®å®šä¸ºç¡¬å¸çš„åŒºåŸŸã€‚ä¾µèš€ä¼šå»é™¤è¾¹ç•Œåƒç´ ã€‚å› æ­¤ï¼Œæ— è®ºå‰©ä½™å¤šå°‘ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥è‚¯å®šå®ƒæ˜¯ç¡¬å¸ã€‚å¦‚æœç‰©ä½“å½¼æ­¤ä¸æ¥è§¦ï¼Œé‚£å°†èµ·ä½œç”¨ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒä»¬å½¼æ­¤æ¥è§¦ï¼Œå› æ­¤å¦ä¸€ä¸ªå¥½é€‰æ‹©æ˜¯æ‰¾åˆ°è·ç¦»å˜æ¢å¹¶åº”ç”¨é€‚å½“çš„é˜ˆå€¼ã€‚æ¥ä¸‹æ¥ï¼Œ<strong>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æˆ‘ä»¬ç¡®å®šå®ƒä»¬ä¸æ˜¯ç¡¬å¸çš„åŒºåŸŸã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ‰©å¼ äº†ç»“æœã€‚è†¨èƒ€å°†å¯¹è±¡è¾¹ç•Œå¢åŠ åˆ°èƒŒæ™¯ã€‚è¿™æ ·ï¼Œç”±äºè¾¹ç•ŒåŒºåŸŸå·²åˆ é™¤ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç¡®ä¿ç»“æœä¸­èƒŒæ™¯ä¸­çš„ä»»ä½•åŒºåŸŸå®é™…ä¸Šéƒ½æ˜¯èƒŒæ™¯</strong>ã€‚å‚è§ä¸‹å›¾ã€‚</p><p><img src="119.png" alt="å·¦ä¾§ä¸ºå‰æ™¯ï¼Œå³ä¾§æ˜¯ç¡®å®šçš„èƒŒæ™¯"></p><p>å‰©ä¸‹çš„åŒºåŸŸæ˜¯æˆ‘ä»¬ä¸çŸ¥é“çš„åŒºåŸŸï¼Œæ— è®ºæ˜¯ç¡¬å¸è¿˜æ˜¯èƒŒæ™¯ã€‚åˆ†æ°´å²­ç®—æ³•åº”è¯¥æ‰¾åˆ°å®ƒã€‚è¿™äº›åŒºåŸŸé€šå¸¸ä½äºå‰æ™¯å’ŒèƒŒæ™¯ç›¸é‡ï¼ˆç”šè‡³ä¸¤ä¸ªä¸åŒçš„ç¡¬å¸ç›¸é‡ï¼‰çš„ç¡¬å¸è¾¹ç•Œé™„è¿‘ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>è¾¹ç•Œ</strong>ã€‚å¯ä»¥é€šè¿‡ä»ç¡®å®šçš„èƒŒæ™¯åŒºåŸŸä¸­å‡å»ç¡®å®šçš„å‰æ™¯åŒºåŸŸæ¥è·å¾—ã€‚</p><p><img src="120.png" alt="è¾¹ç•Œ"></p><p>æŸ¥çœ‹ç»“æœã€‚åœ¨é˜ˆå€¼å›¾åƒä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€äº›ç¡¬å¸åŒºåŸŸï¼Œæˆ‘ä»¬ç¡®å®šå®ƒä»¬æ˜¯ç¡¬å¸ï¼Œå¹¶ä¸”ç°åœ¨å·²åˆ†ç¦»å®ƒä»¬ã€‚ï¼ˆåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªå¯¹å‰æ™¯åˆ†å‰²æ„Ÿå…´è¶£ï¼Œè€Œä¸å¯¹åˆ†ç¦»ç›¸äº’æ¥è§¦çš„å¯¹è±¡æ„Ÿå…´è¶£ã€‚åœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œä½ æ— éœ€ä½¿ç”¨è·ç¦»å˜æ¢ï¼Œåªéœ€ä¾µèš€å°±è¶³å¤Ÿäº†ã€‚ä¾µèš€åªæ˜¯æå–ç¡®å®šå‰æ™¯åŒºåŸŸçš„å¦ä¸€ç§æ–¹æ³•ã€‚ï¼‰</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç¡®å®šå“ªäº›æ˜¯ç¡¬å¸çš„åŒºåŸŸï¼Œå“ªäº›æ˜¯èƒŒæ™¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ ‡è®°ï¼ˆå®ƒçš„å¤§å°ä¸åŸå§‹å›¾åƒçš„å¤§å°ç›¸åŒï¼Œä½†å…·æœ‰int32æ•°æ®ç±»å‹ï¼‰ï¼Œå¹¶æ ‡è®°å…¶ä¸­çš„åŒºåŸŸã€‚<strong>æˆ‘ä»¬è‚¯å®šçŸ¥é“çš„åŒºåŸŸï¼ˆæ— è®ºæ˜¯å‰æ™¯è¿˜æ˜¯èƒŒæ™¯ï¼‰éƒ½æ ‡æœ‰ä»»ä½•æ­£æ•´æ•°ï¼Œä½†æ˜¯å¸¦æœ‰ä¸åŒçš„æ•´æ•°ï¼Œè€Œæˆ‘ä»¬ä¸ç¡®å®šçš„åŒºåŸŸåˆ™ä¿ç•™ä¸ºé›¶</strong>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>cv.connectedComponents()</code>ã€‚å®ƒç”¨0æ ‡è®°å›¾åƒçš„èƒŒæ™¯ï¼Œç„¶åå…¶ä»–å¯¹è±¡ç”¨ä»1å¼€å§‹çš„æ•´æ•°æ ‡è®°ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>å¦‚æœèƒŒæ™¯æ ‡è®°ä¸º0ï¼Œåˆ™åˆ†æ°´å²­ä¼šå°†å…¶è§†ä¸ºæœªçŸ¥åŒºåŸŸã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³ç”¨ä¸åŒçš„æ•´æ•°æ¥æ ‡è®°å®ƒã€‚ç›¸åï¼Œæˆ‘ä»¬å°†æœªçŸ¥å®šä¹‰çš„æœªçŸ¥åŒºåŸŸæ ‡è®°ä¸º0</strong>ã€‚</p><p>ç°åœ¨æˆ‘ä»¬çš„æ ‡è®°å·²å‡†å¤‡å°±ç»ªã€‚ç°åœ¨æ˜¯æœ€åä¸€æ­¥çš„æ—¶å€™äº†ï¼Œä½¿ç”¨åˆ†æ°´å²­ç®—æ³•ã€‚ç„¶åæ ‡è®°å›¾åƒå°†è¢«ä¿®æ”¹ã€‚è¾¹ç•ŒåŒºåŸŸå°†æ ‡è®°ä¸º-1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\0.jpg&#x27;</span>)</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    ret, thresh = cv.threshold(gray, <span class="number">0</span>, <span class="number">255</span>, cv.THRESH_BINARY_INV + cv.THRESH_OTSU)</span><br><span class="line">    <span class="comment"># å™ªå£°å»é™¤</span></span><br><span class="line">    kernel = np.ones((<span class="number">3</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">    <span class="comment">#è¿™é‡Œè¿›è¡Œäº†è¿­ä»£ï¼Œå…¶å®ä¸è¿­ä»£ä¹Ÿè¿˜å¥½</span></span><br><span class="line">    opening = cv.morphologyEx(thresh, cv.MORPH_OPEN, kernel, iterations=<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># ç¡®å®šèƒŒæ™¯åŒºåŸŸ</span></span><br><span class="line">    sure_bg = cv.dilate(opening, kernel, iterations=<span class="number">3</span>)</span><br><span class="line">    <span class="comment"># å¯»æ‰¾å‰æ™¯åŒºåŸŸ</span></span><br><span class="line">    dist_transform = cv.distanceTransform(opening, cv.DIST_L2, <span class="number">5</span>)</span><br><span class="line">    ret2, sure_fg = cv.threshold(dist_transform, <span class="number">0.7</span> * dist_transform.<span class="built_in">max</span>(), <span class="number">255</span>, cv.THRESH_BINARY)</span><br><span class="line">    <span class="comment"># æ‰¾åˆ°æœªçŸ¥åŒºåŸŸ</span></span><br><span class="line">    sure_fg = np.uint8(sure_fg)</span><br><span class="line">    unknown = cv.subtract(sure_bg, sure_fg)</span><br><span class="line">    <span class="comment"># ç±»åˆ«æ ‡è®°</span></span><br><span class="line">    ret3, markers = cv.connectedComponents(sure_fg)</span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">131</span>)</span><br><span class="line">    plt.imshow(markers)</span><br><span class="line">    plt.title(<span class="string">&#x27;mark&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸ºæ‰€æœ‰çš„æ ‡è®°åŠ 1ï¼Œä¿è¯èƒŒæ™¯æ˜¯1è€Œä¸æ˜¯0</span></span><br><span class="line">    markers = markers + <span class="number">1</span></span><br><span class="line">    <span class="comment"># ç°åœ¨è®©æ‰€æœ‰çš„æœªçŸ¥åŒºåŸŸä¸º0</span></span><br><span class="line">    markers[unknown == <span class="number">255</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">132</span>)</span><br><span class="line">    plt.imshow(markers)</span><br><span class="line">    plt.title(<span class="string">&#x27;mark unknown&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">    markers = cv.watershed(img, markers)</span><br><span class="line">    img[markers == -<span class="number">1</span>] = [<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    plt.subplot(<span class="number">133</span>)</span><br><span class="line">    plt.imshow(img)</span><br><span class="line">    plt.title(<span class="string">&#x27;watershed result&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    cv.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="122.png" style="zoom: 100%;" /><h3 id="è·ç¦»å˜æ¢å‡½æ•°distanceTransform">è·ç¦»å˜æ¢å‡½æ•°<code>distanceTransform()</code></h3><p>å½“å›¾åƒå†…çš„å„ä¸ªå­å›¾æ²¡æœ‰è¿æ¥æ—¶ï¼Œ å¯ä»¥ç›´æ¥ä½¿ç”¨å½¢æ€å­¦çš„è…èš€æ“ä½œç¡®å®šå‰æ™¯å¯¹è±¡ï¼Œ ä½†æ˜¯å¦‚æœå›¾åƒå†…çš„å­å›¾è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œå°±å¾ˆéš¾ç¡®å®šå‰æ™¯å¯¹è±¡äº†ã€‚æ­¤æ—¶ï¼Œå€ŸåŠ©äºè·ç¦»å˜æ¢å‡½æ•°<code>cv2.distanceTransform()</code>å¯ä»¥æ–¹ä¾¿åœ°å°†<strong>å‰æ™¯å¯¹è±¡</strong>æå–å‡ºæ¥ã€‚</p><p><strong>è·ç¦»å˜æ¢å‡½æ•°<code>cv2.distanceTransform()</code>è®¡ç®—äºŒå€¼å›¾åƒå†…ä»»æ„ç‚¹åˆ°æœ€è¿‘èƒŒæ™¯ç‚¹çš„è·ç¦»</strong>ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°è®¡ç®—çš„æ˜¯å›¾åƒå†…éé›¶å€¼åƒç´ ç‚¹åˆ°æœ€è¿‘çš„é›¶å€¼åƒç´ ç‚¹çš„è·ç¦»ï¼Œ å³è®¡ç®—äºŒå€¼å›¾åƒä¸­æ‰€æœ‰åƒç´ ç‚¹è·ç¦»å…¶æœ€è¿‘çš„å€¼ä¸º0çš„åƒç´ ç‚¹çš„è·ç¦»ã€‚ å½“ç„¶ï¼Œ å¦‚æœåƒç´ ç‚¹æœ¬èº«çš„å€¼ä¸º0, åˆ™è¿™ä¸ªè·ç¦»ä¹Ÿä¸º0ã€‚</p><p>è·ç¦»å˜æ¢å‡½æ•°<code>cv2.distanceTransform()</code>çš„è®¡ç®—ç»“æœåæ˜ äº†å„ä¸ªåƒç´ ä¸èƒŒæ™¯ï¼ˆå€¼ä¸º0çš„åƒç´ ç‚¹ï¼‰çš„è·ç¦»å…³ç³»ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼š</p><ul><li><p>å¦‚æœå‰æ™¯å¯¹è±¡çš„ä¸­å¿ƒï¼ˆè´¨å¿ƒï¼‰è·ç¦»å€¼ä¸º0çš„åƒç´ ç‚¹è·ç¦»è¾ƒè¿œï¼Œ ä¼šå¾—åˆ°ä¸€ä¸ªè¾ƒå¤§çš„å€¼ã€‚</p></li><li><p>å¦‚æœå‰æ™¯å¯¹è±¡çš„è¾¹ç¼˜è·ç¦»å€¼ä¸º0çš„åƒç´ ç‚¹è¾ƒè¿‘ï¼Œ ä¼šå¾—åˆ°ä¸€ä¸ªè¾ƒå°çš„å€¼ã€‚<br><strong>å¦‚æœå¯¹ä¸Šè¿°è®¡ç®—ç»“æœè¿›è¡Œé˜ˆå€¼åŒ–ï¼Œ å°±å¯ä»¥å¾—åˆ°å›¾åƒå†…å­å›¾çš„ä¸­å¿ƒã€ éª¨æ¶ç­‰ä¿¡æ¯</strong>ã€‚ è·ç¦»å˜æ¢å‡½æ•°<code>cv2.distanceTransform()</code>å¯ä»¥ç”¨äºè®¡ç®—å¯¹è±¡çš„ä¸­å¿ƒï¼Œè¿˜èƒ½ç»†åŒ–è½®å»“ã€è·å–å›¾åƒå‰æ™¯ç­‰ï¼Œæœ‰å¤šç§åŠŸèƒ½ã€‚</p><ul><li><p>å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dist_transform = cv.distanceTransform(img, cv.DIST_L2, <span class="number">5</span>)</span><br><span class="line">ret2, sure_fg = cv.threshold(dist_transform, <span class="number">0.7</span> * dist_transform.<span class="built_in">max</span>(), <span class="number">255</span>, cv.THRESH_BINARY)</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>è·ç¦»å˜æ¢å‡½æ•°cv2.distanceTransform(ï¼‰çš„è¯­æ³•æ ¼å¼ä¸ºï¼š<br><code>dst=cv2.distanceTransform(src,distanceType,maskSize[,dstType]])</code></p><p>å¼ä¸­ï¼š</p><ul><li>srcæ˜¯8ä½å•é€šé“çš„äºŒå€¼å›¾åƒã€‚</li><li><code>distanceType</code>ä¸ºè·ç¦»ç±»å‹å‚æ•°ï¼Œå…¶å…·ä½“å€¼å’Œå«ä¹‰å¦‚è¡¨æ‰€ç¤º</li></ul><img src="118.png" style="zoom: 100%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    img = cv.imread(<span class="string">&#x27;image\\0.jpg&#x27;</span>)</span><br><span class="line">    gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)</span><br><span class="line">    ret, thresh = cv.threshold(gray, <span class="number">0</span>, <span class="number">255</span>, cv.THRESH_BINARY_INV + cv.THRESH_OTSU)</span><br><span class="line">    kernel = np.ones((<span class="number">3</span>, <span class="number">3</span>), np.uint8)</span><br><span class="line">    opening = cv.morphologyEx(thresh, cv.MORPH_OPEN, kernel, iterations=<span class="number">2</span>)</span><br><span class="line">    sure_bg = cv.dilate(opening, kernel, iterations=<span class="number">3</span>)</span><br><span class="line">    dist_transform = cv.distanceTransform(opening, cv.DIST_L2, <span class="number">5</span>)</span><br><span class="line">    res = np.hstack((gray, dist_transform))</span><br><span class="line">    cv.imwrite(<span class="string">&#x27;res.png&#x27;</span>, res)</span><br><span class="line"></span><br><span class="line">    cv.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv.destroyAllWindows()</span><br></pre></td></tr></table></figure><img src="121.png" style="zoom: 80%;" /><h3 id="å‡½æ•°connectedComponents">å‡½æ•°<code>connectedComponents()</code></h3><p>æ˜ç¡®äº†ç¡®å®šå‰æ™¯åï¼Œå°±å¯ä»¥å¯¹ç¡®å®šå‰æ™¯å›¾åƒè¿›è¡Œæ ‡æ³¨äº†ã€‚åœ¨OpenCVä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°<code>cv2.connectedComponents()</code>è¿›è¡Œæ ‡æ³¨ã€‚è¯¥å‡½æ•°ä¼šå°†èƒŒæ™¯æ ‡æ³¨ä¸º0, å°†å…¶ä»–çš„å¯¹è±¡ä½¿ç”¨ä»1å¼€å§‹çš„æ­£æ•´æ•°æ ‡æ³¨ã€‚</p><p>å‡½æ•°<code>cv2.connectedComponents()</code>çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>retval,labels=cv2.connectedComponents (image)</code></p><p>å¼ä¸­ï¼š</p><ul><li>imageä¸º<strong>8ä½å•é€šé“</strong>çš„å¾…æ ‡æ³¨å›¾åƒã€‚</li><li>retvalä¸ºè¿”å›çš„æ ‡æ³¨çš„æ•°é‡ã€‚</li><li>labelsä¸ºæ ‡æ³¨çš„ç»“æœå›¾åƒã€‚</li></ul><h2 id="äº¤äº’å¼å‰æ™¯æå–">äº¤äº’å¼å‰æ™¯æå–</h2><h3 id="GrabCutç®—æ³•çš„å…·ä½“å®æ–½è¿‡ç¨‹"><code>GrabCut</code>ç®—æ³•çš„å…·ä½“å®æ–½è¿‡ç¨‹</h3><ul><li><p>å°†å‰æ™¯æ‰€åœ¨çš„å¤§è‡´ä½ç½®ä½¿ç”¨çŸ©å½¢æ¡†æ ‡æ³¨å‡ºæ¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>æ­¤æ—¶çŸ©å½¢æ¡†æ¡†å‡ºçš„ä»…ä»…æ˜¯å‰æ™¯çš„å¤§è‡´ä½ç½®ï¼Œå…¶ä¸­æ—¢åŒ…å«å‰æ™¯åˆåŒ…å«èƒŒæ™¯ï¼Œæ‰€ä»¥è¯¥åŒºåŸŸå®é™…ä¸Šæ˜¯æœªç¡®å®šåŒºåŸŸã€‚ä½†æ˜¯ï¼Œè¯¥åŒºåŸŸä»¥å¤–çš„åŒºåŸŸè¢«è®¤ä¸ºæ˜¯ &quot;ç¡®å®šèƒŒæ™¯â€</strong>ã€‚</p></li><li><p>æ ¹æ®çŸ©å½¢æ¡†å¤–éƒ¨çš„ &quot;ç¡®å®šèƒŒæ™¯â€œ æ•°æ®æ¥åŒºåˆ†<strong>çŸ©å½¢æ¡†åŒºåŸŸå†…</strong>çš„å‰æ™¯å’ŒèƒŒæ™¯ã€‚</p></li><li><p>ç”¨é«˜æ–¯æ··åˆæ¨¡å‹ (Gaussians Mixture Model,GMM) å¯¹å‰æ™¯å’ŒèƒŒæ™¯å»ºæ¨¡ã€‚GMMä¼šæ ¹æ®ç”¨æˆ·çš„è¾“å…¥å­¦ä¹ å¹¶åˆ›å»ºæ–°çš„åƒç´ åˆ†å¸ƒï¼Œå¯¹æœªåˆ†ç±»çš„åƒç´ ï¼ˆå¯èƒ½æ˜¯èƒŒæ™¯ä¹Ÿå¯èƒ½æ˜¯å‰æ™¯ï¼‰ï¼Œæ ¹æ®å…¶ä¸å·²çŸ¥åˆ†ç±»åƒç´ ï¼ˆå‰æ™¯å’ŒèƒŒæ™¯ï¼‰çš„å…³ç³»è¿›è¡Œåˆ†ç±»ã€‚</p></li><li><p>æ ¹æ®åƒç´ åˆ†å¸ƒæƒ…å†µç”Ÿæˆä¸€å¹…å›¾ï¼Œå›¾ä¸­çš„èŠ‚ç‚¹å°±æ˜¯å„ä¸ªåƒç´ ç‚¹ã€‚é™¤äº†åƒç´ ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼š<strong>å‰æ™¯èŠ‚ç‚¹å’ŒèƒŒæ™¯èŠ‚ç‚¹</strong>ã€‚<strong>æ‰€æœ‰çš„å‰æ™¯åƒç´ éƒ½å’Œå‰æ™¯èŠ‚ç‚¹ç›¸è¿ï¼Œæ‰€æœ‰çš„èƒŒæ™¯åƒç´ éƒ½å’ŒèƒŒæ™¯èŠ‚ç‚¹ç›¸è¿</strong>ã€‚æ¯ä¸ªåƒç´ è¿æ¥åˆ°å‰æ™¯èŠ‚ç‚¹æˆ–èƒŒæ™¯èŠ‚ç‚¹çš„è¾¹çš„æƒé‡ç”±åƒç´ æ˜¯å‰æ™¯æˆ–èƒŒæ™¯çš„æ¦‚ç‡æ¥å†³å®šã€‚</p></li><li><p>å›¾ä¸­çš„æ¯ä¸ªåƒç´ é™¤äº†ä¸å‰æ™¯èŠ‚ç‚¹æˆ–èƒŒæ™¯èŠ‚ç‚¹ç›¸è¿å¤–ï¼Œå½¼æ­¤ä¹‹é—´è¿˜å­˜åœ¨ç€è¿æ¥ã€‚<strong>ä¸¤ä¸ªåƒç´ è¿æ¥çš„è¾¹çš„æƒé‡å€¼ç”±å®ƒä»¬çš„ç›¸ä¼¼æ€§å†³å®šï¼Œä¸¤ä¸ªåƒç´ çš„é¢œè‰²è¶Šæ¥è¿‘ï¼Œè¾¹çš„æƒé‡å€¼è¶Šå¤§</strong>ã€‚</p></li><li><p><strong>å®ŒæˆèŠ‚ç‚¹è¿æ¥åï¼Œéœ€è¦è§£å†³çš„é—®é¢˜å˜æˆäº†ä¸€å¹…è¿é€šçš„å›¾ã€‚åœ¨è¯¥å›¾ä¸Šæ ¹æ®å„è‡ªè¾¹çš„æƒé‡å…³ç³»è¿›è¡Œåˆ‡å‰²ï¼Œå°†ä¸åŒçš„ç‚¹åˆ’åˆ†ä¸ºå‰æ™¯èŠ‚ç‚¹å’ŒèƒŒæ™¯èŠ‚ç‚¹</strong>ã€‚</p></li><li><p>ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œ ç›´è‡³åˆ†ç±»æ”¶æ•›ä¸ºæ­¢ã€‚</p></li></ul><img src="124.png" style="zoom: 80%;" /><h3 id="å‡½æ•°-14">å‡½æ•°</h3><p>åœ¨OpenCVä¸­ï¼Œ å®ç°äº¤äº’å¼å‰æ™¯æå–çš„å‡½æ•°æ˜¯<code>cv2.grabCut ()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask,bgdModel,fgdModel=cv2.grabCut(img,mask,rect,bgdModel,fgdModel,iterCount[,mode ])</span><br></pre></td></tr></table></figure><ul><li><p>imgä¸ºè¾“å…¥å›¾åƒï¼Œè¦æ±‚æ˜¯<strong>8ä½3é€šé“</strong>çš„ã€‚</p></li><li><p>maskä¸ºæ©æ¨¡å›¾åƒï¼Œè¦æ±‚æ˜¯<strong>8ä½å•é€šé“</strong>çš„ã€‚è¯¥å‚æ•°ç”¨äºç¡®å®šå‰æ™¯åŒºåŸŸã€èƒŒæ™¯åŒºåŸŸå’Œä¸ç¡®å®šåŒºåŸŸå¯ä»¥è®¾ç½®ä¸º4ç§å½¢å¼</p><ul><li>cv2.GC_BGDï¼šè¡¨ç¤ºç¡®å®šèƒŒæ™¯ï¼Œ ä¹Ÿå¯ä»¥ç”¨æ•°å€¼0è¡¨ç¤ºã€‚</li><li>cv2.GC_FGD: è¡¨ç¤ºç¡®å®šå‰æ™¯ï¼Œ ä¹Ÿå¯ä»¥ç”¨æ•°å€¼1è¡¨ç¤ºã€‚</li><li>cv2.GC_PR_BGD: è¡¨ç¤ºå¯èƒ½çš„èƒŒæ™¯ï¼Œ ä¹Ÿå¯ä»¥ç”¨æ•°å€¼2è¡¨ç¤ºã€‚</li><li>cv2.GC_PR_FGD: è¡¨ç¤ºå¯èƒ½çš„å‰æ™¯ï¼Œ ä¹Ÿå¯ä»¥ç”¨æ•°å€¼3è¡¨ç¤ºã€‚</li></ul></li></ul><p>â€‹        <strong>åœ¨æœ€åä½¿ç”¨æ¨¡æ¿æå–å‰æ™¯æ—¶ï¼Œä¼šå°†å‚æ•°å€¼0å’Œ2åˆå¹¶ä¸ºèƒŒæ™¯ï¼ˆå‡å½“ä½œ0å¤„ç†ï¼‰ï¼Œå°†å‚æ•°å€¼1å’Œ3åˆå¹¶ä¸ºå‰æ™¯ï¼ˆå‡å½“ä½œ1å¤„ç†ï¼‰</strong>ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç™½è‰²ç¬”åˆ·å’Œé»‘è‰²ç¬”åˆ·åœ¨æ©æ¨¡å›¾åƒä¸Šåšæ ‡è®°ï¼Œå†é€šè¿‡è½¬æ¢å°†å…¶ä¸­çš„ç™½è‰²åƒç´ è®¾ç½®ä¸º0ï¼Œé»‘è‰²åƒç´ è®¾ç½®ä¸º1ã€‚</p><ul><li><p>rect æŒ‡åŒ…å«å‰æ™¯å¯¹è±¡çš„åŒºåŸŸï¼Œè¯¥åŒºåŸŸå¤–çš„éƒ¨åˆ†è¢«è®¤ä¸ºæ˜¯â€œç¡®å®šèƒŒæ™¯â€ã€‚å› æ­¤ï¼Œåœ¨é€‰å–æ—¶åŠ¡å¿…ç¡®ä¿è®©å‰æ™¯åŒ…å«åœ¨rectæŒ‡å®šçš„èŒƒå›´å†…ï¼›å¦åˆ™ï¼Œrectå¤–çš„å‰æ™¯éƒ¨åˆ†æ˜¯ä¸ä¼šè¢«æå–å‡ºæ¥çš„ã€‚åªæœ‰å½“å‚æ•°<code>mode</code>çš„å€¼è¢«è®¾ç½®ä¸ºçŸ©å½¢æ¨¡å¼<code>cv2.GC_INIT_ WITH_RECT</code>æ—¶ ï¼Œå‚æ•°<code>rect</code>æ‰æœ‰æ„ä¹‰ã€‚å…¶æ ¼å¼ä¸º<code>(x,y,w,h)</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºåŒºåŸŸå·¦ä¸Šè§’åƒç´ çš„xè½´å’Œyè½´åæ ‡ä»¥åŠåŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ã€‚å¦‚æœå‰æ™¯ä½äºå³ä¸‹æ–¹ï¼Œåˆä¸æƒ³åˆ¤æ–­åŸå§‹å›¾åƒçš„å¤§å°ï¼Œå¯¹äºw å’Œhå¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ªå¾ˆå¤§çš„å€¼ã€‚ä½¿ç”¨æ©æ¨¡æ¨¡å¼æ—¶ï¼Œå°†è¯¥å€¼è®¾ç½®ä¸º<code>none</code>å³å¯ã€‚</p></li><li><p>bgdModelä¸ºç®—æ³•å†…éƒ¨ä½¿ç”¨çš„æ•°ç»„ï¼Œåªéœ€è¦åˆ›å»ºå¤§å°ä¸º(1,65)çš„<code>numpy.float64</code>æ•°ç»„ã€‚</p></li><li><p>fgdModelä¸ºç®—æ³•å†…éƒ¨ä½¿ç”¨çš„æ•°ç»„ï¼Œ åªéœ€è¦åˆ›å»ºå¤§å°ä¸º(1,65)çš„<code>numpy.float64</code>æ•°ç»„ã€‚</p></li><li><p>iterCountè¡¨ç¤ºè¿­ä»£çš„æ¬¡æ•°ã€‚</p></li><li><p>modeè¡¨ç¤ºè¿­ä»£æ¨¡å¼ã€‚</p></li></ul><img src="123.png" style="zoom: 100%;" /><h1>å‚è€ƒ</h1><blockquote><p>ã€ŠOpenCVè½»æ¾å…¥é—¨é¢å‘Pythonã€‹</p><p><a href="https://docs.opencv.org/4.1.2/d6/d00/tutorial_py_root.html">OpenCVå®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;album_id=1343718009222905856&amp;__biz=MzUyNzY5OTE5Mw==#wechat_redirect">pythonå›¾åƒå¤„ç†</a></p><p><a href="http://daily.zhihu.com/story/3935067">å‚…é‡Œå¶å˜æ¢</a></p><p><a href="http://daily.zhihu.com/story/3935067">é¢‘åŸŸä¸æ—¶åŸŸ</a></p><p><a href="https://dsp.stackexchange.com/questions/1637/what-does-frequency-domain-denote-in-case-of-images">ä»€ä¹ˆæ˜¯å›¾ç‰‡çš„é¢‘åŸŸ</a></p><p><a href="https://zhuanlan.zhihu.com/p/203292567">éœå¤«çº¿å˜æ¢</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> cv </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022_sdu_online_core_member_interview</title>
      <link href="/2022/02/26/2022-sdu-online-core-member-interview/"/>
      <url>/2022/02/26/2022-sdu-online-core-member-interview/</url>
      
        <content type="html"><![CDATA[<h1>é—®é¢˜</h1><h2 id="1">1</h2><p>ç»™å®šå¦‚ä¸‹ç±»</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Recipe</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> cows;</span><br><span class="line">  <span class="built_in">int</span> trampolines;</span><br><span class="line"></span><br><span class="line">  Recipe(<span class="keyword">this</span>.cows, <span class="keyword">this</span>.trampolines);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">int</span> makeMilkshake() &#123;</span><br><span class="line">    <span class="keyword">return</span> cows + trampolines;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>=&gt;ç®­å¤´</code>è¯­æ³•å°†<code>makeMilkshake()</code>è½¬æ¢æˆå‘½åä¸º<code>milkshake</code>çš„getterè¯­æ³•ã€‚</p><h2 id="2">2</h2><p>ç»™å®šå¦‚ä¸‹Widget</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> personNextToMe = <span class="string">&#x27;That reminds me about the time when I was ten and our neighbor, her name was Mrs. Mable, and she said...&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Row(children: [</span><br><span class="line">      Icon(Icons.airline_seat_legroom_reduced),</span><br><span class="line">      Text(personNextToMe),</span><br><span class="line">      Icon(Icons.airline_seat_legroom_reduced),</span><br><span class="line">    ]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸€äº›çª„å±è®¾å¤‡ä¸Šï¼Œæ–‡æœ¬æº¢å‡ºäº†ï¼Œä½ ä¼šå¦‚ä½•ä¿®å¤å‘ï¼Ÿ</p><p><img src="1.webp" alt="text_overflow.png"></p><h2 id="3">3</h2><p><code>hot reload</code>å’Œ<code>hot restart</code>çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå“ªä¸ªéœ€è¦é‡æ–°ç¼–è¯‘ï¼Ÿ</p><h2 id="4">4</h2><p>æ€ä¹ˆå‡å°‘Widgetçš„é‡æ–°æ„å»ºï¼Ÿ</p><h2 id="5">5</h2><p><code>StatelessWidget</code>å’Œ<code>StatefulWidget</code>çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><h2 id="6">6</h2><p>åœ¨æœ‰çŠ¶æ€ç±»ä¸­ç¼–å†™ä¸€ä¸ªæŒ‰é’®è°ƒç”¨åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸï¼ˆinitStateï¼‰æ–¹æ³•ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><h2 id="7ï¼ˆç©ºå®‰å…¨ï¼‰">7ï¼ˆç©ºå®‰å…¨ï¼‰</h2><p>å½“æˆ‘ç»™å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œæƒ³åœ¨å˜é‡ä¸ºç©ºçš„æ—¶å€™æ‰èµ‹å€¼ï¼Œéƒ½æœ‰å“ªå‡ ç§æ–¹æ³•ï¼Ÿ</p><p>å¦‚ä½•ç›´æ¥ç»™å˜é‡èµ‹å€¼ä¸ºnullï¼Ÿï¼ˆç©ºå®‰å…¨ä¸‹ï¼‰</p><h2 id="8ï¼ˆç©ºå®‰å…¨ï¼‰">8ï¼ˆç©ºå®‰å…¨ï¼‰</h2><p><code>??ä¸??=</code>çš„åŒºåˆ«</p><p>constå’Œfinalçš„åŒºåˆ«ï¼š</p><h2 id="9">9</h2><p>ç®€å•è¯´ä¸€ä¸‹åœ¨flutteré‡Œasyncå’Œawaitï¼Ÿ</p><h2 id="10">10</h2><p>å¦‚ä½•è¡¨ç¤ºæ•´é™¤ï¼Ÿ</p><p>Dartä¸­varä¸dynamicçš„åŒºåˆ«</p><h2 id="11ï¼ˆmethodChannelï¼‰">11ï¼ˆmethodChannelï¼‰</h2><h2 id="12">12</h2><p>ä»dioå‘èµ·ä¸€ä¸ªè¯·æ±‚å¼€å§‹ï¼Œè®²è®²è¿™ä¸ªè¯·æ±‚çš„å…¨è¿‡ç¨‹ã€‚</p><p>postä¸getçš„åŒºåˆ«</p><h2 id="13">13</h2><p>æœ‰ä¸€ä¸ªä»åç«¯è¿”å›çš„é•¿åº¦ä¸å®šçš„Listï¼Œå¦‚ä½•æ„é€ æˆListView</p><h2 id="14">14</h2><p>è§£é‡ŠmainAxisSizeå’ŒmainAxisAlignment</p><h2 id="15">15</h2><p>pushè¢«æ‹’ç»çš„åŸå› æœ‰å“ªäº›ã€‚</p><p>mergeç•Œé¢çš„è§£é‡Š</p><p><img src="2.png" alt="text_overflow.png"></p><h2 id="16">16</h2><p>è®²è®²MVC</p><h2 id="17">17</h2><p>200</p><p>400</p><p>403</p><p>500</p><p>504</p><h1>ç­”æ¡ˆ</h1><h2 id="1-2">1</h2><blockquote><p>å¦‚æœä¸€ä¸ªæ–¹æ³•åªæœ‰ä¸€è¡Œä»£ç ï¼Œåˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨<code>=&gt;</code>è¯­æ³•è¿”å›ç»“æœæ¥å‡å°‘ä»£ç è¡Œæ•°ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">methodName(parameters) =&gt; statement;</span><br></pre></td></tr></table></figure><p>æ³¨æ„å½“ä½¿ç”¨<code>=&gt;</code>çš„æ—¶å€™ï¼Œä¸éœ€è¦å†ä½¿ç”¨å…³é”®è¯<code>return</code>.<br><code>makeMilkshake()</code>è½¬æ¢åçš„ä»£ç å¦‚ä¸‹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> <span class="keyword">get</span> milkshake =&gt; cows + trampolines;</span><br></pre></td></tr></table></figure></blockquote><p>public class Main {<br>public static void main(String[] args) {</p><p>int[] a1 = {1, 2, 3, 4, 5};<br>int[] a2;<br>a2 = a1;<br>for (int i = 0; i &lt; a2.length; i++)    a2[i] = a2[i] + 1;<br>for (int i = 0; i &lt; a1.length; i++)     print(a1[i]);</p><p>}<br>}</p><h2 id="2-2">2</h2><blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Expanded(</span><br><span class="line">  child: Text(</span><br><span class="line">    personNextToMe,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>Expanded</code>widgetæ¥åŒ…è£¹<code>Text</code>widgetï¼Œä»¥å‘ŠçŸ¥<code>Row</code>å¿½ç•¥<code>Text</code>widgetçš„å›ºæœ‰å®½åº¦ï¼Œå¹¶ä¸”æ ¹æ®è¡Œä¸­å‰©ä½™çš„ç©ºé—´æ¥ä¸ºå…¶åˆ†é…å®½åº¦ã€‚</p><p>åœ¨<code>Row</code>ã€<code>Column</code>æˆ–è€…<code>Flex</code>widgetä¸­ä½¿ç”¨è¶…è¿‡ä¸€ä¸ª<code>Expandend</code>widgetæ—¶ï¼Œä¼šå‡åŒ€çš„åˆ†é…å‰©ä½™ç©ºé—´ã€‚å½“æœ‰å¤šä¸ª<code>Expand</code>widgetæ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>flex</code>å±æ€§å¯¹ä¼˜å…ˆçº§è¿›è¡Œæ’åºã€‚</p><p>å‡å¦‚ä½ è¿˜ä½¿ç”¨äº†<code>Text</code>widgetçš„<code>overflow</code>å±æ€§ï¼Œé‚£å°±å¤ªæ£’äº†ã€‚</p></blockquote><h2 id="3-2">3</h2><blockquote><p><code>hot reload</code>åœ¨ç«‹åˆ»æ›´æ–°UIçš„åŒæ—¶ä¿æŒç¨‹åºçš„çŠ¶æ€ï¼Œç›¸æ¯”ä¹‹ä¸‹<code>hot restart</code>èŠ±è´¹æ›´é•¿ä¸€ç‚¹çš„æ—¶é—´ï¼Œå› ä¸ºå®ƒä¼šåœ¨æ›´æ–°UIä¹‹å‰å°†ç¨‹åºçš„çŠ¶æ€ç½®ä¸ºåˆå§‹çŠ¶æ€ã€‚ä¸¤è€…éƒ½æ¯”å®Œå…¨é‡æ–°å¯åŠ¨ï¼ˆfull restartï¼‰è¦å¿«ï¼Œè¿™éœ€è¦é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åºã€‚</p><p>å½“æœ‰é‡å¤§çš„æ›´æ”¹æ—¶ï¼Œä½ éœ€è¦åœæ­¢å¹¶é‡æ–°è¿è¡Œè¯¥ç¨‹åºï¼Œåœ¨æå°‘æ•°çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½è¿˜éœ€è¦åœ¨æ¨¡æ‹Ÿå™¨æˆ–è€…çœŸæœºä¸Šåˆ é™¤åº”ç”¨ç¨‹åºï¼Œç„¶åé‡æ–°å®‰è£…ã€‚</p></blockquote><h2 id="4-2">4</h2><blockquote><p>å½“stateå‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½ å°†é‡æ–°æ„å»ºwidgetï¼Œè¿™ç§æ­£å¸¸ä¸”ç†æƒ³çš„çŠ¶æ€ï¼Œå› ä¸ºå®ƒå…è®¸ç”¨æˆ·æŸ¥çœ‹åæ˜ åœ¨UIä¸­çš„çŠ¶æ€æ›´æ”¹ã€‚ä½†æ˜¯é‡æ–°æ„å»ºé‚£äº›ä¸éœ€è¦æ”¹å˜çš„UIæ˜¯æ€§èƒ½æµªè´¹çš„ã€‚</p><p>ä½ å¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½æ¥å‡å°‘ä¸å¿…è¦çš„Widgeté‡å»ºã€‚</p><ul><li>é¦–å…ˆè¦åšçš„å°±æ˜¯å°†å¤§çš„Widgetæ ‘é‡æ„æˆè¾ƒå°çš„å•ä¸ªçš„Widgetï¼Œæ¯ä¸€ä¸ªWidgetéƒ½æœ‰å®ƒè‡ªå·±çš„<code>build</code>æ–¹æ³•ã€‚</li><li>å°½å¯èƒ½çš„ä½¿ç”¨<code>const</code>æ„é€ å‡½æ•°ï¼Œè¿™å°†å‘ŠçŸ¥Flutterä¸éœ€è¦é‡å»ºè¿™ä¸ªwidgetã€‚</li><li>ä½¿stateful widgetçš„å­æ ‘å°½å¯èƒ½çš„å°ï¼Œå¦‚æœstateful widgetæœ‰ä¸€ä¸ªwidgetå­æ ‘ï¼Œé‚£ä¹ˆä¸ºè¿™ä¸ªstateful widgetåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰widgetï¼Œå¹¶ä¸ºå…¶æä¾›ä¸€ä¸ª<code>child</code>å‚æ•°ã€‚</li></ul></blockquote><h2 id="5-2">5</h2><blockquote><p><code>StatelessWidget</code>æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå……å½“UIå¸ƒå±€ä¸­æŸäº›éƒ¨åˆ†çš„è“å›¾ï¼Œå½“æŸä¸ªç»„ä»¶åœ¨æ˜¾ç¤ºæœŸé—´ä¸éœ€è¦æ”¹å˜ï¼Œæˆ–è€…è¯´æ²¡æœ‰çŠ¶æ€ï¼ˆStateï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒã€‚<br><code>StatefulWidget</code>ä¹Ÿæ˜¯ä¸å¯å˜çš„ï¼Œä½†æ˜¯å®ƒå’Œä¸€ä¸ª<code>State</code>å¯¹è±¡å…³è”åœ¨ä¸€èµ·ï¼Œè¯¥å¯¹è±¡å…è®¸ä½ æ¯æ¬¡é€šè¿‡è°ƒç”¨<code>setState()</code>æ—¶ï¼Œä½¿ç”¨æ–°å€¼é‡å»ºè¿™ä¸ªwidgetï¼Œå½“UIå¯ä»¥åŠ¨æ€æ”¹å˜æ—¶ä½¿ç”¨<code>StatefulWidget</code>ã€‚</p></blockquote><h2 id="6-2">6</h2><blockquote><p>æŠ¥é”™ï¼Œä½†ä¸å½±å“å¸ƒå±€ï¼›ä¼šæŠ¥ç”Ÿå‘½å‘¨æœŸåˆ›å»ºé”™è¯¯ï¼›</p></blockquote><h2 id="7">7</h2><blockquote><p>ä½¿ç”¨<code>??=</code>æ¥æŒ‡å®šå½“å·¦è¾¹ä¸ºç©ºæ—¶æ‰æ‰§è¡Œç­‰äºï¼›</p><p>ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦åˆ¤æ–­æ˜¯å¦ç­‰äºç©ºæ‰æ‰§è¡Œèµ‹å€¼ï¼›</p><p>ä½¿ç”¨<code>if</code>åˆ¤æ–­è¯­å¥ï¼Œä¸ºç©ºæ—¶æ‰ç­‰äºï¼›</p></blockquote><h2 id="8">8</h2><blockquote><p><code>AA ?? â€œ999â€</code>è¡¨ç¤ºï¼šAAå¦‚æœä¸ºç©ºï¼Œåˆ™æ˜¾ç¤º999</p><p><code>AA ??= â€œ999â€</code>è¡¨ç¤ºï¼šAAå¦‚æœä¸ºç©ºï¼Œåˆ™ç»™å€¼è®¾ç½®ä¸º999</p><p>const çš„å€¼åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œfinal çš„å€¼åœ¨è¿â¾æ—¶ç¡®å®šã€‚</p></blockquote><h2 id="9-2">9</h2><blockquote><p>awaitçš„å‡ºç°ä¼šæŠŠawaitä¹‹å‰å’Œä¹‹åçš„ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œawaitå¹¶ä¸åƒå­—é¢æ„æ€æ‰€è¡¨ç¤ºçš„ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œå°±é˜»å¡äº†ï¼Œè€Œæ˜¯ç«‹åˆ»ç»“æŸå½“å‰å‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªFutureï¼Œå‡½æ•°å†…å‰©ä½™ä»£ç é€šè¿‡è°ƒåº¦å¼‚æ­¥æ‰§è¡Œã€‚</p><p>asyncæ˜¯å’Œawaitæ­é…ä½¿ç”¨çš„ï¼Œawaitåªåœ¨asyncå‡½æ•°ä¸­å‡ºç°ã€‚åœ¨async å‡½æ•°é‡Œå¯ä»¥æ²¡æœ‰awaitæˆ–è€…æœ‰å¤šä¸ªawaitã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String i = <span class="string">&quot;str&quot;</span>;</span><br><span class="line">String i1 = <span class="keyword">new</span> String(â€œstr<span class="string">&quot;);</span></span><br><span class="line"><span class="string">i== i1ï¼›</span></span><br><span class="line"><span class="string">String i2 = &quot;</span>str<span class="string">&quot;;</span></span><br><span class="line"><span class="string">i == i2               </span></span><br></pre></td></tr></table></figure><h2 id="10-2">10</h2><blockquote><p>~/</p><p>ä½¿ç”¨varæ¥å£°æ˜å˜é‡ï¼Œdartä¼šåœ¨ç¼–è¯‘é˜¶æ®µè‡ªåŠ¨æ¨å¯¼å‡ºç±»å‹ã€‚è€Œdynamicä¸åœ¨ç¼–è¯‘æœŸé—´åšç±»å‹æ£€æŸ¥è€Œæ˜¯åœ¨è¿è¡ŒæœŸé—´åšç±»å‹æ ¡éªŒã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flutterå¦‚ä½•ç›‘å¬é¼ æ ‡-desktop</title>
      <link href="/2022/02/01/flutter%E5%A6%82%E4%BD%95%E7%9B%91%E5%90%AC%E9%BC%A0%E6%A0%87-desktop/"/>
      <url>/2022/02/01/flutter%E5%A6%82%E4%BD%95%E7%9B%91%E5%90%AC%E9%BC%A0%E6%A0%87-desktop/</url>
      
        <content type="html"><![CDATA[<p>ä»¥å‰ä¸€ç›´ç”¨<code>InkWell</code>çš„<code>onHover</code>ç›‘å¬é¼ æ ‡ç§»å…¥ç§»å‡ºï¼Œä½†ä»Šå¤©çªå‘å¥‡æƒ³å‡†å¤‡ä¸€æ¢ç©¶ç«Ÿï¼Œæœ€åç¿»æºç å‘ç°äº†è¿™ä¸ªï¼š</p><p><code>ink_well.dart</code>1096è¡Œ</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MouseRegion(</span><br><span class="line">           cursor: effectiveMouseCursor,</span><br><span class="line">           onEnter: _handleMouseEnter,</span><br><span class="line">           onExit: _handleMouseExit,</span><br><span class="line">           child: Â·Â·Â·</span><br><span class="line">         ),</span><br></pre></td></tr></table></figure><h2 id="MouseRegionçš„å±æ€§å’Œè¯´æ˜">MouseRegionçš„å±æ€§å’Œè¯´æ˜</h2><blockquote><p>æ€»å…±6ä¸ªå±æ€§</p></blockquote><table><thead><tr><th>å­—æ®µ</th><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>onEnter</td><td>PointerEnterEventListener</td><td>é¼ æ ‡è¿›å…¥åŒºåŸŸæ—¶çš„å›è°ƒ</td></tr><tr><td>onExit</td><td>PointerHoverEventListener</td><td>é¼ æ ‡é€€å‡ºåŒºåŸŸæ—¶çš„å›è°ƒ</td></tr><tr><td>onHover</td><td>PointerExitEventListener</td><td>é¼ æ ‡åœ¨åŒºåŸŸå†…ç§»åŠ¨æ—¶çš„å›è°ƒ</td></tr><tr><td>cursor</td><td>MouseCursor</td><td>é¼ æ ‡æ‚¬åœåŒºåŸŸæ—¶çš„å…‰æ ‡æ ·å¼</td></tr><tr><td>opaque</td><td>bool</td><td>æ˜¯å¦é˜»æ­¢æ£€æµ‹é¼ æ ‡</td></tr><tr><td>child</td><td>Widget</td><td>å­ç»„ä»¶</td></tr></tbody></table><p>ç„¶åå°±ã€‚ã€‚ã€‚ã€‚äº†ç„¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> flutter-desktop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter-desktop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»˜åˆ¶:éœå¤«æ›¼æ ‘</title>
      <link href="/2022/02/01/%E7%BB%98%E5%88%B6-%E9%9C%8D%E5%A4%AB%E6%9B%BC%E6%A0%91/"/>
      <url>/2022/02/01/%E7%BB%98%E5%88%B6-%E9%9C%8D%E5%A4%AB%E6%9B%BC%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p><p><img src="0.gif" alt="æ¯ç§’15å¸§ï¼ˆæ‰€ä»¥çœ‹èµ·æ¥æœ‰ç‚¹å¡ï¼‰"></p><h1>æ€è·¯</h1><p>é‡‡ç”¨å±‚å å¸ƒå±€ï¼Œå°†è¿æ¥èŠ‚ç‚¹çš„æ ‘æï¼ˆæ ‘æå±‚ï¼‰å’ŒèŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹å±‚ï¼‰ä¾æ¬¡ç»˜åˆ¶åˆ°ç•Œé¢ä¸Šï¼Œæ³¨æ„è¿™ä¸ªé¡ºåºå¾ˆé‡è¦ï¼Œè¦ä¿è¯èŠ‚ç‚¹ä¼šé®ä½æ ‘æçš„çº¿æ®µè¿™æ ·å°±ä¸å¿…å†å¯¹æ ‘æçš„é•¿åº¦è¿›è¡Œé¢å¤–å¤„ç†ï¼ˆä»¥é¿å…æ ‘æé®ä½èŠ‚ç‚¹ä¸Šçš„æ•°å­—çš„æƒ…å†µï¼‰ã€‚</p><p>ç¼©æ”¾å¯ä»¥ä½¿ç”¨<code>InteractiveViewer</code>ç›´æ¥å®ç°ã€‚èŠ‚ç‚¹çš„å®šä½å’Œæ ‘æçº¿æ®µçš„èµ·å§‹ä¸ç»ˆæ­¢ä½ç½®ç”±æ‰€æœ‰èŠ‚ç‚¹çš„ä¿¡æ¯è¿›è¡Œè®¡ç®—å¾—å‡ºã€‚</p><h1>è§£å†³çš„é—®é¢˜</h1><p>åœ¨æ­¤æ¬¡ç»˜åˆ¶é‡åˆ°äº†å¦‚ä¸‹é—®é¢˜ï¼š</p><blockquote><p>é¢å¯¹ä¸€ä¸ªæ•°é‡ä¸å®šçš„æ•°æ®æºï¼ˆList/Mapï¼‰ï¼Œå¦‚ä½•è¿›è¡Œç»˜åˆ¶ï¼Ÿ</p><p>èŠ‚ç‚¹çš„å®šä½å’Œæ ‘æçº¿æ®µçš„èµ·å§‹ä¸ç»ˆæ­¢ä½ç½®è¦å¦‚ä½•ç¡®å®šï¼Ÿ</p><p>å¦‚ä½•åœ¨æ•°æ®é‡è¾ƒå¤§å¯¼è‡´ç•Œé¢æ— æ³•å®¹çº³æ—¶è¿›è¡Œç¼©æ”¾ï¼Ÿ</p></blockquote><p>ä¸‹é¢ä¾æ¬¡è§£å†³ï¼š</p><h2 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h2><blockquote><p>é¢å¯¹ä¸€ä¸ªæ•°é‡ä¸å®šçš„æ•°æ®æºï¼ˆList/Mapï¼‰ï¼Œå¦‚ä½•è¿›è¡Œç»˜åˆ¶ï¼Ÿ</p></blockquote><p>è¿™ä¸ªé—®é¢˜å…¶å®å¾ˆç®€å•ã€‚</p><p>é¦–å…ˆæŠŠæ¯ä¸ªèŠ‚ç‚¹å°è£…ä¸ºç»„ä»¶ï¼Œç„¶ååœ¨åˆå§‹åŒ–éœå¤«æ›¼æ ‘ç•Œé¢æ—¶å¯¹æ•°æ®æºè¿›è¡Œå¤„ç†ï¼Œå°†æ‰€æœ‰æ•°æ®è£…è½½åˆ°èŠ‚ç‚¹é‡Œï¼Œå½¢æˆä¸€ä¸ª<code>List&lt;Widget&gt;</code>ï¼Œä½œä¸ºèŠ‚ç‚¹å±‚çš„<code>stack</code>çš„<code>children</code>ï¼Œä½†è¿™å…¶å®ä¼šå¯¼è‡´å¦ä¸€ä¸ªé—®é¢˜ã€‚</p><p>ç”±äºèŠ‚ç‚¹å±‚æœ¬èº«å°±æ˜¯å¦ä¸€ä¸ªå±‚å å¸ƒå±€ï¼Œè€Œåˆå§‹çš„èŠ‚ç‚¹ç»„ä»¶ä¼šç›‘å¬é¼ æ ‡çš„ç§»å…¥ç§»å‡ºï¼Œç§»å…¥æ—¶å±•ç¤ºèŠ‚ç‚¹å¡ç‰‡ã€‚ç”±äºå±‚å å¸ƒå±€ä¼šä»¤åæ·»åŠ çš„<code>Widget</code>è¦†ç›–åœ¨å…ˆæ·»åŠ çš„<code>Widget</code>ä¸Šæ–¹ï¼Œæ‰€ä»¥å…ˆæ·»åŠ çš„èŠ‚ç‚¹çš„å¡ç‰‡åœ¨å‡ºç°æ—¶ä¼šè¢«åæ·»åŠ çš„èŠ‚ç‚¹é®ä½ã€‚</p><p>æˆ‘ä½¿ç”¨æš´åŠ›æ–¹æ¡ˆè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå³åœ¨é¼ æ ‡ç§»å…¥èŠ‚ç‚¹æ—¶æŠŠç›¸åº”å¡ç‰‡å¤©åŠ åˆ°èŠ‚ç‚¹å±‚çš„<code>Widget</code>çš„Listé‡Œï¼Œç”±äºæ˜¯æœ€åæ·»åŠ ï¼Œæ‰€ä»¥ä¼šè¢«æ˜¾ç¤ºåœ¨æœ€ä¸Šå±‚ï¼Œç„¶åé€šçŸ¥è¿›è¡Œé‡ç»˜ï¼ˆ<code>GetX</code>ï¼‰ï¼Œé¼ æ ‡ç§»å‡ºæ—¶ç›´æ¥å°†è¿™ä¸ªListè¿›è¡Œ<code>removeLast()</code>å³å¯ã€‚</p><h2 id="é—®é¢˜äºŒ">é—®é¢˜äºŒ</h2><blockquote><p>èŠ‚ç‚¹çš„å®šä½å’Œæ ‘æçº¿æ®µçš„èµ·å§‹ä¸ç»ˆæ­¢ä½ç½®è¦å¦‚ä½•ç¡®å®šï¼Ÿ</p></blockquote><p>è¿™å…¶å®å°±å˜æˆäº†äº†ä¸€ä¸ªæ•°å­¦é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨çš„æ•°æ®æœ‰ï¼š<strong>çª—å£å®½é«˜</strong><code>screenWidth</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> å’Œ<code>screenHeight</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span>ï¼Œ<strong>æ‰€æœ‰èŠ‚ç‚¹</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> çš„å±‚æ•°<code>level</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>l</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">l_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å’Œå±‚å†…ç¼–å· <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">n_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ï¼ŒèŠ‚ç‚¹é—´çš„çˆ¶å­å…³ç³»ï¼Œ<strong>èŠ‚ç‚¹å¤§å°</strong><code>nodeSize</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> ï¼Œ<strong>æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„ç›¸åº”ä¿¡æ¯</strong>ã€‚</p><p><img src="1.jpg" alt="ç¤ºæ„å›¾"></p><p><strong>ä»¥èŠ‚ç‚¹åœ†å¿ƒä¸ºåŸºå‡†ï¼ˆå…¶å®åœ¨ç»˜åˆ¶æ—¶æ˜¯ä»¥åœ†çš„å¤–æ¥æ­£æ–¹å½¢çš„å·¦ä¸Šè§’é¡¶ç‚¹ä¸ºåŸºå‡†ï¼Œè¿™æ ·åªæ˜¯æ–¹ä¾¿è¡¨ç¤ºï¼Œåç»­åœ¨ç¡®å®šèŠ‚ç‚¹ä½ç½®æ—¶åŠ ä¸Šä¸€ä¸ªå¸¸é‡è¿›è¡Œåç§»çº æ­£å³å¯ï¼‰ã€‚</strong></p><p>è®¾å±‚é—´é«˜åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ï¼Œæœ€åº•å±‚ç›¸é‚»å¶å­èŠ‚ç‚¹é—´æ°´å¹³è·ç¦»ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>ï¼Œåˆ™èŠ‚ç‚¹çš„ç«–ç›´æ–¹å‘åæ ‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mi>d</mi><mi>e</mi><mi>f</mi><mi>a</mi><mi>u</mi><mi>l</mi><mi>t</mi><mi>M</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi><mo>+</mo><mi>l</mi><mo>â‹…</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">x_i=defaultMargin+l \cdot M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">a</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10903em;">ltM</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">in</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œéš¾åº¦åœ¨äºç¡®å®šèŠ‚ç‚¹çš„æ°´å¹³åæ ‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p><p>å®šä¹‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">level</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> çš„å±‚çš„<strong>ä¸­è½´ç³»æ•°</strong>ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>l</mi></msub><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><msup><mn>2</mn><mi>l</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">c_l=\dfrac{2^l-1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.212108em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.526108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼ˆä¸å–æ•´ï¼‰ï¼Œåˆ™èŠ‚ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> çš„<strong>ä¸­è½´åç§»ç³»æ•°</strong>ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>i</mi></msub><mo>=</mo><msub><mi>n</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mi>c</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">c_i=n_i-c_l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œ</p><p>å®šä¹‰èŠ‚ç‚¹ä¸æœ€åº•å±‚å¶å­èŠ‚ç‚¹ä¹‹é—´çš„è½å·® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mi>h</mi><mo>âˆ’</mo><mi>l</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">d=h-l-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">{</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo stretchy="false">}</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">h=max\{level\}+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œåˆ™èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>çš„<strong>ä¸­è½´åç§»é‡</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><msub><mi>c</mi><mi>i</mi></msub><mo>â‹…</mo><mo stretchy="false">(</mo><mi>s</mi><mo>+</mo><mi>N</mi><mo stretchy="false">)</mo><mo>â‹…</mo><msup><mn>2</mn><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">C_i=c_i \cdot (s+N) \cdot 2^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.59445em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>w</mi><mn>2</mn></mfrac></mstyle><mo>+</mo><msub><mi>C</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i=\dfrac{w}{2}+C_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.7935600000000003em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>  ã€‚</p><p>æœ‰äº†èŠ‚ç‚¹åæ ‡çš„è®¡ç®—ç­–ç•¥ï¼Œæ ‘æçº¿æ®µèµ·å§‹ç‚¹åæ ‡è®¡ç®—ç­–ç•¥ä¸ä¹‹ç›¸åŒï¼Œéå†å»ºç«‹æ ‘æçš„ç­–ç•¥ä¸é‡å»ºéœå¤«æ›¼æ ‘çš„æ€æƒ³ç›¸åŒã€‚</p><h2 id="é—®é¢˜ä¸‰">é—®é¢˜ä¸‰</h2><blockquote><p>å¦‚ä½•åœ¨æ•°æ®é‡è¾ƒå¤§å¯¼è‡´ç•Œé¢æ— æ³•å®¹çº³æ—¶è¿›è¡Œç¼©æ”¾ï¼Ÿ</p></blockquote><p>è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ã€‚</p><p>ç”±äºå±‚å å¸ƒå±€åœ¨<code>InteractiveViewer</code>ä¸­æ— æ³•è¿›è¡Œæ­£å¸¸ç¼©å°ï¼Œæ‰€ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶ï¼Œå¦‚æœèŠ‚ç‚¹è¿‡å¤šåˆ™ä¼šè¶…å‡ºå±å¹•ç»˜åˆ¶ç•Œé™ï¼Œå¿…é¡»åœ¨åˆå§‹åŒ–æ—¶å®Œæˆä¸€æ¬¡å¯¹å›¾å±‚çš„ç¼©æ”¾ï¼Œç”±äºæ— æ³•ç›´æ¥ç”¨<code>Transform</code>ç»„ä»¶å¯¹å±‚å å¸ƒå±€è¿›è¡Œæ­£å¸¸ç¼©æ”¾ï¼Œæ‰€ä»¥å¿…é¡»åœ¨è®¡ç®—æ—¶åŠ å…¥ç¼©æ”¾ç³»æ•°ï¼Œå¯¹èŠ‚ç‚¹å¤§å°ã€æ ‘æç²—ç»†åŠç›¸åº”çš„åç§»é‡è¿›è¡Œç¼©æ”¾ï¼Œç³»æ•°ç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>å’Œæ»¡äºŒå‰æ ‘æƒ…å†µä¸‹æœ€åº•å±‚å¶å­æ‰€å çš„æ€»å®½åº¦çš„æ¯”å†³å®šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç»˜åˆ¶åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> ç»˜åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flutter-desktop-basic</title>
      <link href="/2022/01/29/flutter-desktop-basic/"/>
      <url>/2022/01/29/flutter-desktop-basic/</url>
      
        <content type="html"><![CDATA[<h1>ä¸€äº›å¿ƒå¾—ä¸ç»éªŒ</h1><p>æ··åˆå¼€å‘ï¼Œä¸æ¨è<code>ffi</code>ï¼Œå…¥é—¨éš¾åº¦å¤§ï¼Œå¯è¯»æ€§ä¸é«˜ï¼Œä½†æ˜¯æ•ˆç‡é«˜ï¼Œå¦‚æœä½¿ç”¨<code>methodChannel</code>ï¼Œå…¥é—¨åŸºæœ¬æ²¡æœ‰éš¾åº¦ï¼Œå¯è¯»æ€§è¾ƒé«˜ï¼Œæ•ˆç‡ä½äº<code>ffi</code>ã€‚</p><p>dartæ˜¯å€¼ä¼ é€’ï¼Œæ‰€ä»¥ä¸¤ç«¯é—´ä¼ é€’çš„å¤§æ¦‚ç‡æ˜¯å†…å­˜åœ°å€ã€‚</p><h2 id="æˆ‘çš„å¼€å‘æ–¹å¼">æˆ‘çš„å¼€å‘æ–¹å¼</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<strong>æ’ä»¶é¡¹ç›®</strong>ï¼Œè®°å¾—å‹¾é€‰windowså¹³å°ã€‚</p><ul><li>æ’ä»¶å†…çš„<code>example</code>é¡¹ç›®æ˜¯æˆ‘ä»¬çš„flutteré¡¹ç›®ï¼Œä¸»è¦ç”¨äºç»˜åˆ¶UIã€‚</li><li>æ’ä»¶é¡¹ç›®æ˜¯win-dartæ··åˆå¼€å‘çš„dartç«¯ä»£ç ï¼Œä¹Ÿå°±æ˜¯<code>methodChannel</code>çš„dartç«¯ã€‚</li><li>æ’ä»¶çš„<code>windows</code>æ–‡ä»¶å¤¹ä¸‹çš„cppæ–‡ä»¶æ˜¯win-dartæ··åˆå¼€å‘çš„winç«¯ä»£ç ï¼Œä¹Ÿå°±æ˜¯<code>methodChannel</code>çš„winç«¯ã€‚</li><li>æ’ä»¶çš„<code>windows</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>include</code>æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®é€»è¾‘å±‚ä»£ç ï¼Œå¯ä»¥æ”¾ç½®cppä»£ç ä¸å¤´æ–‡ä»¶ã€‚</li></ul><p>ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨UIå±‚è°ƒç”¨é€»è¾‘å±‚ã€‚åŒæ—¶<code>windows</code>æ–‡ä»¶å¤¹å¯ä»¥ç›´æ¥ä½¿ç”¨Clionæ‰“å¼€ä¸ºcppé¡¹ç›®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> flutter-desktop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter&amp;c++æ··åˆå¼€å‘ </tag>
            
            <tag> flutter-desktop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿åŸ¹è®­:winter-flutter:ç½‘ç»œã€åŒæ­¥ä¸å¼‚æ­¥</title>
      <link href="/2022/01/26/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-winter-flutter-%E7%BD%91%E7%BB%9C%E3%80%81%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5/"/>
      <url>/2022/01/26/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-winter-flutter-%E7%BD%91%E7%BB%9C%E3%80%81%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h1>Dio:</h1><h2 id="å‰è¨€">å‰è¨€</h2><p>çƒ­çŸ¥è¯†ï¼šDioæ˜¯å›½äººå¼€å‘çš„ç½‘ç»œè¯·æ±‚åº“ï¼Œæ‰€ä»¥ä¸­æ–‡æ–‡æ¡£å¾ˆå®Œå–„ã€‚</p><p>åˆï¼šç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸º<code>dio: ^4.0.5-beta1</code>ï¼Œåœ¨å…¶githubçš„developåˆ†æ”¯ï¼Œä¸è¿‡å¹¶ä¸å»ºè®®ä½¿ç”¨ã€‚ä»¥ä¸‹åŸºäºmasterçš„<code>  dio: ^4.0.3  /  dio: ^4.0.4</code>å¤§è‡´çœ‹äº†ä¸€ä¸‹æ”¹å˜å¹¶ä¸å¤§ã€‚åŸºæœ¬ç›´æ¥æ¬è¿githubæ–‡æ¡£ï¼Œå…å¾—æœ‰åŒå­¦ä¸Šä¸å»githubã€‚</p><p>æ€»è€Œè¨€ä¹‹è·ŸokhttpæŒºåƒçš„ã€‚</p><h2 id="æ·»åŠ ä¾èµ–">æ·»åŠ ä¾èµ–</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  dio: ^<span class="number">4.0</span><span class="number">.3</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ æ˜¯dio 3.x ç”¨æˆ·ï¼Œæƒ³äº†è§£4.0çš„å˜æ›´ï¼Œè¯·å‚è€ƒ <a href="https://github.com/flutterchina/dio/blob/master/migration_to_4.x.md">4.xæ›´æ–°åˆ—è¡¨</a>!</p></blockquote><h2 id="ä¸€ä¸ªæç®€çš„ç¤ºä¾‹">ä¸€ä¸ªæç®€çš„ç¤ºä¾‹</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">void</span> getHttp() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> Dio().<span class="keyword">get</span>(<span class="string">&#x27;http://www.google.com&#x27;</span>);</span><br><span class="line">    <span class="built_in">print</span>(response);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹">*ç¤ºä¾‹</h2><p><strong>å‘èµ·ä¸€ä¸ª <code>GET</code> è¯·æ±‚ :</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Response response;</span><br><span class="line"><span class="keyword">var</span> dio = Dio();</span><br><span class="line">response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;/test?id=12&amp;name=wendu&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(response.data.toString());</span><br><span class="line"><span class="comment">// Optionally the request above could also be done as</span></span><br><span class="line">response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;/test&#x27;</span>, queryParameters: &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wendu&#x27;</span>&#125;);</span><br><span class="line"><span class="built_in">print</span>(response.data.toString());</span><br></pre></td></tr></table></figure><p><strong>å‘èµ·ä¸€ä¸ª <code>POST</code> è¯·æ±‚:</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="keyword">await</span> dio.post(<span class="string">&#x27;/test&#x27;</span>, data: &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wendu&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure><p>å‘èµ·å¤šä¸ªå¹¶å‘è¯·æ±‚:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="keyword">await</span> Future.wait([dio.post(<span class="string">&#x27;/info&#x27;</span>), dio.<span class="keyword">get</span>(<span class="string">&#x27;/token&#x27;</span>)]);</span><br></pre></td></tr></table></figure><p>ä¸‹è½½æ–‡ä»¶:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="keyword">await</span> dio.download(<span class="string">&#x27;https://www.google.com/&#x27;</span>, <span class="string">&#x27;./xx.html&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ä»¥æµçš„æ–¹å¼æ¥æ”¶å“åº”æ•°æ®ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response&lt;ResponseBody&gt; rs;</span><br><span class="line">rs = <span class="keyword">await</span> Dio().<span class="keyword">get</span>&lt;ResponseBody&gt;(url,</span><br><span class="line">  options: Options(responseType: ResponseType.stream),  <span class="comment">//è®¾ç½®æ¥æ”¶ç±»å‹ä¸ºstream</span></span><br><span class="line">);</span><br><span class="line"><span class="built_in">print</span>(rs.data.stream); <span class="comment">//å“åº”æµ</span></span><br></pre></td></tr></table></figure><p>ä»¥äºŒè¿›åˆ¶æ•°ç»„çš„æ–¹å¼æ¥æ”¶å“åº”æ•°æ®ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response&lt;<span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;&gt; rs </span><br><span class="line">rs = <span class="keyword">await</span> Dio().<span class="keyword">get</span>&lt;<span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt;&gt;(url,</span><br><span class="line"> options: Options(responseType: ResponseType.bytes), <span class="comment">//è®¾ç½®æ¥æ”¶ç±»å‹ä¸ºäºŒè¿›åˆ¶æ•°ç»„</span></span><br><span class="line">);</span><br><span class="line"><span class="built_in">print</span>(rs.data); <span class="comment">// äºŒè¿›åˆ¶æ•°ç»„</span></span><br></pre></td></tr></table></figure><p><strong>å‘é€ FormData:</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = FormData.fromMap(&#123;</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wendux&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> dio.post(<span class="string">&#x27;/info&#x27;</span>, data: formData);</span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡FormDataä¸Šä¼ å¤šä¸ªæ–‡ä»¶:</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = FormData.fromMap(&#123;</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wendux&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="string">&#x27;file&#x27;</span>: <span class="keyword">await</span> MultipartFile.fromFile(<span class="string">&#x27;./text.txt&#x27;</span>, filename: <span class="string">&#x27;upload.txt&#x27;</span>),</span><br><span class="line">  <span class="string">&#x27;files&#x27;</span>: [</span><br><span class="line">    <span class="keyword">await</span> MultipartFile.fromFile(<span class="string">&#x27;./text1.txt&#x27;</span>, filename: <span class="string">&#x27;text1.txt&#x27;</span>),</span><br><span class="line">    <span class="keyword">await</span> MultipartFile.fromFile(<span class="string">&#x27;./text2.txt&#x27;</span>, filename: <span class="string">&#x27;text2.txt&#x27;</span>),</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> dio.post(<span class="string">&#x27;/info&#x27;</span>, data: formData);</span><br></pre></td></tr></table></figure><p>ç›‘å¬å‘é€(ä¸Šä¼ )æ•°æ®è¿›åº¦:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="keyword">await</span> dio.post(</span><br><span class="line">  <span class="string">&#x27;http://www.dtworkroom.com/doris/1/2.0.0/test&#x27;</span>,</span><br><span class="line">  data: &#123;<span class="string">&#x27;aa&#x27;</span>: <span class="string">&#x27;bb&#x27;</span> * <span class="number">22</span>&#125;,</span><br><span class="line">  onSendProgress: (<span class="built_in">int</span> sent, <span class="built_in">int</span> total) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$sent</span> <span class="subst">$total</span>&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä»¥æµçš„å½¢å¼æäº¤äºŒè¿›åˆ¶æ•°æ®ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; postData = &lt;<span class="built_in">int</span>&gt;[...];</span><br><span class="line"><span class="keyword">await</span> dio.post(</span><br><span class="line">  url,</span><br><span class="line">  data: Stream.fromIterable(postData.map((e) =&gt; [e])), <span class="comment">//åˆ›å»ºä¸€ä¸ªStream&lt;List&lt;int&gt;&gt;</span></span><br><span class="line">  options: Options(</span><br><span class="line">    headers: &#123;</span><br><span class="line">      Headers.contentLengthHeader: postData.length, <span class="comment">// è®¾ç½®content-length</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; postData = &lt;<span class="built_in">int</span>&gt;[...];</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> dio.post(</span><br><span class="line">  url,</span><br><span class="line">  data: Stream.fromIterable(postData.map((e) =&gt; [e])), <span class="comment">//åˆ›å»ºä¸€ä¸ªStream&lt;List&lt;int&gt;&gt;</span></span><br><span class="line">  options: Options(</span><br><span class="line">    headers: &#123;</span><br><span class="line">      Headers.contentLengthHeader: postData.length, <span class="comment">// è®¾ç½®content-length</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœè¦ç›‘å¬æäº¤è¿›åº¦ï¼Œåˆ™å¿…é¡»è®¾ç½®content-lengthï¼Œå¦åˆ™æ˜¯å¯é€‰çš„ã€‚</p><h3 id="ç¤ºä¾‹ç›®å½•">ç¤ºä¾‹ç›®å½•</h3><p>ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹dioçš„<a href="https://github.com/flutterchina/dio/tree/master/example">å…¨éƒ¨ç¤ºä¾‹</a>.</p><h2 id="Dio-APIs">Dio APIs</h2><h3 id="åˆ›å»ºä¸€ä¸ªDioå®ä¾‹ï¼Œå¹¶é…ç½®å®ƒ">åˆ›å»ºä¸€ä¸ªDioå®ä¾‹ï¼Œå¹¶é…ç½®å®ƒ</h3><blockquote><p>å»ºè®®åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Dioå•ä¾‹ï¼Œè¿™æ ·ä¾¿å¯å¯¹åŒä¸€ä¸ªdioå®ä¾‹å‘èµ·çš„æ‰€æœ‰è¯·æ±‚è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„é…ç½®ï¼Œæ¯”å¦‚è®¾ç½®å…¬å…±headerã€è¯·æ±‚åŸºåœ°å€ã€è¶…æ—¶æ—¶é—´ç­‰ï¼›è¿™é‡Œæœ‰ä¸€ä¸ªåœ¨<a href="https://github.com/flutterchina/dio/tree/master/example/flutter_example">Flutterå·¥ç¨‹ä¸­ä½¿ç”¨Dioå•ä¾‹</a>ï¼ˆå®šä¹‰ä¸ºtop levelå˜é‡ï¼‰çš„ç¤ºä¾‹ä¾›å¼€å‘è€…å‚è€ƒã€‚</p></blockquote><p>ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½®æˆ–ä¼ é€’ä¸€ä¸ªå¯é€‰ <code>BaseOptions</code>å‚æ•°æ¥åˆ›å»ºä¸€ä¸ªDioå®ä¾‹ :</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dio = Dio(); <span class="comment">// with default Options</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Set default configs</span></span><br><span class="line">dio.options.baseUrl = <span class="string">&#x27;https://www.xx.com/api&#x27;</span>;</span><br><span class="line">dio.options.connectTimeout = <span class="number">5000</span>; <span class="comment">//5s</span></span><br><span class="line">dio.options.receiveTimeout = <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or new Dio with a BaseOptions instance.</span></span><br><span class="line"><span class="keyword">var</span> options = BaseOptions(</span><br><span class="line">  baseUrl: <span class="string">&#x27;https://www.xx.com/api&#x27;</span>,</span><br><span class="line">  connectTimeout: <span class="number">5000</span>,</span><br><span class="line">  receiveTimeout: <span class="number">3000</span>,</span><br><span class="line">);</span><br><span class="line">Dio dio = Dio(options);</span><br></pre></td></tr></table></figure><p>Dioå®ä¾‹çš„æ ¸å¿ƒAPIæ˜¯ :</p><p><strong>Future request(String path, {data,Map queryParameters, Options options,CancelToken cancelToken, ProgressCallback onSendProgress, ProgressCallback onReceiveProgress)</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response = <span class="keyword">await</span> dio.request(</span><br><span class="line">  <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">  data: &#123;<span class="string">&#x27;id&#x27;</span>:<span class="number">12</span>,<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;xx&#x27;</span>&#125;,</span><br><span class="line">  options: Options(method:<span class="string">&#x27;GET&#x27;</span>),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚æ–¹æ³•åˆ«å">è¯·æ±‚æ–¹æ³•åˆ«å</h3><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒDioæä¾›äº†ä¸€äº›å…¶å®ƒçš„Restful API, è¿™äº›APIéƒ½æ˜¯<code>request</code>çš„åˆ«åã€‚</p><p><strong>Future get(â€¦)</strong></p><p><strong>Future post(â€¦)</strong></p><p><strong>Future put(â€¦)</strong></p><p><strong>Future delete(â€¦)</strong></p><p><strong>Future head(â€¦)</strong></p><p><strong>Future put(â€¦)</strong></p><p><strong>Future path(â€¦)</strong></p><p><strong>Future download(â€¦)</strong></p><p><strong>Future fetch(RequestOptions)</strong></p><h2 id="è¯·æ±‚é…ç½®">*è¯·æ±‚é…ç½®</h2><p><code>BaseOptions</code>æè¿°çš„æ˜¯Dioå®ä¾‹å‘èµ·ç½‘ç»œè¯·æ±‚çš„çš„å…¬å…±é…ç½®ï¼Œè€Œ<code>Options</code>ç±»æè¿°äº†æ¯ä¸€ä¸ªHttpè¯·æ±‚çš„é…ç½®ä¿¡æ¯ï¼Œæ¯ä¸€æ¬¡è¯·æ±‚éƒ½å¯ä»¥å•ç‹¬é…ç½®ï¼Œå•æ¬¡è¯·æ±‚çš„<code>Options</code>ä¸­çš„é…ç½®ä¿¡æ¯å¯ä»¥è¦†ç›–<code>BaseOptions</code>ä¸­çš„é…ç½®ï¼Œä¸‹é¢æ˜¯<code>BaseOptions</code>çš„é…ç½®é¡¹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Http method.</span></span></span><br><span class="line">  <span class="built_in">String</span> method;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¯·æ±‚åŸºåœ°å€,å¯ä»¥åŒ…å«å­è·¯å¾„ï¼Œå¦‚: &quot;https://www.google.com/api/&quot;.</span></span></span><br><span class="line">  <span class="built_in">String</span> baseUrl;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Httpè¯·æ±‚å¤´.</span></span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; headers;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¿æ¥æœåŠ¡å™¨è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’.</span></span></span><br><span class="line">  <span class="built_in">int</span> connectTimeout;</span><br><span class="line">  <span class="comment">/// <span class="markdown">2.xä¸­ä¸ºæ¥æ”¶æ•°æ®çš„æœ€é•¿æ—¶é™.</span></span></span><br><span class="line">  <span class="built_in">int</span> receiveTimeout;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¯·æ±‚è·¯å¾„ï¼Œå¦‚æœ <span class="code">`path`</span> ä»¥ &quot;http(s)&quot;å¼€å§‹, åˆ™ <span class="code">`baseURL`</span> ä¼šè¢«å¿½ç•¥ï¼› å¦åˆ™,</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å°†ä¼šå’ŒbaseUrlæ‹¼æ¥å‡ºå®Œæ•´çš„çš„url.</span></span></span><br><span class="line">  <span class="built_in">String</span> path = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">è¯·æ±‚çš„Content-Typeï¼Œé»˜è®¤å€¼æ˜¯&quot;application/json; charset=utf-8&quot;.</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœæ‚¨æƒ³ä»¥&quot;application/x-www-form-urlencoded&quot;æ ¼å¼ç¼–ç è¯·æ±‚æ•°æ®,</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¯ä»¥è®¾ç½®æ­¤é€‰é¡¹ä¸º <span class="code">`Headers.formUrlEncodedContentType`</span>,  è¿™æ ·[Dio]</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å°±ä¼šè‡ªåŠ¨ç¼–ç è¯·æ±‚ä½“.</span></span></span><br><span class="line">  <span class="built_in">String</span> contentType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">[responseType] è¡¨ç¤ºæœŸæœ›ä»¥é‚£ç§æ ¼å¼(æ–¹å¼)æ¥å—å“åº”æ•°æ®ã€‚</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">ç›®å‰ [ResponseType] æ¥å—ä¸‰ç§ç±»å‹ <span class="code">`JSON`</span>, <span class="code">`STREAM`</span>, <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">é»˜è®¤å€¼æ˜¯ <span class="code">`JSON`</span>, å½“å“åº”å¤´ä¸­content-typeä¸º&quot;application/json&quot;æ—¶ï¼Œdio ä¼šè‡ªåŠ¨å°†å“åº”å†…å®¹è½¬åŒ–ä¸ºjsonå¯¹è±¡ã€‚</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœæƒ³ä»¥äºŒè¿›åˆ¶æ–¹å¼æ¥å—å“åº”æ•°æ®ï¼Œå¦‚ä¸‹è½½ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <span class="code">`STREAM`</span>.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">å¦‚æœæƒ³ä»¥æ–‡æœ¬(å­—ç¬¦ä¸²)æ ¼å¼æ¥æ”¶å“åº”æ•°æ®ï¼Œè¯·ä½¿ç”¨ <span class="code">`PLAIN`</span>.</span></span></span><br><span class="line">  ResponseType responseType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown"><span class="code">`validateStatus`</span> å†³å®šhttpå“åº”çŠ¶æ€ç æ˜¯å¦è¢«dioè§†ä¸ºè¯·æ±‚æˆåŠŸï¼Œ è¿”å›<span class="code">`validateStatus`</span></span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown"> è¿”å›<span class="code">`true`</span> , è¯·æ±‚ç»“æœå°±ä¼šæŒ‰æˆåŠŸå¤„ç†ï¼Œå¦åˆ™ä¼šæŒ‰å¤±è´¥å¤„ç†.</span></span></span><br><span class="line">  ValidateStatus validateStatus;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">ç”¨æˆ·è‡ªå®šä¹‰å­—æ®µï¼Œå¯ä»¥åœ¨ [Interceptor]ã€[Transformer] å’Œ [Response] ä¸­å–åˆ°.</span></span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; extra;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Common query parameters</span></span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span> <span class="comment">/*String|Iterable&lt;String&gt;*/</span> &gt; queryParameters;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/// <span class="markdown">è¯·æ±‚æ•°æ®ä¸­æ•°ç»„çš„ç¼–ç çš„æ–¹å¼ï¼Œå…·ä½“å¯ä»¥å‚è€ƒCollectionFormatçš„å®šä¹‰</span></span></span><br><span class="line">  <span class="keyword">late</span> CollectionFormat collectionFormat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªå®Œæˆçš„<a href="https://github.com/flutterchina/dio/blob/master/example/options.dart">ç¤ºä¾‹</a>.</p><h2 id="å“åº”æ•°æ®">*å“åº”æ•°æ®</h2><p>å½“è¯·æ±‚æˆåŠŸæ—¶ä¼šè¿”å›ä¸€ä¸ªResponseå¯¹è±¡ï¼Œå®ƒåŒ…å«å¦‚ä¸‹å­—æ®µï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">å“åº”æ•°æ®ï¼Œå¯èƒ½å·²ç»è¢«è½¬æ¢äº†ç±»å‹, è¯¦æƒ…è¯·å‚è€ƒOptionsä¸­çš„[ResponseType].</span></span></span><br><span class="line">  T data;</span><br><span class="line">  <span class="comment">/// <span class="markdown">å“åº”å¤´</span></span></span><br><span class="line">  Headers headers;</span><br><span class="line">  <span class="comment">/// <span class="markdown">æœ¬æ¬¡è¯·æ±‚ä¿¡æ¯</span></span></span><br><span class="line">  Options request;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Http status code.</span></span></span><br><span class="line">  <span class="built_in">int?</span> statusCode;</span><br><span class="line">  <span class="built_in">String?</span> statusMessage;</span><br><span class="line">  <span class="comment">/// <span class="markdown">æ˜¯å¦é‡å®šå‘(Flutter Webä¸å¯ç”¨)</span></span></span><br><span class="line">  <span class="built_in">bool?</span> isRedirect;</span><br><span class="line">  <span class="comment">/// <span class="markdown">é‡å®šå‘ä¿¡æ¯(Flutter Webä¸å¯ç”¨)</span></span></span><br><span class="line">  <span class="built_in">List</span>&lt;RedirectInfo&gt; redirects ;</span><br><span class="line">  <span class="comment">/// <span class="markdown">çœŸæ­£è¯·æ±‚çš„url(é‡å®šå‘æœ€ç»ˆçš„uri)</span></span></span><br><span class="line">  <span class="built_in">Uri</span> realUri;</span><br><span class="line">  <span class="comment">/// <span class="markdown">å“åº”å¯¹è±¡çš„è‡ªå®šä¹‰å­—æ®µï¼ˆå¯ä»¥åœ¨æ‹¦æˆªå™¨ä¸­è®¾ç½®å®ƒï¼‰ï¼Œè°ƒç”¨æ–¹å¯ä»¥åœ¨<span class="code">`then`</span>ä¸­è·å–.</span></span></span><br><span class="line">  <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; extra;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹å¦‚ä¸‹:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;https://www.google.com&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(response.data);</span><br><span class="line"><span class="built_in">print</span>(response.headers);</span><br><span class="line"><span class="built_in">print</span>(response.requestOptions);</span><br><span class="line"><span class="built_in">print</span>(response.statusCode);</span><br></pre></td></tr></table></figure><h2 id="æ‹¦æˆªå™¨">æ‹¦æˆªå™¨</h2><p>æ¯ä¸ª Dio å®ä¾‹éƒ½å¯ä»¥æ·»åŠ ä»»æ„å¤šä¸ªæ‹¦æˆªå™¨ï¼Œä»–ä»¬ç»„æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‹¦æˆªå™¨é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºæ˜¯FIFOã€‚é€šè¿‡æ‹¦æˆªå™¨ä½ å¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰ã€å“åº”ä¹‹åå’Œå‘ç”Ÿå¼‚å¸¸æ—¶(ä½†è¿˜æ²¡æœ‰è¢« <code>then</code> æˆ– <code>catchError</code>å¤„ç†)åšä¸€äº›ç»Ÿä¸€çš„é¢„å¤„ç†æ“ä½œã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptors.add(InterceptorsWrapper(</span><br><span class="line">    onRequest:(options, handler)&#123;</span><br><span class="line">     <span class="comment">// Do something before request is sent</span></span><br><span class="line">     <span class="keyword">return</span> handler.next(options); <span class="comment">//continue</span></span><br><span class="line">     <span class="comment">// å¦‚æœä½ æƒ³å®Œæˆè¯·æ±‚å¹¶è¿”å›ä¸€äº›è‡ªå®šä¹‰æ•°æ®ï¼Œä½ å¯ä»¥resolveä¸€ä¸ªResponseå¯¹è±¡ `handler.resolve(response)`ã€‚</span></span><br><span class="line">     <span class="comment">// è¿™æ ·è¯·æ±‚å°†ä¼šè¢«ç»ˆæ­¢ï¼Œä¸Šå±‚thenä¼šè¢«è°ƒç”¨ï¼Œthenä¸­è¿”å›çš„æ•°æ®å°†æ˜¯ä½ çš„è‡ªå®šä¹‰response.</span></span><br><span class="line">     <span class="comment">//</span></span><br><span class="line">     <span class="comment">// å¦‚æœä½ æƒ³ç»ˆæ­¢è¯·æ±‚å¹¶è§¦å‘ä¸€ä¸ªé”™è¯¯,ä½ å¯ä»¥è¿”å›ä¸€ä¸ª`DioError`å¯¹è±¡,å¦‚`handler.reject(error)`ï¼Œ</span></span><br><span class="line">     <span class="comment">// è¿™æ ·è¯·æ±‚å°†è¢«ä¸­æ­¢å¹¶è§¦å‘å¼‚å¸¸ï¼Œä¸Šå±‚catchErrorä¼šè¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    &#125;,</span><br><span class="line">    onResponse:(response,handler) &#123;</span><br><span class="line">     <span class="comment">// Do something with response data</span></span><br><span class="line">     <span class="keyword">return</span> handler.next(response); <span class="comment">// continue</span></span><br><span class="line">     <span class="comment">// å¦‚æœä½ æƒ³ç»ˆæ­¢è¯·æ±‚å¹¶è§¦å‘ä¸€ä¸ªé”™è¯¯,ä½ å¯ä»¥ reject ä¸€ä¸ª`DioError`å¯¹è±¡,å¦‚`handler.reject(error)`ï¼Œ</span></span><br><span class="line">     <span class="comment">// è¿™æ ·è¯·æ±‚å°†è¢«ä¸­æ­¢å¹¶è§¦å‘å¼‚å¸¸ï¼Œä¸Šå±‚catchErrorä¼šè¢«è°ƒç”¨ã€‚</span></span><br><span class="line">    &#125;,</span><br><span class="line">    onError: (DioError e, handler) &#123;</span><br><span class="line">     <span class="comment">// Do something with response error</span></span><br><span class="line">     <span class="keyword">return</span>  handler.next(e);<span class="comment">//continue</span></span><br><span class="line">     <span class="comment">// å¦‚æœä½ æƒ³å®Œæˆè¯·æ±‚å¹¶è¿”å›ä¸€äº›è‡ªå®šä¹‰æ•°æ®ï¼Œå¯ä»¥resolve ä¸€ä¸ª`Response`,å¦‚`handler.resolve(response)`ã€‚</span></span><br><span class="line">     <span class="comment">// è¿™æ ·è¯·æ±‚å°†ä¼šè¢«ç»ˆæ­¢ï¼Œä¸Šå±‚thenä¼šè¢«è°ƒç”¨ï¼Œthenä¸­è¿”å›çš„æ•°æ®å°†æ˜¯ä½ çš„è‡ªå®šä¹‰response.</span></span><br><span class="line">    &#125;</span><br><span class="line">));</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æ‹¦æˆªå™¨ç¤ºä¾‹:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomInterceptors</span> <span class="keyword">extends</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onRequest(RequestOptions options, RequestInterceptorHandler handler) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;REQUEST[<span class="subst">$&#123;options.method&#125;</span>] =&gt; PATH: <span class="subst">$&#123;options.path&#125;</span>&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onRequest(options, handler);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future onResponse(Response response, ResponseInterceptorHandler handler) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;RESPONSE[<span class="subst">$&#123;response.statusCode&#125;</span>] =&gt; PATH: <span class="subst">$&#123;response.requestOptions?.path&#125;</span>&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onResponse(response, handler);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Future onError(DioError err, ErrorInterceptorHandler handler) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ERROR[<span class="subst">$&#123;err.response?.statusCode&#125;</span>] =&gt; PATH: <span class="subst">$&#123;err.requestOptions?.path&#125;</span>&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onError(err, handler);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®Œæˆå’Œç»ˆæ­¢è¯·æ±‚-å“åº”">å®Œæˆå’Œç»ˆæ­¢è¯·æ±‚/å“åº”</h3><p>åœ¨æ‰€æœ‰æ‹¦æˆªå™¨ä¸­ï¼Œä½ éƒ½å¯ä»¥æ”¹å˜è¯·æ±‚æ‰§è¡Œæµï¼Œ å¦‚æœä½ æƒ³å®Œæˆè¯·æ±‚/å“åº”å¹¶è¿”å›è‡ªå®šä¹‰æ•°æ®ï¼Œä½ å¯ä»¥resolveä¸€ä¸ª <code>Response</code> å¯¹è±¡æˆ–è¿”å› <code>handler.resolve(data)</code>çš„ç»“æœã€‚ å¦‚æœä½ æƒ³ç»ˆæ­¢(è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œä¸Šå±‚<code>catchError</code>ä¼šè¢«è°ƒç”¨)ä¸€ä¸ªè¯·æ±‚/å“åº”ï¼Œé‚£ä¹ˆå¯ä»¥rejectä¸€ä¸ª<code>DioError</code> å¯¹è±¡æˆ–è¿”å› <code>handler.reject(errMsg)</code> çš„ç»“æœ.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptors.add(InterceptorsWrapper(</span><br><span class="line">  onRequest:(options, handler) &#123;</span><br><span class="line">   <span class="keyword">return</span> handler.resolve(Response(requestOptions:options,data:<span class="string">&#x27;fake data&#x27;</span>));</span><br><span class="line">  &#125;,</span><br><span class="line">));</span><br><span class="line">Response response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;/test&#x27;</span>);</span><br><span class="line"><span class="built_in">print</span>(response.data);<span class="comment">//&#x27;fake data&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="QueuedInterceptor">QueuedInterceptor</h3><p>å¦‚æœåŒæ—¶å‘èµ·å¤šä¸ªç½‘ç»œè¯·æ±‚ï¼Œåˆ™å®ƒä»¬æ˜¯å¯ä»¥åŒæ—¶è¿›å…¥<code>Interceptor</code> çš„ï¼ˆå¹¶è¡Œçš„ï¼‰ï¼Œè€Œ <code>QueuedInterceptor</code> æä¾›äº†ä¸€ç§ä¸²è¡Œæœºåˆ¶ï¼šå®ƒå¯ä»¥ä¿è¯è¯·æ±‚è¿›å…¥æ‹¦æˆªå™¨æ—¶æ˜¯ä¸²è¡Œçš„ï¼ˆå‰é¢çš„æ‰§è¡Œå®Œååé¢çš„æ‰ä¼šè¿›å…¥æ‹¦æˆªå™¨ï¼‰ã€‚</p><h4 id="ä¾‹å­">ä¾‹å­</h4><p>å‡è®¾è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼šå‡ºäºå®‰å…¨åŸå› ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ‰€æœ‰çš„è¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªcsrfTokenï¼Œå¦‚æœcsrfTokenä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å…ˆå»è¯·æ±‚csrfTokenï¼Œè·å–åˆ°csrfTokenåå†é‡è¯•ã€‚å‡è®¾åˆšå¼€å§‹çš„æ—¶å€™ csrfToken ä¸º null ï¼Œå¦‚æœå…è®¸è¯·æ±‚å¹¶å‘ï¼Œåˆ™è¿™äº›å¹¶å‘è¯·æ±‚å¹¶è¡Œè¿›å…¥æ‹¦æˆªå™¨æ—¶ csrfToken éƒ½ä¸ºnullï¼Œæ‰€ä»¥å®ƒä»¬éƒ½éœ€è¦å»è¯·æ±‚ csrfTokenï¼Œè¿™ä¼šå¯¼è‡´ csrfToken è¢«è¯·æ±‚å¤šæ¬¡ï¼Œä¸ºäº†é¿å…ä¸å¿…è¦çš„é‡å¤è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ QueuedInterceptorï¼Œè¿™æ ·åªéœ€è¦ç¬¬ä¸€ä¸ªè¯·æ±‚è¯·æ±‚ä¸€æ¬¡å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptors.add(QueuedInterceptorsWrapper(</span><br><span class="line">  onRequest: (options, handler) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;send requestï¼špath:<span class="subst">$&#123;options.path&#125;</span>ï¼ŒbaseURL:<span class="subst">$&#123;options.baseUrl&#125;</span>&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (csrfToken == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;no tokenï¼Œrequest token firstly...&#x27;</span>);</span><br><span class="line">      tokenDio.<span class="keyword">get</span>(<span class="string">&#x27;/token&#x27;</span>).then((d) &#123;</span><br><span class="line">        options.headers[<span class="string">&#x27;csrfToken&#x27;</span>] = csrfToken = d.data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;token&#x27;</span>];</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;request token succeed, value: &#x27;</span> + d.data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;token&#x27;</span>]);</span><br><span class="line">        <span class="built_in">print</span>( <span class="string">&#x27;continue to perform requestï¼špath:<span class="subst">$&#123;options.path&#125;</span>ï¼ŒbaseURL:<span class="subst">$&#123;options.path&#125;</span>&#x27;</span>);</span><br><span class="line">        handler.next(options);</span><br><span class="line">      &#125;).catchError((error, stackTrace) &#123;</span><br><span class="line">        handler.reject(error, <span class="keyword">true</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      options.headers[<span class="string">&#x27;csrfToken&#x27;</span>] = csrfToken;</span><br><span class="line">      handler.next(options);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">));</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ç¤ºä¾‹ä»£ç è¯·ç‚¹å‡» <a href="https://github.com/flutterchina/dio/blob/develop/example/queued_interceptor_crsftoken.dart">è¿™é‡Œ</a>.</p><h3 id="æ—¥å¿—">æ—¥å¿—</h3><p>æˆ‘ä»¬å¯ä»¥æ·»åŠ  <code>LogInterceptor</code> æ‹¦æˆªå™¨æ¥è‡ªåŠ¨æ‰“å°è¯·æ±‚ã€å“åº”æ—¥å¿—, å¦‚:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dio.interceptors.add(LogInterceptor(responseBody: <span class="keyword">false</span>)); <span class="comment">//å¼€å¯è¯·æ±‚æ—¥å¿—</span></span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºæ‹¦æˆªå™¨é˜Ÿåˆ—çš„æ‰§è¡Œé¡ºåºæ˜¯FIFOï¼Œå¦‚æœæŠŠlogæ‹¦æˆªå™¨æ·»åŠ åˆ°äº†æœ€å‰é¢ï¼Œåˆ™åé¢æ‹¦æˆªå™¨å¯¹<code>options</code>çš„æ›´æ”¹å°±ä¸ä¼šè¢«æ‰“å°ï¼ˆä½†ä¾ç„¶ä¼šç”Ÿæ•ˆï¼‰ï¼Œ æ‰€ä»¥å»ºè®®æŠŠlogæ‹¦æˆªæ·»åŠ åˆ°é˜Ÿå°¾ã€‚</p></blockquote><h3 id="Cookieç®¡ç†">Cookieç®¡ç†</h3><p><a href="https://github.com/flutterchina/dio/tree/master/plugins/cookie_manager">dio_cookie_manager</a> åŒ…æ˜¯Dioçš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªCookieç®¡ç†å™¨ã€‚è¯¦ç»†ç¤ºä¾‹å¯ä»¥ç§»æ­¥<a href="https://github.com/flutterchina/dio/tree/master/plugins/cookie_manager">dio_cookie_manager</a> ã€‚</p><h3 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨">è‡ªå®šä¹‰æ‹¦æˆªå™¨</h3><p>å¼€å‘è€…å¯ä»¥é€šè¿‡ç»§æ‰¿<code>Interceptor/QueuedInterceptor</code> ç±»æ¥å®ç°è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„<a href="https://github.com/flutterchina/dio/blob/master/example/custom_cache_interceptor.dart">ç¼“å­˜ç¤ºä¾‹æ‹¦æˆªå™¨</a>ã€‚</p><h2 id="é”™è¯¯å¤„ç†">*é”™è¯¯å¤„ç†</h2><p>å½“è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶, Dio ä¼šåŒ…è£… <code>Error/Exception</code> ä¸ºä¸€ä¸ª <code>DioError</code>:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">//404</span></span><br><span class="line">  <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;https://wendux.github.io/xsddddd&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">on</span> DioError <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// The request was made and the server responded with a status code</span></span><br><span class="line">  <span class="comment">// that falls out of the range of 2xx and is also not 304.</span></span><br><span class="line">  <span class="keyword">if</span> (e.response) &#123;</span><br><span class="line">    <span class="built_in">print</span>(e.response.data)</span><br><span class="line">    <span class="built_in">print</span>(e.response.headers)</span><br><span class="line">    <span class="built_in">print</span>(e.response.requestOptions)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Something happened in setting up or sending the request that triggered an Error</span></span><br><span class="line">    <span class="built_in">print</span>(e.requestOptions)</span><br><span class="line">    <span class="built_in">print</span>(e.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DioError-å­—æ®µ">DioError å­—æ®µ</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">Request info.</span></span></span><br><span class="line">  RequestOptions request;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Response info, it may be <span class="code">`null`</span> if the request can&#x27;t reach to</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">the http server, for example, occurring a dns error, network is not available.</span></span></span><br><span class="line">  Response response;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">é”™è¯¯ç±»å‹ï¼Œè§ä¸‹æ–‡</span></span></span><br><span class="line">  DioErrorType type;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="markdown">åŸå§‹çš„erroræˆ–exceptionå¯¹è±¡ï¼Œé€šå¸¸typeä¸ºDEFAULTæ—¶å­˜åœ¨ã€‚</span></span></span><br><span class="line">  <span class="built_in">dynamic</span> error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DioErrorType">DioErrorType</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> DioErrorType &#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">It occurs when url is opened timeout.</span></span></span><br><span class="line">  connectTimeout,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">It occurs when url is sent timeout.</span></span></span><br><span class="line">  sendTimeout,</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="markdown">It occurs when receiving timeout.</span></span></span><br><span class="line">  receiveTimeout,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">When the server response, but with a incorrect status, such as 404, 503...</span></span></span><br><span class="line">  response,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">When the request is cancelled, dio will throw a error with this type.</span></span></span><br><span class="line">  cancel,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">Default error type, Some other Error. In this case, you can</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">use the DioError.error if it is not null.</span></span></span><br><span class="line">  other,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨application-x-www-form-urlencodedç¼–ç ">ä½¿ç”¨application/x-www-form-urlencodedç¼–ç </h2><p>é»˜è®¤æƒ…å†µä¸‹, Dio ä¼šå°†è¯·æ±‚æ•°æ®(é™¤è¿‡Stringç±»å‹)åºåˆ—åŒ–ä¸º <code>JSON</code>. å¦‚æœæƒ³è¦ä»¥ <code>application/x-www-form-urlencoded</code>æ ¼å¼ç¼–ç , ä½ å¯ä»¥æ˜¾å¼è®¾ç½®<code>contentType</code> :</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Instance level</span></span><br><span class="line">dio.options.contentType= Headers.formUrlEncodedContentType;</span><br><span class="line"><span class="comment">//or works once</span></span><br><span class="line">dio.post(</span><br><span class="line">  <span class="string">&#x27;/info&#x27;</span>,</span><br><span class="line">  data: &#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">5</span>&#125;,</span><br><span class="line">  options: Options(contentType: Headers.formUrlEncodedContentType),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ª<a href="https://github.com/flutterchina/dio/blob/6de8289ea71b0b7803654caaa2e9d3d47a588ab7/example/options.dart#L41">ç¤ºä¾‹</a>.</p><h2 id="FormData">FormData</h2><p>Dioæ”¯æŒå‘é€ FormData, è¯·æ±‚æ•°æ®å°†ä¼šä»¥ <code>multipart/form-data</code>æ–¹å¼ç¼–ç , FormDataä¸­å¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…å«æ–‡ä»¶ .</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = FormData.fromMap(&#123;</span><br><span class="line">  <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;wendux&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="string">&#x27;file&#x27;</span>: <span class="keyword">await</span> MultipartFile.fromFile(<span class="string">&#x27;./text.txt&#x27;</span>,filename: <span class="string">&#x27;upload.txt&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line">response = <span class="keyword">await</span> dio.post(<span class="string">&#x27;/info&#x27;</span>, data: formData);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: åªæœ‰ post æ–¹æ³•æ”¯æŒå‘é€ FormData.</p></blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªå®Œæ•´çš„<a href="https://github.com/flutterchina/dio/blob/master/example/formdata.dart">ç¤ºä¾‹</a>.</p><h3 id="å¤šæ–‡ä»¶ä¸Šä¼ ">å¤šæ–‡ä»¶ä¸Šä¼ </h3><p>å¤šæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œé€šè¿‡ç»™keyåŠ ä¸­æ‹¬å·â€œ[]â€æ–¹å¼ä½œä¸ºæ–‡ä»¶æ•°ç»„çš„æ ‡è®°ï¼Œå¤§å¤šæ•°åå°ä¹Ÿä¼šé€šè¿‡key[]è¿™ç§æ–¹å¼æ¥è¯»å–ã€‚ä¸è¿‡RFCä¸­å¹¶æ²¡æœ‰è§„å®šå¤šæ–‡ä»¶ä¸Šä¼ å°±å¿…é¡»å¾—åŠ â€œ[]â€ï¼Œæ‰€ä»¥æœ‰æ—¶ä¸å¸¦â€œ[]â€ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå…³é”®åœ¨äºåå°å’Œå®¢æˆ·ç«¯å¾—ä¸€è‡´ã€‚v3.0.0 ä»¥åé€šè¿‡<code>Formdata.fromMap()</code>åˆ›å»ºçš„<code>Formdata</code>,å¦‚æœæœ‰æ–‡ä»¶æ•°ç»„ï¼Œæ˜¯é»˜è®¤ä¼šç»™keyåŠ ä¸Šâ€œ[]â€çš„ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FormData.fromMap(&#123;</span><br><span class="line">  <span class="string">&#x27;files&#x27;</span>: [</span><br><span class="line">    MultipartFile.fromFileSync(<span class="string">&#x27;./example/upload.txt&#x27;</span>, filename: <span class="string">&#x27;upload.txt&#x27;</span>),</span><br><span class="line">    MultipartFile.fromFileSync(<span class="string">&#x27;./example/upload.txt&#x27;</span>, filename: <span class="string">&#x27;upload.txt&#x27;</span>),</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç¼–ç æ—¶ä¼škeyä¼šä¸º â€œfiles[]â€ï¼Œ<strong>å¦‚æœä¸æƒ³æ·»åŠ â€œ[]â€</strong>ï¼Œå¯ä»¥é€šè¿‡<code>Formdata</code>çš„APIæ¥æ„å»ºï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = FormData();</span><br><span class="line">formData.files.addAll([</span><br><span class="line">  MapEntry(<span class="string">&#x27;files&#x27;</span>,</span><br><span class="line">    MultipartFile.fromFileSync(<span class="string">&#x27;./example/upload.txt&#x27;</span>,filename: <span class="string">&#x27;upload.txt&#x27;</span>),</span><br><span class="line">  ),</span><br><span class="line">  MapEntry(<span class="string">&#x27;files&#x27;</span>,</span><br><span class="line">    MultipartFile.fromFileSync(<span class="string">&#x27;./example/upload.txt&#x27;</span>,filename: <span class="string">&#x27;upload.txt&#x27;</span>),</span><br><span class="line">  ),</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ„å»ºçš„<code>FormData</code>çš„keyæ˜¯ä¸ä¼šæœ‰â€œ[]â€ã€‚</p><h2 id="è½¬æ¢å™¨">è½¬æ¢å™¨</h2><p>è½¬æ¢å™¨<code>Transformer</code> ç”¨äºå¯¹è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®è¿›è¡Œç¼–è§£ç å¤„ç†ã€‚Dioå®ç°äº†ä¸€ä¸ªé»˜è®¤è½¬æ¢å™¨<code>DefaultTransformer</code>ä½œä¸ºé»˜è®¤çš„ <code>Transformer</code>. å¦‚æœä½ æƒ³å¯¹è¯·æ±‚/å“åº”æ•°æ®è¿›è¡Œè‡ªå®šä¹‰ç¼–è§£ç å¤„ç†ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰è½¬æ¢å™¨ï¼Œé€šè¿‡ <code>dio.transformer</code>è®¾ç½®ã€‚</p><blockquote><p>è¯·æ±‚è½¬æ¢å™¨ <code>Transformer.transformRequest(...)</code> åªä¼šè¢«ç”¨äº â€˜PUTâ€™ã€ â€˜POSTâ€™ã€ 'PATCHâ€™æ–¹æ³•ï¼Œå› ä¸ºåªæœ‰è¿™äº›æ–¹æ³•æ‰å¯ä»¥æºå¸¦è¯·æ±‚ä½“(request body)ã€‚ä½†æ˜¯å“åº”è½¬æ¢å™¨ <code>Transformer.transformResponse()</code> ä¼šè¢«ç”¨äºæ‰€æœ‰è¯·æ±‚æ–¹æ³•çš„è¿”å›æ•°æ®ã€‚</p></blockquote><h3 id="Flutterä¸­è®¾ç½®">Flutterä¸­è®¾ç½®</h3><p>å¦‚æœä½ åœ¨å¼€å‘Flutteråº”ç”¨ï¼Œå¼ºçƒˆå»ºè®®jsonçš„è§£ç é€šè¿‡computeæ–¹æ³•åœ¨åå°è¿›è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨è§£æå¤æ‚jsonæ—¶å¯¼è‡´çš„UIå¡é¡¿ã€‚</p><blockquote><p>æ³¨æ„ï¼Œæ ¹æ®ç¬”è€…å®é™…æµ‹è¯•ï¼Œå‘ç°é€šè¿‡<code>compute</code>åœ¨åå°è§£ç jsonè€—æ—¶æ¯”ç›´æ¥è§£ç æ…¢å¾ˆå¤šï¼Œå»ºè®®å¼€å‘è€…ä»”ç»†è¯„ä¼°ã€‚</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿…é¡»æ˜¯é¡¶å±‚å‡½æ•°</span></span><br><span class="line">_parseAndDecode(<span class="built_in">String</span> response) &#123;</span><br><span class="line">  <span class="keyword">return</span> jsonDecode(response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">parseJson(<span class="built_in">String</span> text) &#123;</span><br><span class="line">  <span class="keyword">return</span> compute(_parseAndDecode, text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰ jsonDecodeCallback</span></span><br><span class="line">  (dio.transformer <span class="keyword">as</span> DefaultTransformer).jsonDecodeCallback = parseJson;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…¶å®ƒç¤ºä¾‹">å…¶å®ƒç¤ºä¾‹</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ª <a href="https://github.com/flutterchina/dio/blob/master/example/transfomer.dart">è‡ªå®šä¹‰Transformerçš„ç¤ºä¾‹</a>.</p><h3 id="æ‰§è¡Œæµ">æ‰§è¡Œæµ</h3><p>è™½ç„¶åœ¨æ‹¦æˆªå™¨ä¸­ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä½†æ˜¯è½¬æ¢å™¨ä¸»è¦èŒè´£æ˜¯å¯¹è¯·æ±‚/å“åº”æ•°æ®è¿›è¡Œç¼–è§£ç ï¼Œä¹‹æ‰€ä»¥å°†è½¬åŒ–å™¨å•ç‹¬åˆ†ç¦»ï¼Œä¸€æ˜¯ä¸ºäº†å’Œæ‹¦æˆªå™¨è§£è€¦ï¼ŒäºŒæ˜¯ä¸ºäº†ä¸ä¿®æ”¹åŸå§‹è¯·æ±‚æ•°æ®(å¦‚æœä½ åœ¨æ‹¦æˆªå™¨ä¸­ä¿®æ”¹è¯·æ±‚æ•°æ®(options.data)ï¼Œä¼šè¦†ç›–åŸå§‹è¯·æ±‚æ•°æ®ï¼Œè€Œåœ¨æŸäº›æ—¶å€™æ‚¨å¯èƒ½éœ€è¦åŸå§‹è¯·æ±‚æ•°æ®). Dioçš„è¯·æ±‚æµæ˜¯ï¼š</p><p><em>è¯·æ±‚æ‹¦æˆªå™¨</em> &gt;&gt; <em>è¯·æ±‚è½¬æ¢å™¨</em> &gt;&gt; <em>å‘èµ·è¯·æ±‚</em> &gt;&gt; <em>å“åº”è½¬æ¢å™¨</em> &gt;&gt; <em>å“åº”æ‹¦æˆªå™¨</em> &gt;&gt; <em>æœ€ç»ˆç»“æœ</em>ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰è½¬æ¢å™¨çš„<a href="https://github.com/flutterchina/dio/blob/master/example/transfomer.dart">ç¤ºä¾‹</a>.</p><h2 id="HttpClientAdapter">HttpClientAdapter</h2><p>HttpClientAdapteræ˜¯ Dio å’Œ HttpClientä¹‹é—´çš„æ¡¥æ¢ã€‚2.0æŠ½è±¡å‡ºadapterä¸»è¦æ˜¯æ–¹ä¾¿åˆ‡æ¢ã€å®šåˆ¶åº•å±‚ç½‘ç»œåº“ã€‚Dioå®ç°äº†ä¸€å¥—æ ‡å‡†çš„ã€å¼ºå¤§APIï¼Œè€ŒHttpClientåˆ™æ˜¯çœŸæ­£å‘èµ·Httpè¯·æ±‚çš„å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡HttpClientAdapterå°†Dioå’ŒHttpClientè§£è€¦ï¼Œè¿™æ ·ä¸€æ¥ä¾¿å¯ä»¥è‡ªç”±å®šåˆ¶Httpè¯·æ±‚çš„åº•å±‚å®ç°ï¼Œæ¯”å¦‚ï¼Œåœ¨Flutterä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰HttpClientAdapterå°†Httpè¯·æ±‚è½¬å‘åˆ°Nativeä¸­ï¼Œç„¶åå†ç”±Nativeç»Ÿä¸€å‘èµ·è¯·æ±‚ã€‚å†æ¯”å¦‚ï¼Œå‡å¦‚æœ‰ä¸€å¤©OKHttpæä¾›äº†dartç‰ˆï¼Œä½ æƒ³ä½¿ç”¨OKHttpå‘èµ·httpè¯·æ±‚ï¼Œé‚£ä¹ˆä½ ä¾¿å¯ä»¥é€šè¿‡é€‚é…å™¨æ¥æ— ç¼åˆ‡æ¢åˆ°OKHttpï¼Œè€Œä¸ç”¨æ”¹ä¹‹å‰çš„ä»£ç ã€‚</p><p>Dio ä½¿ç”¨<code>DefaultHttpClientAdapter</code>ä½œä¸ºå…¶é»˜è®¤HttpClientAdapterï¼Œ<code>DefaultHttpClientAdapter</code>ä½¿ç”¨<code>dart:io:HttpClient</code> æ¥å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</p><h3 id="è®¾ç½®Httpä»£ç†">è®¾ç½®Httpä»£ç†</h3><p><code>DefaultHttpClientAdapter</code> æä¾›äº†ä¸€ä¸ª<code>onHttpClientCreate</code> å›è°ƒæ¥è®¾ç½®åº•å±‚ <code>HttpClient</code>çš„ä»£ç†ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨ä»£ç†ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/adapter.dart&#x27;</span>;</span><br><span class="line">...</span><br><span class="line">(dio.httpClientAdapter <span class="keyword">as</span> DefaultHttpClientAdapter).onHttpClientCreate = (client) &#123;</span><br><span class="line">  <span class="comment">// config the http client</span></span><br><span class="line">  client.findProxy = (uri) &#123;</span><br><span class="line">    <span class="comment">//proxy all request to localhost:8888</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;PROXY localhost:8888&#x27;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// you can also create a HttpClient to dio</span></span><br><span class="line">  <span class="comment">// return HttpClient();</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ç¤ºä¾‹è¯·æŸ¥çœ‹<a href="https://github.com/flutterchina/dio/blob/master/example/proxy.dart">è¿™é‡Œ</a>.</p><h3 id="Httpsè¯ä¹¦æ ¡éªŒ">Httpsè¯ä¹¦æ ¡éªŒ</h3><p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æ ¡éªŒhttpsè¯ä¹¦ï¼Œå‡è®¾æˆ‘ä»¬çš„åå°æœåŠ¡ä½¿ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œè¯ä¹¦æ ¼å¼æ˜¯PEMæ ¼å¼ï¼Œæˆ‘ä»¬å°†è¯ä¹¦çš„å†…å®¹ä¿å­˜åœ¨æœ¬åœ°å­—ç¬¦ä¸²ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ ¡éªŒé€»è¾‘å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> PEM=<span class="string">&#x27;XXXXX&#x27;</span>; <span class="comment">// certificate content</span></span><br><span class="line">(dio.httpClientAdapter <span class="keyword">as</span> DefaultHttpClientAdapter).onHttpClientCreate  = (client) &#123;</span><br><span class="line">  client.badCertificateCallback=(X509Certificate cert, <span class="built_in">String</span> host, <span class="built_in">int</span> port)&#123;</span><br><span class="line">    <span class="keyword">if</span>(cert.pem==PEM)&#123; <span class="comment">// Verify the certificate</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>X509Certificate</code>æ˜¯è¯ä¹¦çš„æ ‡å‡†æ ¼å¼ï¼ŒåŒ…å«äº†è¯ä¹¦é™¤ç§é’¥å¤–æ‰€æœ‰ä¿¡æ¯ï¼Œè¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£ã€‚å¦å¤–ï¼Œä¸Šé¢çš„ç¤ºä¾‹æ²¡æœ‰æ ¡éªŒhostï¼Œæ˜¯å› ä¸ºåªè¦æœåŠ¡å™¨è¿”å›çš„è¯ä¹¦å†…å®¹å’Œæœ¬åœ°çš„ä¿å­˜ä¸€è‡´å°±å·²ç»èƒ½è¯æ˜æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨äº†ï¼ˆè€Œä¸æ˜¯ä¸­é—´äººï¼‰ï¼ŒhostéªŒè¯é€šå¸¸æ˜¯ä¸ºäº†é˜²æ­¢è¯ä¹¦å’ŒåŸŸåä¸åŒ¹é…ã€‚</p><p>å¯¹äºè‡ªç­¾åçš„è¯ä¹¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶æ·»åŠ åˆ°æœ¬åœ°è¯ä¹¦ä¿¡ä»»é“¾ä¸­ï¼Œè¿™æ ·è¯ä¹¦éªŒè¯æ—¶å°±ä¼šè‡ªåŠ¨é€šè¿‡ï¼Œè€Œä¸ä¼šå†èµ°åˆ°<code>badCertificateCallback</code>å›è°ƒä¸­ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(dio.httpClientAdapter <span class="keyword">as</span> DefaultHttpClientAdapter).onHttpClientCreate  = (client) &#123;</span><br><span class="line">  SecurityContext sc = SecurityContext();</span><br><span class="line">  <span class="comment">//file is the path of certificate</span></span><br><span class="line">  sc.setTrustedCertificates(file);</span><br><span class="line">  HttpClient httpClient = HttpClient(context: sc);</span><br><span class="line">  <span class="keyword">return</span> httpClient;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œé€šè¿‡<code>setTrustedCertificates()</code>è®¾ç½®çš„è¯ä¹¦æ ¼å¼å¿…é¡»ä¸ºPEMæˆ–PKCS12ï¼Œå¦‚æœè¯ä¹¦æ ¼å¼ä¸ºPKCS12ï¼Œåˆ™éœ€å°†è¯ä¹¦å¯†ç ä¼ å…¥ï¼Œè¿™æ ·åˆ™ä¼šåœ¨ä»£ç ä¸­æš´éœ²è¯ä¹¦å¯†ç ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯è¯ä¹¦æ ¡éªŒä¸å»ºè®®ä½¿ç”¨PKCS12æ ¼å¼çš„è¯ä¹¦ã€‚</p><h2 id="Http2æ”¯æŒ">Http2æ”¯æŒ</h2><p><a href="https://github.com/flutterchina/dio/tree/master/plugins/http2_adapter">dio_http2_adapter</a> åŒ…æä¾›äº†ä¸€ä¸ªæ”¯æŒHttp/2.0çš„Adapterï¼Œè¯¦æƒ…å¯ä»¥ç§»æ­¥ <a href="https://github.com/flutterchina/dio/tree/master/plugins/http2_adapter">dio_http2_adapter</a> ã€‚</p><h2 id="è¯·æ±‚å–æ¶ˆ">è¯·æ±‚å–æ¶ˆ</h2><p>ä½ å¯ä»¥é€šè¿‡ <em>cancel token</em> æ¥å–æ¶ˆå‘èµ·çš„è¯·æ±‚ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CancelToken token = CancelToken();</span><br><span class="line">dio.<span class="keyword">get</span>(url, cancelToken: token)</span><br><span class="line">    .catchError((DioError err)&#123;</span><br><span class="line">      <span class="keyword">if</span> (CancelToken.isCancel(err)) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Request canceled! &#x27;</span>+ err.message)</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// handle error.</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="comment">// cancel the requests with &quot;cancelled&quot; message.</span></span><br><span class="line">token.cancel(<span class="string">&quot;cancelled&quot;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: åŒä¸€ä¸ªcancel token å¯ä»¥ç”¨äºå¤šä¸ªè¯·æ±‚ï¼Œå½“ä¸€ä¸ªcancel tokenå–æ¶ˆæ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥cancel tokençš„è¯·æ±‚éƒ½ä¼šè¢«å–æ¶ˆã€‚</p></blockquote><p>å®Œæ•´çš„ç¤ºä¾‹è¯·å‚è€ƒ<a href="https://github.com/flutterchina/dio/blob/master/example/cancel_request.dart">å–æ¶ˆç¤ºä¾‹</a>.</p><h2 id="ç»§æ‰¿-Dio-class">ç»§æ‰¿ Dio class</h2><p><code>Dio</code> æ˜¯ä¸€ä¸ªæ‹¥æœ‰factory æ„é€ å‡½æ•°çš„æ¥å£ç±»ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ç»§æ‰¿ <code>Dio</code> ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ <code>DioForNative</code> æˆ–<code>DioForBrowser</code> æ¥é—´æ¥å®ç°:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/native_imp.dart&#x27;</span>; <span class="comment">//åœ¨æµè§ˆå™¨ä¸­, import &#x27;package:dio/browser_imp.dart&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Http</span> <span class="keyword">extends</span> <span class="title">DioForNative</span> </span>&#123;</span><br><span class="line">  Http([BaseOptions options]):<span class="keyword">super</span>(options)&#123;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°åšä¸€äº›äº‹</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å®ç° <code>Dio</code>æ¥å£ç±» :</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDio</span> <span class="title">with</span> <span class="title">DioMixin</span> <span class="keyword">implements</span> <span class="title">Dio</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›å…¶ä»–åº“">ä¸€äº›å…¶ä»–åº“</h2><p>awesome-dio</p><p>ğŸ‰ A curated list of awesome things related to dio.</p><table><thead><tr><th>Plugins</th><th>Status</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://github.com/flutterchina/dio/tree/master/plugins/cookie_manager">dio_cookie_manager</a></td><td><a href="https://pub.dartlang.org/packages/dio_http2_adapter"><img src="https://camo.githubusercontent.com/651c2851d777dbc5e679941cd2ee96badd2c6b81a8e3c83899a9888654ed5f56/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f64696f5f68747470325f616461707465722e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>A cookie manager for Dio</td></tr><tr><td><a href="https://github.com/flutterchina/dio/tree/master/plugins/http2_adapter">dio_http2_adapter</a></td><td><a href="https://pub.dartlang.org/packages/dio_cookie_manager"><img src="https://camo.githubusercontent.com/8964d2e10495f6912fa1f9506ec5bd9479878f49da0b3e08b39893c88a2783ef/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f64696f5f636f6f6b69655f6d616e616765722e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>A Dio HttpClientAdapter which support Http/2.0</td></tr><tr><td><a href="https://github.com/rodion-m/dio_smart_retry">dio_smart_retry</a></td><td><a href="https://pub.dev/packages/dio_smart_retry"><img src="https://camo.githubusercontent.com/be8fce1c31df488145731f3ce4c65df61a0d42026489a67be62791f3138a3847/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f64696f5f736d6172745f72657472792e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>Flexible retry library for Dio</td></tr><tr><td><a href="https://github.com/diefferson/http_certificate_pinning">http_certificate_pinning</a></td><td><a href="https://pub.dev/packages/http_certificate_pinning"><img src="https://camo.githubusercontent.com/ca4df1b46b6c0aeed74a66602990128d9f58ec9e1448301c9d689d2d03aac696/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f687474705f63657274696669636174655f70696e6e696e672e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>Https Certificate pinning for Flutter</td></tr><tr><td><a href="https://github.com/OwnWeb/curl_logger_dio_interceptor">curl_logger_dio_interceptor</a></td><td><a href="https://pub.dev/packages/curl_logger_dio_interceptor"><img src="https://camo.githubusercontent.com/f699651dfdb7afa73dfc1d559f85f304b6cef01651319a8abe380270a19e9550/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f6375726c5f6c6f676765725f64696f5f696e746572636570746f722e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>A Flutter curl-command generator for Dio.</td></tr><tr><td><a href="https://github.com/hurshi/dio-http-cache">dio_http_cache</a></td><td><a href="https://pub.dev/packages/dio_http_cache"><img src="https://camo.githubusercontent.com/c3157a30260882db44bcadc8608c0af7904ca1694fb56fdae3085171d3a278bb/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f64696f5f687474705f63616368652e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>A simple cache library for Dio like Rxcache in Android</td></tr><tr><td><a href="https://github.com/Milad-Akarie/pretty_dio_logger">pretty_dio_logger</a></td><td><a href="https://pub.dev/packages/pretty_dio_logger"><img src="https://camo.githubusercontent.com/95e041925f1578527df8d8bcb9607156cce4dc354dd6d29e9d81c8cc52a7e36e/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f7072657474795f64696f5f6c6f676765722e7376673f7374796c653d666c61742d737175617265" alt="Pub"></a></td><td>Pretty Dio logger is a Dio interceptor that logs network calls in a pretty, easy to read format.</td></tr></tbody></table><h1>å¼‚æ­¥ä¸åŒæ­¥</h1><h2 id="åŸç†">åŸç†</h2><h3 id="å¼‚æ­¥">å¼‚æ­¥</h3><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä»£ç æ‰§è¡Œä¸­ï¼ŒæŸæ®µä»£ç çš„æ‰§è¡Œå¹¶ä¸ä¼šå½±å“åé¢ä»£ç çš„æ‰§è¡Œã€‚</strong></p><p>è¯´å¾—å¥½åƒæœ‰ç‚¹æŠ½è±¡ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¼‚æ­¥çš„å®ç°æ–¹å¼ï¼š</p><ul><li><p><strong>å¤šçº¿ç¨‹</strong></p><ul><li>å¼€å¯å¦ä¸€æ¡çº¿ç¨‹æ‰§è¡Œä¸€æ®µè€—æ—¶ä»£ç ï¼Œè¿™æ ·ä¸¤æ¡çº¿ç¨‹å¯ä»¥å¹¶åˆ—æ‰§è¡Œï¼Œè‡ªç„¶ä¸ä¼šé˜»å¡çº¿ç¨‹è€Œå½±å“åé¢ä»£ç çš„æ‰§è¡Œäº†ã€‚</li><li><strong>å¤šçº¿ç¨‹åœ¨é€‚é‡å¹¶åˆç†åœ°ä½¿ç”¨ä¸‹ï¼Œå¯ä»¥è¯´çœŸé¦™ã€‚ä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</strong><ul><li>å¼€å¯çº¿ç¨‹ä¼šå¸¦æ¥é¢å¤–çš„èµ„æºå’Œæ€§èƒ½æ¶ˆè€—ï¼Œåœ¨é‡åˆ°å¤§é‡å¹¶å‘æ—¶ï¼Œä¼šç»™æœåŠ¡å™¨å¸¦æ¥æå¤§çš„å‹åŠ›ã€‚</li><li>å¤šä¸ªçº¿ç¨‹æ“ä½œå…±äº«å†…å­˜æ—¶éœ€è¦åŠ é”æ§åˆ¶ï¼Œé”ç«äº‰ä¼šé™ä½æ€§èƒ½å’Œæ•ˆç‡ï¼Œå¤æ‚æƒ…å†µä¸‹è¿˜å®¹æ˜“é€ æˆæ­»é”ã€‚</li></ul></li></ul></li><li><p><strong>å•çº¿ç¨‹</strong></p><ul><li><strong>ä¸€æ¡æ‰§è¡Œçº¿ä¸Šï¼ŒåŒæ—¶ä¸”åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼ˆäº‹ä»¶ï¼‰ï¼Œå…¶ä»–ä»»åŠ¡éƒ½å¿…é¡»åœ¨åé¢æ’é˜Ÿç­‰å¾…è¢«æ‰§è¡Œ</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€æ¡æ‰§è¡Œçº¿ä¸Šï¼Œä¸ºäº†ä¸é˜»ç¢ä»£ç çš„æ‰§è¡Œï¼Œæ¯é‡åˆ°çš„è€—æ—¶ä»»åŠ¡éƒ½ä¼šè¢«æŒ‚èµ·æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾…æ‰§è¡Œç»“æŸåå†æŒ‰æ”¾å…¥é¡ºåºä¾æ¬¡æ‰§è¡Œé˜Ÿåˆ—ä¸Šçš„ä»»åŠ¡ï¼Œä»è€Œè¾¾åˆ°å¼‚æ­¥æ•ˆæœã€‚</li></ul></li></ul><p>â€‹        ä¸Šè¿°æ‰§è¡Œçº¿ä¸ºä»€ä¹ˆä¸ç›´æ¥è¯´æ˜¯çº¿ç¨‹ï¼Ÿå› ä¸ºDartæ²¡æœ‰çº¿ç¨‹æ¦‚å¿µï¼Œåªæœ‰<code>Isolate</code>ã€‚æ‰€ä»¥ï¼Œ<strong>Dartçº¿ç¨‹</strong>è¿™ä¸ªè¯´æ³•å°±æ˜¯é”™çš„ã€‚å½“ç„¶ï¼Œåœ¨æ­¤æ–¹é¢ç†è§£ä¸º<strong>çº¿ç¨‹</strong>ï¼Œç”šè‡³ç†è§£ä¸ºä¸€ä¸ª<strong>å‡½æ•°ä½“</strong>ä¹Ÿæ²¡æ¯›ç—…â€¦</p><p>â€‹        å•çº¿ç¨‹æ¨¡å‹çš„ä¼˜åŠ¿å°±æ˜¯é¿å…äº†ä¸Šè¿°å¤šçº¿ç¨‹çš„ç¼ºç‚¹ï¼Œç„¶è€Œè¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆäºå¾€å¾€æŠŠæ—¶é—´æµªè´¹åœ¨ç­‰å¾…å¯¹æ–¹ä¼ é€æ•°æ®æˆ–è€…è¿”å›ç»“æœçš„è€—æ—¶æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚ï¼ŒIOæµæ“ä½œç­‰ã€‚å¯¹äºå°½å¯èƒ½åˆ©ç”¨å¤„ç†å™¨çš„å¤šæ ¸å®ç°å¹¶è¡Œè®¡ç®—çš„è®¡ç®—å¯†é›†å‹æ“ä½œç›¸å¯¹æ¥è¯´å¤šçº¿ç¨‹æ›´ä¸ºåˆé€‚ã€‚</p><h3 id="Dartäº‹ä»¶å¾ªç¯æœºåˆ¶">Dartäº‹ä»¶å¾ªç¯æœºåˆ¶</h3><p>ä¸Šæ–‡è¯´äº†Dartæ˜¯åŸºäº<code>äº‹ä»¶å¾ªç¯æœºåˆ¶</code>çš„<code>å•çº¿ç¨‹æ¨¡å‹</code>ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†â€¦</p><h4 id="ä¸ºä»€ä¹ˆè¦é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Ÿ">ä¸ºä»€ä¹ˆè¦é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Ÿ</h4><p>Appä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¤šæ•°æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¹¶ä¸éœ€è¦è¿›è¡Œå¯†é›†æˆ–é«˜å¹¶å‘çš„å¤„ç†ï¼Œè®¡ç®—ä»¥åŠUIæ¸²æŸ“ï¼Œå¤šçº¿ç¨‹æ–¹å¼æ˜¾ç„¶æœ‰äº›å¤šä½™ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦åŸºäºäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿ">ä¸ºä»€ä¹ˆè¦åŸºäºäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Ÿ</h4><p>å¯¹äºç”¨æˆ·ç‚¹å‡»ï¼Œæ»‘åŠ¨ï¼Œç¡¬ç›˜IOè®¿é—®ç­‰ç­‰äº‹ä»¶ï¼Œä½ ä¸çŸ¥é“ä½•æ—¶å‘ç”Ÿæˆ–ä»¥ä»€ä¹ˆé¡ºåºå‘ç”Ÿï¼Œæ‰€ä»¥å¾—æœ‰ä¸€ä¸ªæ°¸ä¸åœæ­‡ä¸”ä¸èƒ½é˜»å¡çš„å¾ªç¯æ¥ç­‰å¾…å¹¶å¤„ç†è¿™äº›â€œçªå‘â€äº‹ä»¶ã€‚</p><h4 id="Dartäº‹ä»¶å¾ªç¯æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ">Dartäº‹ä»¶å¾ªç¯æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</h4><p>Dartäº‹ä»¶å¾ªç¯æœºåˆ¶æ˜¯ç”±ä¸€ä¸ª <strong>æ¶ˆæ¯å¾ªç¯(Event looper)</strong> å’Œä¸¤ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼š<strong>äº‹ä»¶é˜Ÿåˆ—(Event queue)</strong> å’Œ <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—(MicroTask queue)</strong> æ„æˆã€‚</p><h4 id="Event-Looper">Event Looper</h4><p>Dartä»£ç çš„è¿è¡Œæ˜¯ä»mainå‡½æ•°å¼€å§‹çš„ï¼Œmainå‡½æ•°æ‰§è¡Œå®Œåï¼Œ<code>Event looper</code>å¼€å§‹å·¥ä½œï¼Œ<code>Event looper</code>ä¼˜å…ˆå…¨éƒ¨æ‰§è¡Œå®Œ<code>Microtask queue</code>ä¸­çš„event<br>ç›´åˆ°<code>Microtask queue</code>ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ<code>Event queue</code>ä¸­çš„eventï¼Œåè€…ä¸ºç©ºæ—¶æ‰å¯ä»¥é€€å‡ºå¾ªç¯ï¼Œè¿™é‡Œå¼ºè°ƒâ€œå¯ä»¥â€è€Œä¸æ˜¯â€œä¸€å®šâ€è¦é€€å‡ºï¼Œè§†åœºæ™¯è€Œå®šã€‚</p><p><img src="1.png" alt=""></p><p>æ›´å®˜æ–¹çš„ï¼š</p><p><img src="0.png" alt=""></p><blockquote><p>æ‰§è¡Œå®Œ<code>main()</code>å‡½æ•°åå°†ä¼šåˆ›å»ºä¸€ä¸ª<code>Main Isolate</code>ã€‚</p></blockquote><ul><li><strong>Event Loop</strong>ä¼šå¤„ç†ä¸¤ä¸ªé˜Ÿåˆ—<code>MicroTask queue</code>å’Œ<code>Event queue</code>ä¸­çš„ä»»åŠ¡ï¼›</li><li><code>Event queue</code>ä¸»è¦å¤„ç†å¤–éƒ¨çš„äº‹ä»¶ä»»åŠ¡ï¼š<code>I/O</code>,<code>æ‰‹åŠ¿äº‹ä»¶</code>,<code>å®šæ—¶å™¨</code>,<code>isolateé—´çš„é€šä¿¡</code>ç­‰ï¼›</li><li><code>MicroTask queue</code>ä¸»è¦å¤„ç†å†…éƒ¨çš„ä»»åŠ¡ï¼šè­¬å¦‚å¤„ç†<code>I/O</code>äº‹ä»¶çš„ä¸­é—´è¿‡ç¨‹ä¸­å¯èƒ½æ¶‰åŠçš„ä¸€äº›ç‰¹æ®Šå¤„ç†ç­‰ï¼›</li><li>ä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„å¤„ç†é€»è¾‘ï¼Œä¼˜å…ˆå¤„ç†<code>MicroTask queue</code>çš„ä»»åŠ¡ï¼Œå½“<code>MicroTask queue</code>é˜Ÿåˆ—ä¸ºç©ºåå†æ‰§è¡Œ<code>Event queue</code>ä¸­çš„ä»»åŠ¡ï¼›</li><li>å½“ä¸¤ä¸ªé˜Ÿåˆ—éƒ½ä¸ºç©ºçš„æ—¶å€™å°±è¿›è¡ŒGCæ“ä½œï¼Œæˆ–è€…ä»…ä»…æ˜¯åœ¨ç­‰å¾…ä¸‹ä¸ªä»»åŠ¡çš„åˆ°æ¥ã€‚</li></ul><p>ä¸ºäº†æ¯”è¾ƒå¥½çš„ç†è§£ <strong>Event Loop</strong> çš„å¼‚æ­¥é€»è¾‘ï¼Œæˆ‘ä»¬æ¥æ‰“ä¸ªæ¯”å–»ï¼šå°±åƒæˆ‘å»æŸç½‘çº¢å¥¶èŒ¶å“ç‰Œåº—ä¹°æ¯â€œå¹½å…°æ‹¿é“â€(ç”±äºæ˜¯ç°åšçš„èŒ¶ï¼Œæ¯”è¾ƒè€—æ—¶)çš„è¿‡ç¨‹ã€‚</p><blockquote><ol><li>æˆ‘æ¥åˆ°å‰å°ç»™æœåŠ¡å‘˜è¯´æˆ‘è¦ä¹°ä¸€æ¯ä½ ä»¬åº—çš„â€œå¹½å…°æ‹¿é“â€ï¼Œç„¶åæœåŠ¡å‘˜é€’ç»™äº†æˆ‘ä¸€ä¸ªæœ‰ç¼–å·çš„é£ç›˜(è·å–å‡­è¯)ï¼›</li><li>å¥¶èŒ¶åº—çš„å¤‡é¤å‘˜å·¥å°±å°†æˆ‘çš„è®¢å•æ”¾åœ¨è®¢å•åˆ—è¡¨çš„æœ€åé¢ï¼Œä»–ä»¬æŒ‰ç…§é¡ºåºå‡†å¤‡è®¢å•ä¸Šçš„å•†å“ï¼Œå‡†å¤‡å¥½ä¸€ä¸ªå°±è®©é¡¾å®¢å»é¢†å–ï¼ˆEvent queue å…ˆè¿›å…ˆå‡ºè¿›è¡Œå¤„ç†ï¼‰ï¼Œè€Œæˆ‘å°±èµ°å¼€äº†ï¼Œè¯¥å¹²å•¥å¹²å•¥å»äº†(å¼‚æ­¥è¿‡ç¨‹ï¼Œä¸ç­‰å¾…å¤„ç†ç»“æœ)ï¼›</li><li>çªç„¶ä»–ä»¬æ¥äº†ä¸ªè¶…çº§VIPä¼šå‘˜çš„è®¢å•ï¼Œå¤‡é¤å‘˜å·¥å°±æŠŠè¿™ä¸ªè¶…çº§VIPè®¢å•æ”¾åœ¨äº†å…¶ä»–è®¢å•çš„æœ€å‰é¢ï¼Œä¼˜å…ˆå®‰æ’äº†è¿™ä¸ªè®¢å•çš„å•†å“(MicroTaskä¼˜å…ˆå¤„ç†)â€”æ­¤åœºæ™¯ä¸ºè™šæ„ï¼›</li><li>å½“æˆ‘çš„è®¢å•å®Œæˆåï¼Œé£ç›˜å¼€å§‹éœ‡åŠ¨(è¿›è¡Œç»“æœå›è°ƒ)ï¼Œæˆ‘åˆå†æ¬¡å›åˆ°äº†å‰å°ï¼Œå¦‚æœå‰å°å¦¹å­é€’ç»™æˆ‘ä¸€æ¯å¥¶èŒ¶ï¼ˆè·å¾—ç»“æœï¼‰ï¼Œå¦‚æœå‰å°å¦¹å­è¯´å¯¹ä¸èµ·å…ˆç”Ÿï¼Œåˆ°æ‚¨çš„è®¢å•çš„æ—¶å€™æ²¡æ°´äº†ï¼Œè®¢å•æ²¡æ³•å®Œæˆäº†ç»™æˆ‘é€€é’±ï¼ˆè·å¾—å¼‚å¸¸é”™è¯¯é”™è¯¯ï¼‰ã€‚</li></ol></blockquote><h4 id="Event-Queue">Event Queue</h4><p>è¯¥é˜Ÿåˆ—äº‹ä»¶æ¥æºäº<code>å¤–éƒ¨äº‹ä»¶</code>å’Œ<code>Future</code></p><ol><li>å¤–éƒ¨äº‹ä»¶</li></ol><blockquote><p>ä¾‹å¦‚ï¼šè¾“å…¥/è¾“å‡ºï¼Œæ‰‹åŠ¿ï¼Œç»˜åˆ¶ï¼Œè®¡æ—¶å™¨ï¼ŒStreamç­‰ç­‰ï¼›<br>å¯¹äº<code>å¤–éƒ¨äº‹ä»¶</code>ï¼Œä¸€æ—¦æ²¡æœ‰ä»»ä½•microtaskè¦æ‰§è¡Œï¼ŒEvent looperå°±ä¼šè€ƒè™‘å°†åˆ—ä¸ºé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€é¡¹å¹¶æ‰§è¡Œå®ƒã€‚</p></blockquote><ol><li>Future</li></ol><blockquote><p>ç”¨äºè‡ªå®šä¹‰Event queueäº‹ä»¶ã€‚</p></blockquote><p>é€šè¿‡åˆ›å»º<code>Future</code>ç±»å®ä¾‹æ¥å‘Event queueæ·»åŠ äº‹ä»¶ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Future(() &#123;</span><br><span class="line">  <span class="comment">// äº‹ä»¶ä»»åŠ¡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å»¶æ—¶5ç§’åæ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Future.delayed(<span class="keyword">const</span> <span class="built_in">Duration</span>(seconds:<span class="number">5</span>), () &#123;</span><br><span class="line">  <span class="comment">// äº‹ä»¶ä»»åŠ¡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœè¯¥ä»»åŠ¡å‰é¢æœ‰å…¶å®ƒä»»åŠ¡éœ€è¦å…ˆæ‰§è¡Œï¼Œè¯¥ä»»åŠ¡è¢«æ‰§è¡Œçš„æ—¶é—´ä¼šå¤§äº5ç§’ï¼ˆå•çº¿ç¨‹æ¨¡å‹çš„ç¼ºé™·ä¹‹ä¸€ï¼Œä¸èƒ½åŸºäºæ—¶é’Ÿè°ƒåº¦ï¼‰ã€‚</p><p>è¿™é‡Œæ‹“å±•ä¸‹<code>Future</code>çš„ä¸€äº›ç”¨æ³•ï¼ˆäº†è§£ä¸‹å°±å¯ä»¥äº†ï¼Œä¸æ˜¯æœ¬æ–‡é‡ç‚¹ï¼‰ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Future(() =&gt; doTask) <span class="comment">// æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line">    .then((result1) =&gt; doChildTask1(result1)) <span class="comment">// doTaskæ‰§è¡Œå®Œåçš„å­ä»»åŠ¡ï¼Œresultä¸ºä¸Šä¸ªä»»åŠ¡doTaskçš„è¿”å›å€¼</span></span><br><span class="line">    .then((result2) =&gt; doChildTask2(result2)) <span class="comment">// doChildTask1æ‰§è¡Œå®Œåçš„å­ä»»åŠ¡ï¼Œresultä¸ºä¸Šä¸ªä»»åŠ¡doChildTask1çš„è¿”å›å€¼</span></span><br><span class="line">    .whenComplete(() =&gt; doComplete); <span class="comment">// å½“æ‰€æœ‰ä»»åŠ¡å®Œæˆåçš„å›è°ƒå‡½æ•°</span></span><br></pre></td></tr></table></figure><p>äº‹ä»¶ä»»åŠ¡æ‰§è¡Œå®Œåä¼šç«‹å³ä¾æ¬¡æ‰§è¡Œ<code>then</code>å­ä»»åŠ¡ï¼Œæœ€åæ‰§è¡Œ<code>whenComplete</code>å‡½æ•°ã€‚</p><h4 id="Microtask-Queue">Microtask Queue</h4><ol><li>ä¸Šæ–‡å·²è¿°ï¼ŒMicrotask queueçš„ä¼˜å…ˆçº§è¦é«˜äºEvent queue</li><li>ä½¿ç”¨åœºæ™¯ï¼šæƒ³è¦åœ¨ç¨åå®Œæˆä¸€äº›ä»»åŠ¡ï¼ˆmicrotaskï¼‰ä½†åˆå¸Œæœ›åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶ï¼ˆeventï¼‰ä¹‹å‰æ‰§è¡Œã€‚</li></ol><blockquote><p>Microtaskä¸€èˆ¬ç”¨äºéå¸¸çŸ­çš„å†…éƒ¨å¼‚æ­¥åŠ¨ä½œï¼Œå¹¶ä¸”ä»»åŠ¡é‡éå¸¸å°‘ï¼Œå¦‚æœå¾®ä»»åŠ¡éå¸¸å¤šï¼Œå°±ä¼šé€ æˆEvent queueæ’ä¸ä¸Šé˜Ÿï¼Œä¼šé˜»å¡Event queueçš„æ‰§è¡Œï¼ˆå¦‚ï¼Œç”¨æˆ·ç‚¹å‡»æ²¡æœ‰ååº”ï¼‰ã€‚æ‰€ä»¥ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Event queueï¼Œæ•´ä¸ªFlutteræºä»£ç ä»…å¼•ç”¨scheduleMicroTaskï¼ˆï¼‰æ–¹æ³•7æ¬¡ã€‚</p></blockquote><p>é€šè¿‡åˆ›å»º<code>scheduleMicrotask</code>å‡½æ•°æ¥å‘Microtask queueæ·»åŠ ä»»åŠ¡ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scheduleMicrotask(() &#123;</span><br><span class="line">  <span class="comment">// äº‹ä»¶ä»»åŠ¡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="Isolate">Isolate</h3><p>æ‰€æœ‰çš„Dartä»£ç éƒ½æ˜¯åœ¨<code>isolate</code>ä¸­è¿è¡Œï¼Œå®ƒå°±åƒæ˜¯æœºå™¨ä¸Šçš„ä¸€ä¸ªå°ç©ºé—´ï¼Œå…·æœ‰è‡ªå·±çš„ç§æœ‰å†…å­˜å—å’Œä¸€ä¸ªè¿è¡Œç€<code>Event looper</code>çš„å•ä¸ªçº¿ç¨‹ã€‚æ­£å¦‚ä¸Šæ–‡å¼ºè°ƒçš„ï¼š<strong>Dartä¸­æ²¡æœ‰çº¿ç¨‹çš„æ¦‚å¿µåªæœ‰<code>isolate</code></strong>ã€‚</p><p><img src="2.png" alt="isolateå…·æœ‰è‡ªå·±çš„å†…å­˜å’Œè¿è¡Œäº‹ä»¶å¾ªç¯çš„å•ä¸ªæ‰§è¡Œçº¿ç¨‹"></p><p>æ¯ä¸ª<code>isolate</code>éƒ½æ˜¯ç›¸äº’éš”ç¦»ï¼ˆç‹¬ç«‹ï¼‰çš„ï¼Œå¹¶ä¸åƒçº¿ç¨‹é‚£æ ·å¯ä»¥å…±äº«å†…å­˜ï¼Œisolateæœ¬èº«å°±æ˜¯éš”ç¦»çš„æ„æ€â€¦</p><p>è®¸å¤šDartåº”ç”¨éƒ½åœ¨å•ä¸ª<code>isolate</code>ä¸­è¿è¡Œæ‰€æœ‰ä»£ç ï¼Œä½†æ˜¯å¦‚æœç‰¹æ®Šéœ€è¦ï¼Œæ‚¨å¯ä»¥æ‹¥æœ‰å¤šä¸ªã€‚</p><p><img src="3.png" alt="ä¸¤ä¸ªisolateï¼Œæ¯ä¸ªisolateéƒ½æœ‰è‡ªå·±çš„å†…å­˜å’Œæ‰§è¡Œçº¿ç¨‹"></p><p><code>Isolate</code>é—´å¯ä»¥ä¸€èµ·å·¥ä½œçš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡æ¥å›ä¼ é€’æ¶ˆæ¯ã€‚ä¸€ä¸ª<code>isolate</code>å°†æ¶ˆæ¯å‘é€åˆ°å¦ä¸€ä¸ª<code>isolate</code>ï¼Œæ¥æ”¶è€…ä½¿ç”¨å…¶<code>Event looper</code>å¤„ç†è¯¥æ¶ˆæ¯ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œå‚è€ƒ<a href="https://juejin.cn/post/6844904148303872013#heading-0">Flutterä¹‹isolateçš„ä½¿ç”¨åŠé€šä¿¡åŸç†</a></p><h2 id="å…³é”®å­—">å…³é”®å­—</h2><p>å¼‚æ­¥æ“ä½œå¸¸ç”¨å…³é”®å­—ï¼š<code>Future</code>,<code>async</code>,<code>await</code>ï¼Œéƒ½æ˜¯åŸºäº<strong>Event Loop</strong>ã€‚</p><ul><li><p>future æ˜¯ <a href="https://api.dart.dev/stable/dart-async/Future-class.html"><code>Future</code></a> ç±»çš„å¯¹è±¡ï¼Œå…¶è¡¨ç¤ºä¸€ä¸ª <code>T</code> ç±»å‹çš„å¼‚æ­¥æ“ä½œç»“æœã€‚å¦‚æœå¼‚æ­¥æ“ä½œä¸éœ€è¦ç»“æœï¼Œåˆ™ future çš„ç±»å‹å¯ä¸º <code>Future&lt;void&gt;</code>ã€‚å½“ä¸€ä¸ªè¿”å› future å¯¹è±¡çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šå‘ç”Ÿä¸¤ä»¶äº‹ï¼š</p><ul><li>å°†å‡½æ•°æ“ä½œåˆ—å…¥é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªæœªå®Œæˆçš„ <code>Future</code> å¯¹è±¡ã€‚</li><li>ä¸ä¹…åå½“å‡½æ•°æ“ä½œæ‰§è¡Œå®Œæˆï¼Œ<code>Future</code> å¯¹è±¡å˜ä¸ºå®Œæˆå¹¶æºå¸¦ä¸€ä¸ªå€¼æˆ–ä¸€ä¸ªé”™è¯¯ã€‚</li></ul></li><li><p>å¼‚æ­¥å‡½æ•°å³åœ¨å‡½æ•°å¤´ä¸­åŒ…å«å…³é”®å­— <code>async</code> çš„å‡½æ•°ã€‚å…³é”®å­— <code>await</code> åªèƒ½ç”¨åœ¨å¼‚æ­¥å‡½æ•°ä¸­</p></li></ul><p><strong>è¯·æ³¨æ„å¼‚æ­¥å‡½æ•°æ˜¯ç«‹å³å¼€å§‹æ‰§è¡Œçš„ï¼ˆåŒæ­¥åœ°ï¼‰ï¼Œå…¶å°†ä¼šåœ¨ä¸‹è¿°æƒ…å†µä¹‹ä¸€é¦–æ¬¡å‡ºç°æ—¶æš‚åœæ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªæœªå®Œæˆçš„ future å¯¹è±¡ï¼š</strong></p><ul><li><strong>å‡½æ•°ä¸­ç¬¬ä¸€ä¸ª <code>await</code> è¡¨è¾¾å¼å‡ºç°æ—¶ï¼ˆåœ¨è¯¥å‡½æ•°ä» <code>await</code> è¡¨è¾¾å¼è·å–åˆ°æœªå®Œæˆçš„ future ä¹‹åï¼‰ã€‚</strong></li><li><strong>å‡½æ•°ä¸­ä»»ä½• <code>return</code> è¯­å¥çš„å‡ºç°æ—¶ã€‚</strong></li><li><strong>å‡½æ•°ä½“çš„ç»“æŸã€‚</strong></li></ul><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><p>ä½ å¯ä»¥æƒ³ä¸Šé¢<code>dio</code>é‚£æ ·ç›´æ¥ä½¿ç”¨awaitï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Response response;</span><br><span class="line"><span class="keyword">var</span> dio = Dio();</span><br><span class="line">response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(<span class="string">&#x27;/test?id=12&amp;name=wendu&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="then-ä¸-whenComplete"><code>.then()</code>ä¸<code>.whenComplete ()</code></h3><h4 id="then"><code>.then()</code></h4><p>ä¸Šé¢çš„è¯·æ±‚ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response response;</span><br><span class="line"><span class="keyword">var</span> dio = Dio();</span><br><span class="line">dio.<span class="keyword">get</span>(<span class="string">&#x27;/test?id=12&amp;name=wendu&#x27;</span>).then((value)&#123;</span><br><span class="line">    response = value;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>then æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>FutureOr&lt;R&gt; onValue(T value)</code> å°±æ˜¯ Future çš„ onValue ä»£è¡¨çš„å€¼ , ç±»å‹æ˜¯ Future æ³›å‹ç±»å‹ R ;</p><p>then æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•° <code>&#123;Function? onError&#125;</code> æ˜¯å¯é€‰çš„ , ç”¨äºæ•è·å¼‚å¸¸çš„æ–¹æ³• ;</p><p><strong>å½“ç„¶ä½ å¯ä»¥åœ¨<code>dio.get()</code>æ–¹æ³•å‰é¢åŠ <code>await</code>ï¼Œä½†åŠ ä¸ä¸åŠ æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¯¹è¿™ä¸ªåŒºåˆ«çš„ç†è§£ç¨‹åº¦å…¶å®å°±æ˜¯å¯¹<code>await</code>å…³é”®å­—çš„ç†è§£ç¨‹åº¦ã€‚</strong></p><h4 id="whenComplete"><code>.whenComplete() </code></h4><p>åœ¨ Future æ‰§è¡Œå¿«è¦ç»“æŸæ—¶ , å¦‚æœæƒ³è¦æ‰§è¡Œä¸€äº›ä»»åŠ¡ , å¯ä»¥åœ¨é“¾å¼è°ƒç”¨æ—¶ , è°ƒç”¨ Future çš„ whenComplete æ–¹æ³• ;</p><p>è¯¥æ–¹æ³•ç±»ä¼¼äº try â€¦ catch â€¦ finally ä¸­çš„ finally ä»£ç å— , æ˜¯å¿…å®šæ‰§è¡Œçš„ä»£ç  , å³ä½¿å‡ºé™©é”™è¯¯ , ä¹Ÿä¼šæ‰§è¡Œè¯¥ä»£ç  ;</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dio.<span class="keyword">get</span>(<span class="string">&#x27;/test?id=12&amp;name=wendu&#x27;</span>).then((value) &#123;</span><br><span class="line">    <span class="built_in">print</span>(value);</span><br><span class="line">  &#125;).catchError((e) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;catchError:&#x27;</span>);</span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">  &#125;).whenComplete(() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;whenComplete&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h4 id="å…¶ä»–">å…¶ä»–</h4><p>Futureä¹Ÿæœ‰å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>Future.delay</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> future4 = Future.delayed(Duration(seconds: <span class="number">1</span>), () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>å»¶è¿Ÿä¸€å®šæ—¶é—´å†æ‰§è¡Œ</p></blockquote><p>ç”¨çš„ä¸å¤šï¼Œéœ€è¦çš„è¯å¯ä»¥è‡ªå­¦ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2><h3 id="Async-æ–¹æ³•">Async æ–¹æ³•</h3><p>å½“ä½ ä½¿ç”¨ <strong>async</strong> å…³é”®å­—ä½œä¸ºæ–¹æ³•å£°æ˜çš„åç¼€æ—¶ï¼Œ<strong>Dart</strong> ä¼šå°†å…¶ç†è§£ä¸ºï¼š</p><ul><li>è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <strong>Future</strong>ï¼›</li><li>å®ƒ<strong>åŒæ­¥</strong>æ‰§è¡Œè¯¥æ–¹æ³•çš„ä»£ç ç›´åˆ°<strong>ç¬¬ä¸€ä¸ª await å…³é”®å­—</strong>ï¼Œç„¶åå®ƒæš‚åœè¯¥æ–¹æ³•å…¶ä»–éƒ¨åˆ†çš„æ‰§è¡Œï¼›</li><li>ä¸€æ—¦ç”± <strong>await</strong> å…³é”®å­—å¼•ç”¨çš„ <strong>Future</strong> æ‰§è¡Œå®Œæˆï¼Œä¸‹ä¸€è¡Œä»£ç å°†ç«‹å³æ‰§è¡Œã€‚</li></ul><p>ä¸ºäº†æ›´å¥½åœ°è¿›è¡Œè¯´æ˜ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ç¤ºä¾‹å¹¶å°è¯•æŒ‡å‡ºå…¶è¿è¡Œçš„ç»“æœã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  methodA();</span><br><span class="line">  <span class="keyword">await</span> methodB();</span><br><span class="line">  <span class="keyword">await</span> methodC(<span class="string">&#x27;main&#x27;</span>);</span><br><span class="line">  methodD();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodA()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodB() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;B start&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> methodC(<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;B end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodC(<span class="built_in">String</span> from) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;C start from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  Future(()&#123;                <span class="comment">// &lt;== è¯¥ä»£ç å°†åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´æ®µæ‰§è¡Œ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;C running Future from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  &#125;).then((_)&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;C end of Future from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;C end from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodD()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;D&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„é¡ºåºæ˜¯ï¼š</p><ol><li>A</li><li>B start</li><li>C start from B</li><li>C end from B</li><li>B end</li><li>C start from main</li><li>C end from main</li><li>D</li><li>C running Future from B</li><li>C end of Future from B</li><li>C running Future from main</li><li>C end of Future from main</li></ol><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¤ä¸ºä¸Šè¿°ä»£ç ä¸­çš„ <strong>methodC()</strong> ä¸ºå¯¹æœåŠ¡ç«¯çš„è°ƒç”¨ï¼Œè¿™å¯èƒ½éœ€è¦ä¸å‡åŒ€çš„æ—¶é—´æ¥è¿›è¡Œå“åº”ã€‚æˆ‘ç›¸ä¿¡å¯ä»¥å¾ˆæ˜ç¡®åœ°è¯´ï¼Œé¢„æµ‹ç¡®åˆ‡çš„æ‰§è¡Œæµç¨‹å¯èƒ½å˜å¾—éå¸¸å›°éš¾ã€‚</p><p>å¦‚æœä½ æœ€åˆå¸Œæœ›ç¤ºä¾‹ä»£ç ä¸­ä»…åœ¨æ‰€æœ‰ä»£ç æœ«å°¾æ‰§è¡Œ <strong>methodD()</strong> ï¼Œé‚£ä¹ˆä½ åº”è¯¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç¼–å†™ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  methodA();</span><br><span class="line">  <span class="keyword">await</span> methodB();</span><br><span class="line">  <span class="keyword">await</span> methodC(<span class="string">&#x27;main&#x27;</span>);</span><br><span class="line">  methodD();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodA()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodB() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;B start&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> methodC(<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;B end&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodC(<span class="built_in">String</span> from) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;C start from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> Future(()&#123;                  <span class="comment">// &lt;== åœ¨æ­¤å¤„è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;C running Future from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  &#125;).then((_)&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;C end of Future from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;C end from <span class="subst">$from</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">methodD()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;D&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåºåˆ—ä¸ºï¼š</p><ol><li>A</li><li>B start</li><li>C start from B</li><li>C running Future from B</li><li>C end of Future from B</li><li>C end from B</li><li>B end</li><li>C start from main</li><li>C running Future from main</li><li>C end of Future from main</li><li>C end from main</li><li>D</li></ol><p>äº‹å®æ˜¯é€šè¿‡åœ¨ <strong>methodC()</strong> ä¸­å®šä¹‰ <strong>Future</strong> çš„åœ°æ–¹ç®€å•åœ°æ·»åŠ  <strong>await</strong> ä¼šæ”¹å˜æ•´ä¸ªè¡Œä¸ºã€‚</p><h1>å…¶ä»–å°æŠ€å·§</h1><p>å¿«é€Ÿjsonè§£æä¸ºå¯¹è±¡</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookCollection</span> </span>&#123;</span><br><span class="line">  <span class="comment">//ç´¢ä¹¦å·</span></span><br><span class="line">  <span class="built_in">String</span> callNo;</span><br><span class="line">  <span class="comment">//æ¡ç å·</span></span><br><span class="line">  <span class="built_in">String</span> barcode;</span><br><span class="line">  <span class="comment">//å‡ºç‰ˆæ—¥æœŸ</span></span><br><span class="line">  <span class="built_in">String</span> publishTime;</span><br><span class="line">  <span class="comment">//é¦†è—åœ°</span></span><br><span class="line">  <span class="built_in">String</span> location;</span><br><span class="line">  <span class="comment">//æ˜¯å¦å¯å€Ÿ</span></span><br><span class="line">  <span class="built_in">String</span> status;</span><br><span class="line"></span><br><span class="line">  BookCollection.fromJson(jsonMap) &#123;</span><br><span class="line">    callNo = jsonMap[<span class="string">&#x27;callNo&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    barcode = jsonMap[<span class="string">&#x27;barcode&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    publishTime = jsonMap[<span class="string">&#x27;publishTime&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    location = jsonMap[<span class="string">&#x27;location&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    status = jsonMap[<span class="string">&#x27;status&#x27;</span>] ?? <span class="string">&#x27;false&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span> list = jsonMap[<span class="string">&#x27;collectionBooks&#x27;</span>] ?? [];</span><br><span class="line"><span class="built_in">List</span>&lt;BookCollection&gt; collections =</span><br><span class="line">        list.map((element) =&gt; BookCollection.fromJson(element)).toList() ?? [];</span><br></pre></td></tr></table></figure><h1>å‚è€ƒï¼š</h1><blockquote><p><a href="https://github.com/flutterchina/dio/blob/master/README-ZH.md">https://github.com/flutterchina/dio/blob/master/README-ZH.md</a></p><p><a href="https://github.com/flutterchina/dio/blob/develop/README-ZH.md">https://github.com/flutterchina/dio/blob/develop/README-ZH.md</a></p><p><a href="https://blog.csdn.net/androidbye/article/details/118059569?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.pc_relevant_default&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3">https://blog.csdn.net/androidbye/article/details/118059569?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.pc_relevant_default&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿åŸ¹è®­ï¼šwinter-flutterï¼šPlatformChannelä¸æ¡Œé¢ç»„ä»¶</title>
      <link href="/2022/01/17/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD%EF%BC%9Awinter-flutter%EF%BC%9AMethodChannel%E4%B8%8E%E6%A1%8C%E9%9D%A2%E7%BB%84%E4%BB%B6/"/>
      <url>/2022/01/17/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD%EF%BC%9Awinter-flutter%EF%BC%9AMethodChannel%E4%B8%8E%E6%A1%8C%E9%9D%A2%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1>PlatformChannel</h1><p>Flutterå®šä¹‰äº†ä¸‰ç§ä¸åŒç±»å‹çš„Channelï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯</p><ul><li>BasicMessageChannelï¼šç”¨äºä¼ é€’å­—ç¬¦ä¸²å’ŒåŠç»“æ„åŒ–çš„ä¿¡æ¯ã€‚</li><li>MethodChannelï¼šç”¨äºä¼ é€’æ–¹æ³•è°ƒç”¨ï¼ˆmethod invocationï¼‰ã€‚</li><li>EventChannel: ç”¨äºæ•°æ®æµï¼ˆevent streamsï¼‰çš„é€šä¿¡ã€‚</li></ul><p>ä¸‰ç§Channelä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œå„æœ‰ç”¨é€”ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡ä¸Šå´éå¸¸ç›¸è¿‘ã€‚æ¯ç§Channelå‡æœ‰ä¸‰ä¸ªé‡è¦æˆå‘˜å˜é‡ï¼š</p><ul><li>name:  Stringç±»å‹ï¼Œä»£è¡¨Channelçš„åå­—ï¼Œä¹Ÿæ˜¯å…¶å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>messagerï¼šBinaryMessengerç±»å‹ï¼Œä»£è¡¨æ¶ˆæ¯ä¿¡ä½¿ï¼Œæ˜¯æ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶çš„å·¥å…·ã€‚</li><li>codec: MessageCodecç±»å‹æˆ–MethodCodecç±»å‹ï¼Œä»£è¡¨æ¶ˆæ¯çš„ç¼–è§£ç å™¨ã€‚</li></ul><p><strong>ä¸‹é¢è®²MethodChannelï¼Œå…¶ä½™ä¸¤ç§æ–¹æ³•åŸºæœ¬ä¸€è‡´</strong></p><h2 id="MethodChannel">MethodChannel</h2><p><img src="0.png" alt=""></p><p><a href="http://82.156.169.66/battery.zip">æ ·ä¾‹</a>ï¼Œä»¥ä¸‹åŸºäºæ ·ä¾‹è¿›è¡Œè®²è§£</p><h3 id="flutterç«¯">flutterç«¯</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> MethodChannel methodChannel = MethodChannel(<span class="string">&#x27;samples.flutter.io/battery&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span> _batteryLevel = <span class="string">&#x27;Battery level: unknown.&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; _getBatteryLevel() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">String</span> batteryLevel;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> result = <span class="keyword">await</span> methodChannel.invokeMethod(<span class="string">&#x27;getBatteryLevel&#x27;</span>);</span><br><span class="line">    batteryLevel = <span class="string">&#x27;Battery level: <span class="subst">$result</span>%.&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">on</span> PlatformException &#123;</span><br><span class="line">    batteryLevel = <span class="string">&#x27;Failed to get battery level.&#x27;</span>;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;enter exception&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _batteryLevel = batteryLevel;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–MethodChannelå¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡è°ƒç”¨ç›¸åº”çš„å®‰å“ç«¯æŸä¸ªæ–¹æ³•ï¼Œå‚æ•°ä¸ºæ–¹æ³•åã€‚</p><p>æ³¨æ„è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨è¯¥æ–¹æ³•æ—¶å¹¶ä¸èƒ½ç«‹å³å¾—åˆ°ç»“æœã€‚</p><p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Future&lt;<span class="keyword">void</span>&gt; _getBatteryLevel() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="built_in">String</span> batteryLevel;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">int</span> result = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">await</span> methodChannel.invokeMethod(<span class="string">&#x27;getBatteryLevel&#x27;</span>).then((value) &#123;</span><br><span class="line">       result = value;</span><br><span class="line">     &#125;);</span><br><span class="line">    batteryLevel = <span class="string">&#x27;Battery level: <span class="subst">$result</span>%.&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">on</span> PlatformException &#123;</span><br><span class="line">    batteryLevel = <span class="string">&#x27;Failed to get battery level.&#x27;</span>;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;enter exception&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    _batteryLevel = batteryLevel;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è°ƒç”¨<code>.then</code>è·å–å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼<code>value</code></p><h3 id="å®‰å“ç«¯">å®‰å“ç«¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">FlutterActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BATTERY_CHANNEL = <span class="string">&quot;samples.flutter.io/battery&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getBatteryLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> batteryLevel = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (VERSION.SDK_INT &gt;= VERSION_CODES.LOLLIPOP) &#123;</span><br><span class="line">            BatteryManager batteryManager = (BatteryManager) getSystemService(BATTERY_SERVICE);</span><br><span class="line">            batteryLevel = batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Intent intent = <span class="keyword">new</span> ContextWrapper(getApplicationContext()).</span><br><span class="line">                    registerReceiver(<span class="keyword">null</span>, <span class="keyword">new</span> IntentFilter(Intent.ACTION_BATTERY_CHANGED));</span><br><span class="line">            batteryLevel = (intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -<span class="number">1</span>) * <span class="number">100</span>) /</span><br><span class="line">                    intent.getIntExtra(BatteryManager.EXTRA_SCALE, -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> batteryLevel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        FlutterMain.startInitialization(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">new</span> MethodChannel(getFlutterView(), BATTERY_CHANNEL).setMethodCallHandler(</span><br><span class="line">                (call, result) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (call.method.equals(<span class="string">&quot;getBatteryLevel&quot;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">int</span> batteryLevel = getBatteryLevel();</span><br><span class="line">                        <span class="keyword">if</span> (batteryLevel != -<span class="number">1</span>) &#123;</span><br><span class="line">                            result.success(batteryLevel);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            result.error(<span class="string">&quot;UNAVAILABLE&quot;</span>, <span class="string">&quot;Battery level not available.&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸¤è¾¹çš„<code>methodChannel</code>åå­—è¦ç›¸åŒï¼Œé€šè¿‡è¿™ä¸ªåå­—åŒºåˆ†ä¸åŒçš„<code>methodChannel</code></p><p>é€šè¿‡<code>call.method</code>æ–¹æ³•è·å–flutterçš„<code>invokeMethod</code>çš„å‚æ•°å¹¶è°ƒç”¨åŸç”Ÿå“åº”å‡½æ•°</p><p>è¿™åªæ˜¯flutterè°ƒç”¨åŸç”Ÿçš„ä¾‹å­ï¼ŒåŸç”Ÿè°ƒflutterç”¨åˆ°çš„ä¸å¤šï¼Œç”¨æ³•ç±»ä¼¼ã€‚</p><h2 id="ä»¥iå±±å¤§ä¸ºä¾‹">ä»¥iå±±å¤§ä¸ºä¾‹</h2><p>1.åœ¨<code>MainActivity</code>å†…æ³¨å†Œ<code>methodChannel</code></p><p><img src="1.png" alt=""></p><p>2.handleræ–‡ä»¶å¤¹ä¸‹å­˜æ”¾handlerï¼Œå¼•ç”¨<code>MethodChannel.MethodCallHandler</code>æ¥å£ï¼Œé‡å†™<code>onMethodCall</code>æ–¹æ³•ã€‚</p><p><img src="2.png" alt=""></p><p>3.utilæ–‡ä»¶å¤¹ä¸‹å­˜æ”¾ç›¸åº”çš„æ–¹æ³•ï¼ˆè¢«è°ƒç”¨çš„æ‰€æœ‰æ–¹æ³•ï¼‰</p><p><img src="3.png" alt=""></p><p>åŸç†å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/39575a90e820">é—²é±¼æŠ€æœ¯çš„åšå®¢</a></p><p><a href="https://www.jianshu.com/p/cb96d62f5042">ä¸‰ç§Channelçš„æ ·ä¾‹</a></p><h1>æ¡Œé¢å°ç»„ä»¶</h1><p>å»ºè®®ç›´æ¥å‚è€ƒ<a href="https://developer.android.com/guide/topics/appwidgets?hl=zh-cn">å®˜ç½‘</a></p><p>iå±±å¤§å†…çš„æ ·ä¾‹å¯ä»¥ç›´æ¥å‚è€ƒ<code>ScheduleWidgetService</code>ã€<code>ScheduleWidget</code>ä¸¤ä¸ªç±»</p><h1>å‚è€ƒ</h1><blockquote><p><a href="https://flutter.cn/docs/development/platform-integration/platform-channels">https://flutter.cn/docs/development/platform-integration/platform-channels</a></p><p><a href="https://www.jianshu.com/p/39575a90e820">https://www.jianshu.com/p/39575a90e820</a></p><p><a href="https://developer.android.com/guide/topics/appwidgets?hl=zh-cn">https://developer.android.com/guide/topics/appwidgets?hl=zh-cn</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„è¯¾è®¾:éœå¤«æ›¼ç¼–ç è¯‘ç </title>
      <link href="/2022/01/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AF%BE%E8%AE%BE-%E9%9C%8D%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%E8%AF%91%E7%A0%81/"/>
      <url>/2022/01/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AF%BE%E8%AE%BE-%E9%9C%8D%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%E8%AF%91%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å•çº¯å¯¹è¿™ç±»é¢˜ç›®æ¯”è¾ƒæ„Ÿå…´è¶£å§ï¼Œå› ä¸ºè¦æ˜¯å•çº¯å»å®ç°æœ€åŸå§‹çš„éœå¤«æ›¼ç®—æ³•çš„è¯ï¼Œå…¶å®å¾ˆç®€å•çš„ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æ­£æ˜¯æˆ‘ä»¬çš„ä¸çŸ¥è¶³å¿ƒç†æ¨åŠ¨äº†æŠ€æœ¯çš„å‘å±•ä¸è¿›æ­¥ï¼Œè€Œæˆ‘ä¹Ÿæ°æ°è§‰å¾—ç°é˜¶æ®µéœå¤«æ›¼ç®—æ³•è¿˜æœ‰å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹è€Œå˜å¾—æ›´åŠ é«˜æ•ˆï¼Œä¹Ÿå¸Œæœ›èƒ½å€Ÿè¿™ä¸ªæœºä¼šç»™ä¸‹å­¦æœŸçš„ç®—æ³•è¯¾å¼€ä¸ªå¥½å¤´ã€‚</p><h1>é¢˜ç›®</h1><h2 id="é—®é¢˜æè¿°"><strong>é—®é¢˜æè¿°</strong></h2><p>åˆ©ç”¨å“ˆå¤«æ›¼ç¼–ç è¿›è¡Œä¿¡æ¯é€šä¿¡å¯ä»¥å¤§å¤§æé«˜ä¿¡é“åˆ©ç”¨ç‡ï¼Œç¼©çŸ­ä¿¡æ¯ä¼ è¾“æ—¶é—´ï¼Œé™ä½ä¼ è¾“æˆæœ¬ã€‚ä½†æ˜¯ï¼Œè¿™è¦æ±‚åœ¨å‘é€ç«¯é€šè¿‡ä¸€ä¸ªç¼–ç ç³»ç»Ÿå¯¹å¾…ä¼ æ•°æ®é¢„å…ˆç¼–ç ï¼›åœ¨æ¥æ”¶ç«¯å°†ä¼ æ¥çš„æ•°æ®è¿›è¡Œè¯‘ç ï¼ˆå¤åŸï¼‰ã€‚å¯¹äºåŒå·¥ä¿¡é“ï¼ˆå³å¯ä»¥åŒå‘ä¼ è¾“ä¿¡æ¯çš„ä¿¡é“ï¼‰ï¼Œæ¯ç«¯éƒ½éœ€è¦ä¸€ä¸ªå®Œæ•´çš„ç¼–/è¯‘ç ç³»ç»Ÿã€‚è¯•ä¸ºè¿™æ ·çš„ä¿¡æ¯æ”¶å‘ç«™å†™ä¸€ä¸ªå“ˆå¤«æ›¼ç çš„ç¼–è¯‘ç ç³»ç»Ÿã€‚</p><h2 id="åŸºæœ¬è¦æ±‚"><strong>åŸºæœ¬è¦æ±‚</strong></h2><p>ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿåº”å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p><p>ï¼ˆ1ï¼‰Iï¼šåˆå§‹åŒ–ï¼ˆInitializationï¼‰ã€‚ä»ç»ˆç«¯è¯»å…¥å­—ç¬¦é›†å¤§å°nåŠnä¸ªå­—ç¬¦å’Œmä¸ªæƒå€¼ï¼Œå»ºç«‹å“ˆå¤«æ›¼æ ‘ï¼Œå¹¶å°†å®ƒå­˜äºæ–‡ä»¶hfmtreeä¸­ã€‚</p><p>ï¼ˆ2ï¼‰Cï¼šç¼–ç ï¼ˆCodingï¼‰ã€‚åˆ©ç”¨å·²å»ºå¥½çš„å“ˆå¤«æ›¼æ ‘ï¼ˆå¦‚ä¸åœ¨å†…å­˜ï¼Œåˆ™ä»æ–‡ä»¶hfmtreeä¸­è¯»å…¥ï¼‰ï¼Œå¯¹æ–‡ä»¶tobetransä¸­çš„æ­£æ–‡è¿›è¡Œç¼–ç ï¼Œç„¶åå°†ç»“æœå­˜å…¥æ–‡ä»¶codefileä¸­ã€‚</p><p>ï¼ˆ3ï¼‰Dï¼šè§£ç ï¼ˆDecodingï¼‰ã€‚åˆ©ç”¨å·²å»ºå¥½çš„å“ˆå¤«æ›¼æ ‘å°†æ–‡ä»¶codefileä¸­çš„ä»£ç è¿›è¡Œè¯‘ç ï¼Œç»“æœå­˜å…¥æ–‡ä»¶textfileä¸­ã€‚</p><p>ï¼ˆ4ï¼‰Pï¼šæ‰“å°ä»£ç æ–‡ä»¶ï¼ˆPrintï¼‰ã€‚å°†æ–‡ä»¶codefileä»¥ç´§å‡‘æ ¼å¼æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šï¼Œæ¯è¡Œ50ä¸ªä»£ç ã€‚åŒæ—¶ï¼Œå°†æ­¤å­—ç¬¦å½¢å¼çš„ç¼–ç æ–‡ä»¶å†™å…¥æ–‡ä»¶codeprintä¸­ã€‚</p><p>ï¼ˆ5ï¼‰Tï¼šæ‰“å°å“ˆå¤«æ›¼æ ‘ï¼ˆTree printingï¼‰ã€‚å°†å·²åœ¨å†…å­˜ä¸­çš„å“ˆå¤«æ›¼æ ‘ä»¥ç›´è§‚çš„æ–¹å¼ï¼ˆæ ‘æˆ–å‡¹å…¥è¡¨å½¢å¼ï¼‰æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Šï¼ŒåŒæ—¶å°†æ­¤å­—ç¬¦å½¢å¼çš„å“ˆå¤«æ›¼æ ‘å†™å…¥æ–‡ä»¶treeprintä¸­ã€‚</p><h1>åˆæœŸè®¾è®¡</h1><img src="0.jpg" alt="æ¶æ„" style="zoom:20%;" /><h1>æ–‡çŒ®åˆ†æ</h1><h2 id="ç¬¬ä¸€ç¯‡">ç¬¬ä¸€ç¯‡</h2><p>ä¸€ç§ç©ºé—´æ›´ä¼˜çš„å¿«é€Ÿéœå¤«æ›¼è§£ç ç®—æ³•ï¼š</p><blockquote><p>[1].Chen, H.C., Y.L. Wang and Y.F. Lan, A memory-efficient and fast Huffman decoding algorithm. INFORMATION PROCESSING LETTERS, 1999. 69(3): p. 119-122.</p></blockquote><p>ä»¥è¿™æ£µéœå¤«æ›¼æ ‘ä¸ºä¾‹ï¼š</p><img src="1.png" style="zoom:50%;" /><h3 id="ä¸€äº›å®šä¹‰">ä¸€äº›å®šä¹‰</h3><p>å„å¶å­èŠ‚ç‚¹ä»å·¦è‡³å³ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>s</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>s</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_0,s_1...s_{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºï¼ˆå…±æœ‰nä¸ªç¼–ç å…ƒç´ ï¼‰</p><p><code>level</code>è¡¨ç¤ºèŠ‚ç‚¹æ‰€åœ¨,çº§æ•°ï¼Œæ ¹èŠ‚ç‚¹çº§æ•°ä¸º0ï¼Œç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>è¡¨ç¤º</p><p><code>height</code>è¡¨ç¤ºäºŒå‰æ ‘é«˜åº¦ï¼Œå³éœå¤«æ›¼æ ‘ä¸­<code>level</code>çš„æœ€å¤§å€¼ï¼Œç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span>è¡¨ç¤º</p><p>ç¼–ç å…ƒç´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„<code>weight</code>ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤ºï¼ˆ<strong>æ³¨æ„è¿™ä¸ªè·Ÿé¢˜å¹²é‡Œçš„å…ƒç´ æƒé‡æˆ–è€…å‡ºç°é¢‘ç‡æ˜¯ä¸ä¸€æ ·çš„</strong>ï¼‰ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>l</mi></mrow></msup></mrow><annotation encoding="application/x-tex">w_i = 2^{h-l}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span></span></span></span></p><p>å®šä¹‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mn>0</mn></msub><mo>=</mo><msub><mi>w</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">count_0 = w_0,count_i = count_{i-1} + w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8234109999999999em;vertical-align:-0.208331em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ(å…¶å®è¿™ä¸ªæ˜¯ä¸å¿…è¦çš„)</p><hr><p>é‚£ä¹ˆå¯¹äºä¸€æ£µéœå¤«æ›¼æ ‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å®ƒçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_i,w_i,count_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„å¯¹åº”çš„å€¼çš„è¡¨ï¼Œä»¥ä¸Šé¢çš„éœå¤«æ›¼æ ‘ä¸ºä¾‹ï¼š</p><p>ç”¨ä¸‰ä¸ª<strong>æ•°ç»„</strong>å­˜å‚¨ç›¸åº”å…ƒç´ </p><img src="2.png" style="zoom:50%;" /><h3 id="ç¬¬ä¸€ç§ç®—æ³•">ç¬¬ä¸€ç§ç®—æ³•</h3><h4 id="ä¼ªä»£ç ï¼ˆç®—æ³•é€»è¾‘ï¼‰">ä¼ªä»£ç ï¼ˆç®—æ³•é€»è¾‘ï¼‰</h4><p>é‚£ä¹ˆï¼Œåœ¨å¯¹éœå¤«æ›¼ç¼–ç è¿›è¡Œè§£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¸Œæœ›åœ¨å°½å¯èƒ½çŸ­çš„æ—¶é—´å†…é€šè¿‡ç¼–ç è·å–åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œç®—æ³•ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><ul><li><p>Step1ï¼šè®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mo stretchy="false">(</mo><mi>c</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">t = (c+1)\times2^{h-d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span>æ˜¯äºŒè¿›åˆ¶æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> çš„ä½æ•°ï¼Œå¼ä¸­çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> æ¢ç®—æˆåè¿›åˆ¶å‚ä¸è®¡ç®—</p></li><li><p>Step2ï¼šåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span>çš„æ•°ç»„ä¸­æœç´¢<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span>ï¼š</p><ul><li>è‹¥æ²¡æœ‰ç›¸åº”çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">count_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span> ç›¸ç­‰ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ä¸æ˜¯ä¸€ä¸ªç¼–ç </li><li>è‹¥å­˜åœ¨ï¼Œå‡è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>k</mi></msub><mo>=</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">count_k = t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span></li></ul></li><li><p>Step3ï¼šå¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>k</mi></msub><mo mathvariant="normal">â‰ </mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">w_k \neq 2^{h-d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ä¸æ˜¯ä¸€ä¸ªç¼–ç ï¼Œå¦åˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„ç¼–ç å…ƒç´ å°±æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">s_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼ˆç›¸å½“äºæ‰¾åˆ°äº†å…ƒç´ å­˜å‚¨çš„ä¸‹æ ‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>ï¼‰</p></li></ul><h4 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h4><p>ï¼ˆç›´æ¥ç”¨åŸæ–‡çš„ä¾‹å­å§ï¼Œå¾ˆå¥½ç†è§£ï¼‰</p><img src="3.png" style="zoom:50%;" /><h4 id="åŸç†">åŸç†</h4><p>å‡è®¾æœ‰é«˜ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„æ»¡äºŒå‰æ ‘ï¼ˆéœå¤«æ›¼æ ‘ï¼‰ï¼Œåˆ™æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>h</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{h+1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ä¸ªèŠ‚ç‚¹ï¼ˆæ³¨æ„è¿™é‡Œå¯¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span>çš„å®šä¹‰å…¶å®ä¸è¯¾ç¨‹ä¸­è®²çš„å¹¶ä¸ä¸€æ ·ï¼‰ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>h</mi></msup></mrow><annotation encoding="application/x-tex">2^h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span>ä¸ªå¶å­ã€‚ä¸å¦¨è®¾å„å¶å­ï¼ˆç¼–ç å…ƒç´ ï¼‰ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>s</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>s</mi><mrow><msup><mn>2</mn><mi>h</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_0,s_1...s_{2^{h}-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.691511em;vertical-align:-0.26095099999999993em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.49738em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7820285714285713em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.26095099999999993em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">w_i = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">count_i = i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ã€‚</p><p>é‚£ä¹ˆï¼Œå¯¹äºç»™å®šçš„äºŒè¿›åˆ¶ç¼–ç  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„åè¿›åˆ¶å°±æ˜¯å¯¹åº”çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">s_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„ä¸‹æ ‡å€¼ã€‚</p><p>å‡è®¾é«˜ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„éœå¤«æ›¼æ ‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> ä¸ä¸ºæ»¡äºŒå‰æ ‘ï¼Œåˆ™çº§æ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>l</mi></mrow></msup></mrow><annotation encoding="application/x-tex">w_i = 2^{h-l}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span></span></span></span> ï¼Œä¹Ÿå°±æ˜¯å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">s_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯å¯¹åº”çš„é«˜ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„æ»¡äºŒå‰æ ‘æ—¶ï¼Œè¯¥èŠ‚ç‚¹ä½œä¸ºå†…éƒ¨èŠ‚ç‚¹çš„å­æ ‘çš„å¶å­çš„æ•°é‡ã€‚</p><p>åœ¨æœç´¢ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„ç¼–ç å…ƒç´ æ—¶ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> çš„ä½æ•°å°äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> ï¼Œåˆ™è¿½åŠ è¶³å¤Ÿçš„1æ¥è·å¾—é•¿åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„äºŒè¿›åˆ¶ä¸² <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">c&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> ï¼ˆå…¶å®å°±ç›¸å½“äºè¡¥æˆæ»¡äºŒå‰æ ‘çš„æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆï¼Œå®šä¹‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„<code>weight</code> ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>=</mo><mi>c</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">X = c+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> æˆ–  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>=</mo><msup><mi>c</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">X = c&#x27;+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.835222em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ã€‚</p><p>æ˜¾ç„¶ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> ä¸åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span> çš„æ•°åˆ—ä¸­ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ä¸€å®šä¸æ˜¯ä¸€ä¸ªå…ƒç´ çš„äºŒè¿›åˆ¶ç¼–ç ã€‚è‹¥åœ¨ï¼Œä½†ç”±äºæˆ‘ä»¬è¿½åŠ äº†è¶³å¤Ÿçš„1å»è·å–é•¿åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„äºŒè¿›åˆ¶ä¸²ï¼Œåˆ™å¯èƒ½å­˜åœ¨å¤šä¸ªäºŒè¿›åˆ¶ä¸²å¯¹åº”å€¼ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> çš„<code>weight</code>ï¼Œæ‰€ä»¥éœ€è¦ç¬¬ä¸‰æ­¥çš„æ£€éªŒã€‚</p><h4 id="å¤æ‚åº¦">å¤æ‚åº¦</h4><p>æ˜¾ç„¶æ—¶é—´å¤æ‚åº¦æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œç›¸è¾ƒäºä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æˆ–ç›´æ¥ä½¿ç”¨é˜Ÿåˆ—çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlog_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>æœ‰è¾ƒå¤§æå‡ã€‚</p><p>å ç”¨çš„ç©ºé—´åˆ™ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">3n+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ï¼Œç”¨äºå­˜å‚¨ä¸‰ä¸ªæ•°åˆ—åŠæ ‘çš„é«˜åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> ã€‚ä½†æ˜¯å…¶å®è‡³å°‘å¯ä»¥ä¼˜åŒ–åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ï¼Œå› ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mi>i</mi></msub><mo>âˆ’</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><msub><mi>t</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">w_i = count_i-count_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76508em;vertical-align:-0.15em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8234109999999999em;vertical-align:-0.208331em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œæ‰€ä»¥å­˜å‚¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> çš„æ•°åˆ—æ˜¯ä¸å¿…è¦çš„ã€‚</p><h3 id="ç¬¬äºŒç§ç®—æ³•ï¼ˆæ”¹è¿›çš„ç®—æ³•ï¼‰">ç¬¬äºŒç§ç®—æ³•ï¼ˆæ”¹è¿›çš„ç®—æ³•ï¼‰</h3><p>ç°åœ¨çš„ç©ºé—´å ç”¨å·²ç»å‹ç¼©åˆ°äº† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2n+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> ï¼Œæˆ‘ä»¬å¸Œæœ›è¿›ä¸€æ­¥å‹ç¼© <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span> çš„å ç”¨ç©ºé—´ã€‚</p><p>ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub><mo>=</mo><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>+</mo><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mo stretchy="false">âŒŠ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‹</mo></mrow><annotation encoding="application/x-tex">W_i=w_{2i}+w_{2i+1},i=1,2,..,\lfloor {\dfrac{n-1}{2}} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8678509999999999em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">..</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">âŒŠ</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">âŒ‹</span></span></span></span>ã€‚è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä¸ºå¥‡æ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msub><mo>=</mo><msub><mi>w</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">W_{(n-1)/2}=w_{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.03853em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mtight">/2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></p><p>ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mn>0</mn></msub><mo>=</mo><msub><mi>W</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">COUNT_0=W_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>W</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mo stretchy="false">âŒŠ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‹</mo></mrow><annotation encoding="application/x-tex">COUNT_i=COUNT_{i-1}+W_i,i=1,2,...,\lfloor {\dfrac{n-1}{2}} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">âŒŠ</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">âŒ‹</span></span></span></span> ã€‚</p><p>æ­¤å¤–ï¼Œå®šä¹‰ä¸€ä¸ªæ–°å˜é‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>â‰¤</mo><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mo stretchy="false">âŒŠ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‹</mo></mrow><annotation encoding="application/x-tex">w_{2i} \leq w_{2i+1},i=1,2,..,\lfloor {\dfrac{n-1}{2}} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8678509999999999em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">..</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">âŒŠ</span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose">âŒ‹</span></span></span></span>ï¼Œåˆ™ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">b_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>ï¼Œå¦åˆ™ï¼Œå³<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>&gt;</mo><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">w_{2i}&gt;w_{2i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> æ—¶ï¼Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">b_i=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ã€‚</p><p>ç”±äºæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">COUNT_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ•°åˆ—è·å–ï¼ˆè®¡ç®—å‡ºï¼‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ‰€ä»¥ä¸å¿…å­˜å‚¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">W_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ã€‚</p><h4 id="ä¼ªä»£ç ">ä¼ªä»£ç </h4><p><strong>è¾“å…¥</strong>ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>ï¼Œ</mtext><mi>b</mi><mtext>ï¼Œ</mtext><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">sï¼Œbï¼ŒCOUNT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathnormal">b</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span></span></span></span> çš„æ•°åˆ—ã€æ ‘çš„é«˜åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> ä»¥åŠäºŒè¿›åˆ¶ç¼–ç  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ã€‚</p><p><strong>è¾“å‡º</strong>ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„ç¼–ç å…ƒç´  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">s_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><strong>è¿‡ç¨‹</strong>ï¼š</p><ul><li>Step1ï¼šè®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mo stretchy="false">(</mo><mi>c</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">t = (c+1)\times2^{h-d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span>æ˜¯äºŒè¿›åˆ¶æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> çš„ä½æ•°ï¼Œå¼ä¸­çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> æ¢ç®—æˆåè¿›åˆ¶å‚ä¸è®¡ç®—</li><li>Step2ï¼šæ‰¾åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">COUNT_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>&lt;</mo><mi>t</mi><mo>â‰¤</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">COUNT_{k-1}&lt;t \leq COUNT_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ã€‚</li><li>Step3ï¼šè®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>k</mi></msub><mo>âˆ’</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x=COUNT_k-COUNT_{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> ã€‚</li><li>Step4ï¼šåˆ†è§£ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1,x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><msub><mi>e</mi><mi>i</mi></msub></msup><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">x=x_1+x_2,x_i = 2^{e_i},i=1,2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.858832em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span></span></span></span> å¯¹äºéè´Ÿæ•´æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ï¼Œä¸å¤±æ•´ä½“æ€§åœ°å‡è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mo>â‰¤</mo><msub><mi>e</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">e_1 \leq e_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><ul><li>è¯¥åˆ†è§£å¯ä»¥å¦‚ä¸‹è¿›è¡Œï¼šåˆ¤æ–­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">âŒŠ</mo><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>x</mi></mrow><mo stretchy="false">âŒ‹</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{\lfloor {log_2x} \rfloor}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">âŒŠ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mathnormal mtight">x</span></span><span class="mclose mtight">âŒ‹</span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯å¦ç­‰äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> ï¼Œè‹¥ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><msup><mn>2</mn><mrow><mo stretchy="false">âŒŠ</mo><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>x</mi></mrow><mo stretchy="false">âŒ‹</mo></mrow></msup></mrow><annotation encoding="application/x-tex">x_2=2^{\lfloor {log_2x} \rfloor}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">âŒŠ</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mathnormal mtight">x</span></span><span class="mclose mtight">âŒ‹</span></span></span></span></span></span></span></span></span></span></span></span> ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1=x-x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ã€‚å¦åˆ™ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>x</mi><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">x_1=x_2=\dfrac{x}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.7935600000000003em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li></ul></li><li>Step5ï¼šç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">b_k,x_1,x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> è®¡ç®—å‡º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mn>2</mn><mi>k</mi></mrow></msub><mo separator="true">,</mo><msub><mi>s</mi><mrow><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{2k},s_{2k+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ç›¸åº”çš„<code>weight</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>a</mi></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">w_a,w_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><ul><li><strong>å…¶å®åº”å½“æ³¨æ„åˆ°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>W</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x=W_k,x_1,x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯¹åº”<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo separator="true">,</mo><msub><mi>w</mi><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">w_{2i},w_{2i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></strong>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>2</mn><mi>k</mi><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a=2k,b=2k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ã€‚</li><li>å¯¹åº”åœ°æ˜“è§£<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">b_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä»¥åŠ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><msub><mi>e</mi><mi>i</mi></msub></msup></mrow><annotation encoding="application/x-tex">x_i = 2^{e_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>ï¼ˆä¹Ÿå°±æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><msub><mi>e</mi><mi>i</mi></msub></msup></mrow><annotation encoding="application/x-tex">w_i=2^{e_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>çš„å½¢å¼ï¼‰</li></ul></li><li>Step6ï¼šè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">t=COUNT_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>b</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">w_b=2^{h-d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span> ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„ç¼–ç å…ƒç´ å°±æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{2k+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> ã€‚ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=2k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå¹¶ç»ˆæ­¢ç®—æ³•ã€‚</li><li>Step7ï¼šè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mi>k</mi></msub><mo>âˆ’</mo><msub><mi>w</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">t=COUNT_k-w_b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>a</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>h</mi><mo>âˆ’</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">w_a=2^{h-d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=2k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå¹¶ç»ˆæ­¢ç®—æ³•ã€‚éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> ä¸æ˜¯ä¸€ä¸ªç¼–ç ã€‚</li></ul><h4 id="ä¸¾ä¾‹-2">ä¸¾ä¾‹</h4><p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„éœå¤«æ›¼æ ‘ä¸ºä¾‹</p><img src="4.png" style="zoom:80%;" /><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><mn>0111</mn></mrow><annotation encoding="application/x-tex">c=0111</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0111</span></span></span></span>ã€‚<ul><li>ç¬¬ä¸€æ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mo stretchy="false">(</mo><mn>7</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>Ã—</mo><msup><mn>2</mn><mrow><mn>5</mn><mo>âˆ’</mo><mn>4</mn></mrow></msup><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">t=(7+1) \times 2^{5-4}=16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">16</span></span></span></span> ã€‚</li><li>ç¬¬äºŒæ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mn>1</mn></msub><mo>&lt;</mo><mi>t</mi><mo>â‰¤</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">COUNT_{1}&lt; t \leq COUNT_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>ã€‚</li><li>ç¬¬ä¸‰æ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">x = 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>ã€‚</li><li>ç¬¬å››æ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">x_1=1,x_2=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>ã€‚</li><li>ç¬¬äº”æ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>4</mn><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mn>5</mn><mo separator="true">,</mo><msub><mi>w</mi><mi>a</mi></msub><mo>=</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>w</mi><mi>b</mi></msub><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a=4,b=5,w_a=1,w_b=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></li><li>ç¬¬å…­æ­¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><msub><mi>T</mi><mn>2</mn></msub><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">t=COUNT_2=16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">16</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>b</mi></msub><mo>=</mo><mn>2</mn><mo>=</mo><msup><mn>2</mn><mrow><mn>5</mn><mo>âˆ’</mo><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">w_b=2=2^{5-4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> å¯¹åº”çš„ç¼–ç å…ƒç´ æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mn>5</mn></msub></mrow><annotation encoding="application/x-tex">s_5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ul></li></ul><p><strong>åŸç†å…¶å®æ˜¯è·Ÿä¸Šé¢çš„ç®—æ³•ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œæ²¡æœ‰å­˜å‚¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>å¹¶ä¸”å°†<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>è¿›è¡Œäº†ä¸¤ä¸¤å½’å¹¶ã€‚</strong></p><h4 id="å¤æ‚åº¦-2">å¤æ‚åº¦</h4><p>æ—¶é—´å¤æ‚åº¦ä»ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>ç©ºé—´å¤æ‚åº¦ï¼Œæ•°åˆ— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo separator="true">,</mo><mi>C</mi><mi>O</mi><mi>U</mi><mi>N</mi><mi>T</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">s,COUNT,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">CO</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span>ä»¥åŠæ ‘çš„é«˜åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> çš„ç©ºé—´å¤æ‚åº¦åˆ†åˆ«ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo separator="true">,</mo><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mrow><mn>2</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo separator="true">,</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n,\lceil \dfrac{n}{2} \rceil,\lceil \dfrac{n}{2log_2n} \rceil,1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.9880000000000002em;vertical-align:-0.8804400000000001em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span></span></span></span> ï¼Œæ€»å…±çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯è¿™å››é¡¹çš„å’Œã€‚</p><p>å³ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mn>3</mn><mi>n</mi></mrow><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo>+</mo><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mrow><mn>2</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lceil \dfrac{3n}{2} \rceil+\lceil \dfrac{n}{2log_2n} \rceil+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.9880000000000002em;vertical-align:-0.8804400000000001em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><h2 id="ç¬¬äºŒç¯‡">ç¬¬äºŒç¯‡</h2><blockquote><p>[1]èƒ¡ä¸½è¹,æ—é¹­.ä¸€ç§åŸºäºå¤šçº§æŸ¥æ‰¾è¡¨çš„é«˜æ•ˆHuffmanç¼–ç ç®—æ³•[J].æ•°å­¦æ‚å¿—,2012,32(04):753-760.DOI:10.13548/j.sxzz.2012.04.028.</p></blockquote><p>æ–‡ä¸­æ‰©å±•éœå¤«æ›¼æ ‘å’Œåˆ†çº§å­˜å‚¨çš„æ€æƒ³å¯¹æˆ‘çš„éœå¤«æ›¼æ ‘çš„å­˜å‚¨æ–¹å¼æœ‰è¾ƒå¤§å¯å‘ã€‚</p><p>è¯¥æ–‡ä¸­é€šè¿‡å¯¹æ ‘è¿›è¡Œåˆ†çº§å¹¶å®šä¹‰åç§»é‡æ¥æé«˜ä¼ ç»ŸæŸ¥æ‰¾è¡¨çš„æ•°æ®å­˜å‚¨æ•ˆç‡ï¼Œä½†å®é™…ä¸ŠåŸæ–‡ä¸­æ„å»ºå¤šé‡æŸ¥æ‰¾è¡¨çš„è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ä»ç„¶æ˜¯ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \cdot 2^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> çš„ç®—æ³•ï¼ˆæ›´ä¸¥æ ¼çš„è¯´æ˜¯è¿‘ä¼¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo>â‹…</mo><msup><mn>2</mn><mi>h</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(h \cdot 2^h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> çš„ç®—æ³•ï¼Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> ä¸ºæ ‘çš„é«˜åº¦ã€‚è¿™å°±å¯¼è‡´è™½ç„¶åœ¨ç©ºé—´å¤æ‚åº¦ä¸Šå®ç°äº†ä¼˜åŒ–ï¼Œä½†ä¹Ÿä»˜å‡ºäº†ä¸€å®šçš„æ—¶é—´å¤æ‚åº¦çš„ä»£ä»·ï¼Œæ˜¯ä¸€ç§ä»¥æ—¶é—´æ¢ç©ºé—´çš„æ–¹æ³•ã€‚</p><p><strong>ä½†å…¶å®åœ¨éœå¤«æ›¼æ ‘ä¸­ï¼ŒçœŸæ­£æœ‰æ•ˆçš„æ•°æ®å…¶å®å°±æ˜¯å¶å­å…ƒç´ ï¼ˆåŸå§‹å­—ç¬¦ä¸å…¶ç¼–ç ï¼‰åŠä»–ä»¬çš„ä½ç½®</strong>ã€‚æ‰€ä»¥å®Œå…¨å¯ä»¥é€šè¿‡å°†æ ‘è¡¥æ»¡åè®°å½•å„ä¸ªå¶å­èŠ‚ç‚¹çš„ä½ç½®å’Œå†…å®¹ï¼Œåœ¨æ¢å¤éœå¤«æ›¼æ ‘æ—¶é€šè¿‡å¶å­èŠ‚ç‚¹è‡ªåº•å‘ä¸Šå®Œæˆæ„å»ºã€‚</p><p>åŸºäºè¿™ç§æ€æƒ³æˆ‘å®Œæˆäº†å¯¹å¶å­èŠ‚ç‚¹çš„æ•°æ®ä¿å­˜ç­–ç•¥ï¼Œåœ¨<strong>ç»¼åˆå¼€å‘-é€»è¾‘å±‚-åˆå§‹åŒ–-å¶å­èŠ‚ç‚¹çš„å®šä½ç­–ç•¥</strong>éƒ¨åˆ†ç»™å‡ºäº†åˆ†æã€‚</p><h2 id="ç¬¬ä¸‰ç¯‡">ç¬¬ä¸‰ç¯‡</h2><blockquote><p>[1]æ–‡å›½çŸ¥.åŸºäºCè¯­è¨€çš„è‡ªé€‚åº”Huffmanç¼–ç ç®—æ³•åˆ†æåŠå®ç°ç ”ç©¶.æ­¦æ±‰å·¥ä¸šå­¦é™¢å­¦æŠ¥,2011,30(2):53-57+62.<br>é€šè¿‡Cè¯­è¨€ç¨‹åº,åŠ¨æ€ç»Ÿè®¡ä¿¡æºç¬¦å·æ¦‚ç‡,é€æ­¥æ„é€ Huffmanç¼–ç æ ‘,å®ç°äº†è‡ªé€‚åº”Huffmanç¼–ç ,è§£å†³äº†é™æ€ç¼–ç æ ‘ä¸èƒ½æ ¹æ®ä¿¡æºç¬¦å·çš„å±€éƒ¨å˜åŒ–åšå‡ºç›¸åº”å˜åŒ–çš„ä¸»è¦é—®é¢˜ã€‚ç»“æœè¡¨æ˜,è‡ªé€‚åº”Huffmanç¼–ç ç®—æ³•å‹ç¼©ç‡å¾ˆå¤§,èƒ½è¿›ä¸€æ­¥æé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚</p></blockquote><p>è¿™ç¯‡æ–‡çŒ®å…³æ³¨çš„æ˜¯è¯¾ç¨‹è®¾è®¡çš„åˆå§‹åŒ–å’Œç¼–ç ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><p>Huffmanç¼–ç ç®—æ³•è¿›è¡Œç¼–ç æ—¶ï¼Œå¿…é¡»è¿›è¡Œä¸¤æ¬¡æ‰«æï¼Œç¬¬ä¸€æ¬¡æ‰«æç»Ÿè®¡å­—ç¬¦å‡ºç°çš„æ¦‚ç‡ï¼ˆæƒé‡ï¼‰ï¼Œå¹¶æ®æ­¤è¿›è¡Œæ„é€ Huffmanæ ‘ï¼›ç¬¬äºŒæ¬¡æ‰«ææ˜¯æŒ‰Huffmanæ ‘çš„å­—ç¬¦è¿›è¡Œç¼–ç ã€‚</p><p>è™½ç„¶é¢˜ç›®ä¸­ç»™å‡ºçš„æ¡ä»¶å…è®¸è¾“å…¥å„èŠ‚ç‚¹çš„æƒå€¼ï¼Œä½†åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­æ˜¯ä¸ç°å®çš„ã€‚</p><p>è€Œè‡ªå®šä¹‰å“ˆå¤«æ›¼ç¼–ç ï¼Œé¢„å…ˆä¸çŸ¥é“å„ç§ç¬¦å·çš„å‡ºç°é¢‘ç‡ï¼Œç¼–ç æ ‘çš„åˆå§‹çŠ¶æ€åªåŒ…å«ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œå³NYTï¼ˆNot Yet Transmittedï¼‰ï¼ŒNYTæ˜¯ä¸€ä¸ªæº¢å‡ºç ï¼Œä¸åŒäºä»»ä½•ä¸€ä¸ªå°†è¦ä¼ é€çš„ç¬¦å·ï¼Œå½“ä¸€ä¸ªå°šæœªåŒ…å«åœ¨ç¼–ç æ ‘ä¸­çš„ç¬¦å·éœ€è¦è¢«ç¼–ç æ—¶ï¼Œé¦–å…ˆè¾“å‡ºNYTçš„ç¼–ç ï¼Œç„¶åè·Ÿç€ç¬¦å·çš„åŸå§‹è¡¨è¾¾ã€‚å½“è§£ç å™¨è§£å‡ºä¸€ä¸ªNYTä¹‹åï¼Œå®ƒå°±çŸ¥é“ä¸‹é¢çš„å†…å®¹æš‚æ—¶ä¸å†æ˜¯Huffmanç¼–ç ï¼Œè€Œæ˜¯ä¸€ä¸ªä»æœªåœ¨ç¼–ç æ•°æ®æµä¸­å‡ºç°è¿‡çš„åŸå§‹ç¬¦å·ã€‚å½“æ’å…¥ä¸€ä¸ªç¬¦å·qæ—¶ï¼Œä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š</p><ol><li><strong>qæ˜¯ç¬¬ä¸€æ¬¡å‡ºç°çš„å­—ç¬¦ç»“ç‚¹</strong>ã€‚æ„é€ ä¸€ä¸ªæ–°çš„å­æ ‘ï¼Œå­æ ‘åŒ…å«NYTç¬¦å·å’Œæ–°ç¬¦å·ä¸¤ä¸ªå¶èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç„¶å<strong>åˆ¤æ–­è¯¥å­æ ‘çš„çˆ¶èŠ‚ç‚¹æ˜¯å¦æ˜¯æ˜¯å½“å‰æƒé‡ä¸‹ç¼–å·æœ€å¤§çš„ç»“ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥æ›´æ–°æƒé‡å³å¯ï¼›å¦åˆ™ï¼Œå°†çˆ¶èŠ‚ç‚¹ä¸ç›¸åŒæƒé‡çš„ç¼–å·æœ€é«˜çš„ç»“ç‚¹äº¤æ¢ï¼Œå†æ›´æ–°æƒé‡å€¼ã€‚</strong><br><img src="5.png" alt="æ’å…¥æ–°çš„å­—ç¬¦èŠ‚ç‚¹"></li><li><strong>qä¸æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°çš„å­—ç¬¦ç»“ç‚¹ã€‚å¦‚æœqæ‰€åœ¨èŠ‚ç‚¹ï¼Œæ˜¯å½“å‰èŠ‚ç‚¹æƒé‡ä¸‹ç¼–å·æœ€å¤§çš„ç»“ç‚¹ï¼Œåˆ™ç›´æ¥ä½¿å…¶å½“å‰èŠ‚ç‚¹æƒé‡åŠçˆ¶èŠ‚ç‚¹æƒé‡åŠ 1å³å¯ã€‚å¦åˆ™ï¼Œå°†å½“å‰èŠ‚ç‚¹ä¸ç›¸åŒæƒé‡çš„ç¼–å·æœ€é«˜çš„ç»“ç‚¹äº¤æ¢ï¼Œå†æ›´æ–°æƒé‡å€¼ã€‚</strong></li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥åœ¨è¿›è¡Œç¼–ç çš„åŒæ—¶æ„å»ºéœå¤«æ›¼æ ‘å¹¶è·å–åˆ°ç›¸åº”ç¼–ç ï¼Œæå‡ç¨‹åºè¿è¡Œæ•ˆç‡ã€‚</p><p><strong>ä½†æ˜¯å­˜åœ¨çš„æœ€ä¸»è¦çš„é—®é¢˜æ˜¯å…¶ç¼–ç ä¸é‡‡ç”¨æ™®é€šéœå¤«æ›¼ç¼–ç æ‰€å¾—çš„ç¼–ç åºåˆ—å¹¶ä¸ä¸€è‡´ï¼Œæ‰€ä»¥æ— æ³•é‡‡ç”¨è¿™ç§æ–¹æ³•ç›´æ¥è·å–åˆ°å¯è§£æçš„éœå¤«æ›¼ç¼–ç ï¼ˆå…¶å®å¦‚æœéœ€è¦è§£æè¿˜æ˜¯éœ€è¦ä¾æ®è¿™æ£µç¼–ç æ ‘çš„åŠ¨æ€è°ƒæ•´ï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ï¼‰</strong>ã€‚</p><p>ï¼ˆå…¶å®è¿™ç§æ–¹æ³•æœ€å¤§çš„é—®é¢˜åœ¨äºè·å–åˆ°çš„ç¼–ç ä¸æ™®é€šéœå¤«æ›¼ç¼–ç æ‰€å¾—çš„ç¼–ç åºåˆ—å¹¶ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¿˜è¦é‡æ–°ç¼–ç ï¼‰</p><h2 id="ç¬¬å››ç¯‡">ç¬¬å››ç¯‡</h2><blockquote><p>[1]æä¼Ÿç”Ÿ, æåŸŸ, ç‹æ¶›. ä¸€ç§ä¸ç”¨å»ºé€ Huffmanæ ‘çš„é«˜æ•ˆHuffmanç¼–ç ç®—æ³•[J]. ä¸­å›½å›¾è±¡å›¾å½¢å­¦æŠ¥, 2005, 10(3):382-387.</p></blockquote><p>ç”±äºé¢˜ç›®ä¸­æ˜ç¡®è¦æ±‚æ„å»ºéœå¤«æ›¼æ ‘ä¸”è¯¥æ–‡ç®—æ³•å…¶å®æ˜¯ä¸€ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> çš„ç®—æ³•ï¼Œæ•…æœªé‡‡ç”¨ï¼Œä½†å…¶åŸç†ç¡®å®æœ‰è¶£ï¼Œä¹Ÿå¯¹æˆ‘çš„ä»£ç é€»è¾‘æœ‰ä¸€å®šå¯å‘ã€‚å°¤å…¶æ˜¯æ–‡ä¸­å¤§éƒ¨åˆ†å‰æéƒ½æ˜¯ç”±æ»¡äºŒå‰æ ‘æ¼”è¿›åˆ°éœå¤«æ›¼æ ‘ï¼Œç»™æˆ‘çš„æ•´ä½“ä»£ç é€»è¾‘ä¸æ¨ç†æä¾›äº†å¾ˆå¤§å¯å‘ã€‚</p><h1>ç»¼åˆå¼€å‘</h1><h2 id="é€»è¾‘å±‚">é€»è¾‘å±‚</h2><h3 id="ç±»ä¸ç»“æ„ä½“">ç±»ä¸ç»“æ„ä½“</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::ifstream;</span><br><span class="line"><span class="keyword">using</span> std::ofstream;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> weight;</span><br><span class="line">    <span class="keyword">int</span> num;<span class="comment">//èŠ‚ç‚¹æ ‡å·,åœ¨æ„å»ºå®Œæ ‘ä¹‹åä¸è¦è½»æ˜“ä½¿ç”¨è¿™ä¸ªå˜é‡åšä»»ä½•é€»è¾‘è¿ç®—</span></span><br><span class="line">    Node* p_left;</span><br><span class="line">    Node* p_right;</span><br><span class="line">    Node* p_parent;</span><br><span class="line">    <span class="built_in">Node</span>(Node* p_left, Node* p_right, Node* p_parent) : <span class="built_in">p_left</span>(p_left), <span class="built_in">p_right</span>(p_right), <span class="built_in">p_parent</span>(p_parent) &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Brother</span>&#123;</span>LeftChild, RightChild&#125;;</span><br><span class="line">    <span class="built_in">BinaryTree</span>(<span class="keyword">int</span> num = <span class="number">0</span>,<span class="keyword">int</span> weight = <span class="number">0</span>);</span><br><span class="line">    ~<span class="built_in">BinaryTree</span>();</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">swap</span><span class="params">(Node* p_nodeA, Node* p_nodeB)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">addNode</span><span class="params">(Node* p_parent, Node* p_child, Brother brotherState)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteNode</span><span class="params">(Node *p_node)</span></span>;</span><br><span class="line">    <span class="function">Node* <span class="title">getRoot</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> p_root;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Brother <span class="title">getBrotherState</span><span class="params">(Node *p_node)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isAncestor</span><span class="params">(Node* p_nodeChild, Node* p_nodeAncestor)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Node *p_root;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Leaf</span>&#123;</span></span><br><span class="line">    std::string key;</span><br><span class="line">    <span class="keyword">int</span> level;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    std::string codeword;</span><br><span class="line">    Node* p;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuffmanTree</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">HuffmanTree</span>();</span><br><span class="line">    ~<span class="built_in">HuffmanTree</span>();</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">ReadFile</span><span class="params">(<span class="keyword">const</span> std::string&amp; str)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">encode</span><span class="params">(<span class="keyword">const</span> std::string&amp; str1,<span class="keyword">const</span> std::string&amp; str2)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">decodeWithMap</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">buildTree</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeNYT</span><span class="params">(Node* nyt)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">writeTree</span><span class="params">(<span class="keyword">const</span> std::string&amp; filename)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">readTree</span><span class="params">(<span class="keyword">const</span> std::string&amp; filename)</span></span>;</span><br><span class="line"></span><br><span class="line">    std::unordered_map&lt;std::string,Leaf*&gt; leaves;<span class="comment">//æ‰€æœ‰ç°å­˜çš„å¶å­</span></span><br><span class="line">    std::unordered_map&lt;std::string,std::string&gt; codewordMap;</span><br><span class="line">    std::string encodeResult;</span><br><span class="line">    std::string decodeResult;</span><br><span class="line">    BinaryTree* tree;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">weightAdd</span><span class="params">(Node* p_node)</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">getHuffmanCode</span><span class="params">(Node *p)</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="function">Node * <span class="title">findLarge</span><span class="params">(Node *)</span> <span class="keyword">const</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getCodewordMap</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setLevelAndN</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">writeEncodeResultAsBinaryStream</span><span class="params">(<span class="keyword">const</span> std::string&amp; filepath, <span class="keyword">const</span> std::string&amp; filename)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getLocate</span><span class="params">(<span class="keyword">int</span> level, <span class="keyword">int</span> n)</span></span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> sum;</span><br><span class="line">    std::unordered_map&lt;<span class="keyword">int</span>,Node*&gt; allRebuildNewNodes;</span><br><span class="line">    std::unordered_map&lt;<span class="keyword">int</span>,Leaf*&gt; allRebuildLeafNodes;</span><br><span class="line"></span><br><span class="line">    ifstream is;</span><br><span class="line">    ofstream os;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–ï¼š">åˆå§‹åŒ–ï¼š</h3><p>é€šè¿‡è‡ªé€‚åº”éœå¤«æ›¼ç¼–ç å¯¹è·å–åˆ°çš„å­—ç¬¦åºåˆ—è¿›è¡Œç¼–ç ï¼Œç›´æ¥å®Œæˆåˆå§‹åŒ–ï¼Œä¸å¿…è¯»å…¥æƒå€¼ã€‚ç¼–ç åå¯¹éœå¤«æ›¼æ ‘è¿›è¡Œå‹ç¼©å‘é€ï¼ˆå°†æ‰€æœ‰éå¶å­èŠ‚ç‚¹å…¨éƒ¨å‰ªæ‰è€Œä»…ä¿ç•™æœ‰æ•ˆä¿¡æ¯ï¼‰ï¼Œä½¿è§†å›¾å±‚èƒ½é€šè¿‡æ¥æ”¶åˆ°çš„éœå¤«æ›¼æ ‘çš„ä¿¡æ¯è¿›è¡Œé‡å»ºéœå¤«æ›¼æ ‘ã€‚</p><h4 id="è·å–éœå¤«æ›¼ç¼–ç çš„ç­–ç•¥ï¼š">è·å–éœå¤«æ›¼ç¼–ç çš„ç­–ç•¥ï¼š</h4><p>ä½¿ç”¨æ ˆï¼Œç”±å¶å­èŠ‚ç‚¹å¾ªç¯å‘çˆ¶èŠ‚ç‚¹ç§»åŠ¨ï¼Œè‹¥å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­åˆ™å‘æ ˆä¸­åŠ å…¥0ï¼Œå¦åˆ™åŠ å…¥1ï¼Œç»“æŸåå°†æ ˆå†…å®¹ä¾æ¬¡<code>pop</code>å³å¯ã€‚ï¼ˆ<strong>ç›¸å½“äºå®Œæˆäº†ä¸€æ¬¡å­—ç¬¦ä¸²åå‘è¾“å‡º</strong>ï¼Œæ—¶é—´å¤æ‚åº¦<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>)</p><h4 id="æŸ¥è¯¢ç­–ç•¥ï¼š">æŸ¥è¯¢ç­–ç•¥ï¼š</h4><p>åŠ¨æ€ç¼–ç æ—¶å¸¸å¸¸è¦æŸ¥æ‰¾æŸå­—ç¬¦æ˜¯å¦å·²ç»ç¼–ç è¿‡ï¼Œè‹¥ä½¿ç”¨çº¿æ€§ç»“æ„å­˜å‚¨å·²ç»ç¼–ç çš„å…ƒç´ åˆ™æ€»ä½“ç¼–ç çš„æ—¶é—´ä¼šè¾¾åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \cdot m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>ä¸ºå­—ç¬¦ä¸ªæ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> ä¸ºæ€»çš„å­—ç¬¦é•¿åº¦ï¼‰ã€‚</p><p>ä¸ºæ­¤ï¼Œä½¿ç”¨<code>unordered_map</code>æ›¿æ¢çº¿æ€§è¡¨ï¼Œå¯å°†è¿™ä¸€éƒ¨åˆ†æ—¶é—´æ‚åº¦é™ä½åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>ä½†ç”±äºæ›´æ–°ä¸€ä¸ªèŠ‚ç‚¹æƒé‡çš„æ—¶é—´å¤æ‚åº¦åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \cdot log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\cdot (log_2n)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ä¹‹é—´ï¼ˆå¦‚æœä¸ç”¨è°ƒæ¢å­æ ‘ä¸èŠ‚ç‚¹ä½ç½®åˆ™å¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\cdot log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œä½†å¯èƒ½å­˜åœ¨è°ƒæ¢å­æ ‘ä¸æŸä¸€èŠ‚ç‚¹ä½ç½®å¹¶æ›´æ–°ç¼–ç çš„æƒ…å†µä½¿å¾—å¤æ‚åº¦å¤§äºè¿™ä¸ªå€¼ä½†å°äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\cdot (log_2n)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼‰ï¼Œæ‰€ä»¥æ€»ä½“çš„æ—¶é—´å¤æ‚åº¦ä»ä»‹äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\cdot log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn\cdot (log_2n)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ä¹‹é—´ã€‚ï¼ˆä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>u</mi><mi>n</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(un\cdot (log_2n)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> ä¸ºè°ƒæ¢çš„æ¬¡æ•°ï¼Œé€šå¸¸æ¥è¯´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> å°äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>ï¼‰ã€‚</p><h4 id="èŠ‚ç‚¹çš„å®šä½ç­–ç•¥ï¼š">èŠ‚ç‚¹çš„å®šä½ç­–ç•¥ï¼š</h4><p>å¯¹äºä»»æ„éœå¤«æ›¼æ ‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>ï¼Œå®šä¹‰å…¶å¯¹åº”çš„æ»¡äºŒå‰æ ‘ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> ã€‚</p><p>å®šä¹‰æ ‘çš„çº§æ•°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2...</mn><mi>h</mi></mrow><annotation encoding="application/x-tex">0,1,2...h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2...</span><span class="mord mathnormal">h</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">h</span></span></span></span> ä¸ºæ ‘çš„é«˜åº¦ã€‚ï¼ˆé¿å…â€œçº§æ•°æ˜¯ä»1å¼€å§‹ç®—â€çš„è¯¯è§£ï¼‰ã€‚</p><p>å®šä¹‰ä¸¤èŠ‚ç‚¹ä¹‹é—´çš„<strong>è½å·® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span></strong>ï¼ˆ<code>drop</code>ï¼‰ä¸ºä¸¤èŠ‚ç‚¹çš„çº§æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>ï¼ˆ<code>level</code>ï¼‰ä¹‹å·®çš„ç»å¯¹å€¼ï¼Œä¹Ÿå³ <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">Î”</mi><mi>l</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">d=|\Delta l|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£Î”</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord">âˆ£</span></span></span></span></strong></p><p>ç”¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ä»£è¡¨æŸä¸€èŠ‚ç‚¹åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> ä¸­<strong>æ‰€åœ¨çº§æ•°çš„ä½ç½®</strong>ï¼ˆä»å·¦åˆ°å³ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> ~ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{level}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼‰</p><p>å¯¹äºä»»æ„çš„ä¸€ä¸ªç¼–ç ï¼Œ<strong>ç¼–ç çš„é•¿åº¦å…¶å®å°±æ˜¯è¯¥å¶å­èŠ‚ç‚¹åœ¨æ ‘ä¸­çš„çº§æ•°</strong>ï¼Œç¼–ç ä»å¤´åˆ°å°¾çš„è¿‡ç¨‹ä¹Ÿå°±æ˜¯ä»éœå¤«æ›¼æ ‘æ ¹èŠ‚ç‚¹åˆ°ç¼–ç å…ƒç´ å¶å­èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> ï¼š<strong>ç›¸å¯¹åç§»é‡ç´¯åŠ </strong></p><p>å®šä¹‰ä¸¤èŠ‚ç‚¹é—´çš„<strong>ç›¸å¯¹åç§»é‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï•</mi><mo>=</mo><msup><mn>2</mn><mrow><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\phi=2^{d-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Ï•</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo>â‹¯</mo></mrow><annotation encoding="application/x-tex">d=1,2,3 \cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â‹¯</span></span></span></span></strong> ï¼Œä¾æ®ç¼–ç ï¼ŒæŒ‡é’ˆä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œ<strong>è‹¥ä¸‹ä¸€èŠ‚ç‚¹æ˜¯å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘ï¼Œåˆ™ç´¯åŠ å½“å‰èŠ‚ç‚¹ä¸å¶å­èŠ‚ç‚¹é—´çš„ç›¸å¯¹åç§»é‡</strong>ï¼Œå¹¶å°†æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚é‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œç›´è‡³å½“å‰æŒ‡é’ˆæŒ‡åˆ°å¶å­èŠ‚ç‚¹ã€‚</p><p>å¦‚ï¼š</p><img src="6.png" style="zoom:70%;" /><p>å¯¹äºèŠ‚ç‚¹ï¼ˆ2ï¼‰ï¼Œç¼–ç 101ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">level=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><msup><mn>2</mn><mrow><mn>3</mn><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mn>1</mn><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">n=2^{3-1}+2^{1-1}=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å¶å­èŠ‚ç‚¹æ˜¯æ ‘ä¸­ç¬¬å››çº§ç¬¬å…­ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æœè®¤ä¸ºæ ¹èŠ‚ç‚¹ç®—ç¬¬ä¸€çº§ï¼‰ã€‚</p><p>é‚£ä¹ˆï¼Œè¯¥èŠ‚ç‚¹çš„å®šä½<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>=</mo><msup><mn>2</mn><mi>l</mi></msup><mo>+</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">locate = 2^{l}+n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><h4 id="ä¸è¶³ï¼š">ä¸è¶³ï¼š</h4><ul><li>æ¯æ¬¡æ›´æ–°ç¼–ç éƒ½è¦åœ¨<code>unordered_map</code>é‡Œæ›´æ–°ä¸€éå¯¹åº”ç¼–ç ï¼Œé€ æˆä¸€å®šçš„æ—¶é—´æµªè´¹ã€‚</li><li>åœ¨å¢åŠ èŠ‚ç‚¹æƒå€¼æ˜¯å‡ºç°è°ƒæ¢å­æ ‘ä¸æŸä¸€èŠ‚ç‚¹ä½ç½®åè¦æ›´æ–°èŠ‚ç‚¹çš„éœå¤«æ›¼ç¼–ç ï¼Œ<strong>å¢åŠ æƒå€¼</strong>ä¸<strong>æ›´æ–°èŠ‚ç‚¹çš„éœå¤«æ›¼ç¼–ç </strong>çš„å¤æ‚åº¦éƒ½ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œ<strong>éå†æ— åºå“ˆå¸Œè¡¨</strong>ä¸ºæ‰€æœ‰å·²ç¼–ç å…ƒç´ æ›´æ–°ç¼–ç çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œä½¿å¾—æ•´ä¸ªè¿‡ç¨‹å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\cdot (log_2n)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼–ç éƒ½éœ€è¦æ›´æ–°ï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥ä¼˜åŒ–ã€‚<ul><li>ï¼ˆå…¶å®è¿™é‡Œè¢«è¿«éå†æ˜¯å› ä¸ºç¼–ç é‡‡ç”¨äº†æ— åºå“ˆå¸Œè¡¨å­˜å‚¨ï¼Œä½†è‹¥é‡‡ç”¨æœ‰åºè¡¨å­˜å‚¨ï¼Œåœ¨æ›´æ–°æ—¶ä»è¦æ¶‰åŠå…ƒç´ çš„æŸ¥æ‰¾ï¼Œä¹Ÿè‡³å°‘æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>n</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(lon_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥å¯ä¼˜åŒ–çš„ç©ºé—´å¹¶ä¸æ˜¯å¾ˆå¤§ï¼‰</li></ul></li></ul><h3 id="ç¼–ç ï¼š">ç¼–ç ï¼š</h3><p>ç¼–ç è¿‡ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨åˆå§‹åŒ–æ—¶å½¢æˆçš„æ— åºå“ˆå¸Œè¡¨ï¼Œä½¿å¾—æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>ã€‚ä½†ç”±äºç¼–ç çš„å­˜å‚¨å½¢å¼éƒ½æ˜¯å­—ç¬¦ï¼ˆä¸²ï¼‰ï¼Œæ‰€ä»¥è¿˜éœ€è¦å°†å­—ç¬¦ä¸²è½¬åŒ–æˆæ•°å­—ã€‚</p><h4 id="æ–¹æ¡ˆä¸€ï¼š">æ–¹æ¡ˆä¸€ï¼š</h4><p><code>Unsigned long long</code>çš„æ•°å€¼èŒƒå›´æ˜¯<code>0~18446744073709551615 (2^64 - 1)</code>ï¼Œå¯ä»¥å°†ç¼–ç åçš„æ•°å­—è½¬åŒ–æˆ<code>Unsigned long long</code>å­˜å‚¨ï¼Œæ¯ä¸ªæ•°å­—å ç”¨8å­—èŠ‚ç©ºé—´ï¼Œä¸è¿‡å­˜åœ¨å¼€å¤´æ˜¯0è€Œè¢«çœå»çš„æƒ…å†µï¼Œä½†åªè¦ä¸¥æ ¼æŒ‰ç…§æ¯20ä½å­˜ä¸ºä¸€ä¸ªæ•°ï¼Œåªè¦åœ¨è¢«çœå»çš„ä½ç½®è¡¥0å°±å¯ä»¥äº†ã€‚</p><h4 id="æ–¹æ¡ˆäºŒï¼š">æ–¹æ¡ˆäºŒï¼š</h4><p>å¯ä»¥å¯¹ç¼–ç è¿›è¡ŒäºŒæ¬¡ç¼–ç ã€‚å³æ¯å››ä½è½¬æ¢æˆä¸€ä¸ª16è¿›åˆ¶æ•°å­˜å…¥æ•°ç»„ï¼Œä½†å¯èƒ½å­˜åœ¨æœ«å°¾ä¸è¶³å››ä½çš„æƒ…å†µï¼Œç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼ˆ0,1,2,3ï¼‰ç›´æ¥è®°å½•æœ€åæœ«å°¾çš„ä½æ•°ï¼Œç„¶åç”¨0è¡¥è¶³ç©ºä½è¿›è¡Œè½¬æ¢ã€‚åœ¨è§£ç æ—¶å†è½¬æ¢å›äºŒè¿›åˆ¶æ•°å³å¯ã€‚ç”±äºä¸€ä¸ªåå…­è¿›åˆ¶æ•°åªå åŠä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥èŠ‚çœå¾ˆå¤šç©ºé—´ã€‚</p><p>ç»¼åˆæ¥çœ‹æ–¹æ¡ˆäºŒæ›´ä¼˜ï¼šæ¯20ä½ï¼Œæ–¹æ¡ˆä¸€å ç”¨8å­—èŠ‚ï¼Œæ–¹æ¡ˆäºŒå ç”¨2.5å­—èŠ‚ã€‚ï¼ˆç›¸è¾ƒä¹‹ä¸‹ï¼Œå¦‚æœä¸è½¬æ¢æˆæ•°å­—å†è¿›è¡Œå‹ç¼©ï¼Œé‚£ä¹ˆæ¯ä¸ª<code>char</code>å°±è¦å ç”¨1å­—èŠ‚ï¼‰</p><h4 id="é—®é¢˜ï¼š">é—®é¢˜ï¼š</h4><p>ä½†å…¶å®ï¼Œåœ¨txtæ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½ä¼šå ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸ä¼šå¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·å­˜å‚¨ä¸ºæ•°å­—ï¼Œæ‰€ä»¥å¦‚æœæƒ³åº”ç”¨ä¸Šé¢çš„ä¸¤ç§æ–¹æ¡ˆï¼Œé‚£ä¹ˆç»“æœå°±å¿…é¡»å†™å…¥ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºäºŒè¿›åˆ¶æ–‡ä»¶æ˜¯æ— æ³•ç›´æ¥æ‰“å¼€å¯è¯»çš„ï¼Œè€Œä¸”å¯èƒ½éœ€è¦è‡ªå·±è®¾è®¡æ–‡ä»¶æ ¼å¼ä»¥ä¿è¯æ€§èƒ½ï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰ä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆå‘¢ï¼Ÿ</p><p>ï¼ˆä¸¤ç§æ–‡ä»¶åŒºåˆ«ï¼Œ<a href="https://www.cnblogs.com/zhangjiankun/archive/2011/11/27/2265184.html">å‚è€ƒ</a>ï¼‰</p><h4 id="æ–¹æ¡ˆä¸‰ï¼š">æ–¹æ¡ˆä¸‰ï¼š</h4><p>å¯¹äºç¼–ç æ‰€å¾—çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ¯å…«ä½0ï¼Œ1ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œå­˜å‚¨æˆASCLL å­—ç¬¦ï¼Œåœ¨è§£ç æ—¶å†å°†è¿™äº›å­—ç¬¦ä¸²è§£æä¸ºå…«ä½äºŒè¿›åˆ¶ä¸²ï¼Œè¿™æ ·å…¶å®ä¹Ÿæ˜¯ç›¸å½“äºå­—èŠ‚çš„æ¯ä¸€ä½éƒ½å­˜å‚¨äº†ä¸€ä¸ª0/1çš„å€¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–ç </span></span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> c = <span class="built_in"><span class="keyword">char</span></span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">char</span> ch : encodeResult)&#123;</span><br><span class="line">    c &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">        c |= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        c |= <span class="number">0</span>;</span><br><span class="line">    ++count;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">8</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        os&lt;&lt;c;</span><br><span class="line">        c = <span class="built_in"><span class="keyword">char</span></span>(<span class="number">0</span>);</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (count != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    c &lt;&lt;= (<span class="number">8</span> - count);</span><br><span class="line">    os&lt;&lt;c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£ç </span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> cbuffer;</span><br><span class="line">string codeword;</span><br><span class="line"><span class="keyword">while</span> (!is.<span class="built_in">eof</span>()) &#123; <span class="comment">//æœ«å°¾ä»¥255è¡¨ç¤ºè¾“å…¥çš„ç»“æŸ</span></span><br><span class="line">    cbuffer = is.<span class="built_in">get</span>();</span><br><span class="line">    <span class="keyword">if</span> (cbuffer != <span class="number">255</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> pos = <span class="number">7</span>; pos &gt;= <span class="number">0</span>; --pos)&#123;</span><br><span class="line">            <span class="keyword">if</span> (cbuffer &amp; (<span class="number">1</span> &lt;&lt; pos)) <span class="comment">//1</span></span><br><span class="line">               codeword.<span class="built_in">append</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span>                    <span class="comment">//0</span></span><br><span class="line">                codeword.<span class="built_in">append</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (codewordMap.<span class="built_in">find</span>(codeword) != codewordMap.<span class="built_in">end</span>())&#123;</span><br><span class="line">                decodeResult += codewordMap[codeword];</span><br><span class="line">                codeword = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(è¿™é‡Œä½¿ç”¨å“ˆå¸Œè¡¨å®ç°äº†ä¸€ä¸ªè¿‘ä¼¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>çš„è§£ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éœå¤«æ›¼æ ‘å®ç° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \cdot log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>çš„è§£ç )</p><h3 id="è§£ç ï¼š">è§£ç ï¼š</h3><p>è‹¥é‡‡ç”¨ç¬¬ä¸€ç¯‡æ–‡çŒ®çš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mn>3</mn><mi>n</mi></mrow><mn>2</mn></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo>+</mo><mo stretchy="false">âŒˆ</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>n</mi><mrow><mn>2</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi></mrow></mfrac></mstyle><mo stretchy="false">âŒ‰</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lceil \dfrac{3n}{2} \rceil+\lceil \dfrac{n}{2log_2n} \rceil+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.9880000000000002em;vertical-align:-0.8804400000000001em;"></span><span class="mopen">âŒˆ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></p><p>ä½†å…¶å®ï¼Œå¦‚æœä¹Ÿé‡‡ç”¨<code>unordered_map</code>ï¼Œå³å°†è·å–åˆ°çš„éœå¤«æ›¼æ ‘çš„æ‰€æœ‰å¶å­æŒ‰ç…§ç¼–ç ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mi>e</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">key</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.03588em;">ey</span></span></span></span>ï¼Œå­—ç¬¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">value</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span></span></span></span> ç»„æˆ <code>unordered_map</code>ï¼Œå¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™åˆ°æ¥è¿‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>ï¼Œç©ºé—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">2n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span></span></span></span> ã€‚ä½†åœ¨åˆ›å»ºè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> ã€‚</p><p>æˆ–è€…ï¼Œç›´æ¥é‡‡ç”¨éœå¤«æ›¼æ ‘è¿›è¡Œè§£ç ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>â‹…</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \cdot log_2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p><h3 id="IOï¼š">IOï¼š</h3><p>ä½¿ç”¨çš„IOæ˜¯<code>ifstream</code>ä¸<code>ofstream</code>ï¼Œå¹¶æ²¡æœ‰é’ˆå¯¹è¯»å†™æ–‡ä»¶è¿›è¡Œä¼˜åŒ–ï¼Œä½†å…¶å®è™½ç„¶åœ¨è¯»æ–‡ä»¶                                       ä¸Š<code>ifstream</code>æ•ˆç‡å¹¶ä¸ç®—å¤ªä½ï¼Œä½†å†™æ–‡ä»¶çš„<code>ofstream</code>ç»éæœ€ä½³é€‰æ‹©ï¼Œä½†ä¸ºäº†æ–¹ä¾¿è¿˜æ˜¯é€‰ç”¨äº†ï¼Œæ‰€ä»¥IOè¿˜æœ‰ä¸€å®šçš„ä¼˜åŒ–ç©ºé—´ã€‚</p><h4 id="å­˜åœ¨çš„é—®é¢˜ï¼š">å­˜åœ¨çš„é—®é¢˜ï¼š</h4><p>å­˜åœ¨è¯»å–ä¸­æ–‡ä¸ºä¹±ç çš„é—®é¢˜ï¼Œç½‘ä¸Šç»™å‡ºäº†ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚</p><p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ–‡ä»¶æ ¼å¼æ”¹ä¸º<code>ASCI</code>ï¼ˆå…¶å®``ofstream<code>è¾“å‡ºçš„æ–‡ä»¶ç¼–ç å°±æ˜¯</code>ASCI`ï¼‰ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸åŒç¼–ç æ ¼å¼è¿›è¡Œä¸åŒè¯»å–</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">&quot;C:/Users/Administrator/Desktop/w/1.cpp&quot;</span>,ios::binary)</span></span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span>  s2;</span><br><span class="line">    fin.<span class="built_in">read</span>((<span class="keyword">char</span>*)&amp;s2, <span class="built_in"><span class="keyword">sizeof</span></span>(s2));<span class="comment">//è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œç„¶åå·¦ç§»8ä½</span></span><br><span class="line">    <span class="keyword">int</span> p = s2&lt;&lt;<span class="number">8</span>;</span><br><span class="line">    fin.<span class="built_in">read</span>((<span class="keyword">char</span>*)&amp;s2, <span class="built_in"><span class="keyword">sizeof</span></span>(s2));<span class="comment">//è¯»å–ç¬¬äºŒä¸ªå­—èŠ‚</span></span><br><span class="line">    p +=s2;</span><br><span class="line">string code;</span><br><span class="line"> </span><br><span class="line"><span class="built_in"><span class="keyword">switch</span></span>(p)<span class="comment">//åˆ¤æ–­æ–‡æœ¬å‰ä¸¤ä¸ªå­—èŠ‚</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0xfffe</span>:  <span class="comment">//65534</span></span><br><span class="line">    code = <span class="string">&quot;Unicode&quot;</span>;    </span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0xfeff</span>:<span class="comment">//65279</span></span><br><span class="line">    code = <span class="string">&quot;Unicode big endian&quot;</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0xe6a2</span>:<span class="comment">//59042</span></span><br><span class="line">    code = <span class="string">&quot;UTF-8&quot;</span>;     </span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>: </span><br><span class="line">        code = <span class="string">&quot;ANSI&quot;</span>; </span><br><span class="line">     &#125;</span><br><span class="line">     fin.<span class="built_in">close</span>(); </span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>ç»è¿‡æµ‹è¯•ï¼Œæˆ‘è¿™é‡ŒUTF-8è¾“å‡ºçš„pæ˜¯59042ç»è¿‡è½¬æ¢æ˜¯0xe6a2,è¿™é‡Œå¤§å®¶å¯ä»¥å†è¿›è¡Œä¸€ä¸‹æµ‹è¯•</p><p>ç›´æ¥è¯»å–<code>utf-8</code>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;codecvt&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;locale&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">fin</span><span class="params">(<span class="string">&quot;chapter17_4.txt&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">ofstream <span class="title">fout</span><span class="params">(<span class="string">&quot;chapter17_4.3.txt&quot;</span>)</span></span>;</span><br><span class="line">    std::wstring_convert&lt;std::codecvt_utf8&lt;<span class="keyword">wchar_t</span>&gt;&gt; conv;</span><br><span class="line">    string strfile;</span><br><span class="line">    <span class="keyword">if</span> (!fin.<span class="built_in">is_open</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cerr &lt;&lt; <span class="string">&quot;error in open file.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">char</span> s2;</span><br><span class="line">    fin.<span class="built_in">read</span>((<span class="keyword">char</span>*)&amp;s2, <span class="built_in"><span class="keyword">sizeof</span></span>(s2));<span class="comment">//è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œç„¶åå·¦ç§»8ä½</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> p = s2 &lt;&lt; <span class="number">8</span>;</span><br><span class="line">    fin.<span class="built_in">read</span>((<span class="keyword">char</span>*)&amp;s2, <span class="built_in"><span class="keyword">sizeof</span></span>(s2));<span class="comment">//è¯»å–ç¬¬äºŒä¸ªå­—èŠ‚</span></span><br><span class="line">    p += s2;</span><br><span class="line">    cout &lt;&lt; p &lt;&lt; endl;</span><br><span class="line">    string code;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (p)<span class="comment">//åˆ¤æ–­æ–‡æœ¬å‰ä¸¤ä¸ªå­—èŠ‚</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0xfffe</span>:  <span class="comment">//65534</span></span><br><span class="line">        code = <span class="string">&quot;Unicode&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0xfeff</span>:<span class="comment">//65279</span></span><br><span class="line">        code = <span class="string">&quot;Unicode big endian&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0xe6a2</span>:<span class="comment">//59042</span></span><br><span class="line">    &#123;   </span><br><span class="line">        code = <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">        fin.<span class="built_in">seekg</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">getline</span>(fin, strfile) &amp;&amp; strfile.<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; strfile &lt;&lt; endl;</span></span><br><span class="line">            wstring wb = conv.<span class="built_in">from_bytes</span>(strfile);<span class="comment">//è½¬ä¸ºå®½å­—ç¬¦</span></span><br><span class="line">            wcout.<span class="built_in">imbue</span>(<span class="built_in">locale</span>(<span class="string">&quot;chs&quot;</span>));<span class="comment">//æ›´æ”¹åŒºåŸŸè®¾ç½® åªä¸ºæ§åˆ¶å°è¾“å‡ºæ˜¾ç¤º</span></span><br><span class="line">            wcout &lt;&lt; wb &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        fin.<span class="built_in">close</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        code = <span class="string">&quot;ANSI&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="built_in">getline</span>(fin, strfile) &amp;&amp; strfile.<span class="built_in">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; strfile &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç¼–ç æ˜¯ï¼š&quot;</span> &lt;&lt; code;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\nDone.\n&quot;</span>;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_36437446/article/details/105279221">https://blog.csdn.net/qq_36437446/article/details/105279221</a></p><h4 id="æ”¹è¿›ï¼š">æ”¹è¿›ï¼š</h4><p>æ„Ÿè§‰ä¸Šé¢çš„åŠæ³•å¾ˆéº»çƒ¦ï¼Œæœ€åé€‰æ‹©ä½¿ç”¨<code>getline()</code>çš„å¾ªç¯æ¥è·å–æ‰€æœ‰å­—ç¬¦ï¼Œå¹¶ç”¨<code>string</code>ä½œä¸ºè¯»å…¥ç±»å‹æ›¿ä»£äº†åŸå…ˆçš„é€å­—èŠ‚ï¼ˆ<code>char</code>ï¼‰è¯»å–ï¼Œå› ä¸ºæ˜¾ç„¶255çš„é•¿åº¦æ˜¯è‚¯å®šæ— æ³•ç¼–ç æ‰€æœ‰æ±‰å­—çš„ã€‚åˆå§‹æ€è·¯æ˜¯<code>getline()</code>ä¹‹åè°ƒç”¨<code>substr(i,1)</code>å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¾æ¬¡åˆ†å‰²ï¼Œä½†å‘ç°ä»æœ‰ä¹±ç ã€‚</p><p><strong>ä¹±ç åŸå› åœ¨äºä¸­æ–‡é‡‡ç”¨ä¸‰ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç </strong>ï¼Œè€Œ<code>substr(i,1)</code>åªä¼šæˆªå–ä¸€ä¸ªå­—èŠ‚é•¿åº¦çš„å­ä¸²ï¼Œæ‰€ä»¥åœ¨è¯»å–åˆ°ä¸­æ–‡æ—¶éœ€è¦<code>substr(i,3)</code>ã€‚å°†å­—ç¬¦ä¸²ç”¨%xæ ¼å¼æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥å‘ç°ä¸­æ–‡çš„å­—ç¬¦çš„charå€¼éƒ½æ˜¯0xffffffe6è¿™æ ·çš„ï¼Œè€Œéä¸­æ–‡å­—ç¬¦åˆ™æ˜¯0x2eï¼Œ0x61è¿™æ ·ã€‚æ‰€ä»¥åªéœ€è¦åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä»å¼€å¤´å¼€å§‹æ¯”è¾ƒå­—ç¬¦å€¼ï¼Œå¤§äº0xffffff80ï¼ˆæˆ–è€…å¤§äº0x80ä¹Ÿè¡Œï¼‰çš„å€¼åˆ™ä¸‹æ ‡+3ï¼Œå¦åˆ™ä¸‹æ ‡+1ï¼Œå³å¯ä¿è¯æ±‰å­—å§‹ç»ˆè¢«å®Œæ•´æˆªå–ã€‚æ³¨æ„0xffffff80æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œéœ€è¦å…ˆè½¬ä¸º<code>unsigned int</code>å†æ¯”è¾ƒå¤§å°ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;string&gt; <span class="title">getEachString</span><span class="params">(<span class="keyword">const</span> string&amp; s)</span></span>&#123;</span><br><span class="line">    vector&lt;string&gt; res;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> * chs = s.<span class="built_in">c_str</span>();</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(start &lt; <span class="built_in">strlen</span>(chs) &amp;&amp; start &lt; s.<span class="built_in">length</span>()) &#123;</span><br><span class="line">        length = ((<span class="keyword">unsigned</span> <span class="keyword">int</span>)chs[start] &gt; <span class="number">0x80</span>) ? <span class="number">3</span> : <span class="number">1</span>;</span><br><span class="line">        res.<span class="built_in">push_back</span>(s.<span class="built_in">substr</span>(start, length));</span><br><span class="line">        start += length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ‘çš„é‡å»ºï¼š">æ ‘çš„é‡å»ºï¼š</h3><p>æ ‘é‡å»ºçš„<strong>ä¸»è¦é—®é¢˜åœ¨äºå¦‚ä½•åœ¨æ›´ä½çš„æ—¶é—´å¤æ‚åº¦å†…ç¡®å®šèŠ‚ç‚¹çš„<code>widget</code></strong>ï¼Œä¸»è¦æ€è·¯ä¹Ÿæ— éè‡ªé¡¶å‘ä¸‹æ„å»ºå’Œè‡ªåº•å‘ä¸Šæ„å»ºä¸¤ç§ï¼Œå¦‚æœé€‰æ‹©è‡ªåº•å‘ä¸Šæ„å»ºï¼Œ<strong>é—®é¢˜åœ¨äºæ— æ³•ç›´æ¥é€šè¿‡å­èŠ‚ç‚¹çŸ¥é“å…¶çœŸå®å¯¹åº”çš„çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œé‚£ä¹ˆå°±éœ€è¦é¢å¤–çš„é’ˆå¯¹æŸç§<code>key</code>ä¸èŠ‚ç‚¹çš„å­˜å‚¨ï¼Œåˆ©ç”¨<code>key</code>å­˜åœ¨ä¸å¦åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</strong>ã€‚</p><p>è¿™ä¸ª<code>key</code>å¹¶æ²¡æœ‰é€‰ç”¨<code>num</code>ï¼Œæ˜¯å› ä¸ºå­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹ä¹‹é—´çš„<code>num</code>å¹¶æ— å…³ç³»ï¼Œæ— æ³•é€šè¿‡æ•°å­¦é€»è¾‘è¿›è¡Œäº’æ¨ã€‚å—ç¬¬äºŒç¯‡æ–‡çŒ®å¯å‘ï¼Œæˆ‘ä½¿ç”¨ <code>locate</code> æŒ‰å±‚ç”±ä¸Šå‘ä¸‹ä¾æ¬¡å¯¹<strong>æ»¡äºŒå‰æ ‘</strong>è¿›è¡Œç¼–ç ï¼Œå³ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>=</mo><msup><mn>2</mn><mi>l</mi></msup><mo>+</mo><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">locate = 2^l+n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">oc</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.932438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>ï¼Œå…¶ä¸­<code>l</code>ä¸ºlevelï¼Œéƒ½å¯ä»¥ç”±èŠ‚ç‚¹å±æ€§ç›´æ¥è·å–ï¼Œä½œä¸º<code>key</code>è¿›è¡Œæ ‡è¯†èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œè¿™ä¸ªæ ‡è¯†åœ¨è§†å›¾å±‚ä¹Ÿä¼šç”¨åˆ°ã€‚</p><p>åŸºäº<code>n</code>çš„ç‰¹ç‚¹ï¼Œå¯ä»¥ç›´æ¥ç¡®å®šï¼Œ<strong>è‹¥<code>n</code>ä¸ºå¶æ•°åˆ™ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼ˆ0è®¤ä¸ºæ˜¯å¶æ•°ï¼‰ï¼Œå¦åˆ™åˆ™ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­æ ‘ã€‚é€šè¿‡è¿™ç§æ–¹å¼ç¡®å®šå­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹çš„å·¦å³å­æ ‘å…³ç³»</strong>ã€‚</p><p>è¿™æ ·ï¼Œåªè¦å¯¹æ‰€æœ‰å¶å­èŠ‚ç‚¹è‡ªä¸‹å‘ä¸Šéå†ä¸€éï¼Œä¾æ¬¡å»ºç«‹çˆ¶å­å…³ç³»å³å¯å®Œæˆæ ‘çš„é‡å»ºã€‚</p><p>å¦‚æœåœ¨é‡å»ºæ ‘çš„åŒæ—¶è¿›è¡Œ<code>weight</code>çš„è®¡ç®—ï¼Œä¸€æ–¹é¢ï¼Œæ“ä½œé—´çš„è€¦åˆåº¦å¢åŠ å¯¼è‡´ç»´æŠ¤å›°éš¾ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”±äºé‡‡ç”¨è‡ªåº•å‘ä¸Šæ„å»ºçš„æ–¹æ³•ï¼Œå¯¼è‡´å¢åŠ èŠ‚ç‚¹çš„æ—¶å€™å¯èƒ½å­˜åœ¨æ ‘å¹¶ä¸è¿é€šçš„æƒ…å†µå¯¼è‡´æŸäº›ä¸Šå±‚èŠ‚ç‚¹çš„<code>weight</code>æœªè¢«å¢åŠ ï¼Œæ‰€ä»¥é€‰æ‹©åœ¨å®Œæˆæ ‘çš„èŠ‚ç‚¹é‡å»ºåï¼Œå•ç‹¬éå†å¶å­é›†åˆï¼Œè‡ªåº•å‘ä¸Šå®Œæˆéå†ä¸<code>weight</code>çš„å¢åŠ ã€‚</p><h2 id="è§†å›¾å±‚">è§†å›¾å±‚</h2><h3 id="æ ‘çš„é‡å»º">æ ‘çš„é‡å»º</h3><p>è§†å›¾å±‚ç”±äºå¹¶æ²¡æœ‰æŒ‡é’ˆç±»å‹ï¼Œæ— æ³•é€šè¿‡é“¾è¡¨è¿›è¡Œæ„å»ºï¼Œæœ€ç»ˆé€‰æ‹©<strong>æ¨¡æ‹ŸæŒ‡é’ˆ</strong>ï¼Œä½†å°±éœ€è¦å¯¹èŠ‚ç‚¹çš„å”¯ä¸€å®šä½æ ‡è¯†ä½œä¸ºæ¨¡æ‹ŸæŒ‡é’ˆçš„å€¼ï¼Œæ‰€ä»¥ä»ç„¶æ²¿ç”¨é€»è¾‘å±‚ä¸­<code>locate</code>çš„æ¦‚å¿µï¼Œä½œä¸ºæ¨¡æ‹ŸæŒ‡é’ˆå€¼ã€‚</p><p>åœ¨å­˜å‚¨å½¢å¼ä¸Šï¼Œä»é€‰ç”¨<code>unordered_map</code>ä½¿ç”¨<code>&lt;int,Node*&gt;</code>çš„æ³›å‹è¿›è¡Œå­˜å‚¨ã€‚</p><h4 id="ä¼˜åŒ–ï¼šåŠæ—¶ç»ˆæ­¢">ä¼˜åŒ–ï¼šåŠæ—¶ç»ˆæ­¢</h4><p>åœ¨é€»è¾‘å±‚ä¸è§†å›¾å±‚éƒ½åšäº†ä¼˜åŒ–ï¼Œè€ƒè™‘åˆ°<strong>æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹åªæœ‰å”¯ä¸€ä¸€æ¡è·¯å¾„</strong>ï¼Œé‚£ä¹ˆå¯¹æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼Œåœ¨æƒ³æ ¹èŠ‚ç‚¹éå†çš„è¿‡ç¨‹ä¸­ï¼Œ<strong>è‹¥å‘ç°æŸèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å·²ç»å­˜åœ¨ï¼Œåˆ™å¿…æœ‰ä¸€æ¬¡éå†å·²ç»å»ºç«‹äº†è¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„å”¯ä¸€è·¯å¾„ï¼Œå¯ç›´æ¥ç»“æŸï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„éå†</strong>ã€‚</p><h2 id="æ ‘çš„å¯è§†åŒ–">æ ‘çš„å¯è§†åŒ–</h2><p>è¿™éƒ¨åˆ†å†™åœ¨æˆ‘çš„åšå®¢ï¼š<a href="https://zwn2001.github.io/2022/02/01/%E7%BB%98%E5%88%B6-%E9%9C%8D%E5%A4%AB%E6%9B%BC%E6%A0%91/">ç»˜åˆ¶ï¼šéœå¤«æ›¼æ ‘</a></p><h2 id="ä¸­é—´å±‚">ä¸­é—´å±‚</h2><p>è¿™éƒ¨åˆ†å†™åœ¨æˆ‘çš„åšå®¢ï¼š<a href="https://zwn2001.github.io/2022/01/10/mix-code-flutter-cpp%EF%BC%9A%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">mix-code_flutter-cpp</a></p><h1>æµ‹è¯•ã€æ€»ç»“</h1><h2 id="æµ‹è¯•">æµ‹è¯•</h2><p>æ—¶é—´ç»Ÿè®¡ï¼š<code>QueryPerformanceCounter()</code>ï¼ˆé€»è¾‘å±‚æ—¶é—´ï¼‰</p><p>å‹ç¼©ç‡åŸºæœ¬ç»´æŒåœ¨60%åˆ°80%</p><table><thead><tr><th>æ–‡ä»¶</th><th>å¤§å°</th><th>æ—¶é—´</th><th>CPUå ç”¨ï¼ˆå…±16Gï¼‰</th></tr></thead><tbody><tr><td>1</td><td>195å­—èŠ‚</td><td>0.0130425s</td><td></td></tr><tr><td>2</td><td>7.44K</td><td>1.79969s</td><td>19% <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 1% (3.04G <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 0.16G)</td></tr><tr><td>3</td><td>28K</td><td>7.3096s</td><td>27% <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 1% (4.32G <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 0.16G)</td></tr><tr><td>4</td><td>397K</td><td>139.738s</td><td>24% <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 3% (3.84 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>Â±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">Â±</span></span></span></span> 0.48G)</td></tr></tbody></table><h2 id="æ€»ç»“">æ€»ç»“</h2><h3 id="ç»éªŒä¸ä¸è¶³">ç»éªŒä¸ä¸è¶³</h3><p><code>ifstream</code>å’Œ<code>ofstream</code>åœ¨è¯»å–ä¸­æ–‡æ–‡ä»¶æ—¶å¹¶ä¸èƒ½åšåˆ°å¾ˆå¥½çš„é€‚é…ï¼ŒåŒæ—¶å…¶<code>ASCI</code>çš„ç¼–ç æ ¼å¼å¯¼è‡´åœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘ä¸€å®šçš„ç¼–ç é—®é¢˜ï¼ˆä¸€èˆ¬å¸¸ç”¨çš„ç¼–ç éƒ½æ˜¯utf8ï¼‰ã€‚<strong>æœ€è¦å‘½çš„æ˜¯ä¸æ”¯æŒä¸­æ–‡è·¯å¾„</strong>ã€‚</p><p><code>getline()</code>å’Œ<code>substr()</code>å¯¹äºä¸­æ–‡ç¼–ç é€‚é…ä¹Ÿä¸å¥½ï¼Œä¸ä¸­æ–‡çš„ç¼–ç æ ¼å¼æœ‰å…³ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒIOè¾ƒä½³çš„è¯»å†™æ–¹æ¡ˆæ˜¯ä½¿ç”¨<code>FILE</code>ç±»è¿›è¡Œæ“ä½œï¼Œèƒ½é¿å…å¾ˆå¤šé—®é¢˜ã€‚</p><p><strong>æœ€å¤§çš„ä¸è¶³åœ¨äºåˆå§‹åŒ–éœå¤«æ›¼æ ‘æ—¶ä½¿ç”¨äº†è¿‡å¤šæŒ‡é’ˆå¯¼è‡´æ€§èƒ½è¿‡ä½</strong></p><p><strong>åº”è¯¥é‡‡ç”¨å“ˆå¸Œè¡¨ä¸æ¨¡æ‹ŸæŒ‡é’ˆè§£å†³è¿™ä¸€é—®é¢˜ï¼Œèƒ½å¤Ÿæå¤§åœ°æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡</strong>ã€‚</p><p>å…¶æ¬¡ï¼Œæ–‡ä»¶è¯»å†™<strong>æ›´æ¨èä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œè¯»å†™</strong>ï¼Œä½¿ç”¨æ–‡æœ¬æ–‡ä»¶è¯»å†™åœ¨è¯»å‡ºæ—¶ä¼šé­é‡ä¸€ç³»åˆ—é—®é¢˜ï¼Œå”¯ä¸€çš„ä¼˜ç‚¹æ˜¯å¯ä»¥ç›´æ¥å¯è§†åŒ–ã€‚</p><p>å¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œå»ºè®®ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p><strong>å…¶ä»–ï¼š</strong></p><ul><li>æ¶‰åŠIOä»ç„¶è¾ƒå¤šï¼Œå¯¼è‡´ä¸€å®šçš„æ€§èƒ½ç“¶é¢ˆ</li><li>å±€é™æ€§è¾ƒå¤§ï¼šåªèƒ½å‹ç¼©æ–‡æœ¬</li><li>åˆå§‹åŒ–éœå¤«æ›¼æ ‘çš„å¤æ‚åº¦è¾ƒé«˜å¯¼è‡´äº†ç¨‹åºè€—æ—¶è¾ƒé•¿ï¼ˆåˆå§‹åŒ–éœå¤«æ›¼æ ‘çš„æ—¶é—´å äº†æ€»æ—¶é—´çš„95%ä»¥ä¸Šï¼‰</li><li>è§†å›¾å±‚ä¸é€»è¾‘å±‚ä¹‹é—´çš„äº¤äº’æ•ˆç‡æ¯”è¾ƒä½å¯¼è‡´åœ¨ä½¿ç”¨UIç•Œé¢æ—¶ä½“éªŒä¸ä½³ï¼ˆä¸ä¸­é—´å±‚çš„è°ƒåº¦æœ‰ä¸€å®šå…³ç³»ï¼‰</li><li>è€¦åˆåº¦è¿‡é«˜å¯¼è‡´çš„ç»´æŠ¤å›°éš¾ï¼Œå¯¼è‡´éš¾ä»¥å°†æŒ‡é’ˆé‡å†™æˆå“ˆå¸Œè¡¨ã€‚</li></ul><h1>æ›´è¿›ä¸€æ­¥ï¼š</h1><p>ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ç®—æ˜¯å®Œæˆäº†è¯¾è®¾å†…å®¹ï¼Œä½†æˆ‘å¯¹è‡ªå·±å®Œæˆçš„ç¨‹åºçš„å‹ç¼©æ•ˆç‡è§‰å¾—ç‰¹åˆ«ä¸æ»¡æ„ï¼Œåœ¨æŸ¥é˜…ä¸€äº›èµ„æ–™åé’ˆå¯¹ç°æœ‰çš„é—®é¢˜é‡å†™äº†ä¸€éƒ¨åˆ†ä»£ç ã€‚</p><h2 id="è§£å†³çš„é—®é¢˜ï¼š">è§£å†³çš„é—®é¢˜ï¼š</h2><ul><li><code>ifstream</code>å’Œ<code>ofstream</code>åœ¨ä¸­æ–‡å†…å®¹ä¸ä¸­æ–‡è·¯å¾„ä¸Šä¸é€‚é…çš„é—®é¢˜ï¼Œä½¿ç”¨<code>FILE</code>ä»£æ›¿</li><li>è¿‡å¤šæŒ‡é’ˆå¯¼è‡´çš„æ•ˆç‡ä½ä¸‹ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨å’Œæ¨¡æ‹ŸæŒ‡é’ˆä»£æ›¿</li><li>å±€é™äºæ–‡æœ¬æ–‡ä»¶çš„ç¼–ç å¯¼è‡´å®é™…ä¸Šåªå®Œæˆäº†ç¼–ç è€Œæ²¡æœ‰å®Œæˆå‹ç¼©ï¼Œä¸èƒ½å‹ç¼©å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚pngï¼‰ï¼Œä½¿ç”¨è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ä»£æ›¿ã€‚</li></ul><h2 id="æ—¶é—´ç´§å¼ æ²¡æœ‰åšçš„éƒ¨åˆ†ï¼š">æ—¶é—´ç´§å¼ æ²¡æœ‰åšçš„éƒ¨åˆ†ï¼š</h2><ul><li>éœå¤«æ›¼æ ‘çš„å¯è§†åŒ–å’Œå®Œæ•´çš„UIç•Œé¢ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å†åƒä¸Šé¢é‚£æ ·ä»æ»¡äºŒå‰æ ‘çš„è§†è§’å»çœ‹å¾…éœå¤«æ›¼æ ‘</li></ul><h2 id="ä¸€äº›ä¸è¶³ï¼š">ä¸€äº›ä¸è¶³ï¼š</h2><ul><li>éœå¤«æ›¼ç¼–ç éƒ¨åˆ†ä»ç„¶ä½¿ç”¨äº†ä¼ ç»Ÿçš„ç¼–ç æ€è·¯ï¼Œå³ï¼šéå†è·å–æƒé‡-&gt;å»ºç«‹éœå¤«æ›¼æ ‘-&gt;ç¼–ç ï¼Œå¯¼è‡´ä¸€ä¸ªæ–‡ä»¶è¦è¯»å–ä¸‰éã€‚</li><li>çœç•¥äº†å¾ˆå¤šéœå¤«æ›¼æ ‘çš„ç»†èŠ‚å¦‚æ ‘é«˜å’ŒèŠ‚ç‚¹ä½ç½®çš„æ ‡è®°ï¼Œä½¿å¾—æ•´æ£µæ ‘éš¾ä»¥åšé«˜æ•ˆçš„å¯è§†åŒ–ã€‚</li><li>äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å…¶å®æœ‰å¾ˆå¤šå†—ä½™ä¿¡æ¯ï¼ˆä¸å¿…è¦çš„å ä½ï¼‰ï¼Œä½¿å¾—åœ¨å‹ç¼©å°æ–‡ä»¶æ—¶æ•ˆç‡å¹¶ä¸é«˜</li></ul><h2 id="äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š">äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š</h2><p><img src="7.jpg" alt=""></p><h2 id="æµ‹è¯•-2">æµ‹è¯•</h2><table><thead><tr><th>æ–‡ä»¶</th><th>å¤§å°</th><th>æ—¶é—´</th></tr></thead><tbody><tr><td>1</td><td>195å­—èŠ‚</td><td>0.0005313s</td></tr><tr><td>2</td><td>7.44K</td><td>0.0119407s</td></tr><tr><td>3</td><td>28K</td><td>0.0070038s</td></tr><tr><td>4</td><td>397K</td><td>0.104739s</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonè¿›é˜¶è¯­æ³•è®°å½•-OOPã€IOã€ç½‘ç»œ</title>
      <link href="/2022/01/13/advanced-Python/"/>
      <url>/2022/01/13/advanced-Python/</url>
      
        <content type="html"><![CDATA[<h1>é¢å‘å¯¹è±¡</h1><h2 id="ç±»å’Œå®ä¾‹">ç±»å’Œå®ä¾‹</h2><p>ä»¥Studentç±»ä¸ºä¾‹ï¼Œåœ¨Pythonä¸­ï¼Œå®šä¹‰ç±»æ˜¯é€šè¿‡<code>class</code>å…³é”®å­—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><code>class</code>åé¢ç´§æ¥ç€æ˜¯ç±»åï¼Œå³<code>Student</code>ï¼Œç±»åé€šå¸¸æ˜¯å¤§å†™å¼€å¤´çš„å•è¯ï¼Œç´§æ¥ç€æ˜¯<code>(object)</code>ï¼Œ<strong>è¡¨ç¤ºè¯¥ç±»æ˜¯ä»å“ªä¸ªç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œå¯ä»¥çœç•¥</strong>ã€‚é€šå¸¸ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„ç»§æ‰¿ç±»ï¼Œå°±ä½¿ç”¨<code>object</code>ç±»ï¼Œè¿™æ˜¯æ‰€æœ‰ç±»æœ€ç»ˆéƒ½ä¼šç»§æ‰¿çš„ç±»ã€‚</p><p>å®šä¹‰å¥½äº†<code>Student</code>ç±»ï¼Œå°±å¯ä»¥æ ¹æ®<code>Student</code>ç±»åˆ›å»ºå‡º<code>Student</code>çš„å®ä¾‹ï¼Œ<strong>åˆ›å»ºå®ä¾‹æ˜¯é€šè¿‡ç±»å+()å®ç°çš„</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart</span><br><span class="line">&lt;__main__.Student <span class="built_in">object</span> at <span class="number">0x10a67a590</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">Student</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå˜é‡<code>bart</code>æŒ‡å‘çš„å°±æ˜¯ä¸€ä¸ª<code>Student</code>çš„å®ä¾‹ï¼Œåé¢çš„<code>0x10a67a590</code>æ˜¯å†…å­˜åœ°å€ï¼Œæ¯ä¸ªobjectçš„åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè€Œ<code>Student</code>æœ¬èº«åˆ™æ˜¯ä¸€ä¸ªç±»ã€‚</p><p>å¯ä»¥ä½¿ç”¨ç‚¹å· <strong>.</strong> æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ï¼ŒåŒæ—¶å¯ä»¥è‡ªç”±åœ°ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ç»‘å®šå±æ€§ï¼Œæ¯”å¦‚ï¼Œç»™å®ä¾‹<code>bart</code>ç»‘å®šä¸€ä¸ª<code>name</code>å±æ€§ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.name = <span class="string">&#x27;Bart Simpson&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.name</span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br></pre></td></tr></table></figure><p>ç”±äºç±»å¯ä»¥èµ·åˆ°æ¨¡æ¿çš„ä½œç”¨ï¼Œå› æ­¤ï¼Œå¯ä»¥åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼ŒæŠŠä¸€äº›æˆ‘ä»¬è®¤ä¸ºå¿…é¡»ç»‘å®šçš„å±æ€§å¼ºåˆ¶å¡«å†™è¿›å»ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„<code>__init__</code>æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±æŠŠ<code>name</code>ï¼Œ<code>score</code>ç­‰å±æ€§ç»‘ä¸Šå»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, score</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„åˆ°<code>__init__</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯<code>self</code>ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å®ä¾‹æœ¬èº«</strong>ï¼Œå› æ­¤ï¼Œåœ¨<code>__init__</code>æ–¹æ³•å†…éƒ¨ï¼Œå°±å¯ä»¥æŠŠå„ç§å±æ€§ç»‘å®šåˆ°<code>self</code>ï¼Œå› ä¸º**<code>self</code>å°±æŒ‡å‘åˆ›å»ºçš„å®ä¾‹æœ¬èº«**ã€‚</p><p>æœ‰äº†<code>__init__</code>æ–¹æ³•ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±ä¸èƒ½ä¼ å…¥ç©ºçš„å‚æ•°äº†ï¼Œå¿…é¡»ä¼ å…¥ä¸<code>__init__</code>æ–¹æ³•åŒ¹é…çš„å‚æ•°ï¼Œä½†**<code>self</code>ä¸éœ€è¦ä¼ **ï¼ŒPythonè§£é‡Šå™¨è‡ªå·±ä¼šæŠŠå®ä¾‹å˜é‡ä¼ è¿›å»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart = Student(<span class="string">&#x27;Bart Simpson&#x27;</span>, <span class="number">59</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.name</span><br><span class="line"><span class="string">&#x27;Bart Simpson&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.score</span><br><span class="line"><span class="number">59</span></span><br></pre></td></tr></table></figure><p>å’Œæ™®é€šçš„å‡½æ•°ç›¸æ¯”ï¼Œåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°åªæœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯å®ä¾‹å˜é‡<code>self</code>ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨æ—¶ï¼Œä¸ç”¨ä¼ é€’è¯¥å‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç±»çš„æ–¹æ³•å’Œæ™®é€šå‡½æ•°æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ‰€ä»¥ï¼Œä½ ä»ç„¶å¯ä»¥ç”¨é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å…³é”®å­—å‚æ•°å’Œå‘½åå…³é”®å­—å‚æ•°ã€‚</p><h3 id="selfä»£è¡¨ç±»çš„å®ä¾‹ï¼Œè€Œéç±»">selfä»£è¡¨ç±»çš„å®ä¾‹ï¼Œè€Œéç±»</h3><p>ç±»çš„æ–¹æ³•ä¸æ™®é€šçš„å‡½æ•°åªæœ‰ä¸€ä¸ªç‰¹åˆ«çš„åŒºåˆ«â€”â€”å®ƒä»¬å¿…é¡»æœ‰ä¸€ä¸ªé¢å¤–çš„<strong>ç¬¬ä¸€ä¸ªå‚æ•°åç§°</strong>, æŒ‰ç…§æƒ¯ä¾‹å®ƒçš„åç§°æ˜¯ selfã€‚</p><p>ä»æ‰§è¡Œç»“æœå¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºï¼Œself ä»£è¡¨çš„æ˜¯ç±»çš„å®ä¾‹ï¼Œä»£è¡¨å½“å‰å¯¹è±¡çš„åœ°å€ï¼Œè€Œ <code>self.__class__</code>åˆ™æŒ‡å‘ç±»ã€‚</p><p>self ä¸æ˜¯ python å…³é”®å­—ï¼Œæˆ‘ä»¬æŠŠä»–æ¢æˆ runoop ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ã€‚</p><h3 id="ç±»å±æ€§ä¸æ–¹æ³•">ç±»å±æ€§ä¸æ–¹æ³•</h3><h4 id="ç±»çš„ç§æœ‰å±æ€§">ç±»çš„ç§æœ‰å±æ€§</h4><p><code>__private_attrs</code>ï¼šä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´ï¼Œå£°æ˜è¯¥å±æ€§ä¸ºç§æœ‰ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è¢«ä½¿ç”¨æˆ–ç›´æ¥è®¿é—®ã€‚åœ¨ç±»å†…éƒ¨çš„æ–¹æ³•ä¸­ä½¿ç”¨æ—¶ <strong>self.__private_attrs</strong>ã€‚</p><h4 id="ç±»çš„ç§æœ‰æ–¹æ³•">ç±»çš„ç§æœ‰æ–¹æ³•</h4><p><code>__private_method</code>ï¼šä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´ï¼Œå£°æ˜è¯¥æ–¹æ³•ä¸ºç§æœ‰æ–¹æ³•ï¼Œä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨è°ƒç”¨ã€‚åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨ <strong>self.__private_methods</strong></p><h4 id="å•ä¸‹åˆ’çº¿ã€åŒä¸‹åˆ’çº¿ã€å¤´å°¾åŒä¸‹åˆ’çº¿è¯´æ˜ï¼š">å•ä¸‹åˆ’çº¿ã€åŒä¸‹åˆ’çº¿ã€å¤´å°¾åŒä¸‹åˆ’çº¿è¯´æ˜ï¼š</h4><ul><li><code>__foo__</code>: å®šä¹‰çš„æ˜¯ç‰¹æ®Šæ–¹æ³•ï¼Œä¸€èˆ¬æ˜¯ç³»ç»Ÿå®šä¹‰åå­— ï¼Œç±»ä¼¼ <strong><strong>init</strong>()</strong> ä¹‹ç±»çš„ã€‚</li><li><code>_foo</code>: ä»¥å•ä¸‹åˆ’çº¿å¼€å¤´çš„è¡¨ç¤ºçš„æ˜¯ protected ç±»å‹çš„å˜é‡ï¼Œå³ä¿æŠ¤ç±»å‹åªèƒ½å…è®¸å…¶æœ¬èº«ä¸å­ç±»è¿›è¡Œè®¿é—®ï¼Œä¸èƒ½ç”¨äº <strong>from module import *</strong></li><li><code>__foo</code>: åŒä¸‹åˆ’çº¿çš„è¡¨ç¤ºçš„æ˜¯ç§æœ‰ç±»å‹(private)çš„å˜é‡, åªèƒ½æ˜¯å…è®¸è¿™ä¸ªç±»æœ¬èº«è¿›è¡Œè®¿é—®äº†ã€‚</li></ul><h3 id="æ•°æ®å°è£…">æ•°æ®å°è£…</h3><p>æ—¢ç„¶<code>Student</code>å®ä¾‹æœ¬èº«å°±æ‹¥æœ‰æ•°æ®ï¼Œè¦è®¿é—®è¿™äº›æ•°æ®ï¼Œå°±æ²¡æœ‰å¿…è¦ä»å¤–é¢çš„å‡½æ•°å»è®¿é—®ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>Student</code>ç±»çš„å†…éƒ¨å®šä¹‰è®¿é—®æ•°æ®çš„å‡½æ•°ï¼Œè¿™æ ·ï¼Œå°±æŠŠâ€œæ•°æ®â€ç»™å°è£…èµ·æ¥äº†ã€‚è¿™äº›å°è£…æ•°æ®çš„å‡½æ•°æ˜¯å’Œ<code>Student</code>ç±»æœ¬èº«æ˜¯å…³è”èµ·æ¥çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç±»çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, score</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.score = score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_score</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.name, self.score))</span><br></pre></td></tr></table></figure><p><strong>è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>self</code>å¤–ï¼Œå…¶ä»–å’Œæ™®é€šå‡½æ•°ä¸€æ ·</strong>ã€‚<strong>è¦è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œåªéœ€è¦åœ¨å®ä¾‹å˜é‡ä¸Šç›´æ¥è°ƒç”¨ï¼Œé™¤äº†<code>self</code>ä¸ç”¨ä¼ é€’ï¼Œå…¶ä»–å‚æ•°æ­£å¸¸ä¼ å…¥</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bart.print_score()</span><br><span class="line">Bart Simpson: <span class="number">59</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä»å¤–éƒ¨çœ‹<code>Student</code>ç±»ï¼Œå°±åªéœ€è¦çŸ¥é“ï¼Œåˆ›å»ºå®ä¾‹éœ€è¦ç»™å‡º<code>name</code>å’Œ<code>score</code>ï¼Œè€Œå¦‚ä½•æ‰“å°ï¼Œéƒ½æ˜¯åœ¨<code>Student</code>ç±»çš„å†…éƒ¨å®šä¹‰çš„ï¼Œè¿™äº›æ•°æ®å’Œé€»è¾‘è¢«â€œå°è£…â€èµ·æ¥äº†ï¼Œè°ƒç”¨å¾ˆå®¹æ˜“ï¼Œä½†å´ä¸ç”¨çŸ¥é“å†…éƒ¨å®ç°çš„ç»†èŠ‚ã€‚</p><h2 id="pythonå¯¹è±¡é”€æ¯-åƒåœ¾å›æ”¶">pythonå¯¹è±¡é”€æ¯(åƒåœ¾å›æ”¶)</h2><p>Python ä½¿ç”¨äº†å¼•ç”¨è®¡æ•°è¿™ä¸€ç®€å•æŠ€æœ¯æ¥è·Ÿè¸ªå’Œå›æ”¶åƒåœ¾ã€‚ä¸€ä¸ªå†…éƒ¨è·Ÿè¸ªå˜é‡ï¼Œç§°ä¸ºä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ã€‚åœ¨ Python å†…éƒ¨è®°å½•ç€æ‰€æœ‰ä½¿ç”¨ä¸­çš„å¯¹è±¡å„æœ‰å¤šå°‘å¼•ç”¨ã€‚</p><p>å½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œ å°±åˆ›å»ºäº†ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œ å½“è¿™ä¸ªå¯¹è±¡ä¸å†éœ€è¦æ—¶ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œ è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜ä¸º0 æ—¶ï¼Œ å®ƒè¢«åƒåœ¾å›æ”¶ã€‚ä½†æ˜¯å›æ”¶ä¸æ˜¯&quot;ç«‹å³&quot;çš„ï¼Œ ç”±è§£é‡Šå™¨åœ¨é€‚å½“çš„æ—¶æœºï¼Œå°†åƒåœ¾å¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶ã€‚</p><p>åƒåœ¾å›æ”¶æœºåˆ¶ä¸ä»…é’ˆå¯¹å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å¤„ç†å¾ªç¯å¼•ç”¨çš„æƒ…å†µã€‚å¾ªç¯å¼•ç”¨æŒ‡çš„æ˜¯ï¼Œä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œä½†æ˜¯æ²¡æœ‰å…¶ä»–å˜é‡å¼•ç”¨ä»–ä»¬ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä»…ä½¿ç”¨å¼•ç”¨è®¡æ•°æ˜¯ä¸å¤Ÿçš„ã€‚Python çš„åƒåœ¾æ”¶é›†å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨å’Œä¸€ä¸ªå¾ªç¯åƒåœ¾æ”¶é›†å™¨ã€‚ä½œä¸ºå¼•ç”¨è®¡æ•°çš„è¡¥å……ï¼Œ åƒåœ¾æ”¶é›†å™¨ä¹Ÿä¼šç•™å¿ƒè¢«åˆ†é…çš„æ€»é‡å¾ˆå¤§ï¼ˆå³æœªé€šè¿‡å¼•ç”¨è®¡æ•°é”€æ¯çš„é‚£äº›ï¼‰çš„å¯¹è±¡ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ è§£é‡Šå™¨ä¼šæš‚åœä¸‹æ¥ï¼Œ è¯•å›¾æ¸…ç†æ‰€æœ‰æœªå¼•ç”¨çš„å¾ªç¯ã€‚</p><p>ææ„å‡½æ•° <code>__del__</code> ï¼Œ<code>__del__</code>åœ¨å¯¹è±¡é”€æ¯çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œå½“å¯¹è±¡ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œ<code>__del__</code>æ–¹æ³•è¿è¡Œ</p><p>**æ³¨æ„ï¼š**é€šå¸¸ä½ éœ€è¦åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªç±»ï¼Œ</p><h2 id="ç»§æ‰¿å’Œå¤šæ€">ç»§æ‰¿å’Œå¤šæ€</h2><p>åœ¨OOPç¨‹åºè®¾è®¡ä¸­ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªclassçš„æ—¶å€™ï¼Œå¯ä»¥ä»æŸä¸ªç°æœ‰çš„classç»§æ‰¿ï¼Œæ–°çš„classç§°ä¸ºå­ç±»ï¼ˆSubclassï¼‰ï¼Œè€Œè¢«ç»§æ‰¿çš„classç§°ä¸ºåŸºç±»ã€çˆ¶ç±»æˆ–è¶…ç±»ï¼ˆBase classã€Super classï¼‰ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å·²ç»ç¼–å†™äº†ä¸€ä¸ªåä¸º<code>Animal</code>çš„classï¼Œæœ‰ä¸€ä¸ª<code>run()</code>æ–¹æ³•å¯ä»¥ç›´æ¥æ‰“å°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Animal is running...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬éœ€è¦ç¼–å†™<code>Dog</code>å’Œ<code>Cat</code>ç±»æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä»<code>Animal</code>ç±»ç»§æ‰¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>å¯¹äº<code>Dog</code>æ¥è¯´ï¼Œ<code>Animal</code>å°±æ˜¯å®ƒçš„çˆ¶ç±»ï¼Œå¯¹äº<code>Animal</code>æ¥è¯´ï¼Œ<code>Dog</code>å°±æ˜¯å®ƒçš„å­ç±»ã€‚<code>Cat</code>å’Œ<code>Dog</code>ç±»ä¼¼ã€‚</p><p>ç»§æ‰¿æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿæœ€å¤§çš„å¥½å¤„æ˜¯å­ç±»è·å¾—äº†çˆ¶ç±»çš„å…¨éƒ¨åŠŸèƒ½ã€‚ç”±äº<code>Animial</code>å®ç°äº†<code>run()</code>æ–¹æ³•ï¼Œå› æ­¤ï¼Œ<code>Dog</code>å’Œ<code>Cat</code>ä½œä¸ºå®ƒçš„å­ç±»ï¼Œä»€ä¹ˆäº‹ä¹Ÿæ²¡å¹²ï¼Œå°±è‡ªåŠ¨æ‹¥æœ‰äº†<code>run()</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dog = Dog()</span><br><span class="line">dog.run()</span><br><span class="line"></span><br><span class="line">cat = Cat()</span><br><span class="line">cat.run()</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Animal is running...</span><br><span class="line">Animal is running...</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å¯¹å­ç±»å¢åŠ ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚Dogç±»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Dog is running...&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Eating meat...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿çš„ç¬¬äºŒä¸ªå¥½å¤„éœ€è¦æˆ‘ä»¬å¯¹ä»£ç åšä¸€ç‚¹æ”¹è¿›ã€‚ä½ çœ‹åˆ°äº†ï¼Œæ— è®ºæ˜¯<code>Dog</code>è¿˜æ˜¯<code>Cat</code>ï¼Œå®ƒä»¬<code>run()</code>çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„éƒ½æ˜¯<code>Animal is running...</code>ï¼Œç¬¦åˆé€»è¾‘çš„åšæ³•æ˜¯åˆ†åˆ«æ˜¾ç¤º<code>Dog is running...</code>å’Œ<code>Cat is running...</code>ï¼Œå› æ­¤ï¼Œå¯¹<code>Dog</code>å’Œ<code>Cat</code>ç±»æ”¹è¿›å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Dog is running...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Cat is running...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dog is running...</span><br><span class="line">Cat is running...</span><br></pre></td></tr></table></figure><p>å½“å­ç±»å’Œçˆ¶ç±»éƒ½å­˜åœ¨ç›¸åŒçš„<code>run()</code>æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬è¯´ï¼Œå­ç±»çš„<code>run()</code>è¦†ç›–äº†çˆ¶ç±»çš„<code>run()</code>ï¼Œåœ¨ä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šè°ƒç”¨å­ç±»çš„<code>run()</code>ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±è·å¾—äº†ç»§æ‰¿çš„å¦ä¸€ä¸ªå¥½å¤„ï¼šå¤šæ€ã€‚</p><p>è¦ç†è§£ä»€ä¹ˆæ˜¯å¤šæ€ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¯¹æ•°æ®ç±»å‹å†ä½œä¸€ç‚¹è¯´æ˜ã€‚å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªclassçš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šå°±å®šä¹‰äº†ä¸€ç§æ•°æ®ç±»å‹ã€‚æˆ‘ä»¬å®šä¹‰çš„æ•°æ®ç±»å‹å’ŒPythonè‡ªå¸¦çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚strã€listã€dictæ²¡ä»€ä¹ˆä¸¤æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">list</span>() <span class="comment"># aæ˜¯listç±»å‹</span></span><br><span class="line">b = Animal() <span class="comment"># bæ˜¯Animalç±»å‹</span></span><br><span class="line">c = Dog() <span class="comment"># cæ˜¯Dogç±»å‹</span></span><br></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹å¯ä»¥ç”¨<code>isinstance()</code>åˆ¤æ–­ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(a, <span class="built_in">list</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(b, Animal)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(c, Dog)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><p>çœ‹æ¥<code>a</code>ã€<code>b</code>ã€<code>c</code>ç¡®å®å¯¹åº”ç€<code>list</code>ã€<code>Animal</code>ã€<code>Dog</code>è¿™3ç§ç±»å‹ã€‚</p><p>ä½†æ˜¯ç­‰ç­‰ï¼Œè¯•è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(c, Animal)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure><p>çœ‹æ¥<code>c</code>ä¸ä»…ä»…æ˜¯<code>Dog</code>ï¼Œ<code>c</code>è¿˜æ˜¯<code>Animal</code>ï¼</p><p>ä¸è¿‡ä»”ç»†æƒ³æƒ³ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸º<code>Dog</code>æ˜¯ä»<code>Animal</code>ç»§æ‰¿ä¸‹æ¥çš„ï¼Œå½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>Dog</code>çš„å®ä¾‹<code>c</code>æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸º<code>c</code>çš„æ•°æ®ç±»å‹æ˜¯<code>Dog</code>æ²¡é”™ï¼Œä½†<code>c</code>åŒæ—¶ä¹Ÿæ˜¯<code>Animal</code>ä¹Ÿæ²¡é”™ï¼Œ<code>Dog</code>æœ¬æ¥å°±æ˜¯<code>Animal</code>çš„ä¸€ç§ï¼</p><p>æ‰€ä»¥ï¼Œ<strong>åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œå¦‚æœä¸€ä¸ªå®ä¾‹çš„æ•°æ®ç±»å‹æ˜¯æŸä¸ªå­ç±»ï¼Œé‚£å®ƒçš„æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥è¢«çœ‹åšæ˜¯çˆ¶ç±»ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å°±ä¸è¡Œ</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = Animal()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(b, Dog)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p><code>Dog</code>å¯ä»¥çœ‹æˆ<code>Animal</code>ï¼Œä½†<code>Animal</code>ä¸å¯ä»¥çœ‹æˆ<code>Dog</code>ã€‚</p><p>è¦ç†è§£å¤šæ€çš„å¥½å¤„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å†ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ª<code>Animal</code>ç±»å‹çš„å˜é‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_twice</span>(<span class="params">animal</span>):</span></span><br><span class="line">    animal.run()</span><br><span class="line">    animal.run()</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ä¼ å…¥<code>Animal</code>çš„å®ä¾‹æ—¶ï¼Œ<code>run_twice()</code>å°±æ‰“å°å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>run_twice(Animal())</span><br><span class="line">Animal <span class="keyword">is</span> running...</span><br><span class="line">Animal <span class="keyword">is</span> running...</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ä¼ å…¥<code>Dog</code>çš„å®ä¾‹æ—¶ï¼Œ<code>run_twice()</code>å°±æ‰“å°å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; run_twice(Dog())</span><br><span class="line">Dog is running...</span><br><span class="line">Dog is running...</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ä¼ å…¥<code>Cat</code>çš„å®ä¾‹æ—¶ï¼Œ<code>run_twice()</code>å°±æ‰“å°å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; run_twice(Cat())</span><br><span class="line">Cat is running...</span><br><span class="line">Cat is running...</span><br></pre></td></tr></table></figure><p>çœ‹ä¸Šå»æ²¡å•¥æ„æ€ï¼Œä½†æ˜¯ä»”ç»†æƒ³æƒ³ï¼Œç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ª<code>Tortoise</code>ç±»å‹ï¼Œä¹Ÿä»<code>Animal</code>æ´¾ç”Ÿï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tortoise</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Tortoise is running slowly...&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è°ƒç”¨<code>run_twice()</code>æ—¶ï¼Œä¼ å…¥<code>Tortoise</code>çš„å®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; run_twice(Tortoise())</span><br><span class="line">Tortoise is running slowly...</span><br><span class="line">Tortoise is running slowly...</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°ï¼Œæ–°å¢ä¸€ä¸ª<code>Animal</code>çš„å­ç±»ï¼Œä¸å¿…å¯¹<code>run_twice()</code>åšä»»ä½•ä¿®æ”¹ï¼Œå®é™…ä¸Šï¼Œä»»ä½•ä¾èµ–<code>Animal</code>ä½œä¸ºå‚æ•°çš„å‡½æ•°æˆ–è€…æ–¹æ³•éƒ½å¯ä»¥ä¸åŠ ä¿®æ”¹åœ°æ­£å¸¸è¿è¡Œï¼ŒåŸå› å°±åœ¨äºå¤šæ€ã€‚</p><p>å¤šæ€çš„å¥½å¤„å°±æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¼ å…¥<code>Dog</code>ã€<code>Cat</code>ã€<code>Tortoise</code>â€¦â€¦æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ¥æ”¶<code>Animal</code>ç±»å‹å°±å¯ä»¥äº†ï¼Œå› ä¸º<code>Dog</code>ã€<code>Cat</code>ã€<code>Tortoise</code>â€¦â€¦éƒ½æ˜¯<code>Animal</code>ç±»å‹ï¼Œç„¶åï¼ŒæŒ‰ç…§<code>Animal</code>ç±»å‹è¿›è¡Œæ“ä½œå³å¯ã€‚ç”±äº<code>Animal</code>ç±»å‹æœ‰<code>run()</code>æ–¹æ³•ï¼Œå› æ­¤ï¼Œä¼ å…¥çš„ä»»æ„ç±»å‹ï¼Œåªè¦æ˜¯<code>Animal</code>ç±»æˆ–è€…å­ç±»ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨å®é™…ç±»å‹çš„<code>run()</code>æ–¹æ³•ï¼Œè¿™å°±æ˜¯å¤šæ€çš„æ„æ€ï¼š</p><p>å¯¹äºä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“å®ƒæ˜¯<code>Animal</code>ç±»å‹ï¼Œæ— éœ€ç¡®åˆ‡åœ°çŸ¥é“å®ƒçš„å­ç±»å‹ï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°è°ƒç”¨<code>run()</code>æ–¹æ³•ï¼Œè€Œå…·ä½“è°ƒç”¨çš„<code>run()</code>æ–¹æ³•æ˜¯ä½œç”¨åœ¨<code>Animal</code>ã€<code>Dog</code>ã€<code>Cat</code>è¿˜æ˜¯<code>Tortoise</code>å¯¹è±¡ä¸Šï¼Œç”±è¿è¡Œæ—¶è¯¥å¯¹è±¡çš„ç¡®åˆ‡ç±»å‹å†³å®šï¼Œè¿™å°±æ˜¯å¤šæ€çœŸæ­£çš„å¨åŠ›ï¼š<strong>è°ƒç”¨æ–¹åªç®¡è°ƒç”¨ï¼Œä¸ç®¡ç»†èŠ‚ï¼Œè€Œå½“æˆ‘ä»¬æ–°å¢ä¸€ç§<code>Animal</code>çš„å­ç±»æ—¶ï¼Œåªè¦ç¡®ä¿<code>run()</code>æ–¹æ³•ç¼–å†™æ­£ç¡®ï¼Œä¸ç”¨ç®¡åŸæ¥çš„ä»£ç æ˜¯å¦‚ä½•è°ƒç”¨çš„ã€‚è¿™å°±æ˜¯è‘—åçš„â€œå¼€é—­â€åŸåˆ™ï¼š</strong></p><p><strong>å¯¹æ‰©å±•å¼€æ”¾ï¼šå…è®¸æ–°å¢<code>Animal</code>å­ç±»ï¼›</strong></p><p><strong>å¯¹ä¿®æ”¹å°é—­ï¼šä¸éœ€è¦ä¿®æ”¹ä¾èµ–<code>Animal</code>ç±»å‹çš„<code>run_twice()</code>ç­‰å‡½æ•°ã€‚</strong></p><p>ç»§æ‰¿è¿˜å¯ä»¥ä¸€çº§ä¸€çº§åœ°ç»§æ‰¿ä¸‹æ¥ï¼Œå°±å¥½æ¯”ä»çˆ·çˆ·åˆ°çˆ¸çˆ¸ã€å†åˆ°å„¿å­è¿™æ ·çš„å…³ç³»ã€‚è€Œä»»ä½•ç±»ï¼Œæœ€ç»ˆéƒ½å¯ä»¥è¿½æº¯åˆ°æ ¹ç±»objectï¼Œè¿™äº›ç»§æ‰¿å…³ç³»çœ‹ä¸Šå»å°±åƒä¸€é¢—å€’ç€çš„æ ‘ã€‚æ¯”å¦‚å¦‚ä¸‹çš„ç»§æ‰¿æ ‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                â”‚    object     â”‚</span><br><span class="line">                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                        â”‚</span><br><span class="line">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">           â”‚                         â”‚</span><br><span class="line">           â–¼                         â–¼</span><br><span class="line">    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">    â”‚   Animal    â”‚           â”‚    Plant    â”‚</span><br><span class="line">    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">           â”‚                         â”‚</span><br><span class="line">     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚            â”‚            â”‚            â”‚</span><br><span class="line">     â–¼            â–¼            â–¼            â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚   Dog   â”‚  â”‚   Cat   â”‚  â”‚  Tree   â”‚  â”‚ Flower  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><h3 id="é™æ€è¯­è¨€-vs-åŠ¨æ€è¯­è¨€">é™æ€è¯­è¨€ vs åŠ¨æ€è¯­è¨€</h3><p>å¯¹äºé™æ€è¯­è¨€ï¼ˆä¾‹å¦‚Javaï¼‰æ¥è¯´ï¼Œå¦‚æœéœ€è¦ä¼ å…¥<code>Animal</code>ç±»å‹ï¼Œåˆ™ä¼ å…¥çš„å¯¹è±¡å¿…é¡»æ˜¯<code>Animal</code>ç±»å‹æˆ–è€…å®ƒçš„å­ç±»ï¼Œå¦åˆ™ï¼Œå°†æ— æ³•è°ƒç”¨<code>run()</code>æ–¹æ³•ã€‚</p><p>å¯¹äºPythonè¿™æ ·çš„åŠ¨æ€è¯­è¨€æ¥è¯´ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦ä¼ å…¥<code>Animal</code>ç±»å‹ã€‚æˆ‘ä»¬åªéœ€è¦ä¿è¯ä¼ å…¥çš„å¯¹è±¡æœ‰ä¸€ä¸ª<code>run()</code>æ–¹æ³•å°±å¯ä»¥äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Timer</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Start...&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>è¿™å°±æ˜¯åŠ¨æ€è¯­è¨€çš„â€œé¸­å­ç±»å‹â€ï¼Œå®ƒå¹¶ä¸è¦æ±‚ä¸¥æ ¼çš„ç»§æ‰¿ä½“ç³»ï¼Œä¸€ä¸ªå¯¹è±¡åªè¦â€œçœ‹èµ·æ¥åƒé¸­å­ï¼Œèµ°èµ·è·¯æ¥åƒé¸­å­â€ï¼Œé‚£å®ƒå°±å¯ä»¥è¢«çœ‹åšæ˜¯é¸­å­ã€‚</strong></p><p>Pythonçš„â€œfile-like objectâ€œå°±æ˜¯ä¸€ç§é¸­å­ç±»å‹ã€‚å¯¹çœŸæ­£çš„æ–‡ä»¶å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ª<code>read()</code>æ–¹æ³•ï¼Œè¿”å›å…¶å†…å®¹ã€‚ä½†æ˜¯ï¼Œè®¸å¤šå¯¹è±¡ï¼Œåªè¦æœ‰<code>read()</code>æ–¹æ³•ï¼Œéƒ½è¢«è§†ä¸ºâ€œfile-like objectâ€œã€‚è®¸å¤šå‡½æ•°æ¥æ”¶çš„å‚æ•°å°±æ˜¯â€œfile-like objectâ€œï¼Œä½ ä¸ä¸€å®šè¦ä¼ å…¥çœŸæ­£çš„æ–‡ä»¶å¯¹è±¡ï¼Œå®Œå…¨å¯ä»¥ä¼ å…¥ä»»ä½•å®ç°äº†<code>read()</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p><h2 id="å®ä¾‹å±æ€§å’Œç±»å±æ€§">å®ä¾‹å±æ€§å’Œç±»å±æ€§</h2><p>ç”±äºPythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ ¹æ®ç±»åˆ›å»ºçš„å®ä¾‹å¯ä»¥ä»»æ„ç»‘å®šå±æ€§ã€‚åŠ¨æ€ç»‘å®šå…è®¸æˆ‘ä»¬åœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­åŠ¨æ€ç»™classåŠ ä¸ŠåŠŸèƒ½ï¼Œè¿™åœ¨é™æ€è¯­è¨€ä¸­å¾ˆéš¾å®ç°ã€‚</p><p><strong>ç»™å®ä¾‹ç»‘å®šå±æ€§çš„æ–¹æ³•æ˜¯é€šè¿‡å®ä¾‹å˜é‡ï¼Œæˆ–è€…é€šè¿‡<code>self</code>å˜é‡</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">s = Student(<span class="string">&#x27;Bob&#x27;</span>)</span><br><span class="line">s.score = <span class="number">90</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœ<code>Student</code>ç±»æœ¬èº«éœ€è¦ç»‘å®šä¸€ä¸ªå±æ€§å‘¢ï¼Ÿ<strong>å¯ä»¥ç›´æ¥åœ¨classä¸­å®šä¹‰å±æ€§ï¼Œè¿™ç§å±æ€§æ˜¯ç±»å±æ€§ï¼Œå½’<code>Student</code>ç±»æ‰€æœ‰</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    name = <span class="string">&#x27;Student&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»å±æ€§åï¼Œè¿™ä¸ªå±æ€§è™½ç„¶å½’ç±»æ‰€æœ‰ï¼Œä½†ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥è®¿é—®åˆ°</strong>ã€‚</p><p>å®ä¾‹å±æ€§å±äºå„ä¸ªå®ä¾‹æ‰€æœ‰ï¼Œäº’ä¸å¹²æ‰°ï¼›</p><p>ç±»å±æ€§å±äºç±»æ‰€æœ‰ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªå±æ€§ï¼›</p><p>ä¸è¦å¯¹å®ä¾‹å±æ€§å’Œç±»å±æ€§ä½¿ç”¨ç›¸åŒçš„åå­—ï¼Œå¦åˆ™å°†äº§ç”Ÿéš¾ä»¥å‘ç°çš„é”™è¯¯ã€‚</p><h3 id="ä½¿ç”¨-slots">ä½¿ç”¨<code>__slots__</code></h3><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦é™åˆ¶å®ä¾‹çš„å±æ€§æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚ï¼Œåªå…è®¸å¯¹Studentå®ä¾‹æ·»åŠ <code>name</code>å’Œ<code>age</code>å±æ€§ã€‚</p><p><strong>ä¸ºäº†è¾¾åˆ°é™åˆ¶çš„ç›®çš„ï¼ŒPythonå…è®¸åœ¨å®šä¹‰classçš„æ—¶å€™ï¼Œå®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„<code>__slots__</code>å˜é‡ï¼Œæ¥é™åˆ¶è¯¥classå®ä¾‹èƒ½æ·»åŠ çš„å±æ€§</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    __slots__ = (<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>) <span class="comment"># ç”¨tupleå®šä¹‰å…è®¸ç»‘å®šçš„å±æ€§åç§°</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬è¯•è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student() <span class="comment"># åˆ›å»ºæ–°çš„å®ä¾‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.name = <span class="string">&#x27;Michael&#x27;</span> <span class="comment"># ç»‘å®šå±æ€§&#x27;name&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.age = <span class="number">25</span> <span class="comment"># ç»‘å®šå±æ€§&#x27;age&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">99</span> <span class="comment"># ç»‘å®šå±æ€§&#x27;score&#x27;</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;Student&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;score&#x27;</span></span><br></pre></td></tr></table></figure><p>ç”±äº<code>'score'</code>æ²¡æœ‰è¢«æ”¾åˆ°<code>__slots__</code>ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½ç»‘å®š<code>score</code>å±æ€§ï¼Œè¯•å›¾ç»‘å®š<code>score</code>å°†å¾—åˆ°<code>AttributeError</code>çš„é”™è¯¯ã€‚</p><p><strong>ä½¿ç”¨<code>__slots__</code>è¦æ³¨æ„ï¼Œ<code>__slots__</code>å®šä¹‰çš„å±æ€§ä»…å¯¹å½“å‰ç±»å®ä¾‹èµ·ä½œç”¨ï¼Œå¯¹ç»§æ‰¿çš„å­ç±»æ˜¯ä¸èµ·ä½œç”¨çš„</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">GraduateStudent</span>(<span class="params">Student</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = GraduateStudent()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.score = <span class="number">9999</span></span><br></pre></td></tr></table></figure><p>é™¤éåœ¨å­ç±»ä¸­ä¹Ÿå®šä¹‰<code>__slots__</code>ï¼Œè¿™æ ·ï¼Œ<strong>å­ç±»å®ä¾‹å…è®¸å®šä¹‰çš„å±æ€§å°±æ˜¯è‡ªèº«çš„<code>__slots__</code>åŠ ä¸Šçˆ¶ç±»çš„<code>__slots__</code></strong>ã€‚</p><h3 id="ä½¿ç”¨-property">ä½¿ç”¨@property</h3><p>åœ¨ç»‘å®šå±æ€§æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æŠŠå±æ€§æš´éœ²å‡ºå»ï¼Œè™½ç„¶å†™èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œæ²¡åŠæ³•æ£€æŸ¥å‚æ•°ï¼Œå¯¼è‡´å¯ä»¥æŠŠæˆç»©éšä¾¿æ”¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = Student()</span><br><span class="line">s.score = <span class="number">9999</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¾ç„¶ä¸åˆé€»è¾‘ã€‚ä¸ºäº†é™åˆ¶scoreçš„èŒƒå›´ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ª<code>set_score()</code>æ–¹æ³•æ¥è®¾ç½®æˆç»©ï¼Œå†é€šè¿‡ä¸€ä¸ª<code>get_score()</code>æ¥è·å–æˆç»©ï¼Œè¿™æ ·ï¼Œåœ¨<code>set_score()</code>æ–¹æ³•é‡Œï¼Œå°±å¯ä»¥æ£€æŸ¥å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_score</span>(<span class="params">self</span>):</span></span><br><span class="line">         <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_score</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must be an integer!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must between 0 ~ 100!&#x27;</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå¯¹ä»»æ„çš„Studentå®ä¾‹è¿›è¡Œæ“ä½œï¼Œå°±ä¸èƒ½éšå¿ƒæ‰€æ¬²åœ°è®¾ç½®scoreäº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.set_score(<span class="number">60</span>) <span class="comment"># ok!</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.get_score()</span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.set_score(<span class="number">9999</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: score must between <span class="number">0</span> ~ <span class="number">100</span>!</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä¸Šé¢çš„è°ƒç”¨æ–¹æ³•åˆç•¥æ˜¾å¤æ‚ï¼Œæ²¡æœ‰ç›´æ¥ç”¨å±æ€§è¿™ä¹ˆç›´æ¥ç®€å•ã€‚</p><p>æœ‰æ²¡æœ‰æ—¢èƒ½æ£€æŸ¥å‚æ•°ï¼Œåˆå¯ä»¥ç”¨ç±»ä¼¼å±æ€§è¿™æ ·ç®€å•çš„æ–¹å¼æ¥è®¿é—®ç±»çš„å˜é‡å‘¢ï¼Ÿå¯¹äºè¿½æ±‚å®Œç¾çš„Pythonç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™æ˜¯å¿…é¡»è¦åšåˆ°çš„ï¼</p><p>è¿˜è®°å¾—è£…é¥°å™¨ï¼ˆdecoratorï¼‰å¯ä»¥ç»™å‡½æ•°åŠ¨æ€åŠ ä¸ŠåŠŸèƒ½å—ï¼Ÿå¯¹äºç±»çš„æ–¹æ³•ï¼Œè£…é¥°å™¨ä¸€æ ·èµ·ä½œç”¨ã€‚<strong>Pythonå†…ç½®çš„<code>@property</code>è£…é¥°å™¨å°±æ˜¯è´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨</strong>çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line"><span class="meta">    @score.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must be an integer!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;score must between 0 ~ 100!&#x27;</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure><p><code>@property</code>çš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å…ˆè€ƒå¯Ÿå¦‚ä½•ä½¿ç”¨ã€‚æŠŠä¸€ä¸ªgetteræ–¹æ³•å˜æˆå±æ€§ï¼Œåªéœ€è¦åŠ ä¸Š<code>@property</code>å°±å¯ä»¥äº†ï¼Œæ­¤æ—¶ï¼Œ<code>@property</code>æœ¬èº«åˆåˆ›å»ºäº†å¦ä¸€ä¸ªè£…é¥°å™¨<code>@score.setter</code>ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªsetteræ–¹æ³•å˜æˆå±æ€§èµ‹å€¼ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰ä¸€ä¸ªå¯æ§çš„å±æ€§æ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">60</span> <span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.set_score(60)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score <span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.get_score()</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">9999</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: score must between <span class="number">0</span> ~ <span class="number">100</span>!</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°è¿™ä¸ªç¥å¥‡çš„<code>@property</code>ï¼Œæˆ‘ä»¬åœ¨å¯¹å®ä¾‹å±æ€§æ“ä½œçš„æ—¶å€™ï¼Œå°±çŸ¥é“è¯¥å±æ€§å¾ˆå¯èƒ½ä¸æ˜¯ç›´æ¥æš´éœ²çš„ï¼Œè€Œæ˜¯é€šè¿‡getterå’Œsetteræ–¹æ³•æ¥å®ç°çš„ã€‚</p><p>è¿˜å¯ä»¥å®šä¹‰åªè¯»å±æ€§ï¼Œåªå®šä¹‰getteræ–¹æ³•ï¼Œä¸å®šä¹‰setteræ–¹æ³•å°±æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._birth</span><br><span class="line"></span><br><span class="line"><span class="meta">    @birth.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        self._birth = value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2015</span> - self._birth</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>birth</code>æ˜¯å¯è¯»å†™å±æ€§ï¼Œè€Œ<code>age</code>å°±æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œå› ä¸º<code>age</code>å¯ä»¥æ ¹æ®<code>birth</code>å’Œå½“å‰æ—¶é—´è®¡ç®—å‡ºæ¥ã€‚</p><p>è¦ç‰¹åˆ«æ³¨æ„ï¼š<strong>å±æ€§çš„æ–¹æ³•åä¸è¦å’Œå®ä¾‹å˜é‡é‡å</strong>ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ–¹æ³•åç§°å’Œå®ä¾‹å˜é‡å‡ä¸ºbirth:</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">birth</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.birth</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºè°ƒç”¨<code>s.birth</code>æ—¶ï¼Œé¦–å…ˆè½¬æ¢ä¸ºæ–¹æ³•è°ƒç”¨ï¼Œåœ¨æ‰§è¡Œ<code>return self.birth</code>æ—¶ï¼Œåˆè§†ä¸ºè®¿é—®<code>self</code>çš„å±æ€§ï¼Œäºæ˜¯åˆè½¬æ¢ä¸ºæ–¹æ³•è°ƒç”¨ï¼Œé€ æˆæ— é™é€’å½’ï¼Œæœ€ç»ˆå¯¼è‡´æ ˆæº¢å‡ºæŠ¥é”™<code>RecursionError</code>ã€‚</p><h2 id="æšä¸¾ç±»">æšä¸¾ç±»</h2><p>å½“æˆ‘ä»¬éœ€è¦å®šä¹‰å¸¸é‡æ—¶ï¼Œä¸€ä¸ªåŠæ³•æ˜¯ç”¨å¤§å†™å˜é‡é€šè¿‡æ•´æ•°æ¥å®šä¹‰ï¼Œä¾‹å¦‚æœˆä»½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JAN = <span class="number">1</span></span><br><span class="line">FEB = <span class="number">2</span></span><br><span class="line">MAR = <span class="number">3</span></span><br><span class="line">...</span><br><span class="line">NOV = <span class="number">11</span></span><br><span class="line">DEC = <span class="number">12</span></span><br></pre></td></tr></table></figure><p>å¥½å¤„æ˜¯ç®€å•ï¼Œç¼ºç‚¹æ˜¯ç±»å‹æ˜¯<code>int</code>ï¼Œå¹¶ä¸”ä»ç„¶æ˜¯å˜é‡ã€‚</p><p>æ›´å¥½çš„æ–¹æ³•æ˜¯ä¸ºè¿™æ ·çš„æšä¸¾ç±»å‹å®šä¹‰ä¸€ä¸ªclassç±»å‹ï¼Œç„¶åï¼Œæ¯ä¸ªå¸¸é‡éƒ½æ˜¯classçš„ä¸€ä¸ªå”¯ä¸€å®ä¾‹ã€‚Pythonæä¾›äº†<code>Enum</code>ç±»æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"></span><br><span class="line">Month = Enum(<span class="string">&#x27;Month&#x27;</span>, (<span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Mar&#x27;</span>, <span class="string">&#x27;Apr&#x27;</span>, <span class="string">&#x27;May&#x27;</span>, <span class="string">&#x27;Jun&#x27;</span>, <span class="string">&#x27;Jul&#x27;</span>, <span class="string">&#x27;Aug&#x27;</span>, <span class="string">&#x27;Sep&#x27;</span>, <span class="string">&#x27;Oct&#x27;</span>, <span class="string">&#x27;Nov&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>))</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±è·å¾—äº†<code>Month</code>ç±»å‹çš„æšä¸¾ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>Month.Jan</code>æ¥å¼•ç”¨ä¸€ä¸ªå¸¸é‡ï¼Œæˆ–è€…æšä¸¾å®ƒçš„æ‰€æœ‰æˆå‘˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name, member <span class="keyword">in</span> Month.__members__.items():</span><br><span class="line">    <span class="built_in">print</span>(name, <span class="string">&#x27;=&gt;&#x27;</span>, member, <span class="string">&#x27;,&#x27;</span>, member.value)</span><br></pre></td></tr></table></figure><p><code>value</code>å±æ€§åˆ™æ˜¯è‡ªåŠ¨èµ‹ç»™æˆå‘˜çš„<code>int</code>å¸¸é‡ï¼Œé»˜è®¤ä»<code>1</code>å¼€å§‹è®¡æ•°ã€‚</p><p>å¦‚æœéœ€è¦æ›´ç²¾ç¡®åœ°æ§åˆ¶æšä¸¾ç±»å‹ï¼Œå¯ä»¥ä»<code>Enum</code>æ´¾ç”Ÿå‡ºè‡ªå®šä¹‰ç±»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, unique</span><br><span class="line"></span><br><span class="line"><span class="meta">@unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weekday</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    Sun = <span class="number">0</span> <span class="comment"># Sunçš„valueè¢«è®¾å®šä¸º0</span></span><br><span class="line">    Mon = <span class="number">1</span></span><br><span class="line">    Tue = <span class="number">2</span></span><br><span class="line">    Wed = <span class="number">3</span></span><br><span class="line">    Thu = <span class="number">4</span></span><br><span class="line">    Fri = <span class="number">5</span></span><br><span class="line">    Sat = <span class="number">6</span></span><br></pre></td></tr></table></figure><p><code>@unique</code>è£…é¥°å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥ä¿è¯æ²¡æœ‰é‡å¤å€¼ã€‚</p><p>è®¿é—®è¿™äº›æšä¸¾ç±»å‹å¯ä»¥æœ‰è‹¥å¹²ç§æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>day1 = Weekday.Mon</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(day1)</span><br><span class="line">Weekday.Mon</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(Weekday.Tue)</span><br><span class="line">Weekday.Tue</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(Weekday[<span class="string">&#x27;Tue&#x27;</span>])</span><br><span class="line">Weekday.Tue</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(Weekday.Tue.value)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(day1 == Weekday.Mon)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(day1 == Weekday.Tue)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(Weekday(<span class="number">1</span>))</span><br><span class="line">Weekday.Mon</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(day1 == Weekday(<span class="number">1</span>))</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Weekday(<span class="number">7</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: <span class="number">7</span> <span class="keyword">is</span> <span class="keyword">not</span> a valid Weekday</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> name, member <span class="keyword">in</span> Weekday.__members__.items():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(name, <span class="string">&#x27;=&gt;&#x27;</span>, member)</span><br><span class="line">...</span><br><span class="line">Sun =&gt; Weekday.Sun</span><br><span class="line">Mon =&gt; Weekday.Mon</span><br><span class="line">Tue =&gt; Weekday.Tue</span><br><span class="line">Wed =&gt; Weekday.Wed</span><br><span class="line">Thu =&gt; Weekday.Thu</span><br><span class="line">Fri =&gt; Weekday.Fri</span><br><span class="line">Sat =&gt; Weekday.Sat</span><br></pre></td></tr></table></figure><p>å¯è§ï¼Œ<strong>æ—¢å¯ä»¥ç”¨æˆå‘˜åç§°å¼•ç”¨æšä¸¾å¸¸é‡ï¼Œåˆå¯ä»¥ç›´æ¥æ ¹æ®valueçš„å€¼è·å¾—æšä¸¾å¸¸é‡</strong>ã€‚</p><h1>IO</h1><p><strong>IOç¼–ç¨‹ä¸­ï¼ŒStreamï¼ˆæµï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå¯ä»¥æŠŠæµæƒ³è±¡æˆä¸€ä¸ªæ°´ç®¡ï¼Œæ•°æ®å°±æ˜¯æ°´ç®¡é‡Œçš„æ°´ï¼Œä½†æ˜¯åªèƒ½å•å‘æµåŠ¨</strong>ã€‚Input Streamå°±æ˜¯æ•°æ®ä»å¤–é¢ï¼ˆç£ç›˜ã€ç½‘ç»œï¼‰æµè¿›å†…å­˜ï¼ŒOutput Streamå°±æ˜¯æ•°æ®ä»å†…å­˜æµåˆ°å¤–é¢å»ã€‚</p><p>ç”±äºCPUå’Œå†…å­˜çš„é€Ÿåº¦è¿œè¿œé«˜äºå¤–è®¾çš„é€Ÿåº¦ï¼Œæ‰€ä»¥ï¼Œåœ¨IOç¼–ç¨‹ä¸­ï¼Œå°±å­˜åœ¨é€Ÿåº¦ä¸¥é‡ä¸åŒ¹é…çš„é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œæ¯”å¦‚è¦æŠŠ100Mçš„æ•°æ®å†™å…¥ç£ç›˜ï¼ŒCPUè¾“å‡º100Mçš„æ•°æ®åªéœ€è¦0.01ç§’ï¼Œå¯æ˜¯ç£ç›˜è¦æ¥æ”¶è¿™100Mæ•°æ®å¯èƒ½éœ€è¦10ç§’ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰ä¸¤ç§åŠæ³•ï¼š</p><p>ç¬¬ä¸€ç§æ˜¯CPUç­‰ç€ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºæš‚åœæ‰§è¡Œåç»­ä»£ç ï¼Œç­‰100Mçš„æ•°æ®åœ¨10ç§’åå†™å…¥ç£ç›˜ï¼Œå†æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œè¿™ç§æ¨¡å¼ç§°ä¸º<strong>åŒæ­¥IO</strong>ï¼›</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯CPUä¸ç­‰å¾…ï¼Œåªæ˜¯å‘Šè¯‰ç£ç›˜ï¼Œâ€œæ‚¨è€æ…¢æ…¢å†™ï¼Œä¸ç€æ€¥ï¼Œæˆ‘æ¥ç€å¹²åˆ«çš„äº‹å»äº†â€ï¼Œäºæ˜¯ï¼Œåç»­ä»£ç å¯ä»¥ç«‹åˆ»æ¥ç€æ‰§è¡Œï¼Œè¿™ç§æ¨¡å¼ç§°ä¸º<strong>å¼‚æ­¥IO</strong>ã€‚</p><p>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«å°±åœ¨äºæ˜¯å¦ç­‰å¾…IOæ‰§è¡Œçš„ç»“æœã€‚å¥½æ¯”ä½ å»éº¦å½“åŠ³ç‚¹é¤ï¼Œä½ è¯´â€œæ¥ä¸ªæ±‰å ¡â€ï¼ŒæœåŠ¡å‘˜å‘Šè¯‰ä½ ï¼Œå¯¹ä¸èµ·ï¼Œæ±‰å ¡è¦ç°åšï¼Œéœ€è¦ç­‰5åˆ†é’Ÿï¼Œäºæ˜¯ä½ ç«™åœ¨æ”¶é“¶å°å‰é¢ç­‰äº†5åˆ†é’Ÿï¼Œæ‹¿åˆ°æ±‰å ¡å†å»é€›å•†åœºï¼Œè¿™æ˜¯åŒæ­¥IOã€‚</p><p>ä½ è¯´â€œæ¥ä¸ªæ±‰å ¡â€ï¼ŒæœåŠ¡å‘˜å‘Šè¯‰ä½ ï¼Œæ±‰å ¡éœ€è¦ç­‰5åˆ†é’Ÿï¼Œä½ å¯ä»¥å…ˆå»é€›å•†åœºï¼Œç­‰åšå¥½äº†ï¼Œæˆ‘ä»¬å†é€šçŸ¥ä½ ï¼Œè¿™æ ·ä½ å¯ä»¥ç«‹åˆ»å»å¹²åˆ«çš„äº‹æƒ…ï¼ˆé€›å•†åœºï¼‰ï¼Œè¿™æ˜¯å¼‚æ­¥IOã€‚</p><p>å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨å¼‚æ­¥IOæ¥ç¼–å†™ç¨‹åºæ€§èƒ½ä¼šè¿œè¿œé«˜äºåŒæ­¥IOï¼Œä½†æ˜¯å¼‚æ­¥IOçš„ç¼ºç‚¹æ˜¯ç¼–ç¨‹æ¨¡å‹å¤æ‚ã€‚æƒ³æƒ³çœ‹ï¼Œä½ å¾—çŸ¥é“ä»€ä¹ˆæ—¶å€™é€šçŸ¥ä½ â€œæ±‰å ¡åšå¥½äº†â€ï¼Œè€Œé€šçŸ¥ä½ çš„æ–¹æ³•ä¹Ÿå„ä¸ç›¸åŒã€‚å¦‚æœæ˜¯æœåŠ¡å‘˜è·‘è¿‡æ¥æ‰¾åˆ°ä½ ï¼Œè¿™æ˜¯å›è°ƒæ¨¡å¼ï¼Œå¦‚æœæœåŠ¡å‘˜å‘çŸ­ä¿¡é€šçŸ¥ä½ ï¼Œä½ å°±å¾—ä¸åœåœ°æ£€æŸ¥æ‰‹æœºï¼Œè¿™æ˜¯è½®è¯¢æ¨¡å¼ã€‚æ€»ä¹‹ï¼Œå¼‚æ­¥IOçš„å¤æ‚åº¦è¿œè¿œé«˜äºåŒæ­¥IOã€‚</p><p>æ“ä½œIOçš„èƒ½åŠ›éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œæ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæŠŠæ“ä½œç³»ç»Ÿæä¾›çš„ä½çº§Cæ¥å£å°è£…èµ·æ¥æ–¹ä¾¿ä½¿ç”¨ï¼ŒPythonä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬åé¢ä¼šè¯¦ç»†è®¨è®ºPythonçš„IOç¼–ç¨‹æ¥å£ã€‚</p><p>æ³¨æ„ï¼Œæœ¬ç« çš„IOç¼–ç¨‹éƒ½æ˜¯åŒæ­¥æ¨¡å¼ã€‚</p><h2 id="æ–‡ä»¶è¯»å†™">æ–‡ä»¶è¯»å†™</h2><p>è¯»å†™æ–‡ä»¶æ˜¯æœ€å¸¸è§çš„IOæ“ä½œã€‚Pythonå†…ç½®äº†è¯»å†™æ–‡ä»¶çš„å‡½æ•°ï¼Œç”¨æ³•å’ŒCæ˜¯å…¼å®¹çš„ã€‚</p><p>è¯»å†™æ–‡ä»¶å‰ï¼Œæˆ‘ä»¬å…ˆå¿…é¡»äº†è§£ä¸€ä¸‹ï¼Œ<strong>åœ¨ç£ç›˜ä¸Šè¯»å†™æ–‡ä»¶çš„åŠŸèƒ½éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œç°ä»£æ“ä½œç³»ç»Ÿä¸å…è®¸æ™®é€šçš„ç¨‹åºç›´æ¥æ“ä½œç£ç›˜ï¼Œæ‰€ä»¥ï¼Œè¯»å†™æ–‡ä»¶å°±æ˜¯è¯·æ±‚æ“ä½œç³»ç»Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆé€šå¸¸ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œç„¶åï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ä»è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ä¸­è¯»å–æ•°æ®ï¼ˆè¯»æ–‡ä»¶ï¼‰ï¼Œæˆ–è€…æŠŠæ•°æ®å†™å…¥è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆå†™æ–‡ä»¶ï¼‰</strong>ã€‚</p><h3 id="æ‰“å¼€å’Œå…³é—­æ–‡ä»¶">æ‰“å¼€å’Œå…³é—­æ–‡ä»¶</h3><p>Python æä¾›äº†å¿…è¦çš„å‡½æ•°å’Œæ–¹æ³•è¿›è¡Œé»˜è®¤æƒ…å†µä¸‹çš„æ–‡ä»¶åŸºæœ¬æ“ä½œã€‚ä½ å¯ä»¥ç”¨ <strong>file</strong> å¯¹è±¡åšå¤§éƒ¨åˆ†çš„æ–‡ä»¶æ“ä½œã€‚</p><h4 id="open-å‡½æ•°">open å‡½æ•°</h4><p>ä½ å¿…é¡»å…ˆç”¨Pythonå†…ç½®çš„open()å‡½æ•°æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªfileå¯¹è±¡ï¼Œç›¸å…³çš„æ–¹æ³•æ‰å¯ä»¥è°ƒç”¨å®ƒè¿›è¡Œè¯»å†™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">open</span>(file_name [, access_mode][, buffering])</span><br></pre></td></tr></table></figure><p>å„ä¸ªå‚æ•°çš„ç»†èŠ‚å¦‚ä¸‹ï¼š</p><ul><li><code>file_name</code>ï¼šfile_nameå˜é‡æ˜¯ä¸€ä¸ªåŒ…å«äº†ä½ <strong>è¦è®¿é—®çš„æ–‡ä»¶åç§°çš„å­—ç¬¦ä¸²å€¼</strong>ã€‚</li><li><code>access_mode</code>ï¼š<strong><code>access_mode</code>å†³å®šäº†æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼</strong>ï¼šåªè¯»ï¼Œå†™å…¥ï¼Œè¿½åŠ ç­‰ã€‚æ‰€æœ‰å¯å–å€¼è§å¦‚ä¸‹çš„å®Œå…¨åˆ—è¡¨ã€‚è¿™ä¸ªå‚æ•°æ˜¯éå¼ºåˆ¶çš„ï¼Œ<strong>é»˜è®¤æ–‡ä»¶è®¿é—®æ¨¡å¼ä¸ºåªè¯»Â®</strong>ã€‚</li><li>``buffering<code>:**å¦‚æœ</code>buffering`çš„å€¼è¢«è®¾ä¸º0ï¼Œå°±ä¸ä¼šæœ‰å¯„å­˜ã€‚å¦‚æœbufferingçš„å€¼å–1ï¼Œè®¿é—®æ–‡ä»¶æ—¶ä¼šå¯„å­˜è¡Œã€‚å¦‚æœå°†bufferingçš„å€¼è®¾ä¸ºå¤§äº1çš„æ•´æ•°ï¼Œè¡¨æ˜äº†è¿™å°±æ˜¯çš„å¯„å­˜åŒºçš„ç¼“å†²å¤§å°ã€‚å¦‚æœå–è´Ÿå€¼ï¼Œå¯„å­˜åŒºçš„ç¼“å†²å¤§å°åˆ™ä¸ºç³»ç»Ÿé»˜è®¤ã€‚**</li></ul><p>å®é™…ä¸Šå‚æ•°è¿˜æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(file:Â <span class="type">Union</span>[<span class="built_in">str</span>,Â <span class="built_in">bytes</span>,Â PathLike[<span class="built_in">str</span>],Â PathLike[<span class="built_in">bytes</span>],Â <span class="built_in">int</span>],Â mode:Â <span class="built_in">str</span>,Â buffering:Â <span class="built_in">int</span>,Â encoding:Â <span class="type">Optional</span>[<span class="built_in">str</span>],Â errors:Â <span class="type">Optional</span>[<span class="built_in">str</span>],Â newline:Â <span class="type">Optional</span>[<span class="built_in">str</span>],Â closefd:Â <span class="built_in">bool</span>,Â opener:Â <span class="type">Optional</span>[(<span class="built_in">str</span>,Â <span class="built_in">int</span>)Â -&gt;Â <span class="built_in">int</span>])Â -&gt;Â IO </span><br></pre></td></tr></table></figure><p>ä¸åŒæ¨¡å¼æ‰“å¼€æ–‡ä»¶çš„å®Œå…¨åˆ—è¡¨ï¼š</p><table><thead><tr><th style="text-align:left">æ¨¡å¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">t</td><td style="text-align:left">æ–‡æœ¬æ¨¡å¼ (é»˜è®¤)ã€‚</td></tr><tr><td style="text-align:left">x</td><td style="text-align:left">å†™æ¨¡å¼ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¼šæŠ¥é”™ã€‚</td></tr><tr><td style="text-align:left">b</td><td style="text-align:left">äºŒè¿›åˆ¶æ¨¡å¼ã€‚</td></tr><tr><td style="text-align:left">+</td><td style="text-align:left"><strong>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ›´æ–°(å¯è¯»å¯å†™)</strong>ã€‚</td></tr><tr><td style="text-align:left">U</td><td style="text-align:left">é€šç”¨æ¢è¡Œæ¨¡å¼ï¼ˆä¸æ¨èï¼‰ã€‚</td></tr><tr><td style="text-align:left">r</td><td style="text-align:left">ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚</td></tr><tr><td style="text-align:left">rb</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚</td></tr><tr><td style="text-align:left">r+</td><td style="text-align:left"><strong>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚</strong></td></tr><tr><td style="text-align:left">rb+</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚</td></tr><tr><td style="text-align:left">w</td><td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³<strong>åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤</strong>ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</td></tr><tr><td style="text-align:left">wb</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚</td></tr><tr><td style="text-align:left">w+</td><td style="text-align:left"><strong>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚</strong></td></tr><tr><td style="text-align:left">wb+</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚</td></tr><tr><td style="text-align:left">a</td><td style="text-align:left"><strong>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚</strong></td></tr><tr><td style="text-align:left">ab</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚</td></tr><tr><td style="text-align:left">a+</td><td style="text-align:left">æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚</td></tr><tr><td style="text-align:left">ab+</td><td style="text-align:left">ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚</td></tr></tbody></table><p>ä¸‹å›¾å¾ˆå¥½çš„æ€»ç»“äº†è¿™å‡ ç§æ¨¡å¼ï¼š</p><p><img src="1.png" alt=""></p><table><thead><tr><th style="text-align:center">æ¨¡å¼</th><th style="text-align:center">r</th><th style="text-align:center">r+</th><th style="text-align:center">w</th><th style="text-align:center">w+</th><th style="text-align:center">a</th><th style="text-align:center">a+</th></tr></thead><tbody><tr><td style="text-align:center">è¯»</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center"></td><td style="text-align:center">+</td><td style="text-align:center"></td><td style="text-align:center">+</td></tr><tr><td style="text-align:center">å†™</td><td style="text-align:center"></td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td></tr><tr><td style="text-align:center">åˆ›å»º</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td></tr><tr><td style="text-align:center">è¦†ç›–</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">æŒ‡é’ˆåœ¨å¼€å§‹</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center">+</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">æŒ‡é’ˆåœ¨ç»“å°¾</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">+</td><td style="text-align:center">+</td></tr></tbody></table><h2 id="Fileå¯¹è±¡çš„å±æ€§">Fileå¯¹è±¡çš„å±æ€§</h2><p>ä¸€ä¸ªæ–‡ä»¶è¢«æ‰“å¼€åï¼Œä½ æœ‰ä¸€ä¸ªfileå¯¹è±¡ï¼Œä½ å¯ä»¥å¾—åˆ°æœ‰å…³è¯¥æ–‡ä»¶çš„å„ç§ä¿¡æ¯ã€‚</p><p>ä»¥ä¸‹æ˜¯å’Œfileå¯¹è±¡ç›¸å…³çš„æ‰€æœ‰å±æ€§çš„åˆ—è¡¨ï¼š</p><table><thead><tr><th style="text-align:left">å±æ€§</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">file.closed</td><td style="text-align:left">è¿”å›trueå¦‚æœæ–‡ä»¶å·²è¢«å…³é—­ï¼Œå¦åˆ™è¿”å›falseã€‚</td></tr><tr><td style="text-align:left">file.mode</td><td style="text-align:left">è¿”å›è¢«æ‰“å¼€æ–‡ä»¶çš„è®¿é—®æ¨¡å¼ã€‚</td></tr><tr><td style="text-align:left"><a href="http://file.name">file.name</a></td><td style="text-align:left">è¿”å›æ–‡ä»¶çš„åç§°ã€‚</td></tr><tr><td style="text-align:left">file.softspace</td><td style="text-align:left">å¦‚æœç”¨printè¾“å‡ºåï¼Œå¿…é¡»è·Ÿä¸€ä¸ªç©ºæ ¼ç¬¦ï¼Œåˆ™è¿”å›falseã€‚å¦åˆ™è¿”å›trueã€‚</td></tr></tbody></table><p>å¦‚ä¸‹å®ä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;æ–‡ä»¶å: &quot;</span>, fo.name</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;æ˜¯å¦å·²å…³é—­ : &quot;</span>, fo.closed</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;è®¿é—®æ¨¡å¼ : &quot;</span>, fo.mode</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;æœ«å°¾æ˜¯å¦å¼ºåˆ¶åŠ ç©ºæ ¼ : &quot;</span>, fo.softspace</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å:  foo.txt</span><br><span class="line">æ˜¯å¦å·²å…³é—­ :  False</span><br><span class="line">è®¿é—®æ¨¡å¼ :  w</span><br><span class="line">æœ«å°¾æ˜¯å¦å¼ºåˆ¶åŠ ç©ºæ ¼ :  0</span><br></pre></td></tr></table></figure><h3 id="write-æ–¹æ³•">write()æ–¹æ³•</h3><p>write()æ–¹æ³•å¯å°†ä»»ä½•å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ã€‚éœ€è¦é‡ç‚¹æ³¨æ„çš„æ˜¯ï¼ŒPythonå­—ç¬¦ä¸²å¯ä»¥æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯æ–‡å­—ã€‚<strong>write()æ–¹æ³•ä¸ä¼šåœ¨å­—ç¬¦ä¸²çš„ç»“å°¾æ·»åŠ æ¢è¡Œç¬¦(â€˜\nâ€™)ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.write(string)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œè¢«ä¼ é€’çš„å‚æ•°æ˜¯è¦å†™å…¥åˆ°å·²æ‰“å¼€æ–‡ä»¶çš„å†…å®¹ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">fo.write( <span class="string">&quot;www.runoob.com!\nVery good site!\n&quot;</span>)</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–¹æ³•ä¼šåˆ›å»ºfoo.txtæ–‡ä»¶ï¼Œå¹¶å°†æ”¶åˆ°çš„å†…å®¹å†™å…¥è¯¥æ–‡ä»¶ï¼Œå¹¶æœ€ç»ˆå…³é—­æ–‡ä»¶ã€‚å¦‚æœä½ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat foo.txt </span><br><span class="line">www.runoob.com!</span><br><span class="line">Very good site!</span><br></pre></td></tr></table></figure><h3 id="read-æ–¹æ³•">read()æ–¹æ³•</h3><p><code>readï¼ˆï¼‰</code>æ–¹æ³•ä»ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚éœ€è¦é‡ç‚¹æ³¨æ„çš„æ˜¯ï¼ŒPythonå­—ç¬¦ä¸²å¯ä»¥æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¯æ–‡å­—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.read([count])</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œ<strong>è¢«ä¼ é€’çš„å‚æ•°æ˜¯è¦ä»å·²æ‰“å¼€æ–‡ä»¶ä¸­è¯»å–çš„å­—èŠ‚è®¡æ•°</strong>ã€‚è¯¥æ–¹æ³•ä»æ–‡ä»¶çš„å¼€å¤´å¼€å§‹è¯»å…¥ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥countï¼Œå®ƒä¼šå°è¯•å°½å¯èƒ½å¤šåœ°è¯»å–æ›´å¤šçš„å†…å®¹ï¼Œå¾ˆå¯èƒ½æ˜¯ç›´åˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">str</span> = fo.read(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;è¯»å–çš„å­—ç¬¦ä¸²æ˜¯ : &quot;</span>, <span class="built_in">str</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯»å–çš„å­—ç¬¦ä¸²æ˜¯ :  www.runoob</span><br></pre></td></tr></table></figure><p>ç”±äºæ–‡ä»¶è¯»å†™æ—¶éƒ½æœ‰å¯èƒ½äº§ç”Ÿ<code>IOError</code>ï¼Œä¸€æ—¦å‡ºé”™ï¼Œåé¢çš„<code>f.close()</code>å°±ä¸ä¼šè°ƒç”¨ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯æ— è®ºæ˜¯å¦å‡ºé”™éƒ½èƒ½æ­£ç¡®åœ°å…³é—­æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>try ... finally</code>æ¥å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ¯æ¬¡éƒ½è¿™ä¹ˆå†™å®åœ¨å¤ªç¹çï¼Œæ‰€ä»¥ï¼Œ<strong>Pythonå¼•å…¥äº†<code>with</code>è¯­å¥æ¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨<code>close()</code>æ–¹æ³•</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br></pre></td></tr></table></figure><p>è¿™å’Œå‰é¢çš„<code>try ... finally</code>æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»£ç æ›´ä½³ç®€æ´ï¼Œå¹¶ä¸”ä¸å¿…è°ƒç”¨<code>f.close()</code>æ–¹æ³•ã€‚</p><p>è°ƒç”¨<code>read()</code>ä¼šä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶æœ‰10Gï¼Œå†…å­˜å°±çˆ†äº†ï¼Œæ‰€ä»¥ï¼Œ<strong>è¦ä¿é™©èµ·è§ï¼Œå¯ä»¥åå¤è°ƒç”¨<code>read(size)</code>æ–¹æ³•ï¼Œæ¯æ¬¡æœ€å¤šè¯»å–sizeä¸ªå­—èŠ‚çš„å†…å®¹ã€‚å¦å¤–ï¼Œè°ƒç”¨<code>readline()</code>å¯ä»¥æ¯æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ï¼Œè°ƒç”¨<code>readlines()</code>ä¸€æ¬¡è¯»å–æ‰€æœ‰å†…å®¹å¹¶æŒ‰è¡Œè¿”å›<code>list</code></strong>ã€‚å› æ­¤ï¼Œè¦æ ¹æ®éœ€è¦å†³å®šæ€ä¹ˆè°ƒç”¨ã€‚</p><p>å¦‚æœæ–‡ä»¶å¾ˆå°ï¼Œ<code>read()</code>ä¸€æ¬¡æ€§è¯»å–æœ€æ–¹ä¾¿ï¼›å¦‚æœä¸èƒ½ç¡®å®šæ–‡ä»¶å¤§å°ï¼Œåå¤è°ƒç”¨<code>read(size)</code>æ¯”è¾ƒä¿é™©ï¼›å¦‚æœæ˜¯é…ç½®æ–‡ä»¶ï¼Œè°ƒç”¨<code>readlines()</code>æœ€æ–¹ä¾¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">    <span class="built_in">print</span>(line.strip()) <span class="comment"># æŠŠæœ«å°¾çš„&#x27;\n&#x27;åˆ æ‰</span></span><br></pre></td></tr></table></figure><h3 id="close-æ–¹æ³•">close()æ–¹æ³•</h3><p>File å¯¹è±¡çš„<code> closeï¼ˆï¼‰</code>æ–¹æ³•<strong>åˆ·æ–°ç¼“å†²åŒºé‡Œä»»ä½•è¿˜æ²¡å†™å…¥çš„ä¿¡æ¯ï¼Œå¹¶å…³é—­è¯¥æ–‡ä»¶ï¼Œè¿™ä¹‹åä¾¿ä¸èƒ½å†è¿›è¡Œå†™å…¥</strong>ã€‚</p><p><strong>å½“ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡çš„å¼•ç”¨è¢«é‡æ–°æŒ‡å®šç»™å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒPython ä¼šå…³é—­ä¹‹å‰çš„æ–‡ä»¶</strong>ã€‚ç”¨ closeï¼ˆï¼‰æ–¹æ³•å…³é—­æ–‡ä»¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.close()</span><br></pre></td></tr></table></figure><h3 id="å¦ï¼š">å¦ï¼š</h3><h4 id="å­—ç¬¦ç¼–ç ">å­—ç¬¦ç¼–ç </h4><p>è¦è¯»å–éUTF-8ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œéœ€è¦ç»™<code>open()</code>å‡½æ•°ä¼ å…¥<code>encoding</code>å‚æ•°ï¼Œä¾‹å¦‚ï¼Œè¯»å–GBKç¼–ç çš„æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/gbk.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read()</span><br><span class="line"><span class="string">&#x27;æµ‹è¯•&#x27;</span></span><br></pre></td></tr></table></figure><p>é‡åˆ°æœ‰äº›ç¼–ç ä¸è§„èŒƒçš„æ–‡ä»¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°<code>UnicodeDecodeError</code>ï¼Œå› ä¸ºåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å¯èƒ½å¤¹æ‚äº†ä¸€äº›éæ³•ç¼–ç çš„å­—ç¬¦ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œ<code>open()</code>å‡½æ•°è¿˜æ¥æ”¶ä¸€ä¸ª<code>errors</code>å‚æ•°ï¼Œè¡¨ç¤ºå¦‚æœé‡åˆ°ç¼–ç é”™è¯¯åå¦‚ä½•å¤„ç†ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥å¿½ç•¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/gbk.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="StringIOå’ŒBytesIO">StringIOå’ŒBytesIO</h4><p><code>StringIO</code>å’Œ<code>BytesIO</code>æ˜¯åœ¨<strong>å†…å­˜</strong>ä¸­æ“ä½œstringå’Œbytesçš„æ–¹æ³•ï¼Œä½¿å¾—å’Œè¯»å†™æ–‡ä»¶å…·æœ‰ä¸€è‡´çš„æ¥å£ã€‚</p><h5 id="StringIO">StringIO</h5><p>å¾ˆå¤šæ—¶å€™ï¼Œæ•°æ®è¯»å†™ä¸ä¸€å®šæ˜¯æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨å†…å­˜ä¸­è¯»å†™ã€‚StringIOé¡¾åæ€ä¹‰å°±æ˜¯åœ¨å†…å­˜ä¸­è¯»å†™strã€‚</p><p>è¦æŠŠstrå†™å…¥StringIOï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªStringIOï¼Œç„¶åï¼Œåƒæ–‡ä»¶ä¸€æ ·å†™å…¥å³å¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = StringIO()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27;world!&#x27;</span>)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(f.getvalue())</span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure><p><code>getvalue()</code>æ–¹æ³•ç”¨äºè·å¾—å†™å…¥åçš„strã€‚</p><p>è¦è¯»å–StringIOï¼Œå¯ä»¥ç”¨ä¸€ä¸ªstråˆå§‹åŒ–StringIOï¼Œç„¶åï¼Œåƒè¯»æ–‡ä»¶ä¸€æ ·è¯»å–ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = StringIO(<span class="string">&#x27;Hello!\nHi!\nGoodbye!&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="meta">... </span>    s = f.readline()</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> s == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">break</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(s.strip())</span><br><span class="line">...</span><br><span class="line">Hello!</span><br><span class="line">Hi!</span><br><span class="line">Goodbye!</span><br></pre></td></tr></table></figure><h5 id="BytesIO">BytesIO</h5><p>StringIOæ“ä½œçš„åªèƒ½æ˜¯strï¼Œå¦‚æœè¦æ“ä½œäºŒè¿›åˆ¶æ•°æ®ï¼Œå°±éœ€è¦ä½¿ç”¨BytesIOã€‚</p><p>BytesIOå®ç°äº†åœ¨å†…å­˜ä¸­è¯»å†™bytesï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBytesIOï¼Œç„¶åå†™å…¥ä¸€äº›bytesï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = BytesIO()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27;ä¸­æ–‡&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(f.getvalue())</span><br><span class="line"><span class="string">b&#x27;\xe4\xb8\xad\xe6\x96\x87&#x27;</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå†™å…¥çš„ä¸æ˜¯strï¼Œè€Œæ˜¯ç»è¿‡UTF-8ç¼–ç çš„bytesã€‚</p><p>å’ŒStringIOç±»ä¼¼ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªbytesåˆå§‹åŒ–BytesIOï¼Œç„¶åï¼Œåƒè¯»æ–‡ä»¶ä¸€æ ·è¯»å–ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = BytesIO(<span class="string">b&#x27;\xe4\xb8\xad\xe6\x96\x87&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read()</span><br><span class="line"><span class="string">b&#x27;\xe4\xb8\xad\xe6\x96\x87&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶å®šä½">æ–‡ä»¶å®šä½</h4><p><code>tell()</code>æ–¹æ³•å‘Šè¯‰ä½ <strong>æ–‡ä»¶å†…</strong>çš„å½“å‰ä½ç½®, æ¢å¥è¯è¯´ï¼Œ<strong>ä¸‹ä¸€æ¬¡çš„è¯»å†™ä¼šå‘ç”Ÿåœ¨æ–‡ä»¶å¼€å¤´è¿™ä¹ˆå¤šå­—èŠ‚ä¹‹å</strong>ã€‚</p><p><code>seekï¼ˆoffset [,from]ï¼‰</code>æ–¹æ³•<strong>æ”¹å˜å½“å‰æ–‡ä»¶å†…çš„ä½ç½®</strong>ã€‚Offsetå˜é‡è¡¨ç¤ºè¦ç§»åŠ¨çš„å­—èŠ‚æ•°ã€‚Fromå˜é‡æŒ‡å®šå¼€å§‹ç§»åŠ¨å­—èŠ‚çš„å‚è€ƒä½ç½®ã€‚</p><p><strong>å¦‚æœfromè¢«è®¾ä¸º0ï¼Œè¿™æ„å‘³ç€å°†æ–‡ä»¶çš„å¼€å¤´ä½œä¸ºç§»åŠ¨å­—èŠ‚çš„å‚è€ƒä½ç½®ã€‚å¦‚æœè®¾ä¸º1ï¼Œåˆ™ä½¿ç”¨å½“å‰çš„ä½ç½®ä½œä¸ºå‚è€ƒä½ç½®ã€‚å¦‚æœå®ƒè¢«è®¾ä¸º2ï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶çš„æœ«å°¾å°†ä½œä¸ºå‚è€ƒä½ç½®ã€‚</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;foo.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">str</span> = fo.read(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;è¯»å–çš„å­—ç¬¦ä¸²æ˜¯ : &quot;</span>, <span class="built_in">str</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ä½ç½®</span></span><br><span class="line">position = fo.tell()</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;å½“å‰æ–‡ä»¶ä½ç½® : &quot;</span>, position</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æŠŠæŒ‡é’ˆå†æ¬¡é‡æ–°å®šä½åˆ°æ–‡ä»¶å¼€å¤´</span></span><br><span class="line">position = fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">str</span> = fo.read(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;é‡æ–°è¯»å–å­—ç¬¦ä¸² : &quot;</span>, <span class="built_in">str</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¯»å–çš„å­—ç¬¦ä¸²æ˜¯ :  www.runoob</span><br><span class="line">å½“å‰æ–‡ä»¶ä½ç½® :  <span class="number">10</span></span><br><span class="line">é‡æ–°è¯»å–å­—ç¬¦ä¸² :  www.runoob</span><br></pre></td></tr></table></figure><h2 id="é‡å‘½åå’Œåˆ é™¤æ–‡ä»¶">é‡å‘½åå’Œåˆ é™¤æ–‡ä»¶</h2><p>Pythonçš„osæ¨¡å—æä¾›äº†å¸®ä½ æ‰§è¡Œæ–‡ä»¶å¤„ç†æ“ä½œçš„æ–¹æ³•ï¼Œæ¯”å¦‚é‡å‘½åå’Œåˆ é™¤æ–‡ä»¶ã€‚</p><p>è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼Œä½ å¿…é¡»å…ˆå¯¼å…¥å®ƒï¼Œç„¶åæ‰å¯ä»¥è°ƒç”¨ç›¸å…³çš„å„ç§åŠŸèƒ½ã€‚</p><h3 id="rename-æ–¹æ³•">rename() æ–¹æ³•</h3><p><code>rename()</code> æ–¹æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œå½“å‰çš„æ–‡ä»¶åå’Œæ–°æ–‡ä»¶åã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rename(current_file_name, new_file_name)</span><br></pre></td></tr></table></figure><h3 id="remove-æ–¹æ³•">remove()æ–¹æ³•</h3><p>ä½ å¯ä»¥ç”¨<code>remove()</code>æ–¹æ³•åˆ é™¤æ–‡ä»¶ï¼Œéœ€è¦æä¾›è¦åˆ é™¤çš„æ–‡ä»¶åä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(file_name)</span><br></pre></td></tr></table></figure><h2 id="Pythoné‡Œçš„ç›®å½•ï¼š">Pythoné‡Œçš„ç›®å½•ï¼š</h2><p>æ‰€æœ‰æ–‡ä»¶éƒ½åŒ…å«åœ¨å„ä¸ªä¸åŒçš„ç›®å½•ä¸‹ï¼Œä¸è¿‡Pythonä¹Ÿèƒ½è½»æ¾å¤„ç†ã€‚osæ¨¡å—æœ‰è®¸å¤šæ–¹æ³•èƒ½å¸®ä½ åˆ›å»ºï¼Œåˆ é™¤å’Œæ›´æ”¹ç›®å½•ã€‚</p><h3 id="mkdir-æ–¹æ³•">mkdir()æ–¹æ³•</h3><p>å¯ä»¥ä½¿ç”¨osæ¨¡å—çš„<code>mkdir()</code>æ–¹æ³•åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç›®å½•ä»¬ã€‚ä½ éœ€è¦æä¾›ä¸€ä¸ªåŒ…å«äº†è¦åˆ›å»ºçš„ç›®å½•åç§°çš„å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(<span class="string">&quot;newdir&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="chdir-æ–¹æ³•">chdir()æ–¹æ³•</h3><p>å¯ä»¥ç”¨<code>chdir()</code>æ–¹æ³•æ¥<strong>æ”¹å˜å½“å‰çš„ç›®å½•</strong>ã€‚<code>chdir()</code>æ–¹æ³•éœ€è¦çš„ä¸€ä¸ªå‚æ•°æ˜¯ä½ æƒ³è®¾æˆå½“å‰ç›®å½•çš„ç›®å½•åç§°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">&quot;newdir&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä¸‹ä¾‹å°†è¿›å…¥&quot;/home/newdir&quot;ç›®å½•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å°†å½“å‰ç›®å½•æ”¹ä¸º&quot;/home/newdir&quot;</span></span><br><span class="line">os.chdir(<span class="string">&quot;/home/newdir&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="getcwd-æ–¹æ³•ï¼š">getcwd()æ–¹æ³•ï¼š</h3><p><code>getcwd()</code>æ–¹æ³•æ˜¾ç¤ºå½“å‰çš„å·¥ä½œç›®å½•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">print</span> os.getcwd()</span><br></pre></td></tr></table></figure><h3 id="rmdir-æ–¹æ³•">rmdir()æ–¹æ³•</h3><p><code>rmdir()</code>æ–¹æ³•åˆ é™¤ç›®å½•ï¼Œç›®å½•åç§°ä»¥å‚æ•°ä¼ é€’ã€‚</p><p><strong>åœ¨åˆ é™¤è¿™ä¸ªç›®å½•ä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰å†…å®¹åº”è¯¥å…ˆè¢«æ¸…é™¤ã€‚</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(<span class="string">&#x27;dirname&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯åˆ é™¤&quot; /tmp/test&quot;ç›®å½•çš„ä¾‹å­ã€‚ç›®å½•çš„å®Œå…¨åˆè§„çš„åç§°å¿…é¡»è¢«ç»™å‡ºï¼Œå¦åˆ™ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æœç´¢è¯¥ç›®å½•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> </span><br><span class="line"><span class="comment"># åˆ é™¤â€/tmp/testâ€ç›®å½•</span></span><br><span class="line">os.rmdir( <span class="string">&quot;/tmp/test&quot;</span>  )</span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/python/os-file-methods.html">Python OS æ–‡ä»¶/ç›®å½•æ–¹æ³•</a></p><h1>ç½‘ç»œï¼šä»0åˆ°1ï¼ŒPythonç½‘ç»œç¼–ç¨‹çš„å…¥é—¨ä¹‹è·¯</h1><p>æ¥è‡ª<a href="https://www.zhihu.com/people/mrlwt">tonnie</a>çš„<a href="https://www.zhihu.com/question/48509984">ä»0åˆ°1ï¼ŒPythonç½‘ç»œç¼–ç¨‹çš„å…¥é—¨ä¹‹è·¯</a></p><p>æœ‰åˆ æ”¹ä½†ä¸å¤šï¼Œåªæ˜¯åŠ äº†ä¸€äº›æ ‡é¢˜ç”¨æ¥åˆ’åˆ†ä¸åŒå†…å®¹ä»¥åŠä¸€äº›åŠ ç²—æ ‡æ³¨ï¼Œå†™çš„æŒºå¥½çš„ï¼Œä¸è¿‡çœ‹ä¹‹å‰å»ºè®®çœ‹çœ‹ã€Šå›¾è§£TCP/IPã€‹è¿™ç±»çš„åŸºç¡€çŸ¥è¯†ä¹¦ã€‚</p><p>æœ€è¿‘åœ¨å­¦ä¹ Pythonç½‘ç»œç¼–ç¨‹æ—¶çœ‹äº†ä¸€äº›ç›¸å…³çš„æ–‡ç« ï¼Œå‘ç°å¤§å¤šæ•°è¦ä¹ˆè®²çš„æ™¦æ¶©éš¾æ‡‚ï¼Œè¦ä¹ˆè®²çš„æ¯”è¾ƒæµ…æ˜¾ï¼Œæˆ‘å°±æƒ³ä¸ºä»€ä¹ˆä¸åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å†™ä¸€ç¯‡å¿ƒå¾—å‘¢ï¼Œäºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚æˆ‘ç›¸ä¿¡æŠ€æœ¯ä¸å…¨æ˜¯å†°å†·çš„ï¼Œä»äººçš„è§’åº¦å‡ºå‘ï¼Œæ‰èƒ½æ›´å¥½åœ°é¢†æ‚Ÿç¼–ç¨‹çš„ä¹è¶£ï¼Œæœ¬æ–‡å°†å°è¯•ä»¥ç®€æ´çš„æ–‡å­—åˆ†äº«å¦‚ä½•å…¥é—¨Pythonä¸­çš„ç½‘ç»œç¼–ç¨‹ã€‚</p><p>åœ¨Pythonä¸–ç•Œé‡Œï¼Œå–œæ¬¢ç”¨Pythonåšçˆ¬è™«çš„äººä¸åœ¨å°‘æ•°ï¼Œé‚£ä¹ˆåœ¨è¯·æ±‚é¡µé¢çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><h2 id="ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ï¼šTCP-IPçš„å°ä¾‹å­">ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ï¼šTCP/IPçš„å°ä¾‹å­</h2><p>ç°åœ¨ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„Client/Serverç¨‹åºï¼š</p><ol><li><p>é¦–å…ˆæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¼€å¯ä¸€ä¸ªç›‘å¬8000ç«¯å£çš„HTTPæœåŠ¡å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server 8000</span><br><span class="line">Serving HTTP on 0.0.0.0 port 8000 ...</span><br></pre></td></tr></table></figure></li><li><p>æ¥ç€ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ¥å¯¹è¿™ä¸ªæœåŠ¡å™¨å‘èµ·HTTPè¯·æ±‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r = requests.get(<span class="string">&#x27;http://127.0.0.1:8000/&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure></li><li><p>å†æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash-3.2$ python test.py</span><br><span class="line">&lt;Response [200]&gt;</span><br></pre></td></tr></table></figure></li></ol><p>å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨è¿”å›äº†ä¸€ä¸ª200æˆåŠŸå“åº”ã€‚</p><p>å¥½ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ€»ç»“è¯·æ±‚è¿‡ç¨‹ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘èµ·äº†ä¸€ä¸ªHTTP(GET)è¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯è¿”å›äº†ä¸€ä¸ªHTTP(200)å“åº”ã€‚</li></ol><p>è¿™æ˜¯æˆ‘ä»¬èƒ½çœ‹åˆ°çš„æœ€æŠ½è±¡çš„è¿‡ç¨‹ï¼Œä¸‹é¢å†ç”¨tcpdumpç»†çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p><p>åœ¨å‘½ä»¤è¡Œç”¨tcpdumpæ¥ç›‘å¬æœ¬åœ°ç½‘å¡çš„tcpè¿æ¥ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i lo0 port 8000</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç”¨-wå‚æ•°æŠŠä¿¡æ¯å†™å‡ºåˆ°æ–‡ä»¶ï¼Œå†é€šè¿‡wiresharkæ¥è§‚å¯Ÿç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i lo0 port 8000 -w test.cap</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ‰§è¡Œç¨‹åºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash-3.2$ python test.py</span><br><span class="line">&lt;Response [200]&gt;</span><br></pre></td></tr></table></figure><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œæˆ‘ä»¬å°±èƒ½è§‚å¯Ÿåˆ°tcpdumpè¾“å‡ºç±»ä¼¼å¦‚ä¸‹çš„ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span><br><span class="line">listening on lo0, link-type NULL (BSD loopback), capture size 262144 bytes</span><br><span class="line">23:46:06.464962 IP localhost.49329 &gt; localhost.irdmi: Flags [S], seq 1191154495, win 65535, options [mss 16344,nop,wscale 5,nop,nop,TS val 178410641 ecr 0,sackOK,eol], length 0</span><br><span class="line">23:46:06.465018 IP localhost.irdmi &gt; localhost.49329: Flags [S.], seq 1405387906, ack 1191154496, win 65535, options [mss 16344,nop,wscale 5,nop,nop,TS val 178410641 ecr 178410641,sackOK,eol], length 0</span><br><span class="line">23:46:06.465029 IP localhost.49329 &gt; localhost.irdmi: Flags [.], ack 1, win 12759, options [nop,nop,TS val 178410641 ecr 178410641], length 0</span><br><span class="line">23:46:06.465039 IP localhost.irdmi &gt; localhost.49329: Flags [.], ack 1, win 12759, options [nop,nop,TS val 178410641 ecr 178410641], length 0</span><br><span class="line">23:46:06.465065 IP localhost.49329 &gt; localhost.irdmi: Flags [P.], seq 1:146, ack 1, win 12759, options [nop,nop,TS val 178410641 ecr 178410641], length 145</span><br><span class="line">23:46:06.465079 IP localhost.irdmi &gt; localhost.49329: Flags [.], ack 146, win 12754, options [nop,nop,TS val 178410641 ecr 178410641], length 0</span><br><span class="line">23:46:06.467141 IP localhost.irdmi &gt; localhost.49329: Flags [P.], seq 1:156, ack 146, win 12754, options [nop,nop,TS val 178410642 ecr 178410641], length 155</span><br><span class="line">23:46:06.467171 IP localhost.49329 &gt; localhost.irdmi: Flags [.], ack 156, win 12754, options [nop,nop,TS val 178410643 ecr 178410642], length 0</span><br><span class="line">23:46:06.467231 IP localhost.irdmi &gt; localhost.49329: Flags [P.], seq 156:5324, ack 146, win 12754, options [nop,nop,TS val 178410643 ecr 178410643], length 5168</span><br><span class="line">23:46:06.467245 IP localhost.49329 &gt; localhost.irdmi: Flags [.], ack 5324, win 12593, options [nop,nop,TS val 178410643 ecr 178410643], length 0</span><br><span class="line">23:46:06.467313 IP localhost.irdmi &gt; localhost.49329: Flags [F.], seq 5324, ack 146, win 12754, options [nop,nop,TS val 178410643 ecr 178410643], length 0</span><br><span class="line">23:46:06.467331 IP localhost.49329 &gt; localhost.irdmi: Flags [.], ack 5325, win 12593, options [nop,nop,TS val 178410643 ecr 178410643], length 0</span><br><span class="line">23:46:06.468442 IP localhost.49329 &gt; localhost.irdmi: Flags [F.], seq 146, ack 5325, win 12593, options [nop,nop,TS val 178410644 ecr 178410643], length 0</span><br><span class="line">23:46:06.468479 IP localhost.irdmi &gt; localhost.49329: Flags [.], ack 147, win 12754, options [nop,nop,TS val 178410644 ecr 178410644], length 0</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»“æœèƒ½çœ‹åˆ°ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªSYNæŠ¥æ–‡ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ã€‚</li><li>æœåŠ¡å™¨ç«¯è¿”å›ä¸€ä¸ªSYN+ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æ”¶åˆ°äº†å®¢æˆ·ç«¯ä¼ æ¥çš„è¯·æ±‚ï¼Œå¹¶åŒæ„ä¸å®¢æˆ·ç«¯å»ºç«‹TCPè¿æ¥ã€‚</li><li>å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºå·²ç»çŸ¥é“æœåŠ¡å™¨åŒæ„å»ºç«‹TCPè¿æ¥ï¼Œè¿™æ—¶å€™åŒæ–¹å¼€å§‹é€šä¿¡ã€‚</li><li>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸æ–­åœ°äº¤æ¢ä¿¡æ¯ï¼Œæ¥æ”¶æŠ¥æ–‡ï¼Œè¿”å›åº”ç­”ã€‚</li><li>æœ€åæ•°æ®ä¼ è¾“å®Œæ¯•ï¼ŒæœåŠ¡å™¨å‘èµ·ä¸€ä¸ªFINæŠ¥æ–‡ï¼Œè¡¨ç¤ºè¦ç»“æŸé€šä¿¡ï¼Œå®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªACKåº”ç­”ï¼Œæ¥ç€åˆå‘é€ä¸€ä¸ªFINæŠ¥æ–‡ï¼Œæœ€åæœåŠ¡å™¨ç«¯è¿”å›ä¸€ä¸ªACKåº”ç­”ï¼Œæ­¤æ—¶è¿æ¥è¿‡ç¨‹ç»“æŸã€‚</li></ol><p>ä»”ç»†ä¸€æƒ³ï¼Œè¿™ä¸ªè¿‡ç¨‹è·Ÿç°å®ä¸–ç•Œä¸­çš„â€œæ‰“ç”µè¯â€æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œä¸ä¹‹ä»£æ›¿çš„ä¸å°±æ˜¯æ‹¨æ‰“ç”µè¯ã€å»ºç«‹è¿æ¥ã€ç¡®è®¤åº”ç­”ã€äº¤æ¢ä¿¡æ¯ã€å…³é—­è¿æ¥å—ï¼Œæˆ‘ä»¬ç»å¸¸è¯´TCPæ˜¯é¢å‘è¿æ¥çš„ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ã€‚</p><p>ç°åœ¨å†æ¥çœ‹æœåŠ¡å™¨ç«¯çš„çŠ¶æ€ï¼Œé€šè¿‡lsofå‘½ä»¤æ¥æŸ¥çœ‹ç»‘å®š8000ç«¯å£çš„æè¿°ç¬¦ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsof -n -i:8000          </span><br><span class="line">COMMAND    PID   USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME</span><br><span class="line">python3.4 1128 tonnie    4u  IPv4 0x17036ae156ec58cf      0t0  TCP *:irdmi (LISTEN)</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç»“æœå¯ä»¥è§‚å¯Ÿåˆ°æœåŠ¡å™¨çš„è¿›ç¨‹çš„ä¸€äº›ä¿¡æ¯ï¼ŒæœåŠ¡å™¨è¿›ç¨‹å¤„äº<strong>LISTEN</strong>é˜¶æ®µï¼Œè¯´æ˜æœåŠ¡å™¨å¤„äºä¿æŒç€ç›‘å¬è¿æ¥çš„çŠ¶æ€ï¼š</p><p>ç°åœ¨ç”¨åˆšæ‰çš„ä¾‹å­æ¥è§£é‡ŠTCPä¸­çŠ¶æ€è¿ç§»çš„æ¦‚å¿µï¼Œè¿™æ—¶å€™ï¼Œå¦‚æœä»å®¢æˆ·ç«¯åˆ°æ¥ä¸€ä¸ªè¯·æ±‚ï¼š</p><ol><li>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNæŠ¥æ–‡ï¼Œè¿”å›SYN+ACKæŠ¥æ–‡ï¼ŒæœåŠ¡å™¨ç«¯è¿›å…¥<strong>SYN_RCVD</strong>çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›çš„ACKåº”ç­”åï¼Œè¿æ¥å»ºç«‹ï¼Œè¿›å…¥<strong>ESTABLISHED</strong>çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç«¯çš„æ•°æ®ä¼ è¾“å®Œæ¯•ï¼Œç»™å®¢æˆ·ç«¯å‘é€FINæŠ¥æ–‡ï¼Œè¿›å…¥<strong>FIN_WAIT_1</strong>çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›çš„ACKåº”ç­”åï¼Œè¿›å…¥<strong>FIN_WAIT_2</strong>çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„FINæŠ¥æ–‡ï¼Œæ¥ç€è¿”å›ä¸€ä¸ªACKåº”ç­”ï¼Œç­‰å¾…è¿æ¥å…³é—­ï¼Œè¿›å…¥<strong>TIME_WAIT</strong>çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç«¯ç»è¿‡<strong>2MSL</strong>æ—¶é—´åè¿›å…¥<strong>CLOSED</strong>çŠ¶æ€ï¼Œæ­¤æ—¶è¿æ¥å…³é—­ã€‚</li></ol><p>è‡³äºå®¢æˆ·ç«¯ï¼Œåœ¨æ¯ä¸ªé˜¶æ®µä¹Ÿæœ‰å„è‡ªçš„çŠ¶æ€ï¼Œä¸‹å›¾è¡¨ç¤ºäº†TCPçŠ¶æ€è¿ç§»çš„è¿‡ç¨‹ï¼š</p><p><img src="2.jpg" alt=""></p><p>ä¸‹é¢æ¥çœ‹TCP/IPçš„å››å±‚æ¨¡å‹ï¼š</p><ol><li>åº”ç”¨å±‚ï¼Œåœ¨è¿™ä¸€å±‚ä¸Šçš„æœ‰HTTPã€DNSã€FTPã€SSHç­‰ã€‚</li><li>ä¼ è¾“å±‚ï¼Œåœ¨è¿™ä¸€å±‚ä¸Šçš„æœ‰TCPã€UDPç­‰ã€‚</li><li>ç½‘ç»œå±‚ï¼Œåœ¨è¿™ä¸€å±‚ä¸Šçš„æœ‰IPã€ARPç­‰ã€‚</li><li>ç½‘ç»œæ¥å£å±‚ï¼Œåœ¨è¿™ä¸€å±‚ä¸Šçš„æœ‰ä»¥å¤ªç½‘ã€PPPç­‰ã€‚</li></ol><p><img src="3.jpg" alt=""></p><p><strong>ç¼–è€…æ³¨</strong>:TCP/IPæ¨¡å‹æ˜¯ç”± OSI æ¨¡å‹æ¼”åŒ–è€Œæ¥ï¼ŒTCP/IP æ¨¡å‹å°† OSI æ¨¡å‹ç”±ä¸ƒå±‚ç®€åŒ–ä¸ºäº”å±‚ï¼ˆä¸€å¼€å§‹ä¸ºå››å±‚ï¼‰ï¼Œåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ç»Ÿä¸€ä¸ºåº”ç”¨å±‚ã€‚</p><p><img src="8.jpg" alt=""></p><p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„é€šä¿¡éƒ½è¦ç»è¿‡è¿™å››ä¸ªå±‚æ¥æ‰“äº¤é“ã€‚é‚£ä¹ˆè¿™æ®µPythonç¨‹åºæ˜¯å¦‚ä½•æ“ä½œè¿æ¥çš„å»ºç«‹å’Œå…³é—­ä»¥åŠæ•°æ®çš„ä¼ è¾“å‘¢ï¼Ÿç­”æ¡ˆæ˜¯<strong>é€šè¿‡socketæä¾›çš„ä¸€ç³»åˆ—æ–¹æ³•</strong>ã€‚</p><h2 id="socket">socket</h2><p><strong>socketæ˜¯ä¸€ç§IPCæ–¹æ³•ï¼Œå®ƒä½¿å¾—åŒä¸€ä¸»æœºæˆ–ä¸åŒä¸»æœºçš„åº”ç”¨ç¨‹åºèƒ½äº¤æ¢æ•°æ®ï¼Œsocketåœ¨ä¸Šå›¾ä¸­å¤„äºç¬¬ä¸‰å±‚å’Œç¬¬å››å±‚ä¹‹é—´ï¼Œæ‰€ä»¥å¯ä»¥æŠŠsocketç†è§£ä¸ºåœ¨ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ä¹‹é—´çš„ä¸€ç»„é€šä¿¡æ¥å£ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæŠ½è±¡çš„é€šä¿¡è®¾å¤‡ï¼Œåº”ç”¨ç¨‹åºå€ŸåŠ©socketå°±èƒ½æ–¹ä¾¿åœ°ä¸å…¶ä»–åº”ç”¨ç¨‹åºè¿›è¡Œäº¤æµã€‚</strong></p><p>ç°åœ¨æŠŠå®¢æˆ·ç«¯çš„ä»£ç ç®€åŒ–ä¸ºç”¨socketè¡¨ç°çš„æœ€ç®€å½¢å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8000</span>))</span><br><span class="line">sock.send(<span class="string">b&#x27;GET / HTTP/1.1\r\nHost: 127.0.0.1:8000\r\n\r\n&#x27;</span>)</span><br><span class="line">data = sock.recv(<span class="number">4096</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰è·Ÿä¸Šé¢TCPçš„è¿æ¥è¿‡ç¨‹ååˆ†ç›¸ä¼¼ï¼Ÿåªæ˜¯ç”¨ä»£ç çš„æ–¹å¼æŠŠè¿™ä¸€å…·ç°è¿‡ç¨‹ç»™æŠ½è±¡è¡¨ç°å‡ºæ¥ç½¢äº†ã€‚</p><p>å†çœ‹æœåŠ¡å™¨ç«¯çš„æœ€ç®€åŒ–ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8000</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    cli_sock, cli_addr = sock.accept()</span><br><span class="line">    req = cli_sock.recv(<span class="number">4096</span>)</span><br><span class="line">    cli_sock.send(<span class="string">b&#x27;hello world&#x27;</span>)</span><br><span class="line">    cli_sock.close()</span><br></pre></td></tr></table></figure><p>è¿‡ç¨‹åŒæ ·å¾ˆç®€å•ï¼Œæ€»ç»“ä¸€ä¸‹å®ƒä»¬çš„è¿‡ç¨‹ï¼š</p><p><strong>æœåŠ¡å™¨ç«¯ï¼š</strong></p><ol><li>è°ƒç”¨<code>socket.socket</code>å»ºç«‹ä¸€ä¸ªsocketå¯¹è±¡ï¼ŒæŒ‡å®š<strong>åŸŸ(domain)å’Œåè®®(protocol)</strong>ï¼Œæ­¤æ—¶ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¼šç»‘å®šåˆ°è¿™ä¸ªsocketå¯¹è±¡ã€‚</li><li>è°ƒç”¨<code>sock.setsockopt</code>è®¾ç½®è¿™ä¸ªsocketé€‰é¡¹ï¼Œæœ¬ä¾‹ä¸­æŠŠsocket.SO_REUSEADDRè®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯è¿›ç¨‹ç»ˆæ­¢åï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºå®ƒç»‘å®šçš„ç«¯å£ä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œä»¥é˜²å…¶ä»–è¿›ç¨‹åœ¨å®ƒç»“æŸåæŠ¢å è¿™ä¸ªç«¯å£ã€‚</li><li>è°ƒç”¨<code>sock.bind</code>ä¸ºè¿™ä¸ªsocketå¯¹è±¡ç»‘å®šåˆ°ä¸€ä¸ªåœ°å€ä¸Šï¼Œå®ƒéœ€è¦ä¸€ä¸ªä¸»æœºåœ°å€å’Œç«¯å£ç»„æˆçš„å…ƒç»„ä½œä¸ºå‚æ•°ã€‚</li><li>è°ƒç”¨<code>sock.listen</code>é€šçŸ¥ç³»ç»Ÿå¼€å§‹ä¾¦å¬æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå‚æ•°æ˜¯åœ¨é˜Ÿåˆ—ä¸­æœ€å¤§çš„æœªå†³è¿æ¥æ•°é‡ã€‚</li><li>è°ƒç”¨<code>sock.accept</code>é˜»å¡è°ƒç”¨ç›´è‡³è¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œé‡Œé¢åŒ…å«äº†ç”¨äºä¸å®¢æˆ·ç«¯è¿›è¡Œå¯¹è¯çš„socketå¯¹è±¡ä»¥åŠå®¢æˆ·ç«¯çš„åœ°å€ä¿¡æ¯ã€‚</li><li>è°ƒç”¨<code>cli_sock.recv</code>æ–¹æ³•æ¥å—æ¥è‡ªå®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ‹¿åˆ°çš„æ˜¯<code>bâ€™GET / HTTP/1.1\r\nHost: 127.0.0.1:8000\r\n\r\nâ€™</code>ã€‚</li><li>è°ƒç”¨<code>cli_sock.send</code>æ–¹æ³•æŠŠæ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li><li>è°ƒç”¨<code>cli_sock.close</code>ç»“æŸè¿æ¥ã€‚</li></ol><p><strong>å®¢æˆ·ç«¯ï¼š</strong></p><ol><li>è°ƒç”¨<code>socket.socket</code>å»ºç«‹ä¸€ä¸ªsocketå¯¹è±¡ï¼ŒæŒ‡å®šåŸŸ(domain)å’Œåè®®(protocol)ï¼Œæ­¤æ—¶ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¼šç»‘å®šåˆ°è¿™ä¸ªsocketå¯¹è±¡ã€‚</li><li>è°ƒç”¨<code>sock.connect</code>é€šè¿‡æŒ‡å®šçš„ä¸»æœºå’Œç«¯å£è¿æ¥åˆ°å¯¹ç«¯çš„æœåŠ¡å™¨è¿›ç¨‹ã€‚</li><li>è°ƒç”¨<code>sock.send</code>ç»™æœåŠ¡å™¨ç«¯å‘é€æ•°æ®ã€‚</li><li>è°ƒç”¨<code>sock.recv</code>æ¥æ”¶æœåŠ¡å™¨ç«¯å‘æ¥çš„æ•°æ®ã€‚</li><li>è°ƒç”¨<code>sock.close</code>å…³é—­è¿æ¥ã€‚</li></ol><p>socketçš„æ•°æ®æ˜¯é€šè¿‡å†…æ ¸ç»´æŠ¤çš„è¯»å†™ç¼“å†²åŒºæ¥è·å–çš„ï¼Œå¦‚ä¸‹å›¾ä¸­çš„è¡¨ç¤ºï¼š</p><p><img src="4.png" alt=""></p><p>æ¯æ¬¡ä»ç¼“å†²åŒºå†™å…¥æˆ–è¯»å…¥æ•°æ®éƒ½ä¼šå‘èµ·æ ‡å‡†çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">(fd, buf, bufsize)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">write</span><span class="params">(fd, buf, bufwrite)</span></span>;</span><br></pre></td></tr></table></figure><p>æ¥è¿›è¡Œæ•°æ®çš„å†™æˆ–è¯»ã€‚å½“ç„¶å¯¹äºå¤§æ–‡ä»¶æ¥è¯´ï¼Œæ‰§è¡Œå¤šæ¬¡readã€writeç­‰ç³»ç»Ÿè°ƒç”¨çš„è€—è´¹æ˜¯ç›¸å½“å¯è§‚çš„ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°<strong>sendfile</strong>ç³»ç»Ÿè°ƒç”¨ï¼š</p><p><img src="5.png" alt=""></p><h3 id="socketçš„åŸŸ"><strong>socketçš„åŸŸ</strong></h3><p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­æˆ‘ä»¬å»ºç«‹socketå¯¹è±¡éƒ½æ˜¯ä½¿ç”¨äº†<strong>AF_INET</strong>è¿™ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªsocketæ˜¯é€šè¿‡IPV4çš„æ–¹å¼è¿›è¡Œé€šä¿¡çš„ã€‚</p><p>è¿™ç§socketä¹Ÿè¢«å«åš<strong>Internet Domain Socket</strong>ï¼Œå®ƒå®šä¹‰çš„åœ°å€å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> &#123;</span></span><br><span class="line">     <span class="keyword">in_addr_t</span> s_addr;     <span class="comment">//32ä½æ— ç¬¦å·æ•´æ•°ã€‚</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> &#123;</span></span><br><span class="line">     <span class="keyword">sa_family_t</span> sin_family;     <span class="comment">//AF_INET</span></span><br><span class="line">     <span class="keyword">in_port_t</span> sin_port;     <span class="comment">//ç«¯å£å·</span></span><br><span class="line">     <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> <span class="title">sin_addr</span>;</span>     <span class="comment">//ipv4åœ°å€</span></span><br><span class="line">     <span class="keyword">unsigned</span> <span class="keyword">char</span> __pad[X];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸ä¹‹ç›¸å¯¹çš„ï¼Œè¿˜æœ‰ä¸€ç§socketç±»å‹ä¸º<strong>Unix Domain Socket</strong>ï¼Œå®ƒé€šè¿‡<strong>AF_UNIX</strong>è¿™ä¸ªå‚æ•°æ¥åˆ›å»ºã€‚å®ƒå®šä¹‰çš„åœ°å€å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_un</span> &#123;</span></span><br><span class="line">     <span class="keyword">sa_family_t</span> sun_family;     <span class="comment">//AF_UNIX</span></span><br><span class="line">     <span class="keyword">char</span> sun_path[<span class="number">108</span>];     <span class="comment">//socketè·¯å¾„å</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>å½“ç”¨Unix Domain Socketå‘èµ·bindæ“ä½œæ—¶ï¼Œä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ¡ç›®ï¼Œsocketå’Œè·¯å¾„åä¸ºä¸€å¯¹ä¸€å…³ç³»</strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒUnix Domain Socketåªé’ˆå¯¹åœ¨åŒä¸€ä¸»æœºä¸‹åº”ç”¨ç¨‹åºä¸‹çš„ç½‘ç»œé€šä¿¡ï¼Œ<strong>å®ƒè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯å¯ä»¥ä½¿ç”¨ç›®å½•æƒé™æ¥æ§åˆ¶socketçš„è®¿é—®</strong>ã€‚ï¼ˆä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨mysqlæ—¶ç”¨åˆ°çš„<code>mysql.sock</code>å°±æ˜¯ä½¿ç”¨<code>unix domain sokcet</code>çš„è½½ä½“ï¼‰</p><h3 id="socketçš„åè®®"><strong>socketçš„åè®®</strong></h3><p>åœ¨protocolä¸Šæˆ‘ä»¬ä½¿ç”¨äº†SOCK_STREAMï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸ªæµå¼å¥—æ¥å­—ï¼ˆå³TCPï¼‰ï¼Œé™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥æŠŠå®ƒæŒ‡å®šä¸ºSOCK_DGRAMï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸ªæ•°æ®æŠ¥å¥—æ¥å­—ï¼ˆå³UDPï¼‰ã€‚</p><p><strong>TCPè·ŸUDPçš„ä¸€äº›åŸºæœ¬åŒºåˆ«ï¼š</strong></p><blockquote><ol><li>TCPé¢å‘è¿æ¥ï¼ŒUDPä¸é¢å‘è¿æ¥ã€‚</li><li>TCPé¢å‘å­—èŠ‚ï¼Œä¸å­˜åœ¨æ¶ˆæ¯è¾¹ç•Œï¼Œå¯èƒ½å­˜åœ¨ç²˜åŒ…é—®é¢˜ã€‚UDPåˆ™é¢å‘æŠ¥æ–‡ã€‚</li><li>TCPä¼šå°½åŠ›ä¿è¯æ•°æ®çš„å¯é äº¤ä»˜ï¼Œè€ŒUDPé»˜è®¤ä¸åšä¿è¯ã€‚</li><li>TCPå¤´éƒ¨20å­—èŠ‚ï¼ŒUDPå¤´éƒ¨8å­—èŠ‚ã€‚</li></ol></blockquote><p><strong>ç¼–è€…æ³¨</strong>ï¼šå¦‚ä½•ç†è§£1å’Œ3ï¼š</p><p>TCPåè®®æ˜¯ä¸€ç§å¯é çš„é€šä¿¡åè®®ï¼Œ<strong>å®ƒè¦æ±‚ä¼ è¾“çš„è¿‡ç¨‹æ˜¯å¯é çš„ï¼Œå› æ­¤éœ€è¦ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹çš„ç¯èŠ‚ï¼Œç¡®ç«‹è¿æ¥å…³ç³»ä¹‹åï¼Œæ‰å¯ä»¥è¿›è¡Œä¼ è¾“</strong>ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒTCPè¿˜æœ‰è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œè¿˜æœ‰æ’åºçš„æœºåˆ¶ï¼Œæœ‰å‘é€çš„çª—å£ï¼Œæœ‰çª—å£å¤§å°ç­‰ç­‰ï¼Œä¿è¯æ¥æ”¶æ–¹æ¥æ”¶åˆ°çš„å°±æ˜¯å‘é€æ–¹å‘é€è¿‡å»çš„ã€‚</p><p>UDPæ˜¯ä¸€ç§ä¸å¯é çš„é€šä¿¡åè®®ï¼Œå®ƒ<strong>ä¸éœ€è¦å»ºç«‹è¿æ¥</strong>ï¼Œä¸éœ€è¦å¯¹è¿æ¥è¿›è¡Œç¡®è®¤ACKçš„æ“ä½œï¼Œä¸éœ€è¦é‡ä¼ ï¼Œä¸éœ€è¦æ’åºï¼Œå®ƒ<strong>åªç®¡ä¼ è¾“</strong>ã€‚</p><p>æ¯”å¦‚ï¼š</p><blockquote><p>â€œæˆ‘ç»™ä½ è®²ä¸€ä¸ªå…³äºTCPçš„ç¬‘è¯ã€‚â€</p><p>â€œå¥½çš„ä½ ç»™æˆ‘è®²ä¸€ä¸ªå…³äºTCPçš„ç¬‘è¯ã€‚â€</p><p>â€œå¥½çš„ã€‚â€</p><p><strong>------ç¡®ç«‹è¿æ¥å…³ç³»ï¼Œè¿›è¡Œä¼ è¾“------</strong></p><p>â€œè‹Ÿã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ªå­—ã€‚â€</p><p>â€œç¬¬ä¸€ä¸ªå­—æ”¶åˆ°ï¼Œè¯·å‘ç¬¬äºŒä¸ªå­—ã€‚â€</p><p>â€œåˆ©ã€‚è¿™æ˜¯ç¬¬äºŒä¸ªå­—ã€‚â€</p><p>â€œç¬¬äºŒä¸ªå­—æ”¶åˆ°ï¼Œè¯·å‘ç¬¬ä¸‰ä¸ªå­—ã€‚â€</p><p>â€œå›½ã€‚è¿™æ˜¯ç¬¬ä¸‰ä¸ªå­—ã€‚â€</p><p><strong>------è¶…æ—¶é‡ä¼ -------</strong></p><p>â€œå›½ã€‚è¿™æ˜¯ç¬¬ä¸‰ä¸ªå­—ã€‚â€</p><p>â€œç¬¬ä¸‰ä¸ªå­—æ”¶åˆ°ï¼Œè¯·å‘ç¬¬å››ä¸ªå­—ã€‚â€</p><p>â€œå®¶â€¦â€¦â€</p><p>â€¦â€¦</p><p>â€œæˆ‘è®²å®Œäº†ã€‚â€</p><p>â€œå¥½çš„ã€‚æˆ‘å¬å®Œäº†ã€‚â€</p><p>â€œå¥½çš„ã€‚â€</p><p><strong>------å…³é—­è¿æ¥------</strong></p><p>â€œæˆ‘ç»™ä½ è®²ä¸€ä¸ªå…³äºUDPçš„ç¬‘è¯ã€‚â€</p><p>â€œå’¦æˆ‘å¥½åƒå¬è§ä¸€ä¸ªå…³ç¬‘Pè¯çš„Uâ€¦â€¦ï¼Ÿå’¦è¿™è‹Ÿå•Šå›½å®¶å•Šè¿™ä»€ä¹ˆä»€ä¹ˆä¹‹æ˜¯å•¥ç©æ„ï¼Ÿæˆ‘è®©åº”ç”¨å±‚çœ‹çœ‹â€¦â€¦åº”ç”¨å±‚è¯´åº”è¯¥æ˜¯ä¸¤å¥è¯—ï¼Ÿâ€</p></blockquote><p>TCP æœ€é€‚åˆç”¨äºå¯¹æ—¶åºä¸å¤ªå…³å¿ƒçš„ï¼Œä¸”è¦æ±‚é«˜å¯é æ€§çš„åº”ç”¨ç¨‹åºã€‚</p><ul><li><a href="https://www.zhihu.com/search?q=%E4%B8%87%E7%BB%B4%E7%BD%91&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A1883510114%7D">ä¸‡ç»´ç½‘</a>ï¼ˆHTTP/HTTPSï¼‰</li><li>å®‰å…¨å¤–å£³ï¼ˆSSHï¼‰</li><li><a href="https://www.zhihu.com/search?q=%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A1883510114%7D">ç”µå­é‚®ä»¶</a>ï¼ˆSMTPï¼ŒIMAP / POPï¼‰</li><li>æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰</li></ul><p>UDP æœ€é€‚åˆéœ€è¦é€Ÿåº¦å’Œæ•ˆç‡çš„åº”ç”¨ç¨‹åºã€‚</p><ul><li>ä¸²æµå½±ç‰‡</li><li>çº¿ä¸Šæ¸¸æˆ</li><li>ç°åœºç›´æ’­</li><li>åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰</li><li><a href="https://www.zhihu.com/search?q=%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A1883510114%7D">äº’è”ç½‘åè®®</a>è¯­éŸ³ï¼ˆVoIPï¼‰</li><li>æ™®é€šæ–‡ä»¶ä¼ è¾“åè®®ï¼ˆTFTPï¼‰</li></ul><h3 id="socketçš„é€šé“"><strong>socketçš„é€šé“</strong></h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œsocketçš„ä¿¡é“æ˜¯åŒå‘çš„ï¼Œå³ä¸€ä¸ªsocketæ—¢èƒ½è¯»åˆèƒ½å†™ã€‚æœ‰æ—¶å€™ä½ éœ€è¦å»ºç«‹ä¸€ä¸ªåŠå¼€æ”¾çš„socketï¼Œè¿™æ—¶å€™å°±è¦ä½¿ç”¨socketçš„shutdownè°ƒç”¨ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ ‡è®°ï¼Œå…¶ä¸­ï¼š</p><ul><li><strong>SHUT_RDä»£è¡¨å…³é—­è¿æ¥çš„è¯»ç«¯ã€‚</strong></li><li><strong>SHUT_WRä»£è¡¨å…³é—­è¿æ¥çš„å†™ç«¯ã€‚</strong></li><li><strong>SHUT_RDWRä»£è¡¨å…³é—­è¿æ¥çš„è¯»ç«¯è·Ÿå†™ç«¯ã€‚</strong></li></ul><p>shutdown()ä¸ä¼šæ˜¾å¼å…³é—­æ–‡ä»¶æè¿°ç¬¦ï¼Œéœ€è¦å¦å¤–è°ƒç”¨close()ã€‚</p><h3 id="socketæœåŠ¡å™¨">socketæœåŠ¡å™¨</h3><p>ç°åœ¨ä½ åº”è¯¥å¯¹socketæœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£äº†ï¼Œç°åœ¨æˆ‘ä»¬å†æ¥æ¢è®¨ä¸€ä¸ªsocketæœåŠ¡å™¨æ˜¯æ€ä¹ˆç¼–å†™çš„ã€‚</p><p>å†å›åˆ°æœ€å¼€å§‹çš„é‚£æ®µä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server 8000</span><br><span class="line">Serving HTTP on 0.0.0.0 port 8000 ...</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç›´æ¥ç”¨pythonå†…ç½®çš„HTTPServerç»‘å®šäº†8000è¿™ä¸ªç«¯å£ä¸Šã€‚</p><p>æŸ¥çœ‹python3çš„<code>http.server</code>æ‰€åœ¨çš„æºç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">HandlerClass=BaseHTTPRequestHandler,</span></span></span><br><span class="line"><span class="params"><span class="function">         ServerClass=HTTPServer, protocol=<span class="string">&quot;HTTP/1.0&quot;</span>, port=<span class="number">8000</span>, bind=<span class="string">&quot;&quot;</span></span>):</span></span><br><span class="line">    server_address = (bind, port)</span><br><span class="line"></span><br><span class="line">    HandlerClass.protocol_version = protocol</span><br><span class="line">    httpd = ServerClass(server_address, HandlerClass)</span><br><span class="line"></span><br><span class="line">    sa = httpd.socket.getsockname()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Serving HTTP on&quot;</span>, sa[<span class="number">0</span>], <span class="string">&quot;port&quot;</span>, sa[<span class="number">1</span>], <span class="string">&quot;...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        httpd.serve_forever()</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nKeyboard interrupt received, exiting.&quot;</span>)</span><br><span class="line">        httpd.server_close()</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>å½“<code>http.server</code>ä»¥æ¨¡å—æ–¹å¼è¿è¡Œæ—¶ä¼šè°ƒç”¨testæ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨é»˜è®¤ä½¿ç”¨äº†<strong>HTTPServer</strong>ä½œä¸ºæœåŠ¡å™¨çš„ç±»ï¼Œ<strong>BaseHTTPRequestHandler</strong>ä½œä¸ºè¯·æ±‚çš„å¤„ç†ç±»ã€‚</p><p>çœ‹HTTPServerï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€å¼€å§‹ä½¿ç”¨çš„æœåŠ¡å™¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTTPServer</span>(<span class="params">socketserver.TCPServer</span>):</span></span><br><span class="line"></span><br><span class="line">    allow_reuse_address = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">server_bind</span>(<span class="params">self</span>):</span></span><br><span class="line">        socketserver.TCPServer.server_bind(self)</span><br><span class="line">        host, port = self.socket.getsockname()[:<span class="number">2</span>]</span><br><span class="line">        self.server_name = socket.getfqdn(host)</span><br><span class="line">        self.server_port = port</span><br></pre></td></tr></table></figure><p>å®ƒç»§æ‰¿äº†<strong>socketserver.TCPServer</strong>è¿™ä¸ªç±»ï¼Œæ‰¾åˆ°socketserveræ‰€åœ¨çš„æºç ï¼Œå‘ç°æœ‰ä¸€æ®µæ³¨é‡Šï¼Œè¯´æ˜äº†å‡ ä¸ªæœåŠ¡å™¨ç±»ä¹‹é—´çš„å…³ç³»ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+------------+</span><br><span class="line">| BaseServer |</span><br><span class="line">+------------+</span><br><span class="line">      |</span><br><span class="line">      v</span><br><span class="line">+-----------+        +------------------+</span><br><span class="line">| TCPServer |-------&gt;| UnixStreamServer |</span><br><span class="line">+-----------+        +------------------+</span><br><span class="line">      |</span><br><span class="line">      v</span><br><span class="line">+-----------+        +--------------------+</span><br><span class="line">| UDPServer |-------&gt;| UnixDatagramServer |</span><br><span class="line">+-----------+        +--------------------+</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>TCPServer</strong>ç»§æ‰¿è‡ª<strong>BaseServer</strong>ï¼Œè€Œ<strong>UDPServer</strong>åˆç»§æ‰¿è‡ª<strong>TCPServer</strong>ã€‚</p><p>æ‰¾åˆ°TCPServerè¿™ä¸ªç±»ï¼Œå¯ä»¥çœ‹åˆ°å®ƒé»˜è®¤ä½¿ç”¨<code>socket.AF_INET(IPV4)</code>å’Œ<code>socket.SOCK_STREAM(TCP)</code>åè®®ï¼Œå¹¶ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™å»ºç«‹ä¸€ä¸ªsocketå¯¹è±¡ï¼Œæ³¨æ„è¿™æ—¶å€™è¿™ä¸ªsocketå¯¹è±¡ä»…ä»…åªæ˜¯è¢«åˆ›å»ºå¤„ç†ï¼Œå®ƒè¿˜æ²¡æœ‰åšä»»ä½•çš„ç»‘å®šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span>(<span class="params">BaseServer</span>):</span></span><br><span class="line">    address_family = socket.AF_INET</span><br><span class="line"></span><br><span class="line">    socket_type = socket.SOCK_STREAM</span><br><span class="line"></span><br><span class="line">    request_queue_size = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    allow_reuse_address = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, server_address, RequestHandlerClass, bind_and_activate=<span class="literal">True</span></span>):</span></span><br><span class="line">        BaseServer.__init__(self, server_address, RequestHandlerClass)</span><br><span class="line">        self.socket = socket.socket(self.address_family,</span><br><span class="line">                                    self.socket_type)</span><br><span class="line">        <span class="keyword">if</span> bind_and_activate:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.server_bind()</span><br><span class="line">                self.server_activate()</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                self.server_close()</span><br><span class="line">                <span class="keyword">raise</span></span><br></pre></td></tr></table></figure><p>çœŸæ­£çš„ç»‘å®šæ“ä½œå‘ç”Ÿåœ¨<code>self.server_bind()</code>è¿™è¡Œä»£ç é‡Œï¼Œç°åœ¨æˆ‘ä»¬æŸ¥çœ‹è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæŠŠsocketå¯¹è±¡ç»‘å®šåˆ°<code>__init__</code>åˆå§‹åŒ–ä¸­å¾—åˆ°çš„åœ°å€ä¸Šï¼Œå¹¶è·å–æœåŠ¡ç«¯çš„åœ°å€ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server_bind</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> self.allow_reuse_address:</span><br><span class="line">        self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">    self.socket.bind(self.server_address)</span><br><span class="line">    self.server_address = self.socket.getsockname()</span><br></pre></td></tr></table></figure><p>ç»‘å®šåçš„ç›‘å¬åŠ¨ä½œåˆ™å‘ç”Ÿåœ¨<code>self.server_activate()</code>è¿™è¡Œé‡Œï¼Œå®ƒç´§è·Ÿç€bindingåè¿›è¡Œï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œsocketä¼šåœ¨ç»‘å®šçš„åœ°å€ä¸Šç›‘å¬åˆ°æ¥çš„è¿æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server_activate</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.socket.listen(self.request_queue_size)</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å…³å¿ƒçš„æ˜¯ï¼Œå¦‚æœç°åœ¨æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å‘èµ·äº†è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç±»ä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨<strong>TCPServer</strong>ç»§æ‰¿çš„<strong>BaseServer</strong>æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>æ‰¾åˆ°BaseServerçš„<code>serve_forever</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">serve_forever</span>(<span class="params">self, poll_interval=<span class="number">0.5</span></span>):</span></span><br><span class="line">    self.__is_shut_down.clear()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> self.__shutdown_request:</span><br><span class="line">            r, w, e = _eintr_retry(select.select, [self], [], [],</span><br><span class="line">                                    poll_interval)</span><br><span class="line">            <span class="keyword">if</span> self <span class="keyword">in</span> r:</span><br><span class="line">                self._handle_request_noblock()</span><br><span class="line"></span><br><span class="line">            self.service_actions()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        self.__shutdown_request = <span class="literal">False</span></span><br><span class="line">        self.__is_shut_down.<span class="built_in">set</span>()</span><br></pre></td></tr></table></figure><p>å½“æœåŠ¡å™¨æ²¡è¢«shutdownæ—¶ï¼Œå°±ä¼šåœ¨whileå¾ªç¯ä¸­ç”¨selectå»è½®è¯¢æ´»è·ƒçš„socketï¼Œè¿”å›æ´»è·ƒçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå½“æ£€æµ‹åˆ°å½“å‰æœ‰å¯è¯»äº‹ä»¶æ—¶ï¼Œå°±ä¼šè°ƒç”¨<code>_handle_request_noblock</code>æ–¹æ³•æ¥å¤„ç†socketï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_request</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> self.socket.accept()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_handle_request_noblock</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        request, client_address = self.get_request()</span><br><span class="line">    <span class="keyword">except</span> OSError:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> self.verify_request(request, client_address):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.process_request(request, client_address)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            self.handle_error(request, client_address)</span><br><span class="line">            self.shutdown_request(request)</span><br></pre></td></tr></table></figure><p>åœ¨<code>_handle_request_noblock</code>æ–¹æ³•ä¸­ï¼ŒæœåŠ¡å™¨æ‹¿åˆ°å¯è¯»çš„socketï¼ˆrequestï¼‰ï¼Œè°ƒç”¨<em>process_request</em>æ–¹æ³•æ¥å¤„ç†è¯·æ±‚ï¼Œå½“å‘ç”Ÿå¼‚å¸¸æ—¶è°ƒç”¨<code>handle_error</code>å¤„ç†é”™è¯¯ï¼Œæ¥ç€è°ƒç”¨<code>shutdown_request</code>å…³é—­è¯·æ±‚ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_request</span>(<span class="params">self, request, client_address</span>):</span></span><br><span class="line">    self.finish_request(request, client_address)</span><br><span class="line">    self.shutdown_request(request)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">finish_request</span>(<span class="params">self, request, client_address</span>):</span></span><br><span class="line">    self.RequestHandlerClass(request, client_address, self)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shutdown_request</span>(<span class="params">self, request</span>):</span></span><br><span class="line">    self.close_request(request)</span><br></pre></td></tr></table></figure><p>æœ€åæ¥çœ‹<code>process_request</code>æ–¹æ³•åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œé¦–å…ˆå®ƒè°ƒç”¨<code>finish_request</code>æ–¹æ³•ï¼Œå®ä¾‹åŒ–å‡ºä¸€ä¸ª<code>RequestHandlerClass</code>ï¼ˆè¯·æ±‚å¤„ç†ç±»ï¼‰æ¥å¤„ç†æœ¬æ¬¡è¯·æ±‚ï¼Œå¤„ç†å®Œæˆåè°ƒç”¨<code>shutdown_request</code>æ–¹æ³•æ¥ç»“æŸè¯·æ±‚ã€‚</p><p>çœ‹çœ‹<strong>UDPServer</strong>ï¼Œå‡ ä¹æ˜¯æ¢æ±¤ä¸æ¢è¯ï¼Œåªä¿®æ”¹äº†TCPServerçš„å‡ ä¸ªé‡è¦çš„å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPServer</span>(<span class="params">TCPServer</span>):</span></span><br><span class="line">    allow_reuse_address = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    socket_type = socket.SOCK_DGRAM</span><br><span class="line"></span><br><span class="line">    max_packet_size = <span class="number">8192</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_request</span>(<span class="params">self</span>):</span></span><br><span class="line">        data, client_addr = self.socket.recvfrom(self.max_packet_size)</span><br><span class="line">        <span class="keyword">return</span> (data, self.socket), client_addr</span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨ç±»å·®ä¸å¤šå°±è¿™æ ·äº†ï¼Œå†æ¥çœ‹RequestHandlerã€‚</p><p>å…ˆçœ‹æœ€åŸå§‹çš„<strong>BaseRequestHandler</strong>ç±»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseRequestHandler</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, request, client_address, server</span>):</span></span><br><span class="line">        self.request = request</span><br><span class="line">        self.client_address = client_address</span><br><span class="line">        self.server = server</span><br><span class="line">        self.setup()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.handle()</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            self.finish()</span><br></pre></td></tr></table></figure><p>å®ƒæ¥æ”¶ä¸€ä¸ªè¯·æ±‚(socket)ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨<code>self.setup()</code>å»ºç«‹ç”¨äºè¯»å†™çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ¥ç€è°ƒç”¨<code>self.handle()</code>æ¥å¤„ç†è¿™æ¬¡è¯·æ±‚ï¼Œæœ€ç»ˆè°ƒç”¨<code>self.finish()</code>ç»“æŸå¤„ç†ã€‚</p><p>ç°åœ¨çœ‹<strong>StreamRequestHandler</strong>ç±»ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StreamRequestHandler</span>(<span class="params">BaseRequestHandler</span>):</span></span><br><span class="line">    rbufsize = -<span class="number">1</span></span><br><span class="line">    wbufsize = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    timeout = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    disable_nagle_algorithm = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.connection = self.request</span><br><span class="line">        <span class="keyword">if</span> self.timeout <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.connection.settimeout(self.timeout)</span><br><span class="line">        <span class="keyword">if</span> self.disable_nagle_algorithm:</span><br><span class="line">            self.connection.setsockopt(socket.IPPROTO_TCP,</span><br><span class="line">                                       socket.TCP_NODELAY, <span class="literal">True</span>)</span><br><span class="line">        self.rfile = self.connection.makefile(<span class="string">&#x27;rb&#x27;</span>, self.rbufsize)</span><br><span class="line">        self.wfile = self.connection.makefile(<span class="string">&#x27;wb&#x27;</span>, self.wbufsize)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">finish</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.wfile.closed:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.wfile.flush()</span><br><span class="line">            <span class="keyword">except</span> socket.error:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">        self.wfile.close()</span><br><span class="line">        self.rfile.close()</span><br></pre></td></tr></table></figure><p>åœ¨<code>setup</code>è¿‡ç¨‹ä¸ºsocketå»ºç«‹äº†ä¸€ä¸ªç”¨äºè¯»çš„æ–‡ä»¶æè¿°ç¬¦ä»¥åŠä¸€ä¸ªç”¨äºå†™çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨<code>finish</code>çš„è¿‡ç¨‹ä¸­ä¼šæŠŠå†™ç¼“å†²åŒºåˆ·æ–°ï¼Œå…³é—­è¯»å†™ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>ä»ä¸Šé¢å¾—çŸ¥<code>handle</code>æ˜¯å¤„ç†è¯·æ±‚çš„æ ¸å¿ƒè¿‡ç¨‹ï¼Œåœ¨<strong>BaseHTTPRequestHandler</strong>ä¸­æ˜¯è¿™æ ·å®ç°çš„ï¼Œhandlerä¼šå¤„ç†ä¸€ä¸ªsocketè¯·æ±‚ï¼Œå¦‚æœè¯¥è¯·æ±‚æ˜¯æ–­ç»­è¯·æ±‚è€Œä¸”æ²¡æœ‰è¶…æ—¶æˆ–å¼‚å¸¸çš„è¯ï¼Œå°±ä¼šç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼ˆä¾‹å¦‚keep-aliveã€å¤§æ•°æ®ä¼ è¾“ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class BaseHTTPRequestHandler(socketserver.StreamRequestHandler):</span><br><span class="line">    def handle(self):</span><br><span class="line">        self.handle_one_request()</span><br><span class="line">        while not self.close_connection:</span><br><span class="line">            self.handle_one_request()</span><br></pre></td></tr></table></figure><p>å…¶ä»–éƒ¨åˆ†å¤ªçç¢å°±ä¸è´´äº†ï¼Œå®Œæˆè¿™ä¸€æ­¥åï¼ŒæœåŠ¡å™¨ç«¯å°±å®Œæˆäº†ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚çš„å¤„ç†ã€‚</p><p>æœ‰çš„äººè¿˜æ˜¯å¯èƒ½è§‰å¾—<strong>BaseHTTPRequestHandler</strong>å’Œ<strong>SimpleHTTPRequestHandler</strong>è¿™ç±»çš„å¤„ç†ç±»å¤ªæŒ«å¤ªä¸çµæ´»äº†ï¼Œé’ˆå¯¹è¿™ä¸ª<code>http.server</code>æ¨¡å—è¿˜æä¾›äº†ä¸€ç§å¤„ç†ç±»ï¼š<strong>CGIHTTPRequestHandler</strong>ï¼Œå®ƒå¯ä»¥é€šè¿‡è¯·æ±‚ä¿¡æ¯é€‰æ‹©æ‰§è¡ŒæŒ‡å‘çš„cgiè„šæœ¬ã€‚cgiè™½ç„¶æ›´çµæ´»ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å¼Šç«¯ï¼Œäºæ˜¯åé¢åˆæœ‰äº†å„ç§æ–¹æ¡ˆï¼šfastcgiã€mod_pythonã€wsgiâ€¦æœ‰å…´è¶£çš„å¯ä»¥çœ‹<a href="https://link.zhihu.com/?target=https%3A//docs.python.org/3/howto/webservers.html">HOWTO Use Python in the web</a>ã€‚ä½†åœ¨ä¸å¤æ‚çš„æƒ…å†µä¸‹ï¼Œè¿™äº›è‡ªå¸¦çš„è¯·æ±‚å¤„ç†ç±»ä¹Ÿå‹‰å¼ºå¤Ÿç”¨äº†ã€‚</p><p>å†è°ˆåˆ°ä¹‹å‰è¯´çš„HTTPServerï¼Œåœ¨çº¿ä¸Šç¯å¢ƒä¸­ä¸€èˆ¬æ²¡æœ‰äººä¼šè¿™ä¹ˆå‚»ï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸ªå†…ç½®çš„HTTPServerçš„ã€‚å› ä¸ºå®ƒæ˜¯å•è¿›ç¨‹è€Œä¸”åœ¨è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå†…éƒ½åªèƒ½å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œä¸è¿‡å¥½åœ¨socketserverè¿™ä¸ªæ¨¡å—ä¹Ÿæä¾›äº†<strong>ThreadingMixIn</strong>ä»¥åŠ<strong>ForkingMixIn</strong>ï¼Œä»–ä»¬çš„ç›®çš„æ˜¯å½“ä¸€ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ä½¿ç”¨æ–°å»ºä¸€ä¸ªçº¿ç¨‹æˆ–ä¸€ä¸ªè¿›ç¨‹å»å¤„ç†å®ƒã€‚</p><p>ä½¿ç”¨æ–¹æ³•ååˆ†ç®€å•ï¼Œç”¨<code>ThreadingMixIn</code>æˆ–<code>ForkingMixIn</code>ä¸Serverç±»ç»„æˆæ··åˆç±»å°±è¡Œäº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadingHTTPServer</span>(<span class="params">ThreadingMixIn, HTTPServer</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ThreadingMixInçš„æºç ç¡®å®å¯ä»¥çœ‹åˆ°å®ƒé‡å†™äº†<code>process_request</code>è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šè¦†ç›–æ··åˆç±»ä¸­Serverç±»çš„<code>process_request</code>æ–¹æ³•ï¼Œå½“Serverå¤„ç†è¯·æ±‚æ—¶å°±ä¼šè°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨ThreadingMixInçš„å¤„ç†ä¸­ï¼Œä¼šæ–°èµ·ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨çš„å¹¶å‘èƒ½åŠ›å°±æ¯”åŸæ¥æœ‰äº†å¾ˆå¤§çš„æå‡äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadingMixIn</span>:</span></span><br><span class="line">    daemon_threads = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request_thread</span>(<span class="params">self, request, client_address</span>):</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.finish_request(request, client_address)</span><br><span class="line">            self.shutdown_request(request)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            self.handle_error(request, client_address)</span><br><span class="line">            self.shutdown_request(request)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span>(<span class="params">self, request, client_address</span>):</span></span><br><span class="line">        t = threading.Thread(target = self.process_request_thread,</span><br><span class="line">                             args = (request, client_address))</span><br><span class="line">        t.daemon = self.daemon_threads</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure><p>ä½†æœ‰çš„äººçœ‹åˆ°è¿™é‡Œä¸ä¸€å®šä¼šæ»¡æ„ï¼Œä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ç™¾ä¸ªè¯·æ±‚ä¸€ç™¾ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸‡ä¸ªã€åä¸‡ä¸ªâ€¦è¿˜ä¸å¾—ä¸Šå¤©å•Šã€‚åœ¨å®é™…ç¯å¢ƒä¸­ï¼Œä¸€èˆ¬éœ€è¦æŠŠçº¿ç¨‹æ§åˆ¶åœ¨ä¸€å®šçš„æ•°é‡å†…ï¼ˆä¾‹å¦‚çº¿ç¨‹æ± ï¼‰ä»¥é™ä½ç³»ç»Ÿè´Ÿè½½ã€‚</p><p>ç°åœ¨ç»§ç»­æŠŠç›®å…‰è½¬ç§»åˆ°æˆ‘ä»¬ä¸€å¼€å§‹è®¨è®ºçš„socketä¸Šï¼Œå†æ¥æ‰¯IOæ¨¡å‹çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬çŸ¥é“socketçš„è¾“å…¥éœ€è¦ä¸¤ä¸ªé˜¶æ®µï¼š</p><ol><li>ç­‰å¾…æ•°æ®å‡†å¤‡å¥½ã€‚</li><li>ä»å†…æ ¸å‘è¿›ç¨‹å¤åˆ¶æ•°æ®ã€‚</li></ol><p>å› ä¸ºç­‰å¾…çš„è¿‡ç¨‹æ˜¯é˜»å¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨å¤šçº¿ç¨‹å°±æ˜¯é™ä½è¿™ä¸ªé˜»å¡æ‰€å¸¦æ¥çš„å½±å“ã€‚</p><h3 id="äº”ç§IOæ¨¡å‹ï¼š">äº”ç§IOæ¨¡å‹ï¼š</h3><h4 id="é˜»å¡IOæ¨¡å‹"><strong>é˜»å¡IOæ¨¡å‹</strong></h4><p>recv-&gt;æ— æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;ç­‰å¾…æ•°æ®-&gt;æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´-&gt;å¤åˆ¶å®Œæˆ-&gt;è¿”å›æˆåŠŸæŒ‡ç¤º</p><p><strong>éé˜»å¡IOæ¨¡å‹</strong></p><p>recv-&gt;æ— æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;è¿”å›EWOULDBLOCK-&gt;recv-&gt;æ— æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;è¿”å›EWOULDBLOCK-&gt;æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´-&gt;å¤åˆ¶å®Œæˆ-&gt;è¿”å›æˆåŠŸæŒ‡ç¤º</p><p>ç‰¹ç‚¹ï¼šè½®è¯¢æ“ä½œï¼Œå¤§é‡å ç”¨cpuæ—¶é—´ã€‚</p><h4 id="IOå¤ç”¨æ¨¡å‹"><strong>IOå¤ç”¨æ¨¡å‹</strong></h4><p>select-&gt;æ— æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;æ®æŠ¥å‡†å¤‡å¥½-&gt;è¿”å›å¯è¯»æ¡ä»¶-&gt;recv-&gt;æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´-&gt;å¤åˆ¶å®Œæˆ-&gt;è¿”å›æˆåŠŸæŒ‡ç¤º</p><h4 id="ä¿¡å·é©±åŠ¨æ¨¡å‹"><strong>ä¿¡å·é©±åŠ¨æ¨¡å‹</strong></h4><p>å»ºç«‹ä¿¡å·å¤„ç†ç¨‹åº(sigaction)-&gt;é€’äº¤SIGIO-&gt;recv-&gt;æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´-&gt;å¤åˆ¶å®Œæˆ-&gt;è¿”å›æˆåŠŸæŒ‡ç¤º</p><h4 id="å¼‚æ­¥IOæ¨¡å‹"><strong>å¼‚æ­¥IOæ¨¡å‹</strong></h4><p>aio_read-&gt;æ— æ•°æ®å‡†å¤‡å¥½-&gt;æ•°æ®æŠ¥å‡†å¤‡å¥½-&gt;æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´-&gt;å¤åˆ¶å®Œæˆ-&gt;é€’äº¤aio_readä¸­æŒ‡å®šçš„ä¿¡å·</p><p>ç‰¹ç‚¹ï¼šç›´åˆ°æ•°æ®å¤åˆ¶å®Œæˆäº§ç”Ÿä¿¡å·çš„è¿‡ç¨‹ä¸­è¿›ç¨‹éƒ½ä¸è¢«é˜»å¡ã€‚</p><p>æ¯«æ— ç–‘é—®ï¼Œæˆ‘ä»¬ä»å¼€å§‹ä¸€ç›´ä½¿ç”¨ç€é˜»å¡çš„IOæ¨¡å‹ï¼Œè¿™ä¸ªæ•ˆç‡æ˜¯ä½ä¸‹çš„ã€‚</p><p>ä¸ºäº†è·å–æ›´å¥½çš„æ€§èƒ½ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨IOå¤šè·¯å¤ç”¨æ¨¡å‹ï¼Œä¾‹å¦‚<em>select</em>å’Œ<em>poll</em>æ“ä½œï¼Œè¿è¡Œè¿›ç¨‹åŒæ—¶æ£€æŸ¥å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ä»¥æ‰¾å‡ºå®ƒä»¬ä»»æ„ä¸€ä¸ªæ˜¯å¦å¯ä»¥è¿›è¡ŒIOæ“ä½œï¼Œå†…æ ¸ä¸€æ—¦å‘ç°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªIOæ¡ä»¶å°±ç»ªï¼ˆè¾“å…¥å‡†å¤‡è¢«è¯»å–ï¼Œæˆ–æè¿°ç¬¦èƒ½æ‰¿æ¥æ›´å¤šçš„è¾“å‡ºï¼‰ï¼Œå®ƒå°±é€šçŸ¥è¿›ç¨‹ã€‚</p><p>ä½†å‰é¢è¯´äº†<em>select</em>å’Œ<em>poll</em>æœ‰ä¸€ä¸ªå¼Šç«¯å°±æ˜¯ä»–ä»¬åœ¨æ£€æŸ¥å¯ç”¨æè¿°ç¬¦çš„æ—¶å€™éƒ½æ˜¯ä¸æ–­åœ°éå†åˆéå†ï¼Œå½“è¦ç›‘å¬çš„socketçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡åºå¤§æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼ŒCPUæ¶ˆè€—ä¸¥é‡ã€‚</p><p>ä¿¡å·é©±åŠ¨æ¨¡å‹æ¯”ä»–ä»¬ä¼˜è¶Šçš„åœ°æ–¹åœ¨äºï¼Œå½“æœ‰è¾“å…¥æ•°æ®æ¥åˆ°æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œå†…æ ¸å‘è¯·æ±‚æ•°æ®çš„è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œè¿›ç¨‹å¯ä»¥å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œé€šè¿‡æ¥æ”¶ä¿¡å·ä»¥è·å¾—é€šçŸ¥ã€‚</p><p>è€Œ<em>epoll</em>åˆ™æ›´è¿›ä¸€æ­¥ï¼Œç”¨äº‹ä»¶é©±åŠ¨çš„æ–¹å¼æ¥ç›‘å¬fdï¼Œé¿å…äº†ä¿¡å·å¤„ç†çš„ç¹çï¼Œåœ¨æ–‡ä»¶æè¿°ç¬¦ä¸Šæ³¨å†Œäº‹ä»¶å‡½æ•°ï¼Œç”±ç³»ç»Ÿç›‘è§†è¿™äº›æ–‡ä»¶æè¿°ç¬¦ï¼Œå½“åœ¨æ–‡ä»¶æè¿°ç¬¦å¯å°±ç»ªæ—¶ï¼Œå†…æ ¸é€šçŸ¥åº”ç”¨è¿›ç¨‹ã€‚</p><p>åœ¨ä¸€äº›é«˜å¹¶å‘çš„ç½‘ç»œæ“ä½œä¸Šï¼Œ<em>epoll</em>çš„æ€§èƒ½é€šå¸¸æ¯”<em>select</em>è·Ÿ<em>poll</em>å¥½å‡ ä¸ªæ•°é‡çº§ã€‚</p><p>IOè°ƒç”¨ä¸­æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼š</p><ul><li>æ°´å¹³è§¦å‘ï¼šå¦‚æœæ–‡ä»¶æè¿°ç¬¦å¯ä»¥éé˜»å¡åœ°è¿›è¡Œioè°ƒç”¨ï¼Œæ­¤æ—¶è®¤ä¸ºä»–å·²ç»å°±ç»ªï¼‰ã€‚ï¼ˆæ”¯æŒæ¨¡å‹ï¼šselectï¼Œpollï¼Œepollç­‰ï¼‰</li><li>è¾¹ç¼˜è§¦å‘ï¼šå¦‚æœæ–‡ä»¶æè¿°ç¬¦è‡ªä¸Šæ¬¡æ¥çš„æ—¶å€™æœ‰äº†æ–°çš„ioæ´»åŠ¨ï¼ˆæ–°çš„è¾“å…¥ï¼‰ï¼Œè§¦å‘é€šçŸ¥ã€‚ï¼ˆæ”¯æŒæ¨¡å‹ï¼šä¿¡å·é©±åŠ¨ï¼Œepollç­‰ï¼‰</li></ul><p>åœ¨å®é™…å¼€å‘ä¸­è¦æ³¨æ„ä»–ä»¬çš„åŒºåˆ«ï¼ŒçŸ¥é“è¾¹ç¼˜è§¦å‘ä¸ºä»€ä¹ˆå¯èƒ½äº§ç”Ÿsocketé¥¥é¥¿é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ã€‚</p><p>ç”¨ä¸€å¼ å›¾æ€»ç»“5ä¸ªIOæ¨¡å‹æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="6.png" alt=""></p><p>ä½¿ç”¨å¤šè·¯IOå¤ç”¨æ¨¡å‹èƒ½æœ‰æ•ˆæé«˜ç½‘ç»œç¼–ç¨‹çš„è´¨é‡ã€‚</p><h3 id="HTTP"><strong>HTTP</strong></h3><p>ç°åœ¨å†æ¥çœ‹HTTPï¼Œ<strong>HTTPæ˜¯åœ¨TCPä¹‹ä¸Šçš„æ— çŠ¶æ€çš„åè®®ï¼Œå¤„äºå››å±‚æ¨¡å‹ä¸­çš„åº”ç”¨å±‚ï¼ŒHTTPä½¿ç”¨TCPæ¥ä¼ è¾“æŠ¥æ–‡æ•°æ®</strong>ã€‚</p><p>ä»¥æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€æ‰“å¼€ä¸ºä¾‹ï¼Œçœ‹HTTPçš„è¯·æ±‚è¿‡ç¨‹ï¼š</p><ol><li><strong>æµè§ˆå™¨é¦–å…ˆä»URLä¸­è§£æå‡ºä¸»æœºåï¼Œç«¯å£ç­‰ä¿¡æ¯ï¼ŒURLçš„é€šç”¨æ ¼å¼ä¸ºï¼š*://:@:/;?#*ã€‚</strong></li><li><strong>æµè§ˆå™¨æŠŠä¸»æœºåè½¬æ¢ä¸ºIPåœ°å€ï¼ˆDNSï¼‰ã€‚</strong></li><li><strong>æµè§ˆå™¨ä¸æœåŠ¡å™¨å»ºç«‹ä¸€æ¡TCPè¿æ¥ã€‚</strong></li><li><strong>æµè§ˆå™¨åœ¨TCPè¿æ¥ä¸Šå‘é€ä¸€æ¡HTTPè¯·æ±‚æŠ¥æ–‡ã€‚</strong></li><li><strong>æœåŠ¡å™¨åœ¨TCPè¿æ¥ä¸Šè¿”å›ä¸€æ¡HTTPå“åº”æŠ¥æ–‡ã€‚</strong></li><li><strong>å…³é—­è¿æ¥ï¼Œæµè§ˆå™¨æ¸²æŸ“æ–‡æ¡£ã€‚</strong></li></ol><p>HTTPçš„è¯·æ±‚ä¿¡æ¯åŒ…æ‹¬å‡ ä¸ªè¦ç´ ï¼š</p><ol><li>è¯·æ±‚è¡Œï¼Œä¾‹å¦‚*<strong>GET /index.html HTTP/1.1*</strong>ï¼Œè¡¨ç¤ºè¦è¯·æ±‚index.htmlè¿™ä¸ªæ–‡ä»¶ã€‚</li><li>è¯·æ±‚å¤´ï¼ˆé¦–éƒ¨ï¼‰ã€‚</li><li>ç©ºè¡Œã€‚</li><li>æ¶ˆæ¯ä½“ã€‚</li></ol><p>ä¾‹å¦‚åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘8000ç«¯å£å‘èµ·è¯·æ±‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.1 ï¼ˆè¯·æ±‚è¡Œï¼‰</span><br><span class="line">Host: 127.0.0.1:8000 ï¼ˆè¯·æ±‚å¤´ï¼‰</span><br></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ä»¥ä¸‹å›åº”ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.0 200 OK ï¼ˆå“åº”è¡Œï¼‰</span><br><span class="line">Content-Length: 5252</span><br><span class="line">Content-type: text/html; charset=utf-8</span><br><span class="line">Date: Tue, 21 Feb 2017 08:36:01 GMT</span><br><span class="line">Server: SimpleHTTP/0.6 Python/3.4.5</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Directory listing for /&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Directory listing for /&lt;/h1&gt;</span><br><span class="line">....</span><br></pre></td></tr></table></figure><p>HTTPçš„å…³é”®ä¹‹å¤„åœ¨äºå®ƒçš„é¦–éƒ¨ï¼ŒHTTPçš„é¦–éƒ¨ä¿¡æ¯å†³å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯èƒ½åšä»€ä¹ˆäº‹æƒ…ã€‚</p><h4 id="HTTPçŠ¶æ€ç "><strong>HTTPçŠ¶æ€ç </strong></h4><blockquote><ul><li><a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%231xx.E6.B6.88.E6.81.AF">1xxæ¶ˆæ¯</a>â€”â€”è¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</li><li><a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%232xx.E6.88.90.E5.8A.9F">2xxæˆåŠŸ</a>â€”â€”è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—</li><li><a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%233xx.E9.87.8D.E5.AE.9A.E5.90.91">3xxé‡å®šå‘</a>â€”â€”éœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸€è¯·æ±‚</li><li><a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%234xx.E8.AF.B7.E6.B1.82.E9.94.99.E8.AF.AF">4xxè¯·æ±‚é”™è¯¯</a>â€”â€”è¯·æ±‚å«æœ‰è¯æ³•é”™è¯¯æˆ–è€…æ— æ³•è¢«æ‰§è¡Œ</li><li><a href="https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%235xx.E6.9C.8D.E5.8A.A1.E5.99.A8.E9.94.99.E8.AF.AF">5xxæœåŠ¡å™¨é”™è¯¯</a>â€”â€”æœåŠ¡å™¨åœ¨å¤„ç†æŸä¸ªæ­£ç¡®è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯</li></ul></blockquote><h4 id="HTTP-DOM"><strong>HTTP &amp; DOM</strong></h4><p>DOMï¼Œåˆç§°Document Object Moduleï¼Œå³æ–‡æ¡£å¯¹è±¡æ¨¡å‹ã€‚æˆ‘ä»¬åœ¨å†™çˆ¬è™«çš„æ—¶å€™é€šå¸¸éƒ½éœ€è¦å¯¹htmlé¡µé¢è¿›è¡Œè§£æï¼Œè¿™æ—¶å€™å°±éœ€è¦domè§£æå™¨æ¥å¯¹æŠ“å–çš„é¡µé¢è¿›è¡Œåˆ†æã€‚</p><p>å¹³æ—¶æˆ‘ä»¬ç”¨lxmlå’ŒBeautifulSoupç”¨å¾—çˆ½äº†ï¼Œä½†ä»–ä»¬æ˜¯æ€ä¹ˆå»è§£æhtmlçš„å‘¢ï¼Ÿ</p><p>åœ¨pythonçš„<em>html.parser</em>æ¨¡å—ä¸­å°±å¸¦äº†ä¸€ä¸ªHTMLè§£æå™¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> html.parser <span class="keyword">import</span> HTMLParser</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHTMLParser</span>(<span class="params">HTMLParser</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle_starttag</span>(<span class="params">self, tag, attrs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Encountered a start tag:&quot;</span>, tag)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle_endtag</span>(<span class="params">self, tag</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Encountered an end tag :&quot;</span>, tag)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle_data</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Encountered some data  :&quot;</span>, data)</span><br><span class="line"></span><br><span class="line">parser = MyHTMLParser()</span><br><span class="line">parser.feed(<span class="string">&#x27;&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&#x27;</span></span><br><span class="line">            <span class="string">&#x27;&lt;body&gt;&lt;h1&gt;Parse me!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>)</span><br><span class="line"><span class="comment"># ------------------------------------------------------------------</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Encountered a start tag: html</span></span><br><span class="line"><span class="string">Encountered a start tag: head</span></span><br><span class="line"><span class="string">Encountered a start tag: title</span></span><br><span class="line"><span class="string">Encountered some data  : Test</span></span><br><span class="line"><span class="string">Encountered an end tag : title</span></span><br><span class="line"><span class="string">Encountered an end tag : head</span></span><br><span class="line"><span class="string">Encountered a start tag: body</span></span><br><span class="line"><span class="string">Encountered a start tag: h1</span></span><br><span class="line"><span class="string">Encountered some data  : Parse me!</span></span><br><span class="line"><span class="string">Encountered an end tag : h1</span></span><br><span class="line"><span class="string">Encountered an end tag : body</span></span><br><span class="line"><span class="string">Encountered an end tag : html</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡å®ƒçš„æºç ä¸­æ¥è§‚å¯Ÿdomæ˜¯å¦‚ä½•è¢«è§£æçš„ã€‚</p><h4 id="HTTP-RESTful"><strong>HTTP &amp; RESTful</strong></h4><p>æ¨èé˜…è¯»ï¼š<a href="https://link.zhihu.com/?target=http%3A//blog.jobbole.com/41233/">RESTful API è®¾è®¡æœ€ä½³å®è·µ</a></p><h4 id="DNS"><strong>DNS</strong></h4><p>ä¸»æœºåˆ°IPçš„è½¬æ¢é€šå¸¸è¦ç»è¿‡DNSæŸ¥è¯¢ï¼ŒDNSæ˜¯ä¸€ä¸ªåºå¤§çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå®ƒå°†ä¸»æœºåç»„ç»‡åœ¨ä¸€ä¸ªå±‚çº§çš„ç©ºé—´ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„åŸŸåç”±è¯¥èŠ‚ç‚¹åˆ°æ ¹çš„è·¯å¾„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„åå­—è¿æ¥è€Œæˆã€‚</p><p><img src="7.png" alt=""></p><p>ä½¿ç”¨dnspythonåŒ…å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡ŒdnsæŸ¥è¯¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dns.resolver</span><br><span class="line"></span><br><span class="line">domain = <span class="string">&#x27;baidu.com&#x27;</span></span><br><span class="line">A = dns.resolver.query(domain, <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> answer <span class="keyword">in</span> A.response.answer:</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> answer.items:</span><br><span class="line">        <span class="built_in">print</span>(item.address)</span><br></pre></td></tr></table></figure><h4 id="FTP"><strong>FTP</strong></h4><p>åœ¨pythonä¸–ç•Œé‡Œï¼Œä½¿ç”¨ftpéå¸¸ç®€å•ï¼Œåªéœ€è¦ä½¿ç”¨å†…ç½®çš„ftplibæ¨¡å—å°±å¯ä»¥ä½¿ç”¨ftpåè®®å¯¹è¿œç«¯æœºå™¨è¿›è¡Œæ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP</span><br><span class="line"><span class="keyword">with</span> FTP(<span class="string">&quot;ftp1.at.proftpd.org&quot;</span>) <span class="keyword">as</span> ftp:</span><br><span class="line">    ftp.login()</span><br><span class="line">    ftp.<span class="built_in">dir</span>()</span><br><span class="line"><span class="string">&#x27;230 Anonymous login ok, restrictions apply.&#x27;</span></span><br><span class="line">dr-xr-xr-x   <span class="number">9</span> ftp      ftp           <span class="number">154</span> May  <span class="number">6</span> <span class="number">10</span>:<span class="number">43</span> .</span><br><span class="line">dr-xr-xr-x   <span class="number">9</span> ftp      ftp           <span class="number">154</span> May  <span class="number">6</span> <span class="number">10</span>:<span class="number">43</span> ..</span><br><span class="line">dr-xr-xr-x   <span class="number">5</span> ftp      ftp          <span class="number">4096</span> May  <span class="number">6</span> <span class="number">10</span>:<span class="number">43</span> CentOS</span><br><span class="line">dr-xr-xr-x   <span class="number">3</span> ftp      ftp            <span class="number">18</span> Jul <span class="number">10</span>  <span class="number">2008</span> Fedora</span><br></pre></td></tr></table></figure><h4 id="XML-RPC"><strong>XML-RPC</strong></h4><p>å»ºç«‹ä¸€ä¸ªXML-RPCçš„æœåŠ¡å™¨è·Ÿå®¢æˆ·ç«¯åŒæ ·å¾ˆç®€å•ã€‚</p><p>Server</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xmlrpc.server <span class="keyword">import</span> SimpleXMLRPCServer</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleService</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getData</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;42&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">currentTime</span>:</span></span><br><span class="line"><span class="meta">        @staticmethod</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">getCurrentTime</span>():</span></span><br><span class="line">            <span class="keyword">return</span> datetime.datetime.now()</span><br><span class="line"></span><br><span class="line">server = SimpleXMLRPCServer((<span class="string">&quot;localhost&quot;</span>, <span class="number">8000</span>))</span><br><span class="line">server.register_function(<span class="built_in">pow</span>)</span><br><span class="line">server.register_function(<span class="keyword">lambda</span> x,y: x+y, <span class="string">&#x27;add&#x27;</span>)</span><br><span class="line">server.register_instance(ExampleService(), allow_dotted_names=<span class="literal">True</span>)</span><br><span class="line">server.register_multicall_functions()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Serving XML-RPC on localhost port 8000&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    server.serve_forever()</span><br><span class="line"><span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\nKeyboard interrupt received, exiting.&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>Client</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xmlrpc.client <span class="keyword">import</span> ServerProxy, MultiCall</span><br><span class="line">server = ServerProxy(<span class="string">&quot;http://localhost:8000&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(server.currentTime.getCurrentTime())</span><br><span class="line"><span class="keyword">except</span> Error <span class="keyword">as</span> v:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ERROR&quot;</span>, v)</span><br><span class="line"></span><br><span class="line">multi = MultiCall(server)</span><br><span class="line">multi.getData()</span><br><span class="line">multi.<span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">9</span>)</span><br><span class="line">multi.add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">for</span> response <span class="keyword">in</span> multi():</span><br><span class="line">        <span class="built_in">print</span>(response)</span><br><span class="line"><span class="keyword">except</span> Error <span class="keyword">as</span> v:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ERROR&quot;</span>, v)</span><br></pre></td></tr></table></figure><h1>å‚è€ƒï¼š</h1><p><a href="https://www.liaoxuefeng.com/">å»–é›ªå³°çš„åšå®¢</a></p><p><a href="https://www.runoob.com/python3">èœé¸Ÿ</a></p><p><a href="https://zhuanlan.zhihu.com/tonnie">çŸ¥ä¹-å››æ¡é±¼</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ä¸æ±‡æ€» </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonåŸºç¡€è¯­æ³•è®°å½•</title>
      <link href="/2022/01/11/basic-Python/"/>
      <url>/2022/01/11/basic-Python/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€ï¼š</h1><p>ä»¥å‰ä¹Ÿé—²å¾—æ— èŠçœ‹è¿‡ä¸€ç‚¹Pythonï¼Œä½†æ˜¯å§ï¼Œå¹³å¸¸ç”¨ä¸ä¸Šï¼Œæ¸æ¸å°±ç”Ÿç–äº†ï¼Œä¹Ÿæ²¡æ€ä¹ˆç»§ç»­å­¦ä¸‹å»ï¼Œç°åœ¨åŸºæœ¬å¿˜å…‰äº†ã€‚ç°åœ¨å‡†å¤‡å…¥æ‰‹OpenCVï¼Œæ‹¿Pythonç‰ˆå…¥æ‰‹ï¼Œç¨³å¦¥èµ·è§å…ˆæŠŠä»¥å‰çœ‹çš„ä¸€ç‚¹Pythonæ‹¾é—è¡¥æ¼ï¼Œè®°ç‚¹è®°å½•ä»¥åå¿˜äº†çš„è¯è¿˜å¯ä»¥ç¿»ç¿»çœ‹çœ‹ï¼Œæ¯•ç«Ÿç°åœ¨æ‰‹å¤´è¯­è¨€ä¹Ÿä¸å°‘äº†(javaï¼Œdartï¼Œc++ï¼ŒJS)ï¼Œæ—¶é—´é•¿äº†éš¾å…æœ‰ææ··çš„æƒ…å†µã€‚</p><p>(è¿™é‡Œåæ§½ä¸€å¥ï¼Œè½¯é™¢æœ¬ç§‘çœŸçš„æ˜¯åœ¨åŸ¹å…»å…¨æ²¾å·¥ç¨‹å¸ˆï¼Œï¼ˆæˆ‘çš„c++è¿˜å¥½ï¼Œjså®Œå…¨å°±æ˜¯æ²¾äº†æ²¾ï¼Œjavaä¹Ÿæ²¡æœ‰å®Œå…¨ç‰¹åˆ«æ·±å…¥åœ°å»å­¦ï¼Œdartè‡ªå­¦çš„ï¼Œç®—å¾—ä¸Šæ˜¯ç”¨çš„æ¯”è¾ƒç†Ÿç»ƒçš„è„šæœ¬è¯­è¨€ï¼‰)ã€‚</p><h3 id="åŸºäºPython3ï¼Python2å·²ç»é€æ¸æˆä¸ºè¿‡å»å¼">åŸºäºPython3ï¼Python2å·²ç»é€æ¸æˆä¸ºè¿‡å»å¼</h3><h1>æ­£æ–‡</h1><p><a href="https://zhuanlan.zhihu.com/p/41381773">Pythonå­¦ä¹ èµ„æ–™/æ–‡ç« /æŒ‡å—æ•´ç†</a></p><ul><li>å¼•è‡ª<a href="https://zhuanlan.zhihu.com/tonnie">çŸ¥ä¹-å››æ¡é±¼</a></li></ul><h2 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</h2><ul><li><p>æ ‡è¯†ç¬¦</p><ul><li>ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯å­—æ¯è¡¨ä¸­å­—æ¯æˆ–ä¸‹åˆ’çº¿ <strong>_</strong> ã€‚</li><li>æ ‡è¯†ç¬¦çš„å…¶ä»–çš„éƒ¨åˆ†ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆã€‚</li><li>æ ‡è¯†ç¬¦å¯¹å¤§å°å†™æ•æ„Ÿã€‚</li><li>å¯ä»¥ä¸­æ–‡å˜é‡åä½†ä¸è¦è¿™ä¹ˆåš</li></ul></li><li><p><strong>ä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—</strong></p><ul><li>ç±»ä¼¼<code>yaml</code>æ ¼å¼ï¼Œç¼©è¿›ä¸€èˆ¬æ˜¯4ä¸ªç©ºæ ¼</li></ul></li><li><p>å¤šè¡Œè¯­å¥</p><ul><li>ä½¿ç”¨åæ–œæ  \æ¥å®ç°å¤šè¡Œè¯­å¥</li><li>åœ¨ [], {}, æˆ– () ä¸­çš„å¤šè¡Œè¯­å¥ï¼Œä¸éœ€è¦ä½¿ç”¨åæ–œæ </li></ul></li><li><p>åŒä¸€è¡Œæ˜¾ç¤ºå¤šæ¡è¯­å¥</p><ul><li>Python å¯ä»¥åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨å¤šæ¡è¯­å¥ï¼Œè¯­å¥ä¹‹é—´ä½¿ç”¨åˆ†å· <strong>;</strong> åˆ†å‰²</li><li>å¦‚<code>import sys; x = 'runoob'; sys.stdout.write(x + '\n')</code></li></ul></li><li><p>å¤šä¸ªè¯­å¥æ„æˆä»£ç ç»„</p><ul><li><p>ç¼©è¿›ç›¸åŒçš„ä¸€ç»„è¯­å¥æ„æˆä¸€ä¸ªä»£ç å—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä»£ç ç»„ã€‚</p><p>åƒifã€whileã€defå’Œclassè¿™æ ·çš„å¤åˆè¯­å¥ï¼Œé¦–è¡Œä»¥å…³é”®å­—å¼€å§‹ï¼Œä»¥å†’å·( : )ç»“æŸï¼Œè¯¥è¡Œä¹‹åçš„ä¸€è¡Œæˆ–å¤šè¡Œä»£ç æ„æˆä»£ç ç»„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> expression : </span><br><span class="line">   suite</span><br><span class="line"><span class="keyword">elif</span> expression : </span><br><span class="line">   suite </span><br><span class="line"><span class="keyword">else</span> : </span><br><span class="line">   suite</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ä¸ç”¨ä»»å’Œç¬¦å·ç»“å°¾ï¼ˆé™¤éåœ¨åŒä¸€è¡Œæ˜¾ç¤ºï¼‰</p></li></ul><hr><h1>æ•°æ®ç±»å‹</h1><h2 id="æ³¨æ„ï¼š">æ³¨æ„ï¼š</h2><h3 id="å˜é‡å£°æ˜">å˜é‡å£°æ˜</h3><p><strong>Python ä¸­çš„å˜é‡ä¸éœ€è¦å£°æ˜ã€‚æ¯ä¸ªå˜é‡åœ¨ä½¿ç”¨å‰éƒ½å¿…é¡»èµ‹å€¼ï¼Œå˜é‡èµ‹å€¼ä»¥åè¯¥å˜é‡æ‰ä¼šè¢«åˆ›å»ºã€‚</strong></p><p>åœ¨ Python ä¸­ï¼Œå˜é‡å°±æ˜¯å˜é‡ï¼Œå®ƒæ²¡æœ‰ç±»å‹ï¼Œæˆ‘ä»¬æ‰€è¯´çš„&quot;ç±»å‹&quot;æ˜¯å˜é‡æ‰€æŒ‡çš„å†…å­˜ä¸­å¯¹è±¡çš„ç±»å‹ã€‚</p><h3 id="å¤šå˜é‡èµ‹å€¼">å¤šå˜é‡èµ‹å€¼</h3><p>å…è®¸åŒæ—¶ä¸ºå¤šä¸ªå˜é‡èµ‹å€¼ï¼Œå¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = b = c = <span class="number">1</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">a, b = <span class="number">1</span>, <span class="number">2</span></span><br></pre></td></tr></table></figure><hr><h2 id="ç»„åˆæ•°æ®ç±»å‹">ç»„åˆæ•°æ®ç±»å‹</h2><p>å…­ä¸ªæ ‡å‡†çš„æ•°æ®ç±»å‹ï¼š</p><ul><li>Numberï¼ˆæ•°å­—ï¼‰</li><li>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</li><li>Listï¼ˆåˆ—è¡¨ï¼‰</li><li>Tupleï¼ˆå…ƒç»„ï¼‰</li><li>Setï¼ˆé›†åˆï¼‰</li><li>Dictionaryï¼ˆå­—å…¸ï¼‰</li></ul><p>å…¶ä¸­ï¼š</p><ul><li>**ä¸å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼š**Numberï¼ˆæ•°å­—ï¼‰ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼›</li><li>**å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼š**Listï¼ˆåˆ—è¡¨ï¼‰ã€Dictionaryï¼ˆå­—å…¸ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€‚</li></ul><p>ï¼ˆNumberä¸Stringä¸å¯å˜æ˜¯å› ä¸ºPythonä¸åƒJavaé‚£æ ·å­˜åœ¨æ•°æ®ç±»å‹çš„å®šä¹‰ä¸è°ƒç”¨ï¼ŒPythonå˜é‡ä¸éœ€è¦å£°æ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è¯•å›¾åƒjavaä¸€æ ·å¯¹å˜é‡é‡æ–°èµ‹å€¼ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸ºä½ å®šä¹‰äº†ä¸€ä¸ªé‡åå˜é‡ï¼‰</p><h3 id="å¯å˜æ€§">å¯å˜æ€§</h3><p>å¯¹äºå¯å˜å¯¹è±¡ï¼Œæ¯”å¦‚listï¼Œå¯¹listè¿›è¡Œæ“ä½œï¼Œlistå†…éƒ¨çš„å†…å®¹æ˜¯ä¼šå˜åŒ–çš„ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure><p>è€Œå¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œæ¯”å¦‚strï¼Œå¯¹strè¿›è¡Œæ“ä½œå‘¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.replace(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;Abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;abc&#x27;</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶å­—ç¬¦ä¸²æœ‰ä¸ª<code>replace()</code>æ–¹æ³•ï¼Œä¹Ÿç¡®å®å˜å‡ºäº†<code>'Abc'</code>ï¼Œä½†å˜é‡<code>a</code>æœ€åä»æ˜¯<code>'abc'</code>ï¼Œåº”è¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å…ˆæŠŠä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.replace(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="string">&#x27;Abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;abc&#x27;</span></span><br></pre></td></tr></table></figure><p>è¦å§‹ç»ˆç‰¢è®°çš„æ˜¯ï¼Œ<code>a</code>æ˜¯å˜é‡ï¼Œè€Œ<code>'abc'</code>æ‰æ˜¯å­—ç¬¦ä¸²å¯¹è±¡ï¼æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸è¯´ï¼Œå¯¹è±¡<code>a</code>çš„å†…å®¹æ˜¯<code>'abc'</code>ï¼Œä½†å…¶å®æ˜¯æŒ‡ï¼Œ<code>a</code>æœ¬èº«æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒæŒ‡å‘çš„å¯¹è±¡çš„å†…å®¹æ‰æ˜¯<code>'abc'</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ a â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ &#x27;abc&#x27; â”‚</span><br><span class="line">â””â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è°ƒç”¨<code>a.replace('a', 'A')</code>æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨æ–¹æ³•<code>replace</code>æ˜¯ä½œç”¨åœ¨å­—ç¬¦ä¸²å¯¹è±¡<code>'abc'</code>ä¸Šçš„ï¼Œè€Œè¿™ä¸ªæ–¹æ³•è™½ç„¶åå­—å«<code>replace</code>ï¼Œä½†å´æ²¡æœ‰æ”¹å˜å­—ç¬¦ä¸²<code>'abc'</code>çš„å†…å®¹ã€‚ç›¸åï¼Œ<code>replace</code>æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²<code>'Abc'</code>å¹¶è¿”å›ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å˜é‡<code>b</code>æŒ‡å‘è¯¥æ–°å­—ç¬¦ä¸²ï¼Œå°±å®¹æ˜“ç†è§£äº†ï¼Œå˜é‡<code>a</code>ä»æŒ‡å‘åŸæœ‰çš„å­—ç¬¦ä¸²<code>'abc'</code>ï¼Œä½†å˜é‡<code>b</code>å´æŒ‡å‘æ–°å­—ç¬¦ä¸²<code>'Abc'</code>äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ a â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ &#x27;abc&#x27; â”‚</span><br><span class="line">â””â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”Œâ”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ b â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ &#x27;Abc&#x27; â”‚</span><br><span class="line">â””â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œå¯¹äºä¸å˜å¯¹è±¡æ¥è¯´ï¼Œè°ƒç”¨å¯¹è±¡è‡ªèº«çš„ä»»æ„æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šæ”¹å˜è¯¥å¯¹è±¡è‡ªèº«çš„å†…å®¹ã€‚ç›¸åï¼Œè¿™äº›æ–¹æ³•ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡å¹¶è¿”å›ï¼Œè¿™æ ·ï¼Œå°±ä¿è¯äº†ä¸å¯å˜å¯¹è±¡æœ¬èº«æ°¸è¿œæ˜¯ä¸å¯å˜çš„ã€‚</p><h3 id="Numberï¼ˆæ•°å­—ï¼‰">Numberï¼ˆæ•°å­—ï¼‰</h3><p>Python3 æ”¯æŒ <strong>intã€floatã€boolã€complexï¼ˆå¤æ•°ï¼‰</strong>ã€‚</p><p>åœ¨Python 3é‡Œï¼Œåªæœ‰ä¸€ç§æ•´æ•°ç±»å‹ intï¼Œè¡¨ç¤ºä¸ºé•¿æ•´å‹ï¼Œæ²¡æœ‰ python2 ä¸­çš„ Longã€‚</p><h4 id="æ•°å€¼è¿ç®—æ³¨æ„ç‚¹ï¼š">æ•°å€¼è¿ç®—æ³¨æ„ç‚¹ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> / <span class="number">4</span>  <span class="comment"># é™¤æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°</span></span><br><span class="line"><span class="number">0.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> // <span class="number">4</span> <span class="comment"># é™¤æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªæ•´æ•°</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> ** <span class="number">5</span> <span class="comment"># ä¹˜æ–¹</span></span><br><span class="line"><span class="number">32</span></span><br></pre></td></tr></table></figure><p>Pythonçš„æ•´æ•°æ²¡æœ‰å¤§å°é™åˆ¶ï¼Œè€ŒæŸäº›è¯­è¨€çš„æ•´æ•°æ ¹æ®å…¶å­˜å‚¨é•¿åº¦æ˜¯æœ‰å¤§å°é™åˆ¶çš„ï¼Œä¾‹å¦‚Javaå¯¹32ä½æ•´æ•°çš„èŒƒå›´é™åˆ¶åœ¨<code>-2147483648</code>-<code>2147483647</code>ã€‚</p><p>Pythonçš„æµ®ç‚¹æ•°ä¹Ÿæ²¡æœ‰å¤§å°é™åˆ¶ï¼Œä½†æ˜¯è¶…å‡ºä¸€å®šèŒƒå›´å°±ç›´æ¥è¡¨ç¤ºä¸º<code>inf</code>ï¼ˆæ— é™å¤§ï¼‰ã€‚</p><h3 id="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰">Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h3><p>Pythonä¸­çš„å­—ç¬¦ä¸²ç”¨å•å¼•å·  â€™ æˆ–åŒå¼•å· &quot; æ‹¬èµ·æ¥ï¼ŒåŒæ—¶ä½¿ç”¨åæ–œæ  \ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚</p><h4 id="å­—ç¬¦ä¸²çš„æˆªå–ï¼š">å­—ç¬¦ä¸²çš„æˆªå–ï¼š</h4><p><img src="0.svg" alt=""></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;Runoob&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>)          <span class="comment"># è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>[<span class="number">0</span>:-<span class="number">1</span>])    <span class="comment"># è¾“å‡ºç¬¬ä¸€ä¸ªåˆ°å€’æ•°ç¬¬äºŒä¸ªçš„æ‰€æœ‰å­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>[<span class="number">0</span>])       <span class="comment"># è¾“å‡ºå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>[<span class="number">2</span>:<span class="number">5</span>])     <span class="comment"># è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå¼€å§‹åˆ°ç¬¬äº”ä¸ªçš„å­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>[<span class="number">2</span>:])      <span class="comment"># è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå¼€å§‹çš„åçš„æ‰€æœ‰å­—ç¬¦</span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²å¤åˆ¶ï¼š">å­—ç¬¦ä¸²å¤åˆ¶ï¼š</h4><p>ä½¿ç”¨ <code>* </code>ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span> * <span class="number">2</span>)      <span class="comment"># è¾“å‡ºå­—ç¬¦ä¸²ä¸¤æ¬¡ï¼Œä¹Ÿå¯ä»¥å†™æˆ print (2 * str)</span></span><br><span class="line"><span class="comment"># RunoobRunoob</span></span><br></pre></td></tr></table></figure><p><strong>ä¸ C å­—ç¬¦ä¸²ä¸åŒçš„æ˜¯ï¼ŒPython å­—ç¬¦ä¸²ä¸èƒ½è¢«æ”¹å˜ã€‚å‘ä¸€ä¸ªç´¢å¼•ä½ç½®èµ‹å€¼ï¼Œæ¯”å¦‚word[0] = 'mâ€™ä¼šå¯¼è‡´é”™è¯¯ã€‚</strong></p><h3 id="Listï¼ˆåˆ—è¡¨ï¼‰">Listï¼ˆåˆ—è¡¨ï¼‰</h3><ul><li><p>åˆ—è¡¨ä¸­å…ƒç´ çš„ç±»å‹å¯ä»¥ä¸ç›¸åŒ</p></li><li><p>åˆ—è¡¨åŒæ ·å¯ä»¥è¢«ç´¢å¼•å’Œæˆªå–ï¼Œåˆ—è¡¨è¢«æˆªå–åè¿”å›ä¸€ä¸ªåŒ…å«æ‰€éœ€å…ƒç´ çš„æ–°åˆ—è¡¨ã€‚</p></li><li><p>å†…ç½®å‡½æ•°åŸºæœ¬è·Ÿjavaä¸€è‡´</p></li></ul><p><img src="1.png" alt=""></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [ <span class="string">&#x27;abcd&#x27;</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">70.2</span> ]</span><br><span class="line">tinylist = [<span class="number">123</span>, <span class="string">&#x27;runoob&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">list</span>)            <span class="comment"># è¾“å‡ºå®Œæ•´åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">list</span>[<span class="number">0</span>])         <span class="comment"># è¾“å‡ºåˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">list</span>[<span class="number">1</span>:<span class="number">3</span>])       <span class="comment"># ä»ç¬¬äºŒä¸ªå¼€å§‹è¾“å‡ºåˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">list</span>[<span class="number">2</span>:])        <span class="comment"># è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (tinylist * <span class="number">2</span>)    <span class="comment"># è¾“å‡ºä¸¤æ¬¡åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">list</span> + tinylist) <span class="comment"># è¿æ¥åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;abcd&#x27;, 786, 2.23, &#x27;runoob&#x27;, 70.2]</span></span><br><span class="line"><span class="comment"># abcd</span></span><br><span class="line"><span class="comment"># [786, 2.23]</span></span><br><span class="line"><span class="comment"># [2.23, &#x27;runoob&#x27;, 70.2]</span></span><br><span class="line"><span class="comment"># [123, &#x27;runoob&#x27;, 123, &#x27;runoob&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;abcd&#x27;, 786, 2.23, &#x27;runoob&#x27;, 70.2, 123, &#x27;runoob&#x27;]</span></span><br></pre></td></tr></table></figure><p><strong>å¦ï¼š</strong></p><p>Python åˆ—è¡¨æˆªå–å¯ä»¥æ¥æ”¶ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå‚æ•°ä½œç”¨æ˜¯æˆªå–çš„æ­¥é•¿ï¼Œä»¥ä¸‹å®ä¾‹åœ¨ç´¢å¼• 1 åˆ°ç´¢å¼• 4 çš„ä½ç½®å¹¶è®¾ç½®ä¸ºæ­¥é•¿ä¸º 2ï¼ˆé—´éš”ä¸€ä¸ªä½ç½®ï¼‰æ¥æˆªå–å­—ç¬¦ä¸²ï¼š</p><p><img src="2.png" alt=""></p><p>å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè´Ÿæ•°è¡¨ç¤ºé€†å‘è¯»å–ï¼Œä»¥ä¸‹å®ä¾‹ç”¨äºç¿»è½¬å­—ç¬¦ä¸²ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverseWords</span>(<span class="params"><span class="built_in">input</span></span>):</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment"># é€šè¿‡ç©ºæ ¼å°†å­—ç¬¦ä¸²åˆ†éš”ç¬¦ï¼ŒæŠŠå„ä¸ªå•è¯åˆ†éš”ä¸ºåˆ—è¡¨</span></span><br><span class="line">    inputWords = <span class="built_in">input</span>.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># ç¿»è½¬å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="comment"># å‡è®¾åˆ—è¡¨ list = [1,2,3,4],  </span></span><br><span class="line">    <span class="comment"># list[0]=1, list[1]=2 ï¼Œè€Œ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´  list[-1]=4 ( ä¸ list[3]=4 ä¸€æ ·)</span></span><br><span class="line">    <span class="comment"># inputWords[-1::-1] æœ‰ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•° -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="comment"># ç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºï¼Œè¡¨ç¤ºç§»åŠ¨åˆ°åˆ—è¡¨æœ«å°¾</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ­¥é•¿ï¼Œ-1 è¡¨ç¤ºé€†å‘</span></span><br><span class="line">    inputWords=inputWords[-<span class="number">1</span>::-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># é‡æ–°ç»„åˆå­—ç¬¦ä¸²</span></span><br><span class="line">    output = <span class="string">&#x27; &#x27;</span>.join(inputWords)</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">input</span> = <span class="string">&#x27;I like runoob&#x27;</span></span><br><span class="line">    rw = reverseWords(<span class="built_in">input</span>)</span><br><span class="line">    <span class="built_in">print</span>(rw)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runoob like I</span><br></pre></td></tr></table></figure><h3 id="Tupleï¼ˆå…ƒç»„ï¼‰">Tupleï¼ˆå…ƒç»„ï¼‰</h3><p>å…ƒç»„ï¼ˆtupleï¼‰ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚</p><p><strong>ä¸å¯å˜çš„tupleæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿå› ä¸ºtupleä¸å¯å˜ï¼Œæ‰€ä»¥ä»£ç æ›´å®‰å…¨ã€‚</strong></p><p><strong>å…ƒç»„å†™åœ¨å°æ‹¬å· () é‡Œï¼Œä¸è¿‡å°æ‹¬å·å¯ä»¥çœç•¥</strong>ï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚ä½†æ˜¯æ‰“å°å…ƒç»„æ—¶ä¼šå°†æ‹¬å·æ‰“å°å‡ºæ¥ã€‚</p><p><strong>å…ƒç»„ä¸­çš„å…ƒç´ ç±»å‹ä¹Ÿå¯ä»¥ä¸ç›¸åŒ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span> = ( <span class="string">&#x27;abcd&#x27;</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">70.2</span>  )</span><br><span class="line">tinytuple = (<span class="number">123</span>, <span class="string">&#x27;runoob&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">tuple</span>)             <span class="comment"># è¾“å‡ºå®Œæ•´å…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">tuple</span>[<span class="number">0</span>])          <span class="comment"># è¾“å‡ºå…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">tuple</span>[<span class="number">1</span>:<span class="number">3</span>])        <span class="comment"># è¾“å‡ºä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">tuple</span>[<span class="number">2</span>:])         <span class="comment"># è¾“å‡ºä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span> (tinytuple * <span class="number">2</span>)     <span class="comment"># è¾“å‡ºä¸¤æ¬¡å…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">tuple</span> + tinytuple) <span class="comment"># è¿æ¥å…ƒç»„</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">&#x27;abcd&#x27;</span>, <span class="number">786</span>, <span class="number">2.23</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">70.2</span>)</span><br><span class="line">abcd</span><br><span class="line">(<span class="number">786</span>, <span class="number">2.23</span>)</span><br><span class="line">(<span class="number">2.23</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">70.2</span>)</span><br><span class="line">(<span class="number">123</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">123</span>, <span class="string">&#x27;runoob&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;abcd&#x27;</span>, <span class="number">786</span>, <span class="number">2.23</span>, <span class="string">&#x27;runoob&#x27;</span>, <span class="number">70.2</span>, <span class="number">123</span>, <span class="string">&#x27;runoob&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><p>1ã€ä¸å­—ç¬¦ä¸²ä¸€æ ·ï¼Œå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚</p></li><li><p>2ã€å…ƒç»„ä¹Ÿå¯ä»¥è¢«ç´¢å¼•å’Œåˆ‡ç‰‡ï¼Œæ–¹æ³•ä¸€æ ·ã€‚</p></li><li><p>3ã€æ³¨æ„æ„é€ åŒ…å« 0 æˆ– 1 ä¸ªå…ƒç´ çš„å…ƒç»„çš„ç‰¹æ®Šè¯­æ³•è§„åˆ™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup1 = ()    <span class="comment"># ç©ºå…ƒç»„</span></span><br><span class="line">tup2 = (<span class="number">20</span>,) <span class="comment"># ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦åœ¨å…ƒç´ åæ·»åŠ é€—å·</span></span><br></pre></td></tr></table></figure></li><li><p>4ã€å…ƒç»„ä¹Ÿå¯ä»¥ä½¿ç”¨+æ“ä½œç¬¦è¿›è¡Œæ‹¼æ¥ã€‚</p></li></ul><h3 id="Setï¼ˆé›†åˆï¼‰">Setï¼ˆé›†åˆï¼‰</h3><p>æ— åºï¼Œä¸å¯é‡å¤</p><p>å¯ä»¥ä½¿ç”¨å¤§æ‹¬å· <strong>{ }</strong> æˆ–è€… <strong>set()</strong> å‡½æ•°åˆ›å»ºé›†åˆï¼Œæ³¨æ„ï¼šåˆ›å»ºä¸€ä¸ªç©ºé›†åˆå¿…é¡»ç”¨ <strong>set()</strong> è€Œä¸æ˜¯ <strong>{ }</strong>ï¼Œå› ä¸º <strong>{ }</strong> æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sites = &#123;<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Facebook&#x27;</span>, <span class="string">&#x27;Zhihu&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sites)   <span class="comment"># è¾“å‡ºé›†åˆï¼Œé‡å¤çš„å…ƒç´ è¢«è‡ªåŠ¨å»æ‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆå‘˜æµ‹è¯•</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;Runoob&#x27;</span> <span class="keyword">in</span> sites :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Runoob åœ¨é›†åˆä¸­&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Runoob ä¸åœ¨é›†åˆä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># setå¯ä»¥è¿›è¡Œé›†åˆè¿ç®—</span></span><br><span class="line">a = <span class="built_in">set</span>(<span class="string">&#x27;abracadabra&#x27;</span>)</span><br><span class="line">b = <span class="built_in">set</span>(<span class="string">&#x27;alacazam&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a - b)     <span class="comment"># a å’Œ b çš„å·®é›†</span></span><br><span class="line"><span class="built_in">print</span>(a | b)     <span class="comment"># a å’Œ b çš„å¹¶é›†</span></span><br><span class="line"><span class="built_in">print</span>(a &amp; b)     <span class="comment"># a å’Œ b çš„äº¤é›†</span></span><br><span class="line"><span class="built_in">print</span>(a ^ b)     <span class="comment"># a å’Œ b ä¸­ä¸åŒæ—¶å­˜åœ¨çš„å…ƒç´ </span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;Zhihu&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Facebook&#x27;</span>&#125;</span><br><span class="line">Runoob åœ¨é›†åˆä¸­</span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›å°è£…å¥½çš„å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>S.add(x)</td><td>è‹¥xä¸åœ¨é›†åˆä¸­ï¼Œåˆ™åŠ å…¥</td></tr><tr><td>S.clear()</td><td>æ¸…ç©ºé›†åˆ</td></tr><tr><td>S.copy()</td><td>è¿”å›Sçš„ä¸€ä¸ªå‰¯æœ¬</td></tr><tr><td>S.pop()</td><td>éšæœºè¿”å›Så†…çš„ä¸€ä¸ªå…ƒç´ **ï¼ˆå¹¶å°†é›†åˆå†…è¯¥å…ƒç´ åˆ é™¤ï¼‰**</td></tr><tr><td>S.discard(x)</td><td>è‹¥xåœ¨Så†…ï¼Œåˆ é™¤ã€‚ä¸å­˜åœ¨åˆ™ä¸æŠ¥é”™</td></tr><tr><td>S.remove(x)</td><td>è‹¥xåœ¨Så†…ï¼Œåˆ é™¤ã€‚ä¸å­˜åœ¨åˆ™æŠ¥é”™</td></tr><tr><td>S.isdisjoint(T)</td><td>Sä¸Tä¸¤é›†åˆæ— ç›¸åŒå…ƒç´ åˆ™è¿”å›true</td></tr><tr><td>len(S)</td><td></td></tr><tr><td>x in S</td><td></td></tr><tr><td>x not in S</td><td></td></tr></tbody></table><h3 id="Dictionaryï¼ˆå­—å…¸ï¼‰">Dictionaryï¼ˆå­—å…¸ï¼‰</h3><p>ç›¸å½“äºjavaçš„map</p><p>å­—å…¸æ˜¯ä¸€ç§æ˜ å°„ç±»å‹ï¼Œå­—å…¸ç”¨ <strong>{ }</strong> æ ‡è¯†ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ— åºçš„ <strong>é”®(key) : å€¼(value)</strong> çš„é›†åˆã€‚</p><p>é”®(key)å¿…é¡»ä½¿ç”¨ä¸å¯å˜ç±»å‹ã€‚åœ¨åŒä¸€ä¸ªå­—å…¸ä¸­ï¼Œé”®(key)å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dicts = &#123;&#125;</span><br><span class="line">dicts[<span class="string">&#x27;one&#x27;</span>] = <span class="string">&quot;1 - èœé¸Ÿæ•™ç¨‹&quot;</span></span><br><span class="line">dicts[<span class="number">2</span>] = <span class="string">&quot;2 - èœé¸Ÿå·¥å…·&quot;</span></span><br><span class="line"></span><br><span class="line">tinydict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;runoob&#x27;</span>,<span class="string">&#x27;code&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;site&#x27;</span>: <span class="string">&#x27;www.runoob.com&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (dicts[<span class="string">&#x27;one&#x27;</span>])       <span class="comment"># è¾“å‡ºé”®ä¸º &#x27;one&#x27; çš„å€¼</span></span><br><span class="line"><span class="built_in">print</span> (dicts[<span class="number">2</span>])           <span class="comment"># è¾“å‡ºé”®ä¸º 2 çš„å€¼</span></span><br><span class="line"><span class="built_in">print</span> (tinydict)          <span class="comment"># è¾“å‡ºå®Œæ•´çš„å­—å…¸</span></span><br><span class="line"><span class="built_in">print</span> (tinydict.keys())   <span class="comment"># è¾“å‡ºæ‰€æœ‰é”®</span></span><br><span class="line"><span class="built_in">print</span> (tinydict.values()) <span class="comment"># è¾“å‡ºæ‰€æœ‰å€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> - èœé¸Ÿæ•™ç¨‹</span><br><span class="line"><span class="number">2</span> - èœé¸Ÿå·¥å…·</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;runoob&#x27;</span>, <span class="string">&#x27;code&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;site&#x27;</span>: <span class="string">&#x27;www.runoob.com&#x27;</span>&#125;</span><br><span class="line">dict_keys([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;code&#x27;</span>, <span class="string">&#x27;site&#x27;</span>])</span><br><span class="line">dict_values([<span class="string">&#x27;runoob&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>])</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•° dict() å¯ä»¥ç›´æ¥ä»é”®å€¼å¯¹åºåˆ—ä¸­æ„å»ºå­—å…¸,å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>([(<span class="string">&#x27;Runoob&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;Google&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;Taobao&#x27;</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="comment"># &#123;&#x27;Runoob&#x27;: 1, &#x27;Google&#x27;: 2, &#x27;Taobao&#x27;: 3&#125;</span></span><br><span class="line">&#123;x: x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>)&#125;</span><br><span class="line"><span class="comment"># &#123;2: 4, 4: 16, 6: 36&#125;</span></span><br><span class="line"><span class="built_in">dict</span>(Runoob=<span class="number">1</span>, Google=<span class="number">2</span>, Taobao=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># &#123;&#x27;Runoob&#x27;: 1, &#x27;Google&#x27;: 2, &#x27;Taobao&#x27;: 3&#125;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å­—å…¸çš„å…³é”®å­—å¿…é¡»ä¸ºä¸å¯å˜ç±»å‹ï¼Œä¸”ä¸èƒ½é‡å¤ã€‚</li><li>åˆ›å»ºç©ºå­—å…¸ä½¿ç”¨ <strong>{ }</strong>ã€‚</li><li>è¿˜æœ‰ä¸€äº›å†…ç½®çš„å‡½æ•°ï¼Œä¾‹å¦‚clear()ã€keys()ã€values()ç­‰ã€‚</li></ul><p>å’Œlistæ¯”è¾ƒï¼Œdictæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><blockquote><ol><li>æŸ¥æ‰¾å’Œæ’å…¥çš„é€Ÿåº¦æå¿«ï¼Œä¸ä¼šéšç€keyçš„å¢åŠ è€Œå˜æ…¢ï¼›</li><li>éœ€è¦å ç”¨å¤§é‡çš„å†…å­˜ï¼Œå†…å­˜æµªè´¹å¤šã€‚</li></ol></blockquote><p>è€Œlistç›¸åï¼š</p><blockquote><ol><li>æŸ¥æ‰¾å’Œæ’å…¥çš„æ—¶é—´éšç€å…ƒç´ çš„å¢åŠ è€Œå¢åŠ ï¼›</li><li>å ç”¨ç©ºé—´å°ï¼Œæµªè´¹å†…å­˜å¾ˆå°‘ã€‚</li></ol></blockquote><p>æ‰€ä»¥ï¼Œdictæ˜¯ç”¨ç©ºé—´æ¥æ¢å–æ—¶é—´çš„ä¸€ç§æ–¹æ³•ã€‚</p><p>dictå¯ä»¥ç”¨åœ¨éœ€è¦é«˜é€ŸæŸ¥æ‰¾çš„å¾ˆå¤šåœ°æ–¹ï¼Œåœ¨Pythonä»£ç ä¸­å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œæ­£ç¡®ä½¿ç”¨dictéå¸¸é‡è¦ï¼Œéœ€è¦ç‰¢è®°çš„ç¬¬ä¸€æ¡å°±æ˜¯dictçš„keyå¿…é¡»æ˜¯<strong>ä¸å¯å˜å¯¹è±¡</strong>ã€‚</p><p>è¿™æ˜¯å› ä¸ºdictæ ¹æ®keyæ¥è®¡ç®—valueçš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœæ¯æ¬¡è®¡ç®—ç›¸åŒçš„keyå¾—å‡ºçš„ç»“æœä¸åŒï¼Œé‚£dictå†…éƒ¨å°±å®Œå…¨æ··ä¹±äº†ã€‚è¿™ä¸ªé€šè¿‡keyè®¡ç®—ä½ç½®çš„ç®—æ³•æ˜¯å“ˆå¸Œç®—æ³•ï¼ˆHashï¼‰ã€‚</p><p>è¦ä¿è¯hashçš„æ­£ç¡®æ€§ï¼Œä½œä¸ºkeyçš„å¯¹è±¡å°±ä¸èƒ½å˜ã€‚åœ¨Pythonä¸­ï¼Œå­—ç¬¦ä¸²ã€æ•´æ•°ç­‰éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ä½œä¸ºkeyã€‚è€Œlistæ˜¯å¯å˜çš„ï¼Œå°±ä¸èƒ½ä½œä¸ºkeyã€‚</p><hr><h2 id="å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹">å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹</h2><h4 id="å¸ƒå°”å€¼">å¸ƒå°”å€¼</h4><p>å¸ƒå°”å€¼å’Œå¸ƒå°”ä»£æ•°çš„è¡¨ç¤ºå®Œå…¨ä¸€è‡´ï¼Œä¸€ä¸ªå¸ƒå°”å€¼åªæœ‰<code>True</code>ã€<code>False</code>ä¸¤ç§å€¼ï¼Œè¦ä¹ˆæ˜¯<code>True</code>ï¼Œè¦ä¹ˆæ˜¯<code>False</code>ï¼Œåœ¨Pythonä¸­ï¼Œå¯ä»¥ç›´æ¥ç”¨<code>True</code>ã€<code>False</code>è¡¨ç¤ºå¸ƒå°”å€¼ï¼ˆè¯·æ³¨æ„å¤§å°å†™ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¸ƒå°”è¿ç®—è®¡ç®—å‡ºæ¥</p><p>å¸ƒå°”å€¼å¯ä»¥ç”¨ï¼ˆä¸ï¼‰<code>and</code>ã€ï¼ˆæˆ–ï¼‰<code>or</code>å’Œï¼ˆéï¼‰<code>not</code>è¿ç®—ã€‚</p><h4 id="ç©ºå€¼">ç©ºå€¼</h4><p>ç©ºå€¼æ˜¯Pythoné‡Œä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œç”¨<code>None</code>è¡¨ç¤ºã€‚<code>None</code>ä¸èƒ½ç†è§£ä¸º<code>0</code>ï¼Œå› ä¸º<code>0</code>æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€Œ<code>None</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºå€¼ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºjavaçš„null</p><hr><h2 id="æ•°æ®ç±»å‹è½¬æ¢">æ•°æ®ç±»å‹è½¬æ¢</h2><h3 id="å†…ç½®çš„è½¬æ¢å‡½æ•°">å†…ç½®çš„è½¬æ¢å‡½æ•°</h3><table><thead><tr><th style="text-align:left">å‡½æ•°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">int(x [,base])</td><td style="text-align:left">å°†xè½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-float.html">float(x)</a></td><td style="text-align:left">å°†xè½¬æ¢åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°</td></tr><tr><td style="text-align:left">complex(real [,imag])</td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªå¤æ•°</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-str.html">str(x)</a></td><td style="text-align:left">å°†å¯¹è±¡ x è½¬æ¢ä¸ºå­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-repr.html">repr(x)</a></td><td style="text-align:left">å°†å¯¹è±¡ x è½¬æ¢ä¸ºè¡¨è¾¾å¼å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-eval.html">eval(str)</a></td><td style="text-align:left">ç”¨æ¥è®¡ç®—åœ¨å­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆPythonè¡¨è¾¾å¼,å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python3-func-tuple.html">tuple(s)</a></td><td style="text-align:left">å°†åºåˆ— s è½¬æ¢ä¸ºä¸€ä¸ªå…ƒç»„</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python3-att-list-list.html">list(s)</a></td><td style="text-align:left">å°†åºåˆ— s è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-set.html">set(s)</a></td><td style="text-align:left">è½¬æ¢ä¸ºå¯å˜é›†åˆ</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-dict.html">dict(d)</a></td><td style="text-align:left">åˆ›å»ºä¸€ä¸ªå­—å…¸ã€‚d å¿…é¡»æ˜¯ä¸€ä¸ª (key, value)å…ƒç»„åºåˆ—ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-frozenset.html">frozenset(s)</a></td><td style="text-align:left">è½¬æ¢ä¸ºä¸å¯å˜é›†åˆ</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-chr.html">chr(x)</a></td><td style="text-align:left">å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-ord.html">ord(x)</a></td><td style="text-align:left">å°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå®ƒçš„æ•´æ•°å€¼</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-hex.html">hex(x)</a></td><td style="text-align:left">å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/python3/python-func-oct.html">oct(x)</a></td><td style="text-align:left">å°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºä¸€ä¸ªå…«è¿›åˆ¶å­—ç¬¦ä¸²</td></tr></tbody></table><hr><h1>å‡½æ•°</h1><h2 id="å®šä¹‰ä¸€ä¸ªå‡½æ•°">å®šä¹‰ä¸€ä¸ªå‡½æ•°</h2><p>ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç”±è‡ªå·±æƒ³è¦åŠŸèƒ½çš„å‡½æ•°ï¼Œä»¥ä¸‹æ˜¯ç®€å•çš„è§„åˆ™ï¼š</p><ul><li>å‡½æ•°ä»£ç å—ä»¥ <strong>def</strong> å…³é”®è¯å¼€å¤´ï¼Œåæ¥å‡½æ•°æ ‡è¯†ç¬¦åç§°å’Œåœ†æ‹¬å· <strong>()</strong>ã€‚</li><li>ä»»ä½•ä¼ å…¥å‚æ•°å’Œè‡ªå˜é‡å¿…é¡»æ”¾åœ¨åœ†æ‹¬å·ä¸­é—´ï¼Œåœ†æ‹¬å·ä¹‹é—´å¯ä»¥ç”¨äºå®šä¹‰å‚æ•°ã€‚</li><li>å‡½æ•°çš„ç¬¬ä¸€è¡Œè¯­å¥å¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²â€”ç”¨äºå­˜æ”¾å‡½æ•°è¯´æ˜ã€‚</li><li>å‡½æ•°å†…å®¹ä»¥å†’å· <strong>:</strong> èµ·å§‹ï¼Œå¹¶ä¸”ç¼©è¿›ã€‚</li><li><strong>return [è¡¨è¾¾å¼]</strong> ç»“æŸå‡½æ•°ï¼Œé€‰æ‹©æ€§åœ°è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨æ–¹ï¼Œä¸å¸¦è¡¨è¾¾å¼çš„ return ç›¸å½“äºè¿”å› Noneã€‚</li></ul><p><img src="3.png" alt=""></p><h2 id="å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</h2><h3 id="ä¼ é€’æ–¹å¼ï¼š">ä¼ é€’æ–¹å¼ï¼š</h3><p>python å‡½æ•°çš„å‚æ•°ä¼ é€’ï¼š</p><ul><li>**ä¸å¯å˜ç±»å‹ï¼š**ç±»ä¼¼ C++ çš„å€¼ä¼ é€’ï¼Œå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€å…ƒç»„ã€‚å¦‚ fun(a)ï¼Œä¼ é€’çš„åªæ˜¯ a çš„å€¼ï¼Œæ²¡æœ‰å½±å“ a å¯¹è±¡æœ¬èº«ã€‚å¦‚æœåœ¨ fun(a) å†…éƒ¨ä¿®æ”¹ a çš„å€¼ï¼Œåˆ™æ˜¯æ–°ç”Ÿæˆä¸€ä¸ª a çš„å¯¹è±¡ã€‚</li><li>**å¯å˜ç±»å‹ï¼š**ç±»ä¼¼ C++ çš„å¼•ç”¨ä¼ é€’ï¼Œå¦‚ åˆ—è¡¨ï¼Œå­—å…¸ã€‚å¦‚ fun(la)ï¼Œåˆ™æ˜¯å°† la çœŸæ­£çš„ä¼ è¿‡å»ï¼Œä¿®æ”¹å fun å¤–éƒ¨çš„ la ä¹Ÿä¼šå—å½±å“</li></ul><p><strong>python ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œä¸¥æ ¼æ„ä¹‰æˆ‘ä»¬ä¸èƒ½è¯´å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Œæˆ‘ä»¬åº”è¯¥è¯´ä¼ ä¸å¯å˜å¯¹è±¡å’Œä¼ å¯å˜å¯¹è±¡ã€‚</strong></p><hr><h3 id="å‚æ•°ç±»å‹ï¼š">å‚æ•°ç±»å‹ï¼š</h3><p>é™¤å¿…é¡»å‚æ•°ï¼ˆå°±æ˜¯æ­£å¸¸å†™åœ¨å‚æ•°åˆ—è¡¨é‡Œçš„å‚æ•°ï¼‰å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‚æ•°ç±»å‹</p><h4 id="å…³é”®å­—å‚æ•°">å…³é”®å­—å‚æ•°</h4><p>å…³é”®å­—å‚æ•°å’Œå‡½æ•°è°ƒç”¨å…³ç³»ç´§å¯†ï¼Œå‡½æ•°è°ƒç”¨ä½¿ç”¨å…³é”®å­—å‚æ•°æ¥ç¡®å®šä¼ å…¥çš„å‚æ•°å€¼ã€‚</p><p><strong>ä½¿ç”¨å…³é”®å­—å‚æ•°å…è®¸å‡½æ•°è°ƒç”¨æ—¶å‚æ•°çš„é¡ºåºä¸å£°æ˜æ—¶ä¸ä¸€è‡´</strong>ï¼Œå› ä¸º Python è§£é‡Šå™¨èƒ½å¤Ÿç”¨å‚æ•°ååŒ¹é…å‚æ•°å€¼ã€‚</p><p>ä»¥ä¸‹å®ä¾‹åœ¨å‡½æ•° printme() è°ƒç”¨æ—¶ä½¿ç”¨å‚æ•°åï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span>(<span class="params"> <span class="built_in">str</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;æ‰“å°ä»»ä½•ä¼ å…¥çš„å­—ç¬¦ä¸²&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="built_in">str</span>)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#è°ƒç”¨printmeå‡½æ•°</span></span><br><span class="line">printme( <span class="built_in">str</span> = <span class="string">&quot;èœé¸Ÿæ•™ç¨‹&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="é»˜è®¤å‚æ•°">é»˜è®¤å‚æ•°</h4><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ã€‚ä»¥ä¸‹å®ä¾‹ä¸­å¦‚æœæ²¡æœ‰ä¼ å…¥ age å‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼š</p><p><strong>å®šä¹‰é»˜è®¤å‚æ•°è¦ç‰¢è®°ä¸€ç‚¹ï¼šé»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡ï¼</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> name, age = <span class="number">35</span> </span>):</span></span><br><span class="line">   <span class="string">&quot;æ‰“å°ä»»ä½•ä¼ å…¥çš„å­—ç¬¦ä¸²&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;åå­—: &quot;</span>, name)</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;å¹´é¾„: &quot;</span>, age)</span><br><span class="line">   <span class="keyword">return</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#è°ƒç”¨printinfoå‡½æ•°</span></span><br><span class="line">printinfo(age=<span class="number">50</span>, name=<span class="string">&quot;runoob&quot;</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;------------------------&quot;</span>)</span><br><span class="line">printinfo( name=<span class="string">&quot;runoob&quot;</span> )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åå­—:  runoob</span><br><span class="line">å¹´é¾„:  <span class="number">50</span></span><br><span class="line">------------------------</span><br><span class="line">åå­—:  runoob</span><br><span class="line">å¹´é¾„:  <span class="number">35</span></span><br></pre></td></tr></table></figure><h4 id="ä¸å®šé•¿å‚æ•°">ä¸å®šé•¿å‚æ•°</h4><p>ä½ å¯èƒ½éœ€è¦ä¸€ä¸ªå‡½æ•°èƒ½å¤„ç†æ¯”å½“åˆå£°æ˜æ—¶æ›´å¤šçš„å‚æ•°ã€‚è¿™äº›å‚æ•°å«åšä¸å®šé•¿å‚æ•°ï¼Œåœ¨å‚æ•°åˆ—è¡¨ä¸­å†™çš„æ—¶å€™è¦åœ¨å˜é‡å‰åŠ ä¸Š<code>*</code>ï¼Œå¹¶ä¸”åªèƒ½æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åã€‚</p><p>åŠ äº†æ˜Ÿå·<code>*</code>çš„å‚æ•°ä¼šä»¥å…ƒç»„(tuple)çš„å½¢å¼å¯¼å…¥ï¼Œå­˜æ”¾æ‰€æœ‰æœªå‘½åçš„å˜é‡å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, *vartuple </span>):</span></span><br><span class="line">   <span class="string">&quot;æ‰“å°ä»»ä½•ä¼ å…¥çš„å‚æ•°&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;è¾“å‡º: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (vartuple)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è°ƒç”¨printinfo å‡½æ•°</span></span><br><span class="line">printinfo( <span class="number">70</span>, <span class="number">60</span>, <span class="number">50</span> )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡º: </span><br><span class="line"><span class="number">70</span></span><br><span class="line">(<span class="number">60</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§å°±æ˜¯å‚æ•°å¸¦ä¸¤ä¸ªæ˜Ÿå· <code>**</code>ï¼ŒåŠ äº†ä¸¤ä¸ªæ˜Ÿå· <code>**</code>çš„å‚æ•°ä¼šä»¥å­—å…¸çš„å½¢å¼å¯¼å…¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span>(<span class="params"> arg1, **vardict </span>):</span></span><br><span class="line">   <span class="string">&quot;æ‰“å°ä»»ä½•ä¼ å…¥çš„å‚æ•°&quot;</span></span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;è¾“å‡º: &quot;</span>)</span><br><span class="line">   <span class="built_in">print</span> (arg1)</span><br><span class="line">   <span class="built_in">print</span> (vardict)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è°ƒç”¨printinfo å‡½æ•°</span></span><br><span class="line">printinfo(<span class="number">1</span>, a=<span class="number">2</span>,b=<span class="number">3</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡º: </span><br><span class="line"><span class="number">1</span></span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ç©ºå‡½æ•°ä¸å ä½ç¬¦">ç©ºå‡½æ•°ä¸å ä½ç¬¦</h2><p>å¦‚æœæƒ³å®šä¹‰ä¸€ä¸ªä»€ä¹ˆäº‹ä¹Ÿä¸åšçš„ç©ºå‡½æ•°ï¼Œå¯ä»¥ç”¨<code>pass</code>è¯­å¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nop</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><code>pass</code>è¯­å¥ä»€ä¹ˆéƒ½ä¸åšï¼Œé‚£æœ‰ä»€ä¹ˆç”¨ï¼Ÿå®é™…ä¸Š<code>pass</code>å¯ä»¥ç”¨æ¥ä½œä¸ºå ä½ç¬¦ï¼Œæ¯”å¦‚ç°åœ¨è¿˜æ²¡æƒ³å¥½æ€ä¹ˆå†™å‡½æ•°çš„ä»£ç ï¼Œå°±å¯ä»¥å…ˆæ”¾ä¸€ä¸ª<code>pass</code>ï¼Œè®©ä»£ç èƒ½è¿è¡Œèµ·æ¥ã€‚</p><p><code>pass</code>è¿˜å¯ä»¥ç”¨åœ¨å…¶ä»–è¯­å¥é‡Œï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="keyword">pass</span>ç¼ºå°‘äº†`<span class="keyword">pass</span>`ï¼Œä»£ç è¿è¡Œå°±ä¼šæœ‰è¯­æ³•é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure><hr><h2 id="è¿”å›å¤šä¸ªå€¼">è¿”å›å¤šä¸ªå€¼</h2><p>å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p><p>æ¯”å¦‚åœ¨æ¸¸æˆä¸­ç»å¸¸éœ€è¦ä»ä¸€ä¸ªç‚¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç‚¹ï¼Œç»™å‡ºåæ ‡ã€ä½ç§»å’Œè§’åº¦ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºæ–°çš„åæ ‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">x, y, step, angle=<span class="number">0</span></span>):</span></span><br><span class="line">    nx = x + step * math.cos(angle)</span><br><span class="line">    ny = y - step * math.sin(angle)</span><br><span class="line">    <span class="keyword">return</span> nx, ny</span><br></pre></td></tr></table></figure><p><code>import math</code>è¯­å¥è¡¨ç¤ºå¯¼å…¥<code>math</code>åŒ…ï¼Œå¹¶å…è®¸åç»­ä»£ç å¼•ç”¨<code>math</code>åŒ…é‡Œçš„<code>sin</code>ã€<code>cos</code>ç­‰å‡½æ•°ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åŒæ—¶è·å¾—è¿”å›å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x, y = move(<span class="number">100</span>, <span class="number">100</span>, <span class="number">60</span>, math.pi / <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(x, y)</span><br><span class="line"><span class="number">151.96152422706632</span> <span class="number">70.0</span></span><br></pre></td></tr></table></figure><p>ä½†å…¶å®è¿™åªæ˜¯ä¸€ç§å‡è±¡ï¼ŒPythonå‡½æ•°è¿”å›çš„ä»ç„¶æ˜¯å•ä¸€å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = move(<span class="number">100</span>, <span class="number">100</span>, <span class="number">60</span>, math.pi / <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(r)</span><br><span class="line">(<span class="number">151.96152422706632</span>, <span class="number">70.0</span>)</span><br></pre></td></tr></table></figure><p>åŸæ¥è¿”å›å€¼æ˜¯ä¸€ä¸ªtupleï¼ä½†æ˜¯ï¼Œåœ¨è¯­æ³•ä¸Šï¼Œè¿”å›ä¸€ä¸ªtupleå¯ä»¥çœç•¥æ‹¬å·ï¼Œè€Œå¤šä¸ªå˜é‡å¯ä»¥åŒæ—¶æ¥æ”¶ä¸€ä¸ªtupleï¼ŒæŒ‰ä½ç½®èµ‹ç»™å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥ï¼ŒPythonçš„å‡½æ•°è¿”å›å¤šå€¼å…¶å®å°±æ˜¯è¿”å›ä¸€ä¸ªtupleï¼Œä½†å†™èµ·æ¥æ›´æ–¹ä¾¿ã€‚</p><hr><h1>è¿­ä»£å™¨ã€åˆ—è¡¨ç”Ÿæˆå¼ä¸ç”Ÿæˆå™¨</h1><h2 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h2><p>è¿­ä»£æ˜¯Pythonæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæ˜¯è®¿é—®é›†åˆå…ƒç´ çš„ä¸€ç§æ–¹å¼ã€‚</p><p>è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯ä»¥è®°ä½éå†çš„ä½ç½®çš„å¯¹è±¡ã€‚</p><p>è¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚è¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚</p><p>è¿­ä»£å™¨æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ–¹æ³•ï¼š<strong>iter()</strong> å’Œ <strong>next()</strong>ã€‚</p><p>å­—ç¬¦ä¸²ï¼Œå­—å…¸ï¼Œåˆ—è¡¨æˆ–å…ƒç»„å¯¹è±¡éƒ½å¯ç”¨äºåˆ›å»ºè¿­ä»£å™¨ï¼Œåªè¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ— è®ºæœ‰æ— ä¸‹æ ‡ï¼Œéƒ½å¯ä»¥è¿­ä»£</p><h3 id="forå¾ªç¯è¿­ä»£">forå¾ªç¯è¿­ä»£</h3><p>æ¯”å¦‚<code>dict</code>å°±å¯ä»¥è¿­ä»£ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key)</span><br><span class="line">...</span><br><span class="line">a</span><br><span class="line">c</span><br><span class="line">b</span><br></pre></td></tr></table></figure><p>å› ä¸º<code>dict</code>çš„å­˜å‚¨ä¸æ˜¯æŒ‰ç…§<code>list</code>çš„æ–¹å¼é¡ºåºæ’åˆ—ï¼Œæ‰€ä»¥ï¼Œè¿­ä»£å‡ºçš„ç»“æœé¡ºåºå¾ˆå¯èƒ½ä¸ä¸€æ ·ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>dict</code>è¿­ä»£çš„æ˜¯keyã€‚å¦‚æœè¦è¿­ä»£valueï¼Œå¯ä»¥ç”¨<code>for value in d.values()</code>ï¼Œå¦‚æœè¦åŒæ—¶è¿­ä»£keyå’Œvalueï¼Œå¯ä»¥ç”¨<code>for k, v in d.items()</code>ã€‚</p><p>ç”±äºå­—ç¬¦ä¸²ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå› æ­¤ï¼Œä¹Ÿå¯ä»¥ä½œç”¨äº<code>for</code>å¾ªç¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="string">&#x27;ABC&#x27;</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(ch)</span><br><span class="line">...</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œ<strong>å½“æˆ‘ä»¬ä½¿ç”¨<code>for</code>å¾ªç¯æ—¶ï¼Œåªè¦ä½œç”¨äºä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œ<code>for</code>å¾ªç¯å°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè€Œæˆ‘ä»¬ä¸å¤ªå…³å¿ƒè¯¥å¯¹è±¡ç©¶ç«Ÿæ˜¯<code>list</code>è¿˜æ˜¯å…¶ä»–æ•°æ®ç±»å‹ã€‚</strong></p><p>é‚£ä¹ˆï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¯è¿­ä»£å¯¹è±¡å‘¢ï¼Ÿæ–¹æ³•æ˜¯é€šè¿‡<code>collections.abc</code>æ¨¡å—çš„<code>Iterable</code>ç±»å‹åˆ¤æ–­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>, Iterable) <span class="comment"># stræ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], Iterable) <span class="comment"># listæ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="number">123</span>, Iterable) <span class="comment"># æ•´æ•°æ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ªå°é—®é¢˜ï¼Œå¦‚æœè¦å¯¹<code>list</code>å®ç°ç±»ä¼¼Javaé‚£æ ·çš„ä¸‹æ ‡å¾ªç¯æ€ä¹ˆåŠï¼Ÿ<strong>Pythonå†…ç½®çš„<code>enumerate</code>å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ª<code>list</code>å˜æˆç´¢å¼•-å…ƒç´ å¯¹</strong>ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨<code>for</code>å¾ªç¯ä¸­åŒæ—¶è¿­ä»£ç´¢å¼•å’Œå…ƒç´ æœ¬èº«ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, value <span class="keyword">in</span> <span class="built_in">enumerate</span>([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>]):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i, value)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> A</span><br><span class="line"><span class="number">1</span> B</span><br><span class="line"><span class="number">2</span> C</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>for</code>å¾ªç¯é‡Œï¼ŒåŒæ—¶å¼•ç”¨äº†ä¸¤ä¸ªå˜é‡ï¼Œåœ¨Pythoné‡Œæ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x, y <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">9</span>)]:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x, y)</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">9</span></span><br></pre></td></tr></table></figure><h3 id="è¿­ä»£å™¨è¿­ä»£">è¿­ä»£å™¨è¿­ä»£</h3><blockquote><p>è¿­ä»£å™¨å¯¹è±¡å¯ä»¥ä½¿ç”¨å¸¸è§„forè¯­å¥è¿›è¡Œéå†ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>it = <span class="built_in">iter</span>(<span class="built_in">list</span>)    <span class="comment"># åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span> (<span class="built_in">next</span>(it))   <span class="comment"># è¾“å‡ºè¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span> (<span class="built_in">next</span>(it))</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šç¨‹åºï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4</span><br></pre></td></tr></table></figure><blockquote><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ next() å‡½æ•°ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)    <span class="comment"># åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:</span><br><span class="line">    <span class="built_in">print</span> (x, end=<span class="string">&quot; &quot;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šç¨‹åºï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨">åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨</h4><p>æŠŠä¸€ä¸ªç±»ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨ä½¿ç”¨éœ€è¦åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæ–¹æ³• <code>__iter__()</code> ä¸<code>__next__()</code>ã€‚</p><p>å¦‚æœä½ å·²ç»äº†è§£çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå°±çŸ¥é“ç±»éƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ŒPython çš„æ„é€ å‡½æ•°ä¸º <code>__init__()</code>, å®ƒä¼šåœ¨å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œã€‚<code>__iter__() </code>æ–¹æ³•è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„è¿­ä»£å™¨å¯¹è±¡ï¼Œ è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡å®ç°äº† <code>__next__() </code>æ–¹æ³•å¹¶é€šè¿‡ StopIteration å¼‚å¸¸æ ‡è¯†è¿­ä»£çš„å®Œæˆã€‚<code>__next__() </code>æ–¹æ³•ä¼šè¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚</p><p>åˆ›å»ºä¸€ä¸ªè¿”å›æ•°å­—çš„è¿­ä»£å™¨ï¼Œåˆå§‹å€¼ä¸º 1ï¼Œé€æ­¥é€’å¢ 1ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNumbers</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> self</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">    x = self.a</span><br><span class="line">    self.a += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line"> </span><br><span class="line">myclass = MyNumbers()</span><br><span class="line">myiter = <span class="built_in">iter</span>(myclass)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h4 id="StopIteration">StopIteration</h4><p>StopIteration å¼‚å¸¸ç”¨äºæ ‡è¯†è¿­ä»£çš„å®Œæˆï¼Œé˜²æ­¢å‡ºç°æ— é™å¾ªç¯çš„æƒ…å†µï¼Œåœ¨<code>__next__()</code>æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®åœ¨å®ŒæˆæŒ‡å®šå¾ªç¯æ¬¡æ•°åè§¦å‘ StopIteration å¼‚å¸¸æ¥ç»“æŸè¿­ä»£ã€‚</p><p>åœ¨ 20 æ¬¡è¿­ä»£ååœæ­¢æ‰§è¡Œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNumbers</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> self</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">if</span> self.a &lt;= <span class="number">20</span>:</span><br><span class="line">      x = self.a</span><br><span class="line">      self.a += <span class="number">1</span></span><br><span class="line">      <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">raise</span> StopIteration</span><br><span class="line"> </span><br><span class="line">myclass = MyNumbers()</span><br><span class="line">myiter = <span class="built_in">iter</span>(myclass)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> myiter:</span><br><span class="line">  <span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td></tr></table></figure><hr><h2 id="åˆ—è¡¨ç”Ÿæˆå¼">åˆ—è¡¨ç”Ÿæˆå¼</h2><p>åˆ—è¡¨ç”Ÿæˆå¼å³List Comprehensionsï¼Œæ˜¯Pythonå†…ç½®çš„éå¸¸ç®€å•å´å¼ºå¤§çš„å¯ä»¥ç”¨æ¥åˆ›å»ºlistçš„ç”Ÿæˆå¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œè¦ç”Ÿæˆlist <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</code>å¯ä»¥ç”¨<code>list(range(1, 11))</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>))</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure><p>ä½†å¦‚æœè¦ç”Ÿæˆ<code>[1x1, 2x2, 3x3, ..., 10x10]</code>æ€ä¹ˆåšï¼Ÿæ–¹æ³•ä¸€æ˜¯å¾ªç¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">   L.append(x * x)</span><br><span class="line">L</span><br><span class="line"><span class="comment"># [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¾ªç¯å¤ªç¹çï¼Œè€Œåˆ—è¡¨ç”Ÿæˆå¼åˆ™å¯ä»¥ç”¨ä¸€è¡Œè¯­å¥ä»£æ›¿å¾ªç¯ç”Ÿæˆä¸Šé¢çš„listï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"><span class="comment"># [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></span><br></pre></td></tr></table></figure><p><strong>å†™åˆ—è¡¨ç”Ÿæˆå¼æ—¶ï¼ŒæŠŠè¦ç”Ÿæˆçš„å…ƒç´ <code>x * x</code>æ”¾åˆ°å‰é¢ï¼Œåé¢è·Ÿ<code>for</code>å¾ªç¯</strong>ï¼Œå°±å¯ä»¥æŠŠliståˆ›å»ºå‡ºæ¥ï¼Œååˆ†æœ‰ç”¨ï¼Œå¤šå†™å‡ æ¬¡ï¼Œå¾ˆå¿«å°±å¯ä»¥ç†Ÿæ‚‰è¿™ç§è¯­æ³•ã€‚</p><p><strong>forå¾ªç¯åé¢è¿˜å¯ä»¥åŠ ä¸Šifåˆ¤æ–­</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç­›é€‰å‡ºä»…å¶æ•°çš„å¹³æ–¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment"># [4, 16, 36, 64, 100]</span></span><br></pre></td></tr></table></figure><p><strong>è¿˜å¯ä»¥ä½¿ç”¨ä¸¤å±‚å¾ªç¯ï¼Œå¯ä»¥ç”Ÿæˆå…¨æ’åˆ—ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">&#x27;ABC&#x27;</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">&#x27;XYZ&#x27;</span>]</span><br><span class="line"><span class="comment"># [&#x27;AX&#x27;, &#x27;AY&#x27;, &#x27;AZ&#x27;, &#x27;BX&#x27;, &#x27;BY&#x27;, &#x27;BZ&#x27;, &#x27;CX&#x27;, &#x27;CY&#x27;, &#x27;CZ&#x27;]</span></span><br></pre></td></tr></table></figure><p>ä¸‰å±‚å’Œä¸‰å±‚ä»¥ä¸Šçš„å¾ªç¯å°±å¾ˆå°‘ç”¨åˆ°äº†ã€‚</p><p>è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å†™å‡ºéå¸¸ç®€æ´çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åï¼Œå¯ä»¥é€šè¿‡ä¸€è¡Œä»£ç å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os <span class="comment"># å¯¼å…¥osæ¨¡å—ï¼Œæ¨¡å—çš„æ¦‚å¿µåé¢è®²åˆ°</span></span><br><span class="line">[d <span class="keyword">for</span> d <span class="keyword">in</span> os.listdir(<span class="string">&#x27;.&#x27;</span>)] <span class="comment"># os.listdirå¯ä»¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line"><span class="comment"># [&#x27;.emacs.d&#x27;, &#x27;.ssh&#x27;, &#x27;.Trash&#x27;, &#x27;Adlm&#x27;, &#x27;Applications&#x27;, &#x27;Desktop&#x27;, &#x27;Documents&#x27;, &#x27;Downloads&#x27;, &#x27;Library&#x27;, &#x27;Movies&#x27;, &#x27;Music&#x27;, &#x27;Pictures&#x27;, &#x27;Public&#x27;, &#x27;VirtualBox VMs&#x27;, &#x27;Workspace&#x27;, &#x27;XCode&#x27;]</span></span><br></pre></td></tr></table></figure><p><code>for</code>å¾ªç¯å…¶å®å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªç”šè‡³å¤šä¸ªå˜é‡ï¼Œæ¯”å¦‚<code>dict</code>çš„<code>items()</code>å¯ä»¥åŒæ—¶è¿­ä»£keyå’Œvalueï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">&#x27;x&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;y&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;z&#x27;</span>: <span class="string">&#x27;C&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">    <span class="built_in">print</span>(k, <span class="string">&#x27;=&#x27;</span>, v)</span><br><span class="line">...</span><br><span class="line"><span class="comment"># y = B</span></span><br><span class="line"><span class="comment"># x = A</span></span><br><span class="line"><span class="comment"># z = C</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œåˆ—è¡¨ç”Ÿæˆå¼ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ¥ç”Ÿæˆlistï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;<span class="string">&#x27;x&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;y&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;z&#x27;</span>: <span class="string">&#x27;C&#x27;</span> &#125;</span><br><span class="line">[k + <span class="string">&#x27;=&#x27;</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line"><span class="comment"># [&#x27;y=B&#x27;, &#x27;x=A&#x27;, &#x27;z=C&#x27;]</span></span><br></pre></td></tr></table></figure><p>æœ€åæŠŠä¸€ä¸ªlistä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²å˜æˆå°å†™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>, <span class="string">&#x27;IBM&#x27;</span>, <span class="string">&#x27;Apple&#x27;</span>]</span><br><span class="line">[s.lower() <span class="keyword">for</span> s <span class="keyword">in</span> L]</span><br><span class="line"><span class="comment"># [&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;ibm&#x27;, &#x27;apple&#x27;]</span></span><br></pre></td></tr></table></figure><h3 id="if-â€¦-else">if â€¦ else</h3><p>ä½¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼çš„æ—¶å€™ï¼Œæœ‰äº›ç«¥é‹ç»å¸¸æä¸æ¸…æ¥š<code>if...else</code>çš„ç”¨æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ­£å¸¸è¾“å‡ºå¶æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><p><strong>ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨æœ€åçš„<code>if</code>åŠ ä¸Š<code>else</code>ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>]</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>]</span><br><span class="line">                                              ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºè·Ÿåœ¨<code>for</code>åé¢çš„<code>if</code>æ˜¯ä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼Œä¸èƒ½å¸¦<code>else</code>ï¼Œå¦åˆ™å¦‚ä½•ç­›é€‰ï¼Ÿ</p><p>å¦ä¸€äº›ç«¥é‹å‘ç°<strong>æŠŠ<code>if</code>å†™åœ¨<code>for</code>å‰é¢å¿…é¡»åŠ <code>else</code>ï¼Œå¦åˆ™æŠ¥é”™</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    [x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line">                       ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><p><strong>è¿™æ˜¯å› ä¸º<code>for</code>å‰é¢çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒå¿…é¡»æ ¹æ®<code>x</code>è®¡ç®—å‡ºä¸€ä¸ªç»“æœ</strong>ã€‚å› æ­¤ï¼Œè€ƒå¯Ÿè¡¨è¾¾å¼ï¼š<code>x if x % 2 == 0</code>ï¼Œå®ƒæ— æ³•æ ¹æ®<code>x</code>è®¡ç®—å‡ºç»“æœï¼Œå› ä¸ºç¼ºå°‘<code>else</code>ï¼Œå¿…é¡»åŠ ä¸Š<code>else</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"><span class="comment"># [-1, 2, -3, 4, -5, 6, -7, 8, -9, 10]</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°<code>for</code>å‰é¢çš„è¡¨è¾¾å¼<code>x if x % 2 == 0 else -x</code>æ‰èƒ½æ ¹æ®<code>x</code>è®¡ç®—å‡ºç¡®å®šçš„ç»“æœã€‚</p><p>å¯è§ï¼Œ<strong>åœ¨ä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ<code>for</code>å‰é¢çš„<code>if ... else</code>æ˜¯è¡¨è¾¾å¼ï¼Œè€Œ<code>for</code>åé¢çš„<code>if</code>æ˜¯è¿‡æ»¤æ¡ä»¶ï¼Œä¸èƒ½å¸¦<code>else</code></strong>ã€‚</p><hr><h2 id="ç”Ÿæˆå™¨">ç”Ÿæˆå™¨</h2><p>é€šè¿‡åˆ—è¡¨ç”Ÿæˆå¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯ï¼Œå—åˆ°å†…å­˜é™åˆ¶ï¼Œåˆ—è¡¨å®¹é‡è‚¯å®šæ˜¯æœ‰é™çš„ã€‚è€Œä¸”ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«100ä¸‡ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œä¸ä»…å ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…éœ€è¦è®¿é—®å‰é¢å‡ ä¸ªå…ƒç´ ï¼Œé‚£åé¢ç»å¤§å¤šæ•°å…ƒç´ å ç”¨çš„ç©ºé—´éƒ½ç™½ç™½æµªè´¹äº†ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœåˆ—è¡¨å…ƒç´ å¯ä»¥æŒ‰ç…§æŸç§ç®—æ³•æ¨ç®—å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ä¸æ–­æ¨ç®—å‡ºåç»­çš„å…ƒç´ å‘¢ï¼Ÿè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„listï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ã€‚åœ¨Pythonä¸­ï¼Œè¿™ç§ä¸€è¾¹å¾ªç¯ä¸€è¾¹è®¡ç®—çš„æœºåˆ¶ï¼Œç§°ä¸ºç”Ÿæˆå™¨ï¼šgeneratorã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªgeneratorï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•å¾ˆç®€å•ï¼Œ<strong>åªè¦æŠŠä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼çš„<code>[]</code>æ”¹æˆ<code>()</code>ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªgeneratorï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">L = [x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(L)</span><br><span class="line"><span class="comment"># [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span><br><span class="line">g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"><span class="comment"># &lt;generator object &lt;genexpr&gt; at 0x1022ef630&gt;</span></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»º<code>L</code>å’Œ<code>g</code>çš„åŒºåˆ«ä»…åœ¨äºæœ€å¤–å±‚çš„<code>[]</code>å’Œ<code>()</code>ï¼Œ<code>L</code>æ˜¯ä¸€ä¸ªlistï¼Œè€Œ<code>g</code>æ˜¯ä¸€ä¸ªgeneratorã€‚</strong></p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰“å°å‡ºlistçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½†æˆ‘ä»¬æ€ä¹ˆæ‰“å°å‡ºgeneratorçš„æ¯ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿ</p><p>å¦‚æœè¦ä¸€ä¸ªä¸€ä¸ªæ‰“å°å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡<code>next()</code>å‡½æ•°è·å¾—generatorçš„ä¸‹ä¸€ä¸ªè¿”å›å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">81</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è®²è¿‡ï¼Œgeneratorä¿å­˜çš„æ˜¯ç®—æ³•ï¼Œæ¯æ¬¡è°ƒç”¨<code>next(g)</code>ï¼Œå°±è®¡ç®—å‡º<code>g</code>çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œç›´åˆ°è®¡ç®—åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰æ›´å¤šçš„å…ƒç´ æ—¶ï¼ŒæŠ›å‡º<code>StopIteration</code>çš„é”™è¯¯ã€‚</p><p>å½“ç„¶ï¼Œä¸Šé¢è¿™ç§ä¸æ–­è°ƒç”¨<code>next(g)</code>å®åœ¨æ˜¯å¤ªå˜æ€äº†ï¼Œæ­£ç¡®çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>for</code>å¾ªç¯ï¼Œå› ä¸ºgeneratorä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> g:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">81</span></span><br></pre></td></tr></table></figure><p><strong>æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªgeneratoråï¼ŒåŸºæœ¬ä¸Šæ°¸è¿œä¸ä¼šè°ƒç”¨<code>next()</code>ï¼Œè€Œæ˜¯é€šè¿‡<code>for</code>å¾ªç¯æ¥è¿­ä»£å®ƒï¼Œå¹¶ä¸”ä¸éœ€è¦å…³å¿ƒ<code>StopIteration</code>çš„é”™è¯¯ã€‚</strong></p><p>generatoréå¸¸å¼ºå¤§ã€‚å¦‚æœæ¨ç®—çš„ç®—æ³•æ¯”è¾ƒå¤æ‚ï¼Œç”¨ç±»ä¼¼åˆ—è¡¨ç”Ÿæˆå¼çš„<code>for</code>å¾ªç¯æ— æ³•å®ç°çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥ç”¨å‡½æ•°æ¥å®ç°ã€‚</p><p>æ¯”å¦‚ï¼Œè‘—åçš„æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰ï¼Œé™¤ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ•°å¤–ï¼Œä»»æ„ä¸€ä¸ªæ•°éƒ½å¯ç”±å‰ä¸¤ä¸ªæ•°ç›¸åŠ å¾—åˆ°ï¼š</p><p>1, 1, 2, 3, 5, 8, 13, 21, 34, â€¦</p><p>æ–æ³¢æ‹‰å¥‘æ•°åˆ—ç”¨åˆ—è¡¨ç”Ÿæˆå¼å†™ä¸å‡ºæ¥ï¼Œä½†æ˜¯ï¼Œç”¨å‡½æ•°æŠŠå®ƒæ‰“å°å‡ºæ¥å´å¾ˆå®¹æ˜“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="built_in">print</span>(b)</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œèµ‹å€¼è¯­å¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b = b, a + b</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = (b, a + b) <span class="comment"># tæ˜¯ä¸€ä¸ªtuple</span></span><br><span class="line">a = t[<span class="number">0</span>]</span><br><span class="line">b = t[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>ä½†ä¸å¿…æ˜¾å¼å†™å‡ºä¸´æ—¶å˜é‡tå°±å¯ä»¥èµ‹å€¼ã€‚</p><p>ä¸Šé¢çš„å‡½æ•°å¯ä»¥è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰Nä¸ªæ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>fib(<span class="number">6</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="string">&#x27;done&#x27;</span></span><br></pre></td></tr></table></figure><p>ä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹å‡ºï¼Œ<code>fib</code>å‡½æ•°å®é™…ä¸Šæ˜¯å®šä¹‰äº†æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„æ¨ç®—è§„åˆ™ï¼Œå¯ä»¥ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¨ç®—å‡ºåç»­ä»»æ„çš„å…ƒç´ ï¼Œè¿™ç§é€»è¾‘å…¶å®éå¸¸ç±»ä¼¼generatorã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„å‡½æ•°å’Œgeneratorä»…ä¸€æ­¥ä¹‹é¥ã€‚è¦æŠŠ<code>fib</code>å‡½æ•°å˜æˆgeneratorå‡½æ•°ï¼Œåªéœ€è¦æŠŠ<code>print(b)</code>æ”¹ä¸º<code>yield b</code>å°±å¯ä»¥äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;done&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>è¿™å°±æ˜¯å®šä¹‰generatorçš„å¦ä¸€ç§æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­åŒ…å«<code>yield</code>å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªgeneratorå‡½æ•°ï¼Œè°ƒç”¨ä¸€ä¸ªgeneratorå‡½æ•°å°†è¿”å›ä¸€ä¸ªgeneratorï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = fib(<span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">&lt;generator <span class="built_in">object</span> fib at <span class="number">0x104feaaa0</span>&gt;</span><br></pre></td></tr></table></figure><p><strong>è¿™é‡Œï¼Œæœ€éš¾ç†è§£çš„å°±æ˜¯generatorå‡½æ•°å’Œæ™®é€šå‡½æ•°çš„æ‰§è¡Œæµç¨‹ä¸ä¸€æ ·ã€‚æ™®é€šå‡½æ•°æ˜¯é¡ºåºæ‰§è¡Œï¼Œé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æœ€åä¸€è¡Œå‡½æ•°è¯­å¥å°±è¿”å›ã€‚è€Œå˜æˆgeneratorçš„å‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>next()</code>çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°<code>yield</code>è¯­å¥è¿”å›ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä»ä¸Šæ¬¡è¿”å›çš„<code>yield</code>è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</strong></p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®šä¹‰ä¸€ä¸ªgeneratorå‡½æ•°ï¼Œä¾æ¬¡è¿”å›æ•°å­—1ï¼Œ3ï¼Œ5ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">odd</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 1&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 2&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span>(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;step 3&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span>(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>è°ƒç”¨è¯¥generatorå‡½æ•°æ—¶ï¼Œé¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ªgeneratorå¯¹è±¡ï¼Œç„¶åç”¨<code>next()</code>å‡½æ•°ä¸æ–­è·å¾—ä¸‹ä¸€ä¸ªè¿”å›å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(o)</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(o)</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(o)</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(o)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>odd</code>ä¸æ˜¯æ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯generatorå‡½æ•°ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°<code>yield</code>å°±ä¸­æ–­ï¼Œä¸‹æ¬¡åˆç»§ç»­æ‰§è¡Œã€‚æ‰§è¡Œ3æ¬¡<code>yield</code>åï¼Œå·²ç»æ²¡æœ‰<code>yield</code>å¯ä»¥æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ï¼Œç¬¬4æ¬¡è°ƒç”¨<code>next(o)</code>å°±æŠ¥é”™ã€‚</p><p><strong>è¯·åŠ¡å¿…æ³¨æ„ï¼šè°ƒç”¨generatorå‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªgeneratorå¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨generatorå‡½æ•°ä¼šåˆ›å»ºå¤šä¸ªç›¸äº’ç‹¬ç«‹çš„generator</strong>ã€‚</p><p>æœ‰çš„ç«¥é‹ä¼šå‘ç°è¿™æ ·è°ƒç”¨<code>next()</code>æ¯æ¬¡éƒ½è¿”å›1ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(odd())</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(odd())</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(odd())</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><p>åŸå› åœ¨äº<code>odd()</code>ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„generatorå¯¹è±¡ï¼Œä¸Šè¿°ä»£ç å®é™…ä¸Šåˆ›å»ºäº†3ä¸ªå®Œå…¨ç‹¬ç«‹çš„generatorï¼Œå¯¹3ä¸ªgeneratoråˆ†åˆ«è°ƒç”¨<code>next()</code>å½“ç„¶æ¯ä¸ªéƒ½ä¼šè¿”å›ç¬¬ä¸€ä¸ªå€¼ã€‚</p><p>æ­£ç¡®çš„å†™æ³•æ˜¯åˆ›å»ºä¸€ä¸ªgeneratorå¯¹è±¡ï¼Œç„¶åä¸æ–­å¯¹è¿™ä¸€ä¸ªgeneratorå¯¹è±¡è°ƒç”¨<code>next()</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><p>å›åˆ°<code>fib</code>çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨å¾ªç¯è¿‡ç¨‹ä¸­ä¸æ–­è°ƒç”¨<code>yield</code>ï¼Œå°±ä¼šä¸æ–­ä¸­æ–­ã€‚å½“ç„¶è¦ç»™å¾ªç¯è®¾ç½®ä¸€ä¸ªæ¡ä»¶æ¥é€€å‡ºå¾ªç¯ï¼Œä¸ç„¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ— é™æ•°åˆ—å‡ºæ¥ã€‚</p><p>åŒæ ·çš„ï¼ŒæŠŠå‡½æ•°æ”¹æˆgeneratorå‡½æ•°åï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šä»æ¥ä¸ä¼šç”¨<code>next()</code>æ¥è·å–ä¸‹ä¸€ä¸ªè¿”å›å€¼ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨<code>for</code>å¾ªç¯æ¥è¿­ä»£ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> fib(<span class="number">6</span>):</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç”¨<code>for</code>å¾ªç¯è°ƒç”¨generatoræ—¶ï¼Œå‘ç°æ‹¿ä¸åˆ°generatorçš„<code>return</code>è¯­å¥çš„è¿”å›å€¼ã€‚å¦‚æœæƒ³è¦æ‹¿åˆ°è¿”å›å€¼ï¼Œå¿…é¡»æ•è·<code>StopIteration</code>é”™è¯¯ï¼Œè¿”å›å€¼åŒ…å«åœ¨<code>StopIteration</code>çš„<code>value</code>ä¸­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">g = fib(<span class="number">6</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = <span class="built_in">next</span>(g)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;g:&#x27;</span>, x)</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Generator return value:&#x27;</span>, e.value)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">...</span><br><span class="line">g: <span class="number">1</span></span><br><span class="line">g: <span class="number">1</span></span><br><span class="line">g: <span class="number">2</span></span><br><span class="line">g: <span class="number">3</span></span><br><span class="line">g: <span class="number">5</span></span><br><span class="line">g: <span class="number">8</span></span><br><span class="line">Generator <span class="keyword">return</span> value: done</span><br></pre></td></tr></table></figure><p>å…³äºå¦‚ä½•æ•è·é”™è¯¯ï¼Œåé¢çš„é”™è¯¯å¤„ç†è¿˜ä¼šè¯¦ç»†è®²è§£ã€‚</p><hr><h2 id="PS">PS.</h2><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå¯ä»¥ç›´æ¥ä½œç”¨äº<code>for</code>å¾ªç¯çš„æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p>ä¸€ç±»æ˜¯é›†åˆæ•°æ®ç±»å‹ï¼Œå¦‚<code>list</code>ã€<code>tuple</code>ã€<code>dict</code>ã€<code>set</code>ã€<code>str</code>ç­‰ï¼›</p></li><li><p>ä¸€ç±»æ˜¯<code>generator</code>ï¼ŒåŒ…æ‹¬ç”Ÿæˆå™¨å’Œå¸¦<code>yield</code>çš„generator functionã€‚</p></li></ul><p>è¿™äº›å¯ä»¥ç›´æ¥ä½œç”¨äº<code>for</code>å¾ªç¯çš„å¯¹è±¡ç»Ÿç§°ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼š<code>Iterable</code>ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>isinstance()</code>åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯<code>Iterable</code>å¯¹è±¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="built_in">isinstance</span>([], Iterable)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(&#123;&#125;, Iterable)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>, Iterable)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>((x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)), Iterable)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="number">100</span>, Iterable)</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure><p>è€Œç”Ÿæˆå™¨ä¸ä½†å¯ä»¥ä½œç”¨äº<code>for</code>å¾ªç¯ï¼Œè¿˜å¯ä»¥è¢«<code>next()</code>å‡½æ•°ä¸æ–­è°ƒç”¨å¹¶è¿”å›ä¸‹ä¸€ä¸ªå€¼ï¼Œç›´åˆ°æœ€åæŠ›å‡º<code>StopIteration</code>é”™è¯¯è¡¨ç¤ºæ— æ³•ç»§ç»­è¿”å›ä¸‹ä¸€ä¸ªå€¼äº†ã€‚</p><p>å¯ä»¥è¢«<code>next()</code>å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªå€¼çš„å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼š<code>Iterator</code>ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>isinstance()</code>åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯<code>Iterator</code>å¯¹è±¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterator</span><br><span class="line"><span class="built_in">isinstance</span>((x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)), Iterator)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>([], Iterator)</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="built_in">isinstance</span>(&#123;&#125;, Iterator)</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>, Iterator)</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure><p><strong>ç”Ÿæˆå™¨éƒ½æ˜¯<code>Iterator</code>å¯¹è±¡ï¼Œä½†<code>list</code>ã€<code>dict</code>ã€<code>str</code>è™½ç„¶æ˜¯<code>Iterable</code>ï¼Œå´ä¸æ˜¯<code>Iterator</code></strong>ã€‚</p><p>æŠŠ<code>list</code>ã€<code>dict</code>ã€<code>str</code>ç­‰<code>Iterable</code>å˜æˆ<code>Iterator</code>å¯ä»¥ä½¿ç”¨<code>iter()</code>å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isinstance</span>(<span class="built_in">iter</span>([]), Iterator)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="built_in">iter</span>(<span class="string">&#x27;abc&#x27;</span>), Iterator)</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure><p><strong>ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆ<code>list</code>ã€<code>dict</code>ã€<code>str</code>ç­‰æ•°æ®ç±»å‹ä¸æ˜¯<code>Iterator</code>ï¼Ÿ</strong></p><p><strong>è¿™æ˜¯å› ä¸ºPythonçš„<code>Iterator</code>å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•°æ®æµï¼ŒIteratorå¯¹è±¡å¯ä»¥è¢«<code>next()</code>å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œç›´åˆ°æ²¡æœ‰æ•°æ®æ—¶æŠ›å‡º<code>StopIteration</code>é”™è¯¯ã€‚å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®æµçœ‹åšæ˜¯ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œä½†æˆ‘ä»¬å´ä¸èƒ½æå‰çŸ¥é“åºåˆ—çš„é•¿åº¦ï¼Œåªèƒ½ä¸æ–­é€šè¿‡<code>next()</code>å‡½æ•°å®ç°æŒ‰éœ€è®¡ç®—ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥<code>Iterator</code>çš„è®¡ç®—æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨éœ€è¦è¿”å›ä¸‹ä¸€ä¸ªæ•°æ®æ—¶å®ƒæ‰ä¼šè®¡ç®—ã€‚</strong></p><p><strong><code>Iterator</code>ç”šè‡³å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ— é™å¤§çš„æ•°æ®æµï¼Œä¾‹å¦‚å…¨ä½“è‡ªç„¶æ•°ã€‚è€Œä½¿ç”¨listæ˜¯æ°¸è¿œä¸å¯èƒ½å­˜å‚¨å…¨ä½“è‡ªç„¶æ•°çš„ã€‚</strong></p><h3 id="å°ç»“">å°ç»“</h3><p><strong>å‡¡æ˜¯å¯ä½œç”¨äº<code>for</code>å¾ªç¯çš„å¯¹è±¡éƒ½æ˜¯<code>Iterable</code>ç±»å‹ï¼›</strong></p><p><strong>å‡¡æ˜¯å¯ä½œç”¨äº<code>next()</code>å‡½æ•°çš„å¯¹è±¡éƒ½æ˜¯<code>Iterator</code>ç±»å‹ï¼Œå®ƒä»¬è¡¨ç¤ºä¸€ä¸ªæƒ°æ€§è®¡ç®—çš„åºåˆ—ï¼›</strong></p><p>é›†åˆæ•°æ®ç±»å‹å¦‚<code>list</code>ã€<code>dict</code>ã€<code>str</code>ç­‰æ˜¯<code>Iterable</code>ä½†ä¸æ˜¯<code>Iterator</code>ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡<code>iter()</code>å‡½æ•°è·å¾—ä¸€ä¸ª<code>Iterator</code>å¯¹è±¡ã€‚</p><p><strong>Pythonçš„<code>for</code>å¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨<code>next()</code>å‡½æ•°å®ç°çš„</strong>ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šå®Œå…¨ç­‰ä»·äºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆè·å¾—Iteratorå¯¹è±¡:</span></span><br><span class="line">it = <span class="built_in">iter</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"><span class="comment"># å¾ªç¯:</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># è·å¾—ä¸‹ä¸€ä¸ªå€¼:</span></span><br><span class="line">        x = <span class="built_in">next</span>(it)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        <span class="comment"># é‡åˆ°StopIterationå°±é€€å‡ºå¾ªç¯</span></span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><hr><h1>å‡½æ•°å¼ç¼–ç¨‹</h1><h2 id="é«˜é˜¶å‡½æ•°">é«˜é˜¶å‡½æ•°</h2><p>é«˜é˜¶å‡½æ•°è‹±æ–‡å«Higher-order functionã€‚ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿæˆ‘ä»¬ä»¥å®é™…ä»£ç ä¸ºä¾‹å­ï¼Œä¸€æ­¥ä¸€æ­¥æ·±å…¥æ¦‚å¿µã€‚</p><h3 id="å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°">å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°</h3><p>ä»¥Pythonå†…ç½®çš„æ±‚ç»å¯¹å€¼çš„å‡½æ•°<code>abs()</code>ä¸ºä¾‹ï¼Œè°ƒç”¨è¯¥å‡½æ•°ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">abs</span>(-<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœåªå†™<code>abs</code>å‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">abs</span></span><br><span class="line"><span class="comment"># &lt;built-in function abs&gt;</span></span><br></pre></td></tr></table></figure><p>å¯è§ï¼Œ<strong><code>abs(-10)</code>æ˜¯å‡½æ•°è°ƒç”¨ï¼Œè€Œ<code>abs</code>æ˜¯å‡½æ•°æœ¬èº«</strong>ã€‚</p><p>è¦è·å¾—å‡½æ•°è°ƒç”¨ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç»“æœèµ‹å€¼ç»™å˜é‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">abs</span>(-<span class="number">10</span>)</span><br><span class="line">x</span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœæŠŠå‡½æ•°æœ¬èº«èµ‹å€¼ç»™å˜é‡å‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">abs</span></span><br><span class="line">f</span><br><span class="line"><span class="comment"># &lt;built-in function abs&gt;</span></span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼š<strong>å‡½æ•°æœ¬èº«ä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œå³ï¼šå˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°</strong>ã€‚</p><p>å¦‚æœä¸€ä¸ªå˜é‡æŒ‡å‘äº†ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆï¼Œå¯å¦é€šè¿‡è¯¥å˜é‡æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Ÿç”¨ä»£ç éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">abs</span></span><br><span class="line">f(-<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸï¼è¯´æ˜å˜é‡<code>f</code>ç°åœ¨å·²ç»æŒ‡å‘äº†<code>abs</code>å‡½æ•°æœ¬èº«ã€‚ç›´æ¥è°ƒç”¨<code>abs()</code>å‡½æ•°å’Œè°ƒç”¨å˜é‡<code>f()</code>å®Œå…¨ç›¸åŒã€‚</p><h3 id="å‡½æ•°åä¹Ÿæ˜¯å˜é‡">å‡½æ•°åä¹Ÿæ˜¯å˜é‡</h3><p>é‚£ä¹ˆå‡½æ•°åæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<strong>å‡½æ•°åå…¶å®å°±æ˜¯æŒ‡å‘å‡½æ•°çš„å˜é‡</strong>ï¼å¯¹äº<code>abs()</code>è¿™ä¸ªå‡½æ•°ï¼Œå®Œå…¨å¯ä»¥æŠŠå‡½æ•°å<code>abs</code>çœ‹æˆå˜é‡ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå¯ä»¥è®¡ç®—ç»å¯¹å€¼çš„å‡½æ•°ï¼<strong>ï¼ˆæˆ–è€…å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å‡½æ•°åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼‰</strong></p><p>å¦‚æœæŠŠ<code>abs</code>æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œä¼šæœ‰ä»€ä¹ˆæƒ…å†µå‘ç”Ÿï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">abs</span> = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">abs</span>(-<span class="number">10</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">&#x27;int&#x27;</span> <span class="built_in">object</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="built_in">callable</span></span><br></pre></td></tr></table></figure><p>æŠŠ<code>abs</code>æŒ‡å‘<code>10</code>åï¼Œå°±æ— æ³•é€šè¿‡<code>abs(-10)</code>è°ƒç”¨è¯¥å‡½æ•°äº†ï¼å› ä¸º<code>abs</code>è¿™ä¸ªå˜é‡å·²ç»ä¸æŒ‡å‘æ±‚ç»å¯¹å€¼å‡½æ•°è€Œæ˜¯æŒ‡å‘ä¸€ä¸ªæ•´æ•°<code>10</code>ï¼</p><p>å½“ç„¶å®é™…ä»£ç ç»å¯¹ä¸èƒ½è¿™ä¹ˆå†™ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†è¯´æ˜å‡½æ•°åä¹Ÿæ˜¯å˜é‡ã€‚è¦æ¢å¤<code>abs</code>å‡½æ•°ï¼Œè¯·é‡å¯Pythonäº¤äº’ç¯å¢ƒã€‚</p><p>æ³¨ï¼šç”±äº<code>abs</code>å‡½æ•°å®é™…ä¸Šæ˜¯å®šä¹‰åœ¨<code>import builtins</code>æ¨¡å—ä¸­çš„ï¼Œæ‰€ä»¥è¦è®©ä¿®æ”¹<code>abs</code>å˜é‡çš„æŒ‡å‘åœ¨å…¶å®ƒæ¨¡å—ä¹Ÿç”Ÿæ•ˆï¼Œè¦ç”¨<code>import builtins; builtins.abs = 10</code>ã€‚</p><h3 id="ä¼ å…¥å‡½æ•°">ä¼ å…¥å‡½æ•°</h3><p>æ—¢ç„¶å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°èƒ½æ¥æ”¶å˜é‡ï¼Œé‚£ä¹ˆä¸€ä¸ªå‡½æ•°å°±å¯ä»¥æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ç§å‡½æ•°å°±ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p><p>ä¸€ä¸ªæœ€ç®€å•çš„é«˜é˜¶å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x, y, f</span>):</span></span><br><span class="line">    <span class="keyword">return</span> f(x) + f(y)</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è°ƒç”¨<code>add(-5, 6, abs)</code>æ—¶ï¼Œå‚æ•°<code>x</code>ï¼Œ<code>y</code>å’Œ<code>f</code>åˆ†åˆ«æ¥æ”¶<code>-5</code>ï¼Œ<code>6</code>å’Œ<code>abs</code>ï¼Œæ ¹æ®å‡½æ•°å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å¯¼è®¡ç®—è¿‡ç¨‹ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = -<span class="number">5</span></span><br><span class="line">y = <span class="number">6</span></span><br><span class="line">f = <span class="built_in">abs</span></span><br><span class="line">f(x) + f(y) ==&gt; <span class="built_in">abs</span>(-<span class="number">5</span>) + <span class="built_in">abs</span>(<span class="number">6</span>) ==&gt; <span class="number">11</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">11</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™é«˜é˜¶å‡½æ•°ï¼Œå°±æ˜¯è®©å‡½æ•°çš„å‚æ•°èƒ½å¤Ÿæ¥æ”¶åˆ«çš„å‡½æ•°ã€‚</p><h3 id="å°ç»“-2">å°ç»“</h3><p>æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•°ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯æŒ‡è¿™ç§é«˜åº¦æŠ½è±¡çš„ç¼–ç¨‹èŒƒå¼ã€‚</p><hr><h2 id="ä¸¾ä¾‹">ä¸¾ä¾‹</h2><h3 id="map-reduce">map()/reduce()</h3><p>Pythonå†…å»ºäº†<code>map()</code>å’Œ<code>reduce()</code>å‡½æ•°ã€‚ï¼ˆè¿™å¤§æ¦‚å°±æ˜¯å­—å…¸æ˜¯Dictionaryè€Œä¸æ˜¯Mapçš„åŸå› ï¼‰</p><p>å¦‚æœä½ è¯»è¿‡Googleçš„é‚£ç¯‡å¤§åé¼é¼çš„è®ºæ–‡â€œ<a href="http://research.google.com/archive/mapreduce.html">MapReduce: Simplified Data Processing on Large Clusters</a>â€ï¼Œä½ å°±èƒ½å¤§æ¦‚æ˜ç™½map/reduceçš„æ¦‚å¿µã€‚</p><h4 id="map">map()</h4><p><code>map()</code>å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯<code>Iterable</code>ï¼Œ<strong><code>map</code>å°†ä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æŠŠç»“æœä½œä¸ºæ–°çš„<code>Iterator</code>è¿”å›</strong>ã€‚</p><p>ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°f(x)=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œè¦æŠŠè¿™ä¸ªå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªlist <code>[1, 2, 3, 4, 5, 6, 7, 8, 9]</code>ä¸Šï¼Œå°±å¯ä»¥ç”¨<code>map()</code>å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">            f(x) = x * x</span><br><span class="line"></span><br><span class="line">                  â”‚</span><br><span class="line">                  â”‚</span><br><span class="line">  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”</span><br><span class="line">  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚</span><br><span class="line">  â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼</span><br><span class="line"></span><br><span class="line">[ 1   2   3   4   5   6   7   8   9 ]</span><br><span class="line"></span><br><span class="line">  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚</span><br><span class="line">  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚</span><br><span class="line">  â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼   â–¼</span><br><span class="line"></span><br><span class="line">[ 1   4   9  16  25  36  49  64  81 ]</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨Pythonä»£ç å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">     <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line"> r = <span class="built_in">map</span>(f, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"> <span class="built_in">list</span>(r)</span><br><span class="line"><span class="comment"># [1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span><br></pre></td></tr></table></figure><p><strong><code>map()</code>ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>f</code>ï¼Œå³å‡½æ•°å¯¹è±¡æœ¬èº«ã€‚ç”±äºç»“æœ<code>r</code>æ˜¯ä¸€ä¸ª<code>Iterator</code>ï¼Œ<code>Iterator</code>æ˜¯æƒ°æ€§åºåˆ—ï¼Œå› æ­¤é€šè¿‡<code>list()</code>å‡½æ•°è®©å®ƒæŠŠæ•´ä¸ªåºåˆ—éƒ½è®¡ç®—å‡ºæ¥å¹¶è¿”å›ä¸€ä¸ªlist</strong>ã€‚</p><p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸éœ€è¦<code>map()</code>å‡½æ•°ï¼Œå†™ä¸€ä¸ªå¾ªç¯ï¼Œä¹Ÿå¯ä»¥è®¡ç®—å‡ºç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">L = []</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]:</span><br><span class="line">    L.append(f(n))</span><br><span class="line"><span class="built_in">print</span>(L)</span><br></pre></td></tr></table></figure><p>çš„ç¡®å¯ä»¥ï¼Œä½†æ˜¯ï¼Œä»ä¸Šé¢çš„å¾ªç¯ä»£ç ï¼Œèƒ½ä¸€çœ¼çœ‹æ˜ç™½â€œæŠŠf(x)ä½œç”¨åœ¨listçš„æ¯ä¸€ä¸ªå…ƒç´ å¹¶æŠŠç»“æœç”Ÿæˆä¸€ä¸ªæ–°çš„listâ€å—ï¼Ÿ</p><p>æ‰€ä»¥ï¼Œ<code>map()</code>ä½œä¸ºé«˜é˜¶å‡½æ•°ï¼Œäº‹å®ä¸Šå®ƒæŠŠè¿ç®—è§„åˆ™æŠ½è±¡äº†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¸ä½†å¯ä»¥è®¡ç®—ç®€å•çš„f(x)=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>ï¼Œè¿˜å¯ä»¥è®¡ç®—ä»»æ„å¤æ‚çš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼ŒæŠŠè¿™ä¸ªlistæ‰€æœ‰æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]))</span><br><span class="line"><span class="comment"># [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;, &#x27;6&#x27;, &#x27;7&#x27;, &#x27;8&#x27;, &#x27;9&#x27;]</span></span><br></pre></td></tr></table></figure><p>åªéœ€è¦ä¸€è¡Œä»£ç ã€‚ï¼ˆstræ˜¯Pythonå†…ç½®å‡½æ•°ï¼‰</p><h4 id="reduce">reduce()</h4><p><strong><code>reduce</code>æŠŠä¸€ä¸ªå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªåºåˆ—<code>[x1, x2, x3, ...]</code>ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ<code>reduce</code>æŠŠç»“æœç»§ç»­å’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯ç§¯è®¡ç®—</strong>ï¼Œå…¶æ•ˆæœå°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)</span><br></pre></td></tr></table></figure><p>æ¯”æ–¹è¯´å¯¹ä¸€ä¸ªåºåˆ—æ±‚å’Œï¼Œå°±å¯ä»¥ç”¨<code>reduce</code>å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line">reduce(add, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line"><span class="comment"># 25</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶æ±‚å’Œè¿ç®—å¯ä»¥ç›´æ¥ç”¨Pythonå†…å»ºå‡½æ•°<code>sum()</code>ï¼Œæ²¡å¿…è¦åŠ¨ç”¨<code>reduce</code>ã€‚</p><p>ä½†æ˜¯å¦‚æœè¦æŠŠåºåˆ—<code>[1, 3, 5, 7, 9]</code>å˜æ¢æˆæ•´æ•°<code>13579</code>ï¼Œ<code>reduce</code>å°±å¯ä»¥æ´¾ä¸Šç”¨åœºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">10</span> + y</span><br><span class="line"></span><br><span class="line">reduce(fn, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line"><span class="comment"># 13579</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­æœ¬èº«æ²¡å¤šå¤§ç”¨å¤„ï¼Œä½†æ˜¯ï¼Œå¦‚æœè€ƒè™‘åˆ°å­—ç¬¦ä¸²<code>str</code>ä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—ï¼Œå¯¹ä¸Šé¢çš„ä¾‹å­ç¨åŠ æ”¹åŠ¨ï¼Œé…åˆ<code>map()</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºæŠŠ<code>str</code>è½¬æ¢ä¸º<code>int</code>çš„å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fn</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">10</span> + y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">char2num</span>(<span class="params">s</span>):</span></span><br><span class="line">    digits = &#123;<span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;1&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;3&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;4&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;5&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;6&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;7&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;8&#x27;</span>: <span class="number">8</span>, <span class="string">&#x27;9&#x27;</span>: <span class="number">9</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> digits[s]</span><br><span class="line"></span><br><span class="line">reduce(fn, <span class="built_in">map</span>(char2num, <span class="string">&#x27;13579&#x27;</span>))</span><br><span class="line"><span class="comment"># 13579</span></span><br></pre></td></tr></table></figure><p>æ•´ç†æˆä¸€ä¸ª<code>str2int</code>çš„å‡½æ•°å°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line">DIGITS = &#123;<span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;1&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;3&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;4&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;5&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;6&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;7&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;8&#x27;</span>: <span class="number">8</span>, <span class="string">&#x27;9&#x27;</span>: <span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">str2int</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span>(<span class="params">x, y</span>):</span></span><br><span class="line">        <span class="keyword">return</span> x * <span class="number">10</span> + y</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">char2num</span>(<span class="params">s</span>):</span></span><br><span class="line">        <span class="keyword">return</span> DIGITS[s]</span><br><span class="line">    <span class="keyword">return</span> reduce(fn, <span class="built_in">map</span>(char2num, s))</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ç”¨lambdaå‡½æ•°è¿›ä¸€æ­¥ç®€åŒ–æˆï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line">DIGITS = &#123;<span class="string">&#x27;0&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;1&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;3&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;4&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;5&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;6&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;7&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;8&#x27;</span>: <span class="number">8</span>, <span class="string">&#x27;9&#x27;</span>: <span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">char2num</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> DIGITS[s]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">str2int</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> reduce(<span class="keyword">lambda</span> x, y: x * <span class="number">10</span> + y, <span class="built_in">map</span>(char2num, s))</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾Pythonæ²¡æœ‰æä¾›<code>int()</code>å‡½æ•°ï¼Œä½ å®Œå…¨å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªæŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•´æ•°çš„å‡½æ•°ï¼Œè€Œä¸”åªéœ€è¦å‡ è¡Œä»£ç ï¼</p><h3 id="filter">filter()</h3><p>Pythonå†…å»ºçš„<code>filter()</code>å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ã€‚<strong>å’Œ<code>map()</code>ç±»ä¼¼ï¼Œ<code>filter()</code>ä¹Ÿæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåºåˆ—ã€‚å’Œ<code>map()</code>ä¸åŒçš„æ˜¯ï¼Œ<code>filter()</code>æŠŠä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨äºæ¯ä¸ªå…ƒç´ ï¼Œç„¶åæ ¹æ®è¿”å›å€¼æ˜¯<code>True</code>è¿˜æ˜¯<code>False</code>å†³å®šä¿ç•™è¿˜æ˜¯ä¸¢å¼ƒè¯¥å…ƒç´ </strong>ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªlistä¸­ï¼Œåˆ æ‰å¶æ•°ï¼Œåªä¿ç•™å¥‡æ•°ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>]))</span><br><span class="line"><span class="comment"># ç»“æœ: [1, 5, 9, 15]</span></span><br></pre></td></tr></table></figure><p>æŠŠä¸€ä¸ªåºåˆ—ä¸­çš„ç©ºå­—ç¬¦ä¸²åˆ æ‰ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">not_empty</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> s <span class="keyword">and</span> s.strip()</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">filter</span>(not_empty, [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="literal">None</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;  &#x27;</span>]))</span><br><span class="line"><span class="comment"># ç»“æœ: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]</span></span><br><span class="line"><span class="comment"># s.strip()ç”¨äºç§»é™¤å­—ç¬¦ä¸²å¤´å°¾æŒ‡å®šçš„å­—ç¬¦ï¼ˆä¸ä¼ å…¥å‚æ•°åˆ™é»˜è®¤ä¸ºç©ºæ ¼æˆ–æ¢è¡Œç¬¦ï¼‰æˆ–å­—ç¬¦åºåˆ—ã€‚</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šè¯¥æ–¹æ³•åªèƒ½åˆ é™¤å¼€å¤´æˆ–æ˜¯ç»“å°¾çš„å­—ç¬¦ï¼Œä¸èƒ½åˆ é™¤ä¸­é—´éƒ¨åˆ†çš„å­—ç¬¦ã€‚</span></span><br></pre></td></tr></table></figure><p>å¯è§ç”¨<code>filter()</code>è¿™ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå…³é”®åœ¨äºæ­£ç¡®å®ç°ä¸€ä¸ªâ€œç­›é€‰â€å‡½æ•°ã€‚</p><p><strong>æ³¨æ„åˆ°<code>filter()</code>å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª<code>Iterator</code>ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæƒ°æ€§åºåˆ—ï¼Œæ‰€ä»¥è¦å¼ºè¿«<code>filter()</code>å®Œæˆè®¡ç®—ç»“æœï¼Œéœ€è¦ç”¨<code>list()</code>å‡½æ•°è·å¾—æ‰€æœ‰ç»“æœå¹¶è¿”å›list</strong>ã€‚</p><h4 id="eg-ç”¨filteræ±‚ç´ æ•°">eg.ç”¨filteræ±‚ç´ æ•°</h4><p>è®¡ç®—<a href="http://baike.baidu.com/view/10626.htm">ç´ æ•°</a>çš„ä¸€ä¸ªæ–¹æ³•æ˜¯<a href="http://baike.baidu.com/view/3784258.htm">åŸƒæ°ç­›æ³•</a>ï¼Œå®ƒçš„ç®—æ³•ç†è§£èµ·æ¥éå¸¸ç®€å•ï¼š</p><p>é¦–å…ˆï¼Œåˆ—å‡ºä»<code>2</code>å¼€å§‹çš„æ‰€æœ‰è‡ªç„¶æ•°ï¼Œæ„é€ ä¸€ä¸ªåºåˆ—ï¼š</p><p>2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, â€¦</p><p>å–åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°<code>2</code>ï¼Œå®ƒä¸€å®šæ˜¯ç´ æ•°ï¼Œç„¶åç”¨<code>2</code>æŠŠåºåˆ—çš„<code>2</code>çš„å€æ•°ç­›æ‰ï¼š</p><p>3, <s>4</s>, 5, <s>6</s>, 7, <s>8</s>, 9, <s>10</s>, 11, <s>12</s>, 13, <s>14</s>, 15, <s>16</s>, 17, <s>18</s>, 19, <s>20</s>, â€¦</p><p>å–æ–°åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°<code>3</code>ï¼Œå®ƒä¸€å®šæ˜¯ç´ æ•°ï¼Œç„¶åç”¨<code>3</code>æŠŠåºåˆ—çš„<code>3</code>çš„å€æ•°ç­›æ‰ï¼š</p><p>5, <s>6</s>, 7, <s>8</s>, <s>9</s>, <s>10</s>, 11, <s>12</s>, 13, <s>14</s>, <s>15</s>, <s>16</s>, 17, <s>18</s>, 19, <s>20</s>, â€¦</p><p>å–æ–°åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°<code>5</code>ï¼Œç„¶åç”¨<code>5</code>æŠŠåºåˆ—çš„<code>5</code>çš„å€æ•°ç­›æ‰ï¼š</p><p>7, <s>8</s>, <s>9</s>, <s>10</s>, 11, <s>12</s>, 13, <s>14</s>, <s>15</s>, <s>16</s>, 17, <s>18</s>, 19, <s>20</s>, â€¦</p><p>ä¸æ–­ç­›ä¸‹å»ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„ç´ æ•°ã€‚</p><p>ç”¨Pythonæ¥å®ç°è¿™ä¸ªç®—æ³•ï¼Œå¯ä»¥å…ˆæ„é€ ä¸€ä¸ªä»<code>3</code>å¼€å§‹çš„å¥‡æ•°åºåˆ—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_odd_iter</span>():</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n = n + <span class="number">2</span></span><br><span class="line">        <span class="keyword">yield</span> n</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªæ— é™åºåˆ—ã€‚</p><p>ç„¶åå®šä¹‰ä¸€ä¸ªç­›é€‰å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_not_divisible</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: x % n &gt; <span class="number">0</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªç´ æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">primes</span>():</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    it = _odd_iter() <span class="comment"># åˆå§‹åºåˆ—</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n = <span class="built_in">next</span>(it) <span class="comment"># è¿”å›åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        it = <span class="built_in">filter</span>(_not_divisible(n), it) <span class="comment"># æ„é€ æ–°åºåˆ—</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç”Ÿæˆå™¨å…ˆè¿”å›ç¬¬ä¸€ä¸ªç´ æ•°<code>2</code>ï¼Œç„¶åï¼Œåˆ©ç”¨<code>filter()</code>ä¸æ–­äº§ç”Ÿç­›é€‰åçš„æ–°çš„åºåˆ—ã€‚</p><p>ç”±äº<code>primes()</code>ä¹Ÿæ˜¯ä¸€ä¸ªæ— é™åºåˆ—ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶éœ€è¦è®¾ç½®ä¸€ä¸ªé€€å‡ºå¾ªç¯çš„æ¡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å°1000ä»¥å†…çš„ç´ æ•°:</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> primes():</span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">1000</span>:</span><br><span class="line">        <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°<code>Iterator</code>æ˜¯æƒ°æ€§è®¡ç®—çš„åºåˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨Pythonè¡¨ç¤ºâ€œå…¨ä½“è‡ªç„¶æ•°â€ï¼Œâ€œå…¨ä½“ç´ æ•°â€è¿™æ ·çš„åºåˆ—ï¼Œè€Œä»£ç éå¸¸ç®€æ´ã€‚</p><h3 id="sorted">sorted</h3><p>æ’åºä¹Ÿæ˜¯åœ¨ç¨‹åºä¸­ç»å¸¸ç”¨åˆ°çš„ç®—æ³•ã€‚æ— è®ºä½¿ç”¨å†’æ³¡æ’åºè¿˜æ˜¯å¿«é€Ÿæ’åºï¼Œæ’åºçš„æ ¸å¿ƒæ˜¯æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„å¤§å°ã€‚å¦‚æœæ˜¯æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¯”è¾ƒï¼Œä½†å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…ä¸¤ä¸ªdictå‘¢ï¼Ÿç›´æ¥æ¯”è¾ƒæ•°å­¦ä¸Šçš„å¤§å°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤ï¼Œæ¯”è¾ƒçš„è¿‡ç¨‹å¿…é¡»é€šè¿‡å‡½æ•°æŠ½è±¡å‡ºæ¥ã€‚</p><p>Pythonå†…ç½®çš„<code>sorted()</code>å‡½æ•°å°±å¯ä»¥å¯¹listè¿›è¡Œæ’åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>([<span class="number">36</span>, <span class="number">5</span>, -<span class="number">12</span>, <span class="number">9</span>, -<span class="number">21</span>])</span><br><span class="line"><span class="comment"># [-21, -12, 5, 9, 36]</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œ<code>sorted()</code>å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°**ï¼Œå®ƒè¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ª<code>key</code>å‡½æ•°æ¥å®ç°è‡ªå®šä¹‰çš„æ’åº**ï¼Œä¾‹å¦‚æŒ‰ç»å¯¹å€¼å¤§å°æ’åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>([<span class="number">36</span>, <span class="number">5</span>, -<span class="number">12</span>, <span class="number">9</span>, -<span class="number">21</span>], key=<span class="built_in">abs</span>)</span><br><span class="line"><span class="comment"># [5, 9, -12, -21, 36]</span></span><br></pre></td></tr></table></figure><p><strong>keyæŒ‡å®šçš„å‡½æ•°å°†ä½œç”¨äºlistçš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶æ ¹æ®keyå‡½æ•°è¿”å›çš„ç»“æœè¿›è¡Œæ’åº</strong>ã€‚å¯¹æ¯”åŸå§‹çš„listå’Œç»è¿‡<code>key=abs</code>å¤„ç†è¿‡çš„listï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">36</span>, <span class="number">5</span>, -<span class="number">12</span>, <span class="number">9</span>, -<span class="number">21</span>]</span><br><span class="line"></span><br><span class="line">keys = [<span class="number">36</span>, <span class="number">5</span>,  <span class="number">12</span>, <span class="number">9</span>,  <span class="number">21</span>]</span><br></pre></td></tr></table></figure><p>ç„¶å<code>sorted()</code>å‡½æ•°æŒ‰ç…§keysè¿›è¡Œæ’åºï¼Œå¹¶æŒ‰ç…§å¯¹åº”å…³ç³»è¿”å›listç›¸åº”çš„å…ƒç´ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keysæ’åºç»“æœ =&gt; [5, 9,  12,  21, 36]</span><br><span class="line">                |  |    |    |   |</span><br><span class="line">æœ€ç»ˆç»“æœ     =&gt; [5, 9, -12, -21, 36]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªå­—ç¬¦ä¸²æ’åºçš„ä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>([<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;about&#x27;</span>, <span class="string">&#x27;Zoo&#x27;</span>, <span class="string">&#x27;Credit&#x27;</span>])</span><br><span class="line"><span class="comment"># [&#x27;Credit&#x27;, &#x27;Zoo&#x27;, &#x27;about&#x27;, &#x27;bob&#x27;]</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹å­—ç¬¦ä¸²æ’åºï¼Œæ˜¯æŒ‰ç…§ASCIIçš„å¤§å°æ¯”è¾ƒçš„ï¼Œç”±äº<code>'Z' &lt; 'a'</code>ï¼Œç»“æœï¼Œå¤§å†™å­—æ¯<code>Z</code>ä¼šæ’åœ¨å°å†™å­—æ¯<code>a</code>çš„å‰é¢ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æå‡ºæ’åºåº”è¯¥å¿½ç•¥å¤§å°å†™ï¼ŒæŒ‰ç…§å­—æ¯åºæ’åºã€‚è¦å®ç°è¿™ä¸ªç®—æ³•ï¼Œä¸å¿…å¯¹ç°æœ‰ä»£ç å¤§åŠ æ”¹åŠ¨ï¼Œåªè¦æˆ‘ä»¬èƒ½ç”¨ä¸€ä¸ªkeyå‡½æ•°æŠŠå­—ç¬¦ä¸²æ˜ å°„ä¸ºå¿½ç•¥å¤§å°å†™æ’åºå³å¯ã€‚å¿½ç•¥å¤§å°å†™æ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå®é™…ä¸Šå°±æ˜¯å…ˆæŠŠå­—ç¬¦ä¸²éƒ½å˜æˆå¤§å†™ï¼ˆæˆ–è€…éƒ½å˜æˆå°å†™ï¼‰ï¼Œå†æ¯”è¾ƒã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬ç»™<code>sorted</code>ä¼ å…¥keyå‡½æ•°ï¼Œå³å¯å®ç°å¿½ç•¥å¤§å°å†™çš„æ’åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>([<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;about&#x27;</span>, <span class="string">&#x27;Zoo&#x27;</span>, <span class="string">&#x27;Credit&#x27;</span>], key=<span class="built_in">str</span>.lower)</span><br><span class="line"><span class="comment"># [&#x27;about&#x27;, &#x27;bob&#x27;, &#x27;Credit&#x27;, &#x27;Zoo&#x27;]</span></span><br></pre></td></tr></table></figure><p>è¦è¿›è¡Œåå‘æ’åºï¼Œä¸å¿…æ”¹åŠ¨keyå‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°<code>reverse=True</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>([<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;about&#x27;</span>, <span class="string">&#x27;Zoo&#x27;</span>, <span class="string">&#x27;Credit&#x27;</span>], key=<span class="built_in">str</span>.lower, reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># [&#x27;Zoo&#x27;, &#x27;Credit&#x27;, &#x27;bob&#x27;, &#x27;about&#x27;]</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œé«˜é˜¶å‡½æ•°çš„æŠ½è±¡èƒ½åŠ›æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œè€Œä¸”ï¼Œæ ¸å¿ƒä»£ç å¯ä»¥ä¿æŒå¾—éå¸¸ç®€æ´ã€‚</p><h2 id="è¿”å›å‡½æ•°">è¿”å›å‡½æ•°</h2><h3 id="å‡½æ•°ä½œä¸ºè¿”å›å€¼">å‡½æ•°ä½œä¸ºè¿”å›å€¼</h3><p>é«˜é˜¶å‡½æ•°é™¤äº†å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç»“æœå€¼è¿”å›ã€‚</p><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¯å˜å‚æ•°çš„æ±‚å’Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ±‚å’Œçš„å‡½æ•°æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc_sum</span>(<span class="params">*args</span>):</span></span><br><span class="line">    ax = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        ax = ax + n</span><br><span class="line">    <span class="keyword">return</span> ax</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœä¸éœ€è¦ç«‹åˆ»æ±‚å’Œï¼Œè€Œæ˜¯åœ¨åé¢çš„ä»£ç ä¸­ï¼Œæ ¹æ®éœ€è¦å†è®¡ç®—æ€ä¹ˆåŠï¼Ÿå¯ä»¥ä¸è¿”å›æ±‚å’Œçš„ç»“æœï¼Œè€Œæ˜¯è¿”å›æ±‚å’Œçš„å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lazy_sum</span>(<span class="params">*args</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span>():</span></span><br><span class="line">        ax = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">            ax = ax + n</span><br><span class="line">        <span class="keyword">return</span> ax</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è°ƒç”¨<code>lazy_sum()</code>æ—¶ï¼Œè¿”å›çš„å¹¶ä¸æ˜¯æ±‚å’Œç»“æœï¼Œè€Œæ˜¯æ±‚å’Œå‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line">f</span><br><span class="line"><span class="comment"># &lt;function lazy_sum.&lt;locals&gt;.sum at 0x101c6ed90&gt;</span></span><br></pre></td></tr></table></figure><p>è°ƒç”¨å‡½æ•°<code>f</code>æ—¶ï¼Œæ‰çœŸæ­£è®¡ç®—æ±‚å’Œçš„ç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f()</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°<code>lazy_sum</code>ä¸­åˆå®šä¹‰äº†å‡½æ•°<code>sum</code>ï¼Œå¹¶ä¸”ï¼Œå†…éƒ¨å‡½æ•°<code>sum</code>å¯ä»¥å¼•ç”¨å¤–éƒ¨å‡½æ•°<code>lazy_sum</code>çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼Œå½“<code>lazy_sum</code>è¿”å›å‡½æ•°<code>sum</code>æ—¶ï¼Œç›¸å…³å‚æ•°å’Œå˜é‡éƒ½ä¿å­˜åœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œè¿™ç§ç§°ä¸ºâ€œé—­åŒ…ï¼ˆClosureï¼‰â€çš„ç¨‹åºç»“æ„æ‹¥æœ‰æå¤§çš„å¨åŠ›ã€‚</p><p>è¯·å†æ³¨æ„ä¸€ç‚¹ï¼Œå½“æˆ‘ä»¬è°ƒç”¨<code>lazy_sum()</code>æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³ä½¿ä¼ å…¥ç›¸åŒçš„å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1 = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2 = lazy_sum(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1==f2</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure><p><code>f1()</code>å’Œ<code>f2()</code>çš„è°ƒç”¨ç»“æœäº’ä¸å½±å“ã€‚</p><h3 id="é—­åŒ…">é—­åŒ…</h3><p>æ³¨æ„åˆ°è¿”å›çš„å‡½æ•°åœ¨å…¶å®šä¹‰å†…éƒ¨å¼•ç”¨äº†å±€éƒ¨å˜é‡<code>args</code>ï¼Œæ‰€ä»¥ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªå‡½æ•°åï¼Œå…¶å†…éƒ¨çš„å±€éƒ¨å˜é‡è¿˜è¢«æ–°å‡½æ•°å¼•ç”¨ï¼Œæ‰€ä»¥ï¼Œé—­åŒ…ç”¨èµ·æ¥ç®€å•ï¼Œå®ç°èµ·æ¥å¯ä¸å®¹æ˜“ã€‚</p><p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œ<strong>è¿”å›çš„å‡½æ•°å¹¶æ²¡æœ‰ç«‹åˆ»æ‰§è¡Œï¼Œè€Œæ˜¯ç›´åˆ°è°ƒç”¨äº†<code>f()</code>æ‰æ‰§è¡Œ</strong>ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span>():</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ¯æ¬¡å¾ªç¯ï¼Œéƒ½åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç„¶åï¼ŒæŠŠåˆ›å»ºçš„3ä¸ªå‡½æ•°éƒ½è¿”å›äº†ã€‚</p><p>ä½ å¯èƒ½è®¤ä¸ºè°ƒç”¨<code>f1()</code>ï¼Œ<code>f2()</code>å’Œ<code>f3()</code>ç»“æœåº”è¯¥æ˜¯<code>1</code>ï¼Œ<code>4</code>ï¼Œ<code>9</code>ï¼Œä½†å®é™…ç»“æœæ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure><p>å…¨éƒ¨éƒ½æ˜¯<code>9</code>ï¼åŸå› å°±åœ¨äºè¿”å›çš„å‡½æ•°å¼•ç”¨äº†å˜é‡<code>i</code>ï¼Œä½†å®ƒå¹¶éç«‹åˆ»æ‰§è¡Œã€‚ç­‰åˆ°3ä¸ªå‡½æ•°éƒ½è¿”å›æ—¶ï¼Œå®ƒä»¬æ‰€å¼•ç”¨çš„å˜é‡<code>i</code>å·²ç»å˜æˆäº†<code>3</code>ï¼Œå› æ­¤æœ€ç»ˆç»“æœä¸º<code>9</code>ã€‚</p><p><strong>è¿”å›é—­åŒ…æ—¶ç‰¢è®°ä¸€ç‚¹ï¼šè¿”å›å‡½æ•°ä¸è¦å¼•ç”¨ä»»ä½•å¾ªç¯å˜é‡ï¼Œæˆ–è€…åç»­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡</strong>ã€‚</p><p>å¦‚æœä¸€å®šè¦å¼•ç”¨å¾ªç¯å˜é‡æ€ä¹ˆåŠï¼Ÿæ–¹æ³•æ˜¯å†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨è¯¥å‡½æ•°çš„å‚æ•°ç»‘å®šå¾ªç¯å˜é‡å½“å‰çš„å€¼ï¼Œæ— è®ºè¯¥å¾ªç¯å˜é‡åç»­å¦‚ä½•æ›´æ”¹ï¼Œå·²ç»‘å®šåˆ°å‡½æ•°å‚æ•°çš„å€¼ä¸å˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">j</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">g</span>():</span></span><br><span class="line">            <span class="keyword">return</span> j*j</span><br><span class="line">        <span class="keyword">return</span> g</span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        fs.append(f(i)) <span class="comment"># f(i)ç«‹åˆ»è¢«æ‰§è¡Œï¼Œå› æ­¤içš„å½“å‰å€¼è¢«ä¼ å…¥f()</span></span><br><span class="line">    <span class="keyword">return</span> fs</span><br></pre></td></tr></table></figure><p>å†çœ‹çœ‹ç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1, f2, f3 = count()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹æ˜¯ä»£ç è¾ƒé•¿ï¼Œå¯åˆ©ç”¨lambdaå‡½æ•°ç¼©çŸ­ä»£ç ã€‚</p><h3 id="nonlocal">nonlocal</h3><p>ä½¿ç”¨é—­åŒ…ï¼Œå°±æ˜¯å†…å±‚å‡½æ•°å¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚å¦‚æœåªæ˜¯è¯»å¤–å±‚å˜é‡çš„å€¼ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿”å›çš„é—­åŒ…å‡½æ•°è°ƒç”¨ä¸€åˆ‡æ­£å¸¸ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inc</span>():</span></span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span>():</span></span><br><span class="line">        <span class="comment"># ä»…è¯»å–xçš„å€¼:</span></span><br><span class="line">        <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line">f = inc()</span><br><span class="line"><span class="built_in">print</span>(f()) <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(f()) <span class="comment"># 1</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœå¯¹å¤–å±‚å˜é‡èµ‹å€¼ï¼Œç”±äºPythonè§£é‡Šå™¨ä¼šæŠŠ<code>x</code>å½“ä½œå‡½æ•°<code>fn()</code>çš„å±€éƒ¨å˜é‡ï¼Œå®ƒä¼šæŠ¥é”™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inc</span>():</span></span><br><span class="line">    x = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span>():</span></span><br><span class="line">        <span class="comment"># nonlocal x</span></span><br><span class="line">        x = x + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line">f = inc()</span><br><span class="line"><span class="built_in">print</span>(f()) <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">print</span>(f()) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure><p>åŸå› æ˜¯<code>x</code>ä½œä¸ºå±€éƒ¨å˜é‡å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œç›´æ¥è®¡ç®—<code>x+1</code>æ˜¯ä¸è¡Œçš„ã€‚ä½†æˆ‘ä»¬å…¶å®æ˜¯æƒ³å¼•ç”¨<code>inc()</code>å‡½æ•°å†…éƒ¨çš„<code>x</code>ï¼Œæ‰€ä»¥éœ€è¦åœ¨<code>fn()</code>å‡½æ•°å†…éƒ¨åŠ ä¸€ä¸ª<code>nonlocal x</code>çš„å£°æ˜ã€‚åŠ ä¸Šè¿™ä¸ªå£°æ˜åï¼Œè§£é‡Šå™¨æŠŠ<code>fn()</code>çš„<code>x</code>çœ‹ä½œå¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œå®ƒå·²ç»è¢«åˆå§‹åŒ–äº†ï¼Œå¯ä»¥æ­£ç¡®è®¡ç®—<code>x+1</code>ã€‚</p><p><strong>ä½¿ç”¨é—­åŒ…æ—¶ï¼Œå¯¹å¤–å±‚å˜é‡èµ‹å€¼å‰ï¼Œéœ€è¦å…ˆä½¿ç”¨nonlocalå£°æ˜è¯¥å˜é‡ä¸æ˜¯å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡</strong>ã€‚</p><h2 id="åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</h2><p>å½“æˆ‘ä»¬åœ¨ä¼ å…¥å‡½æ•°æ—¶ï¼Œæœ‰äº›æ—¶å€™ï¼Œä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å‡½æ•°ï¼Œç›´æ¥ä¼ å…¥åŒ¿åå‡½æ•°æ›´æ–¹ä¾¿ã€‚</p><p>åœ¨Pythonä¸­ï¼Œå¯¹åŒ¿åå‡½æ•°æä¾›äº†æœ‰é™æ”¯æŒã€‚è¿˜æ˜¯ä»¥<code>map()</code>å‡½æ•°ä¸ºä¾‹ï¼Œè®¡ç®—f(x)=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>æ—¶ï¼Œé™¤äº†å®šä¹‰ä¸€ä¸ª<code>f(x)</code>çš„å‡½æ•°å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¼ å…¥åŒ¿åå‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x * x, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]))</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br></pre></td></tr></table></figure><p>é€šè¿‡å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼ŒåŒ¿åå‡½æ•°<code>lambda x: x * x</code>å®é™…ä¸Šå°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * x</span><br></pre></td></tr></table></figure><p><strong>å…³é”®å­—<code>lambda</code>è¡¨ç¤ºåŒ¿åå‡½æ•°ï¼Œå†’å·å‰é¢çš„<code>x</code>è¡¨ç¤ºå‡½æ•°å‚æ•°ã€‚</strong></p><p><strong>åŒ¿åå‡½æ•°æœ‰ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸ç”¨å†™<code>return</code>ï¼Œè¿”å›å€¼å°±æ˜¯è¯¥è¡¨è¾¾å¼çš„ç»“æœã€‚</strong></p><p><strong>ç”¨åŒ¿åå‡½æ•°æœ‰ä¸ªå¥½å¤„ï¼Œå› ä¸ºå‡½æ•°æ²¡æœ‰åå­—ï¼Œä¸å¿…æ‹…å¿ƒå‡½æ•°åå†²çªã€‚æ­¤å¤–ï¼ŒåŒ¿åå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†åˆ©ç”¨å˜é‡æ¥è°ƒç”¨è¯¥å‡½æ•°</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="keyword">lambda</span> x: x * x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f</span><br><span class="line">&lt;function &lt;<span class="keyword">lambda</span>&gt; at <span class="number">0x101c6ef28</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f(<span class="number">5</span>)</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°ä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span>: x * x + y * y</span><br></pre></td></tr></table></figure><h2 id="è£…é¥°å™¨ï¼ˆç±»ä¼¼æ³¨è§£ï¼‰">è£…é¥°å™¨ï¼ˆç±»ä¼¼æ³¨è§£ï¼‰</h2><p>ç”±äºå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å‡½æ•°å¯¹è±¡å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡ï¼Œæ‰€ä»¥ï¼Œé€šè¿‡å˜é‡ä¹Ÿèƒ½è°ƒç”¨è¯¥å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;2015-3-25&#x27;</span>)</span><br><span class="line">...</span><br><span class="line">f = now</span><br><span class="line">f()</span><br><span class="line"><span class="comment"># 2015-3-25</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°å¯¹è±¡æœ‰ä¸€ä¸ª<code>__name__</code>å±æ€§ï¼Œå¯ä»¥æ‹¿åˆ°å‡½æ•°çš„åå­—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now.__name__</span><br><span class="line"><span class="string">&#x27;now&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.__name__</span><br><span class="line"><span class="string">&#x27;now&#x27;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬è¦å¢å¼º<code>now()</code>å‡½æ•°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼Œåœ¨å‡½æ•°è°ƒç”¨å‰åè‡ªåŠ¨æ‰“å°æ—¥å¿—ï¼Œä½†åˆä¸å¸Œæœ›ä¿®æ”¹<code>now()</code>å‡½æ•°çš„å®šä¹‰ï¼Œ<strong>è¿™ç§åœ¨ä»£ç è¿è¡ŒæœŸé—´åŠ¨æ€å¢åŠ åŠŸèƒ½çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸ºâ€œè£…é¥°å™¨â€ï¼ˆDecoratorï¼‰</strong>ã€‚</p><p>æœ¬è´¨ä¸Šï¼Œdecoratorå°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªèƒ½æ‰“å°æ—¥å¿—çš„decoratorï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kw</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;call %s():&#x27;</span> % func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿä¸Šé¢çš„<code>log</code>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªdecoratorï¼Œæ‰€ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬è¦å€ŸåŠ©Pythonçš„@è¯­æ³•ï¼ŒæŠŠdecoratorç½®äºå‡½æ•°çš„å®šä¹‰å¤„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;2015-3-25&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è°ƒç”¨<code>now()</code>å‡½æ•°ï¼Œä¸ä»…ä¼šè¿è¡Œ<code>now()</code>å‡½æ•°æœ¬èº«ï¼Œè¿˜ä¼šåœ¨è¿è¡Œ<code>now()</code>å‡½æ•°å‰æ‰“å°ä¸€è¡Œæ—¥å¿—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now()</span><br><span class="line">call now():</span><br><span class="line"><span class="number">2015</span>-<span class="number">3</span>-<span class="number">25</span></span><br></pre></td></tr></table></figure><p>æŠŠ<code>@log</code>æ”¾åˆ°<code>now()</code>å‡½æ•°çš„å®šä¹‰å¤„ï¼Œç›¸å½“äºæ‰§è¡Œäº†è¯­å¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now = log(now)</span><br></pre></td></tr></table></figure><p>ç”±äº<code>log()</code>æ˜¯ä¸€ä¸ªdecoratorï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ï¼ŒåŸæ¥çš„<code>now()</code>å‡½æ•°ä»ç„¶å­˜åœ¨ï¼Œåªæ˜¯ç°åœ¨åŒåçš„<code>now</code>å˜é‡æŒ‡å‘äº†æ–°çš„å‡½æ•°ï¼Œäºæ˜¯è°ƒç”¨<code>now()</code>å°†æ‰§è¡Œæ–°å‡½æ•°ï¼Œå³åœ¨<code>log()</code>å‡½æ•°ä¸­è¿”å›çš„<code>wrapper()</code>å‡½æ•°ã€‚</p><p><code>wrapper()</code>å‡½æ•°çš„å‚æ•°å®šä¹‰æ˜¯<code>(*args, **kw)</code>ï¼Œå› æ­¤ï¼Œ<code>wrapper()</code>å‡½æ•°å¯ä»¥æ¥å—ä»»æ„å‚æ•°çš„è°ƒç”¨ã€‚åœ¨<code>wrapper()</code>å‡½æ•°å†…ï¼Œé¦–å…ˆæ‰“å°æ—¥å¿—ï¼Œå†ç´§æ¥ç€è°ƒç”¨åŸå§‹å‡½æ•°ã€‚</p><p>å¦‚æœdecoratoræœ¬èº«éœ€è¦ä¼ å…¥å‚æ•°ï¼Œé‚£å°±éœ€è¦ç¼–å†™ä¸€ä¸ªè¿”å›decoratorçš„é«˜é˜¶å‡½æ•°ï¼Œå†™å‡ºæ¥ä¼šæ›´å¤æ‚ã€‚æ¯”å¦‚ï¼Œè¦è‡ªå®šä¹‰logçš„æ–‡æœ¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">text</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kw</span>):</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s %s():&#x27;</span> % (text, func.__name__))</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª3å±‚åµŒå¥—çš„decoratorç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@log(<span class="params"><span class="string">&#x27;execute&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;2015-3-25&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now()</span><br><span class="line">execute now():</span><br><span class="line"><span class="number">2015</span>-<span class="number">3</span>-<span class="number">25</span></span><br></pre></td></tr></table></figure><p>å’Œä¸¤å±‚åµŒå¥—çš„decoratorç›¸æ¯”ï¼Œ3å±‚åµŒå¥—çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now = log(<span class="string">&#x27;execute&#x27;</span>)(now)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥å‰–æä¸Šé¢çš„è¯­å¥ï¼Œé¦–å…ˆæ‰§è¡Œ<code>log('execute')</code>ï¼Œè¿”å›çš„æ˜¯<code>decorator</code>å‡½æ•°ï¼Œå†è°ƒç”¨è¿”å›çš„å‡½æ•°ï¼Œå‚æ•°æ˜¯<code>now</code>å‡½æ•°ï¼Œè¿”å›å€¼æœ€ç»ˆæ˜¯<code>wrapper</code>å‡½æ•°ã€‚</p><p>ä»¥ä¸Šä¸¤ç§decoratorçš„å®šä¹‰éƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†è¿˜å·®æœ€åä¸€æ­¥ã€‚å› ä¸ºæˆ‘ä»¬è®²äº†å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå®ƒæœ‰<code>__name__</code>ç­‰å±æ€§ï¼Œä½†ä½ å»çœ‹ç»è¿‡decoratorè£…é¥°ä¹‹åçš„å‡½æ•°ï¼Œå®ƒä»¬çš„<code>__name__</code>å·²ç»ä»åŸæ¥çš„<code>'now'</code>å˜æˆäº†<code>'wrapper'</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>now.__name__</span><br><span class="line"><span class="string">&#x27;wrapper&#x27;</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿”å›çš„é‚£ä¸ª<code>wrapper()</code>å‡½æ•°åå­—å°±æ˜¯<code>'wrapper'</code>ï¼Œæ‰€ä»¥ï¼Œéœ€è¦æŠŠåŸå§‹å‡½æ•°çš„<code>__name__</code>ç­‰å±æ€§å¤åˆ¶åˆ°<code>wrapper()</code>å‡½æ•°ä¸­ï¼Œå¦åˆ™ï¼Œæœ‰äº›ä¾èµ–å‡½æ•°ç­¾åçš„ä»£ç æ‰§è¡Œå°±ä¼šå‡ºé”™ã€‚</p><p>ä¸éœ€è¦ç¼–å†™<code>wrapper.__name__ = func.__name__</code>è¿™æ ·çš„ä»£ç ï¼ŒPythonå†…ç½®çš„<code>functools.wraps</code>å°±æ˜¯å¹²è¿™ä¸ªäº‹çš„ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„decoratorçš„å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kw</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;call %s():&#x27;</span> % func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><p>æˆ–è€…é’ˆå¯¹å¸¦å‚æ•°çš„decoratorï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">text</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">        @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kw</span>):</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s %s():&#x27;</span> % (text, func.__name__))</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br></pre></td></tr></table></figure><p><code>import functools</code>æ˜¯å¯¼å…¥<code>functools</code>æ¨¡å—ã€‚æ¨¡å—çš„æ¦‚å¿µç¨å€™è®²è§£ã€‚ç°åœ¨ï¼Œåªéœ€è®°ä½åœ¨å®šä¹‰<code>wrapper()</code>çš„å‰é¢åŠ ä¸Š<code>@functools.wraps(func)</code>å³å¯ã€‚</p><h2 id="åå‡½æ•°">åå‡½æ•°</h2><p>å½“å‡½æ•°çš„å‚æ•°ä¸ªæ•°å¤ªå¤šï¼Œéœ€è¦ç®€åŒ–æ—¶ï¼Œä½¿ç”¨<code>functools.partial</code>å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°å¯ä»¥å›ºå®šä½åŸå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œä»è€Œåœ¨è°ƒç”¨æ—¶æ›´ç®€å•ã€‚</p><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017454145929440">https://www.liaoxuefeng.com/wiki/1016959663602400/1017454145929440</a></p><h1>æ¨¡å—</h1><p><strong>(äº†è§£å‰åŠéƒ¨åˆ†å³å¯)</strong></p><h2 id="å®šä¹‰">å®šä¹‰</h2><p>ä¸ºäº†ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠå¾ˆå¤šå‡½æ•°åˆ†ç»„ï¼Œåˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«çš„ä»£ç å°±ç›¸å¯¹è¾ƒå°‘ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½é‡‡ç”¨è¿™ç§ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚<strong>åœ¨Pythonä¸­ï¼Œä¸€ä¸ª.pyæ–‡ä»¶å°±ç§°ä¹‹ä¸ºä¸€ä¸ªæ¨¡å—ï¼ˆModuleï¼‰</strong>ã€‚</p><p>ä½¿ç”¨æ¨¡å—æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>æœ€å¤§çš„å¥½å¤„æ˜¯å¤§å¤§æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚å…¶æ¬¡ï¼Œç¼–å†™ä»£ç ä¸å¿…ä»é›¶å¼€å§‹ã€‚å½“ä¸€ä¸ªæ¨¡å—ç¼–å†™å®Œæ¯•ï¼Œå°±å¯ä»¥è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¹Ÿç»å¸¸å¼•ç”¨å…¶ä»–æ¨¡å—ï¼ŒåŒ…æ‹¬Pythonå†…ç½®çš„æ¨¡å—å’Œæ¥è‡ªç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€‚</p><p>ä½¿ç”¨æ¨¡å—è¿˜å¯ä»¥<strong>é¿å…å‡½æ•°åå’Œå˜é‡åå†²çª</strong>ã€‚<strong>ç›¸åŒåå­—çš„å‡½æ•°å’Œå˜é‡å®Œå…¨å¯ä»¥åˆ†åˆ«å­˜åœ¨ä¸åŒçš„æ¨¡å—ä¸­</strong>ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è‡ªå·±åœ¨ç¼–å†™æ¨¡å—æ—¶ï¼Œä¸å¿…è€ƒè™‘åå­—ä¼šä¸å…¶ä»–æ¨¡å—å†²çªã€‚<strong>ä½†æ˜¯ä¹Ÿè¦æ³¨æ„ï¼Œå°½é‡ä¸è¦ä¸å†…ç½®å‡½æ•°åå­—å†²çª</strong>ã€‚ç‚¹<a href="http://docs.python.org/3/library/functions.html">è¿™é‡Œ</a>æŸ¥çœ‹Pythonçš„æ‰€æœ‰å†…ç½®å‡½æ•°ã€‚</p><p>ä½ ä¹Ÿè®¸è¿˜æƒ³åˆ°ï¼Œå¦‚æœä¸åŒçš„äººç¼–å†™çš„æ¨¡å—åç›¸åŒæ€ä¹ˆåŠï¼Ÿä¸ºäº†é¿å…æ¨¡å—åå†²çªï¼ŒPythonåˆå¼•å…¥äº†æŒ‰ç›®å½•æ¥ç»„ç»‡æ¨¡å—çš„æ–¹æ³•ï¼Œç§°ä¸ºåŒ…ï¼ˆPackageï¼‰ã€‚å¼•å…¥äº†åŒ…ä»¥åï¼Œåªè¦é¡¶å±‚çš„åŒ…åä¸ä¸åˆ«äººå†²çªï¼Œé‚£æ‰€æœ‰æ¨¡å—éƒ½ä¸ä¼šä¸åˆ«äººå†²çªã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ª<code>abc.py</code>çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªåå­—å«<code>abc</code>çš„æ¨¡å—ï¼Œä¸€ä¸ª<code>xyz.py</code>çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªåå­—å«<code>xyz</code>çš„æ¨¡å—ã€‚</p><p>ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬çš„<code>abc</code>å’Œ<code>xyz</code>è¿™ä¸¤ä¸ªæ¨¡å—åå­—ä¸å…¶ä»–æ¨¡å—å†²çªäº†ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ…æ¥ç»„ç»‡æ¨¡å—ï¼Œé¿å…å†²çªã€‚æ–¹æ³•æ˜¯é€‰æ‹©ä¸€ä¸ªé¡¶å±‚åŒ…åï¼Œæ¯”å¦‚<code>mycompany</code>ï¼ŒæŒ‰ç…§å¦‚ä¸‹ç›®å½•å­˜æ”¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mycompany</span><br><span class="line">â”œâ”€ __init__.py</span><br><span class="line">â”œâ”€ abc.py</span><br><span class="line">â””â”€ xyz.py</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œ<code>abc.py</code>æ¨¡å—çš„åå­—å°±å˜æˆäº†<code>mycompany.abc</code>ï¼Œç±»ä¼¼çš„ï¼Œ<code>xyz.py</code>çš„æ¨¡å—åå˜æˆäº†<code>mycompany.xyz</code>ã€‚</p><p><strong>è¯·æ³¨æ„ï¼Œæ¯ä¸€ä¸ªåŒ…ç›®å½•ä¸‹é¢éƒ½ä¼šæœ‰ä¸€ä¸ª<code>__init__.py</code>çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå¦åˆ™ï¼ŒPythonå°±æŠŠè¿™ä¸ªç›®å½•å½“æˆæ™®é€šç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŒ…</strong>ã€‚<code>__init__.py</code>å¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰Pythonä»£ç ï¼Œå› ä¸º<code>__init__.py</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè€Œå®ƒçš„æ¨¡å—åå°±æ˜¯<code>mycompany</code>ã€‚</p><hr><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ python æ ‡å‡†åº“ä¸­æ¨¡å—çš„ä¾‹å­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å‘½ä»¤è¡Œå‚æ•°å¦‚ä¸‹:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> sys.argv:</span><br><span class="line">   <span class="built_in">print</span>(i)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n\nPython è·¯å¾„ä¸ºï¼š&#x27;</span>, sys.path, <span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤è¡Œå‚æ•°å¦‚ä¸‹:</span><br><span class="line">using_sys.py</span><br><span class="line">å‚æ•°<span class="number">1</span></span><br><span class="line">å‚æ•°<span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python è·¯å¾„ä¸ºï¼š [<span class="string">&#x27;/root&#x27;</span>, <span class="string">&#x27;/usr/lib/python3.4&#x27;</span>, <span class="string">&#x27;/usr/lib/python3.4/plat-x86_64-linux-gnu&#x27;</span>, <span class="string">&#x27;/usr/lib/python3.4/lib-dynload&#x27;</span>, <span class="string">&#x27;/usr/local/lib/python3.4/dist-packages&#x27;</span>, <span class="string">&#x27;/usr/lib/python3/dist-packages&#x27;</span>] </span><br></pre></td></tr></table></figure><ul><li>1ã€import sys å¼•å…¥ python æ ‡å‡†åº“ä¸­çš„ <a href="http://sys.py">sys.py</a> æ¨¡å—ï¼›è¿™æ˜¯å¼•å…¥æŸä¸€æ¨¡å—çš„æ–¹æ³•ã€‚</li><li>2ã€sys.argv æ˜¯ä¸€ä¸ªåŒ…å«å‘½ä»¤è¡Œå‚æ•°çš„åˆ—è¡¨ã€‚</li><li>3ã€sys.path åŒ…å«äº†ä¸€ä¸ª Python è§£é‡Šå™¨è‡ªåŠ¨æŸ¥æ‰¾æ‰€éœ€æ¨¡å—çš„è·¯å¾„çš„åˆ—è¡¨ã€‚</li></ul><hr><h2 id="import-è¯­å¥">import è¯­å¥</h2><p>æƒ³ä½¿ç”¨ Python æºæ–‡ä»¶ï¼Œåªéœ€åœ¨å¦ä¸€ä¸ªæºæ–‡ä»¶é‡Œæ‰§è¡Œ import è¯­å¥ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import module1[, module2[,... moduleN]</span><br></pre></td></tr></table></figure><p>å½“è§£é‡Šå™¨é‡åˆ° import è¯­å¥ï¼Œå¦‚æœæ¨¡å—åœ¨å½“å‰çš„æœç´¢è·¯å¾„å°±ä¼šè¢«å¯¼å…¥ã€‚</p><p><strong>æœç´¢è·¯å¾„æ˜¯ä¸€ä¸ªè§£é‡Šå™¨,ä¼šå…ˆè¿›è¡Œæœç´¢çš„æ‰€æœ‰ç›®å½•çš„åˆ—è¡¨ã€‚å¦‚æƒ³è¦å¯¼å…¥æ¨¡å— supportï¼Œéœ€è¦æŠŠå‘½ä»¤æ”¾åœ¨è„šæœ¬çš„é¡¶ç«¯</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Filename: support.py</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_func</span>(<span class="params"> par </span>):</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;Hello : &quot;</span>, par)</span><br><span class="line">    <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p><a href="http://test.py">test.py</a> å¼•å…¥ support æ¨¡å—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Filename: test.py</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> support</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç°åœ¨å¯ä»¥è°ƒç”¨æ¨¡å—é‡ŒåŒ…å«çš„å‡½æ•°äº†</span></span><br><span class="line">support.print_func(<span class="string">&quot;Runoob&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python3 test.py </span><br><span class="line">Hello :  Runoob</span><br></pre></td></tr></table></figure><p><strong>ä¸€ä¸ªæ¨¡å—åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡</strong>ï¼Œä¸ç®¡ä½ æ‰§è¡Œäº†å¤šå°‘æ¬¡importã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å¯¼å…¥æ¨¡å—è¢«ä¸€éåˆä¸€éåœ°æ‰§è¡Œã€‚</p><p>å½“æˆ‘ä»¬ä½¿ç”¨importè¯­å¥çš„æ—¶å€™ï¼ŒPythonè§£é‡Šå™¨æ˜¯æ€æ ·æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶çš„å‘¢ï¼Ÿ</p><p><strong>è¿™å°±æ¶‰åŠåˆ°Pythonçš„æœç´¢è·¯å¾„ï¼Œæœç´¢è·¯å¾„æ˜¯ç”±ä¸€ç³»åˆ—ç›®å½•åç»„æˆçš„ï¼ŒPythonè§£é‡Šå™¨å°±ä¾æ¬¡ä»è¿™äº›ç›®å½•ä¸­å»å¯»æ‰¾æ‰€å¼•å…¥çš„æ¨¡å—ã€‚</strong></p><p><strong>è¿™çœ‹èµ·æ¥å¾ˆåƒç¯å¢ƒå˜é‡ï¼Œäº‹å®ä¸Šï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ç¯å¢ƒå˜é‡çš„æ–¹å¼æ¥ç¡®å®šæœç´¢è·¯å¾„ã€‚</strong></p><p>æœç´¢è·¯å¾„æ˜¯åœ¨Pythonç¼–è¯‘æˆ–å®‰è£…çš„æ—¶å€™ç¡®å®šçš„ï¼Œå®‰è£…æ–°çš„åº“åº”è¯¥ä¹Ÿä¼šä¿®æ”¹ã€‚æœç´¢è·¯å¾„è¢«å­˜å‚¨åœ¨sysæ¨¡å—ä¸­çš„pathå˜é‡ï¼Œåšä¸€ä¸ªç®€å•çš„å®éªŒï¼Œåœ¨äº¤äº’å¼è§£é‡Šå™¨ä¸­ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; sys.path</span><br><span class="line">[&#x27;&#x27;, &#x27;/usr/lib/python3.4&#x27;, &#x27;/usr/lib/python3.4/plat-x86_64-linux-gnu&#x27;, &#x27;/usr/lib/python3.4/lib-dynload&#x27;, &#x27;/usr/local/lib/python3.4/dist-packages&#x27;, &#x27;/usr/lib/python3/dist-packages&#x27;]</span><br><span class="line">&gt;&gt;&gt; </span><br></pre></td></tr></table></figure><p>sys.path è¾“å‡ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯ç©ºä¸²â€™'ï¼Œä»£è¡¨å½“å‰ç›®å½•ï¼ˆè‹¥æ˜¯ä»ä¸€ä¸ªè„šæœ¬ä¸­æ‰“å°å‡ºæ¥çš„è¯ï¼Œå¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹å‡ºæ˜¯å“ªä¸ªç›®å½•ï¼‰ï¼Œäº¦å³æˆ‘ä»¬æ‰§è¡Œpythonè§£é‡Šå™¨çš„ç›®å½•ï¼ˆå¯¹äºè„šæœ¬çš„è¯å°±æ˜¯è¿è¡Œçš„è„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼‰ã€‚</p><p>å› æ­¤è‹¥åƒæˆ‘ä¸€æ ·åœ¨å½“å‰ç›®å½•ä¸‹å­˜åœ¨ä¸è¦å¼•å…¥æ¨¡å—åŒåçš„æ–‡ä»¶ï¼Œå°±ä¼šæŠŠè¦å¼•å…¥çš„æ¨¡å—å±è”½æ‰ã€‚</p><hr><h2 id="from-â€¦-import-è¯­å¥">from â€¦ import è¯­å¥</h2><p>Python çš„ from è¯­å¥è®©ä½ ä»æ¨¡å—ä¸­å¯¼å…¥ä¸€ä¸ªæŒ‡å®šçš„éƒ¨åˆ†åˆ°å½“å‰å‘½åç©ºé—´ä¸­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from modname import name1[, name2[, ... nameN]]</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¦å¯¼å…¥æ¨¡å— fibo çš„ fib å‡½æ•°ï¼Œä½¿ç”¨å¦‚ä¸‹è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from fibo import fib, fib2</span><br><span class="line">&gt;&gt;&gt; fib(500)</span><br><span class="line">1 1 2 3 5 8 13 21 34 55 89 144 233 377</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå£°æ˜ä¸ä¼šæŠŠæ•´ä¸ªfiboæ¨¡å—å¯¼å…¥åˆ°å½“å‰çš„å‘½åç©ºé—´ä¸­ï¼Œå®ƒåªä¼šå°†fiboé‡Œçš„fibå‡½æ•°å¼•å…¥è¿›æ¥ã€‚</p><hr><h2 id="from-â€¦-import-è¯­å¥-2">from â€¦ import * è¯­å¥</h2><p>æŠŠä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å†…å®¹å…¨éƒ½å¯¼å…¥åˆ°å½“å‰çš„å‘½åç©ºé—´ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œåªéœ€ä½¿ç”¨å¦‚ä¸‹å£°æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from modname import *</span><br></pre></td></tr></table></figure><p>è¿™æä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æ‰€æœ‰é¡¹ç›®ã€‚ç„¶è€Œè¿™ç§å£°æ˜ä¸è¯¥è¢«è¿‡å¤šåœ°ä½¿ç”¨ã€‚</p><hr><h2 id="æ·±å…¥æ¨¡å—">æ·±å…¥æ¨¡å—</h2><p>æ¨¡å—é™¤äº†æ–¹æ³•å®šä¹‰ï¼Œè¿˜å¯ä»¥åŒ…æ‹¬å¯æ‰§è¡Œçš„ä»£ç ã€‚è¿™äº›ä»£ç ä¸€èˆ¬ç”¨æ¥åˆå§‹åŒ–è¿™ä¸ªæ¨¡å—ã€‚è¿™äº›ä»£ç åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è¢«å¯¼å…¥æ—¶æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><p>æ¯ä¸ªæ¨¡å—æœ‰å„è‡ªç‹¬ç«‹çš„ç¬¦å·è¡¨ï¼Œåœ¨æ¨¡å—å†…éƒ¨ä¸ºæ‰€æœ‰çš„å‡½æ•°å½“ä½œå…¨å±€ç¬¦å·è¡¨æ¥ä½¿ç”¨ã€‚</p><p>æ‰€ä»¥ï¼Œæ¨¡å—çš„ä½œè€…å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„åœ¨æ¨¡å—å†…éƒ¨ä½¿ç”¨è¿™äº›å…¨å±€å˜é‡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæŠŠå…¶ä»–ç”¨æˆ·çš„å…¨å±€å˜é‡ææ··ã€‚</p><p>ä»å¦ä¸€ä¸ªæ–¹é¢ï¼Œå½“ä½ ç¡®å®çŸ¥é“ä½ åœ¨åšä»€ä¹ˆçš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ modname.itemname è¿™æ ·çš„è¡¨ç¤ºæ³•æ¥è®¿é—®æ¨¡å—å†…çš„å‡½æ•°ã€‚</p><p>æ¨¡å—æ˜¯å¯ä»¥å¯¼å…¥å…¶ä»–æ¨¡å—çš„ã€‚åœ¨ä¸€ä¸ªæ¨¡å—ï¼ˆæˆ–è€…è„šæœ¬ï¼Œæˆ–è€…å…¶ä»–åœ°æ–¹ï¼‰çš„æœ€å‰é¢ä½¿ç”¨ import æ¥å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªæƒ¯ä¾‹ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶çš„ã€‚è¢«å¯¼å…¥çš„æ¨¡å—çš„åç§°å°†è¢«æ”¾å…¥å½“å‰æ“ä½œçš„æ¨¡å—çš„ç¬¦å·è¡¨ä¸­ã€‚</p><p>è¿˜æœ‰ä¸€ç§å¯¼å…¥çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ import ç›´æ¥æŠŠæ¨¡å—å†…ï¼ˆå‡½æ•°ï¼Œå˜é‡çš„ï¼‰åç§°å¯¼å…¥åˆ°å½“å‰æ“ä½œæ¨¡å—ã€‚æ¯”å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from fibo import fib, fib2</span><br><span class="line">&gt;&gt;&gt; fib(500)</span><br><span class="line">1 1 2 3 5 8 13 21 34 55 89 144 233 377</span><br></pre></td></tr></table></figure><p>è¿™ç§å¯¼å…¥çš„æ–¹æ³•ä¸ä¼šæŠŠè¢«å¯¼å…¥çš„æ¨¡å—çš„åç§°æ”¾åœ¨å½“å‰çš„å­—ç¬¦è¡¨ä¸­ï¼ˆæ‰€ä»¥åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œfibo è¿™ä¸ªåç§°æ˜¯æ²¡æœ‰å®šä¹‰çš„ï¼‰ã€‚</p><p>è¿™è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§çš„æŠŠæ¨¡å—ä¸­çš„æ‰€æœ‰ï¼ˆå‡½æ•°ï¼Œå˜é‡ï¼‰åç§°éƒ½å¯¼å…¥åˆ°å½“å‰æ¨¡å—çš„å­—ç¬¦è¡¨:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from fibo import *</span><br><span class="line">&gt;&gt;&gt; fib(500)</span><br><span class="line">1 1 2 3 5 8 13 21 34 55 89 144 233 377</span><br></pre></td></tr></table></figure><p>è¿™å°†æŠŠæ‰€æœ‰çš„åå­—éƒ½å¯¼å…¥è¿›æ¥ï¼Œä½†æ˜¯é‚£äº›ç”±å•ä¸€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´çš„åå­—ä¸åœ¨æ­¤ä¾‹ã€‚å¤§å¤šæ•°æƒ…å†µï¼Œ Pythonç¨‹åºå‘˜ä¸ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå¼•å…¥çš„å…¶å®ƒæ¥æºçš„å‘½åï¼Œå¾ˆå¯èƒ½è¦†ç›–äº†å·²æœ‰çš„å®šä¹‰ã€‚</p><hr><h2 id="name-å±æ€§">__name__å±æ€§</h2><p>ä¸€ä¸ªæ¨¡å—è¢«å¦ä¸€ä¸ªç¨‹åºç¬¬ä¸€æ¬¡å¼•å…¥æ—¶ï¼Œå…¶ä¸»ç¨‹åºå°†è¿è¡Œã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨æ¨¡å—è¢«å¼•å…¥æ—¶ï¼Œæ¨¡å—ä¸­çš„æŸä¸€ç¨‹åºå—ä¸æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨__name__å±æ€§æ¥ä½¿è¯¥ç¨‹åºå—ä»…åœ¨è¯¥æ¨¡å—è‡ªèº«è¿è¡Œæ—¶æ‰§è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python3</span><br><span class="line"># Filename: using_name.py</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   print(&#x27;ç¨‹åºè‡ªèº«åœ¨è¿è¡Œ&#x27;)</span><br><span class="line">else:</span><br><span class="line">   print(&#x27;æˆ‘æ¥è‡ªå¦ä¸€æ¨¡å—&#x27;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ python using_name.py</span><br><span class="line">ç¨‹åºè‡ªèº«åœ¨è¿è¡Œ</span><br><span class="line">$ python</span><br><span class="line">&gt;&gt;&gt; import using_name</span><br><span class="line">æˆ‘æ¥è‡ªå¦ä¸€æ¨¡å—</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong> æ¯ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ª__name__å±æ€§ï¼Œå½“å…¶å€¼æ˜¯â€™<strong>main</strong>â€™æ—¶ï¼Œè¡¨æ˜è¯¥æ¨¡å—è‡ªèº«åœ¨è¿è¡Œï¼Œå¦åˆ™æ˜¯è¢«å¼•å…¥ã€‚</p><p>è¯´æ˜ï¼š<strong><strong>name</strong></strong> ä¸ <strong><strong>main</strong></strong> åº•ä¸‹æ˜¯åŒä¸‹åˆ’çº¿ï¼Œ <strong>_ _</strong> æ˜¯è¿™æ ·å»æ‰ä¸­é—´çš„é‚£ä¸ªç©ºæ ¼ã€‚</p><hr><h2 id="dir-å‡½æ•°">dir() å‡½æ•°</h2><p>å†…ç½®çš„å‡½æ•° dir() å¯ä»¥æ‰¾åˆ°æ¨¡å—å†…å®šä¹‰çš„æ‰€æœ‰åç§°ã€‚ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨çš„å½¢å¼è¿”å›:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import fibo, sys</span><br><span class="line">&gt;&gt;&gt; dir(fibo)</span><br><span class="line">[&#x27;__name__&#x27;, &#x27;fib&#x27;, &#x27;fib2&#x27;]</span><br><span class="line">&gt;&gt;&gt; dir(sys)  </span><br><span class="line">[&#x27;__displayhook__&#x27;, &#x27;__doc__&#x27;, &#x27;__excepthook__&#x27;, &#x27;__loader__&#x27;, &#x27;__name__&#x27;,</span><br><span class="line"> &#x27;__package__&#x27;, &#x27;__stderr__&#x27;, &#x27;__stdin__&#x27;, &#x27;__stdout__&#x27;,</span><br><span class="line"> &#x27;_clear_type_cache&#x27;, &#x27;_current_frames&#x27;, &#x27;_debugmallocstats&#x27;, &#x27;_getframe&#x27;,</span><br><span class="line"> &#x27;_home&#x27;, &#x27;_mercurial&#x27;, &#x27;_xoptions&#x27;, &#x27;abiflags&#x27;, &#x27;api_version&#x27;, &#x27;argv&#x27;,</span><br><span class="line"> &#x27;base_exec_prefix&#x27;, &#x27;base_prefix&#x27;, &#x27;builtin_module_names&#x27;, &#x27;byteorder&#x27;,</span><br><span class="line"> &#x27;call_tracing&#x27;, &#x27;callstats&#x27;, &#x27;copyright&#x27;, &#x27;displayhook&#x27;,</span><br><span class="line"> &#x27;dont_write_bytecode&#x27;, &#x27;exc_info&#x27;, &#x27;excepthook&#x27;, &#x27;exec_prefix&#x27;,</span><br><span class="line"> &#x27;executable&#x27;, &#x27;exit&#x27;, &#x27;flags&#x27;, &#x27;float_info&#x27;, &#x27;float_repr_style&#x27;,</span><br><span class="line"> &#x27;getcheckinterval&#x27;, &#x27;getdefaultencoding&#x27;, &#x27;getdlopenflags&#x27;,</span><br><span class="line"> &#x27;getfilesystemencoding&#x27;, &#x27;getobjects&#x27;, &#x27;getprofile&#x27;, &#x27;getrecursionlimit&#x27;,</span><br><span class="line"> &#x27;getrefcount&#x27;, &#x27;getsizeof&#x27;, &#x27;getswitchinterval&#x27;, &#x27;gettotalrefcount&#x27;,</span><br><span class="line"> &#x27;gettrace&#x27;, &#x27;hash_info&#x27;, &#x27;hexversion&#x27;, &#x27;implementation&#x27;, &#x27;int_info&#x27;,</span><br><span class="line"> &#x27;intern&#x27;, &#x27;maxsize&#x27;, &#x27;maxunicode&#x27;, &#x27;meta_path&#x27;, &#x27;modules&#x27;, &#x27;path&#x27;,</span><br><span class="line"> &#x27;path_hooks&#x27;, &#x27;path_importer_cache&#x27;, &#x27;platform&#x27;, &#x27;prefix&#x27;, &#x27;ps1&#x27;,</span><br><span class="line"> &#x27;setcheckinterval&#x27;, &#x27;setdlopenflags&#x27;, &#x27;setprofile&#x27;, &#x27;setrecursionlimit&#x27;,</span><br><span class="line"> &#x27;setswitchinterval&#x27;, &#x27;settrace&#x27;, &#x27;stderr&#x27;, &#x27;stdin&#x27;, &#x27;stdout&#x27;,</span><br><span class="line"> &#x27;thread_info&#x27;, &#x27;version&#x27;, &#x27;version_info&#x27;, &#x27;warnoptions&#x27;]</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ç»™å®šå‚æ•°ï¼Œé‚£ä¹ˆ dir() å‡½æ•°ä¼šç½—åˆ—å‡ºå½“å‰å®šä¹‰çš„æ‰€æœ‰åç§°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; import fibo</span><br><span class="line">&gt;&gt;&gt; fib = fibo.fib</span><br><span class="line">&gt;&gt;&gt; dir() # å¾—åˆ°ä¸€ä¸ªå½“å‰æ¨¡å—ä¸­å®šä¹‰çš„å±æ€§åˆ—è¡¨</span><br><span class="line">[&#x27;__builtins__&#x27;, &#x27;__name__&#x27;, &#x27;a&#x27;, &#x27;fib&#x27;, &#x27;fibo&#x27;, &#x27;sys&#x27;]</span><br><span class="line">&gt;&gt;&gt; a = 5 # å»ºç«‹ä¸€ä¸ªæ–°çš„å˜é‡ &#x27;a&#x27;</span><br><span class="line">&gt;&gt;&gt; dir()</span><br><span class="line">[&#x27;__builtins__&#x27;, &#x27;__doc__&#x27;, &#x27;__name__&#x27;, &#x27;a&#x27;, &#x27;sys&#x27;]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; del a # åˆ é™¤å˜é‡åa</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; dir()</span><br><span class="line">[&#x27;__builtins__&#x27;, &#x27;__doc__&#x27;, &#x27;__name__&#x27;, &#x27;sys&#x27;]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="æ ‡å‡†æ¨¡å—">æ ‡å‡†æ¨¡å—</h2><p>Python æœ¬èº«å¸¦ç€ä¸€äº›æ ‡å‡†çš„æ¨¡å—åº“ï¼Œåœ¨ Python åº“å‚è€ƒæ–‡æ¡£ä¸­å°†ä¼šä»‹ç»åˆ°ï¼ˆå°±æ˜¯åé¢çš„&quot;åº“å‚è€ƒæ–‡æ¡£&quot;ï¼‰ã€‚</p><p>æœ‰äº›æ¨¡å—ç›´æ¥è¢«æ„å»ºåœ¨è§£æå™¨é‡Œï¼Œè¿™äº›è™½ç„¶ä¸æ˜¯ä¸€äº›è¯­è¨€å†…ç½®çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä»–å´èƒ½å¾ˆé«˜æ•ˆçš„ä½¿ç”¨ï¼Œç”šè‡³æ˜¯ç³»ç»Ÿçº§è°ƒç”¨ä¹Ÿæ²¡é—®é¢˜ã€‚</p><p>è¿™äº›ç»„ä»¶ä¼šæ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿè¿›è¡Œä¸åŒå½¢å¼çš„é…ç½®ï¼Œæ¯”å¦‚ winreg è¿™ä¸ªæ¨¡å—å°±åªä¼šæä¾›ç»™ Windows ç³»ç»Ÿã€‚</p><p>åº”è¯¥æ³¨æ„åˆ°è¿™æœ‰ä¸€ä¸ªç‰¹åˆ«çš„æ¨¡å— sys ï¼Œå®ƒå†…ç½®åœ¨æ¯ä¸€ä¸ª Python è§£æå™¨ä¸­ã€‚å˜é‡ sys.ps1 å’Œ sys.ps2 å®šä¹‰äº†ä¸»æç¤ºç¬¦å’Œå‰¯æç¤ºç¬¦æ‰€å¯¹åº”çš„å­—ç¬¦ä¸²:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; sys.ps1</span><br><span class="line">&#x27;&gt;&gt;&gt; &#x27;</span><br><span class="line">&gt;&gt;&gt; sys.ps2</span><br><span class="line">&#x27;... &#x27;</span><br><span class="line">&gt;&gt;&gt; sys.ps1 = &#x27;C&gt; &#x27;</span><br><span class="line">C&gt; print(&#x27;Runoob!&#x27;)</span><br><span class="line">Runoob!</span><br><span class="line">C&gt; </span><br></pre></td></tr></table></figure><hr><h2 id="åŒ…">åŒ…</h2><p>åŒ…æ˜¯ä¸€ç§ç®¡ç† Python æ¨¡å—å‘½åç©ºé—´çš„å½¢å¼ï¼Œé‡‡ç”¨&quot;ç‚¹æ¨¡å—åç§°&quot;ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªæ¨¡å—çš„åç§°æ˜¯ A.Bï¼Œ é‚£ä¹ˆä»–è¡¨ç¤ºä¸€ä¸ªåŒ… Aä¸­çš„å­æ¨¡å— B ã€‚</p><p>å°±å¥½åƒä½¿ç”¨æ¨¡å—çš„æ—¶å€™ï¼Œä½ ä¸ç”¨æ‹…å¿ƒä¸åŒæ¨¡å—ä¹‹é—´çš„å…¨å±€å˜é‡ç›¸äº’å½±å“ä¸€æ ·ï¼Œé‡‡ç”¨ç‚¹æ¨¡å—åç§°è¿™ç§å½¢å¼ä¹Ÿä¸ç”¨æ‹…å¿ƒä¸åŒåº“ä¹‹é—´çš„æ¨¡å—é‡åçš„æƒ…å†µã€‚</p><p>è¿™æ ·ä¸åŒçš„ä½œè€…éƒ½å¯ä»¥æä¾› NumPy æ¨¡å—ï¼Œæˆ–è€…æ˜¯ Python å›¾å½¢åº“ã€‚</p><p>ä¸å¦¨å‡è®¾ä½ æƒ³è®¾è®¡ä¸€å¥—ç»Ÿä¸€å¤„ç†å£°éŸ³æ–‡ä»¶å’Œæ•°æ®çš„æ¨¡å—ï¼ˆæˆ–è€…ç§°ä¹‹ä¸ºä¸€ä¸ª&quot;åŒ…&quot;ï¼‰ã€‚</p><p>ç°å­˜å¾ˆå¤šç§ä¸åŒçš„éŸ³é¢‘æ–‡ä»¶æ ¼å¼ï¼ˆåŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡åç¼€ååŒºåˆ†çš„ï¼Œä¾‹å¦‚ï¼š .wavï¼Œ:file:.aiffï¼Œ:file:.auï¼Œï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦æœ‰ä¸€ç»„ä¸æ–­å¢åŠ çš„æ¨¡å—ï¼Œç”¨æ¥åœ¨ä¸åŒçš„æ ¼å¼ä¹‹é—´è½¬æ¢ã€‚</p><p>å¹¶ä¸”é’ˆå¯¹è¿™äº›éŸ³é¢‘æ•°æ®ï¼Œè¿˜æœ‰å¾ˆå¤šä¸åŒçš„æ“ä½œï¼ˆæ¯”å¦‚æ··éŸ³ï¼Œæ·»åŠ å›å£°ï¼Œå¢åŠ å‡è¡¡å™¨åŠŸèƒ½ï¼Œåˆ›å»ºäººé€ ç«‹ä½“å£°æ•ˆæœï¼‰ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦ä¸€ç»„æ€ä¹ˆä¹Ÿå†™ä¸å®Œçš„æ¨¡å—æ¥å¤„ç†è¿™äº›æ“ä½œã€‚</p><p>è¿™é‡Œç»™å‡ºäº†ä¸€ç§å¯èƒ½çš„åŒ…ç»“æ„ï¼ˆåœ¨åˆ†å±‚çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼‰:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sound/                          é¡¶å±‚åŒ…</span><br><span class="line">      __init__.py               åˆå§‹åŒ– sound åŒ…</span><br><span class="line">      formats/                  æ–‡ä»¶æ ¼å¼è½¬æ¢å­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              wavread.py</span><br><span class="line">              wavwrite.py</span><br><span class="line">              aiffread.py</span><br><span class="line">              aiffwrite.py</span><br><span class="line">              auread.py</span><br><span class="line">              auwrite.py</span><br><span class="line">              ...</span><br><span class="line">      effects/                  å£°éŸ³æ•ˆæœå­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              echo.py</span><br><span class="line">              surround.py</span><br><span class="line">              reverse.py</span><br><span class="line">              ...</span><br><span class="line">      filters/                  filters å­åŒ…</span><br><span class="line">              __init__.py</span><br><span class="line">              equalizer.py</span><br><span class="line">              vocoder.py</span><br><span class="line">              karaoke.py</span><br><span class="line">              ...</span><br></pre></td></tr></table></figure><p>åœ¨å¯¼å…¥ä¸€ä¸ªåŒ…çš„æ—¶å€™ï¼ŒPython ä¼šæ ¹æ® sys.path ä¸­çš„ç›®å½•æ¥å¯»æ‰¾è¿™ä¸ªåŒ…ä¸­åŒ…å«çš„å­ç›®å½•ã€‚</p><p>ç›®å½•åªæœ‰åŒ…å«ä¸€ä¸ªå«åš <strong>init</strong>.py çš„æ–‡ä»¶æ‰ä¼šè¢«è®¤ä½œæ˜¯ä¸€ä¸ªåŒ…ï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…ä¸€äº›æ»¥ä¿—çš„åå­—ï¼ˆæ¯”å¦‚å«åš stringï¼‰ä¸å°å¿ƒçš„å½±å“æœç´¢è·¯å¾„ä¸­çš„æœ‰æ•ˆæ¨¡å—ã€‚</p><p>æœ€ç®€å•çš„æƒ…å†µï¼Œæ”¾ä¸€ä¸ªç©ºçš„ :file:<strong>init</strong>.pyå°±å¯ä»¥äº†ã€‚å½“ç„¶è¿™ä¸ªæ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥åŒ…å«ä¸€äº›åˆå§‹åŒ–ä»£ç æˆ–è€…ä¸ºï¼ˆå°†åœ¨åé¢ä»‹ç»çš„ï¼‰ __all__å˜é‡èµ‹å€¼ã€‚</p><p>ç”¨æˆ·å¯ä»¥æ¯æ¬¡åªå¯¼å…¥ä¸€ä¸ªåŒ…é‡Œé¢çš„ç‰¹å®šæ¨¡å—ï¼Œæ¯”å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import sound.effects.echo</span><br></pre></td></tr></table></figure><p>è¿™å°†ä¼šå¯¼å…¥å­æ¨¡å—:sound.effects.echoã€‚ ä»–å¿…é¡»ä½¿ç”¨å…¨åå»è®¿é—®:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sound.effects.echo.echofilter(input, output, delay=0.7, atten=4)</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§å¯¼å…¥å­æ¨¡å—çš„æ–¹æ³•æ˜¯:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from sound.effects import echo</span><br></pre></td></tr></table></figure><p>è¿™åŒæ ·ä¼šå¯¼å…¥å­æ¨¡å—: echoï¼Œå¹¶ä¸”ä»–ä¸éœ€è¦é‚£äº›å†—é•¿çš„å‰ç¼€ï¼Œæ‰€ä»¥ä»–å¯ä»¥è¿™æ ·ä½¿ç”¨:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo.echofilter(input, output, delay=0.7, atten=4)</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§å˜åŒ–å°±æ˜¯ç›´æ¥å¯¼å…¥ä¸€ä¸ªå‡½æ•°æˆ–è€…å˜é‡:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from sound.effects.echo import echofilter</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œè¿™ç§æ–¹æ³•ä¼šå¯¼å…¥å­æ¨¡å—: echoï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ä½¿ç”¨ä»–çš„ echofilter() å‡½æ•°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echofilter(input, output, delay=0.7, atten=4)</span><br></pre></td></tr></table></figure><p>æ³¨æ„å½“ä½¿ç”¨ <strong>from package import item</strong> è¿™ç§å½¢å¼çš„æ—¶å€™ï¼Œå¯¹åº”çš„ item æ—¢å¯ä»¥æ˜¯åŒ…é‡Œé¢çš„å­æ¨¡å—ï¼ˆå­åŒ…ï¼‰ï¼Œæˆ–è€…åŒ…é‡Œé¢å®šä¹‰çš„å…¶ä»–åç§°ï¼Œæ¯”å¦‚å‡½æ•°ï¼Œç±»æˆ–è€…å˜é‡ã€‚</p><p>import è¯­æ³•ä¼šé¦–å…ˆæŠŠ item å½“ä½œä¸€ä¸ªåŒ…å®šä¹‰çš„åç§°ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†è¯•å›¾æŒ‰ç…§ä¸€ä¸ªæ¨¡å—å»å¯¼å…¥ã€‚å¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼ŒæŠ›å‡ºä¸€ä¸ª <strong>:exc:ImportError</strong> å¼‚å¸¸ã€‚</p><p>åä¹‹ï¼Œå¦‚æœä½¿ç”¨å½¢å¦‚ <strong>import item.subitem.subsubitem</strong> è¿™ç§å¯¼å…¥å½¢å¼ï¼Œé™¤äº†æœ€åä¸€é¡¹ï¼Œéƒ½å¿…é¡»æ˜¯åŒ…ï¼Œè€Œæœ€åä¸€é¡¹åˆ™å¯ä»¥æ˜¯æ¨¡å—æˆ–è€…æ˜¯åŒ…ï¼Œä½†æ˜¯ä¸å¯ä»¥æ˜¯ç±»ï¼Œå‡½æ•°æˆ–è€…å˜é‡çš„åå­—ã€‚</p><hr><h2 id="ä»ä¸€ä¸ªåŒ…ä¸­å¯¼å…¥">ä»ä¸€ä¸ªåŒ…ä¸­å¯¼å…¥*</h2><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <strong>from sound.effects import *</strong> ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>Python ä¼šè¿›å…¥æ–‡ä»¶ç³»ç»Ÿï¼Œæ‰¾åˆ°è¿™ä¸ªåŒ…é‡Œé¢æ‰€æœ‰çš„å­æ¨¡å—ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªçš„æŠŠå®ƒä»¬éƒ½å¯¼å…¥è¿›æ¥ã€‚</p><p>ä½†è¿™ä¸ªæ–¹æ³•åœ¨ Windows å¹³å°ä¸Šå·¥ä½œçš„å°±ä¸æ˜¯éå¸¸å¥½ï¼Œå› ä¸º Windows æ˜¯ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„ç³»ç»Ÿã€‚</p><p>åœ¨ Windows å¹³å°å¹³å°ä¸Šï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šä¸€ä¸ªå«åš <a href="http://ECHO.py">ECHO.py</a> çš„æ–‡ä»¶å¯¼å…¥ä¸ºæ¨¡å—æ˜¯ echo è¿˜æ˜¯ Echoï¼Œæˆ–è€…æ˜¯ ECHOã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›ä¸€ä¸ªç²¾ç¡®åŒ…çš„ç´¢å¼•ã€‚</p><p>å¯¼å…¥è¯­å¥éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼šå¦‚æœåŒ…å®šä¹‰æ–‡ä»¶ <strong><strong>init</strong>.py</strong> å­˜åœ¨ä¸€ä¸ªå«åš <strong><strong>all</strong></strong> çš„åˆ—è¡¨å˜é‡ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ <strong>from package import *</strong> çš„æ—¶å€™å°±æŠŠè¿™ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰åå­—ä½œä¸ºåŒ…å†…å®¹å¯¼å…¥ã€‚</p><p>ä½œä¸ºåŒ…çš„ä½œè€…ï¼Œå¯åˆ«å¿˜äº†åœ¨æ›´æ–°åŒ…ä¹‹åä¿è¯ <strong><strong>all</strong></strong> ä¹Ÿæ›´æ–°äº†å•Šã€‚</p><p>ä»¥ä¸‹å®ä¾‹åœ¨ file:sounds/effects/<strong>init</strong>.py ä¸­åŒ…å«å¦‚ä¸‹ä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [&quot;echo&quot;, &quot;surround&quot;, &quot;reverse&quot;]</span><br></pre></td></tr></table></figure><p>è¿™è¡¨ç¤ºå½“ä½ ä½¿ç”¨from sound.effects import *è¿™ç§ç”¨æ³•æ—¶ï¼Œä½ åªä¼šå¯¼å…¥åŒ…é‡Œé¢è¿™ä¸‰ä¸ªå­æ¨¡å—ã€‚</p><p>å¦‚æœ <strong><strong>all</strong></strong> çœŸçš„æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä½¿ç”¨**from sound.effects import ***è¿™ç§è¯­æ³•çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå¯¼å…¥åŒ… sound.effects é‡Œçš„ä»»ä½•å­æ¨¡å—ã€‚ä»–åªæ˜¯æŠŠåŒ…sound.effectså’Œå®ƒé‡Œé¢å®šä¹‰çš„æ‰€æœ‰å†…å®¹å¯¼å…¥è¿›æ¥ï¼ˆå¯èƒ½è¿è¡Œ__init__.pyé‡Œå®šä¹‰çš„åˆå§‹åŒ–ä»£ç ï¼‰ã€‚</p><p>è¿™ä¼šæŠŠ <strong>init</strong>.py é‡Œé¢å®šä¹‰çš„æ‰€æœ‰åå­—å¯¼å…¥è¿›æ¥ã€‚å¹¶ä¸”ä»–ä¸ä¼šç ´åæ‰æˆ‘ä»¬åœ¨è¿™å¥è¯ä¹‹å‰å¯¼å…¥çš„æ‰€æœ‰æ˜ç¡®æŒ‡å®šçš„æ¨¡å—ã€‚çœ‹ä¸‹è¿™éƒ¨åˆ†ä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import sound.effects.echo</span><br><span class="line">import sound.effects.surround</span><br><span class="line">from sound.effects import *</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨æ‰§è¡Œ fromâ€¦import å‰ï¼ŒåŒ… sound.effects ä¸­çš„ echo å’Œ surround æ¨¡å—éƒ½è¢«å¯¼å…¥åˆ°å½“å‰çš„å‘½åç©ºé—´ä¸­äº†ã€‚ï¼ˆå½“ç„¶å¦‚æœå®šä¹‰äº† <strong>all</strong> å°±æ›´æ²¡é—®é¢˜äº†ï¼‰</p><p>é€šå¸¸æˆ‘ä»¬å¹¶ä¸ä¸»å¼ ä½¿ç”¨ ***** è¿™ç§æ–¹æ³•æ¥å¯¼å…¥æ¨¡å—ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•ç»å¸¸ä¼šå¯¼è‡´ä»£ç çš„å¯è¯»æ€§é™ä½ã€‚ä¸è¿‡è¿™æ ·å€’çš„ç¡®æ˜¯å¯ä»¥çœå»ä¸å°‘æ•²é”®çš„åŠŸå¤«ï¼Œè€Œä¸”ä¸€äº›æ¨¡å—éƒ½è®¾è®¡æˆäº†åªèƒ½é€šè¿‡ç‰¹å®šçš„æ–¹æ³•å¯¼å…¥ã€‚</p><p>è®°ä½ï¼Œä½¿ç”¨ <strong>from Package import specific_submodule</strong> è¿™ç§æ–¹æ³•æ°¸è¿œä¸ä¼šæœ‰é”™ã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„æ–¹æ³•ã€‚é™¤éæ˜¯ä½ è¦å¯¼å…¥çš„å­æ¨¡å—æœ‰å¯èƒ½å’Œå…¶ä»–åŒ…çš„å­æ¨¡å—é‡åã€‚</p><p>å¦‚æœåœ¨ç»“æ„ä¸­åŒ…æ˜¯ä¸€ä¸ªå­åŒ…ï¼ˆæ¯”å¦‚è¿™ä¸ªä¾‹å­ä¸­å¯¹äºåŒ…soundæ¥è¯´ï¼‰ï¼Œè€Œä½ åˆæƒ³å¯¼å…¥å…„å¼ŸåŒ…ï¼ˆåŒçº§åˆ«çš„åŒ…ï¼‰ä½ å°±å¾—ä½¿ç”¨å¯¼å…¥ç»å¯¹çš„è·¯å¾„æ¥å¯¼å…¥ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ¨¡å—sound.filters.vocoder è¦ä½¿ç”¨åŒ… sound.effects ä¸­çš„æ¨¡å— echoï¼Œä½ å°±è¦å†™æˆ from sound.effects import echoã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from . import echo</span><br><span class="line">from .. import formats</span><br><span class="line">from ..filters import equalizer</span><br></pre></td></tr></table></figure><p>æ— è®ºæ˜¯éšå¼çš„è¿˜æ˜¯æ˜¾å¼çš„ç›¸å¯¹å¯¼å…¥éƒ½æ˜¯ä»å½“å‰æ¨¡å—å¼€å§‹çš„ã€‚ä¸»æ¨¡å—çš„åå­—æ°¸è¿œæ˜¯&quot;<strong>main</strong>&quot;ï¼Œä¸€ä¸ªPythonåº”ç”¨ç¨‹åºçš„ä¸»æ¨¡å—ï¼Œåº”å½“æ€»æ˜¯ä½¿ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨ã€‚</p><p>åŒ…è¿˜æä¾›ä¸€ä¸ªé¢å¤–çš„å±æ€§__path__ã€‚è¿™æ˜¯ä¸€ä¸ªç›®å½•åˆ—è¡¨ï¼Œé‡Œé¢æ¯ä¸€ä¸ªåŒ…å«çš„ç›®å½•éƒ½æœ‰ä¸ºè¿™ä¸ªåŒ…æœåŠ¡çš„__init__.pyï¼Œä½ å¾—åœ¨å…¶ä»–__init__.pyè¢«æ‰§è¡Œå‰å®šä¹‰å“¦ã€‚å¯ä»¥ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œç”¨æ¥å½±å“åŒ…å«åœ¨åŒ…é‡Œé¢çš„æ¨¡å—å’Œå­åŒ…ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½å¹¶ä¸å¸¸ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥æ‰©å±•åŒ…é‡Œé¢çš„æ¨¡å—ã€‚</p><h1>å‚è€ƒï¼š</h1><p><a href="https://www.liaoxuefeng.com/">å»–é›ªå³°çš„åšå®¢</a></p><p><a href="https://www.runoob.com/python3">èœé¸Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ä¸æ±‡æ€» </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mix-code_flutter-cpp</title>
      <link href="/2022/01/10/mix-code-flutter-cpp%EF%BC%9A%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
      <url>/2022/01/10/mix-code-flutter-cpp%EF%BC%9A%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€ï¼š</h1><p>ä½¿ç”¨flutterä¸c++è¿›è¡Œæ··åˆå¼€å‘æ˜¯ä¸€æ¬¡å°è¯•ï¼Œèµ·å› æ˜¯æ•°æ®ç»“æ„è¯¾è®¾ï¼Œæˆ‘å¸Œæœ›èƒ½ç”¨Flutterä½œä¸ºUIå±‚è¿›è¡Œå±•ç¤ºã€‚</p><p>å…¶å®æœ€åˆçš„æƒ³æ³•æ˜¯åšä¸€ä¸ªAPPï¼Œé€šè¿‡<code>UIå±‚ï¼šflutterã€å¹³å°å±‚ï¼šjava&amp;JNIã€é€»è¾‘å±‚ï¼šc++</code>è¿™æ ·çš„ç»“æ„å»è¿›è¡Œè°ƒç”¨ï¼Œä¸è¿‡ä¸€æ–¹é¢APPå±€é™æ€§æ¯”è¾ƒå¤§ï¼Œæœ€ç»ˆçš„å±•ç¤ºæ•ˆæœå¯èƒ½ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå¦ä¸€æ–¹é¢ï¼ŒFlutterä¹Ÿå¯ä»¥ç”¨äºå¼€å‘æ¡Œé¢ç«¯ç¨‹åºï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯å†³å®šä½¿ç”¨<code>UIå±‚ï¼šflutterã€ä¸­é—´å±‚ï¼šffiã€é€»è¾‘å±‚ï¼šc++</code>è¿™æ ·çš„æ–¹å¼ç›´æ¥ä½¿ç”¨dartè°ƒç”¨c++ï¼Œé¿å…javaä½œä¸ºä¸­é—´å±‚è¿›è¡Œè½¬å‘å¯èƒ½å­˜åœ¨çš„ioé—®é¢˜ä»¥åŠé¢å¤–çš„å†…å­˜å¼€é”€ã€‚</p><h1>é…ç½®</h1><p>é¦–å…ˆå¯ç”¨Flutterçš„æ¡Œé¢ç«¯å¼€å‘ï¼Œä½¿ç”¨æ¡Œé¢ç«¯è¦<a href="https://visualstudio.microsoft.com/downloads/">å®‰è£… Visual Studio 2019</a>ï¼ˆwindowsï¼‰ï¼Œæ³¨æ„ä¸€å®šæ˜¯2019ç‰ˆ,ç„¶ååœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°±å¯ä»¥é€‰æ‹©åŠ å…¥æ¡Œé¢ç«¯å¼€å‘ã€‚</p><p>ç„¶åä¹Ÿæ˜¯è¸©äº†ç‚¹å‘ï¼Œå› ä¸ºä»¥å‰æ²¡ç”¨è¿‡VSï¼Œæ‰€ä»¥å¯¹VSçš„é…ç½®å¯ä»¥è¯´æ˜¯æ¯«ä¸ç†Ÿæ‚‰ï¼ŒASè¿è¡Œé¡¹ç›®çš„æ—¶å€™ç›´æ¥æŠ¥é”™ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error waiting <span class="keyword">for</span> a debug connection: The log reader stopped unexpectedly, or never started.</span><br><span class="line">Error launching application <span class="keyword">on</span> Windows.</span><br></pre></td></tr></table></figure><p>è¿™ç»™æˆ‘æ•´è’™äº†ï¼Œæœ€ååœ¨<a href="https://github.com/flutter/flutter/issues/93635">flutterçš„å®˜æ–¹issue</a>é‡Œæ‰¾åˆ°äº†ç­”æ¡ˆ:</p><blockquote><p>å®‰è£…10.0.22000.0ç‰ˆæœ¬å·¦å³çš„SDK</p></blockquote><p>æˆåŠŸæå®šï¼Œç›²çŒœä¸€æ³¢SDKæ—§ç‰ˆæœ¬ä¸é€‚é…é—®é¢˜ã€‚</p><h1>å¼€å‘</h1><h2 id="å¼€å‘æ€»ç»“">å¼€å‘æ€»ç»“</h2><h3 id="å®‰å“">å®‰å“</h3><p><a href="https://github.com/VomPom/flutter_ffi_tutorial">ä¸€ä¸ªä¾‹å­</a></p><p>è™½ç„¶æˆ‘æ²¡æœ‰é€‰æ‹©å®‰å“ï¼Œä½†æ˜¯å®˜ç½‘ç»™çš„å®‰å“æ•™ç¨‹è¿˜æ¯”è¾ƒè¯¦ç»†ï¼Œæ˜¯ç”¨æœ¬åœ°æ’ä»¶ä¸é…ç½®æ–‡ä»¶ç»“åˆçš„æ–¹å¼è¿›è¡Œæ“ä½œçš„ã€‚</p><h3 id="Windows">Windows</h3><p>winç«¯æ²¡æœ‰é‡‡ç”¨<code>ffi</code>ï¼Œè€Œæ˜¯ä½¿ç”¨äº†<code>methodChannel</code>ï¼Œåˆ«é—®ä¸ºå•¥ï¼Œé—®å°±æ˜¯å‘å°‘ã€ç®€å•ã€‚</p><p>ä½†å…¶å®åœ¨æ–¹æ³•è°ƒç”¨æ—¶æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ•°æ®ç±»å‹çš„ç»Ÿä¸€ï¼Œå¦‚ä½•åœ¨dartçš„æ•°æ®ç±»å‹ä¸c++çš„ä¹‹é—´å®Œæˆæ­£ç¡®çš„è½¬æ¢ï¼Œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹ã€‚</p><p><strong>ç‰¹åˆ«è‡´è°¢<a href="https://blog.csdn.net/yushulx">yushulx</a>ã€‚</strong></p><p>c++æ¥æ”¶å‚æ•°å¹¶è·å–çš„æ–¹æ³•å¦‚ä¸‹ï¼šï¼ˆæ³¨æ„dartè¦å‘é€ä¸€ä¸ª<code>Map&lt;String,dynamic&gt;</code>(è‡³å°‘ï¼‰!)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">auto</span> *arguments = std::get_if&lt;EncodableMap&gt;(method_call.<span class="built_in">arguments</span>());</span><br><span class="line"></span><br><span class="line">std::string filename;</span><br><span class="line"><span class="keyword">auto</span> filename_it = arguments-&gt;<span class="built_in">find</span>(<span class="built_in">EncodableValue</span>(<span class="string">&quot;filename&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (filename_it != arguments-&gt;<span class="built_in">end</span>())&#123;</span><br><span class="line">  filename = std::get&lt;std::string&gt;(filename_it-&gt;second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">std::vector&lt;<span class="keyword">unsigned</span> <span class="keyword">char</span>&gt; bytes;</span><br><span class="line"><span class="keyword">auto</span> bytes_it = arguments-&gt;<span class="built_in">find</span>(<span class="built_in">EncodableValue</span>(<span class="string">&quot;bytes&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (bytes_it != arguments-&gt;<span class="built_in">end</span>())&#123;</span><br><span class="line">  bytes = std::get&lt;vector&lt;<span class="keyword">unsigned</span> <span class="keyword">char</span>&gt;&gt;(bytes_it-&gt;second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> width = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">auto</span> width_it = arguments-&gt;<span class="built_in">find</span>(<span class="built_in">EncodableValue</span>(<span class="string">&quot;width&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (width_it != arguments-&gt;<span class="built_in">end</span>())&#123;</span><br><span class="line">  width = std::get&lt;<span class="keyword">int</span>&gt;(width_it-&gt;second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¸©å‘">è¸©å‘</h2><h2 id="æŠ¥é”™1">æŠ¥é”™1</h2><p>åˆšå¼€å§‹çš„æ—¶å€™è¯•äº†ä¸ª<a href="https://blog.csdn.net/NiuAGeNiuC/article/details/118863341">ç°æˆçš„ä¾‹å­</a>,ç»“æœæŠ¥é”™äº†ï¼ˆå…¶å®æ˜¯VSåœ¨æŠ¥é”™ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warning C4819: è¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ(936)ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º Unicode æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼š<br><strong>ä¿®æ”¹å­—ç¬¦ç¼–ç æ ¼å¼</strong><br>Visual Studioæä¾›é«˜çº§ä¿å­˜é€‰é¡¹åŠŸèƒ½ï¼Œå®ƒèƒ½æŒ‡å®šç‰¹å®šä»£ç æ–‡ä»¶çš„ç¼–ç è§„èŒƒå’Œè¡Œå°¾æ‰€ä½¿ç”¨çš„æ¢è¡Œç¬¦ã€‚åœ¨Visual Studio 2019ä¸­ï¼Œè¯¥å‘½ä»¤æ²¡æœ‰é»˜è®¤æ˜¾ç¤ºåœ¨â€œæ–‡ä»¶â€èœå•ä¸­ã€‚ç”¨æˆ·éœ€è¦æ‰‹å·¥è®¾ç½®ï¼Œæ‰èƒ½æ˜¾ç¤ºè¯¥å‘½ä»¤ã€‚æ“ä½œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰å•å‡»â€œå·¥å…·â€|â€œè‡ªå®šä¹‰â€å‘½ä»¤ï¼Œå¼¹å‡ºâ€œè‡ªå®šä¹‰â€å¯¹è¯æ¡†ã€‚<br>ï¼ˆ2ï¼‰å•å‡»â€œå‘½ä»¤â€æ ‡ç­¾ï¼Œè¿›å…¥â€œå‘½ä»¤â€é€‰é¡¹å¡ã€‚<br>ï¼ˆ3ï¼‰åœ¨â€œèœå•æ â€ä¸‹æ‹‰åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©â€œæ–‡ä»¶â€é€‰é¡¹ã€‚<br>ï¼ˆ4ï¼‰å•å‡»â€œæ·»åŠ å‘½ä»¤â€æŒ‰é’®ï¼Œå¼¹å‡ºâ€œæ·»åŠ å‘½ä»¤â€å¯¹è¯æ¡†ã€‚<br>ï¼ˆ5ï¼‰åœ¨â€œç±»åˆ«â€åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©â€œæ–‡ä»¶â€é€‰é¡¹ï¼›åœ¨â€œå‘½ä»¤â€åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©â€œé«˜çº§ä¿å­˜é€‰é¡¹â€é€‰é¡¹ã€‚<br>ï¼ˆ6ï¼‰å•å‡»â€œç¡®å®šâ€æŒ‰é’®ï¼Œå…³é—­â€œæ·»åŠ å‘½ä»¤â€å¯¹è¯æ¡†ã€‚<br>ï¼ˆ7ï¼‰é€‰ä¸­â€œæ§ä»¶â€åˆ—è¡¨ä¸­çš„â€œé«˜çº§ä¿å­˜é€‰é¡¹â€é€‰é¡¹ï¼Œå•å‡»â€œä¸Šç§»â€æˆ–è€…â€œä¸‹ç§»â€æŒ‰é’®ï¼Œè°ƒæ•´è¯¥å‘½ä»¤çš„ä½ç½®ã€‚<br>ï¼ˆ8ï¼‰å•å‡»â€œå…³é—­â€æŒ‰é’®ï¼Œå®Œæˆâ€œé«˜çº§ä¿å­˜é€‰é¡¹â€å‘½ä»¤çš„æ·»åŠ æ“ä½œã€‚<br>ï¼ˆ9ï¼‰æ‰“å¼€â€œæ–‡ä»¶â€èœå•ä¸‹çš„â€œé«˜çº§ä¿å­˜é€‰é¡¹â€ï¼Œè®¾ç½®ç¼–ç ä¸ºASCIIï¼Œå…³é—­ï¼Œç„¶åå†è®¾ç½®ä¸ºunicodeï¼ˆutf-8ï¼‰<br>äº²æµ‹æˆåŠŸ</p><h2 id="æŠ¥é”™äºŒ">æŠ¥é”™äºŒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error C2220: ä»¥ä¸‹è­¦å‘Šè¢«è§†ä¸ºé”™è¯¯ï¼ˆç„¶åä¸€å †warningï¼‰</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é¡¹ç›®è·¯å¾„\é¡¹ç›®æ–‡ä»¶å¤¹\example\build\windows\plugins\é¡¹ç›®å</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>projectName.sln</code>ï¼Œç”¨VS2019è¿›è¡Œç¼–è¾‘ï¼Œåœ¨é¡¹ç›®-&gt;å±æ€§ä¸‹</p><p><img src="0.png" alt=""></p><p>å…³é—­ï¼ˆç‚¹å‡»ä¿å­˜ï¼‰ï¼Œä½†æ¯æ¬¡ç¼–è¯‘å®Œå°±ä¼šè¢«æ”¹å›æ¥ã€‚</p><p>æ‰€ä»¥ï¼Œæœ€å¥½å°±æ˜¯ä¸€ç‚¹ç‚¹åœ¨æºç æ”¹æ‰ï¼</p><p>é¦–å…ˆï¼Œæ‰€åœ¨çš„è¡Œéƒ½æœ‰æ ‡æ³¨ã€‚</p><p>å…¶æ¬¡ï¼Œå¾ˆå¤šéƒ½æ˜¯ç±»å‹ä¸åŒ¹é…å¯¼è‡´çš„é—®é¢˜ï¼Œæ¯”å¦‚ASCIIä¸<code>char</code>ï¼Œ<code>int</code>å’Œ<code>double</code>ï¼Œ<code>char</code>å’Œ<code>string</code>ï¼Œå¾ˆå¤šéƒ½æ˜¯å¯ä»¥é€šè¿‡ç›¸åº”æ„é€ æ–¹æ³•è§£å†³çš„ï¼Œæ¯”å¦‚å°†ä¸€ä¸ª<code>int</code>çš„ASCIIç è½¬ä¸º<code>char</code>ï¼š<code>char a = char(n)</code>ï¼Œ<code>n</code>ä¸ºASCIIç çš„å€¼ã€‚</p><h2 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h2><p>VSä¸­çš„ç›¸å¯¹è·¯å¾„</p><blockquote><p>å…¶å®å°±æ˜¯ç›¸å½“äºå·¥ç¨‹æ–‡ä»¶ï¼ˆXXXX.vcprojï¼‰ä¸ºèµ·ç‚¹é›¶è®¡ç®—å‡ºçš„èƒ½æ‰¾åˆ°åŒ…å«æ‰€éœ€å¤´æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯æ‰¾åŒ…å«æ‰€éœ€å¤´æ–‡ä»¶çš„includeç›®å½•ï¼‰</p><p>åˆ™æˆ‘ä»¬å¯ä»¥ä»å·¥ç¨‹æ–‡ä»¶xxxx.vcprojæ‰€åœ¨ç›®å½•ä¸ºèµ·ç‚¹å‘ä¸Šå›é€€åˆ°åŒ…å«ä½ æ‰€éœ€è¦å¤´æ–‡ä»¶çš„includeæ–‡ä»¶å¤¹æ‰€åœ¨çš„ç›®å½•ç›®å½•ï¼Œä½ å›é€€äº†å‡ æ¬¡å°±éœ€è¦å‡ ä¸ª&quot;â€¦&quot;ç¬¦å·ã€‚</p></blockquote><h2 id="é—®é¢˜äºŒ">é—®é¢˜äºŒ</h2><p>å¦‚ä½•æ›´ç®€ä¾¿çš„åˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Ÿ</p><p>å¯¹äºä¸€èˆ¬çš„åº”ç”¨æ¥è¯´ï¼Œ<code>GetFileAttributes</code>å¯ä»¥è¯´æ˜¯åˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨æœ€å¥½çš„APIã€‚å› ä¸ºå®ƒåŠŸèƒ½æ˜ç¡®ï¼Œä½¿ç”¨ç®€å•ï¼Œæ”¯æŒXPç³»ç»Ÿï¼Œæ›´é‡è¦çš„æ˜¯å®ƒå¯ä»¥ç›´æ¥åŒºåˆ«æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å½“æˆ‘ä»¬è¦å†™ä¸€ä¸ªåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨çš„å‡½æ•°æ—¶ï¼Œå®ƒåº”è¯¥æ˜¯é¦–é€‰ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="function">BOOL <span class="title">IsFileExist</span><span class="params">(<span class="keyword">const</span> CString&amp; csFile)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DWORD dwAttrib = <span class="built_in">GetFileAttributes</span>(csFile);</span><br><span class="line">    <span class="keyword">return</span> INVALID_FILE_ATTRIBUTES != dwAttrib &amp;&amp; <span class="number">0</span> == (dwAttrib &amp; FILE_ATTRIBUTE_DIRECTORY);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="function">BOOL <span class="title">IsDirExist</span><span class="params">(<span class="keyword">const</span> CString &amp; csDir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DWORD dwAttrib = <span class="built_in">GetFileAttributes</span>(csDir);</span><br><span class="line">    <span class="keyword">return</span> INVALID_FILE_ATTRIBUTES != dwAttrib &amp;&amp; <span class="number">0</span> != (dwAttrib &amp; FILE_ATTRIBUTE_DIRECTORY);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="function">BOOL <span class="title">IsPathExist</span><span class="params">(<span class="keyword">const</span> CString &amp; csPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DWORD dwAttrib = <span class="built_in">GetFileAttributes</span>(csPath);</span><br><span class="line">    <span class="keyword">return</span> INVALID_FILE_ATTRIBUTES != dwAttrib;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å˜å˜å˜å˜å˜ç§(å¬è¯´ä¼šæ›´å¿«ä¸€ç‚¹)</span></span><br><span class="line"><span class="function">BOOL <span class="title">IsPathExist</span><span class="params">(<span class="keyword">const</span> CString &amp; csPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    WIN32_FILE_ATTRIBUTE_DATA attrs = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> != <span class="built_in">GetFileAttributesEx</span>(csPath, GetFileExInfoStandard, &amp;attrs);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//0ä¸ºfalseï¼Œé0ä¸ºtrue</span></span><br></pre></td></tr></table></figure><p>è‡³äºæ–‡ä»¶ï¼š</p><p>Do this with a file stream. <strong>When a <code>std::ofstream</code> is closed, the file is created</strong>. I prefer the following code, because the OP only asks to create a file, not to write in it:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   ofstream &#123; filepath + filename &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The stream is destroyed right after its creation, so the stream is closed inside the destructor and thus the file is created.</p><h1>å‚è€ƒï¼š</h1><blockquote><p><a href="https://flutter.cn/docs/development/platform-integration/c-interop">https://flutter.cn/docs/development/platform-integration/c-interop</a></p><p><a href="https://juejin.cn/post/6976824832595853342">https://juejin.cn/post/6976824832595853342</a></p><p><a href="https://blog.csdn.net/NiuAGeNiuC/article/details/118863341">https://blog.csdn.net/NiuAGeNiuC/article/details/118863341</a></p><p><a href="https://blog.csdn.net/helloworld_ptt/article/details/77927515">https://blog.csdn.net/helloworld_ptt/article/details/77927515</a></p><p><a href="https://blog.csdn.net/yushulx/article/details/116270141">https://blog.csdn.net/yushulx/article/details/116270141</a></p><p><a href="https://blog.csdn.net/u010803748/article/details/79599294">https://blog.csdn.net/u010803748/article/details/79599294</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> flutter-desktop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter&amp;c++æ··åˆå¼€å‘ </tag>
            
            <tag> flutter-desktop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿åŸ¹è®­:winter-flutter-1</title>
      <link href="/2022/01/07/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-winter-flutter-1/"/>
      <url>/2022/01/07/%E5%AD%A6%E7%BA%BF%E5%9F%B9%E8%AE%AD-winter-flutter-1/</url>
      
        <content type="html"><![CDATA[<h1>Widget ç®€ä»‹ï¼ˆäº†è§£ï¼‰</h1><h2 id="Widget-æ¦‚å¿µ">Widget æ¦‚å¿µ</h2><p>åœ¨å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨Flutterä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ª widget ã€‚ä¸åŸç”Ÿå¼€å‘ä¸­â€œæ§ä»¶â€ä¸åŒçš„æ˜¯ï¼ŒFlutter ä¸­çš„ widget çš„æ¦‚å¿µæ›´å¹¿æ³›ï¼Œ<strong>å®ƒä¸ä»…å¯ä»¥è¡¨ç¤ºUIå…ƒç´ ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸€äº›åŠŸèƒ½æ€§çš„ç»„ä»¶</strong>å¦‚ï¼šç”¨äºæ‰‹åŠ¿æ£€æµ‹çš„ <code>GestureDetector</code> ã€ç”¨äºAPPä¸»é¢˜æ•°æ®ä¼ é€’çš„ <code>Theme</code> ç­‰ç­‰ï¼Œè€Œ<strong>åŸç”Ÿå¼€å‘ä¸­çš„æ§ä»¶é€šå¸¸åªæ˜¯æŒ‡UIå…ƒç´ </strong>ã€‚åœ¨åé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬åœ¨æè¿°UIå…ƒç´ æ—¶å¯èƒ½ä¼šç”¨åˆ°â€œæ§ä»¶â€ã€â€œç»„ä»¶â€è¿™æ ·çš„æ¦‚å¿µï¼Œè¯»è€…å¿ƒé‡Œéœ€è¦çŸ¥é“ä»–ä»¬å°±æ˜¯ widget ï¼Œåªæ˜¯åœ¨ä¸åŒåœºæ™¯çš„ä¸åŒè¡¨è¿°è€Œå·²ã€‚ç”±äº Flutter ä¸»è¦å°±æ˜¯ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œè¯»è€…å¯ä»¥è®¤ä¸º widget å°±æ˜¯ä¸€ä¸ªæ§ä»¶ï¼Œä¸å¿…çº ç»“äºæ¦‚å¿µã€‚</p><p>Flutter ä¸­æ˜¯é€šè¿‡ Widget åµŒå¥— Widget çš„æ–¹å¼æ¥æ„å»ºUIå’Œè¿›è¡Œå®è·µå¤„ç†çš„ï¼Œæ‰€ä»¥è®°ä½ï¼Œ<strong>Flutter ä¸­ä¸‡ç‰©çš†ä¸ºWidgetã€‚</strong></p><h2 id="Flutterä¸­çš„å››æ£µæ ‘ï¼ˆæ¯”è¾ƒæŠ½è±¡ï¼Œå°½é‡ç†è§£å³å¯ï¼‰">Flutterä¸­çš„å››æ£µæ ‘ï¼ˆæ¯”è¾ƒæŠ½è±¡ï¼Œå°½é‡ç†è§£å³å¯ï¼‰</h2><p>æ—¢ç„¶ Widget åªæ˜¯æè¿°ä¸€ä¸ªUIå…ƒç´ çš„é…ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆçœŸæ­£çš„å¸ƒå±€ã€ç»˜åˆ¶æ˜¯ç”±è°æ¥å®Œæˆçš„å‘¢ï¼ŸFlutter æ¡†æ¶çš„çš„å¤„ç†æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>æ ¹æ® Widget æ ‘ç”Ÿæˆä¸€ä¸ª Element æ ‘ï¼ŒElement æ ‘ä¸­çš„èŠ‚ç‚¹éƒ½ç»§æ‰¿è‡ª <code>Element</code> ç±»ã€‚</li><li>æ ¹æ® Element æ ‘ç”Ÿæˆ Render æ ‘ï¼ˆæ¸²æŸ“æ ‘ï¼‰ï¼Œæ¸²æŸ“æ ‘ä¸­çš„èŠ‚ç‚¹éƒ½ç»§æ‰¿è‡ª<code>RenderObject</code> ç±»ã€‚</li><li>æ ¹æ®æ¸²æŸ“æ ‘ç”Ÿæˆ Layer æ ‘ï¼Œç„¶åä¸Šå±æ˜¾ç¤ºï¼ŒLayer æ ‘ä¸­çš„èŠ‚ç‚¹éƒ½ç»§æ‰¿è‡ª <code>Layer</code> ç±»ã€‚</li></ol><p>çœŸæ­£çš„å¸ƒå±€å’Œæ¸²æŸ“é€»è¾‘åœ¨ Render æ ‘ä¸­ï¼ŒElement æ˜¯ Widget å’Œ RenderObject çš„ç²˜åˆå‰‚ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸­é—´ä»£ç†ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼Œå‡è®¾æœ‰å¦‚ä¸‹ Widget æ ‘ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Container( <span class="comment">// ä¸€ä¸ªå®¹å™¨ widget</span></span><br><span class="line">  color: Colors.blue, <span class="comment">// è®¾ç½®å®¹å™¨èƒŒæ™¯è‰²</span></span><br><span class="line">  child: Row( <span class="comment">// å¯ä»¥å°†å­widgetæ²¿æ°´å¹³æ–¹å‘æ’åˆ—</span></span><br><span class="line">    children: [</span><br><span class="line">      Image.network(<span class="string">&#x27;https://www.example.com/1.png&#x27;</span>), <span class="comment">// æ˜¾ç¤ºå›¾ç‰‡çš„ widget</span></span><br><span class="line">      <span class="keyword">const</span> Text(<span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœ Container è®¾ç½®äº†èƒŒæ™¯è‰²ï¼ŒContainer å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ColoredBox æ¥å¡«å……èƒŒæ™¯ï¼Œç›¸å…³é€»è¾‘å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (color != <span class="keyword">null</span>)</span><br><span class="line">  current = ColoredBox(color: color!, child: current);</span><br></pre></td></tr></table></figure><p>è€Œ Image å†…éƒ¨ä¼šé€šè¿‡ RawImage æ¥æ¸²æŸ“å›¾ç‰‡ã€Text å†…éƒ¨ä¼šé€šè¿‡ RichText æ¥æ¸²æŸ“æ–‡æœ¬ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ Widgetæ ‘ã€Element æ ‘ã€æ¸²æŸ“æ ‘ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://book.flutterchina.club/assets/img/trees.59d95f72.png" alt=""></p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p><ol><li>ä¸‰æ£µæ ‘ä¸­ï¼ŒWidget å’Œ Element æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä½†å¹¶ä¸å’Œ RenderObject ä¸€ä¸€å¯¹åº”ã€‚æ¯”å¦‚ <code>StatelessWidget</code> å’Œ <code>StatefulWidget</code> éƒ½æ²¡æœ‰å¯¹åº”çš„ RenderObjectã€‚</li><li>æ¸²æŸ“æ ‘åœ¨ä¸Šå±å‰ä¼šç”Ÿæˆä¸€æ£µ Layer æ ‘ã€‚</li><li>ä»¥ä¸Šçš„å†…å®¹æ¯”è¾ƒæ¶‰åŠåº•å±‚åŸç†ï¼Œè¿™é‡Œåªæ˜¯è®©å¤§å®¶äº†è§£ä¸€ä¸‹ç•Œé¢æ¸²æŸ“åŸç†ï¼Œä¸å¿…æ·±ç©¶ã€‚</li></ol><h2 id="Context">Context</h2><p><code>build</code>æ–¹æ³•æœ‰ä¸€ä¸ª<code>context</code>å‚æ•°ï¼Œå®ƒæ˜¯<code>BuildContext</code>ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºå½“å‰ widget åœ¨ widget æ ‘ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ª widget éƒ½ä¼šå¯¹åº”ä¸€ä¸ª context å¯¹è±¡ï¼ˆå› ä¸ºæ¯ä¸€ä¸ª widget éƒ½æ˜¯ widget æ ‘ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚å®é™…ä¸Šï¼Œ<code>context</code>æ˜¯å½“å‰ widget åœ¨ widget æ ‘ä¸­ä½ç½®ä¸­æ‰§è¡Œâ€ç›¸å…³æ“ä½œâ€œçš„ä¸€ä¸ªå¥æŸ„(handle)ï¼Œæ¯”å¦‚å®ƒæä¾›äº†ä»å½“å‰ widget å¼€å§‹å‘ä¸Šéå† widget æ ‘ä»¥åŠæŒ‰ç…§ widget ç±»å‹æŸ¥æ‰¾çˆ¶çº§ widget çš„æ–¹æ³•ã€‚ä¸‹é¢æ˜¯åœ¨å­æ ‘ä¸­è·å–çˆ¶çº§ widget çš„ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContextRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span>  </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;Contextæµ‹è¯•&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        child: Builder(builder: (context) &#123;</span><br><span class="line">          <span class="comment">// åœ¨ widget æ ‘ä¸­å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„çˆ¶çº§`Scaffold`  widget </span></span><br><span class="line">          Scaffold scaffold = context.findAncestorWidgetOfExactType&lt;Scaffold&gt;();</span><br><span class="line">          <span class="comment">// ç›´æ¥è¿”å› AppBarçš„titleï¼Œ æ­¤å¤„å®é™…ä¸Šæ˜¯Text(&quot;Contextæµ‹è¯•&quot;)</span></span><br><span class="line">          <span class="keyword">return</span> (scaffold.appBar <span class="keyword">as</span> AppBar).title;</span><br><span class="line">        &#125;),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="0.png" alt="è¿è¡Œåæ•ˆæœ"></p><h3 id="é€šè¿‡Contextè·å–Stateå¯¹è±¡">é€šè¿‡Contextè·å–Stateå¯¹è±¡</h3><p><code>  context</code>å¯¹è±¡æœ‰ä¸€ä¸ª<code>findAncestorStateOfType()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥ä»å½“å‰èŠ‚ç‚¹æ²¿ç€ widget æ ‘å‘ä¸ŠæŸ¥æ‰¾æŒ‡å®šç±»å‹çš„ StatefulWidget å¯¹åº”çš„ State å¯¹è±¡ã€‚é€šå¸¸ç”¨äºåœ¨å­ widget æ ‘ä¸­è·å–çˆ¶çº§ StatefulWidget çš„State å¯¹è±¡ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœ StatefulWidget çš„çŠ¶æ€æ˜¯ç§æœ‰çš„ï¼ˆä¸åº”è¯¥å‘å¤–éƒ¨æš´éœ²ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»£ç ä¸­å°±ä¸åº”è¯¥å»ç›´æ¥è·å–å…¶ State å¯¹è±¡ï¼›å¦‚æœStatefulWidgetçš„çŠ¶æ€æ˜¯å¸Œæœ›æš´éœ²å‡ºçš„ï¼ˆé€šå¸¸è¿˜æœ‰ä¸€äº›ç»„ä»¶çš„æ“ä½œæ–¹æ³•ï¼‰ï¼Œæˆ‘ä»¬åˆ™å¯ä»¥å»ç›´æ¥è·å–å…¶Stateå¯¹è±¡ã€‚ä½†æ˜¯é€šè¿‡ <code>context.findAncestorStateOfType</code> è·å– StatefulWidget çš„çŠ¶æ€çš„æ–¹æ³•æ˜¯é€šç”¨çš„ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½åœ¨è¯­æ³•å±‚é¢æŒ‡å®š StatefulWidget çš„çŠ¶æ€æ˜¯å¦ç§æœ‰ï¼Œæ‰€ä»¥åœ¨ Flutter å¼€å‘ä¸­ä¾¿æœ‰äº†ä¸€ä¸ªé»˜è®¤çš„çº¦å®šï¼š**å¦‚æœ StatefulWidget çš„çŠ¶æ€æ˜¯å¸Œæœ›æš´éœ²å‡ºçš„ï¼Œåº”å½“åœ¨ StatefulWidget ä¸­æä¾›ä¸€ä¸ª<code>of</code> é™æ€æ–¹æ³•æ¥è·å–å…¶ State å¯¹è±¡ï¼Œå¼€å‘è€…ä¾¿å¯ç›´æ¥é€šè¿‡è¯¥æ–¹æ³•æ¥è·å–ï¼›å¦‚æœ Stateä¸å¸Œæœ›æš´éœ²ï¼Œåˆ™ä¸æä¾›<code>of</code>æ–¹æ³•ã€‚**è¿™ä¸ªçº¦å®šåœ¨ Flutter SDK é‡Œéšå¤„å¯è§ã€‚</p><p>ä½†å…¶å®ä¹Ÿå¯ä»¥é€šè¿‡GlobalKeyå»è·å–ï¼Œä½†æ˜¯ä»£ä»·æ¯”è¾ƒå¤§ï¼ŒåŠ ä¸Škeyçš„æ¦‚å¿µæ›´åŠ æŠ½è±¡éš¾ä»¥ç†è§£ï¼Œä¹Ÿä¸åšè§£é‡Šã€‚</p><h2 id="StatefulWidget-ç”Ÿå‘½å‘¨æœŸï¼š">StatefulWidget ç”Ÿå‘½å‘¨æœŸï¼š</h2><p><img src="1.jpg" alt=""></p><p>è·Ÿå®‰å“ç›¸æ¯”ï¼ŒåŸºæœ¬ä¸€æ¨¡ä¸€æ ·ã€‚</p><h1>çƒ­é‡è½½</h1><p>Flutterçš„çƒ­é‡è½½(hot reload)åŠŸèƒ½å¯ä»¥å¸®åŠ©æ‚¨åœ¨æ— éœ€é‡æ–°å¯åŠ¨åº”ç”¨çš„æƒ…å†µä¸‹å¿«é€Ÿã€è½»æ¾åœ°è¿›è¡Œæµ‹è¯•ã€æ„å»ºç”¨æˆ·ç•Œé¢ã€æ·»åŠ åŠŸèƒ½ä»¥åŠä¿®å¤é”™è¯¯ã€‚ é€šè¿‡å°†æ›´æ–°åçš„æºä»£ç æ–‡ä»¶æ³¨å…¥æ­£åœ¨è¿è¡Œçš„Dartè™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸­æ¥å®ç°çƒ­é‡è½½ã€‚åœ¨è™šæ‹Ÿæœºä½¿ç”¨æ–°çš„çš„å­—æ®µå’Œå‡½æ•°æ›´æ–°ç±»åï¼ŒFlutteræ¡†æ¶ä¼šè‡ªåŠ¨é‡æ–°æ„å»ºwidgetæ ‘ï¼Œä»¥ä¾¿æ‚¨å¿«é€ŸæŸ¥çœ‹æ›´æ”¹çš„æ•ˆæœã€‚</p><p>è¦çƒ­é‡è½½ä¸€ä¸ªFlutteråº”ç”¨ç¨‹åº:</p><ol><li><p>ä»å—æ”¯æŒçš„IntelliJ IDEæˆ–ç»ˆç«¯çª—å£è¿è¡Œåº”ç”¨ç¨‹åºã€‚ç‰©ç†æœºæˆ–è™šæ‹Ÿå™¨éƒ½å¯ä»¥è¿è¡Œã€‚</p></li><li><p>ä¿®æ”¹é¡¹ç›®ä¸­çš„ä¸€ä¸ªDartæ–‡ä»¶ã€‚å¤§å¤šæ•°ç±»å‹çš„ä»£ç æ›´æ”¹å¯ä»¥é‡æ–°åŠ è½½; æœ‰å…³éœ€è¦å®Œå…¨é‡æ–°å¯åŠ¨çš„æ›´æ”¹åˆ—è¡¨ï¼Œè¯·å‚é˜…<a href="https://flutterchina.club/hot-reload/#limitations">é™åˆ¶</a>ã€‚</p></li><li><p>å•å‡»å·¥å…·æ ä¸Šçš„Hot ReloadæŒ‰é’®ã€‚</p><p><img src="https://flutterchina.club/images/intellij/hot-reload.gif" alt=""></p></li></ol><p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨å‘½ä»¤è¡Œ<code>flutter run</code>è¿è¡Œåº”ç”¨ç¨‹åºï¼Œè¯·åœ¨ç»ˆç«¯çª—å£è¾“å…¥<code>r</code></p><p>æˆåŠŸæ‰§è¡Œçƒ­é‡è½½åï¼Œæ‚¨å°†åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„æ¶ˆæ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Performing hot reload...</span><br><span class="line">Reloaded 1 of 448 libraries in 2,777ms.</span><br></pre></td></tr></table></figure><p>åœ¨android studioä¸­çš„ä½ç½®ï¼š</p><p><img src="2.png" alt=""></p><p>æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥è‡ªè¡Œå°è¯•</p><h1>è·¯ç”±ç®¡ç†</h1><p>è·¯ç”±ï¼ˆRouteï¼‰åœ¨ç§»åŠ¨å¼€å‘ä¸­é€šå¸¸æŒ‡é¡µé¢ï¼ˆPageï¼‰ï¼Œè¿™è·Ÿ Web å¼€å‘ä¸­å•é¡µåº”ç”¨çš„ Route æ¦‚å¿µæ„ä¹‰æ˜¯ç›¸åŒçš„ï¼ŒRoute åœ¨ Androidä¸­ é€šå¸¸æŒ‡ä¸€ä¸ª Activityï¼Œåœ¨ iOS ä¸­æŒ‡ä¸€ä¸ª ViewControllerã€‚æ‰€è°“è·¯ç”±ç®¡ç†ï¼Œå°±æ˜¯ç®¡ç†é¡µé¢ä¹‹é—´å¦‚ä½•è·³è½¬ï¼Œé€šå¸¸ä¹Ÿå¯è¢«ç§°ä¸ºå¯¼èˆªç®¡ç†ã€‚Flutter ä¸­çš„è·¯ç”±ç®¡ç†å’ŒåŸç”Ÿå¼€å‘ç±»ä¼¼ï¼Œæ— è®ºæ˜¯ Android è¿˜æ˜¯ iOSï¼Œå¯¼èˆªç®¡ç†éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªè·¯ç”±æ ˆï¼Œè·¯ç”±å…¥æ ˆï¼ˆpushï¼‰æ“ä½œå¯¹åº”æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œè·¯ç”±å‡ºæ ˆï¼ˆpopï¼‰æ“ä½œå¯¹åº”é¡µé¢å…³é—­æ“ä½œï¼Œè€Œ<strong>è·¯ç”±ç®¡ç†ä¸»è¦æ˜¯æŒ‡å¦‚ä½•æ¥ç®¡ç†è·¯ç”±æ ˆ</strong>ã€‚</p><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬åœ¨åŸç”Ÿä¸­å¸¸å¸¸é‡åˆ°ä¸€ä¸ªç•Œé¢åœ¨ä¸å¯è§ä¹‹åæ˜¯å¦è¦é”€æ¯çš„é—®é¢˜ä»¥åŠæ¸…ç©ºè·¯ç”±æ ˆç­‰ç­‰æ“ä½œï¼Œè€Œè¿™äº›æ“ä½œåœ¨Flutterä¸­æ›´åŠ ä¾¿åˆ©ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨Navigatorè¿›è¡Œç»Ÿä¸€çš„è·¯ç”±ç®¡ç†ï¼Œå…¶ä¸­çš„æ“ä½œå…¶å®ä¹Ÿä¸ä»…é™äºpushä¸popã€‚</p><h2 id="Navigator">Navigator</h2><p><code>Navigator</code>æ˜¯ä¸€ä¸ªè·¯ç”±ç®¡ç†çš„ç»„ä»¶ï¼Œå®ƒæä¾›äº†æ‰“å¼€å’Œé€€å‡ºè·¯ç”±é¡µæ–¹æ³•ã€‚<code>Navigator</code>é€šè¿‡ä¸€ä¸ªæ ˆæ¥ç®¡ç†æ´»åŠ¨è·¯ç”±é›†åˆï¼Œå…¶å®å°±æ˜¯è·¯ç”±æ ˆã€‚é€šå¸¸å½“å‰å±å¹•æ˜¾ç¤ºçš„é¡µé¢å°±æ˜¯æ ˆé¡¶çš„è·¯ç”±ã€‚<code>Navigator</code>æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•æ¥ç®¡ç†è·¯ç”±æ ˆï¼Œåœ¨æ­¤æˆ‘ä»¬åªä»‹ç»å…¶æœ€å¸¸ç”¨çš„ä¸¤ä¸ªæ–¹æ³•ï¼š</p><h3 id="Future-push-BuildContext-context-Route-route">Future push(BuildContext context, Route route)</h3><p>å°†ç»™å®šçš„è·¯ç”±å…¥æ ˆï¼ˆå³æ‰“å¼€æ–°çš„é¡µé¢ï¼‰ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª<code>Future</code>å¯¹è±¡ï¼Œç”¨ä»¥æ¥æ”¶æ–°è·¯ç”±å‡ºæ ˆï¼ˆå³å…³é—­ï¼‰æ—¶çš„è¿”å›æ•°æ®ã€‚ä½†æ˜¯å®é™…ä¸Šï¼Œå¦‚æœä½ ä»…ä»…æ˜¯æƒ³æ‰“å¼€ä¸€ä¸ªæ–°çš„ç•Œé¢ï¼Œå®Œå…¨å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IconButton(</span><br><span class="line">    onPressed:()&#123;</span><br><span class="line">         Navigator.push(context, PageName());</span><br><span class="line">    &#125;</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>æ„å‘³ç€å°†è¿™ä¸ªç•Œé¢æ‰“å¼€ï¼ˆå…¥æ ˆï¼‰ã€‚</p><h3 id="bool-pop-BuildContext-context-result">bool pop(BuildContext context, [ result ])</h3><p>å°†æ ˆé¡¶è·¯ç”±å‡ºæ ˆï¼Œä¹Ÿå°±æ˜¯å…³é—­å½“å‰ç•Œé¢ï¼Œ<code>result</code> ä¸ºé¡µé¢å…³é—­æ—¶è¿”å›ç»™ä¸Šä¸€ä¸ªé¡µé¢çš„æ•°æ®ã€‚</p><p>åŒä¸Šï¼Œå¦‚æœæ²¡æœ‰ä»€ä¹ˆéœ€æ±‚ï¼Œç›´æ¥è¿™æ ·å°±è¡Œï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IconButton(</span><br><span class="line">    onPressed:()&#123;</span><br><span class="line">         Navigator.pop(context);</span><br><span class="line">    &#125;</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h3 id="PS">PS.</h3><p><code>Navigator</code> è¿˜æœ‰å¾ˆå¤šå…¶å®ƒæ–¹æ³•ï¼Œå¦‚<code>Navigator.replace</code>ã€<code>Navigator.popUntil</code>ç­‰,é€šè¿‡è¿™äº›æ–¹æ³•çš„ä½¿ç”¨ç”šè‡³ç»„åˆä½¿ç”¨ï¼Œå…¶å®å¯ä»¥è§£å†³å¾ˆå¤šé€»è¾‘ä¸Šçš„éš¾é¢˜ï¼Œè¯¦æƒ…è‡ªè¡Œä½¿ç”¨æœç´¢å¼•æ“è¿›è¡ŒæŸ¥é˜…ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ï¼Œè·¯ç”±é€»è¾‘ä¸Šçš„é—®é¢˜ï¼Œåªè¦èƒ½å¤Ÿå‘ç°ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ç°æˆçš„æ¯”è¾ƒæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚ä¸‹é¢æˆ‘ä»¬è¿˜éœ€è¦ä»‹ç»ä¸€ä¸‹è·¯ç”±ç›¸å…³çš„å¦ä¸€ä¸ªæ¦‚å¿µâ€œå‘½åè·¯ç”±â€ã€‚</p><h4 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³•</h4><p>Navigatorç±»ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºcontextçš„<strong>é™æ€æ–¹æ³•</strong>éƒ½å¯¹åº”ä¸€ä¸ªNavigatorçš„<strong>å®ä¾‹æ–¹æ³•</strong>ï¼Œ æ¯”å¦‚<code>Navigator.push(BuildContext context, Route route)</code>ç­‰ä»·äº<code>Navigator.of(context).push(Route route)</code> ï¼Œä¸‹é¢å‘½åè·¯ç”±ç›¸å…³çš„æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ªåœ¨ä¸Šé¢çš„contextä¸widgetæ ‘éƒ¨åˆ†æœ‰æåˆ°ã€‚</p><h2 id="è·¯ç”±ä¼ å€¼">è·¯ç”±ä¼ å€¼</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œåœ¨è·¯ç”±è·³è½¬æ—¶æˆ‘ä»¬éœ€è¦å¸¦ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚æ‰“å¼€å•†å“è¯¦æƒ…é¡µæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¸¦ä¸€ä¸ªå•†å“idï¼Œè¿™æ ·å•†å“è¯¦æƒ…é¡µæ‰çŸ¥é“å±•ç¤ºå“ªä¸ªå•†å“ä¿¡æ¯ï¼›åˆæ¯”å¦‚æˆ‘ä»¬åœ¨å¡«å†™è®¢å•æ—¶éœ€è¦é€‰æ‹©æ”¶è´§åœ°å€ï¼Œæ‰“å¼€åœ°å€é€‰æ‹©é¡µå¹¶é€‰æ‹©åœ°å€åï¼Œå¯ä»¥å°†ç”¨æˆ·é€‰æ‹©çš„åœ°å€è¿”å›åˆ°è®¢å•é¡µç­‰ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥æ¼”ç¤ºæ–°æ—§è·¯ç”±å¦‚ä½•ä¼ å‚ã€‚</p><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>TipRoute</code>è·¯ç”±ï¼Œå®ƒæ¥å—ä¸€ä¸ªæç¤ºæ–‡æœ¬å‚æ•°ï¼Œè´Ÿè´£å°†ä¼ å…¥å®ƒçš„æ–‡æœ¬æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œå¦å¤–<code>TipRoute</code>ä¸­æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªâ€œè¿”å›â€æŒ‰é’®ï¼Œç‚¹å‡»ååœ¨è¿”å›ä¸Šä¸€ä¸ªè·¯ç”±çš„åŒæ—¶ä¼šå¸¦ä¸Šä¸€ä¸ªè¿”å›å‚æ•°ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ç°ä»£ç ã€‚</p><p><code>TipRoute</code>å®ç°ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TipRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  TipRoute(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.text,  <span class="comment">// æ¥æ”¶ä¸€ä¸ªtextå‚æ•°</span></span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;æç¤º&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">18</span>),</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Text(text),</span><br><span class="line">              ElevatedButton(</span><br><span class="line">                onPressed: () =&gt; Navigator.pop(context, <span class="string">&quot;æˆ‘æ˜¯è¿”å›å€¼&quot;</span>),</span><br><span class="line">                child: Text(<span class="string">&quot;è¿”å›&quot;</span>),</span><br><span class="line">              )</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ‰“å¼€æ–°è·¯ç”±<code>TipRoute</code>çš„ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RouterTestRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: ElevatedButton(</span><br><span class="line">        onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">          <span class="comment">// æ‰“å¼€`TipRoute`ï¼Œå¹¶ç­‰å¾…è¿”å›ç»“æœ</span></span><br><span class="line">          <span class="keyword">var</span> result = <span class="keyword">await</span> Navigator.push(</span><br><span class="line">            context,</span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">              builder: (context) &#123;</span><br><span class="line">                <span class="keyword">return</span> TipRoute(</span><br><span class="line">                  <span class="comment">// è·¯ç”±å‚æ•°</span></span><br><span class="line">                  text: <span class="string">&quot;æˆ‘æ˜¯æç¤ºxxxx&quot;</span>,</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          );</span><br><span class="line">          <span class="comment">//è¾“å‡º`TipRoute`è·¯ç”±è¿”å›ç»“æœ</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;è·¯ç”±è¿”å›å€¼: <span class="subst">$result</span>&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;æ‰“å¼€æç¤ºé¡µ&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»<code>RouterTestRoute</code>é¡µçš„â€œæ‰“å¼€æç¤ºé¡µâ€æŒ‰é’®ï¼Œä¼šæ‰“å¼€<code>TipRoute</code>é¡µï¼Œè¿è¡Œæ•ˆæœå¦‚å›¾2-4æ‰€ç¤ºä¸‹ï¼š</p><p><img src="https://book.flutterchina.club/assets/img/2-4.1abb1cab.png" alt=""></p><p>éœ€è¦è¯´æ˜ï¼š</p><ol><li><p>æç¤ºæ–‡æ¡ˆâ€œæˆ‘æ˜¯æç¤ºxxxxâ€æ˜¯é€šè¿‡<code>TipRoute</code>çš„<code>text</code>å‚æ•°ä¼ é€’ç»™æ–°è·¯ç”±é¡µçš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç­‰å¾…<code>Navigator.push(â€¦)</code>è¿”å›çš„<code>Future</code>æ¥è·å–æ–°è·¯ç”±çš„è¿”å›æ•°æ®ã€‚</p></li><li><p>åœ¨<code>TipRoute</code>é¡µä¸­æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è¿”å›åˆ°ä¸Šä¸€é¡µï¼›ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥ç‚¹å‡»å¯¼èˆªæ è¿”å›ç®­å¤´ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯ç‚¹å‡»é¡µé¢ä¸­çš„â€œè¿”å›â€æŒ‰é’®ã€‚è¿™ä¸¤ç§è¿”å›æ–¹å¼çš„åŒºåˆ«æ˜¯å‰è€…ä¸ä¼šè¿”å›æ•°æ®ç»™ä¸Šä¸€ä¸ªè·¯ç”±ï¼Œè€Œåè€…ä¼šã€‚ä¸‹é¢æ˜¯åˆ†åˆ«ç‚¹å‡»é¡µé¢ä¸­çš„è¿”å›æŒ‰é’®å’Œå¯¼èˆªæ è¿”å›ç®­å¤´åï¼Œ<code>RouterTestRoute</code>é¡µä¸­<code>print</code>æ–¹æ³•åœ¨æ§åˆ¶å°è¾“å‡ºçš„å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">I/flutter (27896): è·¯ç”±è¿”å›å€¼: æˆ‘æ˜¯è¿”å›å€¼</span><br><span class="line">I/flutter (27896): è·¯ç”±è¿”å›å€¼: null</span><br></pre></td></tr></table></figure></li></ol><p>ä¸Šé¢ä»‹ç»çš„æ˜¯éå‘½åè·¯ç”±çš„ä¼ å€¼æ–¹å¼ï¼Œå‘½åè·¯ç”±çš„ä¼ å€¼æ–¹å¼ä¼šæœ‰æ‰€ä¸åŒï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹é¢ä»‹ç»å‘½åè·¯ç”±æ—¶ä»‹ç»ã€‚</p><h2 id="å‘½åè·¯ç”±">å‘½åè·¯ç”±</h2><p>æ‰€è°“â€œå‘½åè·¯ç”±â€ï¼ˆNamed Routeï¼‰å³æœ‰åå­—çš„è·¯ç”±ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç»™è·¯ç”±èµ·ä¸€ä¸ªåå­—ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡è·¯ç”±åå­—ç›´æ¥æ‰“å¼€æ–°çš„è·¯ç”±äº†ï¼Œè¿™ä¸ºè·¯ç”±ç®¡ç†å¸¦æ¥äº†ä¸€ç§ç›´è§‚ã€ç®€å•çš„æ–¹å¼ã€‚å…¶å®è¿™ç§æ–¹å¼åªæ˜¯æ–¹ä¾¿å¯¹è·¯ç”±è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œå¯ä»¥ç†è§£ä¸ºé”®å€¼å¯¹ï¼Œä¸ç›´æ¥ä½¿ç”¨å¹¶æ— å¤ªå¤§åŒºåˆ«ã€‚é€šè¿‡ä½¿ç”¨å‘½åè·¯ç”±ï¼Œå¯ä»¥å°†è·¯ç”±ä¸è·³è½¬çš„ç•Œé¢è¿›è¡Œè§£è€¦ï¼Œæ–¹ä¾¿ä¿®æ”¹ç›®æ ‡ç•Œé¢ï¼ˆä¸è¿‡å°å‹é¡¹ç›®å€’æ— æ‰€è°“ï¼‰ã€‚</p><h3 id="è·¯ç”±è¡¨">è·¯ç”±è¡¨</h3><p>è¦æƒ³ä½¿ç”¨å‘½åè·¯ç”±ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæä¾›å¹¶æ³¨å†Œä¸€ä¸ªè·¯ç”±è¡¨ï¼ˆrouting tableï¼‰ï¼Œè¿™æ ·åº”ç”¨ç¨‹åºæ‰çŸ¥é“å“ªä¸ªåå­—ä¸å“ªä¸ªè·¯ç”±ç»„ä»¶ç›¸å¯¹åº”ã€‚è·¯ç”±è¡¨çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, WidgetBuilder&gt; routes;</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯ä¸€ä¸ª<code>Map</code>ï¼Œkeyä¸ºè·¯ç”±çš„åå­—ï¼Œæ˜¯ä¸ªå­—ç¬¦ä¸²ï¼›valueæ˜¯ä¸ª<code>builder</code>å›è°ƒå‡½æ•°ï¼Œç”¨äºç”Ÿæˆç›¸åº”çš„è·¯ç”±widgetã€‚æˆ‘ä»¬åœ¨é€šè¿‡è·¯ç”±åå­—æ‰“å¼€æ–°è·¯ç”±æ—¶ï¼Œåº”ç”¨ä¼šæ ¹æ®è·¯ç”±åå­—åœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„<code>WidgetBuilder</code>å›è°ƒå‡½æ•°ï¼Œç„¶åè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ç”Ÿæˆè·¯ç”±widgetå¹¶è¿”å›ã€‚</p><h3 id="æ³¨å†Œè·¯ç”±è¡¨">æ³¨å†Œè·¯ç”±è¡¨</h3><p>è·¯ç”±è¡¨çš„æ³¨å†Œæ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬å›åˆ°ä¹‹å‰â€œè®¡æ•°å™¨â€çš„ç¤ºä¾‹ï¼Œç„¶ååœ¨<code>MyApp</code>ç±»çš„<code>build</code>æ–¹æ³•ä¸­æ‰¾åˆ°<code>MaterialApp</code>ï¼Œæ·»åŠ <code>routes</code>å±æ€§ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MaterialApp(</span><br><span class="line">  title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">  theme: ThemeData(</span><br><span class="line">    primarySwatch: Colors.blue,</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">//æ³¨å†Œè·¯ç”±è¡¨</span></span><br><span class="line">  routes:&#123;</span><br><span class="line">   <span class="string">&quot;new_page&quot;</span>:(context) =&gt; NewRoute(),</span><br><span class="line">    ... <span class="comment">// çœç•¥å…¶å®ƒè·¯ç”±æ³¨å†Œä¿¡æ¯</span></span><br><span class="line">  &#125; ,</span><br><span class="line">  home: MyHomePage(title: <span class="string">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å®Œæˆäº†è·¯ç”±è¡¨çš„æ³¨å†Œã€‚ä¸Šé¢çš„ä»£ç ä¸­<code>home</code>è·¯ç”±å¹¶æ²¡æœ‰ä½¿ç”¨å‘½åè·¯ç”±ï¼Œå¦‚æœæˆ‘ä»¬ä¹Ÿæƒ³å°†<code>home</code>æ³¨å†Œä¸ºå‘½åè·¯ç”±åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œç›´æ¥çœ‹ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MaterialApp(</span><br><span class="line">  title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">  initialRoute:<span class="string">&quot;/&quot;</span>, <span class="comment">//åä¸º&quot;/&quot;çš„è·¯ç”±ä½œä¸ºåº”ç”¨çš„home(é¦–é¡µ)</span></span><br><span class="line">  theme: ThemeData(</span><br><span class="line">    primarySwatch: Colors.blue,</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">//æ³¨å†Œè·¯ç”±è¡¨</span></span><br><span class="line">  routes:&#123;</span><br><span class="line">   <span class="string">&quot;new_page&quot;</span>:(context) =&gt; NewRoute(),</span><br><span class="line">   <span class="string">&quot;/&quot;</span>:(context) =&gt; MyHomePage(title: <span class="string">&#x27;Flutter Demo Home Page&#x27;</span>), <span class="comment">//æ³¨å†Œé¦–é¡µè·¯ç”±</span></span><br><span class="line">  &#125; </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªéœ€åœ¨è·¯ç”±è¡¨ä¸­æ³¨å†Œä¸€ä¸‹<code>MyHomePage</code>è·¯ç”±ï¼Œç„¶åå°†å…¶åå­—ä½œä¸º<code>MaterialApp</code>çš„<code>initialRoute</code>å±æ€§å€¼å³å¯ï¼Œè¯¥å±æ€§å†³å®šåº”ç”¨çš„åˆå§‹è·¯ç”±é¡µæ˜¯å“ªä¸€ä¸ªå‘½åè·¯ç”±ã€‚</p><h3 id="é€šè¿‡è·¯ç”±åæ‰“å¼€æ–°è·¯ç”±é¡µ">é€šè¿‡è·¯ç”±åæ‰“å¼€æ–°è·¯ç”±é¡µ</h3><p>è¦é€šè¿‡è·¯ç”±åç§°æ¥æ‰“å¼€æ–°è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨<code>Navigator</code> çš„<code>pushNamed</code>æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Future pushNamed(BuildContext context, <span class="built_in">String</span> routeName,&#123;<span class="built_in">Object</span> arguments&#125;)</span><br></pre></td></tr></table></figure><p><code>Navigator</code> é™¤äº†<code>pushNamed</code>æ–¹æ³•ï¼Œè¿˜æœ‰<code>pushReplacementNamed</code>ç­‰å…¶ä»–ç®¡ç†å‘½åè·¯ç”±çš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªè¡Œä½¿ç”¨æœç´¢å¼•æ“æŸ¥çœ‹ä»–ä»¬çš„ä½œç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡è·¯ç”±åæ¥æ‰“å¼€æ–°çš„è·¯ç”±é¡µï¼Œä¿®æ”¹<code>TextButton</code>çš„<code>onPressed</code>å›è°ƒä»£ç ï¼Œæ”¹ä¸ºï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onPressed: () &#123;</span><br><span class="line">  Navigator.pushNamed(context, <span class="string">&quot;new_page&quot;</span>);</span><br><span class="line">  <span class="comment">//Navigator.push(context,</span></span><br><span class="line">  <span class="comment">//  MaterialPageRoute(builder: (context) &#123;</span></span><br><span class="line">  <span class="comment">//  return NewRoute();</span></span><br><span class="line">  <span class="comment">//&#125;));  </span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>çƒ­é‡è½½åº”ç”¨ï¼Œå†æ¬¡ç‚¹å‡»â€œopen new routeâ€æŒ‰é’®ï¼Œä¾ç„¶å¯ä»¥æ‰“å¼€æ–°çš„è·¯ç”±é¡µã€‚</p><h3 id="å‘½åè·¯ç”±å‚æ•°ä¼ é€’">å‘½åè·¯ç”±å‚æ•°ä¼ é€’</h3><p>åœ¨Flutteræœ€åˆçš„ç‰ˆæœ¬ä¸­ï¼Œå‘½åè·¯ç”±æ˜¯ä¸èƒ½ä¼ é€’å‚æ•°çš„ï¼Œåæ¥æ‰æ”¯æŒäº†å‚æ•°ï¼›ä¸‹é¢å±•ç¤ºå‘½åè·¯ç”±å¦‚ä½•ä¼ é€’å¹¶è·å–è·¯ç”±å‚æ•°ï¼š</p><p>æˆ‘ä»¬å…ˆæ³¨å†Œä¸€ä¸ªè·¯ç”±ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">routes:&#123;</span><br><span class="line">  <span class="string">&quot;new_page&quot;</span>:(context) =&gt; EchoRoute(),</span><br><span class="line"> &#125; ,</span><br></pre></td></tr></table></figure><p>åœ¨è·¯ç”±é¡µé€šè¿‡<code>RouteSetting</code>å¯¹è±¡è·å–è·¯ç”±å‚æ•°ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EchoRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//è·å–è·¯ç”±å‚æ•°  </span></span><br><span class="line">    <span class="keyword">var</span> args=ModalRoute.of(context).settings.arguments;</span><br><span class="line">    <span class="comment">//...çœç•¥æ— å…³ä»£ç </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ‰“å¼€è·¯ç”±æ—¶ä¼ é€’å‚æ•°</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushNamed(<span class="string">&quot;new_page&quot;</span>, arguments: <span class="string">&quot;hi&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="PS-2">PS.</h3><p>å…³äºä¸€äº›è·¯ç”±çš„åŸºæœ¬é€»è¾‘æ“ä½œï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/44650be76110">è¿™ç¯‡åšå®¢</a></p><h1>å¸ƒå±€é€»è¾‘</h1><p>åœ¨åŸç”Ÿå¼€å‘çš„æ—¶å€™ä¸€ç›´æå€¡å¤§å®¶ç”¨LinearLayoutï¼Œå…¶ä¸­ä¸€ä¸ªåŸå› å°±æ˜¯Flutterçš„é»˜è®¤å¸ƒå±€é€»è¾‘åŸºæœ¬å°±æ˜¯LinearLayoutï¼Œæ‰€ä»¥åœ¨åŸç”Ÿä½¿ç”¨ç›¸å¯¹å¸ƒå±€çš„åŒå­¦å¯èƒ½ä¼šæ¯”è¾ƒéš¾å—ï¼Œä¸è¿‡ç”¨ä¹ æƒ¯äº†å°±å¥½ï¼Œæ¯•ç«Ÿè¿™ä¸ªå¸ƒå±€é€»è¾‘æ˜¯å¾ˆå®¹æ˜“æ¥å—çš„ã€‚</p><p>å¦‚æœå¤§å®¶çœ‹ã€ŠFlutterå®æˆ˜ã€‹ï¼Œåœ¨å¸ƒå±€ç±»ç»„ä»¶ï¼ˆç¬¬å››ç« ï¼‰å¯ä»¥å…ˆå¿½ç•¥4.1å’Œ4.2ï¼Œè¿™ä¸¤éƒ¨åˆ†å¯èƒ½å¯¹å¤§å®¶æ¥è¯´ç‰¹åˆ«é™Œç”Ÿã€éš¾ä»¥æ¥å—ï¼Œä¸è¿‡è¿˜æ˜¯æ¨èäº†è§£ä¸€ä¸‹SizedBoxï¼Œè¿™ä¸ªå®¹å™¨ç®€å•å¥½ç”¨ã€‚</p><p>ä¸‹é¢ä¸»è¦è¯´ä¸€ä¸‹çº¿æ€§å¸ƒå±€ä¸å¼¹æ€§å¸ƒå±€ã€‚</p><h2 id="çº¿æ€§å¸ƒå±€">çº¿æ€§å¸ƒå±€</h2><p>Flutter ä¸­é€šè¿‡<code>Row</code>å’Œ<code>Column</code>æ¥å®ç°çº¿æ€§å¸ƒå±€ï¼Œç±»ä¼¼äºAndroid ä¸­çš„<code>LinearLayout</code>æ§ä»¶ã€‚<code>Row</code>å’Œ<code>Column</code>éƒ½ç»§æ‰¿è‡ª<code>Flex</code>ï¼Œæˆ‘ä»¬å°†åœ¨å¼¹æ€§å¸ƒå±€ä¸€èŠ‚ä¸­è¯¦ç»†ä»‹ç»<code>Flex</code>ã€‚</p><h3 id="ä¸»è½´å’Œçºµè½´">ä¸»è½´å’Œçºµè½´</h3><p>å¯¹äºçº¿æ€§å¸ƒå±€ï¼Œæœ‰<strong>ä¸»è½´</strong>å’Œ<strong>çºµè½´</strong>ä¹‹åˆ†ï¼Œ<strong>å¦‚æœå¸ƒå±€æ˜¯æ²¿æ°´å¹³æ–¹å‘ï¼Œé‚£ä¹ˆä¸»è½´å°±æ˜¯æŒ‡æ°´å¹³æ–¹å‘ï¼Œè€Œçºµè½´å³å‚ç›´æ–¹å‘ï¼›å¦‚æœå¸ƒå±€æ²¿å‚ç›´æ–¹å‘ï¼Œé‚£ä¹ˆä¸»è½´å°±æ˜¯æŒ‡å‚ç›´æ–¹å‘ï¼Œè€Œçºµè½´å°±æ˜¯æ°´å¹³æ–¹å‘ã€‚åœ¨çº¿æ€§å¸ƒå±€ä¸­ï¼Œæœ‰ä¸¤ä¸ªå®šä¹‰å¯¹é½æ–¹å¼çš„æšä¸¾ç±»<code>MainAxisAlignment</code>å’Œ<code>CrossAxisAlignment</code>ï¼Œåˆ†åˆ«ä»£è¡¨ä¸»è½´å¯¹é½å’Œçºµè½´å¯¹é½ã€‚</strong></p><h3 id="Row">Row</h3><p>Rowå¯ä»¥æ²¿æ°´å¹³æ–¹å‘æ’åˆ—å…¶å­widgetã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Row(&#123;</span><br><span class="line">  ...  </span><br><span class="line">  TextDirection textDirection,    </span><br><span class="line">  MainAxisSize mainAxisSize = MainAxisSize.max,    </span><br><span class="line">  MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start,</span><br><span class="line">  VerticalDirection verticalDirection = VerticalDirection.down,  </span><br><span class="line">  CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.center,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>textDirection</code>ï¼šè¡¨ç¤ºæ°´å¹³æ–¹å‘å­ç»„ä»¶çš„å¸ƒå±€é¡ºåº(æ˜¯ä»å·¦å¾€å³è¿˜æ˜¯ä»å³å¾€å·¦)ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿå½“å‰Localeç¯å¢ƒçš„æ–‡æœ¬æ–¹å‘(å¦‚ä¸­æ–‡ã€è‹±è¯­éƒ½æ˜¯ä»å·¦å¾€å³ï¼Œè€Œé˜¿æ‹‰ä¼¯è¯­æ˜¯ä»å³å¾€å·¦)ã€‚</li><li><code>mainAxisSize</code>ï¼š<strong>è¡¨ç¤º<code>Row</code>åœ¨ä¸»è½´(æ°´å¹³)æ–¹å‘å ç”¨çš„ç©ºé—´</strong>ï¼Œé»˜è®¤æ˜¯<code>MainAxisSize.max</code>ï¼Œè¡¨ç¤ºå°½å¯èƒ½å¤šçš„å ç”¨æ°´å¹³æ–¹å‘çš„ç©ºé—´ï¼Œæ­¤æ—¶æ— è®ºå­ widgets å®é™…å ç”¨å¤šå°‘æ°´å¹³ç©ºé—´ï¼Œ<code>Row</code>çš„å®½åº¦å§‹ç»ˆç­‰äºæ°´å¹³æ–¹å‘çš„æœ€å¤§å®½åº¦ï¼›è€Œ<code>MainAxisSize.min</code>è¡¨ç¤ºå°½å¯èƒ½å°‘çš„å ç”¨æ°´å¹³ç©ºé—´ï¼Œå½“å­ç»„ä»¶æ²¡æœ‰å æ»¡æ°´å¹³å‰©ä½™ç©ºé—´ï¼Œåˆ™<code>Row</code>çš„å®é™…å®½åº¦ç­‰äºæ‰€æœ‰å­ç»„ä»¶å ç”¨çš„çš„æ°´å¹³ç©ºé—´ï¼›</li><li><code>mainAxisAlignment</code>ï¼š<strong>è¡¨ç¤ºå­ç»„ä»¶åœ¨<code>Row</code>æ‰€å ç”¨çš„æ°´å¹³ç©ºé—´å†…å¯¹é½æ–¹å¼</strong>ï¼Œå¦‚æœ<code>mainAxisSize</code>å€¼ä¸º<code>MainAxisSize.min</code>ï¼Œåˆ™æ­¤å±æ€§æ— æ„ä¹‰ï¼Œå› ä¸ºå­ç»„ä»¶çš„å®½åº¦ç­‰äº<code>Row</code>çš„å®½åº¦ã€‚åªæœ‰å½“<code>mainAxisSize</code>çš„å€¼ä¸º<code>MainAxisSize.max</code>æ—¶ï¼Œæ­¤å±æ€§æ‰æœ‰æ„ä¹‰ï¼Œ<code>MainAxisAlignment.start</code>è¡¨ç¤ºæ²¿<code>textDirection</code>çš„åˆå§‹æ–¹å‘å¯¹é½ï¼Œå¦‚<code>textDirection</code>å–å€¼ä¸º<code>TextDirection.ltr</code>æ—¶ï¼Œåˆ™<code>MainAxisAlignment.start</code>è¡¨ç¤ºå·¦å¯¹é½ï¼Œ<code>textDirection</code>å–å€¼ä¸º<code>TextDirection.rtl</code>æ—¶è¡¨ç¤ºä»å³å¯¹é½ã€‚è€Œ<code>MainAxisAlignment.end</code>å’Œ<code>MainAxisAlignment.start</code>æ­£å¥½ç›¸åï¼›<code>MainAxisAlignment.center</code>è¡¨ç¤ºå±…ä¸­å¯¹é½ã€‚è¯»è€…å¯ä»¥è¿™ä¹ˆç†è§£ï¼š<code>textDirection</code>æ˜¯<code>mainAxisAlignment</code>çš„å‚è€ƒç³»ã€‚</li><li><code>verticalDirection</code>ï¼šè¡¨ç¤º<code>Row</code>çºµè½´ï¼ˆå‚ç›´ï¼‰çš„å¯¹é½æ–¹å‘ï¼Œé»˜è®¤æ˜¯<code>VerticalDirection.down</code>ï¼Œè¡¨ç¤ºä»ä¸Šåˆ°ä¸‹ã€‚</li><li><code>crossAxisAlignment</code>ï¼šè¡¨ç¤ºå­ç»„ä»¶åœ¨çºµè½´æ–¹å‘çš„å¯¹é½æ–¹å¼ï¼Œ<code>Row</code>çš„é«˜åº¦ç­‰äºå­ç»„ä»¶ä¸­æœ€é«˜çš„å­å…ƒç´ é«˜åº¦ï¼Œå®ƒçš„å–å€¼å’Œ<code>MainAxisAlignment</code>ä¸€æ ·(åŒ…å«<code>start</code>ã€<code>end</code>ã€ <code>center</code>ä¸‰ä¸ªå€¼)ï¼Œä¸åŒçš„æ˜¯<code>crossAxisAlignment</code>çš„å‚è€ƒç³»æ˜¯<code>verticalDirection</code>ï¼Œå³<code>verticalDirection</code>å€¼ä¸º<code>VerticalDirection.down</code>æ—¶<code>crossAxisAlignment.start</code>æŒ‡é¡¶éƒ¨å¯¹é½ï¼Œ<code>verticalDirection</code>å€¼ä¸º<code>VerticalDirection.up</code>æ—¶ï¼Œ<code>crossAxisAlignment.start</code>æŒ‡åº•éƒ¨å¯¹é½ï¼›è€Œ<code>crossAxisAlignment.end</code>å’Œ<code>crossAxisAlignment.start</code>æ­£å¥½ç›¸åï¼›</li><li><strong><code>children</code> ï¼šå­ç»„ä»¶æ•°ç»„ã€‚</strong></li></ul><h3 id="ç¤ºä¾‹-2">ç¤ºä¾‹</h3><p>è¯·é˜…è¯»ä¸‹é¢ä»£ç ï¼Œå…ˆæƒ³è±¡ä¸€ä¸‹è¿è¡Œçš„ç»“æœï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Column(</span><br><span class="line">  <span class="comment">//æµ‹è¯•Rowå¯¹é½æ–¹å¼ï¼Œæ’é™¤Columné»˜è®¤å±…ä¸­å¯¹é½çš„å¹²æ‰°</span></span><br><span class="line">  crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot; hello world &quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot; I am Jack &quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    Row(</span><br><span class="line">      mainAxisSize: MainAxisSize.min,</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot; hello world &quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot; I am Jack &quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">      textDirection: TextDirection.rtl,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot; hello world &quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot; I am Jack &quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    Row(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,  </span><br><span class="line">      verticalDirection: VerticalDirection.up,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot; hello world &quot;</span>, style: TextStyle(fontSize: <span class="number">30.0</span>),),</span><br><span class="line">        Text(<span class="string">&quot; I am Jack &quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å®é™…è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="3.png" alt=""></p><p>è§£é‡Šï¼šç¬¬ä¸€ä¸ª<code>Row</code>å¾ˆç®€å•ï¼Œé»˜è®¤ä¸ºå±…ä¸­å¯¹é½ï¼›ç¬¬äºŒä¸ª<code>Row</code>ï¼Œç”±äº<code>mainAxisSize</code>å€¼ä¸º<code>MainAxisSize.min</code>ï¼Œ<code>Row</code>çš„å®½åº¦ç­‰äºä¸¤ä¸ª<code>Text</code>çš„å®½åº¦å’Œï¼Œæ‰€ä»¥å¯¹é½æ˜¯æ— æ„ä¹‰çš„ï¼Œæ‰€ä»¥ä¼šä»å·¦å¾€å³æ˜¾ç¤ºï¼›ç¬¬ä¸‰ä¸ª<code>Row</code>è®¾ç½®<code>textDirection</code>å€¼ä¸º<code>TextDirection.rtl</code>ï¼Œæ‰€ä»¥å­ç»„ä»¶ä¼šä»å³å‘å·¦çš„é¡ºåºæ’åˆ—ï¼Œè€Œæ­¤æ—¶<code>MainAxisAlignment.end</code>è¡¨ç¤ºå·¦å¯¹é½ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¾ç¤ºç»“æœå°±æ˜¯å›¾ä¸­ç¬¬ä¸‰è¡Œçš„æ ·å­ï¼›ç¬¬å››ä¸ª Row æµ‹è¯•çš„æ˜¯çºµè½´çš„å¯¹é½æ–¹å¼ï¼Œç”±äºä¸¤ä¸ªå­ Text å­—ä½“ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å…¶é«˜åº¦ä¹Ÿä¸åŒï¼Œæˆ‘ä»¬æŒ‡å®šäº†<code>verticalDirection</code>å€¼ä¸º<code>VerticalDirection.up</code>ï¼Œå³ä»ä½å‘é¡¶æ’åˆ—ï¼Œè€Œæ­¤æ—¶<code>crossAxisAlignment</code>å€¼ä¸º<code>CrossAxisAlignment.start</code>è¡¨ç¤ºåº•å¯¹é½ã€‚</p><h3 id="Column">Column</h3><p><code>Column</code>å¯ä»¥åœ¨å‚ç›´æ–¹å‘æ’åˆ—å…¶å­ç»„ä»¶ã€‚å‚æ•°å’Œ<code>Row</code>ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å¸ƒå±€æ–¹å‘ä¸ºå‚ç›´ï¼Œä¸»è½´çºµè½´æ­£å¥½ç›¸åï¼Œè¯»è€…å¯ç±»æ¯”<code>Row</code>æ¥ç†è§£ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CenterColumnRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot;hi&quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot;world&quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="4.png" alt=""></p><p>è§£é‡Šï¼š</p><ul><li>ç”±äºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®š<code>Column</code>çš„<code>mainAxisSize</code>ï¼Œæ‰€ä»¥ä½¿ç”¨é»˜è®¤å€¼<code>MainAxisSize.max</code>ï¼Œåˆ™<code>Column</code>ä¼šåœ¨å‚ç›´æ–¹å‘å ç”¨å°½å¯èƒ½å¤šçš„ç©ºé—´ï¼Œæ­¤ä¾‹ä¸­ä¼šå æ»¡æ•´ä¸ªå±å¹•é«˜åº¦ã€‚</li><li>ç”±äºæˆ‘ä»¬æŒ‡å®šäº† <code>crossAxisAlignment</code> å±æ€§ä¸º<code>CrossAxisAlignment.center</code>ï¼Œé‚£ä¹ˆå­é¡¹åœ¨<code>Column</code>çºµè½´æ–¹å‘ï¼ˆæ­¤æ—¶ä¸ºæ°´å¹³æ–¹å‘ï¼‰ä¼šå±…ä¸­å¯¹é½ã€‚æ³¨æ„ï¼Œåœ¨æ°´å¹³æ–¹å‘å¯¹é½æ˜¯æœ‰è¾¹ç•Œçš„ï¼Œæ€»å®½åº¦ä¸º<code>Column</code>å ç”¨ç©ºé—´çš„å®é™…å®½åº¦ï¼Œè€Œå®é™…çš„å®½åº¦å–å†³äºå­é¡¹ä¸­å®½åº¦æœ€å¤§çš„Widgetã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>Column</code>æœ‰ä¸¤ä¸ªå­Widgetï¼Œè€Œæ˜¾ç¤ºâ€œworldâ€çš„<code>Text</code>å®½åº¦æœ€å¤§ï¼Œæ‰€ä»¥<code>Column</code>çš„å®é™…å®½åº¦åˆ™ä¸º<code>Text(&quot;world&quot;)</code> çš„å®½åº¦ï¼Œæ‰€ä»¥å±…ä¸­å¯¹é½å<code>Text(&quot;hi&quot;)</code>ä¼šæ˜¾ç¤ºåœ¨<code>Text(&quot;world&quot;)</code>çš„ä¸­é—´éƒ¨åˆ†ã€‚</li></ul><p><strong>å®é™…ä¸Šï¼Œ<code>Row</code>å’Œ<code>Column</code>éƒ½åªä¼šåœ¨ä¸»è½´æ–¹å‘å ç”¨å°½å¯èƒ½å¤§çš„ç©ºé—´ï¼Œè€Œçºµè½´çš„é•¿åº¦åˆ™å–å†³äºä»–ä»¬æœ€å¤§å­å…ƒç´ çš„é•¿åº¦</strong>ã€‚å¦‚æœæˆ‘ä»¬æƒ³è®©æœ¬ä¾‹ä¸­çš„ä¸¤ä¸ªæ–‡æœ¬æ§ä»¶åœ¨æ•´ä¸ªæ‰‹æœºå±å¹•ä¸­é—´å¯¹é½ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><p>å°†<code>Column</code>çš„å®½åº¦æŒ‡å®šä¸ºå±å¹•å®½åº¦ï¼›è¿™å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ConstrainedBox</code>æˆ–<code>SizedBox</code>ï¼ˆæˆ‘ä»¬å°†åœ¨åé¢ç« èŠ‚ä¸­ä¸“é—¨ä»‹ç»è¿™ä¸¤ä¸ªWidgetï¼‰æ¥å¼ºåˆ¶æ›´æ”¹å®½åº¦é™åˆ¶ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ConstrainedBox(</span><br><span class="line">  constraints: BoxConstraints(minWidth: <span class="built_in">double</span>.infinity), </span><br><span class="line">  child: Column(</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Text(<span class="string">&quot;hi&quot;</span>),</span><br><span class="line">      Text(<span class="string">&quot;world&quot;</span>),</span><br><span class="line">    ],</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å°†<code>minWidth</code>è®¾ä¸º<code>double.infinity</code>ï¼Œå¯ä»¥ä½¿å®½åº¦å ç”¨å°½å¯èƒ½å¤šçš„ç©ºé—´ã€‚</p></li><li><p>ä½¿ç”¨<code>Center</code> ç»„ä»¶ï¼›å°†åœ¨åé¢ç« èŠ‚ä¸­ä»‹ç»ã€‚</p></li></ul><h3 id="ç‰¹æ®Šæƒ…å†µ">ç‰¹æ®Šæƒ…å†µ</h3><p>å¦‚æœ<code>Row</code>é‡Œé¢åµŒå¥—<code>Row</code>ï¼Œæˆ–è€…<code>Column</code>é‡Œé¢å†åµŒå¥—<code>Column</code>ï¼Œé‚£ä¹ˆåªæœ‰æœ€å¤–é¢çš„<code>Row</code>æˆ–<code>Column</code>ä¼šå ç”¨å°½å¯èƒ½å¤§çš„ç©ºé—´ï¼Œé‡Œé¢<code>Row</code>æˆ–<code>Column</code>æ‰€å ç”¨çš„ç©ºé—´ä¸ºå®é™…å¤§å°ï¼Œä¸‹é¢ä»¥<code>Column</code>ä¸ºä¾‹è¯´æ˜ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  color: Colors.green,</span><br><span class="line">  child: Padding(</span><br><span class="line">    padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">16.0</span>),</span><br><span class="line">    child: Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      mainAxisSize: MainAxisSize.max, <span class="comment">//æœ‰æ•ˆï¼Œå¤–å±‚Columé«˜åº¦ä¸ºæ•´ä¸ªå±å¹•</span></span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Container(</span><br><span class="line">          color: Colors.red,</span><br><span class="line">          child: Column(</span><br><span class="line">            mainAxisSize: MainAxisSize.max,<span class="comment">//æ— æ•ˆï¼Œå†…å±‚Columé«˜åº¦ä¸ºå®é™…é«˜åº¦  </span></span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              Text(<span class="string">&quot;hello world &quot;</span>),</span><br><span class="line">              Text(<span class="string">&quot;I am Jack &quot;</span>),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="5.png" alt=""></p><p>å¦‚æœè¦è®©é‡Œé¢çš„<code>Column</code>å æ»¡å¤–éƒ¨<code>Column</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>Expanded</code> ç»„ä»¶ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Expanded( </span><br><span class="line">  child: Container(</span><br><span class="line">    color: Colors.red,</span><br><span class="line">    child: Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center, <span class="comment">//å‚ç›´æ–¹å‘å±…ä¸­å¯¹é½</span></span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Text(<span class="string">&quot;hello world &quot;</span>),</span><br><span class="line">        Text(<span class="string">&quot;I am Jack &quot;</span>),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="6.png" alt=""></p><p>æˆ‘ä»¬å°†åœ¨ä»‹ç»å¼¹æ€§å¸ƒå±€æ—¶è¯¦ç»†ä»‹ç»Expandedã€‚</p><h2 id="å¼¹æ€§å¸ƒå±€">å¼¹æ€§å¸ƒå±€</h2><p>å¼¹æ€§å¸ƒå±€å…è®¸å­ç»„ä»¶æŒ‰ç…§ä¸€å®šæ¯”ä¾‹æ¥åˆ†é…çˆ¶å®¹å™¨ç©ºé—´ã€‚å¼¹æ€§å¸ƒå±€çš„æ¦‚å¿µåœ¨å…¶å®ƒUIç³»ç»Ÿä¸­ä¹Ÿéƒ½å­˜åœ¨ï¼Œå¦‚ H5 ä¸­çš„å¼¹æ€§ç›’å­å¸ƒå±€ï¼ŒAndroidä¸­ çš„<code>FlexboxLayout</code>ç­‰ã€‚Flutter ä¸­çš„å¼¹æ€§å¸ƒå±€ä¸»è¦é€šè¿‡<code>Flex</code>å’Œ<code>Expanded</code>æ¥é…åˆå®ç°ã€‚</p><h3 id="Flex">Flex</h3><p><code>Flex</code>ç»„ä»¶å¯ä»¥æ²¿ç€æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ’åˆ—å­ç»„ä»¶ï¼Œå¦‚æœä½ çŸ¥é“ä¸»è½´æ–¹å‘ï¼Œä½¿ç”¨<code>Row</code>æˆ–<code>Column</code>ä¼šæ–¹ä¾¿ä¸€äº›ï¼Œ<strong>å› ä¸º<code>Row</code>å’Œ<code>Column</code>éƒ½ç»§æ‰¿è‡ª<code>Flex</code></strong>ï¼Œå‚æ•°åŸºæœ¬ç›¸åŒï¼Œæ‰€ä»¥èƒ½ä½¿ç”¨Flexçš„åœ°æ–¹åŸºæœ¬ä¸Šéƒ½å¯ä»¥ä½¿ç”¨<code>Row</code>æˆ–<code>Column</code>ã€‚<code>Flex</code>æœ¬èº«åŠŸèƒ½æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œå®ƒä¹Ÿå¯ä»¥å’Œ<code>Expanded</code>ç»„ä»¶é…åˆå®ç°å¼¹æ€§å¸ƒå±€ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åªè®¨è®º<code>Flex</code>å’Œå¼¹æ€§å¸ƒå±€ç›¸å…³çš„å±æ€§(å…¶å®ƒå±æ€§å·²ç»åœ¨ä»‹ç»<code>Row</code>å’Œ<code>Column</code>æ—¶ä»‹ç»è¿‡äº†)ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flex(&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">this</span>.direction, <span class="comment">//å¼¹æ€§å¸ƒå±€çš„æ–¹å‘, Rowé»˜è®¤ä¸ºæ°´å¹³æ–¹å‘ï¼ŒColumné»˜è®¤ä¸ºå‚ç›´æ–¹å‘</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>Flex</code>ç»§æ‰¿è‡ª<code>MultiChildRenderObjectWidget</code>ï¼Œå¯¹åº”çš„<code>RenderObject</code>ä¸º<code>RenderFlex</code>ï¼Œ<code>RenderFlex</code>ä¸­å®ç°äº†å…¶å¸ƒå±€ç®—æ³•ã€‚</p><h3 id="Expanded">Expanded</h3><p><strong>Expanded åªèƒ½ä½œä¸º Flex çš„å­©å­ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼‰</strong>ï¼Œå®ƒå¯ä»¥æŒ‰æ¯”ä¾‹â€œæ‰©ä¼¸â€<code>Flex</code>å­ç»„ä»¶æ‰€å ç”¨çš„ç©ºé—´ã€‚å› ä¸º <code>Row</code>å’Œ<code>Column</code> ç»§éƒ½æ‰¿è‡ªFlexï¼Œæ‰€ä»¥ Expanded ä¹Ÿå¯ä»¥ä½œä¸ºå®ƒä»¬çš„å­©å­ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒExpandedç»„ä»¶å¿…é¡»ç”¨åœ¨Rowã€Columnã€Flexå†…ï¼Œå¹¶ä¸”ä»Expandedåˆ°å°è£…å®ƒçš„Rowã€Columnã€Flexçš„è·¯å¾„å¿…é¡»åªåŒ…æ‹¬StatelessWidgetsæˆ–StatefulWidgetsç»„ä»¶(ä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„ç»„ä»¶ï¼ŒåƒRenderObjectWidgetï¼Œå®ƒæ˜¯æ¸²æŸ“å¯¹è±¡ï¼Œä¸å†æ”¹å˜å°ºå¯¸äº†ï¼Œå› æ­¤Expandedä¸èƒ½æ”¾è¿›RenderObjectWidget)ã€‚</p><p>æ³¨æ„ä¸€ç‚¹ï¼šåœ¨Rowä¸­ä½¿ç”¨Expandedçš„æ—¶å€™ï¼Œæ— æ³•æŒ‡å®šExpandedä¸­çš„å­ç»„ä»¶çš„å®½åº¦widthï¼Œä½†å¯ä»¥æŒ‡å®šå…¶é«˜åº¦heightã€‚åŒç†ï¼Œåœ¨Columnä¸­ä½¿ç”¨Expandedçš„æ—¶å€™ï¼Œæ— æ³•æŒ‡å®šExpandedä¸­çš„å­ç»„ä»¶çš„é«˜åº¦heightï¼Œå¯ä»¥æŒ‡å®šå®½åº¦widthã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Expanded(&#123;</span><br><span class="line">  <span class="built_in">int</span> flex = <span class="number">1</span>, </span><br><span class="line">  <span class="keyword">required</span> Widget child,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>flex</code>å‚æ•°ä¸ºå¼¹æ€§ç³»æ•°ï¼Œå¦‚æœä¸º 0 æˆ–<code>null</code>ï¼Œåˆ™<code>child</code>æ˜¯æ²¡æœ‰å¼¹æ€§çš„ï¼Œå³ä¸ä¼šè¢«æ‰©ä¼¸å ç”¨çš„ç©ºé—´ã€‚å¦‚æœå¤§äº0ï¼Œæ‰€æœ‰çš„<code>Expanded</code>æŒ‰ç…§å…¶ flex çš„æ¯”ä¾‹æ¥åˆ†å‰²ä¸»è½´çš„å…¨éƒ¨ç©ºé—²ç©ºé—´ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlexLayoutTestRoute</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="comment">//Flexçš„ä¸¤ä¸ªå­widgetæŒ‰1ï¼š2æ¥å æ®æ°´å¹³ç©ºé—´  </span></span><br><span class="line">        Flex(</span><br><span class="line">          direction: Axis.horizontal,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            Expanded(</span><br><span class="line">              flex: <span class="number">1</span>,</span><br><span class="line">              child: Container(</span><br><span class="line">                height: <span class="number">30.0</span>,</span><br><span class="line">                color: Colors.red,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            Expanded(</span><br><span class="line">              flex: <span class="number">2</span>,</span><br><span class="line">              child: Container(</span><br><span class="line">                height: <span class="number">30.0</span>,</span><br><span class="line">                color: Colors.green,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        Padding(</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.only(top: <span class="number">20.0</span>),</span><br><span class="line">          child: SizedBox(</span><br><span class="line">            height: <span class="number">100.0</span>,</span><br><span class="line">            <span class="comment">//Flexçš„ä¸‰ä¸ªå­widgetï¼Œåœ¨å‚ç›´æ–¹å‘æŒ‰2ï¼š1ï¼š1æ¥å ç”¨100åƒç´ çš„ç©ºé—´  </span></span><br><span class="line">            child: Flex(</span><br><span class="line">              direction: Axis.vertical,</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Expanded(</span><br><span class="line">                  flex: <span class="number">2</span>,</span><br><span class="line">                  child: Container(</span><br><span class="line">                    height: <span class="number">30.0</span>,</span><br><span class="line">                    color: Colors.red,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Spacer(</span><br><span class="line">                  flex: <span class="number">1</span>,</span><br><span class="line">                ),</span><br><span class="line">                Expanded(</span><br><span class="line">                  flex: <span class="number">1</span>,</span><br><span class="line">                  child: Container(</span><br><span class="line">                    height: <span class="number">30.0</span>,</span><br><span class="line">                    color: Colors.green,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="7.png" alt="å¼¹æ€§å¸ƒå±€"></p><p>ç¤ºä¾‹ä¸­çš„<code>Spacer</code>çš„åŠŸèƒ½æ˜¯å ç”¨æŒ‡å®šæ¯”ä¾‹çš„ç©ºé—´ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯<code>Expanded</code>çš„ä¸€ä¸ªåŒ…è£…ç±»ï¼Œ<code>Spacer</code>çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Spacer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Spacer(&#123;Key? key, <span class="keyword">this</span>.flex = <span class="number">1</span>&#125;)</span><br><span class="line">    : <span class="keyword">assert</span>(flex != <span class="keyword">null</span>),</span><br><span class="line">      <span class="keyword">assert</span>(flex &gt; <span class="number">0</span>),</span><br><span class="line">      <span class="keyword">super</span>(key: key);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> flex;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Expanded(</span><br><span class="line">      flex: flex,</span><br><span class="line">      child: <span class="keyword">const</span> SizedBox.shrink(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“">å°ç»“</h3><p>å¼¹æ€§å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯<code>Row</code>ã€<code>Column</code>ä»¥åŠ<code>Flex</code>çš„å…³ç³»ã€‚</p><p>Expandedç»å¸¸ä¼šå‡ºç°åº”ç”¨ä¸æ­£ç¡®çš„æŠ¥é”™ï¼Œä¸€èˆ¬æ˜¯å°†Expandedç”¨åœ¨äº†ä¸€ä¸ªæ— ç•Œwidgetä¸­å¯¼è‡´æ¸²æŸ“å™¨æŠ¥é”™ï¼Œå¤§å®¶å¤šå»å°è¯•ã€è¸©å‘ã€‚</p><p>å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/devnn/article/details/105892081">è¿™ä¸ªåšå®¢</a>å»äº†è§£ä¸€äº›expandedä¸colå’Œrowçš„ç»„åˆä½¿ç”¨</p><h3 id="PS-3">PS.</h3><p><a href="https://juejin.cn/post/6844903857697325069">å ä½ Spacer()</a>,ä»¥åŠ<a href="https://www.youtube.com/watch?v=7FJgd7QN1zI">æ²¹ç®¡æ•™å­¦</a></p><h1>çŠ¶æ€ç®¡ç†</h1><p>è¿™é‡Œæä¸€å˜´çŠ¶æ€ç®¡ç†ï¼Œä½†æ˜¯åˆæœŸé‡åˆ°çš„çŠ¶æ€ç®¡ç†é—®é¢˜å¯èƒ½å¹¶ä¸å¤šã€‚</p><p>å“åº”å¼çš„ç¼–ç¨‹æ¡†æ¶ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªæ°¸æ’çš„ä¸»é¢˜â€”â€”â€œçŠ¶æ€(State)ç®¡ç†â€ï¼Œæ— è®ºæ˜¯åœ¨ React/Vueï¼ˆä¸¤è€…éƒ½æ˜¯æ”¯æŒå“åº”å¼ç¼–ç¨‹çš„ Web å¼€å‘æ¡†æ¶ï¼‰è¿˜æ˜¯ Flutter ä¸­ï¼Œä»–ä»¬è®¨è®ºçš„é—®é¢˜å’Œè§£å†³çš„æ€æƒ³éƒ½æ˜¯ä¸€è‡´çš„ã€‚æ‰€ä»¥ï¼Œ<code>StatefulWidget</code>çš„çŠ¶æ€åº”è¯¥è¢«è°ç®¡ç†ï¼ŸWidgetæœ¬èº«ï¼Ÿçˆ¶ Widget ï¼Ÿéƒ½ä¼šï¼Ÿè¿˜æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Ÿç­”æ¡ˆæ˜¯å–å†³äºå®é™…æƒ…å†µï¼ä»¥ä¸‹æ˜¯ç®¡ç†çŠ¶æ€çš„æœ€å¸¸è§çš„æ–¹æ³•ï¼š</p><ul><li>Widget ç®¡ç†è‡ªå·±çš„çŠ¶æ€ã€‚</li><li>Widget ç®¡ç†å­ Widget çŠ¶æ€ã€‚</li><li>æ··åˆç®¡ç†ï¼ˆçˆ¶ Widget å’Œå­ Widget éƒ½ç®¡ç†çŠ¶æ€ï¼‰ã€‚</li></ul><p>å®é™…ä¸Šï¼Œè¿˜æ˜¯ä»¥è®¡æ•°å™¨ä¸ºä¾‹ï¼Œä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜å°±æ˜¯ï¼Œç‚¹å‡»åŠ å·ä¹‹åå¦‚ä½•æ›´æ–°ç•Œé¢ï¼Ÿå¦‚æœä½ ä½¿ç”¨setStateï¼Œå½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯ä¼šå°†æ•´ä¸ªwidgetæ ‘éƒ½æ›´æ–°ä¸€éï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å¾ˆæ˜ç¡®åªä¼šæ›´æ–°æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œè¿™æ˜¯å¾ˆæµªè´¹æ€§èƒ½çš„ã€‚åœ¨è€…ï¼Œè‹¥æœåœ¨ä¸€ä¸ªç•Œé¢ä¸Šæ”¹å˜äº†æŸä¸ªå€¼ï¼Œå¦‚ä½•åœ¨å…¶ä½™ç•Œé¢ä¸Šå°†è¿™ä¸ªæ”¹å˜è¡¨ç°å‡ºæ¥ï¼Ÿæˆ–è€…è¯´ï¼Œå¦‚ä½•é€šçŸ¥å…¶ä»–ç•Œé¢æ›´æ–°è¿™ä¸ªå€¼ï¼Ÿè¿™éƒ½æ˜¯çŠ¶æ€ç®¡ç†çš„é—®é¢˜ã€‚æˆ–è®¸ä½ å¯ä»¥é‡æ–°è·³è½¬åˆ°é‚£ä¸ªç•Œé¢ï¼Œä½†åŒæ ·åœ°ï¼Œå¦‚æœè¿™ä¸ªç•Œé¢æœ¬å°±åœ¨è·¯ç”±æ ˆä¸­ï¼Œé‡æ–°æ„å»ºè¿™ä¸ªç•Œé¢ä¼šæµªè´¹æ€§èƒ½ï¼Œè€Œä¸”å¯èƒ½å¯¼è‡´è·¯ç”±é”™ä¹±ã€‚</p><p>ä¸ºæ­¤ï¼Œå¼€å‘è€…ä»¬å¯è°“è€—å°½å¿ƒæœºï¼Œä¸ºæ­¤åšäº†å¾ˆå¤šåº“ï¼Œæ¯”å¦‚Providerå’ŒGetXï¼Œéƒ½æ˜¯å¾ˆå¥½ç”¨çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå¦‚æœæœ‰å…´è¶£å¯ä»¥å°è¯•ï¼ŒGetXä¼˜å…ˆã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><blockquote><p><a href="https://book.flutterchina.club/">ã€ŠFlutterå®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹</a></p><p><a href="https://flutterchina.club/">Flutterä¸­æ–‡ç½‘</a></p><p><a href="https://juejin.cn/post/6844903857697325069">https://juejin.cn/post/6844903857697325069</a></p><p><a href="https://www.cnblogs.com/tian874540961/p/10515020.html">https://www.cnblogs.com/tian874540961/p/10515020.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022:new_year</title>
      <link href="/2022/01/01/2022-new-year/"/>
      <url>/2022/01/01/2022-new-year/</url>
      
        <content type="html"><![CDATA[<h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>è½¬çœ¼ä¸€å¹´åŠè¿‡å»äº†ï¼Œæ„Ÿè§‰ä¹Ÿè¿˜ç®—è‡ªç”±è‡ªåœ¨ã€‚æ²¡æœ‰ä»€ä¹ˆå¤ªçƒ¦å¿ƒçš„äº‹ï¼Œä¹Ÿç®—ä¸ä¸Šä»€ä¹ˆä¸€å¸†é£é¡ºã€‚</p><img src="0.jpg" style="zoom:36%;" /><img src="2.jpg" alt="ï¼ˆå¥‡å¥‡æ€ªæ€ªçš„å§¿åŠ¿ï¼‰" style="zoom:38%;" /><p>å›é¦–è¿‡å»çš„ä¸€å¹´ï¼Œç»å†äº†å¥½å¤šï¼Œä½†è¦æ˜¯æƒ³ä¸€ä¸€ç»†æ•°ï¼Œå´åˆé‚£ä¹ˆæœ¦èƒ§éš¾è¾¨ã€‚å€’ä¸æ˜¯è¯´æ²¡æœ‰ä»€ä¹ˆå€¼å¾—ç•™å¿µçš„ï¼Œå¯èƒ½å› ä¸ºæˆ‘å¹¶ä¸å–œæ¬¢è¿½å¿†è¿‡å¾€ï¼Œå¾€äº‹å¦‚äº‘çƒŸï¼Œè¿˜æ˜¯éšå®ƒå»å§ã€‚</p><p>åªè§‰å¾—ï¼Œè¿‡å»ä¸€å¹´ï¼Œæµ®æµ®æ²‰æ²‰ï¼Œæ”¶è·äº†å¾ˆå¤šä¸œè¥¿ï¼Œä¹Ÿä¸å¯é¿å…åœ°å¤±å»äº†ä¸€äº›ï¼Œæ¯•ç«Ÿï¼Œæˆ‘ä¹Ÿåœ¨â€œç£¨æŸâ€ã€‚å¾ˆåº†å¹¸èº«è¾¹æœ‰å¿—åŒé“åˆçš„ä¼™ä¼´ï¼Œæ‰‹å¤´æœ‰è‡ªå·±äº«å—çš„å·¥ä½œã€‚</p><p><img src="1.jpg" alt="ï¼ˆå¥‡å¥‡æ€ªæ€ªçš„æäº¤è®°å½•ï¼‰"></p><p>æœªæ¥çš„è·¯æƒ³æ€ä¹ˆèµ°ï¼Œè¿˜ä¸å¥½è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒèŒ«èŒ«ç„¶ï¼Œè™½ç„¶æ—¥å¸¸çœŸçš„å¾ˆå–œæ¬¢çœ‹ç¨šæ™–å›ï¼Œä¸è¿‡åŸºæœ¬æ˜¯ä¸ä¼šè¿½éšä»–çš„æ­¥ä¼äº†ï¼Œï¼ˆæ¯•ç«Ÿæ ˆæº¢å‡ºå·¥ç¨‹å¸ˆä¹Ÿä¸æ˜¯äººäººéƒ½èƒ½æˆçš„ï¼‰ï¼Œæ„Ÿè§‰æ‰‹å¤´è¿˜æœ‰å¾ˆå¤šä¸œè¥¿è¦å­¦ï¼ŒOpenCVï¼ŒJVMï¼Œå®‰å“ä¸flutteråº•å±‚åŸç†ä¸æ¸²æŸ“æœºåˆ¶ï¼ŒåŠ¨ç”»ä¸ç»˜åˆ¶åŸç†â€¦åæ­£æ˜¯å¤šçš„æ•°ä¸è¿‡æ¥ï¼Œå¤§æ¦‚ä¹Ÿä¼šæœ‰æ‰€å–èˆã€‚å…¶å®è¿˜æ˜¯å¾ˆåº†å¹¸ä¿ç•™äº†è‡ªå·±çš„ä¸€ç‚¹å°è„¾æ°”ï¼Œåªå­¦è‡ªå·±å–œæ¬¢çš„ï¼Œä¸å–œæ¬¢çš„å°±çŒ›æ‘†çƒ‚ï¼Œæ€ä¹ˆè¯´ã€‚ã€‚ã€‚ã€‚ã€‚æœ‰åˆ©æœ‰å¼Šå§ã€‚</p><p>å¦‚æœä½ é—®æˆ‘ï¼Œæˆ‘çš„äººç”Ÿä¼šå¦‚ä½•è§„åˆ’ï¼Œé‚£æˆ‘è‚¯å®šä¹Ÿä¸çŸ¥é“ã€‚ä¸è¿‡ä¼°è®¡ä¹Ÿæ²¡å¤šå°‘äººä¼šè¿™ä¹ˆå…³å¿ƒæˆ‘ï¼Œè€Œä¸”å°±ç®—çŸ¥é“ï¼Œæˆ‘è‡ªå·±å¤§æ¦‚ä¹Ÿä¸ä¼šç†ä¼šï¼Œç”šè‡³ç›´æ¥èƒŒé“è€Œé©°ã€‚æ–°çš„ä¸€å¹´ï¼Œæˆ‘åªå¸Œæœ›èƒ½å¤Ÿå¹³å®‰é¡ºé‚ï¼Œæœ‰é£æœ‰æµªã€‚å…¶å®è¿™ä¹ˆå¤šå¹´ï¼Œç»“äº¤çš„æœ‹å‹ä¹Ÿä¸å°‘ï¼Œä½†çœŸæ­£ç•™åœ¨èº«è¾¹çš„å´å±ˆæŒ‡å¯æ•°ï¼Œå¤§å®¶å„æœ‰å„çš„è·¯è¦èµ°ï¼Œæˆ‘ä¹Ÿæ›´å¸Œæœ›å¤§å®¶éƒ½èƒ½åœ¨è‡ªå·±çš„è·¯ä¸Šå¼€å¼€å¿ƒå¿ƒåœ°èµ°åˆ°åº•ã€‚</p><img src="4.jpg" style="zoom:25%;" /><p>æˆ‘ä»¬éƒ½å°†é•¿å¤§ã€‚</p><img src="5.jpg" style="zoom:30%;" /><p>å¥½å§ï¼Œå¨å¨äº†è¿™ä¹ˆå¤šï¼Œæ„Ÿè§‰åˆè¯´äº†åŠå¤©åºŸè¯ï¼Œæ˜å¤©è¿˜è¦è€ƒè¯•ï¼Œä¹Ÿè¯¥å®‰å¿ƒçœ‹çœ‹ä¹¦äº†ã€‚</p><p>ä»¥ä¸Š</p><img src="3.jpg" style="zoom:20%;" /><h2 id="åè®°">åè®°</h2><p>å¾—å¿æ‰€æ„¿å’¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å€¼å¾—çºªå¿µçš„äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç«¯æ•°æ®è¿‡æœŸçš„å¤„ç†ç­–ç•¥</title>
      <link href="/2021/12/21/%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%BF%87%E6%9C%9F%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5/"/>
      <url>/2021/12/21/%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%BF%87%E6%9C%9F%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<p>è¯¾è®¾ä¸­æ¶‰åŠå¯¹è¿‡æœŸéœ€æ±‚çš„è‡ªåŠ¨å¤„ç†ï¼ˆè‡ªåŠ¨è®¾ç½®çŠ¶æ€ä¸ºè¶…æ—¶ï¼‰ï¼Œå…¶å®æ—¥å¸¸ç”Ÿæ´»ä¸­ä¹Ÿæœ‰å¾ˆå¤šç›¸ç±»ä¼¼çš„é—®é¢˜ï¼Œæ¯”å¦‚è®¢å•ç­¾æ”¶åè‹¥ä¹°å®¶æ²¡æœ‰ç¡®è®¤æ”¶è´§åˆ™è¦åœ¨24å°æ—¶åè‡ªåŠ¨ç¡®è®¤ï¼Œæˆ–è€…QQæ¯åˆ°å‘¨ä¸€æ—©ä¸Šçš„ä¸€ä¸ªå›ºå®šæ—¶é—´å°±ä¼šç»™ç”¨æˆ·å‘é€ä¸Šå‘¨QQç©ºé—´çš„è®¿å®¢æƒ…å†µï¼Œè€å¸ˆè¦è®¾ç½®ä½œä¸šçš„æˆªæ­¢æ—¥æœŸï¼Œè¿‡æœŸå­¦ç”Ÿå°±ä¸èƒ½ä½¿ç”¨æäº¤ä½œä¸šçš„åŠŸèƒ½ã€‚</p><p>å…¶å®ä¸ªäººæ€»ç»“äº†ä¸€ä¸‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ä»»åŠ¡ï¼Œä¸€ç±»å±äºå»¶æ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚è®¢å•çš„24å°æ—¶è‡ªåŠ¨ç¡®è®¤æ”¶è´§ï¼Œå¦ä¸€ç±»å±äºå®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚åœ¨æŸä¸ªç‰¹å®šçš„æ—¶é—´ç»™ç”¨æˆ·å‘é€æŠ¥å‘Šï¼Œè¯¾è®¾ä¸­çš„ä»»åŠ¡å…¶å®å°±æ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œè€Œç±»ä¼¼çš„é—®é¢˜å…¶å®åœ¨ä¸ªäººè¯¾è®¾ä¸­ä¹Ÿæœ‰å‡ºç°ã€‚</p><p>ä¸è¿‡ä¸åŒçš„æ˜¯ä¸ªäººè¯¾è®¾ä¸­çš„é€‰è¯¾æ—¶é—´åŠŸèƒ½å®Œå…¨å¯ä»¥ç®€åŒ–å¤„ç†ï¼Œå³åœ¨å­¦ç”Ÿè¿›è¡Œé€‰è¯¾æ“ä½œæ—¶æ£€æŸ¥å½“å‰æ—¶é—´ä¸è§„å®šæ—¶é—´ï¼Œå¹¶å¯¹è¶…æ—¶è¯·æ±‚è¿›è¡Œæ‹¦æˆªä»¥è¾¾åˆ°æ˜¾ç¤ºè¶…æ—¶çš„ç›®çš„ã€‚ä½†æ­¤æ¬¡å›¢ä½“è¯¾è®¾åˆ™ä¸åŒï¼Œæ­¤æ¬¡å›¢ä½“è¯¾è®¾è¦æ±‚æ£€æŸ¥çš„æ˜¯æˆªæ­¢æ—¥æœŸæ˜¯å¦è¶…æ—¶ï¼Œå¹¶å¯¹è¶…æ—¶çš„éœ€æ±‚æ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼Œä¸»è¦è€ƒè™‘åˆ°é«˜æ•ˆæ€§ä¸å®æ•ˆæ€§ï¼Œå¹¶ä¸èƒ½ç®€å•åœ°é€šè¿‡å‰ç«¯è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚</p><p>åŸºäºæ­¤ï¼Œæˆ‘è®¾è®¡äº†ä¸‰ç§æ–¹æ¡ˆï¼Œä¸‰ç§æ–¹æ¡ˆä¼˜ç¼ºç‚¹å„å¼‚ï¼Œä½†åœ¨æ¨ªå‘ä¸çºµå‘çš„æ¯”è¾ƒä¹‹ä¸­å¸¦ç»™äº†æˆ‘å¾ˆå¤§çš„å¯å‘ã€‚</p><h3 id="æ•°æ®åº“è½®è¯¢">æ•°æ®åº“è½®è¯¢</h3><p>ç¬¬ä¸€ç§æ˜¯å¯¹æ•°æ®åº“è¿›è¡Œå®šæœŸè½®è¯¢ï¼Œå³é€šè¿‡ä¸€ä¸ªçº¿ç¨‹å®šæ—¶çš„å»æ‰«ææ•°æ®åº“ï¼Œé€šè¿‡å½“å‰æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦æœ‰è¶…æ—¶çš„éœ€æ±‚ï¼Œç„¶åè¿›è¡Œç›¸å…³æ“ä½œã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wzt.tapm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> okhttp3.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoTimeOutStarter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASE_URL = <span class="string">&quot;http://localhost:8081&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JSONArray data ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Callback updateListCallback = <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (response.body() != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    String responseData = response.body().string();</span><br><span class="line">                    JSONObject object = JSON.parseObject(responseData);</span><br><span class="line">                    data = object.getJSONArray(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (data.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat();<span class="comment">// æ ¼å¼åŒ–æ—¶é—´</span></span><br><span class="line">                        sdf.applyPattern(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">                        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">                        String DayNow = sdf.format(date);</span><br><span class="line">                        <span class="comment">//å¤„ç†æ•°æ®</span></span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; data.size(); i++) &#123;</span><br><span class="line">                            JSONObject jsonObject = data.getJSONObject(i);</span><br><span class="line">                            String ddl = jsonObject.getString(<span class="string">&quot;ddl&quot;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (ddl.compareTo(DayNow) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                                String status = jsonObject.getString(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">                                FormBody formBody;</span><br><span class="line">                                <span class="keyword">if</span> (status.equals(<span class="string">&quot;2&quot;</span>))&#123;</span><br><span class="line">                                    formBody = <span class="keyword">new</span> FormBody.Builder()</span><br><span class="line">                                            .add(<span class="string">&quot;demand_id&quot;</span>,jsonObject.getString(<span class="string">&quot;demand_id&quot;</span>))</span><br><span class="line">                                            .add(<span class="string">&quot;commit&quot;</span>,<span class="string">&quot;éœ€æ±‚å·²è¶…æ—¶&quot;</span>)</span><br><span class="line">                                            .build();</span><br><span class="line">                                    timeOutFrom2To6(formBody);</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span> (status.equals(<span class="string">&quot;4&quot;</span>))&#123;</span><br><span class="line">                                    formBody = <span class="keyword">new</span> FormBody.Builder()</span><br><span class="line">                                            .add(<span class="string">&quot;demand_id&quot;</span>,jsonObject.getString(<span class="string">&quot;demand_id&quot;</span>))</span><br><span class="line">                                            .add(<span class="string">&quot;commit&quot;</span>,<span class="string">&quot;éœ€æ±‚å·²è¶…æ—¶&quot;</span>)</span><br><span class="line">                                            .build();</span><br><span class="line">                                    timeOutFrom4To6(formBody);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(() -&gt;&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                updateList(updateListCallback);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">86400</span>*<span class="number">1000</span>);<span class="comment">//ä¸€å¤©</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">updateList</span><span class="params">(Callback updateListCallback)</span></span>&#123;</span><br><span class="line">        FormBody formBody = <span class="keyword">new</span> FormBody.Builder().build();</span><br><span class="line">        httpUtil.OKHttpWithCallBack(<span class="keyword">false</span>,BASE_URL+<span class="string">&quot;/getDemandDdlData&quot;</span>, updateListCallback,formBody);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">timeOutFrom2To6</span><span class="params">(FormBody formBody)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        httpUtil.OKHttpWithoutCallBack(<span class="keyword">false</span>,BASE_URL+<span class="string">&quot;/demand/from2to6&quot;</span>,formBody);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">timeOutFrom4To6</span><span class="params">(FormBody formBody)</span></span>&#123;</span><br><span class="line">        httpUtil.OKHttpWithoutCallBack(<span class="keyword">false</span>,BASE_URL+<span class="string">&quot;/demand/from4to6&quot;</span>,formBody);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>httputil</code>æ˜¯æˆ‘ä»¥å‰è‡ªå·±å°è£…çš„æ–¹æ³•ï¼Œå‚è§https://zwn2001.github.io/2021/10/27/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%BC%82%E6%AD%A5/çš„ä»£ç éƒ¨åˆ†ã€‚</p><p>é¡¹ç›®ä¸­é‡‡ç”¨çš„å°±æ˜¯è¿™ç§æ–¹æ³•ï¼ŒåŸå› å¾ˆç®€å•ï¼š</p><blockquote><ul><li><p>æ—¶é—´åªç²¾ç¡®åˆ°å¤©ï¼Œåªè¦æ¯å¤©æ‰«æä¸€éæ•°æ®åº“å³å¯ï¼Œå¯¹æ•°æ®åº“çš„æŸè€—å¹¶ä¸å¤§</p></li><li><p>ç®€å•æ˜“ç»´æŠ¤</p></li><li><p>æ˜“æ‹“å±•ï¼Œæ˜“é›†ç¾¤</p></li></ul></blockquote><p>åŒæ—¶ï¼Œè™½ç„¶è¿™ä¸ªç±»æ˜¯è·Ÿå›¢ä½“é¡¹ç›®åç«¯æ–‡ä»¶åœ¨ä¸€ä¸ªé¡¹ç›®ä¹‹ä¸­ï¼Œä½†å¹¶æ²¡æœ‰é‡‡ç”¨çº¿ç¨‹é—´å‘é€æ•°æ®çš„æ–¹å¼ï¼ŒåŸå› ä¸€æ–¹é¢æœ‰ç°æˆçš„æ¥å£ï¼Œå¦ä¸€æ–¹é¢è¦é™ä½è€¦åˆåº¦ã€‚</p><p>ä½†å…¶å®ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><blockquote><ul><li>å†…å­˜å¼€é”€å¤§ï¼Œå°¤å…¶æ˜¯å¯¹äºJVMï¼Œè´Ÿè½½ä¼šæ¯”è¾ƒé«˜ï¼Œå¦‚æœè®¾å®šåœ¨æœåŠ¡é«˜å³°æœŸè¿›è¡Œæ“ä½œå¾ˆå®¹æ˜“OOMã€‚</li><li>åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„å»¶è¿Ÿï¼Œå¯¹äºç”µå•†è¿™æ ·çš„å¹³å°æ¥è¯´æ˜¯å®Œå…¨ä¸å¯å–çš„æ–¹æ¡ˆã€‚</li><li>åœ¨æ•°æ®é‡å¤§ã€æ—¶é—´ç²¾ç¡®ã€éœ€è¦é¢‘ç¹æ‰«æçš„åœºæ™¯ä¸­æ•ˆç‡ä½ï¼ŒæœåŠ¡å™¨ã€å†…å­˜è´Ÿè½½æé«˜ã€‚</li></ul></blockquote><h3 id="æ—¶é—´è½®ç®—æ³•">æ—¶é—´è½®ç®—æ³•</h3><p><img src="0.png" alt="ä¸€å¼ ç»å…¸çš„ç¤ºæ„å›¾"></p><p>æ—¶é—´è½®ç®—æ³•å¯è°“ä¸€ä¸ªç»å…¸ç®—æ³•ï¼Œå¯ä»¥ç±»æ¯”äºæ—¶é’Ÿï¼Œå¦‚ä¸Šå›¾ç®­å¤´ï¼ˆæŒ‡é’ˆï¼‰æŒ‰æŸä¸€ä¸ªæ–¹å‘æŒ‰å›ºå®šé¢‘ç‡è½®åŠ¨ï¼Œæ¯ä¸€æ¬¡è·³åŠ¨ç§°ä¸ºä¸€ä¸ª<code> tick</code>ã€‚è¿™æ ·å¯ä»¥çœ‹å‡ºå®šæ—¶è½®ç”±ä¸ª3ä¸ªé‡è¦çš„å±æ€§å‚æ•°ï¼Œ<code>ticksPerWheel</code>ï¼ˆä¸€è½®çš„tickæ•°ï¼‰ï¼Œ<code>tickDuration</code>ï¼ˆä¸€ä¸ªtickçš„æŒç»­æ—¶é—´ï¼‰ä»¥åŠ<code> timeUnit</code>ï¼ˆæ—¶é—´å•ä½ï¼‰ï¼Œä¾‹å¦‚å½“<code>ticksPerWheel</code>=60ï¼Œ<code>tickDuration</code>=1ï¼Œ<code>timeUnit</code>=ç§’ï¼Œè¿™å°±å’Œç°å®ä¸­çš„å§‹ç»ˆçš„ç§’é’ˆèµ°åŠ¨å®Œå…¨ç±»ä¼¼äº†ã€‚</p><p>å¦‚æœå½“å‰æŒ‡é’ˆæŒ‡åœ¨1ä¸Šé¢ï¼Œæˆ‘æœ‰ä¸€ä¸ªä»»åŠ¡éœ€è¦4ç§’ä»¥åæ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªæ‰§è¡Œçš„çº¿ç¨‹å›è°ƒæˆ–è€…æ¶ˆæ¯å°†ä¼šè¢«æ”¾åœ¨5ä¸Šã€‚é‚£å¦‚æœéœ€è¦åœ¨20ç§’ä¹‹åæ‰§è¡Œæ€ä¹ˆåŠï¼Œç”±äºè¿™ä¸ªç¯å½¢ç»“æ„æ§½æ•°åªåˆ°8ï¼Œå¦‚æœè¦20ç§’ï¼ŒæŒ‡é’ˆéœ€è¦å¤šè½¬2åœˆã€‚ä½ç½®æ˜¯åœ¨2åœˆä¹‹åçš„5ä¸Šé¢ï¼ˆ20 % 8 + 1ï¼‰ã€‚</p><p>ä½†æ˜¯ä¹Ÿå¦‚ä¸Šæ‰€ä»‹ç»çš„ï¼Œè¿™ä¸ªç®—æ³•æ›´å¤šåœ°æ˜¯åœ¨å»¶æ—¶ä»»åŠ¡é‡Œä½¿ç”¨ï¼Œè€Œå¦‚æœåƒå›¢ä½“è¯¾è®¾è¿™æ ·çš„å®šæ—¶ä»»åŠ¡å°±æ˜¾å¾—æœ‰äº›å›°éš¾ã€‚</p><p>ä¸€æ–¹é¢ï¼Œä¸€å¹´æœ‰å¤šå°‘å¤©å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå°±å¯¼è‡´ç®—æ³•éœ€è¦å¤„ç†ç‰¹æ®Šæƒ…å†µè€Œé™ä½æ•ˆç‡ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦æœåŠ¡å™¨å®•æœºå°±å¾ˆéš¾æ¢å¤åˆ°æ­£å¸¸çš„æ“ä½œæµç¨‹ï¼Œå®‰å…¨æ€§ä¸é«˜ï¼ŒåŒæ—¶ï¼Œé›†ç¾¤éš¾åº¦ä¹Ÿæ¯”è¾ƒé«˜ã€‚</p><p>ä½†ä¼˜ç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé«˜æ•ˆç‡ï¼Œä½å»¶è¿Ÿã€‚</p><h3 id="Redisç¼“å­˜">Redisç¼“å­˜</h3><p>ä½¿ç”¨Redisç¼“å­˜å¤„ç†å®šæ—¶ä»»åŠ¡ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œå¼€å§‹æ—¶ä¹Ÿç¡®å®è€ƒè™‘è¦ä½¿ç”¨ï¼Œä½†æ—¶é—´ä¸Šæ¥ä¸åŠæœ€åè¿˜æ˜¯æ”¾å¼ƒã€‚</p><p>ä½†å…¶å®ç­–ç•¥è·Ÿæ•°æ®åº“è½®è¯¢æ¯”è¾ƒç±»ä¼¼ã€‚æ¯éš”ç‰¹å®šçš„æ—¶é—´æˆ–è€…æ¯æ·»åŠ ä¸€ä¸ªéœ€æ±‚å°±å°†å…¶ä»¥Mapçš„å½¢å¼æ·»åŠ åˆ°Redisç¼“å­˜ä¸­ï¼Œåœ¨ç‰¹å®šçº¿ç¨‹ä¸­å¯¹æ•°æ®è¿›è¡Œå®šæœŸæ›´æ–°ï¼Œå°†è¶…æ—¶çš„idè¿”å›åˆ°äº‹åŠ¡çº¿ç¨‹è¿›è¡Œå¯¹mysqlæ•°æ®åº“çš„æ•°æ®å¤„ç†ã€‚</p><p>ä¼˜ç‚¹å¾ˆç®€å•ï¼š</p><ul><li>æ•ˆç‡ç›¸å½“é«˜</li><li>é›†ç¾¤æ‹“å±•ç›¸å½“æ–¹ä¾¿</li><li>ç”±äºä½¿ç”¨Redisä½œä¸ºæ¶ˆæ¯é€šé“ï¼Œæ¶ˆæ¯éƒ½å­˜å‚¨åœ¨Redisä¸­ã€‚å¦‚æœå‘é€ç¨‹åºæˆ–è€…ä»»åŠ¡å¤„ç†ç¨‹åºæŒ‚äº†ï¼Œé‡å¯ä¹‹åï¼Œè¿˜æœ‰é‡æ–°å¤„ç†æ•°æ®çš„å¯èƒ½æ€§ã€‚</li></ul><p>ä¸è¿‡ç¼ºç‚¹å°±æ˜¯éœ€è¦å¯¹redisè¿›è¡Œä¸€å®šç»´æŠ¤ï¼Œä½†è¿˜æ˜¯åˆ©å¤§äºå¼Šã€‚</p><p>å…¶å®æ€»ä½“æ¥è¯´å„æœ‰ä¼˜åŠ£ï¼Œä½†åœ¨æ¯”è¾ƒä¹‹ä¸­æˆ‘ä¹Ÿæ”¶è·äº†æ›´å¤šçš„æ€æƒ³ä¸ç­–ç•¥ï¼Œæˆ‘è§‰å¾—è¿™æ‰æ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¯¹æˆ‘æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½®é¡¶</title>
      <link href="/2021/12/15/%E7%BD%AE%E9%A1%B6/"/>
      <url>/2021/12/15/%E7%BD%AE%E9%A1%B6/</url>
      
        <content type="html"><![CDATA[<p><img src="0.png" alt=""></p><p>ä»–èµ°äº†ï¼Œä½†æˆ‘ä¾ç„¶ä¼šå‘å‰èµ°</p><p>æˆ‘æ—¢ç„¶å†³æ„å°†å¦‚èŠ±ç“¶èˆ¬çš„å†…å¿ƒé«˜ä¸¾è¿‡å¤´é¡¶ï¼Œä¾¿ä¸ä¼šåœ¨æ„å®ƒç ´ç¢æ—¶çš„å‘œå’½ã€‚</p><p><img src="1.jpg" alt=""></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿ç§»åŠ¨ä¾‹ä¼šï¼šgit</title>
      <link href="/2021/12/09/%E5%AD%A6%E7%BA%BF%E7%A7%BB%E5%8A%A8%E4%BE%8B%E4%BC%9A%EF%BC%9Agit/"/>
      <url>/2021/12/09/%E5%AD%A6%E7%BA%BF%E7%A7%BB%E5%8A%A8%E4%BE%8B%E4%BC%9A%EF%BC%9Agit/</url>
      
        <content type="html"><![CDATA[<p><img src="head.png" alt=""></p><h1>å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦æœ‰gitä¸GitHub&amp;Gitee</h1><h2 id="1-èµ·æº">1.èµ·æº</h2><p>å¾ˆå¤šäººéƒ½çŸ¥é“ï¼ŒLinusåœ¨1991å¹´åˆ›å»ºäº†å¼€æºçš„Linuxï¼Œä»æ­¤ï¼ŒLinuxç³»ç»Ÿä¸æ–­å‘å±•ï¼Œå·²ç»æˆä¸ºæœ€å¤§çš„æœåŠ¡å™¨ç³»ç»Ÿè½¯ä»¶äº†ã€‚</p><p>Linusè™½ç„¶åˆ›å»ºäº†Linuxï¼Œä½†Linuxçš„å£®å¤§æ˜¯é å…¨ä¸–ç•Œçƒ­å¿ƒçš„å¿—æ„¿è€…å‚ä¸çš„ï¼Œè¿™ä¹ˆå¤šäººåœ¨ä¸–ç•Œå„åœ°ä¸ºLinuxç¼–å†™ä»£ç ï¼Œé‚£Linuxçš„ä»£ç æ˜¯å¦‚ä½•ç®¡ç†çš„å‘¢ï¼Ÿ</p><p>äº‹å®æ˜¯ï¼Œåœ¨2002å¹´ä»¥å‰ï¼Œä¸–ç•Œå„åœ°çš„å¿—æ„¿è€…æŠŠæºä»£ç æ–‡ä»¶é€šè¿‡diffçš„æ–¹å¼å‘ç»™Linusï¼Œç„¶åç”±Linusæœ¬äººé€šè¿‡æ‰‹å·¥æ–¹å¼åˆå¹¶ä»£ç ï¼</p><p>ä½ ä¹Ÿè®¸ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆLinusä¸æŠŠLinuxä»£ç æ”¾åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé‡Œå‘¢ï¼Ÿä¸æ˜¯æœ‰CVSã€SVNè¿™äº›å…è´¹çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå—ï¼Ÿå› ä¸ºLinusåšå®šåœ°åå¯¹CVSå’ŒSVNï¼Œè¿™äº›é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸ä½†é€Ÿåº¦æ…¢ï¼Œè€Œä¸”å¿…é¡»è”ç½‘æ‰èƒ½ä½¿ç”¨ã€‚æœ‰ä¸€äº›å•†ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè™½ç„¶æ¯”CVSã€SVNå¥½ç”¨ï¼Œä½†é‚£æ˜¯ä»˜è´¹çš„ï¼Œå’ŒLinuxçš„å¼€æºç²¾ç¥ä¸ç¬¦ã€‚</p><p>ä¸è¿‡ï¼Œåˆ°äº†2002å¹´ï¼ŒLinuxç³»ç»Ÿå·²ç»å‘å±•äº†åå¹´äº†ï¼Œä»£ç åº“ä¹‹å¤§è®©Linuså¾ˆéš¾ç»§ç»­é€šè¿‡æ‰‹å·¥æ–¹å¼ç®¡ç†äº†ï¼Œç¤¾åŒºçš„å¼Ÿå…„ä»¬ä¹Ÿå¯¹è¿™ç§æ–¹å¼è¡¨è¾¾äº†å¼ºçƒˆä¸æ»¡ï¼Œäºæ˜¯Linusé€‰æ‹©äº†ä¸€ä¸ªå•†ä¸šçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ<code>BitKeeper</code>ï¼Œ<code>BitKeeper</code>çš„ä¸œå®¶<code>BitMover</code>å…¬å¸å‡ºäºäººé“ä¸»ä¹‰ç²¾ç¥ï¼ŒæˆæƒLinuxç¤¾åŒºå…è´¹ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p><p>å®‰å®šå›¢ç»“çš„å¤§å¥½å±€é¢åœ¨2005å¹´å°±è¢«æ‰“ç ´äº†ï¼ŒåŸå› æ˜¯Linuxç¤¾åŒºç‰›äººèšé›†ï¼Œä¸å…æ²¾æŸ“äº†ä¸€äº›æ¢å±±å¥½æ±‰çš„æ±Ÿæ¹–ä¹ æ°”ã€‚å¼€å‘Sambaçš„Andrewè¯•å›¾ç ´è§£<code>BitKeeper</code>çš„åè®®ï¼ˆè¿™ä¹ˆå¹²çš„å…¶å®ä¹Ÿä¸åªä»–ä¸€ä¸ªï¼‰ï¼Œè¢«<code>BitMover</code>å…¬å¸å‘ç°äº†ï¼ˆç›‘æ§å·¥ä½œåšå¾—ä¸é”™ï¼ï¼‰ï¼Œäºæ˜¯<code>BitMover</code>å…¬å¸æ€’äº†ï¼Œè¦æ”¶å›Linuxç¤¾åŒºçš„å…è´¹ä½¿ç”¨æƒã€‚</p><p>Linuså¯ä»¥å‘<code>BitMover</code>å…¬å¸é“ä¸ªæ­‰ï¼Œä¿è¯ä»¥åä¸¥æ ¼ç®¡æ•™å¼Ÿå…„ä»¬ï¼Œå—¯ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚å®é™…æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š</p><p>LinusèŠ±äº†ä¸¤å‘¨æ—¶é—´è‡ªå·±ç”¨Cå†™äº†ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè¿™å°±æ˜¯Gitï¼ä¸€ä¸ªæœˆä¹‹å†…ï¼ŒLinuxç³»ç»Ÿçš„æºç å·²ç»ç”±Gitç®¡ç†äº†ï¼ç‰›æ˜¯æ€ä¹ˆå®šä¹‰çš„å‘¢ï¼Ÿå¤§å®¶å¯ä»¥ä½“ä¼šä¸€ä¸‹ã€‚</p><p>Gitè¿…é€Ÿæˆä¸ºæœ€æµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯2008å¹´ï¼ŒGitHubç½‘ç«™ä¸Šçº¿äº†ï¼Œå®ƒä¸ºå¼€æºé¡¹ç›®å…è´¹æä¾›Gitå­˜å‚¨ï¼Œæ— æ•°å¼€æºé¡¹ç›®å¼€å§‹è¿ç§»è‡³GitHubï¼ŒåŒ…æ‹¬jQueryï¼ŒPHPï¼ŒRubyç­‰ç­‰ã€‚</p><p>å†å²å°±æ˜¯è¿™ä¹ˆå¶ç„¶ï¼Œå¦‚æœä¸æ˜¯å½“å¹´<code>BitMover</code>å…¬å¸å¨èƒLinuxç¤¾åŒºï¼Œå¯èƒ½ç°åœ¨æˆ‘ä»¬å°±æ²¡æœ‰å…è´¹è€Œè¶…çº§å¥½ç”¨çš„Gitäº†ã€‚</p><h2 id="2-é›†ä¸­å¼ä¸åˆ†å¸ƒå¼">2.é›†ä¸­å¼ä¸åˆ†å¸ƒå¼</h2><p>Linusä¸€ç›´ç—›æ¨çš„CVSåŠSVNéƒ½æ˜¯<strong>é›†ä¸­å¼</strong>çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œè€ŒGitæ˜¯<strong>åˆ†å¸ƒå¼</strong>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œé›†ä¸­å¼å’Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>å…ˆè¯´é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­å­˜æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå¹²æ´»çš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥è¦å…ˆä»ä¸­å¤®æœåŠ¡å™¨å–å¾—æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¼€å§‹å¹²æ´»ï¼Œå¹²å®Œæ´»äº†ï¼Œå†æŠŠè‡ªå·±çš„æ´»æ¨é€ç»™ä¸­å¤®æœåŠ¡å™¨ã€‚ä¸­å¤®æœåŠ¡å™¨å°±å¥½æ¯”æ˜¯ä¸€ä¸ªå›¾ä¹¦é¦†ï¼Œä½ è¦æ”¹ä¸€æœ¬ä¹¦ï¼Œå¿…é¡»å…ˆä»å›¾ä¹¦é¦†å€Ÿå‡ºæ¥ï¼Œç„¶åå›åˆ°å®¶è‡ªå·±æ”¹ï¼Œæ”¹å®Œäº†ï¼Œå†æ”¾å›å›¾ä¹¦é¦†ã€‚</p><p><img src="cen-repo.jfif" alt="é›†ä¸­å¼"></p><p>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ€å¤§çš„æ¯›ç—…å°±æ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¦‚æœåœ¨å±€åŸŸç½‘å†…è¿˜å¥½ï¼Œå¸¦å®½å¤Ÿå¤§ï¼Œé€Ÿåº¦å¤Ÿå¿«ï¼Œå¯å¦‚æœåœ¨äº’è”ç½‘ä¸Šï¼Œé‡åˆ°ç½‘é€Ÿæ…¢çš„è¯ï¼Œå¯èƒ½æäº¤ä¸€ä¸ª10Mçš„æ–‡ä»¶å°±éœ€è¦5åˆ†é’Ÿï¼Œè¿™è¿˜ä¸å¾—æŠŠäººç»™æ†‹æ­»å•Šã€‚</p><p>é‚£åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ‰ä½•ä¸åŒå‘¢ï¼Ÿ<strong>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ ¹æœ¬æ²¡æœ‰â€œä¸­å¤®æœåŠ¡å™¨â€ï¼Œæ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“</strong>ï¼Œè¿™æ ·ï¼Œä½ å·¥ä½œçš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“å°±åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šã€‚æ—¢ç„¶æ¯ä¸ªäººç”µè„‘ä¸Šéƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œé‚£å¤šä¸ªäººå¦‚ä½•åä½œå‘¢ï¼Ÿæ¯”æ–¹è¯´ä½ åœ¨è‡ªå·±ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œä½ çš„åŒäº‹ä¹Ÿåœ¨ä»–çš„ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¿©ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚</p><p>å’Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç›¸æ¯”ï¼Œ<strong>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å®‰å…¨æ€§è¦é«˜å¾ˆå¤š</strong>ï¼Œå› ä¸ºæ¯ä¸ªäººç”µè„‘é‡Œéƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬åº“ï¼ŒæŸä¸€ä¸ªäººçš„ç”µè„‘åæ‰äº†ä¸è¦ç´§ï¼Œéšä¾¿ä»å…¶ä»–äººé‚£é‡Œå¤åˆ¶ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚è€Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸­å¤®æœåŠ¡å™¨è¦æ˜¯å‡ºäº†é—®é¢˜ï¼Œæ‰€æœ‰äººéƒ½æ²¡æ³•å¹²æ´»äº†ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ—¶å€™ï¼Œå…¶å®å¾ˆå°‘åœ¨ä¸¤äººä¹‹é—´çš„ç”µè„‘ä¸Šæ¨é€ç‰ˆæœ¬åº“çš„ä¿®æ”¹ï¼Œå› ä¸ºå¯èƒ½ä½ ä»¬ä¿©ä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œä¸¤å°ç”µè„‘äº’ç›¸è®¿é—®ä¸äº†ï¼Œä¹Ÿå¯èƒ½ä»Šå¤©ä½ çš„åŒäº‹ç—…äº†ï¼Œä»–çš„ç”µè„‘å‹æ ¹æ²¡æœ‰å¼€æœºã€‚å› æ­¤ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸ä¹Ÿæœ‰ä¸€å°å……å½“â€œä¸­å¤®æœåŠ¡å™¨â€çš„ç”µè„‘ï¼Œä½†è¿™ä¸ªæœåŠ¡å™¨çš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ–¹ä¾¿â€œäº¤æ¢â€å¤§å®¶çš„ä¿®æ”¹ï¼Œæ²¡æœ‰å®ƒå¤§å®¶ä¹Ÿä¸€æ ·å¹²æ´»ï¼Œåªæ˜¯äº¤æ¢ä¿®æ”¹ä¸æ–¹ä¾¿è€Œå·²ã€‚</p><p><img src="distr-repo.jfif" alt="åˆ†å¸ƒå¼"></p><p>å½“ç„¶ï¼ŒGitçš„ä¼˜åŠ¿ä¸å•æ˜¯ä¸å¿…è”ç½‘è¿™ä¹ˆç®€å•ï¼Œåé¢æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°Gitæå…¶å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ï¼ŒæŠŠSVNç­‰è¿œè¿œæŠ›åœ¨äº†åé¢ã€‚</p><p>CVSä½œä¸ºæœ€æ—©çš„å¼€æºè€Œä¸”å…è´¹çš„é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç›´åˆ°ç°åœ¨è¿˜æœ‰ä¸å°‘äººåœ¨ç”¨ã€‚ç”±äºCVSè‡ªèº«è®¾è®¡çš„é—®é¢˜ï¼Œä¼šé€ æˆæäº¤æ–‡ä»¶ä¸å®Œæ•´ï¼Œç‰ˆæœ¬åº“è«åå…¶å¦™æŸåçš„æƒ…å†µã€‚åŒæ ·æ˜¯å¼€æºè€Œä¸”å…è´¹çš„SVNä¿®æ­£äº†CVSçš„ä¸€äº›ç¨³å®šæ€§é—®é¢˜ï¼Œæ˜¯ç›®å‰ç”¨å¾—æœ€å¤šçš„é›†ä¸­å¼ç‰ˆæœ¬åº“æ§åˆ¶ç³»ç»Ÿã€‚</p><p>é™¤äº†å…è´¹çš„å¤–ï¼Œè¿˜æœ‰æ”¶è´¹çš„é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ¯”å¦‚IBMçš„ClearCaseï¼ˆä»¥å‰æ˜¯Rationalå…¬å¸çš„ï¼Œè¢«IBMæ”¶è´­äº†ï¼‰ï¼Œç‰¹ç‚¹æ˜¯å®‰è£…æ¯”Windowsè¿˜å¤§ï¼Œè¿è¡Œæ¯”èœ—ç‰›è¿˜æ…¢ï¼Œèƒ½ç”¨ClearCaseçš„ä¸€èˆ¬æ˜¯ä¸–ç•Œ500å¼ºï¼Œä»–ä»¬æœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹æ˜¯è´¢å¤§æ°”ç²—ï¼Œæˆ–è€…äººå‚»é’±å¤šã€‚</p><p>å¾®è½¯è‡ªå·±ä¹Ÿæœ‰ä¸€ä¸ªé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå«VSSï¼Œé›†æˆåœ¨Visual Studioä¸­ã€‚ç”±äºå…¶åäººç±»çš„è®¾è®¡ï¼Œè¿å¾®è½¯è‡ªå·±éƒ½ä¸å¥½æ„æ€ç”¨äº†ã€‚</p><p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé™¤äº†Gitä»¥åŠä¿ƒä½¿Gitè¯ç”Ÿçš„<code>BitKeeper</code>å¤–ï¼Œè¿˜æœ‰ç±»ä¼¼Gitçš„Mercurialå’ŒBazaarç­‰ã€‚è¿™äº›åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå„æœ‰ç‰¹ç‚¹ï¼Œä½†æœ€å¿«ã€æœ€ç®€å•ä¹Ÿæœ€æµè¡Œçš„ä¾ç„¶æ˜¯Gitï¼</p><h1>å®‰è£…</h1><p>é¦–å…ˆï¼Œ<a href="https://git-scm.com/downloads">ä¸‹è½½å®‰è£…ç¨‹åº</a>æˆ–è€…ä½¿ç”¨<a href="https://npm.taobao.org/mirrors/git-for-windows/">å›½å†…Windowsé•œåƒç«™</a></p><p>ä¸å‡ºæ„å¤–é™¤äº†æ›´æ”¹å®‰è£…è·¯å¾„éƒ½æ˜¯nextï¼Œ<a href="https://blog.csdn.net/mukes/article/details/115693833">ç»†èŠ‚å‚è€ƒæ­¤åšå®¢</a></p><p><strong>æ¸©é¦¨æç¤ºï¼šè·¯å¾„ä¸­å°½é‡ä¸è¦æœ‰è‹±æ–‡å</strong></p><h1>åŸºæœ¬æ¦‚å¿µ</h1><h2 id="åˆ†æ”¯">åˆ†æ”¯</h2><img src="0.png" alt="åˆ†æ”¯ç¤ºä¾‹" style="zoom:50%;" /><img src="1.png" alt="å®é™…ç¤ºä¾‹-ä»¥iå±±å¤§ä¸ºä¾‹" style="zoom:75%;" /><h3 id="åˆ†æ”¯æ˜¯ä»€ä¹ˆ">åˆ†æ”¯æ˜¯ä»€ä¹ˆ</h3><p>åˆ†æ”¯å°±æ˜¯ç§‘å¹»ç”µå½±é‡Œé¢çš„å¹³è¡Œå®‡å®™ï¼Œå½“ä½ æ­£åœ¨ç”µè„‘å‰åŠªåŠ›å­¦ä¹ Gitçš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªä½ æ­£åœ¨å¦ä¸€ä¸ªå¹³è¡Œå®‡å®™é‡ŒåŠªåŠ›å­¦ä¹ SVNã€‚</p><p>å¦‚æœä¸¤ä¸ªå¹³è¡Œå®‡å®™äº’ä¸å¹²æ‰°ï¼Œé‚£å¯¹ç°åœ¨çš„ä½ ä¹Ÿæ²¡å•¥å½±å“ã€‚ä¸è¿‡ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªå¹³è¡Œå®‡å®™åˆå¹¶äº†ï¼Œç»“æœï¼Œä½ æ—¢å­¦ä¼šäº†Gitåˆå­¦ä¼šäº†SVNï¼</p><p><img src="13.png" alt=""></p><p>åˆ†æ”¯åœ¨å®é™…ä¸­æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸¤å‘¨æ‰èƒ½å®Œæˆï¼Œç¬¬ä¸€å‘¨ä½ å†™äº†50%çš„ä»£ç ï¼Œå¦‚æœç«‹åˆ»æäº¤ï¼Œç”±äºä»£ç è¿˜æ²¡å†™å®Œï¼Œä¸å®Œæ•´çš„ä»£ç åº“ä¼šå¯¼è‡´åˆ«äººä¸èƒ½å¹²æ´»äº†ã€‚å¦‚æœç­‰ä»£ç å…¨éƒ¨å†™å®Œå†ä¸€æ¬¡æäº¤ï¼Œåˆå­˜åœ¨ä¸¢å¤±æ¯å¤©è¿›åº¦çš„å·¨å¤§é£é™©ã€‚</p><p>ç°åœ¨æœ‰äº†åˆ†æ”¯ï¼Œå°±ä¸ç”¨æ€•äº†ã€‚ä½ åˆ›å»ºäº†ä¸€ä¸ªå±äºä½ è‡ªå·±çš„åˆ†æ”¯ï¼Œåˆ«äººçœ‹ä¸åˆ°ï¼Œè¿˜ç»§ç»­åœ¨åŸæ¥çš„åˆ†æ”¯ä¸Šæ­£å¸¸å·¥ä½œï¼Œè€Œä½ åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæƒ³æäº¤å°±æäº¤ï¼Œç›´åˆ°å¼€å‘å®Œæ¯•åï¼Œå†ä¸€æ¬¡æ€§åˆå¹¶åˆ°åŸæ¥çš„åˆ†æ”¯ä¸Šï¼Œè¿™æ ·ï¼Œæ—¢å®‰å…¨ï¼Œåˆä¸å½±å“åˆ«äººå·¥ä½œã€‚ï¼ˆ<strong>ä½†å…¶å®é€šå¸¸å¹¶ä¸è¿™ä¹ˆåš</strong>ï¼‰</p><h3 id="å¸¸è§åˆ†æ”¯">å¸¸è§åˆ†æ”¯</h3><h4 id="ä¸€ã€ä¸»åˆ†æ”¯master">ä¸€ã€ä¸»åˆ†æ”¯master</h4><p><strong>ä»£ç åº“åº”è¯¥æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»åˆ†æ”¯</strong>ã€‚æ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒã€‚</p><p><strong>Gitä¸»åˆ†æ”¯çš„åå­—ï¼Œé»˜è®¤å«åšMasterã€‚å®ƒæ˜¯è‡ªåŠ¨å»ºç«‹çš„ï¼Œç‰ˆæœ¬åº“åˆå§‹åŒ–ä»¥åï¼Œé»˜è®¤å°±æ˜¯åœ¨ä¸»åˆ†æ”¯åœ¨è¿›è¡Œå¼€å‘ã€‚</strong></p><h4 id="äºŒã€-å¼€å‘åˆ†æ”¯Develop">äºŒã€ å¼€å‘åˆ†æ”¯Develop</h4><p>ä¸»åˆ†æ”¯åªç”¨æ¥åˆ†å¸ƒé‡å¤§ç‰ˆæœ¬ï¼Œæ—¥å¸¸å¼€å‘åº”è¯¥åœ¨å¦ä¸€æ¡åˆ†æ”¯ä¸Šå®Œæˆã€‚æˆ‘ä»¬æŠŠå¼€å‘ç”¨çš„åˆ†æ”¯ï¼Œå«åšDevelopï¼ˆæˆ–è€…Devï¼‰ã€‚</p><p>è¿™ä¸ªåˆ†æ”¯å¯ä»¥ç”¨æ¥ç”Ÿæˆä»£ç çš„æœ€æ–°éš”å¤œç‰ˆæœ¬ï¼ˆnightlyï¼‰ã€‚å¦‚æœæƒ³æ­£å¼å¯¹å¤–å‘å¸ƒï¼Œå°±åœ¨Masteråˆ†æ”¯ä¸Šï¼Œå¯¹Developåˆ†æ”¯è¿›è¡Œ&quot;åˆå¹¶&quot;ï¼ˆmergeï¼‰ã€‚</p><h4 id="ä¸‰ã€ä¸´æ—¶æ€§åˆ†æ”¯">ä¸‰ã€ä¸´æ—¶æ€§åˆ†æ”¯</h4><p>ä¸´æ—¶æ€§åˆ†æ”¯ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ul><li><p>åŠŸèƒ½åˆ†æ”¯ ï¼ˆfeatureï¼‰</p></li><li><p>é¢„å‘å¸ƒåˆ†æ”¯ (release)</p></li><li><p>ä¿®è¡¥bugåˆ†æ”¯ (fixbug)</p></li></ul><p>è¿™ä¸‰ç§åˆ†æ”¯éƒ½å±äºä¸´æ—¶æ€§éœ€è¦ï¼Œä½¿ç”¨å®Œä»¥åï¼Œåº”è¯¥åˆ é™¤ï¼Œä½¿å¾—ä»£ç åº“çš„å¸¸è®¾åˆ†æ”¯å§‹ç»ˆåªæœ‰Masterå’ŒDevelopã€‚</p><p>å°‘ç”¨ï¼Œå°±ä¸å†å±•å¼€è®²</p><h2 id="å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“">å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“</h2><h3 id="å·¥ä½œåŒºï¼ˆWorking-Directoryï¼‰">å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰</h3><p>å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚</p><h3 id="ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰">ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰</h3><p>å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•<code>.git</code>ï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚</p><p>Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯<code>master</code>ï¼Œä»¥åŠæŒ‡å‘<code>master</code>çš„ä¸€ä¸ªæŒ‡é’ˆå«<code>HEAD</code>ã€‚</p><p><img src="0.jfif" alt=""></p><p>headå°±ä¸ç»†è¯´äº†ï¼Œå‚è€ƒï¼š<a href="https://www.liaoxuefeng.com/wiki/896043488029600/900003767775424">https://www.liaoxuefeng.com/wiki/896043488029600/900003767775424</a></p><p>æˆ‘ä»¬æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼š</p><ul><li><p>ç¬¬ä¸€æ­¥æ˜¯ç”¨<code>git add</code>æŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼›</p></li><li><p>ç¬¬äºŒæ­¥æ˜¯ç”¨<code>git commit</code>æäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚</p></li></ul><p>å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ª<code>master</code>åˆ†æ”¯ï¼Œæ‰€ä»¥ï¼Œç°åœ¨ï¼Œ<code>git commit</code>å°±æ˜¯å¾€<code>master</code>åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚</p><p>ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œéœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚</p><h1>ä¸Šæ‰‹æ“ä½œ</h1><h2 id="åˆ›å»ºç‰ˆæœ¬åº“">åˆ›å»ºç‰ˆæœ¬åº“</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><img src="2.png" style="zoom: 50%;" /><img src="3.png" style="zoom:50%;" /><h2 id="è¿›è¡Œåˆ›å»ºä¸æäº¤">è¿›è¡Œåˆ›å»ºä¸æäº¤</h2><p>åœ¨æ­¤ç›®å½•ä¸‹æ–°å»ºlearn.txtï¼Œè¾“å…¥ä»»æ„å­—ç¬¦ï¼Œæ¯”å¦‚â€æˆ‘æƒ³å­¦gitâ€œï¼Œæ‰§è¡Œï¼šï¼ˆæ·»åŠ ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add learn.txt</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥æ·»åŠ åˆ°ä»“åº“ï¼ŒUnixçš„å“²å­¦æ˜¯â€œæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯â€</p><p>æˆ‘ä»¬æ–°å»ºç±»ã€æ¥å£ç­‰æ–‡ä»¶æ—¶ï¼Œå°±å¾€å¾€æ‰§è¡Œadd</p><p>ä¸ä¿¡ï¼Ÿæ‰§è¡Œï¼šï¼ˆæ˜¾ç¤ºçŠ¶æ€ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤ºï¼š</p><img src="4.png" style="zoom:50%;" /><p>ç°åœ¨æ•°æ®å­˜å‚¨åœ¨æš‚å­˜åŒº</p><p>å¦‚ä½•å­˜å…¥ç‰ˆæœ¬åº“ï¼Ÿæ‰§è¡Œï¼šï¼ˆæäº¤ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m</span><br></pre></td></tr></table></figure><img src="5.png" style="zoom:50%;" /><p>ç®€å•è§£é‡Šä¸€ä¸‹<code>git commit</code>å‘½ä»¤ï¼Œ<strong><code>-m</code>åé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜ï¼Œå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œå½“ç„¶æœ€å¥½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ä»å†å²è®°å½•é‡Œæ–¹ä¾¿åœ°æ‰¾åˆ°æ”¹åŠ¨è®°å½•ã€‚</strong></p><p>å«Œéº»çƒ¦ä¸æƒ³è¾“å…¥<code>-m &quot;xxx&quot;</code>è¡Œä¸è¡Œï¼Ÿç¡®å®æœ‰åŠæ³•å¯ä»¥è¿™ä¹ˆå¹²ï¼Œä½†æ˜¯å¼ºçƒˆä¸å»ºè®®ä½ è¿™ä¹ˆå¹²ï¼Œå› ä¸ºè¾“å…¥è¯´æ˜å¯¹è‡ªå·±å¯¹åˆ«äººé˜…è¯»éƒ½å¾ˆé‡è¦ã€‚å®åœ¨ä¸æƒ³è¾“å…¥è¯´æ˜çš„ç«¥é‹è¯·è‡ªè¡ŒGoogleï¼Œæˆ‘ä¸å‘Šè¯‰ä½ è¿™ä¸ªå‚æ•°ã€‚</p><p><code>git commit</code>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåä¼šå‘Šè¯‰ä½ ï¼Œ<code>1 file changed</code>ï¼š1ä¸ªæ–‡ä»¶è¢«æ”¹åŠ¨ï¼ˆæˆ‘ä»¬æ–°æ·»åŠ çš„learn.txtæ–‡ä»¶ï¼‰ï¼›<code>1 insertions</code>ï¼šæ’å…¥äº†ä¸€è¡Œå†…å®¹ï¼ˆlearn.txtæœ‰ä¸€è¡Œå†…å®¹ï¼‰ã€‚</p><p>æ­¤æ—¶ï¼Œå†æŸ¥çœ‹çŠ¶æ€ï¼š</p><img src="6.png" style="zoom:50%;" /><p>å¯è§ï¼Œæ²¡ä»€ä¹ˆå¯ä»¥æäº¤çš„äº†ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><p>Qï¼šè¾“å…¥<code>git add readme.txt</code>ï¼Œå¾—åˆ°é”™è¯¯ï¼š<code>fatal: not a git repository (or any of the parent directories)</code>ã€‚</p><p>Aï¼š<strong>Gitå‘½ä»¤å¿…é¡»åœ¨Gitä»“åº“ç›®å½•å†…æ‰§è¡Œ</strong>ï¼ˆ<code>git init</code>é™¤å¤–ï¼‰ï¼Œåœ¨ä»“åº“ç›®å½•å¤–æ‰§è¡Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><h2 id="å›é€€">å›é€€</h2><p>ä¿®æ”¹æ–‡ä»¶ï¼Œå†æ¬¡æäº¤ã€‚ä½†æ˜¯è¦å…ˆaddï¼Œå†commitã€‚æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><img src="7.png" style="zoom:50%;" /><p>æŸ¥çœ‹æäº¤è®°å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š</p><img src="8.png" style="zoom:50%;" /><p>åƒè¿™æ ·ï¼Œä½ ä¸æ–­å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œç„¶åä¸æ–­æäº¤ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“é‡Œï¼Œå°±å¥½æ¯”æ‰“åŸç¥æ¸¸æˆæ—¶ï¼Œæ¯é€šå…³ä¸€éƒ¨åˆ†å°±ä¼šä¸å¤è‹ä¹‹é—¨å»ºç«‹è”ç³»ï¼Œå¦‚æœæŸä¸€å…³æ²¡è¿‡å»ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©è¯»å–å‰ä¸€å…³çš„çŠ¶æ€å†é‡æ–°å¼€å§‹ã€‚Gitä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ¯å½“ä½ è§‰å¾—æ–‡ä»¶ä¿®æ”¹åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥â€œä¿å­˜ä¸€ä¸ªå¿«ç…§â€ï¼Œè¿™ä¸ªå¿«ç…§åœ¨Gitä¸­è¢«ç§°ä¸º<code>commit</code>ã€‚ä¸€æ—¦ä½ æŠŠæ–‡ä»¶æ”¹ä¹±äº†ï¼Œæˆ–è€…è¯¯åˆ äº†æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä»æœ€è¿‘çš„ä¸€ä¸ª<code>commit</code>æ¢å¤ï¼Œç„¶åç»§ç»­å·¥ä½œï¼Œè€Œä¸æ˜¯æŠŠå‡ ä¸ªæœˆçš„å·¥ä½œæˆæœå…¨éƒ¨ä¸¢å¤±ã€‚</p><p>å¦‚ä½•å›é€€ï¼Ÿæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤ºå›é€€åˆ°äº†ä¸Šä¸€ç‰ˆ</p><p>ä¸è¿‡å›é€€çš„å¯é€‰å‚æ•°å®åœ¨å¤ªå¤šï¼Œä¸å±•å¼€è®²ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.runoob.com/git/git-reset.html">èœé¸Ÿæ•™ç¨‹</a></p><blockquote><p>ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›åŸºç¡€æ€§å†…å®¹ï¼Œå¹¶ä¸”å®é™…æ“ä½œä¸­ç”¨çš„ä¹Ÿä¸å¤šï¼Œä½†æ˜¯äº†è§£ä¸€ä¸‹å¯ä»¥è®©å¤§å®¶å¯¹gitçš„åŸç†æœ‰æ›´æ¸…æ¥šçš„è®¤è¯†ï¼Œæ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯åº”ç”¨æœ€é¢‘ç¹çš„</p></blockquote><h1>è¿œç¨‹ä»“åº“</h1><h2 id="å¼•è¨€">å¼•è¨€</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œgitçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="10.jpg" alt="ï¼ˆå›¾æºèœé¸Ÿï¼‰"></p><p>æˆ‘ä»¬ä¹ŸçŸ¥é“Git å¹¶ä¸åƒ SVN é‚£æ ·æœ‰ä¸ªä¸­å¿ƒæœåŠ¡å™¨ã€‚</p><p>ç›®å‰æˆ‘ä»¬ä½¿ç”¨åˆ°çš„ Git å‘½ä»¤éƒ½æ˜¯åœ¨æœ¬åœ°æ‰§è¡Œï¼Œå¦‚æœä½ æƒ³é€šè¿‡ Git åˆ†äº«ä½ çš„ä»£ç æˆ–è€…ä¸å…¶ä»–å¼€å‘äººå‘˜åˆä½œã€‚ ä½ å°±éœ€è¦å°†æ•°æ®æ”¾åˆ°ä¸€å°å…¶ä»–å¼€å‘äººå‘˜èƒ½å¤Ÿè¿æ¥çš„æœåŠ¡å™¨ä¸Šã€‚</p><p>ï¼ˆæ³¨ï¼šé¦–å…ˆç¡®ä¿å­¦çº¿gitlabè´¦å·å·²æ³¨å†Œï¼‰</p><h2 id="å…‹éš†">å…‹éš†</h2><p>å…‹éš†ä¸€ä¸ªè¿œç¨‹é¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone url</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼š<code>git clone http://git.swsdu.online/lzw-sdu/first-git-job.git</code>ï¼ˆå¯èƒ½è¦è¾“è´¦å·å¯†ç ï¼‰</p><img src="11.png" style="zoom:50%;" /><p>ä½ ä¼šå‘ç°æ–‡ä»¶å¤¹é‡Œå¤šäº†first-git-jobè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯è¿œç¨‹ä»“åº“ä¸­çš„é¡¹ç›®å†…å®¹</p><h2 id="push-pull-merge">push&amp;pull&amp;merge</h2><h3 id="push">push</h3><h4 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h4><p><code>git push</code>å‘½ä»¤ç”¨äºå°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼Œæ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯&lt;æ¥æºåœ°&gt;:&lt;ç›®çš„åœ°&gt;ï¼Œæ‰€ä»¥<code>git pull</code>æ˜¯&lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt;ï¼Œè€Œ<code>git push</code>æ˜¯&lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;ã€‚(pullä¸‹é¢ä¼šè¯´)</p><blockquote><p>è‡³äºè¿œç¨‹ä¸»æœºï¼Œå¯ä»¥ç”¨<code>git remote</code>æŸ¥çœ‹ï¼Œå…·ä½“ä¸å±•å¼€è®²ï¼Œå­¦çº¿ä¸€èˆ¬åªæœ‰origin</p></blockquote><p>å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨&quot;è¿½è¸ªå…³ç³»&quot;çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„<code>master</code>åˆ†æ”¯æ¨é€åˆ°<code>origin</code>ä¸»æœºçš„<code>master</code>åˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</p><p>å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push origin :master</span><br><span class="line"># ç­‰åŒäº</span><br><span class="line">git push origin --<span class="keyword">delete</span> master</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåˆ é™¤<code>origin</code>ä¸»æœºçš„<code>master</code>åˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°<code>origin</code>ä¸»æœºçš„å¯¹åº”åˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>-u</code>é€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨<code>git push</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤å°†æœ¬åœ°çš„<code>master</code>åˆ†æ”¯æ¨é€åˆ°<code>origin</code>ä¸»æœºï¼ŒåŒæ—¶æŒ‡å®š<code>origin</code>ä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨<code>git push</code>äº†ã€‚</p><p>ä¸å¸¦ä»»ä½•å‚æ•°çš„<code>git push</code>ï¼Œé»˜è®¤åªæ¨é€å½“å‰åˆ†æ”¯ï¼Œè¿™å«åšsimpleæ–¹å¼ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§matchingæ–¹å¼ï¼Œä¼šæ¨é€æ‰€æœ‰æœ‰å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ã€‚Git 2.0ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤é‡‡ç”¨matchingæ–¹æ³•ï¼Œç°åœ¨æ”¹ä¸ºé»˜è®¤é‡‡ç”¨simpleæ–¹å¼ã€‚å¦‚æœè¦ä¿®æ”¹è¿™ä¸ªè®¾ç½®ï¼Œå¯ä»¥é‡‡ç”¨<code>git config</code>å‘½ä»¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="built_in">global</span> push.default matching</span><br><span class="line"># æˆ–è€…</span><br><span class="line">git config --<span class="built_in">global</span> push.default simple</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä¸ç®¡æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œå°†æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨<code>--all</code>é€‰é¡¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --all origin</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æ‰€æœ‰æœ¬åœ°åˆ†æ”¯éƒ½æ¨é€åˆ°<code>origin</code>ä¸»æœºã€‚</p><p>å¦‚æœè¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬æ¯”æœ¬åœ°ç‰ˆæœ¬æ›´æ–°ï¼Œæ¨é€æ—¶Gitä¼šæŠ¥é”™ï¼Œè¦æ±‚å…ˆåœ¨æœ¬åœ°åš<code>git pull</code>åˆå¹¶å·®å¼‚ï¼Œç„¶åå†æ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚è¿™æ—¶ï¼Œå¦‚æœä½ ä¸€å®šè¦æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨<code>--force</code>é€‰é¡¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --force origin </span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨<code>--force</code>é€‰é¡¹ï¼Œç»“æœå¯¼è‡´è¿œç¨‹ä¸»æœºä¸Šæ›´æ–°çš„ç‰ˆæœ¬è¢«è¦†ç›–ã€‚é™¤éä½ å¾ˆç¡®å®šè¦è¿™æ ·åšï¼Œå¦åˆ™åº”è¯¥å°½é‡é¿å…ä½¿ç”¨<code>--force</code>é€‰é¡¹ã€‚</p><h4 id="æ“ä½œ">æ“ä½œ</h4><p>åœ¨å‰é¢å…‹éš†åˆ°æœ¬åœ°çš„åº“ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°é‡Œé¢å·²ç»æœ‰<code>.git</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¿›è¡Œæ“ä½œã€‚</p><p>æ·»åŠ è‡ªå®šä¹‰å†…å®¹ï¼Œç„¶åpushåˆ°è¿œç¨‹ä»“åº“ï¼Œæ³¨æ„è¦å…ˆaddå¹¶æäº¤åˆ°æœ¬åœ°ç‰ˆæœ¬åº“ã€‚ç„¶åç›´æ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><p>å› ä¸ºæœ¬åœ°è·Ÿè¿œç¨‹éƒ½åªæœ‰masteråˆ†æ”¯ï¼Œè€Œä¸”åªæœ‰originä¸€ä¸ªè¿œç¨‹ä¸»æœº</p><p><img src="14.png" alt=""></p><h3 id="pull">pull</h3><p><code>git pull</code>å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ã€‚å®ƒçš„å®Œæ•´æ ¼å¼ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼Œå–å›<code>origin</code>ä¸»æœºçš„<code>next</code>åˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„<code>master</code>åˆ†æ”¯åˆå¹¶ï¼Œéœ€è¦å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin next:master</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin next</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå–å›<code>origin/next</code>åˆ†æ”¯ï¼Œå†ä¸å½“å‰åˆ†æ”¯åˆå¹¶ã€‚å®è´¨ä¸Šï¼Œè¿™ç­‰åŒäºå…ˆåš<code>git fetch</code>ï¼Œå†åš<code>git merge</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git merge origin/next</span><br></pre></td></tr></table></figure><p>åœ¨æŸäº›åœºåˆï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»ï¼ˆtrackingï¼‰ã€‚æ¯”å¦‚ï¼Œåœ¨<code>git clone</code>çš„æ—¶å€™ï¼Œæ‰€æœ‰æœ¬åœ°åˆ†æ”¯é»˜è®¤ä¸è¿œç¨‹ä¸»æœºçš„åŒååˆ†æ”¯ï¼Œå»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°çš„<code>master</code>åˆ†æ”¯è‡ªåŠ¨&quot;è¿½è¸ª&quot;<code>origin/master</code>åˆ†æ”¯ã€‚</p><p>Gitä¹Ÿå…è®¸æ‰‹åŠ¨å»ºç«‹è¿½è¸ªå…³ç³»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream master origin/next</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤æŒ‡å®š<code>master</code>åˆ†æ”¯è¿½è¸ª<code>origin/next</code>åˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œ<code>git pull</code>å°±å¯ä»¥çœç•¥è¿œç¨‹åˆ†æ”¯åã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°çš„å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å¯¹åº”çš„<code>origin</code>ä¸»æœº&quot;è¿½è¸ªåˆ†æ”¯&quot;ï¼ˆremote-tracking branchï¼‰è¿›è¡Œåˆå¹¶ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œè¿è¿œç¨‹ä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å”¯ä¸€ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ã€‚</p><p>å¦‚æœåˆå¹¶éœ€è¦é‡‡ç”¨rebaseæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨<code>--rebase</code>é€‰é¡¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull --rebase &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿œç¨‹ä¸»æœºåˆ é™¤äº†æŸä¸ªåˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git pull</code> ä¸ä¼šåœ¨æ‹‰å–è¿œç¨‹åˆ†æ”¯çš„æ—¶å€™ï¼Œåˆ é™¤å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ï¼Œç”±äºå…¶ä»–äººæ“ä½œäº†è¿œç¨‹ä¸»æœºï¼Œå¯¼è‡´<code>git pull</code>ä¸çŸ¥ä¸è§‰åˆ é™¤äº†æœ¬åœ°åˆ†æ”¯ã€‚</p><p>ä½†æ˜¯ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼ŒåŠ ä¸Šå‚æ•° <code>-p</code> å°±ä¼šåœ¨æœ¬åœ°åˆ é™¤è¿œç¨‹å·²ç»åˆ é™¤çš„åˆ†æ”¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git pull -p</span><br><span class="line"># ç­‰åŒäºä¸‹é¢çš„å‘½ä»¤</span><br><span class="line">git fetch --prune origin </span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure><h3 id="merge">merge</h3><p>æœ‰æ—¶ä¸€ä¸ªé¡¹ç›®æœ‰å¤šä¸ªå¼€å‘è€…ï¼Œå¦‚æœä½ ä¿®æ”¹çš„æ–‡ä»¶åœ¨è¿œç¨‹ä»“åº“ä¸­å·²ç»è¢«å…¶ä»–å¼€å‘è€…ä¿®æ”¹ï¼Œå½“ä½ æƒ³æŠŠè‡ªå·±çš„ä¿®æ”¹pushåˆ°è¿œç¨‹ä»“åº“æˆ–è€…ä»è¿œç¨‹ä»“åº“æ›´æ–°ä»£ç æ—¶å°±ä¼šè¢«æé†’éœ€è¦mergeã€‚å½“ç„¶mergeçš„åŠŸèƒ½ä¹Ÿä¸é™äºæ­¤ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡mergeè¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼Œå½“ç„¶è¿™æ˜¯åè¯ã€‚</p><p>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬çš„mergeéƒ½æ˜¯åœ¨IDEä¸­è¿›è¡Œçš„ï¼Œæ­¤å¤„ä»¥jetbrainså®¶çš„IDEä¸ºä¾‹ã€‚</p><img src="12.png" style="zoom:50%;" /><ul><li><p>å·¦è¾¹çš„Local Changesä»£è¡¨â€å½“å‰â€œåˆ†æ”¯ä¸Šçš„ä¿®æ”¹ï¼›</p></li><li><p>å³è¾¹çš„Changes from Serverä»£è¡¨â€œåˆå¹¶è¿›æ¥â€çš„åˆ†æ”¯ä¸Šçš„ä¿®æ”¹ï¼›</p></li><li><p>ä¸­é—´çš„Resultä»£è¡¨ç»è¿‡å¤„ç†åçš„æœ€ç»ˆå†…å®¹ï¼›</p></li></ul><p>è¿™éƒ¨åˆ†è¿˜æ˜¯å»ºè®®å„éƒ¨é—¨ç»“åˆè‡ªå·±IDEå®é™…æƒ…å†µå†è¯´å‡ å¥ï¼Œè¿™é‡Œä¸å±•å¼€è®²ã€‚</p><h3 id="PS-SSH-key">PS. SSH key</h3><p>åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‰“å¼€Shellï¼ˆWindowsä¸‹æ‰“å¼€Git Bashï¼‰ï¼Œåˆ›å»ºSSH Keyï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br></pre></td></tr></table></figure><p>ä½ éœ€è¦æŠŠé‚®ä»¶åœ°å€æ¢æˆä½ è‡ªå·±çš„é‚®ä»¶åœ°å€ï¼Œç„¶åä¸€è·¯å›è½¦ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯ï¼Œç”±äºè¿™ä¸ªKeyä¹Ÿä¸æ˜¯ç”¨äºå†›äº‹ç›®çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— éœ€è®¾ç½®å¯†ç ã€‚</p><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°<code>.ssh</code>ç›®å½•ï¼Œé‡Œé¢æœ‰<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œ<code>id_rsa</code>æ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œ<code>id_rsa.pub</code>æ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚</p><p>ç¬¬2æ­¥ï¼šåœ¨â€œSSH Keysâ€é¡µé¢ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´<code>id_rsa.pub</code>æ–‡ä»¶çš„å†…å®¹å³å¯ã€‚</p><p>ä¸ºä»€ä¹ˆGitHubéœ€è¦SSH Keyå‘¢ï¼Ÿå› ä¸ºGitHubéœ€è¦è¯†åˆ«å‡ºä½ æ¨é€çš„æäº¤ç¡®å®æ˜¯ä½ æ¨é€çš„ï¼Œè€Œä¸æ˜¯åˆ«äººå†’å……çš„ï¼Œè€ŒGitæ”¯æŒSSHåè®®ï¼Œæ‰€ä»¥ï¼ŒGitHubåªè¦çŸ¥é“äº†ä½ çš„å…¬é’¥ï¼Œå°±å¯ä»¥ç¡®è®¤åªæœ‰ä½ è‡ªå·±æ‰èƒ½æ¨é€ã€‚</p><p>å½“ç„¶ï¼ŒGitHubå…è®¸ä½ æ·»åŠ å¤šä¸ªKeyã€‚å‡å®šä½ æœ‰è‹¥å¹²ç”µè„‘ï¼Œä½ ä¸€ä¼šå„¿åœ¨å…¬å¸æäº¤ï¼Œä¸€ä¼šå„¿åœ¨å®¶é‡Œæäº¤ï¼Œåªè¦æŠŠæ¯å°ç”µè„‘çš„Keyéƒ½æ·»åŠ åˆ°GitHubï¼Œå°±å¯ä»¥åœ¨æ¯å°ç”µè„‘ä¸Šå¾€GitHubæ¨é€äº†ã€‚</p><h1>å‚è€ƒï¼š</h1><p>gitçš„ç®€ä»‹ä¸æ¦‚å¿µã€è¿œç¨‹ä»“åº“ç­‰ï¼š<a href="https://www.liaoxuefeng.com/">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></p><p>gitçš„å¸¸è§åˆ†æ”¯ï¼š<a href="https://blog.csdn.net/zyw0713/article/details/80083431">https://blog.csdn.net/zyw0713/article/details/80083431</a></p><p>gitåŸºæœ¬æ“ä½œï¼šå»–é›ªå³°å®˜ç½‘ï¼ˆåŒä¸Šï¼‰ä¸<a href="https://www.runoob.com/git/git-basic-operations.html">èœé¸Ÿæ•™ç¨‹</a></p><p>git pushã€pullçš„çŸ¥è¯†ç‚¹ï¼šé˜®ä¸€å³°çš„<a href="https://www.ruanyifeng.com/blog/2014/06/git_remote.html">åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„å®éªŒå…«ï¼šå›¾</title>
      <link href="/2021/12/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E5%85%AB%EF%BC%9A%E5%9B%BE/"/>
      <url>/2021/12/06/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E5%85%AB%EF%BC%9A%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>1ã€ åˆ›å»ºå›¾ç±»ï¼Œå­˜å‚¨ç»“æ„ä½¿ç”¨é‚»æ¥çŸ©é˜µã€‚</p><p>2ã€ è¾“å…¥å›¾çš„èŠ‚ç‚¹æ•°nï¼ˆå°äº10ä¸ªï¼‰ã€è¾¹æ•°mï¼ŒèŠ‚ç‚¹åˆ†åˆ«ç”¨1-nä»£è¡¨ã€‚</p><p>3ã€ é‡‡ç”¨â€œèµ·å§‹èŠ‚ç‚¹ï¼Œç»ˆæ­¢èŠ‚ç‚¹ï¼Œæƒå€¼â€è¾“å…¥å›¾çš„mæ¡è¾¹ï¼Œåˆ›å»ºå›¾ã€‚</p><p>4ã€ è¾“å‡ºä»èŠ‚ç‚¹1å¼€å§‹çš„BFSéå†ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ‰å¤šä¸ªå¯ä»¥é€‰æ‹©çš„èŠ‚ç‚¹ï¼Œåˆ™ä¼˜å…ˆé€‰æ‹©ç¼–å·è¾ƒå°çš„èŠ‚ç‚¹ã€‚</p><p>5ã€ è¾“å‡ºä»èŠ‚ç‚¹1å¼€å§‹çš„DFSéå†ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ‰å¤šä¸ªå¯ä»¥é€‰æ‹©çš„èŠ‚ç‚¹ï¼Œåˆ™ä¼˜å…ˆé€‰æ‹©ç¼–å·è¾ƒå°çš„èŠ‚ç‚¹ã€‚</p><p>6ã€ è¾“å‡ºä»ç¬¬1èŠ‚ç‚¹åˆ°ç¬¬nèŠ‚ç‚¹æœ€çŸ­è·¯å¾„çš„é•¿åº¦ï¼Œå¦‚æœæ²¡æœ‰è·¯ç»ï¼Œè¾“å‡º0ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">queue&lt;<span class="keyword">int</span>&gt; resultQueue;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graph</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> **nodes = <span class="keyword">new</span> <span class="keyword">int</span>*[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> nodeNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> **weight = <span class="keyword">new</span> <span class="keyword">int</span>*[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> *status = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">Graph</span>()&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">            <span class="built_in">initStatus</span>();</span><br><span class="line">            nodes[i]= <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">            weight[i] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; ++j) &#123;</span><br><span class="line">                nodes[i][j] = <span class="number">0</span>;</span><br><span class="line">                weight[i][j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initStatus</span><span class="params">()</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">            status[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="built_in">initStatus</span>();</span><br><span class="line">        queue&lt;<span class="keyword">int</span>&gt; nodeQueue;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nodeNum; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nodes[<span class="number">1</span>][i] == <span class="number">1</span>)&#123;</span><br><span class="line">                nodeQueue.<span class="built_in">push</span>(i);</span><br><span class="line">                status[i] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        status[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//1è¿™ä¸ªèŠ‚ç‚¹å·²ç»ç”¨è¿‡äº†</span></span><br><span class="line">        resultQueue.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!nodeQueue.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">int</span> nodeNow = nodeQueue.<span class="built_in">front</span>();</span><br><span class="line">            nodeQueue.<span class="built_in">pop</span>();<span class="comment">//è®°ä¸‹ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶å°†å…¶å¼¹æ ˆ</span></span><br><span class="line">            resultQueue.<span class="built_in">push</span>(nodeNow);<span class="comment">//æ”¾åˆ°ç»“æœæ ˆé‡Œ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= nodeNum; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nodes[nodeNow][i] == <span class="number">1</span> &amp;&amp; status[i] == <span class="number">0</span>)&#123;<span class="comment">//æœ‰è¾¹è€Œä¸”è¿˜æ²¡åˆ°è¾¾è¿‡</span></span><br><span class="line">                    nodeQueue.<span class="built_in">push</span>(i);</span><br><span class="line">                    status[i] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!resultQueue.<span class="built_in">empty</span>()&amp;&amp;resultQueue.<span class="built_in">size</span>() != <span class="number">1</span>)&#123;</span><br><span class="line">            cout&lt;&lt;resultQueue.<span class="built_in">front</span>()&lt;&lt;<span class="string">&quot;,&quot;</span>;</span><br><span class="line">            resultQueue.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;resultQueue.<span class="built_in">front</span>()&lt;&lt;endl;</span><br><span class="line">        resultQueue.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> i)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        resultQueue.<span class="built_in">push</span>(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= nodeNum; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nodes[i][j] == <span class="number">1</span> &amp;&amp; status[j] == <span class="number">0</span>)&#123;<span class="comment">//æœ‰è¾¹è€Œä¸”è¿˜æ²¡åˆ°è¾¾è¿‡</span></span><br><span class="line">                status[j] = <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">DFS</span>(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findWay</span><span class="params">(<span class="keyword">int</span> targetLocation)</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">        <span class="built_in">initStatus</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= targetLocation; ++i) &#123;</span><br><span class="line">            status[i] = <span class="number">100000</span>;<span class="comment">//è¶³å¤Ÿå¤§äº†,ç”¨å®ƒæ¥è¡¨ç¤ºåˆ°åˆå§‹èŠ‚ç‚¹æœ€è¿‘çš„è·ç¦»</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        queue&lt;<span class="keyword">int</span>&gt; nodeQueue;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nodeNum; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nodes[<span class="number">1</span>][i] == <span class="number">1</span>)&#123;</span><br><span class="line">                nodeQueue.<span class="built_in">push</span>(i);</span><br><span class="line">                <span class="keyword">int</span> wt = status[<span class="number">1</span>] + weight[<span class="number">1</span>][i];</span><br><span class="line">                <span class="keyword">if</span> (wt&lt;status[i])&#123;</span><br><span class="line">                    status[i] = wt;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!nodeQueue.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">int</span> nodeNow = nodeQueue.<span class="built_in">front</span>();</span><br><span class="line">            nodeQueue.<span class="built_in">pop</span>();<span class="comment">//è®°ä¸‹ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶å°†å…¶å¼¹æ ˆ</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= nodeNum; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nodes[nodeNow][i] == <span class="number">1</span>)&#123;<span class="comment">//æœ‰è¾¹è€Œä¸”è¿˜æ²¡åˆ°è¾¾è¿‡</span></span><br><span class="line">                    nodeQueue.<span class="built_in">push</span>(i);</span><br><span class="line">                    <span class="keyword">int</span> wt = status[nodeNow] + weight[nodeNow][i];</span><br><span class="line">                    <span class="keyword">if</span> (wt&lt;status[i])&#123;</span><br><span class="line">                        status[i] = wt;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;status[targetLocation]&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Input&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d,%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    Graph graph = *<span class="keyword">new</span> <span class="built_in">Graph</span>();</span><br><span class="line">    graph.nodeNum = n;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>, weight = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d,%d,%d&quot;</span>,&amp;start,&amp;end,&amp;weight);</span><br><span class="line">        <span class="keyword">if</span> (start&lt;end)&#123;</span><br><span class="line">            graph.nodes[start][end] = <span class="number">1</span>;</span><br><span class="line">            graph.weight[start][end] = weight;</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            graph.nodes[end][start] = <span class="number">1</span>;</span><br><span class="line">            graph.weight[end][start] = weight;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Output&quot;</span> &lt;&lt; endl;</span><br><span class="line">    graph.<span class="built_in">BFS</span>();</span><br><span class="line">    graph.<span class="built_in">initStatus</span>();</span><br><span class="line">    graph.<span class="built_in">DFS</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (!resultQueue.<span class="built_in">empty</span>()&amp;&amp;resultQueue.<span class="built_in">size</span>() != <span class="number">1</span>)&#123;</span><br><span class="line">        cout&lt;&lt;resultQueue.<span class="built_in">front</span>()&lt;&lt;<span class="string">&quot;,&quot;</span>;</span><br><span class="line">        resultQueue.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;resultQueue.<span class="built_in">front</span>()&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">if</span> (resultQueue.<span class="built_in">front</span>() != graph.nodeNum)&#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;0&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        graph.<span class="built_in">findWay</span>(graph.nodeNum);</span><br><span class="line">    &#125;</span><br><span class="line">    resultQueue.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;End&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„è¯•éªŒä¸ƒï¼šæœç´¢æ ‘ä¸å †</title>
      <link href="/2021/11/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AF%95%E9%AA%8C%E4%B8%83%EF%BC%9A%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%A0%86/"/>
      <url>/2021/11/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AF%95%E9%AA%8C%E4%B8%83%EF%BC%9A%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%A0%86/</url>
      
        <content type="html"><![CDATA[<p>å†™çš„å¥½ä¹±ã€‚æœ‰ç©ºå†æ•´ç†å§</p><blockquote><p>1ã€ è¾“å…¥ä¸€ç³»åˆ—ä¸ä¸ºé›¶çš„æ­£æ•´æ•°ï¼ˆæœ€å¤šä¸è¶…è¿‡20ä¸ªï¼‰ï¼Œé‡åˆ°0ä»£è¡¨è¾“å…¥ç»“æŸï¼ˆä¸åŒ…å«0ï¼‰ã€‚</p><p>2ã€ æ ¹æ®ä¸Šé¢è¾“å…¥çš„æ•°æ®åºåˆ—ï¼Œç”¨åˆå§‹åŒ–æ–¹æ³•åˆ›å»ºæœ€å¤§å †ï¼ˆä¸è¦ç”¨èŠ‚ç‚¹ä¾æ¬¡æ’å…¥çš„åŠæ³•åˆ›å»ºæœ€å¤§å †ï¼‰ï¼Œç„¶åè¾“å‡ºæœ€å¤§å †çš„å±‚æ¬¡åºåˆ—ã€‚</p><p>3ã€ è¾“å‡ºç”¨å †æ’åºåçš„æ’åºç»“æœã€‚</p><p>4ã€ æ ¹æ®ä¸Šé¢è¾“å…¥çš„æ•°æ®ï¼Œåˆ›å»ºäºŒå‰æœç´¢æ ‘ï¼ˆå…³é”®å­—ä¸å…è®¸é‡å¤ï¼Œå¦‚é‡é‡å¤ï¼Œåˆ™ä¸é‡å¤æ’å…¥è¯¥å…³é”®å­—ï¼‰ï¼Œè¾“å‡ºäºŒå‰æœç´¢æ ‘çš„å‰åºåºåˆ—ã€ä¸­åºåºåˆ—ï¼ˆåˆ†è¡Œè¾“å‡ºï¼‰ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> allCount, counter = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BStreeNode</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> data;</span><br><span class="line">    BStreeNode *leftChild, *rightChild;</span><br><span class="line">    <span class="built_in">BStreeNode</span>() &#123;</span><br><span class="line">        leftChild = rightChild = <span class="literal">nullptr</span>;</span><br><span class="line">        data = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> elements[<span class="number">21</span>]&#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MaxHeap::init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size / <span class="number">2</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">int</span> currentElementLocate = i;</span><br><span class="line">            <span class="keyword">int</span> childLocate = <span class="number">2</span> * i;</span><br><span class="line">            <span class="keyword">int</span> data ;</span><br><span class="line">            <span class="keyword">while</span> (childLocate &lt;= size) &#123;</span><br><span class="line">                <span class="keyword">if</span> (childLocate &lt; size &amp;&amp; elements[childLocate] &lt; elements[childLocate + <span class="number">1</span>]) &#123;</span><br><span class="line">                    childLocate++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (elements[currentElementLocate] &lt; elements[childLocate]) &#123;</span><br><span class="line">                    data = elements[currentElementLocate];</span><br><span class="line">                    elements[currentElementLocate] = elements[childLocate];<span class="comment">//æŠŠå­èŠ‚ç‚¹çš„å€¼å¾€ä¸Šç§»</span></span><br><span class="line">                    elements[childLocate] = data;</span><br><span class="line">                &#125;</span><br><span class="line">                currentElementLocate = childLocate;</span><br><span class="line">                childLocate = <span class="number">2</span> * currentElementLocate;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(BStreeNode *node)</span> </span>&#123;<span class="comment">//å‰åºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="built_in">preOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="built_in">preOrder</span>(node-&gt;rightChild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(BStreeNode *node)</span> </span>&#123;<span class="comment">//ä¸­åºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">inOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="keyword">if</span> (counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="built_in">inOrder</span>(node-&gt;rightChild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(BStreeNode *node)</span> </span>&#123;<span class="comment">//ååºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span> (node != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">postOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="built_in">postOrder</span>(node-&gt;rightChild);</span><br><span class="line">        <span class="keyword">if</span> (counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™æ˜¯ä¸€ä¸ªæ„é€ å¯èƒ½çš„å¹³è¡¡äºŒå‰æ ‘çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addToBSTree</span><span class="params">(BStreeNode *pNode, <span class="keyword">int</span> *list, <span class="keyword">int</span> leftFrom, <span class="keyword">int</span> leftTo, <span class="keyword">int</span> rightFrom, <span class="keyword">int</span> rightTo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (leftTo &gt;= leftFrom || rightTo &gt;= rightFrom) &#123;</span><br><span class="line">        <span class="keyword">if</span> (leftTo &gt;= leftFrom) &#123;</span><br><span class="line">            BStreeNode *leftNode = <span class="keyword">new</span> <span class="built_in">BStreeNode</span>();</span><br><span class="line">            <span class="keyword">int</span> leftMiddle = (leftFrom + leftTo) / <span class="number">2</span>;</span><br><span class="line">            leftNode-&gt;data = list[leftMiddle];</span><br><span class="line">            <span class="keyword">if</span> (pNode-&gt;data != leftNode-&gt;data) &#123;</span><br><span class="line">                pNode-&gt;leftChild = leftNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">addToBSTree</span>(leftNode, list, leftFrom, leftMiddle - <span class="number">1</span>, leftMiddle + <span class="number">1</span>, leftTo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rightTo &gt;= rightFrom) &#123;</span><br><span class="line">            BStreeNode *rightNode = <span class="keyword">new</span> <span class="built_in">BStreeNode</span>();</span><br><span class="line">            <span class="keyword">int</span> rightMiddle = (rightFrom + rightTo) / <span class="number">2</span>;</span><br><span class="line">            rightNode-&gt;data = list[rightMiddle];</span><br><span class="line">            <span class="keyword">if</span> (pNode-&gt;data != rightNode-&gt;data) &#123;</span><br><span class="line">                pNode-&gt;rightChild = rightNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">addToBSTree</span>(rightNode, list, rightFrom, rightMiddle - <span class="number">1</span>, rightMiddle + <span class="number">1</span>, rightTo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾åˆ°äºŒå‰æ ‘ä¸­æ–°æ’å…¥çš„nodeçš„èŠ‚ç‚¹çš„ä½ç½®å¹¶æ’å…¥</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(BStreeNode *root, BStreeNode *node)</span> </span>&#123;</span><br><span class="line">    BStreeNode *current = root;</span><br><span class="line">    <span class="keyword">if</span> (node-&gt;data &gt; current-&gt;data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (current-&gt;rightChild != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            current = current-&gt;rightChild;</span><br><span class="line">            <span class="built_in">find</span>(current, node);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            current-&gt;rightChild = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node-&gt;data &lt; current-&gt;data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (current-&gt;leftChild != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            current = current-&gt;leftChild;</span><br><span class="line">            <span class="built_in">find</span>(current, node);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            current-&gt;leftChild = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Input&quot;</span> &lt;&lt; endl;</span><br><span class="line">    MaxHeap *heap = <span class="keyword">new</span> <span class="built_in">MaxHeap</span>();</span><br><span class="line">    <span class="keyword">int</span> inputData[<span class="number">21</span>];<span class="comment">//åé¢è¦ç”¨ï¼Œè®°å½•è¾“å…¥çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">bool</span> has;<span class="comment">//æ•°æ®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">int</span> locate = <span class="number">0</span>;<span class="comment">//dataæ”¾åœ¨å †ä¸­çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span> data = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; data;</span><br><span class="line"></span><br><span class="line">    inputData[allCount] = data;</span><br><span class="line">    allCount++;<span class="comment">//å…ˆ++ï¼Œé¿å…forå¾ªç¯å‡ºé—®é¢˜</span></span><br><span class="line">    <span class="keyword">while</span> (data != <span class="number">0</span>) &#123;</span><br><span class="line">        locate++;</span><br><span class="line">        heap-&gt;elements[locate] = data;</span><br><span class="line">        cin &gt;&gt; data;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¶é›†è¾“å…¥çš„æ•°æ®ï¼Œåé¢è¦ç”¨</span></span><br><span class="line">        has = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allCount; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (data == inputData[i]) &#123; has = <span class="literal">true</span>; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!has &amp;&amp; data != <span class="number">0</span>) &#123;</span><br><span class="line">            inputData[allCount] = data;</span><br><span class="line">            allCount++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    heap-&gt;size = locate;</span><br><span class="line"></span><br><span class="line">    heap-&gt;<span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Output&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¾“å‡ºå±‚æ¬¡åºåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; heap-&gt;size; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; heap-&gt;elements[i] &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; heap-&gt;elements[heap-&gt;size] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å †æ’åº,æœ‰ç‘•ç–µä½†æ˜¯èƒ½ç”¨</span></span><br><span class="line">    <span class="keyword">int</span> counts = heap-&gt;size;</span><br><span class="line">    <span class="keyword">int</span> result[counts];</span><br><span class="line">    locate = counts - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= counts; ++i) &#123;</span><br><span class="line">        <span class="comment">//ä»åå¾€å‰æ”¶é›†ä»å †ä¸­åˆ é™¤çš„æ•°æ®ï¼Œå°±æ˜¯å †æ’åºçš„ç»“æœ</span></span><br><span class="line">        result[locate] = heap-&gt;elements[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; heap-&gt;size; ++j) &#123;</span><br><span class="line">            <span class="comment">//ç†è®ºä¸Šåä¸€ä¸ªåº”è¯¥æ˜¯0ï¼Œä¼šæŠŠåŸæœ¬çš„æœ«å°¾è¦†ç›–æ‰ï¼Œå…¶å®ä¸è¦†ç›–ä¹Ÿæ— å¦¨</span></span><br><span class="line">            heap-&gt;elements[j] = heap-&gt;elements[j + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰€ä»¥--æ”¾åœ¨è¿™</span></span><br><span class="line">        heap-&gt;size--;</span><br><span class="line">        locate--;</span><br><span class="line">        heap-&gt;<span class="built_in">init</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¾“å‡ºå †æ’åºç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; counts - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; result[i] &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; result[counts - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    //åˆ›å»ºäºŒå‰æœç´¢æ ‘</span></span><br><span class="line">    BStreeNode *root = <span class="keyword">new</span> <span class="built_in">BStreeNode</span>();</span><br><span class="line">    root-&gt;data = inputData[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; allCount; ++i) &#123;</span><br><span class="line">        BStreeNode *node = <span class="keyword">new</span> <span class="built_in">BStreeNode</span>();</span><br><span class="line">        node-&gt;data = inputData[i];</span><br><span class="line">        <span class="built_in">find</span>(root, node);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">preOrder</span>(root);</span><br><span class="line">    counter = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">inOrder</span>(root);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;End&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„å®éªŒå…­ï¼šäºŒå‰æ ‘æºç </title>
      <link href="/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E5%85%AD%EF%BC%9A%E4%BA%8C%E5%8F%89%E6%A0%91%E6%BA%90%E7%A0%81/"/>
      <url>/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C%E5%85%AD%EF%BC%9A%E4%BA%8C%E5%8F%89%E6%A0%91%E6%BA%90%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<blockquote><p>1ã€ è¾“å…¥ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘çš„å±‚æ¬¡éå†å­—ç¬¦ä¸²ï¼Œåˆ›å»ºè¿™ä¸ªäºŒå‰æ ‘ï¼Œè¾“å‡ºè¿™ä¸ªäºŒå‰æ ‘çš„å‰åºéå†å­—ç¬¦ä¸²ã€ä¸­åºéå†å­—ç¬¦ä¸²ã€ååºéå†å­—ç¬¦ä¸²ã€ç»“ç‚¹æ•°ç›®ã€äºŒå‰æ ‘é«˜åº¦(ä¸Šè¿°æ¯ä¸€ä¸ªç»“æœç‹¬ç«‹ä¸€è¡Œæ˜¾ç¤º)ã€‚</p><p>2ã€ è¾“å…¥äºŒå‰æ ‘å‰åºåºåˆ—å’Œä¸­åºåºåˆ—(å„å…ƒç´ å„ä¸ç›¸åŒ)ï¼Œåˆ›å»ºè¿™ä¸ªäºŒå‰æ ‘ï¼Œè¾“å‡ºè¯¥äºŒå‰æ ‘çš„ååºåºåˆ—ã€å±‚æ¬¡éå†ã€‚</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">int</span> allCount,counter=<span class="number">0</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BtreeNode</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">char</span> data;</span><br><span class="line"></span><br><span class="line">    BtreeNode *leftChild,*rightChild;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    <span class="built_in">BtreeNode</span>()&#123;leftChild=rightChild=<span class="literal">nullptr</span>;size=<span class="number">0</span>;&#125;</span><br><span class="line">    <span class="built_in">BtreeNode</span>(<span class="keyword">char</span>&amp; theData,BtreeNode* left=<span class="literal">nullptr</span>,BtreeNode*right=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        data=theData;</span><br><span class="line">        leftChild=left;</span><br><span class="line">        rightChild=right;</span><br><span class="line">        size=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">height</span><span class="params">(BtreeNode *node)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hl=<span class="built_in">height</span>(node-&gt;leftChild);</span><br><span class="line">    <span class="keyword">int</span> hr=<span class="built_in">height</span>(node-&gt;rightChild);</span><br><span class="line">    <span class="keyword">if</span>(hl&gt;hr) &#123;</span><br><span class="line">        <span class="keyword">return</span>++hl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ++hr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(BtreeNode* node)</span></span>&#123;<span class="comment">//å‰åºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span>(node != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="built_in">preOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="built_in">preOrder</span>(node-&gt;rightChild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(BtreeNode* node)</span></span>&#123;<span class="comment">//ä¸­åºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span>(node != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="built_in">inOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="keyword">if</span>(counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="built_in">inOrder</span>(node-&gt;rightChild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(BtreeNode* node)</span></span>&#123;<span class="comment">//ååºéå†è¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span>(node != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="built_in">postOrder</span>(node-&gt;leftChild);</span><br><span class="line">        <span class="built_in">postOrder</span>(node-&gt;rightChild);</span><br><span class="line">        <span class="keyword">if</span>(counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">levelOrder</span><span class="params">(BtreeNode* node)</span></span>&#123;<span class="comment">//å±‚åºéå†è¾“å‡º</span></span><br><span class="line">    queue&lt;BtreeNode*&gt; queue;</span><br><span class="line">    <span class="keyword">while</span>(node != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(counter != allCount - <span class="number">1</span>) cout &lt;&lt; node-&gt;data &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; node-&gt;data &lt;&lt; endl;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;leftChild != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            queue.<span class="built_in">push</span>(node-&gt;leftChild);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node-&gt;rightChild != <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            queue.<span class="built_in">push</span>(node-&gt;rightChild);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(queue.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node=queue.<span class="built_in">front</span>();</span><br><span class="line">        queue.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‰å±‚æ¬¡éå†é¡ºåºåˆ›å»ºäºŒå‰æ ‘</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(BtreeNode *current, <span class="keyword">int</span> i, string s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>((<span class="number">2</span>*i+<span class="number">1</span>)&lt;=s.<span class="built_in">length</span>())&#123;<span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹æ—¢æœ‰å·¦å­èŠ‚ç‚¹ï¼Œåˆæœ‰å³å­èŠ‚ç‚¹</span></span><br><span class="line">        current-&gt;leftChild=<span class="keyword">new</span> <span class="built_in">BtreeNode</span>(s[<span class="number">2</span> * i - <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">set</span>(current-&gt;leftChild, <span class="number">2</span> * i, s);</span><br><span class="line">        current-&gt;rightChild=<span class="keyword">new</span> <span class="built_in">BtreeNode</span>(s[<span class="number">2</span> * i]);</span><br><span class="line">        <span class="built_in">set</span>(current-&gt;rightChild, <span class="number">2</span> * i + <span class="number">1</span>, s);</span><br><span class="line">        current-&gt;size+=(current-&gt;leftChild-&gt;size + current-&gt;rightChild-&gt;size);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">2</span>*i==s.<span class="built_in">length</span>())&#123;<span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹åªæœ‰å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">        current-&gt;leftChild=<span class="keyword">new</span> <span class="built_in">BtreeNode</span>(s[<span class="number">2</span> * i - <span class="number">1</span>]);</span><br><span class="line">        current-&gt;size+=current-&gt;leftChild-&gt;size;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">2</span>*i&gt;s.<span class="built_in">length</span>()) <span class="keyword">return</span>;<span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">BtreeNode* <span class="title">rebuild</span><span class="params">(<span class="keyword">char</span> preOrder[],<span class="keyword">char</span> inOrder[],<span class="keyword">int</span> pStart,<span class="keyword">int</span> pEnd,<span class="keyword">int</span> iStart,<span class="keyword">int</span> iEnd)</span></span>&#123;</span><br><span class="line">    BtreeNode* tree=<span class="keyword">new</span> <span class="built_in">BtreeNode</span>(preOrder[pStart]);</span><br><span class="line">    <span class="keyword">if</span>(pStart==pEnd&amp;&amp;iStart==iEnd)&#123;</span><br><span class="line">        <span class="keyword">return</span> tree;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> root=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ‰¾ä¸­åºéå†ä¸­çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span>(root=iStart;root&lt;=iEnd;root++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(preOrder[pStart]==inOrder[root]) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="comment">//&lt;=æ ¹èŠ‚ç‚¹åœ¨æœ«å°¾ æ²¡æœ‰å³å­æ ‘çš„æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ’åˆ†å·¦å³å­æ ‘</span></span><br><span class="line">    <span class="keyword">int</span> leftLength=root-iStart;<span class="comment">//å·¦å­æ ‘</span></span><br><span class="line">    <span class="keyword">int</span> rightLength=iEnd-root;<span class="comment">//å³å­æ ‘</span></span><br><span class="line">    <span class="comment">//éå†å·¦å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span>(leftLength&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        tree-&gt;leftChild=<span class="built_in">rebuild</span>(preOrder,inOrder,pStart+<span class="number">1</span>,pStart+leftLength,iStart,root<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éå†å³å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span>(rightLength&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        tree-&gt;rightChild=<span class="built_in">rebuild</span>(preOrder,inOrder,pStart+leftLength+<span class="number">1</span>,pEnd,root+<span class="number">1</span>,iEnd);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tree;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Input1&quot;</span>&lt;&lt;endl;</span><br><span class="line">    string s1,s2,s3,ss;</span><br><span class="line">    cin&gt;&gt;s1;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Output1&quot;</span>&lt;&lt;endl;</span><br><span class="line">    BtreeNode *r1=<span class="keyword">new</span> <span class="built_in">BtreeNode</span>(s1[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">set</span>(r1,<span class="number">1</span>,s1);</span><br><span class="line">    allCount=s1.<span class="built_in">length</span>();</span><br><span class="line">    <span class="comment">//ä¸ºå®ç°è¾“å‡ºæœ€åä¸€ä¸ªèŠ‚ç‚¹å…ƒç´ æ—¶æ¢è¡Œï¼Œåˆ©ç”¨å…¨å±€å˜é‡countï¼Œæ¯è¾“å‡ºä¸€ä¸ªå…ƒç´ +1ï¼Œè¾“å‡ºç»“æŸåæ¸…é›¶ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡è¾“å‡º</span></span><br><span class="line">    <span class="built_in">preOrder</span>(r1);counter=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">inOrder</span>(r1);counter=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">postOrder</span>(r1);counter=<span class="number">0</span>;</span><br><span class="line">    cout&lt;&lt;r1-&gt;size&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">height</span>(r1)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Input2&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;s2&gt;&gt;s3;</span><br><span class="line">    <span class="comment">//ç”¨å­—ç¬¦ä¸²è¯»å…¥äºŒå‰æ ‘å‰åºåºåˆ—å’Œä¸­åºåºåˆ—ï¼Œå¹¶è½¬åŒ–æˆå­—ç¬¦æ•°ç»„å¯¹äºŒå‰æ ‘è¿›è¡Œé‡å»º</span></span><br><span class="line">    <span class="keyword">char</span> char1[s2.<span class="built_in">length</span>()]; s2.<span class="built_in">copy</span>(char1, s2.<span class="built_in">length</span>(), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">char</span> char2[s3.<span class="built_in">length</span>()]; s3.<span class="built_in">copy</span>(char2, s3.<span class="built_in">length</span>(), <span class="number">0</span>);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Output2&quot;</span>&lt;&lt;endl;</span><br><span class="line">    BtreeNode *r2=<span class="built_in">rebuild</span>(char1, char2, <span class="number">0</span>, s2.<span class="built_in">length</span>() - <span class="number">1</span>, <span class="number">0</span>, s3.<span class="built_in">length</span>() - <span class="number">1</span>);</span><br><span class="line">    allCount=s2.<span class="built_in">length</span>();</span><br><span class="line">    <span class="built_in">postOrder</span>(r2);counter=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">levelOrder</span>(r2);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;End&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿ç§»åŠ¨ç¬¬ä¸€æ¬¡ä¾‹ä¼š</title>
      <link href="/2021/11/17/%E5%AD%A6%E7%BA%BF%E7%A7%BB%E5%8A%A8%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%BE%8B%E4%BC%9A/"/>
      <url>/2021/11/17/%E5%AD%A6%E7%BA%BF%E7%A7%BB%E5%8A%A8%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%BE%8B%E4%BC%9A/</url>
      
        <content type="html"><![CDATA[<h1>å­¦çº¿ç§»åŠ¨ç¬¬ä¸€æ¬¡åŸ¹è®­</h1><h2 id="1-ä½œä¸šç‚¹è¯„">1.ä½œä¸šç‚¹è¯„</h2><p>ç•¥</p><h2 id="2-ç»†è¯´MVCæ¶æ„ä¸é¡¹ç›®åˆ†åŒ…">2.ç»†è¯´MVCæ¶æ„ä¸é¡¹ç›®åˆ†åŒ…</h2><p>å‚è€ƒï¼š</p><p><a href="https://zh.wikipedia.org/wiki/MVC">https://zh.wikipedia.org/wiki/MVC</a></p><p><a href="https://draveness.me/mvx/">https://draveness.me/mvx/</a></p><p><a href="https://blog.csdn.net/qq_39218605/article/details/80779349?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.no_search_link&amp;spm=1001.2101.3001.4242.1">https://blog.csdn.net/qq_39218605/article/details/80779349?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0.no_search_link&amp;spm=1001.2101.3001.4242.1</a></p><p>å‚è€ƒæ–‡çŒ®http://www.dgp.toronto.edu/~dwigdor/teaching/csc2524/2012_F/papers/mvc.pdf</p><h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3><p>æˆ‘ä»¬å°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºä¸‰ç§ç»„ä»¶ï¼Œæ¨¡å‹ - è§†å›¾ - æ§åˆ¶å™¨ï¼ˆMVCï¼‰è®¾è®¡å®šä¹‰å®ƒä»¬ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚</p><p><img src="0.jpg" alt=""></p><p>åœ¨ä¸Šé¢é‚£ç¯‡è®ºæ–‡ä¸­æ˜¯è¿™æ ·æè¿°è¿™ä¸‰éƒ¨åˆ†çš„ï¼š</p><blockquote><p>In the MVC paradigm the user input, the modeling of the external world, and the visual feedback to the user are explicitly separated and handled by three types of object, each specialized for its task.</p><p>The <strong>view</strong> manages the graphical and/or textual output to the portion of the bitmapped display that is allocated to its application.</p><p>The <strong>controller</strong> interprets the mouse and keyboard inputs from the user, commanding the model and/or the view to change as appropriate.</p><p>Finally, the <strong>model</strong> manages the behavior and data of the application domain, responds to requests for information about its state (usually from the view), and responds to instructions to change state (usually from the controller).</p></blockquote><ul><li><strong>æ¨¡å‹ (Model)</strong> <strong>ç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„é€»è¾‘ã€‚â€œ Model â€æœ‰å¯¹æ•°æ®ç›´æ¥è®¿é—®çš„æƒåŠ›ï¼Œä¾‹å¦‚å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚â€œModelâ€ä¸ä¾èµ–â€œViewâ€å’Œâ€œControllerâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ <strong>Model ä¸å…³å¿ƒå®ƒä¼šè¢«å¦‚ä½•æ˜¾ç¤ºæˆ–æ˜¯å¦‚ä½•è¢«æ“ä½œ</strong>ã€‚ä½†æ˜¯ Model ä¸­æ•°æ®çš„å˜åŒ–ä¸€èˆ¬ä¼šé€šè¿‡ä¸€ç§åˆ·æ–°æœºåˆ¶è¢«å…¬å¸ƒã€‚ä¸ºäº†å®ç°è¿™ç§æœºåˆ¶ï¼Œé‚£äº›ç”¨äºç›‘è§†æ­¤ Model çš„ View å¿…é¡»äº‹å…ˆåœ¨æ­¤ Model ä¸Šæ³¨å†Œï¼Œä»è€Œï¼ŒView å¯ä»¥äº†è§£åœ¨æ•°æ® Model ä¸Šå‘ç”Ÿçš„æ”¹å˜ã€‚ï¼ˆæ¯”å¦‚ï¼š<a href="https://zh.wikipedia.org/wiki/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F">è§‚å¯Ÿè€…æ¨¡å¼</a>ï¼‰(æ¯”å¦‚å®ä½“ç±»)</strong></li><li>**è§†å›¾ (View)**èƒ½å¤Ÿå®ç°æ•°æ®æœ‰ç›®çš„çš„æ˜¾ç¤ºï¼ˆç†è®ºä¸Šï¼Œè¿™ä¸æ˜¯å¿…éœ€çš„ï¼‰ã€‚åœ¨ View ä¸­ä¸€èˆ¬æ²¡æœ‰ç¨‹åºä¸Šçš„é€»è¾‘ã€‚ä¸ºäº†å®ç° View ä¸Šçš„åˆ·æ–°åŠŸèƒ½ï¼Œ<strong>View éœ€è¦è®¿é—®å®ƒç›‘è§†çš„æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼Œå› æ­¤åº”è¯¥äº‹å…ˆåœ¨è¢«å®ƒç›‘è§†çš„æ•°æ®é‚£é‡Œæ³¨å†Œã€‚ï¼ˆ<code>findViewbyId</code>æ–¹æ³•ï¼‰</strong></li><li>**æ§åˆ¶å™¨ (Controller)**èµ·åˆ°ä¸åŒå±‚é¢é—´çš„ç»„ç»‡ä½œç”¨ï¼Œ<strong>ç”¨äºæ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹ã€‚å®ƒå¤„ç†äº‹ä»¶å¹¶ä½œå‡ºå“åº”</strong>ã€‚â€œäº‹ä»¶â€åŒ…æ‹¬ç”¨æˆ·çš„è¡Œä¸ºå’Œæ•°æ® Model ä¸Šçš„æ”¹å˜ã€‚</li></ul><h3 id="ä¾èµ–å…³ç³»">ä¾èµ–å…³ç³»</h3><p>è™½ç„¶æˆ‘ä»¬å¯¹ MVC ä¸­çš„å„ä¸ªæ¨¡å—çš„äº¤äº’ä¸æ˜¯ç‰¹åˆ«äº†è§£ï¼Œä½†æ˜¯ä¸‰è€…ä¹‹é—´çš„ä¾èµ–å…³ç³»å´æ˜¯éå¸¸æ˜ç¡®çš„ï¼›<strong>åœ¨ MVC ä¸­ï¼Œæ¨¡å‹å±‚å¯ä»¥å•ç‹¬å·¥ä½œï¼Œè€Œè§†å›¾å±‚å’Œæ§åˆ¶å™¨å±‚éƒ½ä¾èµ–ä¸æ¨¡å‹å±‚ä¸­çš„æ•°æ®ã€‚</strong></p><p><img src="1.jpg" alt=""></p><blockquote><p>è™½ç„¶å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè§†å›¾å’Œæ§åˆ¶å™¨ä¹‹é—´æ²¡æœ‰ç›¸äº’ä¾èµ–ï¼Œä¸è¿‡å› ä¸ºè§†å›¾å’Œæ§åˆ¶å™¨ä¹‹é—´çš„ä¾èµ–å¹¶ä¸å¸¸ç”¨ï¼Œæ‰€ä»¥å›¾ä¸­å°†è§†å›¾å’Œæ§åˆ¶å™¨ä¹‹é—´çš„ä¾èµ–çœç•¥äº†ã€‚</p></blockquote><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><p>é¦–å…ˆï¼Œå¤šä¸ª View èƒ½å…±äº«ä¸€ä¸ª Model ã€‚å¦‚ä»Šï¼ŒåŒä¸€ä¸ªWebåº”ç”¨ç¨‹åºä¼šæä¾›å¤šç§ç”¨æˆ·ç•Œé¢ï¼Œä¾‹å¦‚ç”¨æˆ·å¸Œæœ›æ—¢èƒ½å¤Ÿé€šè¿‡æµè§ˆå™¨æ¥æ”¶å‘<a href="https://zh.wikipedia.org/wiki/%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6">ç”µå­é‚®ä»¶</a>ï¼Œè¿˜å¸Œæœ›é€šè¿‡æ‰‹æœºæ¥è®¿é—®<a href="https://zh.wikipedia.org/wiki/%E7%94%B5%E5%AD%90%E9%82%AE%E7%AE%B1">ç”µå­é‚®ç®±</a>ï¼Œè¿™å°±è¦æ±‚Webç½‘ç«™åŒæ—¶èƒ½æä¾›<a href="https://zh.wikipedia.org/wiki/Internet">Internet</a>ç•Œé¢å’Œ<a href="https://zh.wikipedia.org/wiki/WAP">WAP</a>ç•Œé¢ã€‚åœ¨MVCè®¾è®¡æ¨¡å¼ä¸­ï¼Œ <strong>Model å“åº”ç”¨æˆ·è¯·æ±‚å¹¶è¿”å›å“åº”æ•°æ®ï¼ŒView è´Ÿè´£æ ¼å¼åŒ–æ•°æ®å¹¶æŠŠå®ƒä»¬å‘ˆç°ç»™ç”¨æˆ·ï¼Œä¸šåŠ¡é€»è¾‘å’Œè¡¨ç¤ºå±‚åˆ†ç¦»ï¼ŒåŒä¸€ä¸ª Model å¯ä»¥è¢«ä¸åŒçš„ View é‡ç”¨ï¼Œæ‰€ä»¥å¤§å¤§æé«˜äº†ä»£ç çš„å¯é‡ç”¨æ€§ã€‚</strong></p><p>å…¶æ¬¡ï¼Œ<strong>Controller æ˜¯è‡ªåŒ…å«ï¼ˆself-contained,æŒ‡é«˜ç‹¬ç«‹å†…èšï¼‰çš„å¯¹è±¡ï¼Œä¸ Model å’Œ View ä¿æŒç›¸å¯¹ç‹¬ç«‹ï¼Œæ‰€ä»¥å¯ä»¥æ–¹ä¾¿çš„æ”¹å˜åº”ç”¨ç¨‹åºçš„æ•°æ®å±‚å’Œä¸šåŠ¡è§„åˆ™</strong>ã€‚ä¾‹å¦‚ï¼ŒæŠŠæ•°æ®åº“ä»<a href="https://zh.wikipedia.org/wiki/MySQL">MySQL</a>ç§»æ¤åˆ°<a href="https://zh.wikipedia.org/wiki/Oracle">Oracle</a>ï¼Œæˆ–è€…æŠŠ<a href="https://zh.wikipedia.org/wiki/RDBMS">RDBMS</a>æ•°æ®æºæ”¹å˜æˆ<a href="https://zh.wikipedia.org/wiki/LDAP">LDAP</a>æ•°æ®æºï¼Œåªéœ€æ”¹å˜ Controller å³å¯ã€‚ä¸€æ—¦æ­£ç¡®åœ°å®ç°äº†æ§åˆ¶å™¨ï¼Œä¸ç®¡æ•°æ®æ¥è‡ªæ•°æ®åº“è¿˜æ˜¯<a href="https://zh.wikipedia.org/wiki/LDAP">LDAP</a>æœåŠ¡å™¨ï¼ŒView éƒ½ä¼šæ­£ç¡®åœ°æ˜¾ç¤ºå®ƒä»¬ã€‚ç”±äºMVCæ¨¡å¼çš„ä¸‰ä¸ªæ¨¡å—ç›¸äº’ç‹¬ç«‹ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å…¶ä»–ä¸¤ä¸ªï¼Œæ‰€ä»¥ä¾æ®è¿™ç§è®¾è®¡æ€æƒ³èƒ½æ„é€ è‰¯å¥½çš„å°‘äº’æ‰°æ€§çš„æ„ä»¶ã€‚</p><p>æ­¤å¤–ï¼ŒController æé«˜äº†åº”ç”¨ç¨‹åºçš„çµæ´»æ€§å’Œå¯é…ç½®æ€§ã€‚<strong>Controller å¯ä»¥ç”¨æ¥è¿æ¥ä¸åŒçš„ Model å’Œ View å»å®Œæˆç”¨æˆ·çš„éœ€æ±‚</strong>ï¼Œä¹Ÿå¯ä»¥æ„é€ åº”ç”¨ç¨‹åºæä¾›å¼ºæœ‰åŠ›çš„æ‰‹æ®µã€‚ç»™å®šä¸€äº›å¯é‡ç”¨çš„ Model ã€ View å’ŒController å¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚é€‰æ‹©é€‚å½“çš„ Model è¿›è¡Œå¤„ç†ï¼Œç„¶åé€‰æ‹©é€‚å½“çš„çš„ View å°†å¤„ç†ç»“æœæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚</p><h3 id="è¯„ä»·ã€è¯¯è§£åŠé€‚ç”¨èŒƒå›´">è¯„ä»·ã€è¯¯è§£åŠé€‚ç”¨èŒƒå›´</h3><p>MVCæ¨¡å¼åœ¨æ¦‚å¿µä¸Šå¼ºè°ƒ Model, View, Controller çš„åˆ†ç¦»ï¼Œå„ä¸ªæ¨¡å—ä¹Ÿéµå¾ªç€ç”± Controller æ¥å¤„ç†æ¶ˆæ¯ï¼ŒModel æŒç®¡æ•°æ®æºï¼ŒView è´Ÿè´£èµ„æ–™æ˜¾ç¤ºçš„èŒè´£åˆ†ç¦»åŸåˆ™ï¼Œå› æ­¤åœ¨å®ç°ä¸Šï¼ŒMVC æ¨¡å¼çš„ Framework é€šå¸¸ä¼šå°† MVC ä¸‰ä¸ªéƒ¨åˆ†åˆ†ç¦»å®ç°ï¼š</p><ul><li><strong>Model è´Ÿè´£èµ„æ–™è®¿é—®</strong>ï¼Œè¾ƒç°ä»£çš„ Framework éƒ½ä¼šå»ºè®®ä½¿ç”¨ç‹¬ç«‹çš„èµ„æ–™å¯¹è±¡ (DTO, POCO, POJO ç­‰) æ¥æ›¿ä»£å¼±ç±»å‹çš„é›†åˆå¯¹è±¡ã€‚èµ„æ–™è®¿é—®çš„ä»£ç ä¼šä½¿ç”¨ Data Access çš„ä»£ç æˆ–æ˜¯ ORM-based Frameworkï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨ Repository Pattern ä¸ Unit of Works Pattern æ¥åˆ‡å‰²æ•°æ®æºçš„ç›¸ä¾æ€§ã€‚</li><li><strong>Controller è´Ÿè´£å¤„ç†æ¶ˆæ¯</strong>ï¼Œè¾ƒé«˜ç«¯çš„ Framework ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„å®ç°æ¥ä½œä¸º Controller çš„åŸºç¡€ï¼Œä¾‹å¦‚ Spring çš„ DispatcherServlet æˆ–æ˜¯ <a href="http://ASP.NET">ASP.NET</a> MVC çš„ Controller ç­‰ï¼Œåœ¨èŒè´£åˆ†ç¦»åŸåˆ™çš„åŸºç¡€ä¸Šï¼Œæ¯ä¸ª Controller è´Ÿè´£çš„éƒ¨åˆ†ä¸åŒï¼Œå› æ­¤ä¼šå°†å„ä¸ª Controller åˆ‡å‰²æˆä¸åŒçš„æ–‡ä»¶ä»¥åˆ©ç»´æŠ¤ã€‚</li><li><strong>View è´Ÿè´£æ˜¾ç¤ºèµ„æ–™</strong>ï¼Œè¿™ä¸ªéƒ¨åˆ†å¤šä¸ºå‰ç«¯åº”ç”¨ï¼Œè€Œ Controller ä¼šæœ‰ä¸€ä¸ªæœºåˆ¶å°†å¤„ç†çš„ç»“æœ (å¯èƒ½æ˜¯ Model, é›†åˆæˆ–æ˜¯çŠ¶æ€ç­‰) äº¤ç»™ Viewï¼Œç„¶åç”± View æ¥å†³å®šæ€ä¹ˆæ˜¾ç¤ºã€‚ä¾‹å¦‚ Spring Framework ä½¿ç”¨ JSP æˆ–ç›¸åº”æŠ€æœ¯ï¼Œ<a href="http://ASP.NET">ASP.NET</a> MVC åˆ™ä½¿ç”¨ Razor å¤„ç†èµ„æ–™çš„æ˜¾ç¤ºã€‚</li></ul><p>ä¹Ÿå› ä¸º MVC æ¨¡å¼å¼ºè°ƒèŒè´£åˆ†ç¦»ï¼Œæ‰€ä»¥åœ¨å‘å±• MVC åº”ç”¨æ—¶ä¼šäº§ç”Ÿå¾ˆå¤šæ–‡ä»¶ï¼Œåœ¨ IDE (é›†æˆå¼€å‘ç¯å¢ƒ) ä¸å¤Ÿæˆç†Ÿæ—¶å®ƒä¼šæ˜¯ä¸ªé—®é¢˜ï¼Œä½†åœ¨ç°ä»£ä¸»æµ IDE éƒ½èƒ½ä½¿ç”¨ç±»åˆ«å¯¹è±¡çš„ä¿¡æ¯æ¥ç»„ç»‡ä»£ç ç¼–è¾‘çš„æƒ…å†µä¸‹ï¼Œå¤šæ–‡ä»¶æ—©å·²ä¸æ˜¯é—®é¢˜ï¼Œè€Œä¸” <strong>MVC æ¨¡å¼ä¼šè¦æ±‚å¼€å‘è€…è¿›ä¸€æ­¥æ€è€ƒåº”ç”¨ç¨‹åºçš„æ¶æ„ (Application Architecture)ï¼Œè€Œéç”¨å¤§æ‚çƒ©çš„æ–¹å¼å¼€å‘åº”ç”¨ç¨‹åºï¼Œå¯¹äºåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä»¥åŠåç»­çš„å¯æ‰©å±•ä¸å¯ç»´æŠ¤æ€§è€Œè¨€æœ‰ç›¸å½“æ­£é¢çš„å¸®åŠ©</strong>ã€‚å¦å¤–ï¼ŒMVC èŒè´£åˆ†ç¦»ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªç°ä»£è½¯ä»¶å·¥ç¨‹è¦æ±‚çš„é‡è¦ç‰¹æ€§ï¼šå¯æµ‹è¯•æ€§ (Testability)ï¼Œ<strong>MVC-based çš„åº”ç”¨ç¨‹åºåœ¨è‰¯å¥½çš„èŒè´£åˆ†ç¦»çš„è®¾è®¡ä¸‹ï¼Œå„ä¸ªéƒ¨åˆ†å¯ç‹¬ç«‹è¡Œä½¿<a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">å•å…ƒæµ‹è¯•</a>ï¼Œæœ‰åˆ©äºä¸ä¼ä¸šå†…çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€<a href="https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E6%95%B4%E5%90%88">æŒç»­é›†æˆ</a> (Continuous Integration) ä¸<a href="https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E4%BA%A4%E4%BB%98">æŒç»­äº¤ä»˜</a> (Continuous Delivery) æµç¨‹é›†æˆï¼Œå‡å°‘åº”ç”¨ç¨‹åºæ”¹ç‰ˆéƒ¨ç½²æ‰€éœ€çš„æ—¶é—´ã€‚</strong></p><p>MVC æ¨¡å¼çš„åº”ç”¨ç¨‹åºçš„ç›®çš„å°±æ˜¯å¸Œæœ›æ‰“ç ´ä»¥å¾€åº”ç”¨ç¨‹åºä½¿ç”¨çš„å¤§æ‚çƒ©ç¨‹åºæ’°å†™æ–¹å¼ï¼Œå¹¶é—´æ¥è¯±ä½¿å¼€å‘äººå‘˜ä»¥æ›´é«˜çš„æ¶æ„å¯¼å‘æ€ç»´æ¥æ€è€ƒåº”ç”¨ç¨‹åºçš„è®¾è®¡ï¼Œå› æ­¤å¯¹äºä¸€ä¸ªåˆšå…¥é—¨çš„åˆå­¦è€…æ¥è¯´ï¼Œæ¶æ„å¯¼å‘çš„æ€è€ƒä¼šæœ‰ä¸€å®šçš„é—¨æ§›ï¼Œéœ€è¦è¾ƒå¤šçš„å®ç°ä¸ç»ƒä¹ æ‰èƒ½å…·å¤‡ç›¸åº”çš„èƒ½åŠ›ï¼Œå¤§å¤šæ•°çš„åˆå­¦è€…è¿˜æ˜¯è¾ƒä¹ æƒ¯äºå¤§æ‚çƒ©å¼çš„ç¨‹åºæ’°å†™ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¯¹ MVC æ¨¡å¼æŠ±æŒç€æ’æ–¥æˆ–åŒæ¶çš„å¿ƒæ€ï¼Œç„¶è€Œ MVCï¼ˆæˆ–æ˜¯å…¶ä»–çš„<a href="https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA)">è®¾è®¡æ¨¡å¼</a>ï¼‰éƒ½æ˜¯æœ‰åŠ©äºåº”ç”¨ç¨‹åºé•¿è¿œçš„å‘å±•ï¼Œè™½ç„¶å¤§æ‚çƒ©å¼çš„ç¨‹åºä¹Ÿå¯ä»¥ç”¨æ¥å‘å±•é•¿ç”Ÿå‘½å‘¨æœŸçš„åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ç›¸è¾ƒäº MVCï¼Œå¤§æ‚çƒ©å¼çš„ç¨‹åºåœ¨å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ (å°¤å…¶æ˜¯å¯æµ‹è¯•æ€§) ä¸Šä¼šè¿œæ¯” MVC å¤æ‚å¾ˆå¤šï¼Œç›¸åçš„ï¼Œ<strong>MVC æ¨¡å¼çš„åº”ç”¨ç¨‹åºæ˜¯åœ¨åˆå§‹å¼€å‘æ—¶æœŸå¿…é¡»å…ˆæ€è€ƒå¹¶ä½¿ç”¨è½¯ä»¶æ¶æ„ï¼Œä½¿å¾—å¼€å‘æ—¶æœŸä¼šéœ€è¦èŠ±è¾ƒå¤šå¿ƒåŠ›ï¼Œä½†æ˜¯ä¸€æ—¦åº”ç”¨ç¨‹åºå®Œæˆåï¼Œå¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§åè€Œä¼šå› ä¸º MVC çš„ç‰¹æ€§è€Œå˜å¾—å®¹æ˜“ã€‚</strong></p><p>å› æ­¤ï¼ŒMVC æ¨¡å¼åœ¨å·²æœ‰ä¼—å¤šä¼˜ç§€ Framework çš„ç°ä»£ï¼Œæ—©å°±å·²ç»æ²¡æœ‰ä¸é€‚åˆå°å‹åº”ç”¨çš„é—®é¢˜ï¼Œå°å‹çš„åº”ç”¨è¿˜æ˜¯å¯ä»¥ç”± MVC Framework çš„åº”ç”¨æ¥è·å– MVC çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶å®ƒä¹Ÿèƒ½ä½œä¸ºæœªæ¥å°å‹åº”ç”¨æ‰©å±•åˆ°å¤§å‹åº”ç”¨æ—¶çš„åŸºç¡€ä¸å…¥é—¨ç –ã€‚è‹¥ä¸€å¼€å§‹å°±æƒ³è¦åšå¤§å‹åº”ç”¨ï¼Œé‚£ä¹ˆ MVC æ¨¡å¼çš„èŒè´£åˆ†ç¦»ä»¥åŠè¦æ±‚å¼€å‘çš„æ¶æ„æ€è€ƒä¼šæ›´é€‚åˆå¤§å‹åº”ç”¨çš„å¼€å‘ã€‚</p><h3 id="MVCçš„ä¸è¶³">MVCçš„ä¸è¶³</h3><p>ï¼ˆ1ï¼‰<strong>å¢åŠ äº†ç³»ç»Ÿç»“æ„å’Œå®ç°çš„å¤æ‚æ€§</strong>ã€‚å¯¹äºç®€å•çš„ç•Œé¢ï¼Œä¸¥æ ¼éµå¾ªMVCï¼Œä½¿æ¨¡å‹ã€è§†å›¾ä¸æ§åˆ¶å™¨åˆ†ç¦»ï¼Œä¼šå¢åŠ ç»“æ„çš„å¤æ‚æ€§ï¼Œå¹¶å¯èƒ½äº§ç”Ÿè¿‡å¤šçš„æ›´æ–°æ“ä½œï¼Œé™ä½è¿è¡Œæ•ˆç‡ã€‚</p><p>ï¼ˆ2ï¼‰ ç›®å‰ï¼Œä¸€èˆ¬é«˜çº§çš„ç•Œé¢å·¥å…·æˆ–æ„é€ å™¨ä¸æ”¯æŒMVCæ¶æ„ã€‚æ”¹é€ è¿™äº›å·¥å…·ä»¥é€‚åº”MVCéœ€è¦å’Œå»ºç«‹åˆ†ç¦»çš„éƒ¨ä»¶çš„ä»£ä»·æ˜¯å¾ˆé«˜çš„ï¼Œä»è€Œé€ æˆä½¿ç”¨MVCçš„å›°éš¾ã€‚</p><p>(3)    é™ä½äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚å¦‚æœä¸é‡‡ç”¨åˆ†å±‚å¼ç»“æ„ï¼Œå¾ˆå¤šä¸šåŠ¡å¯ä»¥ç›´æ¥é€ è®¿æ•°æ®åº“ï¼Œä»¥æ­¤è·å–ç›¸åº”çš„æ•°æ®ï¼Œå¦‚ä»Šå´å¿…é¡»é€šè¿‡ä¸­é—´å±‚æ¥å®Œæˆã€‚</p><p>(4)    å¢åŠ äº†ä»£ç é‡ï¼Œå¢åŠ äº†å·¥ä½œé‡ã€‚</p><h3 id="å®é™…æƒ…å†µ">å®é™…æƒ…å†µ</h3><p>åœ¨å®é™…æƒ…å†µä¸‹ï¼Œå•ç‹¬çš„ iOSã€Android å’Œ Web åº”ç”¨å¾€å¾€ä¸èƒ½å•ç‹¬å·¥ä½œï¼Œè¿™äº›å®¢æˆ·ç«¯åº”ç”¨éœ€è¦ä¸æœåŠ¡ç«¯ä¸€èµ·å·¥ä½œï¼›å½“å‰ç«¯/å®¢æˆ·ç«¯ä¸åç«¯ä¸€åŒå·¥ä½œæ—¶ï¼Œå…¶å®åˆ†åˆ«ã€éƒ¨ç½²ã€äº†ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ï¼Œè¿™ä¸¤ä¸ªåº”ç”¨éƒ½éµå¾ª MVC æ¶æ„æ¨¡å¼ï¼š</p><p><img src="2.jpg" alt=""></p><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡ç½‘ç»œè¿›è¡Œè¿æ¥ï¼Œå¹¶ç»„æˆäº†ä¸€ä¸ªæ›´å¤§çš„ MVC æ¶æ„ï¼›ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼ŒæœåŠ¡ç«¯çš„æ¨¡å‹å±‚æ‰å­˜å‚¨äº†çœŸæ­£çš„æ•°æ®ï¼Œè€Œå®¢æˆ·ç«¯çš„æ¨¡å‹å±‚åªä¸è¿‡æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸­çš„æœ¬åœ°ç¼“å­˜å’Œä¸´æ—¶æ•°æ®çš„é›†åˆï¼›åŒç†ï¼ŒæœåŠ¡ç«¯çš„è§†å›¾å±‚ä¹Ÿä¸æ˜¯æ•´ä¸ªåº”ç”¨çš„è§†å›¾å±‚ï¼Œç”¨äºä¸ºç”¨æˆ·å±•ç¤ºæ•°æ®çš„è§†å›¾å±‚ä½äºå®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªæ¶æ„çš„æœ€é¡¶éƒ¨ï¼›ä¸­é—´çš„äº”ä¸ªéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ä»ä½ç«¯çš„æ¨¡å‹å±‚åˆ°æœ€ä¸Šé¢çš„è§†å›¾å…±åŒç»„æˆäº†æ•´ä¸ªåº”ç”¨çš„æ§åˆ¶å™¨ï¼Œå°†æ¨¡å‹ä¸­çš„æ•°æ®ä»¥åˆç†çš„æ–¹å¼ä¼ é€’ç»™æœ€ä¸Šå±‚çš„è§†å›¾å±‚ç”¨äºå±•ç¤ºã€‚</p><h2 id="3-ä»£ç è§„èŒƒ">3.ä»£ç è§„èŒƒ</h2><p>è½¬è½½ï¼ˆæœ‰æ”¹åŠ¨ï¼‰ï¼š<a href="https://zhuanlan.zhihu.com/p/104253155">https://zhuanlan.zhihu.com/p/104253155</a>   åœ¨æ­¤è‡´æ•¬åŸä½œè€…</p><p>å¼€å§‹æ­£æ–‡å‰ï¼Œå’±ä»¬è¿˜éœ€è¦æ˜ç¡®ç¼–ç è§„èŒƒçš„ä¸¤ä¸ªåŸåˆ™ï¼š</p><ol><li><strong>å°è£…å’Œå¤šæ€</strong>ï¼šJavaæ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¯­è¨€ç‰¹å¾æ˜¯ï¼šå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚ä½†ç¬”è€…è®¤ä¸ºç»§æ‰¿æœ‰æ—¶å€™ä¼šç ´åå°è£…æ€§ï¼Œè¯·è°¨æ…ä½¿ç”¨ï¼Œé¢å‘å¯¹è±¡å°è£…å’Œå¤šæ€æ˜¯æ ¸å¿ƒï¼›</li><li><strong>å¯ç»´æŠ¤æ€§ä¼˜å…ˆäºæ€§èƒ½</strong>ï¼šç¼–ç è§„èŒƒå›´ç»•ä¸­å¿ƒæ˜¯ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œåœ¨éœ€è¦å¯¹ä»£ç å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½åšå‡ºæƒè¡¡æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä»£ç å¯ç»´æŠ¤æ€§ï¼Œç¬”è€…è®¤ä¸ºï¼Œå¥½çš„ä»£ç ç»“æ„å¯ä»¥ä¿è¯å¥½çš„æ€§èƒ½ï¼Œæ€§èƒ½åœ¨è®¾è®¡æ—¶å°±åº”è¯¥çº³å…¥æ€è€ƒï¼›</li></ol><p><strong>PS.ä¸ªäººè®¤ä¸ºç¬¬äºŒç‚¹æ›´é‡è¦</strong></p><h3 id="å‘½å">å‘½å</h3><p>ä¸šç•Œæœ‰ä¸€å¥è¯ä¹Ÿè®¸å¤§éƒ¨åˆ†ç¨‹åºå‘˜éƒ½è®¤åŒï¼šâ€œä»£ç å°±æ˜¯æœ€å¥½çš„æ³¨é‡Šâ€ï¼Œè€Œå¥½çš„å‘½åæœ‰åˆ©äºå¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œç¬”è€…è®¤ä¸ºå‘½ååº”éµä»ä¸‰ä¸ªåŸåˆ™ï¼š</p><ol><li><strong>å…±è¯†</strong>ï¼šå…±è¯†æ˜¯æŒ‡ä¸åŒäººçš„æ¨ªå‘æ¯”è¾ƒï¼Œå…±è¯†æŒ‰èŒƒå›´åˆ†åŒ…å«ç»„å†…å…±è¯†ï¼ˆä¸šåŠ¡ç›¸å…³çš„ä¸“æœ‰åè¯ï¼‰ã€ä¼ä¸šå†…éƒ¨å…¬å¸å’Œä¸šç•Œå…±è¯†ï¼›</li><li><strong>ç»Ÿä¸€</strong>ï¼šç»Ÿä¸€æ˜¯æŒ‡å•ä¸ªäººçš„å‚ç›´æ¯”è¾ƒï¼Œ<strong>å•ä¸ªäººåœ¨ä¸åŒæ—¶é—´ç‚¹ç¼–å†™çš„å˜é‡ã€æ–¹æ³•ã€ç±»çš„å‘½åè¦ç»Ÿä¸€</strong>ï¼Œä¸èƒ½å‡ºç°åŒä¸€ä¸ªæ¦‚å¿µä¸€ä¼šå„¿è¿™æ ·å‘½åï¼Œä¸€ä¼šå„¿åˆé‚£æ ·å‘½åï¼›å‘½åä¸åŒæ„ä¹Ÿä¼šåŠ å¤§ä»£ç é˜…è¯»éš¾åº¦ï¼›</li><li><strong>å¾—ä½“</strong>ï¼š<strong>å¾—ä½“æ˜¯æŒ‡ç”¨è¯åˆç†ï¼Œåšåˆ°è¯èƒ½è¾¾æ„</strong>ï¼Œå‘½åèƒ½å¤Ÿå¾ˆå¥½åœ°è¡¨è¾¾ç”¨æ„ï¼ˆç±»å‘½åä¸€èˆ¬æ˜¯åè¯çŸ­è¯­ï¼Œæ–¹æ³•å‘½åä¸€èˆ¬æ˜¯åŠ¨è¯çŸ­è¯­ï¼‰ï¼›</li></ol><p>ã€Šå¼€å‘æ‰‹å†Œã€‹æå‡ºäº†ä¸€ç³»åˆ—å¼ºåˆ¶å’Œæ¨èçš„ç¼–ç¨‹è§„çº¦ï¼Œå…¶ç›®çš„ä¹Ÿæ˜¯è¾¾æˆå…±è¯†ï¼Œåšåˆ°è§åçŸ¥æ„ã€‚å¦‚æœ‰ä»¥ä¸‹å‘½åè§„çº¦ï¼š</p><blockquote><p>ä»£ç ä¸­çš„å‘½åå‡ä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·å¼€å§‹ï¼Œä¹Ÿä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–ç¾å…ƒç¬¦å·ç»“æŸã€‚</p><p>ä»£ç ä¸­çš„å‘½åä¸¥ç¦ä½¿ç”¨æ‹¼éŸ³ä¸è‹±æ–‡æ··åˆçš„æ–¹å¼ï¼Œæ›´ä¸å…è®¸ç›´æ¥ä½¿ç”¨ä¸­æ–‡çš„æ–¹å¼ã€‚</p><p>ç±»åä½¿ç”¨ <code>UpperCamelCase</code> é£æ ¼ï¼Œå¿…é¡»éµä»é©¼å³°å½¢å¼ï¼Œä½†ä»¥ä¸‹æƒ…å½¢ä¾‹å¤–ï¼šDO / BO /DTO / VO / AO</p><p>æ–¹æ³•åã€å‚æ•°åã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡éƒ½ç»Ÿä¸€ä½¿ç”¨ <code>lowerCamelCase</code> é£æ ¼ï¼Œå¿…é¡»éµä»é©¼å³°å½¢å¼ã€‚</p><p>å¸¸é‡å‘½åå…¨éƒ¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ï¼ŒåŠ›æ±‚è¯­ä¹‰è¡¨è¾¾å®Œæ•´æ¸…æ¥šï¼Œä¸è¦å«Œåå­—é•¿ï¼ˆå°½é‡çŸ­ï¼‰ã€‚</p><p>ä¸­æ‹¬å·æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ•°ç»„å®šä¹‰å¦‚ä¸‹ï¼š<code>String[] args</code>;</p><p>POJO ç±»ä¸­å¸ƒå°”ç±»å‹çš„å˜é‡ï¼Œéƒ½ä¸è¦åŠ  isï¼Œå¦åˆ™éƒ¨åˆ†æ¡†æ¶è§£æä¼šå¼•èµ·åºåˆ—åŒ–é”™è¯¯ã€‚ï¼ˆæ²¡é‡è§è¿‡ï¼‰</p><p>åŒ…åç»Ÿä¸€ä½¿ç”¨å°å†™ï¼Œç‚¹åˆ†éš”ç¬¦ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè‡ªç„¶è¯­ä¹‰çš„è‹±è¯­å•è¯ã€‚åŒ…åç»Ÿä¸€ä½¿ç”¨å•æ•°å½¢å¼ï¼Œä½†æ˜¯ç±»åå¦‚æœæœ‰å¤æ•°å«ä¹‰ï¼Œç±»åå¯ä»¥ä½¿ç”¨å¤æ•°å½¢å¼ã€‚</p><p>æœç»å®Œå…¨ä¸è§„èŒƒçš„ç¼©å†™ï¼Œé¿å…æœ›æ–‡ä¸çŸ¥ä¹‰ã€‚</p></blockquote><p>æ³¨ï¼šã€Šå¼€å‘æ‰‹å†Œã€‹ç›®çš„æ˜¯åœ¨ä¼ä¸šå†…éƒ¨è¾¾æˆå…±è¯†ï¼Œæ‰€ä»¥æ‰ä¼šåŠ ä¸Šé˜¿é‡Œå·´å·´å…³é”®è¯é™å®šï¼Œä¸šç•Œå¯ç”¨æ¥ä½œä¸ºå‚è€ƒï¼Œä½†å„ä¸ªä¼ä¸šè¿˜æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µåˆ¶å®šè‡ªå·±çš„è§„èŒƒï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¬¬3ç‚¹ï¼Œç¬”è€…è®¤ä¸ºä¸ºäº†ç»Ÿä¸€ï¼Œåé¢çš„ç‰¹æ®Šæƒ…å†µä¹Ÿä¸åº”è¯¥å‡ºç°ï¼Œè¿˜æ˜¯åº”è¯¥<code>Do/Bo/Dto/Vo</code>è¿™æ ·å‘½åï¼Œåšåˆ°ç»Ÿä¸€ã€‚æ­¤å¤–ä¸€äº›æ¨èçš„è§„åˆ™ï¼Œæ¯”å¦‚</p><blockquote><p>å¦‚æœæ¨¡å—ã€æ¥å£ã€ç±»ã€æ–¹æ³•ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ï¼Œåœ¨å‘½åæ—¶ä½“ç°å‡ºå…·ä½“æ¨¡å¼ã€‚</p></blockquote><p>å…¶å®ç¬”è€…è®¤ä¸ºåº”è¯¥ä½œä¸ºå¼ºåˆ¶è§„åˆ™å‘å¸ƒï¼Œè¿™æ ·å‘½åå¯ä»¥å¾ˆå¥½çš„å‘ŠçŸ¥è®¾è®¡æ¨¡å¼ï¼Œè¯»è€…å¯ä»¥å¾ˆå¿«åœ¨è„‘æµ·ä¸­ç»˜åˆ¶è®¾è®¡æ¨¡å¼å¯¹åº”çš„ä»£ç ç»“æ„å¹¶ç«‹åˆ»çŸ¥é“ä»£ç åŠŸèƒ½ï¼ˆå¸¸è§è®¾è®¡æ¨¡å¼åœ¨ç¨‹åºå‘˜ç•Œå·²å½¢æˆå…±è¯†ï¼Œå¦‚æœå¯¹åº”è®¾è®¡æ¨¡å¼è¿˜ä¸äº†è§£ï¼Œè¯´æ˜åŠŸåº•ä¸å¤Ÿè¿˜éœ€è¦ä¿®ç‚¼ï¼‰ã€‚</p><p>ç»Ÿä¸€è®²çš„æ˜¯ä¸ªäººåœ¨ç¼–ç è¿‡ç¨‹ä¸­åšåˆ°å‘½åå‰åä¸€è‡´ï¼Œå¦‚æœåšä¸åˆ°ç»Ÿä¸€ï¼Œä¼šç»™ä»–äººé˜…è¯»å°±å¸¦æ¥äº†éš¾åº¦ã€‚ã€Šå¼€å‘æ‰‹å†Œã€‹è¿™ç±»æ–‡çŒ®å¯ä»¥èµ·åˆ°ä¸€å®šä½œç”¨ï¼Œä½†å¾ˆå¤§ä¸€éƒ¨åˆ†è¿˜æ˜¯ä¸ªäººçš„è‡ªæˆ‘çº¦æŸã€‚ä¸¾ä¸¤ä¸ªåä¾‹ï¼š</p><ul><li>åŒä¹‰è¯å‘½åä¸ç»Ÿä¸€ï¼šæ¯”å¦‚â€œæŒ‡æ ‡â€œâ€è¿™ä¸ªè¯ï¼Œä¸€ä¼šå„¿ç”¨<code>Index</code>ï¼Œä¸€ä¼šå„¿ç”¨<code>indicator</code>ï¼›</li><li>æ‹¼å†™å’Œè‹±æ–‡å‘½åä¸ç»Ÿä¸€ï¼šæ¯”å¦‚â€œä»£ç†å•†â€è¿™ä¸ªè¯ï¼Œä¸€ä¼šå„¿ç”¨<code>Agent</code>ï¼Œä¸€ä¼šå„¿ç”¨<code>DaiLiShang</code>ï¼›</li></ul><h4 id="å˜é‡å‘½å">å˜é‡å‘½å</h4><p><strong>å˜é‡ååº”è¯¥ç®€çŸ­ä¸”æœ‰æ„ä¹‰ï¼Œå¹¶èƒ½å¤Ÿé¡¾åæ€ä¹‰</strong>ã€‚ç®€å•å¹¶ä¸æ„å‘³ç€è¶ŠçŸ­è¶Šå¥½ï¼Œæ¯”å¦‚ä¸€ä¸ªå­—ç¬¦çš„å˜é‡åæ˜¯ä¸å…è®¸çš„ï¼Œå¾ˆå½±å“ä»£ç çš„å¯è¯»æ€§ã€‚</p><p>åä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;  <span class="comment">// ä¸å…è®¸ </span></span><br><span class="line"><span class="keyword">char</span> c;  <span class="comment">//  ä¸å…è®¸</span></span><br></pre></td></tr></table></figure><p>å¯¹äºå±€éƒ¨å˜é‡ï¼Œä¸ºäº†ä¿è¯ä»£ç ç®€æ´ï¼Œ<strong>å±€éƒ¨å˜é‡å‘½ååªè¦èƒ½å¤Ÿåœ¨ä»£ç ä¸­åŒºåˆ†ï¼Œåº”é¿å…åç§°è¿‡é•¿</strong>ï¼Œå½±å“é˜…è¯»ã€‚</p><p>æ‹¿Spring MVCä¸­<code>DispatcherServlet</code>ç±»ä¸­çš„ä»£ç ç‰‡æ®µæ¥ä¸¾ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HandlerMapping hm = context.getBean(HANDLER_MAPPING_BEAN_NAME, HandlerMapping.class); </span><br><span class="line"><span class="comment">// è€ŒéHandlerMapping handleMapping = context.getBean(HANDLER_MAPPING_BEAN_NAME, HandlerMapping.class)</span></span><br><span class="line">HandlerAdapter ha = context.getBean(HANDLER_ADAPTER_BEAN_NAME, HandlerAdapter.class);  </span><br><span class="line"><span class="comment">// è€ŒéHandlerAdapter handlerAdapter = context.getBean(HANDLER_ADAPTER_BEAN_NAME, HandlerAdapter.class); å˜é‡å‘½åå¯æ”¹æˆHandlerAdapter adapter = XXX;</span></span><br><span class="line">HandlerExceptionResolver her = context.getBean(HANDLER_EXCEPTION_RESOLVER_BEAN_NAME, HandlerExceptionResolver.class);</span><br><span class="line">ViewResolver vr = context.getBean(VIEW_RESOLVER_BEAN_NAME, ViewResolver.class);</span><br><span class="line">WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); </span><br><span class="line"><span class="comment">// è€ŒéWebAsyncManager webAsyncManager = WebAsyncUtils.getAsyncManager(request);</span></span><br><span class="line">MultipartHttpServletRequest req = WebUtils.getNativeRequest(servletRequest, MultipartHttpServletRequest.class);</span><br><span class="line">HandlerExecutionChain handler = hm.getHandler(request);</span><br></pre></td></tr></table></figure><p>å¯¹äºç±»ä¸­çš„ç§æœ‰åŸŸï¼ˆfieldï¼‰åç§°ï¼Œåˆ™ä¸åº”è¯¥ç¼©å†™ï¼ŒåŸŸåç§°éœ€è¦å¾ˆå¥½çš„åæ˜ åˆ°åº•æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ä»¥å…å½±å“é˜…è¯»ã€‚</p><p>åä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private WordStudyStatisticManager statisticManager; // æ”¹æˆå…¨å private WordStudyStatisticManager wordStudyStatisticManager;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public CommonResult&lt;WordStudyStatistic&gt; addWordStudyStatistic(WordStudyStatistic wordStudyStatistic) &#123;</span><br><span class="line">   CommonResult&lt;WordStudyStatistic&gt; result = new CommonResult&lt;WordStudyStatistic&gt;();</span><br><span class="line">   try &#123;</span><br><span class="line">        Date current = new Date();</span><br><span class="line">        wordStudyStatistic.setCreated(current);</span><br><span class="line">        wordStudyStatistic.setModified(current);</span><br><span class="line">        result.addDefaultModel(studyStatisticManager.addWordStudyStatistic(wordStudyStatistic));</span><br><span class="line">        // é€šè¿‡ç¼©å†™å‡å°‘å­—æ¯ä¸ªæ•°æ²¡å¿…è¦åè€Œä¼šå½±å“é˜…è¯»</span><br><span class="line">        result.setSuccess(true);</span><br><span class="line">   &#125; catch (Exception e) &#123;</span><br><span class="line">        logger.error(&quot;æ·»åŠ å•è¯å­¦ä¹ ç»Ÿè®¡å¤±è´¥&quot;, e);</span><br><span class="line">        result.setSuccess(false);</span><br><span class="line">   &#125;</span><br><span class="line">   return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¸¸é‡å‘½å">å¸¸é‡å‘½å</h4><p>å¸¸é‡ä½¿ç”¨<strong>å¤§å†™å­—æ¯</strong> + æ•°å­—è¿›è¡Œå‘½å ã€‚</p><p>æ­£ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static final int DEFAULT_CAPACITY = 10;</span><br></pre></td></tr></table></figure><p>åä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">private static final int DefaultCapacity = 10;   </span><br><span class="line">private static final int Default_Capacity = 10;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•å‘½å">æ–¹æ³•å‘½å</h4><p>æ–¹æ³•åç§°åº”è¯¥æ˜¯ä¸€ä¸ªåŠ¨è¯çŸ­è¯­ï¼ˆä¸ºäº†å…±è¯†ï¼‰ï¼Œä¸è®ºpublicæ–¹æ³•è¿˜æ˜¯privateæ–¹æ³•ï¼Œ<strong>æ–¹æ³•åç§°éœ€è¦å¾ˆå¥½åœ°åæ˜ æ–¹æ³•åŠŸèƒ½æœ¬èº«ã€‚</strong></p><p>æ­£ä¾‹ï¼š</p><p>è¿˜æ˜¯<code>DispatcherServlet</code>ï¼Œç§æœ‰æ–¹æ³•è¾ƒå¤šï¼Œä½†é€šè¿‡åç§°å¯ä»¥å¾ˆæ¸…æ¥šåœ°åæ˜ æ–¹æ³•åŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">initStragies(ApplicationContext); // Stragiesè¯´æ˜è¯¥æ–¹æ³•ä½œç”¨æ˜¯åˆå§‹åŒ–ä¸€ç³»åˆ—ç­–ç•¥</span><br><span class="line">initMultipartResolver(ApplicationContext);</span><br><span class="line">initLocaleResolver(ApplicationContext);</span><br><span class="line">initThemeResolver(ApplicationContext);</span><br><span class="line">initHandlerMappings(ApplicationContext);</span><br><span class="line">initHandlerAdapters(ApplicatonContext);</span><br><span class="line">initHandlerExceptionResolers(ApplicationContext);  </span><br><span class="line">initRequestToViewNameTranslator(ApplicatonContext); </span><br><span class="line">// åªè¦åç§°èƒ½åˆç†çš„åæ˜ åŠŸèƒ½ï¼Œä¸è¦æ‹…å¿ƒæ–¹æ³•è¿‡é•¿</span><br><span class="line">...</span><br><span class="line">getDefaultStrategy(ApplicationContext, Class&lt;T&gt;);</span><br><span class="line">getDefaultStrategies(ApplicationContext, Class&lt;T&gt;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æ–¹æ³•å‘½åè®©è¯»è€…å°±å¾ˆèˆ’æœã€‚</p><p>åä¾‹ï¼šæ–¹æ³•èŒè´£ä¸æ¸…æ™°é€ æˆæ–¹æ³•åè¿‡é•¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// æ¥å£å®šä¹‰</span><br><span class="line">public Map&lt;String, Obeject&gt; getUserInfoLoginInfoPasswordMap(Context context) &#123;</span><br><span class="line">  Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();  </span><br><span class="line">  ...</span><br><span class="line">  UserInfo user = xxx;</span><br><span class="line">  map.put(&quot;user&quot;, user);</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  LoginInfo login = xxx;</span><br><span class="line">  map.put(&quot;login&quot;, login);</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  String password = xxx;</span><br><span class="line">  map.put(&quot;password&quot;, password);  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å®¢æˆ·ç«¯ä»£ç </span><br><span class="line">Map&lt;String, Obeject&gt; map = getUserInfoLoginInfoPasswordMap(context);</span><br><span class="line">map.get(&quot;user&quot;);</span><br><span class="line">map.get(&quot;login&quot;);</span><br><span class="line">map.get(&quot;login&quot;);</span><br></pre></td></tr></table></figure><p>åªè¦å‘½ååˆç†ï¼Œä¸è¦æ‹…å¿ƒæ–¹æ³•åç§°å¤ªé•¿ï¼Œä½†æ–¹æ³•åç§°è¿‡é•¿å¸¸å¸¸åˆæ„å‘³ç€è¯¥æ–¹æ³•å¹²çš„äº‹å¤ªå¤šäº†ï¼Œåˆ™éœ€è¦æ€è€ƒæ˜¯å¦å¯ä»¥æ‹†åˆ†æ–¹æ³•ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­ä¸å¤Ÿå…¸å‹ï¼Œä½†ä¹Ÿåæ˜ äº†ä¸€ä¸ªè®¾è®¡åŸåˆ™ï¼Œä¿è¯æ–¹æ³•çš„èŒè´£å•ä¸€ï¼Œå¯ä»¥æ‹†åˆ†æˆ3ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public UserInfo getUserInfo(Context context); </span><br><span class="line">public LoginInfo getLoginInfo(Context context); </span><br><span class="line">public String getPassword(Context context);</span><br></pre></td></tr></table></figure><p>å¦‚æœæ–¹æ³•å®ç°ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œè¯¥å‰¯ä½œç”¨éœ€è¦ä½“ç°åœ¨æ–¹æ³•åç§°ã€‚</p><p>åä¾‹ï¼šå‰¯ä½œç”¨æœªä½“ç°åœ¨æ–¹æ³•åä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private void checkPermission(User user) throws NoPermissionException&#123;</span><br><span class="line">   List&lt;Integer&gt; orgIds = orgService.getOrgIdsByUserId(user.getId());</span><br><span class="line">   if(CollectionUtils.isEmpty(orgIds) &#123;</span><br><span class="line">      throw new NoPermissionException(&quot;æ— æƒè®¿é—®ï¼&quot;);</span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   if(orgIds.contains(1)) &#123;</span><br><span class="line">      user.setOrgIds(orgIds);  // åŒ…å«å‰¯ä½œç”¨setOrgIds</span><br><span class="line">      return;</span><br><span class="line">   &#125;</span><br><span class="line">   throw new NoPermissionException(&quot;æ— æƒè®¿é—®ï¼&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä½“ç°æ–¹æ³•åç§°å¯æ”¹æˆ fillOrgIdsAndCheckPermissionã€‚</p><p>åä¾‹ï¼šè¶…é•¿çš„æ–¹æ³•å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public List&lt;Integer&gt; getByYearQuargerAndXXXXXXXXIdAndXXXXXConditionAndCityLevelList(YearQuarter yearQuarter, Integer XXXXXXXXId, XXXXXCondition condition, List&lt;Integer&gt; cityLevelList);</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ååæ˜ äº†å…¥å‚å´å¿½ç•¥äº†è¿”å›å€¼ã€‚å¦‚æœä¸å­˜åœ¨æ–¹æ³•é‡è½½ï¼Œé‚£ä¹ˆæ–¹æ³•åæ— éœ€é€šè¿‡å…¥å‚è¿›è¡ŒåŒºåˆ†ä½†å¿…é¡»åæ˜ è¿”å›å€¼ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼šé€šè¿‡æ–¹æ³•åç§°åŒºåˆ†ä¸€ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå› æ­¤ï¼Œè¿™ä¸ªåä¾‹æ–¹æ³•åå¯æ”¹æˆgetXXXListï¼ˆæ­¤å¤–è‹¥å…¥å‚è¶…è¿‡4ä¸ªï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªç±»å¯¹å…¥å‚è¿›è¡ŒåŒ…è£…ï¼‰ã€‚</p><h4 id="ç±»å‘½å">ç±»å‘½å</h4><p><strong>ç±»ååº”è¯¥æ˜¯åè¯ï¼Œå°½é‡ä¿è¯ç±»åç®€å•ä¸”å…·æœ‰æè¿°æ€§ï¼Œé¿å…ç¼©ç•¥è¯­</strong>ï¼Œå¦‚æœä½¿ç”¨åˆ°è®¾è®¡æ¨¡å¼éœ€è¦åœ¨ç±»åä¸­ä½“ç°ï¼Œç›®çš„æ˜¯å½¢æˆå…±è¯†ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä»£ç ã€‚</p><p>æ­£ä¾‹ï¼šListçš„å®ç°ç±»å‘½å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ArrayList  // æ•°ç»„å½¢å¼çš„Listå®ç°ç±»</span><br><span class="line">LinkedList  // é“¾è¡¨å½¢å¼çš„Listå®ç°ç±»</span><br><span class="line">Stack  // æ ˆå®ç°ç±»ï¼Œè§åçŸ¥æ„ï¼Œè¯´æ˜æ˜¯å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„</span><br><span class="line">CopyOnWriteArrayList  // è¯´æ˜æ˜¯é‡‡ç”¨COWå†™æ—¶å¤åˆ¶é˜²å¹¶å‘ç­–ç•¥çš„ArrayList</span><br><span class="line">FixedSizeList  // å›ºå®šäº†å¤§å°çš„çš„List</span><br><span class="line">SynchronizedList  // ä½¿ç”¨Synchronizedå…³é”®å­—æ§åˆ¶çš„List,çº¿ç¨‹å®‰å…¨</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä»¥ä¸Šä¾‹å­æ¥è‡ªjdkã€apacheå¼€æºä»£ç ã€‚</p><p>æ­£ä¾‹ï¼šä½¿ç”¨äº†è®¾è®¡æ¨¡å¼çš„ç±»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.beans.factory.BeanFactory // ç®€å•å·¥å‚æ¨¡å¼ </span><br><span class="line">org.eclipse.jetty.websocket.common.UpgradeRequestAdapter // ä½¿ç”¨äº†é€‚é…å™¨æ¨¡å¼ </span><br><span class="line">org.apache.catalina.core.ThreadLocalLeakPreventionListener // è§‚å¯Ÿè€…æ¨¡å¼ </span><br><span class="line">org.apache.naming.factory.webservices.ServiceProxy // ä»£ç†æ¨¡å¼</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä»¥ä¸Šç±»æ¥è‡ªSpringã€jettyã€tomcatã€‚</p><h3 id="æ³¨é‡Š">æ³¨é‡Š</h3><p>æ³¨é‡Šæœ‰åˆ©äºå¸®åŠ©ç†è§£ä»£ç ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œåè€Œä¼šå½±å“ä»£ç çš„ç®€æ´æ€§ï¼Œä¸åˆ©äºç†è§£ä»£ç ã€‚æ³¨é‡Šåœ¨ä½¿ç”¨ä¸Šç¬”è€…è®¤ä¸ºéœ€è¦åšæŒä¸‰ä¸ªåŸåˆ™ï¼š</p><ol><li><strong>ä¿æŒä»£ç å¹²å‡€ï¼Œæ¶ˆé™¤ä¸å¿…è¦çš„æ³¨é‡Š</strong>ï¼šå¥½çš„ä»£ç æœ¬èº«å°±æ˜¯æœ€å¥½çš„æ³¨é‡Šï¼Œåªåœ¨å¿…è¦æ—¶é€šè¿‡æ³¨é‡ŠååŠ©ç†è§£ä»£ç ï¼Œç›®çš„æ˜¯ä¿æŒä»£ç çš„ç®€æ´æ€§ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼›</li><li><strong>åŒºåˆ†æ³¨é‡Šå’Œ<code>JavaDoc</code></strong>ï¼šç±»ã€åŸŸã€æ–¹æ³•ä½¿ç”¨<code>JavaDoc</code>ï¼Œæ–¹æ³•å†…éƒ¨ä½¿ç”¨æ³¨é‡Šï¼›</li><li>æ³¨é‡ŠåŠæ—¶æ›´æ–°ï¼šæ³¨é‡Šä¹Ÿæ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœä»£ç å‘ç”Ÿå˜æ›´ï¼Œæ³¨é‡Šä¹Ÿè¦è·Ÿç€æ”¹ï¼›</li></ol><p>æ³¨é‡Šæ­£ä¾‹å¯é€šè¿‡ã€Šå¼€å‘æ‰‹å†Œã€‹ä½œä¸ºå‚è€ƒï¼Œç¬”è€…æ›´æ„¿æ„é€šè¿‡ä¸€äº›åä¾‹å‘ŠçŸ¥è¯»è€…å“ªäº›æ˜¯é”™è¯¯çš„æ³¨é‡Šï¼</p><p>åä¾‹ï¼šåŠ å…¥è¿‡å¤šçš„æ³¨é‡Šå½±å“ä»£ç é˜…è¯»</p><p>åœ¨ç³»ç»Ÿå¼€å‘ä¸­ï¼Œç¬”è€…å‘ç°ï¼Œä»£ç æœ‰å¤§ç‰‡å¤§ç‰‡çš„æ³¨é‡Šï¼Œæ ¼å¼ä¹±ä¸ƒå…«ç³Ÿï¼Œç¬”è€…æƒ³å¼ºè°ƒä¸€ç‚¹ï¼šè¯·æŠŠä»£ç å½“æˆäº§å“æ¥çœ‹å¾…ï¼Œæ³¨æ„æäº¤çš„ä»£ç ä¸€å®šè¦å¹²å‡€ï¼å¯èƒ½æœ‰åŒå­¦ä¼šåé©³ï¼Œæ³¨é‡Šæ‰çš„æ˜¯ä»£ç ï¼Œå°†æ¥å¯èƒ½è¿˜éœ€è¦è¿˜åŸï¼Œå¦‚æœç¡®å®æ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆgit or svnï¼‰è¿˜åŸã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public String recommendGift(double budget) &#123;</span><br><span class="line">       // get gifts from helper</span><br><span class="line">       String[] gifts = giftHelper.getGifts();</span><br><span class="line">       String gift = null;</span><br><span class="line"></span><br><span class="line">       for (int i = 0; i &lt; gifts.length; i++) &#123;</span><br><span class="line">           gift = gifts[i];</span><br><span class="line"></span><br><span class="line">           // find out if gift already given</span><br><span class="line">           boolean isAlreadyGiven = false;</span><br><span class="line">           for (String given : giftsGiven) &#123;</span><br><span class="line">               if (gift.equals(given)) &#123;</span><br><span class="line">                   isAlreadyGiven = true;</span><br><span class="line">                   break;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           // calculate rating and budget</span><br><span class="line">           int x = rating * 200;</span><br><span class="line">           boolean ok = budget &lt; x;</span><br><span class="line"></span><br><span class="line">           // if both conditions satisfy, give it.</span><br><span class="line">           if (!isAlreadyGiven) &#123;</span><br><span class="line">               giftsGiven.add(gift);</span><br><span class="line">               // increment maintenance cost of the girlfriend</span><br><span class="line">               maintenanceCost += budget;</span><br><span class="line">               return gift;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       return gift;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä»£ç éœ€è¦é€šè¿‡æ³¨é‡Šæ‰èƒ½ç†è§£ï¼Œè¿™æ—¶å¯èƒ½å°±éœ€è¦åæ€ï¼Œæ˜¯å¦æ˜¯ä»£ç æœ¬èº«ç¼–å†™çš„é—®é¢˜ï¼Œæ¯”å¦‚æ–¹æ³•è¿‡é•¿ï¼Œè¯•ç€é‡æ„ï¼ˆæ¯”å¦‚æŠ½å–æ–¹æ³•ã€æ–¹æ³•é‡å‘½åç­‰ï¼‰ã€‚</p><p>ä¿®æ”¹å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public String recommendGift(double budget) &#123;</span><br><span class="line">    String recommendedGift = null;</span><br><span class="line">    for (String gift : giftHelper.getGifts()) &#123;</span><br><span class="line">        recommendedGift = gift;</span><br><span class="line">        if (isGiftNotAlreadyGiven(recommendedGift) &amp;&amp; isUnderBudget(budget)) &#123;</span><br><span class="line">            updateMaintenanceCostAndGiftsGiven(budget, recommendedGift);</span><br><span class="line">            return recommendedGift;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return recommendedGift;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void updateMaintenanceCostAndGiftsGiven(double budget, String gift) &#123;</span><br><span class="line">    giftsGiven.add(gift);</span><br><span class="line">    maintenanceCost += budget;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private boolean isUnderBudget(double budget) &#123;</span><br><span class="line">    int x = rating * 200;</span><br><span class="line">    boolean ok = budget &lt; x;</span><br><span class="line">    return ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private boolean isGiftNotAlreadyGiven(String gift) &#123;</span><br><span class="line">    boolean isAlreadyGiven = true;</span><br><span class="line">    for (String given : giftsGiven) &#123;</span><br><span class="line">        if (gift.equals(given)) &#123;</span><br><span class="line">            isAlreadyGiven = false;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return isAlreadyGiven;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åä¾‹ï¼š<code>JavaDoc</code>å’Œæ³¨é‡Šä¸åˆ†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// User:xxxxx</span><br><span class="line">public class User &#123;</span><br><span class="line">// åå­—</span><br><span class="line">  private String name = &quot;George&quot;;</span><br><span class="line"></span><br><span class="line">  // è·å–å…¨å</span><br><span class="line">  public String getFullName() &#123;</span><br><span class="line">     /** å®¶åº­åå­— **/</span><br><span class="line">     String familyName = &quot;Bush&quot;;</span><br><span class="line">     ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯<code>JavaDoc</code>ï¼Œå¯å‚è€ƒã€Šå¼€å‘æ‰‹å†Œã€‹æ³¨é‡Šç« èŠ‚éƒ¨åˆ†å¼ºåˆ¶è§„çº¦ï¼š</p><blockquote><p>ç±»ã€ç±»å±æ€§ã€ç±»æ–¹æ³•çš„æ³¨é‡Šå¿…é¡»ä½¿ç”¨ Javadoc è§„èŒƒï¼Œä½¿ç”¨/*<em>å†…å®¹</em>/æ ¼å¼ï¼Œä¸å¾—ä½¿ç”¨// xxx æ–¹å¼ï¼›<br>æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼ˆåŒ…æ‹¬æ¥å£ä¸­çš„æ–¹æ³•ï¼‰å¿…é¡»è¦ç”¨ Javadoc æ³¨é‡Šã€é™¤äº†è¿”å›å€¼ã€å‚æ•°ï¼›<br>æ‰€æœ‰çš„ç±»éƒ½å¿…é¡»æ·»åŠ åˆ›å»ºè€…å’Œåˆ›å»ºæ—¥æœŸï¼›</p></blockquote><p>å¦‚æœæ˜¯æ³¨é‡Šï¼Œéœ€è¦åŒºåˆ†æ³¨é‡Šå’Œè§£é‡Šï¼šæ³¨é‡Šç”¨äºå¸®åŠ©ç†è§£ä¸šåŠ¡æµç¨‹ï¼Œè§£é‡Šæ˜¯è¯´æ˜è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼›æ³¨é‡Šç”¨åœ¨æ–¹æ³•å†…éƒ¨å•è¡Œæ³¨é‡Šï¼Œåœ¨è¢«æ³¨é‡Šè¯­å¥ä¸Šæ–¹å¦èµ·ä¸€è¡Œï¼Œè§£é‡Šç´§è·Ÿä»£ç ä¹‹åï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private User getLeader(Query query) &#123;</span><br><span class="line">   // å‚æ•°æ ¡éªŒ</span><br><span class="line">  checkParam(query);</span><br><span class="line">  </span><br><span class="line">   // æŸ¥è¯¢</span><br><span class="line">   List&lt;User&gt; users = xxManager.getUser(query);</span><br><span class="line">   if(CollectionUtils.isEmpty(users)) &#123;</span><br><span class="line">      return null;</span><br><span class="line">   &#125;</span><br><span class="line">   return users.get(0); // ç¬¬ä¸€ä¸ªå°±æ˜¯Leader </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£é‡Šç”¨åœ¨æ¯”è¾ƒç‰¹æ®Šçš„ä¸šåŠ¡ä¸Šï¼Œæ›¿ä»£æ–¹æ¡ˆæ˜¯åœ¨é¢†åŸŸå†…éƒ¨å•ç‹¬æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·å°±ä¸ç”¨è§£é‡Šäº†ã€‚</p><p>åä¾‹ï¼šä»£ç å‘ç”Ÿå˜æ›´ï¼Œä½†æ³¨é‡Šæ²¡å˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è¿”å›å°äº10çš„æ­£æ•´æ•°</span><br><span class="line"> */</span><br><span class="line">public List&lt;Integer&gt; gePositiveIntegerGraterOrEqualsTen() &#123;</span><br><span class="line">   return Arrays.asList(1,2,3,4,5,6,7,8,9,10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ç¬¬ä¸€ç‰ˆæ˜¯è¿”å›å°äº10çš„æ­£æ•´æ•°ï¼Œåç”±äºéœ€æ±‚å˜æ›´æ”¹æˆå°äºç­‰äº10çš„æ­£æ•´æ•°ï¼Œå¯æ˜¯æ³¨é‡Šè¿˜æ˜¯å°äº10ï¼Œæ³¨é‡Šå’Œæ–¹æ³•å®ç°ä¸åŒæ­¥è¿™è®©äººæ„Ÿåˆ°å¾ˆå›°æƒ‘ã€‚</p><h4 id="ä»£ç è‡ªè§£é‡Š">ä»£ç è‡ªè§£é‡Š</h4><p>æ³¨é‡Šæ˜¯ä¸ºäº†å¸®åŠ©ç†è§£ä»£ç ï¼Œå¦‚æœä»£ç æ˜¯è‡ªè§£é‡Šçš„ï¼ˆæœ¬èº«å°±å…·æœ‰å¾ˆå¥½çš„å¯è¯»æ€§ï¼‰ï¼Œé‚£ä¹ˆå°±æ— éœ€æ·»åŠ æ³¨é‡Šäº†ï¼Œè¿™æ˜¯æœ€é«˜å¢ƒç•Œï¼Œä¸€èˆ¬æœ‰ä¸‰ç§åšæ³•ï¼š</p><ol><li><strong>åˆé€‚çš„å‘½å</strong>ï¼šåŒ…å«å˜é‡ã€æ–¹æ³•å‘½åï¼ˆå‰æ–‡å·²æï¼‰ï¼›</li><li>ä»£ç åˆç†åˆ†æ®µï¼›</li><li><strong>ä»£ç æ˜¯åŒä¸€å±‚é¢çš„æŠ½è±¡</strong>ï¼šä¸€ä¸ªæ–¹æ³•çš„å†…éƒ¨ä»£ç é™¤äº†åˆç†åˆ†æ®µå¤–ï¼Œæ¯ä¸€æ®µéƒ½æ˜¯åŒä¸€ä¸šåŠ¡å±‚é¢çš„æŠ½è±¡ï¼Œæœ‰åŠ©äºè¯»è€…ç†è§£ä»£ç ï¼›<strong>(MVC)</strong></li></ol><p>æ­£ä¾‹ï¼šå°†ä»£ç æŒ‰ç…§å•ä¸€æ‰§è¡Œä»»åŠ¡åˆç†åˆ†æ®µæœ‰åˆ©äºå¢å¼ºå¯è¯»æ€§ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if(result.getStatus() != Status.OK)</span><br><span class="line">&#123; </span><br><span class="line">    throw new BusinessException();</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">Context ctx = result.getContext(); </span><br><span class="line">ctx.beginTransaction();</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä»£ç ç¤ºä¾‹ï¼Œ<code>SpringMVC</code>åŒ…çš„<code>DispatcherServlet</code>ä¸­<code>doDispatch</code>æ–¹æ³•å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜ä¸€ä¸ªå¤æ‚å¤„ç†é€»è¾‘åˆ†æ®µçš„é‡è¦æ€§ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception &#123;</span><br><span class="line">HttpServletRequest processedRequest = request;</span><br><span class="line">HandlerExecutionChain mappedHandler = null;</span><br><span class="line">boolean multipartRequestParsed = false;</span><br><span class="line"></span><br><span class="line">WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">ModelAndView mv = null;</span><br><span class="line">Exception dispatchException = null;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">processedRequest = checkMultipart(request);</span><br><span class="line">multipartRequestParsed = processedRequest != request;</span><br><span class="line"></span><br><span class="line">// Determine handler for the current request.</span><br><span class="line">mappedHandler = getHandler(processedRequest, false);</span><br><span class="line">if (mappedHandler == null || mappedHandler.getHandler() == null) &#123;</span><br><span class="line">noHandlerFound(processedRequest, response);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Determine handler adapter for the current request.</span><br><span class="line">HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());</span><br><span class="line"></span><br><span class="line">// Process last-modified header, if supported by the handler.</span><br><span class="line">String method = request.getMethod();</span><br><span class="line">boolean isGet = &quot;GET&quot;.equals(method);</span><br><span class="line">if (isGet || &quot;HEAD&quot;.equals(method)) &#123;</span><br><span class="line">long lastModified = ha.getLastModified(request, mappedHandler.getHandler());</span><br><span class="line">if (logger.isDebugEnabled()) &#123;</span><br><span class="line">logger.debug(&quot;Last-Modified value for [&quot; + getRequestUri(request) + &quot;] is: &quot; + lastModified);</span><br><span class="line">&#125;</span><br><span class="line">if (new ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">// Actually invoke the handler.</span><br><span class="line">mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</span><br><span class="line">&#125;</span><br><span class="line">finally &#123;</span><br><span class="line">if (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">applyDefaultViewName(request, mv);</span><br><span class="line">mappedHandler.applyPostHandle(processedRequest, response, mv);</span><br><span class="line">&#125;</span><br><span class="line">catch (Exception ex) &#123;</span><br><span class="line">dispatchException = ex;</span><br><span class="line">&#125;</span><br><span class="line">processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</span><br><span class="line">&#125;</span><br><span class="line">catch (Exception ex) &#123;</span><br><span class="line">triggerAfterCompletion(processedRequest, response, mappedHandler, ex);</span><br><span class="line">&#125;</span><br><span class="line">catch (Error err) &#123;</span><br><span class="line">triggerAfterCompletionWithError(processedRequest, response, mappedHandler, err);</span><br><span class="line">&#125;</span><br><span class="line">finally &#123;</span><br><span class="line">if (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">// Instead of postHandle and afterCompletion</span><br><span class="line">mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">// Clean up any resources used by a multipart request.</span><br><span class="line">if (multipartRequestParsed) &#123;</span><br><span class="line">cleanupMultipart(processedRequest);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£ä¾‹ï¼šä»£ç æ˜¯åŒä¸€å±‚é¢çš„æŠ½è±¡</p><p>ä»¥<code>SpringMVC</code>åŒ…çš„<code>DispatcherServlet</code>ä¸­<code>initStrategies</code>æ–¹æ³•ä¸¾ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">      /**</span><br><span class="line"> * Initialize the strategy objects that this servlet uses.</span><br><span class="line"> * &lt;p&gt;May be overridden in subclasses in order to initialize further strategy objects.</span><br><span class="line"> */</span><br><span class="line">protected void initStrategies(ApplicationContext context) &#123;</span><br><span class="line">initMultipartResolver(context);</span><br><span class="line">initLocaleResolver(context);</span><br><span class="line">initThemeResolver(context);</span><br><span class="line">initHandlerMappings(context);</span><br><span class="line">initHandlerAdapters(context);</span><br><span class="line">initHandlerExceptionResolvers(context);</span><br><span class="line">initRequestToViewNameTranslator(context);</span><br><span class="line">initViewResolvers(context);</span><br><span class="line">initFlashMapManager(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>initStrategiesæ–¹æ³•æ˜¯DispatcherServletè¿™ä¸ªç±»åˆå§‹åŒ–ç­–ç•¥çš„ä¸»æµç¨‹ï¼Œå†…éƒ¨è°ƒç”¨çš„æ˜¯åŒä¸€æŠ½è±¡å±‚é¢çš„æ–¹æ³•ï¼Œä¸”å„ä¸ªæ–¹æ³•åšåˆ°è§åçŸ¥æ„ï¼Œè¿™ç§æ¸…æ™°çš„ä»£ç ç»“æ„æˆ‘æƒ³å°±æ— éœ€å†æ³¨é‡Šäº†å§ã€‚</p><h4 id="æ— ç”¨æ³¨é‡Š">æ— ç”¨æ³¨é‡Š</h4><p>åœ¨æ—¥å¸¸ä»£ç ä¸­æœ‰ä¸€äº›æ»‘ç¨½çš„æ²¡æœ‰æ„ä¹‰çš„æ³¨é‡Šã€‚</p><p>åä¾‹ï¼šæ²¡æœ‰å¿…è¦çš„æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æœ€å¤§å¤§å°</span><br><span class="line"> */</span><br><span class="line">private static final int MAX_SIZE = 10;</span><br><span class="line"></span><br><span class="line">if(a == 5) &#123;  // å¦‚æœaç­‰äº5</span><br><span class="line">   counter = 0;  // æŠŠcounterè®¾ç½®æˆ0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·ä¸è¦ä¾®è¾±é˜…è¯»è€…çš„æ™ºå•†ï¼Œè¿™ç§æ³¨é‡Šè¯·é—®åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼</p><p>åä¾‹ï¼šæ²¡æœ‰ç¤¼è²Œçš„æ³¨é‡Š</p><p>è¿˜è®°å¾—å‰ä¸¤å¹´æŸè§†é¢‘ç½‘ç«™åœ¨jsä»£ç æ³¨é‡Šä¸­æ³¨é‡Šäº†â€œå±Œä¸VIPâ€å­—æ ·åœ¨ç½‘ä¸Šè¢«å–·çš„äº‹ä»¶ï¼Œå°Šé‡åˆ«äººæ‰èƒ½èµ¢å¾—åˆ«äººçš„å°Šé‡ï¼Œåº”é¿å…æ²¡æœ‰ç¤¼è²Œçš„ä¾®è¾±æ€§çš„æ³¨é‡Šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// å±Œä¸VIP</span><br><span class="line">if( user.getVipType() = xxx)</span><br><span class="line">...</span><br><span class="line">  </span><br><span class="line">// è¦æ³¨æ„ä¸€äº›æ„šè ¢çš„ç”¨æˆ·ä¼šè¾“å…¥ä¸€ä¸ªè´Ÿæ•°</span><br><span class="line">...</span><br><span class="line">  </span><br><span class="line">// ä¿®æ­£ç”±èœé¸Ÿå·¥ç¨‹å¸ˆå†™çš„æ„šè ¢å¾—å¯æ€œçš„ä»£ç è€Œå¯¼è‡´çš„å‰¯ä½œç”¨</span><br><span class="line">...  </span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æ³¨é‡Šå¯¹äºä»£ç çš„å†™æ³¨é‡Šçš„äººæ¥è¯´å¹¶æ²¡æœ‰ä»»ä½•å¥½å¤„ï¼ŒåŒæ—¶ä½ æ°¸è¿œéƒ½ä¸ä¼šçŸ¥é“å°†æ¥è¿™äº›æ³¨é‡Šä¼šè¢«è°æ¥é˜…è¯»ï¼Œä½ çš„è€æ¿ã€ä¸€ä¸ªå®¢æˆ·æˆ–è€…æ˜¯åˆšæ‰è¢«ä½ æ•°è½çš„æ„šè ¢å¾—å¯æ€œçš„å·¥ç¨‹å¸ˆã€‚</p><p>åä¾‹ï¼šè¿‡æœŸçš„ä»£ç æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Program</span><br><span class="line">&#123;</span><br><span class="line">   public static void main(String[] args) </span><br><span class="line">  &#123;</span><br><span class="line">     /* This block of code is no longer needed</span><br><span class="line">      * because we found out that Y2K was a hoax</span><br><span class="line">      * and our systems did not roll over to 1/1/1900 </span><br><span class="line">      */</span><br><span class="line">      //DateTime today = DateTime.Today;</span><br><span class="line">      //if (today == new DateTime(1900, 1, 1))</span><br><span class="line">      //&#123;</span><br><span class="line">      // today = today.AddYears(100);</span><br><span class="line">      // String message = &quot;The date has been fixed for Y2K.&quot;;</span><br><span class="line">      // System.out.println(message);</span><br><span class="line">      //&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>â€œä¸‡ä¸€æˆ‘ä»¬ä¸‹æ¬¡è¿˜è¦ç”¨åˆ°å®ƒå‘¢â€œï¼Œæ¯å¬åˆ°è¿™æ ·çš„è§£é‡Šæˆ‘çœŸå¿ƒæ— è¯­ã€‚æ— æ•ˆä»£ç æ³¨é‡Šæœ¬ç« èŠ‚å¼€å¤´å·²è¯´æ˜ï¼Œè¯·åˆ é™¤æ— æ•ˆçš„ä»£ç æ³¨é‡Šï¼éœ€è¿˜åŸè¯·é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·è¿˜åŸï¼</strong></p><p>åä¾‹ï¼šæ•…äº‹æ€§ï¼ˆä»£ç ä¸ç›¸å…³ï¼‰æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// å¼ ä¸‰å«æˆ‘è¿™ä¹ˆåšï¼Œå¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œä½ å¯ä»¥å»é—®ä»–ã€‚</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ä¸€ä¸ªå±€å¤–äººæˆ–ä¸€ä¸ªæ–°äººï¼Œè¿™ç§æ³¨é‡Šæ²¡æœ‰ä»»ä½•ç”¨ï¼Œé™¤äº†ä»–ä¿©çŸ¥é“å¤–ï¼ˆä¸šåŠ¡è¿‡äº†ä¸€æ®µæ—¶é—´ä»–ä¿©ä¹Ÿå¿˜äº†ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼‰ï¼Œå¯¹å…¶ä»–äººæä¾›ä¸äº†ä»»ä½•æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚å¦‚æœä½ ä¸å¾—ä¸åœ¨ä½ çš„ä»£ç æ³¨é‡Šä¸­æåŠéœ€æ±‚ï¼Œé‚£ä¹Ÿä¸åº”è¯¥æåŠäººåã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¥½åƒç¨‹åºæƒ³è¦å‘Šè¯‰å…¶å®ƒç¨‹åºå‘˜ï¼Œè¿™æ ¹æœ¬æ²¡æœ‰å¿…è¦åœ¨æ³¨é‡Šä¸­æåˆ°ä¸€äº›å’Œä»£ç ä¸ç›¸å¹²çš„äº‹ã€‚å¯èƒ½æœ‰äººä¼šç‹¡è¾©ï¼Œæˆ‘è¿˜æ˜¯å¿…é¡»è¿™æ ·å†™æ³¨é‡Šï¼ŒåŸå› æœ‰äºŒï¼š</p><ol><li>æœ‰æ—¶å€™ï¼Œé‚£äº›æ‰€è°“çš„â€œé«˜æ‰‹â€é€¼ç€æˆ‘è¿™ä¹ˆå¹²ï¼Œæ‰€ä»¥ï¼Œæˆ‘è¦æŠŠä»–çš„åå­—æ”¾åœ¨è¿™é‡Œè®©æ‰€æœ‰äººçœ‹çœ‹ä»–æœ‰å¤šSBã€‚</li><li>æœ‰æ—¶å€™ï¼Œæˆ‘å¯¹éœ€æ±‚å¹¶ä¸äº†è§£ï¼Œæˆ‘ä»¬åº”è¯¥æ”¾ä¸€ä¸ªè”ç³»äººåœ¨åœ¨è¿™é‡Œï¼Œä»¥ä¾¿ä½ å¯ä»¥å»è¯¢é—®ä¹‹ã€‚</li></ol><p>å¯¹äºç¬¬ä¸€ç‚¹ï¼Œæ­£ç¡®çš„åšæ³•æ²Ÿé€šè§£å†³é—®é¢˜ï¼Œè¯´æ˜æ¸…æ¥šä¸ºä»€ä¹ˆä¸èƒ½è¿™ä¹ˆå»åšï¼›å¦‚æœéå¾—è¿™ä¹ˆå¹²ï¼Œé‚£ä¹ˆå¥½è¯·å‘é‚®ä»¶å‘ŠçŸ¥æˆ–åœ¨æ–‡æ¡£ä¸­å¤‡æ³¨ã€‚ä¸è¦åœ¨ä»£ç ä¸­å†™è¿™æ ·çš„æ³¨é‡Šï¼›å¯¹äºç¬¬äºŒç‚¹ï¼Œåº”è¯¥å°†è”ç³»äººå†™åœ¨éœ€æ±‚æ–‡æ¡£ä¸­ã€‚</p><p>åä¾‹ï¼šæ²¡æœ‰æ„ä¹‰çš„æ³¨é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// Sorry,è¿™æ®µä»£ç å†™å¾—ä¸å¥½ï¼Œè¯·å¤šè§è°…</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œç¨‹åºå‘˜å·²ç»æ„è¯†åˆ°ä»£ç çš„é—®é¢˜ï¼Œè¿™æ ·çš„æ³¨é‡Šé™¤äº†ä¸ºè‡ªå·±çš„æ‡’æƒ°å¼€è„±å¤–ï¼Œä¸çŸ¥é“è¿˜æœ‰ä»€ä¹ˆç”¨ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// å‹¿åŠ¨è¿™å—ä»£ç ï¼ï¼ï¼ å¦‚æœéœ€è¦æ”¹åŠ¨ï¼Œè¯·ä¸è¦å½±å“åˆ°å¼ ä¸‰å’Œæå››çš„ä»£ç </span><br></pre></td></tr></table></figure><p>è¿™ç§ä¹Ÿæ˜¯å¾ˆæ— è¯­çš„æ³¨é‡Šï¼Œå½“éœ€è¦è¿™æ ·æ³¨é‡Šæ—¶ï¼Œä»£ç åˆ°åº•æœ‰å¤šä¸å¯ç»´æŠ¤å‘€ï¼</p><p>æ­¤å¤–è¿˜æœ‰å¤šå¹´çš„TODOæ³¨é‡Šä¹Ÿæ˜¯éœ€è¦æ¶ˆç­çš„ã€‚</p><p>æ³¨é‡Šç« èŠ‚å°±å†™åˆ°è¿™ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚</p><h3 id="å¸¸é‡">å¸¸é‡</h3><p>å¸¸é‡æ˜¯ç”¨finalä¿®é¥°ç¬¦ä¿®é¥°çš„ä¸å¯å˜æ•°å€¼åŸºç¡€ç±»å‹ï¼ˆæˆ–æ•°å€¼ç±»å‹ï¼‰ï¼Œæœ¬èŠ‚å¯è®¨è®ºè¯é¢˜ä¸å¤šï¼Œç¬”è€…æƒ³å¼ºè°ƒ4ç‚¹ï¼š</p><ol><li><strong>åœ¨å·¥ç¨‹ä¸­ä¸è¦ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ç±»ç»´æŠ¤æ‰€æœ‰å¸¸é‡ã€‚</strong></li><li><strong>å¸¸é‡ç±»è¯·åŠ ä¿®é¥°ç¬¦finalä»¥è¡¨ç¤ºä»–æ˜¯ä¸å¯ç»§æ‰¿çš„ã€‚</strong></li><li><strong>åˆç†åœ°æ”¾ç½®å¸¸é‡ç±»ï¼Œå³åŒºåˆ†æ˜¯ç±»å†…éƒ¨å¸¸é‡ï¼Œè¿˜æ˜¯åŒ…å†…å¸¸é‡ï¼Œè¿˜æ˜¯æ˜¯æ•´ä¸ªå·¥ç¨‹å¸¸é‡ã€‚</strong></li><li><strong>å‡ ä¸ªå…·æœ‰ç›¸å…³æ€§çš„å¸¸é‡ï¼ˆæ¯”å¦‚typeï¼Œstateï¼‰è¯·ä½¿ç”¨æšä¸¾ã€‚</strong></li></ol><p>ä¸‹é¢é’ˆå¯¹ç¬¬ä¸€ç‚¹ï¼Œç¬¬ä¸‰ç‚¹è¯´æ˜ï¼š</p><p>åä¾‹ï¼šåœ¨å·¥ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ç±»ç»´æŠ¤æ‰€æœ‰å¸¸é‡</p><p>ç¬”è€…æ›¾è§è¿‡å¾ˆå¤šè€å·¥ç¨‹ä½¿ç”¨ä¸€ä¸ª<code>SystemConsts</code>åŒ…å«ç³»ç»Ÿå†…å®šä¹‰çš„æ‰€æœ‰å¸¸é‡ï¼Œåœ¨ä¸æ–­è¿­ä»£åï¼Œå¤šæ•°ç±»ä¼¼<code>SystemConsts</code>è¿™ç§ç±»å®šä¹‰çš„å¸¸é‡å¸¸å¸¸æ˜¯100+ï¼ˆæ³¨é‡Šè‡³å°‘éƒ½æ˜¯300è¡Œ+ï¼‰ï¼Œé¢å¯¹å‡ ç™¾è¡Œçš„å¸¸é‡ï¼Œç»´æŠ¤ä¼šç‰¹åˆ«éº»çƒ¦ï¼šå³ä½¿æ˜¯è€æ‰‹ï¼Œæœ‰æ—¶ä½ è¿˜æ˜¯ä¸æ¸…æ¥šåˆ°åº•æœ‰æ²¡æœ‰å®šä¹‰è¿‡è¯¥å¸¸é‡ï¼Œå¦‚æœå®šä¹‰è¿‡ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½ä½ éœ€è¦èŠ±ç‚¹æ—¶é—´å»æ‰¾æ˜¯å“ªä¸ªå¸¸é‡ï¼Œå¦‚æœå…³é”®å­—æœç´¢ä¸å¯¹ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½è¿™ä¸ªæ—¶é—´æˆæœ¬è¿˜ä¸ä½ï¼›å¦‚æœä¸å‡‘å·§å…³é”®å­—æ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆä½ å¾—é‡æ–°å®šä¹‰ä¸€ä¸ªï¼Œä½†å¾ˆå¯èƒ½å‡ºç°å¸¸é‡é‡å¤å®šä¹‰ï¼Œå½“éœ€æ±‚å‘ç”Ÿå˜æ›´æ—¶ï¼Œ<code>diamante</code>æ”¹åŠ¨ç‰¹åˆ«å®¹æ˜“å‡ºç°é—æ¼ï¼Œå¼•å‘bugã€‚</p><p>æ­£ç¡®çš„åšæ³•æ˜¯ï¼š</p><ul><li>æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œæ¯”å¦‚ï¼šç¼“å­˜ç›¸å…³å¸¸é‡æ”¾åœ¨<code>CacheConsts</code>ä¸‹ï¼Œç³»ç»Ÿé…ç½®ç±»å¸¸é‡æ”¾åœ¨<code>ConfigConsts</code>ä¸‹ï¼›</li><li>æŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼Œå¦‚æœæ˜¯åœ¨æŒ‡å®šèŒƒå›´å–å€¼çš„å¸¸é‡ï¼Œéœ€è¦æ›¿æ¢æˆæšä¸¾ï¼›</li></ul><p>åä¾‹ï¼šä¸åˆé€‚åœ°æ”¾ç½®å¸¸é‡ç±»</p><p>æ˜“æ‡‚å˜é‡ä¹Ÿè¦ç»Ÿä¸€å®šä¹‰æˆåº”ç”¨å†…å…±äº«å¸¸é‡ï¼Œä¸¤ä½ç¨‹åºå‘˜åœ¨ä¸¤ä¸ªç±»ä¸­åˆ†åˆ«å®šä¹‰äº†è¡¨ç¤º â€œæ˜¯â€çš„å˜é‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±» A</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String YES = <span class="string">&quot;yes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±» B</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String YES = <span class="string">&quot;y&quot;</span>;</span><br><span class="line"></span><br><span class="line">A.YES.equals(B.YES)ï¼Œ</span><br></pre></td></tr></table></figure><p>é¢„æœŸæ˜¯ trueï¼Œä½†å®é™…è¿”å›ä¸º falseï¼Œå¯¼è‡´çº¿ä¸Šé—®é¢˜ã€‚</p><p>åˆç†åœ°æ”¾ç½®å¸¸é‡ç±»ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ï¼š</p><ul><li>è·¨åº”ç”¨å…±äº«å¸¸é‡ï¼Œæ”¾åœ¨å‡†å¤‡æä¾›ç»™å¤–éƒ¨jaråŒ…æ‰€åœ¨moduleçš„<code>consts</code>ç›®å½•ï¼›</li><li>å·¥ç¨‹å†…å…±äº«å¸¸é‡ï¼Œæ”¾åœ¨å·¥ç¨‹common moduleä¸‹<code>consts</code>ç›®å½•ï¼›</li><li>å­æ¨¡å—å†…éƒ¨å…±äº«ï¼Œåœ¨ç›¸åº”å­æ¨¡å—<code>consts</code>ç›®å½•ï¼›</li><li>ç±»å†…å…±äº«ï¼Œæ”¾åœ¨ç±»å†…éƒ¨ï¼Œæ³¨æ„åŠ privateè¿›è¡Œé™å®šï¼›</li></ul><p>å¸¸é‡ç« èŠ‚å°±å†™åˆ°è¿™ã€‚</p><h3 id="å¼‚å¸¸å¤„ç†"><strong>å¼‚å¸¸å¤„ç†</strong></h3><p>åœ¨ä»‹ç»å¼‚å¸¸å¤„ç†è§„èŒƒä¹‹å‰ï¼Œå®åœ¨æœ‰å¿…è¦äº†è§£Javaçš„å¼‚å¸¸ä½“ç³»ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨éå—æ£€å¼‚å¸¸ã€‚</p><ul><li><strong>Javaå¼‚å¸¸ä½“ç³»ï¼š</strong><br>åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„å¼‚å¸¸éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç¥–å…ˆ Throwableï¼ˆå¯æŠ›å‡ºï¼‰ã€‚**Throwable æŒ‡å®šä»£ç ä¸­å¯ç”¨å¼‚å¸¸ä¼ æ’­æœºåˆ¶é€šè¿‡ Java åº”ç”¨ç¨‹åºä¼ è¾“çš„ä»»ä½•é—®é¢˜çš„å…±æ€§ã€‚**Throwable æœ‰ä¸¤ä¸ªé‡è¦çš„å­ç±»ï¼šExceptionï¼ˆå¼‚å¸¸ï¼‰å’Œ Errorï¼ˆé”™è¯¯ï¼‰ï¼ŒäºŒè€…éƒ½æ˜¯ Java å¼‚å¸¸å¤„ç†çš„é‡è¦å­ç±»ï¼Œå„è‡ªéƒ½åŒ…å«å¤§é‡å­ç±»ã€‚<strong>Exceptionï¼ˆå¼‚å¸¸ï¼‰æ˜¯åº”ç”¨ç¨‹åºä¸­å¯èƒ½çš„å¯é¢„æµ‹ã€å¯æ¢å¤é—®é¢˜ã€‚ä¸€èˆ¬å¤§å¤šæ•°å¼‚å¸¸è¡¨ç¤ºä¸­åº¦åˆ°è½»åº¦çš„é—®é¢˜ã€‚<strong>å¼‚å¸¸ä¸€èˆ¬æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸‹äº§ç”Ÿçš„ï¼Œé€šå¸¸å‡ºç°åœ¨ä»£ç çš„ç‰¹å®šæ–¹æ³•å’Œæ“ä½œä¸­ã€‚åœ¨<code> EchoInput</code> ç±»ä¸­ï¼Œå½“è¯•å›¾è°ƒç”¨ <code>readLine </code>æ–¹æ³•æ—¶ï¼Œå¯èƒ½å‡ºç° <code>IOException </code>å¼‚å¸¸ã€‚<br><strong>Errorï¼ˆé”™è¯¯ï¼‰è¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­è¾ƒä¸¥é‡é—®é¢˜</strong>ã€‚<strong>å¤§å¤šæ•°é”™è¯¯ä¸ä»£ç ç¼–å†™è€…æ‰§è¡Œçš„æ“ä½œæ— ç›´æ¥å…³ç³»ï¼Œè€Œè¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰å‡ºç°çš„é—®é¢˜</strong>ã€‚ä¾‹å¦‚ï¼Œå½“ JVM ä¸å†æœ‰ç»§ç»­æ‰§è¡Œæ“ä½œæ‰€éœ€çš„å†…å­˜èµ„æºæ—¶ï¼Œå°†å‡ºç° <code>OutOfMemoryError</code>ã€‚<br>Exception ç±»æœ‰ä¸€ä¸ªé‡è¦çš„å­ç±» <code>RuntimeException</code>ã€‚</strong><code>RuntimeException </code>ç±»åŠå…¶å­ç±»è¡¨ç¤ºâ€œJVM å¸¸ç”¨æ“ä½œâ€å¼•å‘çš„é”™è¯¯</strong>ã€‚ä¾‹å¦‚ï¼Œè‹¥è¯•å›¾ä½¿ç”¨ç©ºå€¼å¯¹è±¡å¼•ç”¨ã€é™¤æ•°ä¸ºé›¶æˆ–æ•°ç»„è¶Šç•Œï¼Œåˆ™åˆ†åˆ«å¼•å‘è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆ<code>NullPointerException</code>ã€<code>ArithmeticException</code>ï¼‰å’Œ <code>ArrayIndexOutOfBoundException</code>ã€‚</li><li><strong>å—æ£€å¼‚å¸¸ï¼š</strong><br>**å¯æ£€æµ‹å¼‚å¸¸ç»ç¼–è¯‘å™¨éªŒè¯ï¼Œå¯¹äºå£°æ˜æŠ›å‡ºå¼‚å¸¸çš„ä»»ä½•æ–¹æ³•ï¼Œç¼–è¯‘å™¨å°†å¼ºåˆ¶æ‰§è¡Œå¤„ç†(è§£å†³è¿™ä¸ªå¼‚å¸¸)æˆ–å£°æ˜è§„åˆ™ï¼Œ**ä¾‹å¦‚ï¼š<code>sqlExecption</code> è¿™ä¸ªå¼‚å¸¸å°±æ˜¯ä¸€ä¸ªæ£€æµ‹å¼‚å¸¸ã€‚ä½ è¿æ¥ JDBC æ—¶ï¼Œä¸æ•æ‰è¿™ä¸ªå¼‚å¸¸ï¼Œç¼–è¯‘å™¨å°±é€šä¸è¿‡ï¼Œä¸å…è®¸ç¼–è¯‘ã€‚<strong>å—æ£€å¼‚å¸¸å¯é¢„çŸ¥å¯èƒ½å‡ºé—®é¢˜ï¼Œå¿…é¡»å¤„ç†</strong>ã€‚</li><li><strong>éæ£€æµ‹å¼‚å¸¸ï¼š</strong><br><strong>éæ£€æµ‹å¼‚å¸¸ä¸éµå¾ªå¤„ç†æˆ–å£°æ˜è§„åˆ™ã€‚åœ¨äº§ç”Ÿæ­¤ç±»å¼‚å¸¸æ—¶ï¼Œä¸ä¸€å®šéè¦é‡‡å–ä»»ä½•é€‚å½“æ“ä½œ</strong>ï¼Œç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥æ˜¯å¦å·²è§£å†³äº†è¿™æ ·ä¸€ä¸ªå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªæ•°ç»„ä¸º 3 ä¸ªé•¿åº¦ï¼Œ=E5__ä½ ä½¿ç”¨ä¸‹æ ‡ä¸ºï¼“æ—¶ï¼Œå°±ä¼šäº§ç”Ÿæ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸ JVM ä¸ä¼šè¿›è¡Œæ£€æµ‹ï¼Œè¦é ç¨‹åºå‘˜æ¥åˆ¤æ–­ã€‚æœ‰ä¸¤ä¸ªä¸»è¦ç±»å®šä¹‰éæ£€æµ‹å¼‚å¸¸ï¼š<code>RuntimeException </code>å’Œ Errorã€‚<br>Error å­ç±»å±äºéæ£€æµ‹å¼‚å¸¸ï¼Œå› ä¸ºæ— æ³•é¢„çŸ¥å®ƒä»¬çš„äº§ç”Ÿæ—¶é—´ã€‚è‹¥ Java åº”ç”¨ç¨‹åºå†…å­˜ä¸è¶³ï¼Œåˆ™éšæ—¶å¯èƒ½å‡ºç° <code>OutOfMemoryError</code>ï¼›èµ·å› ä¸€èˆ¬ä¸æ˜¯åº”ç”¨ç¨‹åºçš„ç‰¹æ®Šè°ƒç”¨ï¼Œè€Œæ˜¯ JVM è‡ªèº«çš„é—®é¢˜ã€‚å¦å¤–ï¼ŒError ä¸€èˆ¬è¡¨ç¤ºåº”ç”¨ç¨‹åºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚Errorå­ç±»æ˜¯éå—æ£€å¼‚å¸¸å¦ä¸€ä¸ªåŸå› æ˜¯åº”ç”¨ç¨‹åºæ ¹æœ¬æ— æ³•å¤„ç†ã€‚<br><code>RuntimeException</code> ç±»ä¹Ÿå±äºéæ£€æµ‹å¼‚å¸¸ï¼Œå› ä¸ºæ™®é€š JVM æ“ä½œå¼•å‘çš„è¿è¡Œæ—¶å¼‚å¸¸éšæ—¶å¯èƒ½å‘ç”Ÿï¼Œæ­¤ç±»å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç‰¹å®šæ“ä½œå¼•å‘ã€‚ä½†è¿™äº›æ“ä½œåœ¨ Java åº”ç”¨ç¨‹åºä¸­ä¼šé¢‘ç¹å‡ºç°ã€‚å› æ­¤ï¼Œå®ƒä»¬ä¸å—ç¼–è¯‘å™¨æ£€æŸ¥ä¸å¤„ç†æˆ–å£°æ˜è§„åˆ™çš„é™åˆ¶ã€‚</li><li><strong>å°è£…ä¸€ä¸ªAPIçš„æ—¶å€™ä»€ä¹ˆæƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸</strong><br>å¦‚æœè°ƒç”¨æ–¹å¯ä»¥ä»å¼‚å¸¸ä¸­é‡‡å–æªæ–½è¿›è¡Œæ¢å¤çš„ï¼Œå°±ä½¿ç”¨checked exceptionï¼Œå¦‚æœå®¢æˆ·ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œå°±ç”¨unchecked exceptionã€‚è¿™é‡Œçš„æªæ–½æŒ‡çš„æ˜¯ï¼Œä¸ä»…ä»…æ˜¯è®°å½•å¼‚å¸¸ï¼Œè¿˜è¦é‡‡å–æªæ–½æ¥æ¢å¤ã€‚</li></ul><p>Javaå¼‚å¸¸æœºåˆ¶æ˜¯ä¸ºäº†åœ¨å¼‚å¸¸æƒ…å†µè®¾è®¡çš„ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ä¸åˆç†ä½¿ç”¨å¼‚å¸¸ã€ä¹±ç”¨å¼‚å¸¸çš„æƒ…å†µè¿˜æ˜¯å¾ˆå¸¸è§ï¼Œæˆ‘ä»¬æœ‰å¿…è¦é‡æ–°æ¢³ç†å¼‚å¸¸çš„ä½¿ç”¨ï¼Œåšåˆ°æ­£ç¡®ä½¿ç”¨ã€‚</p><p><strong>å¼‚å¸¸å¤„ç†ä¸èƒ½ä½œä¸ºæ­£å¸¸æ§åˆ¶æµ(èƒ½ä¸ç”¨å¼‚å¸¸å°±ä¸è¦ç”¨ï¼‰</strong></p><p>åä¾‹ï¼šå°†å¼‚å¸¸å¤„ç†åº”ç”¨äºæ™®é€šæ§åˆ¶æµ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line"> int i = 0;</span><br><span class="line"> while(true)&#123;</span><br><span class="line">    range[i++].climb(); </span><br><span class="line"> &#125;</span><br><span class="line">&#125; </span><br><span class="line">catch(ArrayIndexOutOfBoundsException e)&#123;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé¢ç¨‹åºé€šè¿‡å¼‚å¸¸æ•è·ç»“æŸå¾ªç¯è¿›è€Œå®Œæˆæ•°æ®çš„éå†ï¼Œæ®Šä¸çŸ¥å¼‚å¸¸æ¨¡å¼æ¯”æ ‡å‡†æ¨¡å¼è¦æ…¢å¾ˆå¤šï¼ˆå¾ˆå¯èƒ½2å€ä»¥ä¸Šï¼‰ï¼Œä¸”æ­£å¸¸çš„é€»è¾‘é€šè¿‡è¿™ç§å¼‚å¸¸æ–¹å¼è®©äººè´¹è§£ï¼Œä»£ç çš„å¯è¯»æ€§è¾ƒå·®ã€‚</strong></p><p>ä»¥ä¸Šä»£ç å®Œå…¨å¯ä»¥é‡‡ç”¨æ­£å¸¸çš„æ§åˆ¶é€»è¾‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(Mountain m : range) &#123;</span><br><span class="line"> m.climb();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆæ¯”å¦‚ï¼šçŠ¶æ€æµ‹è¯•ç›¸å…³çš„çš„ç±»åº”è¯¥æå‰è¿›è¡ŒçŠ¶æ€æµ‹è¯•ï¼Œä¸åº”è¯¥é€šè¿‡å¼‚å¸¸æœºåˆ¶ä½œä¸ºæ§åˆ¶æµ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Foo&gt; it = collection.iterator();</span><br><span class="line">while(it.hasNext())&#123;</span><br><span class="line"> Foo foo = it.next();</span><br><span class="line">      ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œéï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line"> Iterator&lt;Foo&gt; it = collection.iterator();</span><br><span class="line"> while(true)&#123;</span><br><span class="line"> Foo foo = it.next();</span><br><span class="line">      ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125; </span><br><span class="line">catch(NoSuchElementException e)&#123;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œå¼‚å¸¸åº”è¯¥åªç”¨äºå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä»–ä»¬æ°¸è¿œä¸åº”è¯¥ç”¨äºæ­£å¸¸çš„æ§åˆ¶æµï¼Œè‰¯å¥½çš„APIä¹Ÿä¸åº”è¯¥å¼ºè¿«ä»–ä»¬çš„å®¢æˆ·ç«¯ä¸ºäº†æ­£å¸¸çš„æ§åˆ¶æµè€Œä½¿ç”¨å¼‚å¸¸ã€‚å¯¹äºå¯ä»¥è§„é¿çš„RuntimeExceptionç±»å¼‚å¸¸ï¼Œåº”è¯¥æå‰åšæ£€æŸ¥ã€‚</p><p><strong>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†å¼‚å¸¸</strong></p><p>æŠ€æœ¯ä¸“å®¶å’Œæ™®é€šç¨‹åºå‘˜çš„åŒºåˆ«åœ¨äºï¼šæŠ€æœ¯ä¸“å®¶è¿½æ±‚å¹¶ä¸”ä¹Ÿèƒ½å¤Ÿå®ç°é«˜åº¦çš„ä»£ç é‡ç”¨ã€‚å¯¹äºå¼‚å¸¸ä¹Ÿä¸ä¾‹å¤–ï¼Œjdkæä¾›äº†ä¸€ç»„æœªå—æ£€å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰,ä»–ä»¬å·²ç»èƒ½å¤Ÿæ»¡è¶³ç»å¤§éƒ¨åˆ†APIçš„å¼‚å¸¸æŠ›å‡ºéœ€è¦ï¼Œå®Œå…¨æ²¡å¿…è¦è‡ªå·±å†å†™ä¸€ä¸ªå¼‚å¸¸å®ç°ã€‚</p><p>å¸¸è§å¯é‡ç”¨å¼‚å¸¸å¦‚ä¸‹ï¼š</p><ul><li>NullPointExceptionç©ºæŒ‡é’ˆï¼Œåœ¨ç¦æ­¢ä½¿ç”¨nullçš„æƒ…å†µä¸‹ä½¿- null</li><li>IllegalArgumentException å‚æ•°éæ³•ï¼Œénullçš„å‚æ•°å€¼ä¸æ­£ç¡®</li><li>IllegalStateException çŠ¶æ€éæ³•ï¼Œå¯¹è±¡çŠ¶æ€ä¸åˆé€‚</li><li>IndexOfBoundException ä¸‹æ ‡å‚æ•°å€¼è¶Šç•Œ</li><li>ConcurrentModificationException åœ¨ç¦æ­¢å¹¶å‘ä¿®æ”¹æƒ…å†µä¸‹ï¼Œæ£€æµ‹åˆ°å¯¹è±¡çš„å¹¶å‘ä¿®æ”¹</li><li>UnsupportedOperationExceptionå¯¹è±¡ä¸æ”¯æŒè¯¥æ–¹æ³•è°ƒç”¨</li></ul><p>é‡ç”¨ç°æœ‰å¼‚å¸¸æœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p><ol><li>å®ƒèƒ½ä½¿ä½ çš„APIæ›´æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼Œå› ä¸ºå¤§å®¶éƒ½çŸ¥é“è¿™äº›å¼‚å¸¸æ„å‘³ç€å•¥ï¼›</li><li>å®¢æˆ·ç«¯å¤„ç†å¼‚å¸¸çš„ä»£ç å¯è¯»æ€§ä¹Ÿèƒ½å˜å¼ºï¼›</li></ol><p><strong>éå—æ£€å¼‚å¸¸å’Œå—æ£€å¼‚å¸¸</strong>(è¿™ä¸ªæ¯”è¾ƒé‡è¦)</p><p>éå—æ£€å¼‚å¸¸ï¼šå³<code>RuntimeException</code>ï¼Œåº”ç”¨äºæœªæŒ‰ç…§APIçº¦å®šé”™è¯¯è°ƒç”¨å¯¼è‡´çš„å¼‚å¸¸ï¼Œæˆ–ç¨‹åºå®ç°è‡ªèº«é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸ï¼Œå¦‚<code>IndexOutOfBoundExcetion</code>ã€<code>IllegalArgumentException</code>ç­‰ï¼›<strong>éå—æ£€å¼‚å¸¸æœ¬è´¨ä¸Šå¸Œæœ›ç»ˆæ­¢çº¿ç¨‹</strong>ã€‚</p><p>å—æ£€å¼‚å¸¸ï¼šåº”ç”¨äºç¨‹åºæ­£ç¡®ï¼Œä½†ç”±äºæ“ä½œç³»ç»ŸåŸå› ã€ç½‘ç»œåŸå› å¯¼è‡´çš„å¼‚å¸¸ï¼Œå¦‚<code>IOException</code>ã€<code>ConnectExption</code>ã€<code>FileNotFountException</code>ç­‰ï¼Œè¿™ç±»å¼‚å¸¸æ˜¯å¯æ¢å¤çš„ï¼Œå¿…é¡»åœ¨ç¼–è¯‘æ—¶æ˜ç¡®å‘ŠçŸ¥å®¢æˆ·ç«¯å¿…é¡»å¤„ç†è¯¥ç±»å¼‚å¸¸ï¼Œå¤§å¤§å¢å¼ºäº†ç³»ç»Ÿçš„å¯é æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> ç§»åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webè¸©å‘æ±‡æ€»</title>
      <link href="/2021/11/06/web%E8%B8%A9%E5%9D%91%E6%B1%87%E6%80%BB/"/>
      <url>/2021/11/06/web%E8%B8%A9%E5%9D%91%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€ï¼š</h1><p>webè¯¾è®¾é‡åˆ°äº†ä¸€äº›é˜»åŠ›ï¼Œä»¥å‰å¸¸å¸¸å¬äººè¯´â€œå¤§å‰ç«¯â€ï¼Œæˆ‘å¸¸å¸¸å—¤ä¹‹ä»¥é¼»ï¼Œä»å‰æˆ‘è§‰å¾—ç°åœ¨çš„æŠ€æœ¯æ ˆï¼Œå‰ç«¯ä¹Ÿå¥½ï¼Œåç«¯ä¹Ÿç½¢ï¼Œä¹ƒè‡³ç§»åŠ¨å¼€å‘ã€åµŒå…¥å¼ã€äººå·¥æ™ºèƒ½ç­‰ç­‰ç­‰ç­‰ï¼Œæ²¡æœ‰ä¸€ä¸ªé¢†åŸŸä¸é…ç§°ä¹‹ä¸ºâ€œå¤§â€ï¼Œç„¶è€Œç°åœ¨æ‰è§‰å¾—ï¼Œå‰ç«¯ç¡®å®å¾ˆå¤§ã€‚ä»htmlåˆ°cssã€jsç­‰ç­‰ç­‰ç­‰ï¼Œä¹ƒè‡³åæ¥çš„ä¸€äº›elementUIå†åˆ°Vueï¼Œè¿™ä»…ä»…æ˜¯æˆ‘æ¥è§¦åˆ°çš„å†°å±±ä¸€è§’ã€‚æœ‰å¾ˆå¤šè§„èŒƒä¸ç­‰ç€æˆ‘å»äº†è§£ã€å­¦ä¹ ã€ä½¿ç”¨ï¼Œæœ‰å¾ˆå¤šåº“å¯ä»¥è¢«è°ƒç”¨ä½†æˆ‘å¯¹ä»–ä»¬ä¸€æ— æ‰€çŸ¥ï¼Œæœ‰å¾ˆå¤šæ ‡ç­¾ã€å±æ€§ç­‰ç€æˆ‘å»äº†è§£ã€ç†Ÿæ‚‰ï¼Œå‡¡æ­¤ç§ç§ï¼Œä»¤äººå¤´ç–¼ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œä»å‰çš„å¼€å‘ç»éªŒå¸¦ç»™äº†æˆ‘æŸç¼šã€‚å¯¹äºç§»åŠ¨å¼€å‘è€…æ¥è¯´ï¼Œæ ‡ç­¾çš„åµŒå¥—è§„åˆ™å·²ç»ç†Ÿæ‚‰çš„ä¸èƒ½å†ç†Ÿæ‚‰ï¼Œæ‰€éœ€è¦ç†Ÿæ‚‰çš„ä¸è¿‡æ˜¯æ ‡ç­¾åä¸å±æ€§ã€‚ä½†ä¸€æ–¹é¢ï¼Œä¼ ç»Ÿçš„MVCæ¶æ„æ€è·¯å¸¦ç»™äº†æˆ‘å¤ªå¤§çš„æŸç¼šï¼Œè®©æˆ‘ä¸€æ—¶å¾ˆéš¾æ¥å—MVVMè¿™ç§ä»æœªè§è¿‡çš„æ¶æ„æ¨¡å¼ã€‚</p><p>MVCä¸MVVMï¼š</p><p><img src="0.png" alt=""></p><p><img src="1.png" alt=""></p><p>ä½†è¿˜æ˜¯é€æ¸ç†Ÿæ‚‰äº†MVVMï¼Œæ„Ÿè°¢è¿™ç¯‡åšå®¢ç»™æˆ‘çš„å¯å‘ï¼š<a href="https://draveness.me/mvx/">æµ…è°ˆ MVCã€MVP å’Œ MVVM æ¶æ„æ¨¡å¼</a></p><p>ä¸è¿‡ï¼Œå¦ä¸€æ–¹é¢ï¼Œç§»åŠ¨å¼€å‘ä¸webä¸€ä¸ªç‰¹åˆ«å¤§çš„å·®å¼‚å°±åœ¨äºï¼Œwebæ²¡æœ‰ä»»ä½•çš„å¸ƒå±€è§„èŒƒï¼Œè€Œç§»åŠ¨å¼€å‘å‡ ä¹å…¨éƒ¨çš„UIç»˜åˆ¶éƒ½éµå¾ªç‰¹å®šçš„è§„èŒƒã€‚è¿™å°±å¯¼è‡´å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»¥æ¥æˆ‘çš„``</template>`æ ‡ç­¾å†…ä¸€ç›´æ··ä¹±ä¸å ªã€‚webç»™äº†å¼€å‘è¿™å¯¹äºUIçš„æ›´é«˜è‡ªç”±åº¦ï¼Œè¿™æ˜¯å—äº§å“éœ€æ±‚å½±å“çš„ï¼Œç§»åŠ¨å¼€å‘å¯¹ç•Œé¢å‡ ä¹æ²¡æœ‰ä»»ä½•ç¼©æ”¾éœ€æ±‚ï¼Œè€Œä¸€ä¸ªwebç•Œé¢å°±è¦é€‚åº”äººä»¬å¯¹çª—å£çš„ç¼©æ”¾ä¸ç•Œé¢ä¸Šæ›´å¤šã€æ›´å¤æ‚çš„å…ƒç´ çš„ä½ç½®çš„æ§åˆ¶ã€‚</p><h1>1.computedå’Œmethodsçš„åŒºåˆ«</h1><p><code>&lt;script&gt;</code>ä¸­ï¼Œcomputeä¸methodéƒ½ä»£è¡¨ç€æ–¹æ³•çš„é›†åˆã€‚ä¸è¿‡ï¼ŒåŒºåˆ«è¿˜æ˜¯ä¸å°ï¼š</p><h2 id="computed">computed</h2><blockquote><p>computedå±æ€§æ˜¯Vueçš„è®¡ç®—å±æ€§ï¼Œæ˜¯æ•°æ®å±‚åˆ°è§†å›¾å±‚çš„æ•°æ®è½¬åŒ–åæ˜ ;</p><p>è®¡ç®—å±æ€§æ˜¯åŸºäºä»–ä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œåªæœ‰åœ¨ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»–ä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä»–çš„ä¾èµ–æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®çš„æ—¶å€™è®¡ç®—å±æ€§éƒ½ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œä¸å†æ‰§è¡Œå‡½æ•°ï¼›</p></blockquote><h2 id="åŒºåˆ«">åŒºåˆ«</h2><blockquote><p>1.computedæ˜¯å“åº”å¼çš„ï¼Œmethodså¹¶éå“åº”å¼ã€‚</p><p>2.<strong>computedæ˜¯å¸¦ç¼“å­˜çš„ï¼Œåªæœ‰ä¾èµ–æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œæ‰ä¼šé‡æ–°è¿›è¡Œè®¡ç®—</strong>ï¼Œè€Œmethodsé‡Œçš„å‡½æ•°åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½è¦æ‰§è¡Œã€‚</p><p>3.<strong>computedä¸­çš„æˆå‘˜å¯ä»¥åªå®šä¹‰ä¸€ä¸ªå‡½æ•°ä½œä¸ºåªè¯»å±æ€§ï¼Œä¹Ÿå¯ä»¥å®šä¹‰get/setå˜æˆå¯è¯»å±æ€§</strong>ï¼Œè¿™ç‚¹æ˜¯methodsçš„æˆå‘˜åšä¸åˆ°çš„ã€‚</p><p>4.<strong>computedä¸æ”¯æŒå¼‚æ­¥</strong>ï¼Œå½“computedå†…æœ‰å¼‚æ­¥æ“ä½œæ—¶æ— æ•ˆï¼Œæ— æ³•ç›‘å¬æ•°æ®çš„å˜åŒ–</p><p>5.computedæ˜¯<strong>å±æ€§è®¿é—®</strong>ï¼Œè€Œmethodsæ˜¯<strong>å‡½æ•°è°ƒç”¨</strong></p><p>6.åœ¨<code>HTML</code>çš„æ’å€¼é‡Œ</p><ol><li><strong>computedå®šä¹‰çš„æ–¹æ³•æˆ‘ä»¬æ˜¯ä»¥å±æ€§çš„å½¢å¼è®¿é—®çš„</strong>ï¼Œå’Œ<code>data</code>é‡Œçš„å±æ€§è®¿é—®å½¢å¼ä¸€æ ·ï¼Œ<code>&#123;&#123;computedTest&#125;&#125;</code></li><li>ä½†æ˜¯methodså®šä¹‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»è¦åŠ ä¸Š<code>()</code>æ¥è°ƒç”¨ï¼Œå¦‚<code>&#123;&#123;methodTest()&#125;&#125;</code></li></ol></blockquote><h2 id="æ³¨æ„">æ³¨æ„</h2><blockquote><p>å¦‚æœå£°æ˜çš„è®¡ç®—å±æ€§è®¡ç®—é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œè€Œä¸”è®¿é—®é‡æ¬¡æ•°éå¸¸å¤šï¼Œæ”¹å˜çš„æ—¶æœºå´å¾ˆå°ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°computedï¼›ç¼“å­˜ä¼šè®©æˆ‘ä»¬å‡å°‘å¾ˆå¤šè®¡ç®—é‡ã€‚</p></blockquote><p>ä½œè€…ï¼šhualayouï¼Œæœ‰åˆ æ”¹<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/d69a875b769e">https://www.jianshu.com/p/d69a875b769e</a></p><h1>2.è·¨åŸŸ</h1><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯è·¨åŸŸHTTPè¯·æ±‚">ä¸€ã€ä»€ä¹ˆæ˜¯è·¨åŸŸHTTPè¯·æ±‚</h2><p>ç°ä»£æµè§ˆå™¨å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œä½¿ç”¨ XMLHttpRequestå¯¹è±¡å‘èµ· HTTPè¯·æ±‚æ—¶å¿…é¡»éµå®ˆåŒæºç­–ç•¥ï¼Œå¦åˆ™å°±æ˜¯è·¨åŸŸçš„HTTPè¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è¢«ç¦æ­¢çš„ã€‚<strong>è·¨åŸŸHTTPè¯·æ±‚æ˜¯æŒ‡AåŸŸä¸Šèµ„æºè¯·æ±‚äº†BåŸŸä¸Šçš„èµ„æº</strong>ï¼Œä¸¾ä¾‹è€Œè¨€ï¼Œéƒ¨ç½²åœ¨Aæœºå™¨ä¸ŠNginxä¸Šçš„jsä»£ç é€šè¿‡ajaxè¯·æ±‚äº†éƒ¨ç½²åœ¨Bæœºå™¨Tomcatä¸Šçš„RESTfulæ¥å£ã€‚</p><p>IPï¼ˆåŸŸåï¼‰ä¸åŒã€æˆ–è€…ç«¯å£ä¸åŒï¼Œéƒ½ä¼šé€ æˆè·¨åŸŸé—®é¢˜ã€‚ä¸ºäº†è§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Œæ›¾ç»å‡ºç°è¿‡jsonpã€ä»£ç†æ–‡ä»¶ç­‰æ–¹æ¡ˆï¼Œåº”ç”¨åœºæ™¯å—é™ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼Œç›´åˆ°HTML5å¸¦æ¥äº†CORSåè®®ã€‚</p><p>CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œå…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰ï¼Œå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡ºXMLHttpRequestè¯·æ±‚ï¼Œä»è€Œå…‹æœäº†AJAXåªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚å®ƒé€šè¿‡æœåŠ¡å™¨å¢åŠ ä¸€ä¸ªç‰¹æ®ŠHeader[Access-Control-Allow-Origin]æ¥å‘Šè¯‰å®¢æˆ·ç«¯è·¨åŸŸçš„é™åˆ¶ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒCORSã€å¹¶ä¸”åˆ¤æ–­Originé€šè¿‡çš„è¯ï¼Œå°±ä¼šå…è®¸XMLHttpRequestå‘èµ·è·¨åŸŸè¯·æ±‚ã€‚</p><h2 id="äºŒã€CROSå¸¸è§header">äºŒã€CROSå¸¸è§header</h2><p>Access-Control-Allow-Origin: <code>http://****.com</code>è¡¨ç¤ºå…è®¸<code>http://****.com</code>å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚<br>Access-Control-Max-Age:86400 è¡¨ç¤ºåœ¨86400ç§’å†…ä¸éœ€è¦å†å‘é€é¢„æ ¡éªŒè¯·æ±‚ã€‚<br>Access-Control-Allow-Methods: GET,POST,PUT,DELETE è¡¨ç¤ºå…è®¸è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚<br>Access-Control-Allow-Headers: content-type è¡¨ç¤ºå…è®¸è·¨åŸŸè¯·æ±‚åŒ…å«content-type</p><h2 id="ä¸‰ã€CORSå®ç°è·¨åŸŸè®¿é—®">ä¸‰ã€CORSå®ç°è·¨åŸŸè®¿é—®</h2><p>æˆæƒæ–¹å¼<br>æ–¹å¼1ï¼šè¿”å›æ–°çš„<code>CorsFilter</code><br>æ–¹å¼2ï¼šé‡å†™<code>WebMvcConfigurer</code><br>æ–¹å¼3ï¼šä½¿ç”¨æ³¨è§£ï¼ˆ<code>@CrossOrigin</code>ï¼‰<br>æ–¹å¼4ï¼šæ‰‹å·¥è®¾ç½®å“åº”å¤´ï¼ˆ<code>HttpServletResponse</code> ï¼‰</p><blockquote><p>æ³¨ï¼šæ–¹å¼1å’Œæ–¹å¼2å±äºå…¨å±€CORSé…ç½®ï¼Œæ–¹å¼3å’Œæ–¹å¼4å±äºå±€éƒ¨CORSé…ç½®ã€‚å¦‚æœä½¿ç”¨äº†å±€éƒ¨è·¨åŸŸæ˜¯ä¼šè¦†ç›–å…¨å±€è·¨åŸŸçš„è§„åˆ™ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡<code>@CrossOrigin</code>æ³¨è§£æ¥è¿›è¡Œç»†ç²’åº¦æ›´é«˜çš„è·¨åŸŸèµ„æºæ§åˆ¶ã€‚</p></blockquote><h3 id="1-è¿”å›æ–°çš„CorsFilter-å…¨å±€è·¨åŸŸ">1.è¿”å›æ–°çš„<code>CorsFilter</code>(å…¨å±€è·¨åŸŸ)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalCorsConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CorsFilter <span class="title">corsFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.æ·»åŠ CORSé…ç½®ä¿¡æ¯</span></span><br><span class="line">        CorsConfiguration config = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">          <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ</span></span><br><span class="line">          config.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">          <span class="comment">//æ˜¯å¦å‘é€Cookieä¿¡æ¯</span></span><br><span class="line">          config.setAllowCredentials(<span class="keyword">true</span>);</span><br><span class="line">          <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ(è¯·æ±‚æ–¹å¼)</span></span><br><span class="line">          config.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">          <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ(å¤´éƒ¨ä¿¡æ¯)</span></span><br><span class="line">          config.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">          <span class="comment">//æš´éœ²å“ªäº›å¤´éƒ¨ä¿¡æ¯ï¼ˆå› ä¸ºè·¨åŸŸè®¿é—®é»˜è®¤ä¸èƒ½è·å–å…¨éƒ¨å¤´éƒ¨ä¿¡æ¯ï¼‰</span></span><br><span class="line">          config.addExposedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.æ·»åŠ æ˜ å°„è·¯å¾„</span></span><br><span class="line">        UrlBasedCorsConfigurationSource configSource = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        configSource.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, config);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è¿”å›æ–°çš„CorsFilter.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CorsFilter(configSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-åˆ›å»ºä¸€ä¸ª-filter-è§£å†³è·¨åŸŸ">2.åˆ›å»ºä¸€ä¸ª filter è§£å†³è·¨åŸŸ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@Component</span><br><span class="line">@WebFilter(urlPatterns = &#123; &quot;/*&quot; &#125;, filterName = &quot;headerFilter&quot;)</span><br><span class="line">public class HeaderFilter implements Filter &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest request, ServletResponse resp, FilterChain chain) throws IOException, ServletException &#123;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) resp;</span><br><span class="line">        //è§£å†³è·¨åŸŸè®¿é—®æŠ¥é”™</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, PUT, GET, OPTIONS, DELETE&quot;);</span><br><span class="line">        //è®¾ç½®è¿‡æœŸæ—¶é—´</span><br><span class="line">        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, X-Requested-With, Content-Type, Accept, client_id, uuid, Authorization&quot;);</span><br><span class="line">        // æ”¯æŒHTTP 1.1.</span><br><span class="line">        response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);</span><br><span class="line">        // æ”¯æŒHTTP 1.0. response.setHeader(&quot;Expires&quot;, &quot;0&quot;);</span><br><span class="line">        response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);</span><br><span class="line">        // ç¼–ç </span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        chain.doFilter(request, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void init(FilterConfig filterConfig) &#123;</span><br><span class="line">        log.info(&quot;è·¨åŸŸè¿‡æ»¤å™¨å¯åŠ¨&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">        log.info(&quot;è·¨åŸŸè¿‡æ»¤å™¨é”€æ¯&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-é‡å†™WebMvcConfigurerï¼ˆå…¨å±€è·¨åŸŸï¼‰">3. é‡å†™<code>WebMvcConfigurer</code>ï¼ˆå…¨å±€è·¨åŸŸï¼‰</h3><p>ä»»æ„é…ç½®ç±»ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„<code>WebMvcConfigurer Bean</code>ï¼Œå¹¶é‡å†™å…¶æä¾›çš„è·¨åŸŸè¯·æ±‚å¤„ç†çš„æ¥å£ï¼Œç›®çš„æ˜¯æ·»åŠ æ˜ å°„è·¯å¾„å’Œå…·ä½“çš„CORSé…ç½®ä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalCorsConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">corsConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="comment">//é‡å†™çˆ¶ç±»æä¾›çš„è·¨åŸŸè¯·æ±‚å¤„ç†çš„æ¥å£</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//æ·»åŠ æ˜ å°„è·¯å¾„</span></span><br><span class="line">                registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                        <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ</span></span><br><span class="line">                        .allowedOrigins(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                        <span class="comment">//æ˜¯å¦å‘é€Cookieä¿¡æ¯</span></span><br><span class="line">                        .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                        <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ(è¯·æ±‚æ–¹å¼)</span></span><br><span class="line">                        .allowedMethods(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>)</span><br><span class="line">                        <span class="comment">//æ”¾è¡Œå“ªäº›åŸå§‹åŸŸ(å¤´éƒ¨ä¿¡æ¯)</span></span><br><span class="line">                        .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                        <span class="comment">//æš´éœ²å“ªäº›å¤´éƒ¨ä¿¡æ¯ï¼ˆå› ä¸ºè·¨åŸŸè®¿é—®é»˜è®¤ä¸èƒ½è·å–å…¨éƒ¨å¤´éƒ¨ä¿¡æ¯ï¼‰</span></span><br><span class="line">                        .exposedHeaders(<span class="string">&quot;Header1&quot;</span>, <span class="string">&quot;Header2&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-ä½¿ç”¨æ³¨è§£ï¼ˆå±€éƒ¨è·¨åŸŸï¼‰">4. ä½¿ç”¨æ³¨è§£ï¼ˆå±€éƒ¨è·¨åŸŸï¼‰</h3><p>åœ¨æ–¹æ³•ä¸Šï¼ˆ<code>@RequestMapping</code>ï¼‰ä½¿ç”¨æ³¨è§£ <code>@CrossOrigin</code> ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(<span class="meta-string">&quot;/hello&quot;</span>)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@CrossOrigin(<span class="meta-string">&quot;http://localhost:8080&quot;</span>)</span> </span><br><span class="line"><span class="keyword">public</span> String index( )&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨æ§åˆ¶å™¨ï¼ˆ@Controllerï¼‰ä¸Šä½¿ç”¨æ³¨è§£ <code>@CrossOrigin</code> ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@CrossOrigin(origins = <span class="meta-string">&quot;http://xx-domain.com&quot;</span>, maxAge = 3600)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">&quot;/hello&quot;</span>)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String index( )&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-æ‰‹å·¥è®¾ç½®å“åº”å¤´ï¼ˆå±€éƒ¨è·¨åŸŸ-ï¼‰">5.æ‰‹å·¥è®¾ç½®å“åº”å¤´ï¼ˆå±€éƒ¨è·¨åŸŸ ï¼‰</h3><p>ä½¿ç”¨<code>HttpServletResponse</code>å¯¹è±¡æ·»åŠ å“åº”å¤´ï¼ˆAccess-Control-Allow-Originï¼‰æ¥æˆæƒåŸå§‹åŸŸï¼Œè¿™é‡ŒOriginçš„å€¼ä¹Ÿå¯ä»¥è®¾ç½®ä¸º&quot;*&quot; ï¼Œè¡¨ç¤ºå…¨éƒ¨æ”¾è¡Œã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">String</span> <span class="function"><span class="title">index</span>(<span class="params">HttpServletResponse response</span>)</span>&#123;</span><br><span class="line">    response.addHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;http://localhost:8080&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>3.åˆ¤æ–­åˆæ³•</h1><h2 id="æ•°å­—">æ•°å­—</h2><p>å°é—®é¢˜ï¼Œæ™®é€‚çš„æ–¹æ³•ï¼šæ­£åˆ™</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^[0-9]+.?[0-9]*/</span>;</span><br><span class="line">            <span class="keyword">if</span> (!re.test(<span class="built_in">this</span>.form_add.credit)) &#123;</span><br><span class="line">                alert(<span class="string">&quot;å­¦åˆ†è¯·è¾“å…¥æ•°å­—&quot;</span>);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><h2 id="é‚®ç®±">é‚®ç®±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pat = <span class="string">&#x27;[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+&#x27;</span></span><br></pre></td></tr></table></figure><h1>4.æˆ‘ä¸ºä»€ä¹ˆä¸ç”¨å¤–é”®</h1><p>åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå¤–é”®ä¹Ÿè¢«ç§°ä¸ºå…³ç³»é”®ï¼Œå®ƒæ˜¯å…³ç³»å‹æ•°æ®åº“ä¸­æä¾›å…³ç³»è¡¨ä¹‹é—´è¿æ¥çš„å¤šä¸ªåˆ—ï¼Œè¿™ä¸€ç»„æ•°æ®åˆ—æ˜¯å½“å‰å…³ç³»è¡¨ä¸­çš„å¤–é”®ï¼Œä¹Ÿå¿…é¡»æ˜¯å¦ä¸€ä¸ªå…³ç³»è¡¨ä¸­çš„å€™é€‰é”®ï¼ˆCandidate Keyï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å€™é€‰é”®åœ¨å½“å‰è¡¨ä¸­æ‰¾åˆ°å”¯ä¸€çš„å…ƒç´ ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨å…³ç³»è¡¨ä¸­çš„ä¸»é”®ä½œä¸ºå…¶ä»–è¡¨ä¸­çš„å¤–é”®ï¼Œè¿™æ ·æ‰å¯ä»¥æ»¡è¶³å…³ç³»å‹æ•°æ®åº“å¯¹å¤–é”®çš„çº¦æŸã€‚</p><p><img src="2.jpg" alt=""></p><p>å¤–é”®ä¸ä»…ä»…æ˜¯æ•°æ®åº“è¡¨ä¸­çš„ä¸€ä¸ªæ•´æ•°ï¼Œ<strong>å®ƒè¿˜æä¾›äº†é¢å¤–çš„ä¸€è‡´æ€§ä¿è¯</strong>ã€‚å› ä¸ºæ•°æ®åº“å¾€å¾€æ˜¯æ•´ä¸ªç³»ç»Ÿçš„çœŸç†ä¹‹æºï¼ˆSource of Truthï¼‰ï¼Œæ‰€ä»¥ä¿è¯æ•°æ®çš„<strong>ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§</strong>éå¸¸é‡è¦ï¼Œå…³ç³»å‹æ•°æ®åº“è™½ç„¶æä¾›äº†å¤–é”®ã€è§¦å‘å™¨ç­‰ç‰¹æ€§ä¿è¯ä¸€è‡´æ€§ï¼Œè€Œä¸”è™½ç„¶æ­¤æ¬¡å®éªŒé‡Œé¢ä¹Ÿæåˆ°äº†å¤–é”®ï¼Œä½†æ˜¯åœ¨ä»Šå¤©çš„ç”Ÿäº§ç¯å¢ƒä¸­å´å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”æˆ‘ä¹Ÿä¸å‡†å¤‡ä½¿ç”¨ã€‚</p><p>å¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰æ˜¯æ•°æ®çš„å±æ€§ï¼Œå¦‚æœæ•°æ®æ‹¥æœ‰è¯¥å±æ€§ï¼Œé‚£ä¹ˆæ•°æ®ä¸­æ‰€æœ‰çš„å¼•ç”¨éƒ½æ˜¯åˆæ³•çš„ï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å°±æ„å‘³ç€<strong>å…³ç³»å‹æ•°æ®åº“ä¸­å¼•ç”¨å¦ä¸€ä¸ªè¡¨ä¸­çš„å€¼å¿…é¡»å­˜åœ¨</strong>ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> posts</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="keyword">FOREIGN</span> KEY (author_id)</span><br><span class="line"><span class="keyword">REFERENCES</span> authors(id);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿° SQL è¯­å¥å¯ä»¥å‘å…³ç³»è¡¨ä¸­å¢åŠ å¤–é”®çº¦æŸï¼Œè¯¥ SQL è¯­å¥çš„æ‰§è¡Œå‰ææ˜¯ <code>posts</code> è¡¨ä¸­å­˜åœ¨ <code>author_id</code> å­—æ®µã€‚ä» SQL è¯­å¥ä¸­çš„ <code>CONSTRAINT</code> å…³é”®å­—æˆ‘ä»¬ä¹Ÿèƒ½æ¨æµ‹å‡ºå¤–é”®ä¸æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œ<strong>å®ƒæ˜¯ä¸åŒå…³ç³»è¡¨ä¹‹é—´çš„çº¦æŸ</strong>ã€‚</p><p><strong>ä¸ä½¿ç”¨å¤–é”®çš„åŸå› å…¶å®å¾ˆç®€å•ï¼ŒMySQLã€PostgreSQL ç­‰å…³ç³»å‹æ•°æ®åº“å¾ˆéš¾æ°´å¹³æ‰©å®¹ï¼Œä½†æ˜¯æ— çŠ¶æ€çš„æœåŠ¡å¾€å¾€éƒ½å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å®¹ã€‚ç”±äºå¤–é”®ç­‰ç‰¹æ€§éœ€è¦æ•°æ®åº“æ‰§è¡Œé¢å¤–çš„å·¥ä½œï¼Œè€Œè¿™äº›æ“ä½œä¼šå ç”¨æ•°æ®åº“çš„è®¡ç®—èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å¤§éƒ¨åˆ†çš„éœ€æ±‚éƒ½è¿ç§»åˆ°æ— çŠ¶æ€çš„æœåŠ¡ä¸­å®Œæˆä»¥é™ä½æ•°æ®åº“çš„å·¥ä½œè´Ÿè½½ã€‚</strong></p><p>æ ¹æ®æ›´æ–°å’Œåˆ é™¤æ—¶çš„è¡Œä¸ºä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤–é”®åˆ†æˆ <code>RESTRICT</code>ã€<code>CASCADE</code> å’Œ <code>SET NULL</code> ç­‰å‡ ç§ï¼Œå½“æˆ‘ä»¬ä¸ºå…³ç³»è¡¨ä¸­çš„å­—æ®µå¢åŠ å¤–é”®çº¦æŸæ—¶ï¼Œéœ€è¦æŒ‡å®šå¤–é”®çš„ç±»å‹ï¼Œæœ€å¸¸è§çš„ä¹Ÿå°±æ˜¯ <code>RESTRICT</code> å’Œ <code>CASCADE</code> ä¸¤ç§ï¼Œå…¶ä¸­ <code>RESTRICT</code> ä¸ºå¤–é”®çš„é»˜è®¤ç±»å‹ï¼Œ<strong>ä¸åŒç±»å‹çš„å¤–é”®ä¼šå¸¦æ¥ä¸åŒçš„é¢å¤–å¼€é”€ï¼Œè€Œè¿™äº›é¢å¤–å¼€é”€å°±æ˜¯æˆ‘ä»¬ä¸ä½¿ç”¨å¤–é”®çš„ç†ç”±ï¼š</strong></p><ul><li>ä½¿ç”¨ <code>RESTRICT</code> ä¼šåœ¨æ›´æ–°æˆ–è€…åˆ é™¤è®°å½•æ—¶å¯¹å¤–é”®å¯¹åº”çš„è®°å½•æ˜¯å¦å­˜åœ¨è¿›è¡Œä¸€è‡´æ€§æ£€æŸ¥ï¼›</li><li>ä½¿ç”¨ <code>CASCADE</code> ä¼šåœ¨æ›´æ–°æˆ–è€…åˆ é™¤è®°å½•æ—¶è§¦å‘çº§è”æ›´æ–°æˆ–è€…åˆ é™¤æ“ä½œï¼›</li></ul><blockquote><p>æ³¨æ„ï¼šMySQL ä¸­çš„ <code>NO ACTION</code> å’Œ <code>RESTRICT</code> å…·æœ‰ç›¸åŒçš„è¯­ä¹‰</p></blockquote><p>è€Œåœ¨<a href="https://dba.stackexchange.com/questions/77906/what-is-the-cost-of-adding-a-foreign-key-in-mysql">è¿™ä¸ªå›ç­”</a>ä¸­ï¼Œä½œè€…å¯¹æ˜¯å¦ä½¿ç”¨å¤–é”®ç»™äº†ä¸€äº›ç†ç”±ï¼š</p><blockquote><p>In MySQL, a foreign key requires an index. If an index already exists, the foreign key will use that index (even using the prefix of an existing multi-column index). If no index exists, defining the foreign key will build the index.</p><p>So the size increase and time to create a foreign key is about the same as to create an index on the same column(s).</p><p>The performance of a SELECT is not impacted significantly by the presence of a foreign key. Only a slight additional work for the optimizer, to consider the new indexes.</p><p>The performance of updating is more, because for each foreign key, an INSERT/UPDATE/DELETE has to check to see if the constraint is satisfied. That means a primary key lookup to the referenced tables. This impact is measurable, and it is greater if the referenced tables are not in the buffer pool.</p><p>Another impact is the locking. If I update a row in a child row that has a foreign key, InnoDB places a shared-lock on the referenced rows in the parent tables. That means no one can update those parent rows until I commit. If you have lots of threads updating child rows, then the parent rows may be locked most of the time, and this can make it hard to do concurrent work in the parent tables. Not so much a performance problem, but a concurrency problem.</p><p>As with all â€œhow does that performâ€ questions, the answer really depends on your workload. If you donâ€™t have concurrent updates, for example, that issue may not effect you for all practical purposes. Testing it yourself with load testing is the only way to be sure. Itâ€™s not something anyone on StackOverflow can answer precisely for you.</p></blockquote><p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸€æ–¹é¢å°±æ˜¯selectå—æ€§èƒ½å¤–é”®å½±å“ä¸å¤§ï¼Œä½†æ˜¯INSERT/UPDATE/DELETEçš„æ€§èƒ½ä¼šå—åˆ°è¾ƒå¤§å½±å“ï¼Œå› ä¸ºæ£€æŸ¥å‚æ•°æ˜¯å¦æ»¡è¶³æ¡ä»¶éœ€è¦é¢å¤–çš„æ€§èƒ½æ”¯å‡ºï¼Œå¦‚æœæ•°æ®è¡¨ä¸åœ¨ç¼“å†²æ± ä¼šå¯¼è‡´æ›´é«˜çš„æ€§èƒ½äºæŸã€‚å¦ä¸€æ–¹é¢å°±æ˜¯å¤–é”®çš„åŠ é”ç­–ç•¥å¯¼è‡´åœ¨å¹¶å‘é‡è¾ƒé«˜çš„æƒ…å†µä¸‹ç¨‹åºç­‰å¾…é”è¢«é‡Šæ”¾è€Œå¼•å‘çš„æ€§èƒ½äºæŸï¼Œä¸å•è¡¨ç´¢å¼•ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šå¼•ç”¨ä¸€å¼ æˆ–å¤šå¼ çˆ¶è¡¨ï¼Œè¿™æ ·å½“å¯¹å­è¡¨è¿›è¡Œå†™å…¥æ“ä½œ(UPDATE/INSERT)çš„æ—¶å€™ï¼Œçˆ¶è¡¨å°±ä¼šè¢«åŠ ä¸Šâ€œå…±äº«é”â€ï¼Œè¿™æ ·åœ¨å¯¹å­è¡¨é«˜å¹¶å‘è¿›è¡Œå†™å…¥æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå¯¹çˆ¶è¡¨çš„å†™å…¥æ“ä½œå°±ä¼šç”±äºâ€œå…±äº«é”â€çš„å­˜åœ¨ï¼Œè€Œä¼šé•¿æ—¶é—´ä¸èƒ½å¾—åˆ°æ›´æ–°ã€‚</p><p>ï¼ˆä¸ªäººè§‰å¾—ä¸èƒ½åŠæ—¶æ›´æ–°ä¼šå¯¹äº‹åŠ¡ä¸€è‡´æ€§äº§ç”Ÿä¸€å®šå½±å“ï¼‰ï¼ˆè¿™å¥è¯ä¸ä¸€å®šå¯¹ï¼‰</p><p>å…¶æ¬¡ï¼Œå¤–é”®å¹¶ä¸æ˜¯ä¸å¯æ›¿ä»£çš„ï¼Œåªè¦åç«¯é€»è¾‘å¤„ç†å¾—å½“å®Œå…¨å¯ä»¥é¿å…å¤–é”®çš„ä½¿ç”¨ï¼Œè€Œä¸”åœ¨é€»è¾‘ä¸Šä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œæ‰€ä»¥æˆ‘æ›´å€¾å‘äºä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><p>éƒ¨åˆ†å‚è€ƒï¼š<a href="https://draveness.me/whys-the-design-database-foreign-key/%EF%BC%8Cta%E8%AE%B2%E7%9A%84%E7%9C%9F%E5%A5%BD">https://draveness.me/whys-the-design-database-foreign-key/ï¼Œtaè®²çš„çœŸå¥½</a></p><h1>5.#ä¸$ï¼šSQLçš„ç»†å¾®çŸ¥è¯†</h1><h2 id="é—®é¢˜å‘ç°ï¼š">é—®é¢˜å‘ç°ï¼š</h2><p>åœ¨è°ƒç”¨SQLè¯­å¥è¿›è¡Œupdateçš„æ—¶å€™ä¸€ç›´å‡ºç°å®ä½“ç±»ä¸æ•°æ®åº“å­—æ®µä¸åŒ¹é…é—®é¢˜ï¼Œ<code>java.sql.SQLSyntaxErrorException: Unknown column 'xxx' in 'field list'</code>,ä½†è¿™å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„é”™è¯¯ï¼Œæœ€è¯¡å¼‚çš„æ˜¯æŠ¥é”™æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="3.png" alt=""></p><p>SQLè¯­å¥ï¼š</p><p><img src="4.png" alt=""></p><p>æŒ‰é“ç†è®²ï¼ŒSQLè¯­å¥åº”è¯¥æ˜¯æ¯«æ— é—®é¢˜çš„ï¼Œæˆ‘çš„selectç­‰ç­‰å…¶ä»–æ–¹æ³•ä¹Ÿæ˜¯ç”¨ç±»ä¼¼çš„æ ¼å¼å†™çš„ï¼Œä½†è¿™ä¸ªupdateååä¸è¡Œï¼Œè€Œä¸”æœ€è¯¡å¼‚çš„æ˜¯ä¸€ä¸ªæ•°æ®è¢«è¯†åˆ«ä¸ºäº†æ•°æ®è¡¨çš„åˆ—åï¼Œè¿™å°±è®©äººååˆ†è¿·æƒ‘ã€‚</p><p>æœ€åï¼Œæˆ‘å°†å¼•ç”¨æ•°æ®çš„æ–¹æ³•${}æ”¹æˆäº†#{}ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="åˆ†æï¼š">åˆ†æï¼š</h2><h3 id="äºŒè€…åŒºåˆ«ï¼š">äºŒè€…åŒºåˆ«ï¼š</h3><p>é¦–å…ˆï¼Œåœ¨MyBatis çš„æ˜ å°„é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŠ¨æ€ä¼ é€’å‚æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p>#{} å ä½ç¬¦</p></li><li><p>${} æ‹¼æ¥ç¬¦</p></li></ul><p>å…¶æ¬¡ï¼š</p><ul><li><p>#{} ä¸ºå‚æ•°å ä½ç¬¦ ?ï¼Œå³sql é¢„ç¼–è¯‘ï¼Œ${} ä¸ºå­—ç¬¦ä¸²æ›¿æ¢ï¼Œå³ sql æ‹¼æ¥</p></li><li><p>#{}ï¼šåŠ¨æ€è§£æ -&gt; é¢„ç¼–è¯‘ -&gt; æ‰§è¡Œï¼Œ${}ï¼šåŠ¨æ€è§£æ -&gt; ç¼–è¯‘ -&gt; æ‰§è¡Œ</p></li><li><p>#{} çš„å˜é‡æ›¿æ¢æ˜¯åœ¨DBMS ä¸­ï¼Œ${} çš„å˜é‡æ›¿æ¢æ˜¯åœ¨ DBMS å¤–</p></li></ul><blockquote><p>DBMS: Database Management Systemï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</p></blockquote><ul><li><p>å˜é‡æ›¿æ¢åï¼Œ#{} å¯¹åº”çš„å˜é‡è‡ªåŠ¨åŠ ä¸Šå•å¼•å· â€˜â€™ï¼Œå˜é‡æ›¿æ¢åï¼Œ${} å¯¹åº”çš„å˜é‡ä¸ä¼šåŠ ä¸Šå•å¼•å· â€˜â€™</p></li><li><p>#{} èƒ½é˜²æ­¢sql æ³¨å…¥ï¼Œ${} ä¸èƒ½é˜²æ­¢sql æ³¨å…¥</p></li></ul><h3 id="æ ·ä¾‹ï¼š">æ ·ä¾‹ï¼š</h3><p>#{} å’Œ ${} çš„å®ä¾‹ï¼šå‡è®¾ä¼ å…¥å‚æ•°ä¸º 1</p><ul><li>å¼€å§‹</li></ul><p>1ï¼‰<code>#&#123;&#125;ï¼šselect * from t_user where uid=#&#123;uid&#125;</code></p><p>2ï¼‰<code>$&#123;&#125;ï¼šselect * from t_user where uid= '$&#123;uid&#125;'</code></p><ul><li>ç„¶å</li></ul><p>1ï¼‰<code>#&#123;&#125;ï¼šselect * from t_user where uid= ?</code></p><p>2ï¼‰<code>$&#123;&#125;ï¼šselect * from t_user where uid= 1</code></p><ul><li>æœ€å</li></ul><p>1ï¼‰<code>#&#123;&#125;ï¼šselect * from t_user where uid= '1'</code></p><p>2ï¼‰<code>$&#123;&#125;ï¼šselect * from t_user where uid= 1</code></p><h3 id="æ³¨æ„äº‹é¡¹ï¼š">æ³¨æ„äº‹é¡¹ï¼š</h3><ul><li>èƒ½ç”¨<code>#&#123;&#125;</code>çš„åœ°æ–¹å°±ç”¨<code> #&#123;&#125;</code>ï¼Œä¸ç”¨æˆ–å°‘ç”¨ <code>$&#123;&#125;</code>ã€‚å› ä¸ºä½¿ç”¨<code>$&#123; &#125;</code>ä¼šå¯¼è‡´sqlæ³¨å…¥ï¼Œä¸åˆ©äºç³»ç»Ÿçš„å®‰å…¨æ€§ï¼</li></ul><blockquote><p>SQLæ³¨å…¥ï¼šå°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•æäº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚å¸¸è§çš„æœ‰åŒ¿åç™»å½•ï¼ˆåœ¨ç™»å½•æ¡†è¾“å…¥æ¶æ„çš„å­—ç¬¦ä¸²ï¼‰ã€å€ŸåŠ©å¼‚å¸¸è·å–æ•°æ®åº“ä¿¡æ¯ç­‰</p></blockquote><ul><li>è¡¨åä½œå‚æ•°æ—¶ï¼Œå¿…é¡»ç”¨ <code>$&#123;&#125;ã€‚å¦‚ï¼šselect * from $&#123;tableName&#125;</code></li><li>order by æ—¶ï¼Œå¿…é¡»ç”¨ <code>$&#123;&#125;ã€‚å¦‚ï¼šselect * from t_user order by $&#123;columnName&#125;</code></li><li>ä½¿ç”¨ <code>$&#123;&#125; </code>æ—¶ï¼Œè¦æ³¨æ„ä½•æ—¶åŠ æˆ–ä¸åŠ å•å¼•å·ï¼Œå³<code> $&#123;&#125;</code> å’Œ <code>'$&#123;&#125;'</code></li></ul><h2 id="11-24åˆè¸©äº†ä¸€å‘ï¼š">11.24åˆè¸©äº†ä¸€å‘ï¼š</h2><p><img src="7.png" alt=""></p><p>å®Œæ•´çš„ç¬¬ä¸€è¡Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nested exception is org.apache.ibatis.type.TypeException: Could not set parameters <span class="keyword">for</span> mapping: ParameterMapping&#123;property=<span class="string">&#x27;sid&#x27;</span>, mode=IN, javaType=<span class="class"><span class="keyword">class</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Object</span>, <span class="title">jdbcType</span></span>=<span class="keyword">null</span>, numericScale=<span class="keyword">null</span>, resultMapId=<span class="string">&#x27;null&#x27;</span>, jdbcTypeName=<span class="string">&#x27;null&#x27;</span>, expression=<span class="string">&#x27;null&#x27;</span>&#125;. Cause: org.apache.ibatis.type.TypeException: Error setting non <span class="keyword">null</span> <span class="keyword">for</span> parameter #<span class="number">2</span> with JdbcType <span class="keyword">null</span> . Try setting a different JdbcType <span class="keyword">for</span> <span class="keyword">this</span> parameter or a different configuration property. Cause: org.apache.ibatis.type.TypeException: Error setting non <span class="keyword">null</span> <span class="keyword">for</span> parameter #<span class="number">2</span> with JdbcType <span class="keyword">null</span> . Try setting a different JdbcType <span class="keyword">for</span> <span class="keyword">this</span> parameter or a different configuration property. Cause: java.sql.SQLException: <span class="function">Parameter index out of <span class="title">range</span> <span class="params">(<span class="number">2</span> &gt; number of parameters, which is <span class="number">1</span>)</span></span></span><br></pre></td></tr></table></figure><p>å‘ç°åœ¨å­—æ®µæ˜ å°„è¿‡ç¨‹ä¸­å¤šäº†ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„å­—æ®µï¼Œæ¢æˆ<code>$&#123;&#125;</code>å°±æ¢å¤æ­£å¸¸äº†ã€‚ç°åœ¨çŒœæµ‹<code>$&#123;&#125;</code>ä¸<code>#&#123;&#125;</code>ä¹‹é—´çš„åŒºåˆ«å¯èƒ½æ²¡é‚£ä¹ˆç®€å•ã€‚ä½†æ˜¯çœ‹æŠ¥é”™ç±»å‹æ˜¯<code>MyBatisSystemException</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯<code>MyBatis</code>åœ¨å°è£…è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œå…¶å®<code>#&#123;&#125;</code>å¤–é¢ä¸éœ€è¦åŠ â€™'ã€‚åˆ æ‰å°±å¥½äº†</p><h1>6.PBEåŠ å¯†ï¼š</h1><h2 id="1-æ¦‚è¿°">1.æ¦‚è¿°</h2><p>PBE(Password Based Encryptionï¼ŒåŸºäºå£ä»¤åŠ å¯†)æ˜¯ä¸€ç§åŸºäºå£ä»¤çš„åŠ å¯†ç®—æ³•ï¼Œå…¶ç‰¹ç‚¹æ˜¯ä½¿ç”¨å£ä»¤ä»£æ›¿äº†å¯†é’¥ï¼Œè€Œå£ä»¤ç”±ç”¨æˆ·è‡ªå·±æŒç®¡ï¼Œé‡‡ç”¨éšæœºæ•°(è¿™é‡Œç§°ä¹‹ä¸º ç›)æ‚å‡‘å¤šé‡åŠ å¯†ç­‰æ–¹æ³•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p>PBE ç®—æ³•å¹¶æ²¡æœ‰ çœŸæ­£æ„å»ºæ–°çš„åŠ å¯†/è§£å¯†ç®—æ³•ï¼Œè€Œæ˜¯å¯¹å·²çŸ¥çš„å¯¹ç§°åŠ å¯†ç®—æ³•(eg:DESç®—æ³•)åšäº†åŒ…è£…ï¼›ä½¿ç”¨PBEç®—æ³•å¯¹æ•°æ®åšåŠ å¯†/è§£å¯†æ“ä½œæ—¶ï¼Œå…¶å®æ˜¯ä½¿ç”¨äº† DES æˆ–è€… AES ç­‰å…¶ä»–å¯¹ç§°åŠ å¯†ç®—æ³•åšäº†ç›¸åº”çš„æ“ä½œã€‚</p><p>æ—¢ç„¶ï¼ŒPBEç®—æ³•æ˜¯ä½¿ç”¨äº†è¾ƒä¸ºå¸¸ç”¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œé‚£å°±æ— æ³•å›é¿å¯†é’¥çš„é—®é¢˜ï¼›**å£ä»¤å¹¶ä¸èƒ½æ›¿ä»£å¯†é’¥ï¼Œå¯†é’¥æ˜¯ç»è¿‡åŠ å¯†ç®—æ³•è®¡ç®—å¾—å‡ºçš„ï¼Œä½†å£ä»¤æœ¬èº«ä¸å¯èƒ½å¾ˆé•¿ï¼Œå•çº¯çš„å£ä»¤å¾ˆå®¹æ˜“é€šè¿‡ç©·ä¸¾æ”»å‡»æ–¹å¼ç ´è¯‘ï¼Œè¿™å°±å¼•å…¥äº† â€œç›â€ã€‚ç›èƒ½å¤Ÿé˜»æ­¢å­—å…¸æ”»å‡»æˆ–é¢„å…ˆè®¡ç®—çš„æ”»å‡»ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªéšæœºçš„ä¿¡æ¯ï¼Œç›¸åŒçš„éšæœºä¿¡æ¯æä¸å¯èƒ½ä½¿ç”¨2æ¬¡ã€‚**å°†ç›é™„åŠ åœ¨ å£ä»¤ä¸Šï¼Œé€šè¿‡æ¶ˆæ¯æ‘˜è¦ç®—æ³•ç»è¿‡è¿­ä»£è®¡ç®—è·å–å¾—åˆ° æ„å»ºå¯†é’¥/åˆå§‹åŒ–å‘é‡çš„åŸºæœ¬ææ–™ï¼Œä½¿å¾—ç ´è¯‘åŠ å¯†ä¿¡æ¯çš„éš¾åº¦åŠ å¤§ã€‚</p><h2 id="2-æ¨¡å‹å›¾ï¼ˆUMLï¼‰">2.æ¨¡å‹å›¾ï¼ˆUMLï¼‰</h2><p><img src="5.png" alt=""></p><h2 id="3-å®ç°">3.å®ç°</h2><p><code>import org.bouncycastle.jce.provider.BouncyCastleProvider;</code>åœ¨ideaä¸­å¯ä»¥Mavenæœç´¢æ‰¾åˆ°ï¼Œ<code>pom.xml</code>å¯ä»¥é€šè¿‡å¦‚ä¸‹å¼•å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å£ä»¤åŠ å¯†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bouncycastle<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bcprov-jdk16<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä»£ç å‚è€ƒ<a href="https://blog.csdn.net/Leon_Jinhai_Sun/article/details/89919308">Leon_Jinhai_Sunçš„ä»£ç </a>ï¼Œæœ‰åˆ æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.security.Security;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKeyFactory;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.PBEKeySpec;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.PBEParameterSpec;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.jce.provider.BouncyCastleProvider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PBECipher</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¦–å…ˆæˆ‘ä»¬è¦Castleçš„jaråŒ…å¼•å…¥åˆ°é¡¹ç›®ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ALGORITHM = <span class="string">&quot;PBEWITHMD5andDES&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String CIPHER_NAME = <span class="string">&quot;PBEwithSHA1and128bitAES-CBC-BC&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ITERATION_COUNT = <span class="number">1000</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ å¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encrypt(String password, <span class="keyword">byte</span>[] salt, <span class="keyword">byte</span>[] input) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬åœ¨åŠ å¯†çš„æ—¶å€™éœ€è¦åˆ›å»ºä¸€ä¸ªPBEKeySpec</span></span><br><span class="line"><span class="comment">         * è¿˜æœ‰ä¼ å…¥çš„ç”¨æˆ·è¾“å…¥çš„password</span></span><br><span class="line"><span class="comment">         * å¾—åˆ°ä¸€ä¸ªPBEKeySpecå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        PBEKeySpec keySpec = <span class="keyword">new</span> PBEKeySpec(password.toCharArray());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç„¶åæˆ‘ä»¬é€šè¿‡SecretKeyFactory</span></span><br><span class="line"><span class="comment">         * é€šè¿‡getInstanceæ–¹æ³•</span></span><br><span class="line"><span class="comment">         * å¾—åˆ°ä¸€ä¸ªSecretKeyFactoryå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        SecretKeyFactory sKeyFactory = SecretKeyFactory</span><br><span class="line">                .getInstance(CIPHER_NAME);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç„¶åé€šè¿‡generateSecretä¼ å…¥keySpec</span></span><br><span class="line"><span class="comment">         * å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªSecretKey</span></span><br><span class="line"><span class="comment">         * è¿™ä¸ªSecretKeyå°±æ˜¯æˆ‘ä»¬å°†æ¥è¦åŠ å¯†çš„å¯†é’¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        SecretKey skey = sKeyFactory.generateSecret(keySpec);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç´§æ¥ç€æˆ‘ä»¬è¦é€šè¿‡saltç”Ÿæˆä¸€ä¸ªPBEParameterSpec</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬ä¼ å…¥1000</span></span><br><span class="line"><span class="comment">         * è¡¨ç¤ºç”¨æˆ·çš„å£ä»¤å’Œsaltä¼šèµ°1000æ¬¡çš„å¾ªç¯</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        PBEParameterSpec pbeps = <span class="keyword">new</span> PBEParameterSpec(salt, ITERATION_COUNT);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç„¶åæˆ‘ä»¬é€šè¿‡Cipher.getInstanceå¾—åˆ°ä¸€ä¸ªCipherå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Cipher cipher = Cipher.getInstance(CIPHER_NAME);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * initæ–¹æ³•ä¼šä¼ å…¥ENCRYPT_MODE,SecretKey,</span></span><br><span class="line"><span class="comment">         * ä»¥åŠPBEParameterSpecè¿™ä¸‰ä¸ªå¯¹è±¡ç„¶åå°±å¯ä»¥åŠ å¯†</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, skey, pbeps);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * å¾—åˆ°å¯†æ–‡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(input);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£å¯†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * åœ¨è§£å¯†çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¼ å…¥ç”¨æˆ·éœ€è¦çš„password,salt,ä»¥åŠå¯†æ–‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decrypt(String password, <span class="keyword">byte</span>[] salt, <span class="keyword">byte</span>[] input) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        PBEKeySpec keySpec = <span class="keyword">new</span> PBEKeySpec(password.toCharArray());</span><br><span class="line">        SecretKeyFactory sKeyFactory = SecretKeyFactory</span><br><span class="line">                .getInstance(CIPHER_NAME);</span><br><span class="line">        SecretKey skey = sKeyFactory.generateSecret(keySpec);</span><br><span class="line">        PBEParameterSpec pbeps = <span class="keyword">new</span> PBEParameterSpec(salt, ITERATION_COUNT);</span><br><span class="line">        Cipher cipher = Cipher.getInstance(CIPHER_NAME);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç„¶åæˆ‘ä»¬æŠŠæ¨¡å¼è®¾ç½®ä¸ºDECRYPT_MODE</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, skey, pbeps);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬è¿è¡Œè¿™ä¸ªä»£ç </span></span><br><span class="line"><span class="comment">     * ç”±äºæˆ‘ä»¬æ¯æ¬¡è¿è¡Œçš„saltæ˜¯ä¸åŒçš„</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥æ¯æ¬¡æˆ‘ä»¬å¾—åˆ°å¯†æ–‡ä¹Ÿæ˜¯ä¸åŒçš„</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç”¨æˆ·å£ä»¤å’Œéšæœºæ•°</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬å°±ä¿è¯äº†åŠ å¯†çš„å¼ºåº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// æŠŠBouncyCastleä½œä¸ºProvideræ·»åŠ åˆ°java.securityï¼š</span></span><br><span class="line">        Security.addProvider(<span class="keyword">new</span> BouncyCastleProvider());</span><br><span class="line">        <span class="comment">// åŸæ–‡ï¼š</span></span><br><span class="line">        String message = <span class="string">&quot;Hello, world! encrypted using PBE!&quot;</span>;</span><br><span class="line">        <span class="comment">// åŠ å¯†å£ä»¤</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªåŠ å¯†å£ä»¤password hello123456</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String password = <span class="string">&quot;hello12345&quot;</span>;</span><br><span class="line">        <span class="comment">// 16 byteséšæœºSaltï¼š</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬é€šè¿‡SecureRandom.getInstanceStrong().generateSeedç”Ÿæˆä¸€ä¸ªéšæœºsalt</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">byte</span>[] salt = SecureRandom.getInstanceStrong().generateSeed(<span class="number">16</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬æ‰“å°è¿™ä¸ªsalt</span></span><br><span class="line"><span class="comment">         * salt: d4356ec3e5621a8f1f6a7be953b0c31e</span></span><br><span class="line"><span class="comment">         * æˆ‘ä»¬ç”Ÿæˆçš„éšæœºçš„salt</span></span><br><span class="line"><span class="comment">         * 1ä¸ª16å­—èŠ‚çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.printf(<span class="string">&quot;salt: %032x\n&quot;</span>, <span class="keyword">new</span> BigInteger(<span class="number">1</span>, salt));</span><br><span class="line">        <span class="comment">// åŠ å¯†ï¼š</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = message.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç„¶åè°ƒç”¨encryptæ–¹æ³•è¿›è¡ŒåŠ å¯†</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">byte</span>[] encrypted = encrypt(password, salt, data);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * åŠ å¯†ä»¥åçš„å¯†æ–‡æ˜¯ç”¨Base64è¡¨ç¤ºçš„</span></span><br><span class="line"><span class="comment">         * encrypted: 2MnA9wd1IL4n0W3d3nS5dqZ6dj1fcxZI2GJtKKIDYchw1EkodmJeOLIQpUBendR+</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;encrypted: &quot;</span> + Base64.getEncoder().encodeToString(encrypted));</span><br><span class="line">        <span class="comment">// è§£å¯†ï¼š</span></span><br><span class="line">        <span class="keyword">byte</span>[] decrypted = decrypt(password, salt, encrypted);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * è§£å¯†ä»¥åå¾—åˆ°ä¸åŸæ–‡ç›¸åŒçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">         * Hello, world! encrypted using PBE!</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(decrypted, StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-è¸©å‘ï¼š">4.è¸©å‘ï¼š</h2><p>ä»»ä½•å¯¹<code>byte[]</code>çš„ç±»å‹è½¬æ¢éƒ½ä¼šå¯¼è‡´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javax.crypto.BadPaddingException: pad block corrupted</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç›´æ¥å°†byte[]å­˜è¿›æ•°æ®åº“æ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰è§£å†³æ–¹æ¡ˆã€‚</p><p><img src="6.png" alt=""></p><h1>7.BCryptåŠ å¯†</h1><h2 id="ä¸€ã€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°</h2><p>æˆ‘ä»¬å¸¸å¸¸é€šè¿‡ä¸€äº›ä¸å¯é€†çš„ç®—æ³•æ¥ä¿å­˜ç”¨æˆ·çš„å¯†ç ã€‚æ¯”å¦‚ï¼šMD5, SHA1, SHA256, SHA512, SHA-3,ç­‰Hashç®—æ³•ã€‚è¿™äº›ç®—æ³•éƒ½æ˜¯ä¸å¯é€†çš„ã€‚ç³»ç»Ÿåœ¨éªŒè¯ç”¨æˆ·çš„å£ä»¤æ—¶ï¼Œéœ€è¦æŠŠHashåŠ å¯†è¿‡åçš„å£ä»¤ä¸åé¢å­˜æ”¾å£ä»¤çš„æ•°æ®åº“ä¸­çš„å£ä»¤åšæ¯”è¾ƒï¼Œå¦‚æœä¸€è‡´æ‰ç®—éªŒè¯é€šè¿‡ã€‚ä½†ä½ è§‰å¾—è¿™äº›ç®—æ³•å¥½å—ï¼Ÿæˆ‘è¯´çš„æ˜¯ï¼šMD5, SHA1, SHA256, SHA512, SHA-3ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯MD5ç®—æ³•æ¥åŠ å¯†ä½ çš„å£ä»¤ï¼Œå¦‚æœä½ çš„å£ä»¤é•¿åº¦åªæœ‰å°å†™å­—æ¯å†åŠ ä¸Šæ•°å­—ï¼Œå‡è®¾å£ä»¤çš„é•¿åº¦æ˜¯6ä½ï¼Œé‚£ä¹ˆåœ¨ç›®å‰ä¸€å°æ¯”è¾ƒæ–°ä¸€ç‚¹çš„PCæœºä¸Šï¼Œç©·ä¸¾æ‰€æœ‰çš„å£ä»¤åªéœ€è¦40ç§’é’Ÿã€‚è€Œæ®æˆ‘ä»¬äº†è§£ï¼Œå‡ ä¹æœ‰90%ä»¥ä¸Šçš„ç”¨æˆ·åªç”¨å°å†™å­—æ¯å’Œæ•°å­—æ¥ç»„ç»‡å…¶å£ä»¤ã€‚å¯¹äº6ä½é•¿åº¦çš„å¯†ç åªéœ€è¦æœ€å¤š40ç§’å°±å¯ä»¥ç ´è§£äº†ï¼Œè¿™å¯èƒ½ä¼šå“åˆ°ä½ ã€‚å¦‚æœä½ æ„¿æ„èŠ±2000ç¾é‡‘å’Œä¸€å‘¨çš„æ—¶é—´æ¥æ„å»ºä¸€ä¸ªCUDAï¼Œé‚£ä¹ˆï¼Œä½ å¯ä»¥åœ¨ä½ ç»„å»ºçš„è¿™ä¸ªé›†ç¾¤ä¸­ä½¿ç”¨è¿›è¡Œå¯†ç ç©·ä¸¾è¿ç®—ï¼Œå…¶é€Ÿåº¦æ˜¯ï¼Œ1ç§’é’Ÿå¯ä»¥è®¡ç®—7äº¿ä¸ªå£ä»¤ã€‚å¯¹äºç›®å‰å®é™…å½“ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤æ‚çš„å£ä»¤ï¼Œå…¶ç ´è§£ç‡ä¹Ÿå¯ä»¥é«˜è¾¾æ¯ç§’ä¸€ä¸ªã€‚å½“ç„¶ï¼Œè¿™é‡Œè¯´çš„ç®—æ³•æ˜¯MD5ï¼ŒSHAä¹‹ç±»çš„ç®—æ³•ã€‚</p><p>â€‹    é‚£ä¹ˆï¼Œå¯¹äºè¿™æ ·çš„ä¸€ç§æƒ…å†µæ¥è¯´ï¼Œæˆ‘ä»¬æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬è¿˜æ˜¯æœ‰åŠæ³•çš„ã€‚æˆ‘ä»¬çŸ¥é“MD5ï¼ŒSHAçš„ç®—æ³•é€Ÿåº¦å¤ªå¿«äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œæ…¢ä¸€ç‚¹â€çš„åŠ å¯†ç®—æ³•ã€‚<code>BCrypt</code>æ˜¯è¿™æ ·çš„ä¸€ä¸ªç®—æ³•ï¼Œå› ä¸ºå®ƒå¾ˆæ…¢ï¼Œå¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œå…¶æ…¢å¾—æœ‰ç‚¹BTäº†ï¼Œä½†å´æ…¢å¾—åˆšåˆšå¥½ï¼å¯¹äºéªŒè¯ç”¨æˆ·å£ä»¤æ¥è¯´æ˜¯ä¸æ…¢çš„ï¼Œå¯¹äºç©·ä¸¾ç”¨æˆ·å£ä»¤æ¥è¯´ï¼Œå…¶ä¼šè®©é‚£äº›è®¡ç®—æœºå˜å¾—å¦‚åŒèœ—ç‰›ä¸€æ ·ã€‚å› ä¸º<code>BCrypt</code>é‡‡ç”¨äº†ä¸€ç³»åˆ—å„ç§ä¸åŒçš„BlowfishåŠ å¯†ç®—æ³•ï¼Œå¹¶å¼•å…¥äº†ä¸€ä¸ªwork factorï¼Œè¿™ä¸ªå·¥ä½œå› å­å¯ä»¥è®©ä½ å†³å®šè¿™ä¸ªç®—æ³•çš„ä»£ä»·æœ‰å¤šå¤§ã€‚å› ä¸ºè¿™äº›ï¼Œè¿™ä¸ªç®—æ³•ä¸ä¼šå› ä¸ºè®¡ç®—æœºCPUå¤„ç†é€Ÿåº¦å˜å¿«äº†ï¼Œè€Œå¯¼è‡´ç®—æ³•çš„æ—¶é—´ä¼šç¼©çŸ­äº†ã€‚å› ä¸ºï¼Œä½ å¯ä»¥å¢åŠ work factoræ¥æŠŠå…¶æ€§èƒ½é™ä¸‹æ¥ã€‚é‚£ä¹ˆï¼Œ<code>BCrypt</code>åˆ°åº•æœ‰å¤šæ…¢ï¼Ÿå¦‚æœå’ŒMD5ä¸€èµ·æ¥æ¯”è¾ƒçš„è¯ï¼Œå¦‚æœä½¿ç”¨å€¼ä¸º12çš„work factorçš„è¯ï¼Œå¦‚æœåŠ å¯†â€œcoolâ€çš„è¯ï¼Œ<code>BCrypt</code>éœ€è¦0.3ç§’ï¼Œè€ŒMD5åªéœ€è¦ä¸€å¾®ç§’ï¼ˆç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‰é¢æˆ‘ä»¬è¯´çš„é‚£ä¸ªåªéœ€è¦40ç§’å°±å¯ä»¥ç©·ä¸¾å®Œæ‰€æœ‰çš„å¯èƒ½çš„MD5ç¼–ç çš„å£ä»¤çš„ç®—æ³•ï¼Œåœ¨ä½¿ç”¨<code>BCrypt</code>ä¸‹ï¼Œéœ€è¦12å¹´ã€‚è¿™å°±æ˜¯<code>BCrypt</code>ç»™ä½ å¸¦æ¥çš„é€‰æ‹©ï¼Œä½ å¯ä»¥ä¸€ä¸ªå®‰å…¨çš„å£ä»¤å’Œä¸€ä¸ªå¿«é€Ÿçš„åŠ å¯†ç®—æ³•ï¼Œæˆ–æ˜¯ä¸€ä¸ªä¸æ€ä¹ˆå®‰å…¨çš„å£ä»¤å’Œä¸€ä¸ªæ€§èƒ½ä¸å¥½çš„åŠ å¯†ç®—æ³•ã€‚</p><p>â€‹    æ€»è€Œè¨€ä¹‹ï¼Œ<code>BCrypt</code>æ˜¯ä¸€ä¸ªå“ˆå¸Œç®—æ³•ï¼Œä¸€ä¸ªæ˜æ–‡æ˜ å°„å¤šä¸ªå¯†æ–‡ï¼Œä½†æ˜¯ç›¸åŒå¯†æ–‡ä¸åŒå¯†æ–‡æ ¡éªŒå€¼<code>BCrypt.checkpw</code>ä¸€è‡´ï¼›ç›¸æ¯”äºMD5ï¼Œæ›´å®‰å…¨ï¼Œé€Ÿåº¦æ…¢ã€‚</p><h2 id="äºŒã€JAVAå®ç°">äºŒã€JAVAå®ç°</h2><p>è½¬è‡ªï¼š <a href="https://yq.aliyun.com/articles/48942">https://yq.aliyun.com/articles/48942</a></p><p>1.å®˜ç½‘ä¸‹è½½æºç ï¼š<a href="http://www.mindrot.org/projects/jBCrypt/">http://www.mindrot.org/projects/jBCrypt/</a></p><p>2.å°†BCrypt.javaæ‹·è´åˆ°é¡¹ç›®ä¸‹ï¼Œä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> EncryptAndDecrypt;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* BCrypt Javaå®ç°</span></span><br><span class="line"><span class="comment">* BCryptä¹Ÿæ˜¯ä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œç›¸æ¯”MD5æ›´å®‰å…¨ï¼Œé€Ÿåº¦æ…¢</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseBCrypt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>);</span><br><span class="line">        String password=scanner.nextLine();<span class="comment">//æ˜æ–‡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¾…éªŒè¯å¯†ç ï¼š&quot;</span>);</span><br><span class="line">        String candidate=scanner.nextLine();</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ¬¡å“ˆå¸Œä¸€ä¸ªpassword</span></span><br><span class="line">        String hashed = BCrypt.hashpw(password, BCrypt.gensalt());<span class="comment">//å¯†æ–‡</span></span><br><span class="line">        <span class="comment">// gensalt&#x27;s log_rounds parameter determines the complexity</span></span><br><span class="line">        <span class="comment">// the work factor is 2**log_rounds, and the default is 10</span></span><br><span class="line">        String hashed2 = BCrypt.hashpw(password, BCrypt.gensalt(<span class="number">12</span>));</span><br><span class="line">        System.out.println(hashed);</span><br><span class="line">        System.out.println(hashed2);</span><br><span class="line">        <span class="comment">//å¯†ç å¯†æ–‡åŒ¹é…æ£€æµ‹</span></span><br><span class="line">        <span class="keyword">if</span> (BCrypt.checkpw(candidate, hashed))</span><br><span class="line">            System.out.println(<span class="string">&quot;It matches&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            System.out.println(<span class="string">&quot;It does not match&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥å¯†ç ï¼š</span><br><span class="line"><span class="number">123456</span></span><br><span class="line">è¯·è¾“å…¥å¾…éªŒè¯å¯†ç ï¼š</span><br><span class="line"><span class="number">234563</span></span><br><span class="line">$2a$<span class="number">10</span>$RbX30iBRU0/rZtY9itIYF.F7PlqZAkHuYQFDDSE9ESOU9z.i.1gZu</span><br><span class="line">$2a$<span class="number">12</span>$waisaCtTw8EvT/ddNEz1kOFPdIAHHIfPQk0QhOLGSAcgDPjCv5s0K</span><br><span class="line">It does not match</span><br></pre></td></tr></table></figure><h1>8.å¯†ç é‡ç½®çš„ç­–ç•¥ï¼š</h1><p>é¦–å…ˆè¦ç¡®å®šå­¦å·ä¸é‚®ç®±æ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤æ­£ç¡®åå‘é‚®ç®±å‘é€ç¡®è®¤é‚®ä»¶ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç¡®è®¤é‚®ä»¶ä¸­åŒ…å«ä¸€ä¸ªè¿æ¥ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥è¿›è¡Œç¡®è®¤ï¼Œè¿™å°±æ„å‘³ç€ï¼Œè¯¥é“¾æ¥åªèƒ½æ˜¯å•æ¬¡æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”ä¸åŒç”¨æˆ·åº”è¯¥ä¼šè·å–åˆ°ä¸åŒé“¾æ¥ã€‚ä½¿ç”¨çš„ç­–ç•¥å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆï¼Œè¯·æ±‚æ–¹å¼ä½¿ç”¨getè¯·æ±‚ï¼Œå› ä¸ºè®¾è®¡çš„URLä¸­ä¸ä¼šåŒ…å«ä»»ä½•æ•æ„Ÿä¿¡æ¯ã€‚å…¶æ¬¡URLçš„å‚æ•°ä¸­å¿…ç„¶åŒ…å«å­¦å·ç”¨ä»¥ç¡®å®šèº«ä»½ï¼Œç„¶åè¦è§£å†³URLçš„<strong>å”¯ä¸€æ€§ä¸å•æ¬¡æœ‰æ•ˆæ€§</strong>é—®é¢˜ï¼Œæˆ‘é‡‡å–çš„ç­–ç•¥æ˜¯ä½¿ç”¨ä¸€ä¸ª&quot;token&quot;ã€‚</p><p>å…¶æ¬¡ï¼Œæ•°æ®åº“ä¸­ç”¨äºå­˜æ”¾åŠ å¯†åçš„å¯†ç çš„<code>column</code>å«<code>passwordData</code>ï¼Œæˆ‘å¦‚æœæƒ³è¦ç”Ÿæˆä¸€ä¸ªéšæœºçš„ã€å•æ¬¡æœ‰æ•ˆçš„tokenï¼Œåªé éšæœºæ•°è‚¯å®šä¸è¡Œï¼Œï¼ˆä¼—æ‰€å‘¨çŸ¥javaçš„éšæœºæ•°æ˜¯ä¼ªéšæœºï¼‰ï¼Œå—åˆ°ä¸Šé¢PBEä¸ç°å®ä¸­çœŸæ­£éšæœºæ•°çš„äº§ç”Ÿç­–ç•¥çš„å¯å‘ï¼Œæˆ‘çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li><strong>é¦–å…ˆè·å–å½“å‰æ—¶é—´ä¸ç”¨æˆ·å­¦å·æ‹¼æ¥å½¢æˆä¸€ä¸ªå­—ç¬¦ä¸²</strong>ï¼ˆåŠ å­¦å·æ˜¯é˜²æ­¢å¹¶å‘é‡è¿‡å¤§çš„æƒ…å†µä¸‹åŒä¸€æ—¶é—´ç”Ÿæˆå­—ç¬¦ä¸²ç›¸åŒï¼Œå…¶å®ä¹Ÿå¤§å¯ä¸å¿…æ‹…å¿ƒå› ä¸ºä¸‹æ–‡ä¼šä½¿ç”¨éšæœºç›å€¼è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆç›¸åŒåºåˆ—çš„å‡ ç‡å¾®ä¹å…¶å¾®ï¼‰</li><li><strong>è·å–ä¸€ä¸ªéšæœºçš„16ä½saltï¼ˆbyte[])ï¼Œä½¿ç”¨PBEè°ƒç”¨SHA1è¿›è¡ŒåŠ å¯†</strong>ï¼Œç”±äºSHA1æ˜¯å–å“ˆå¸Œçš„éå¯¹ç§°åŠ å¯†ï¼Œä¸”é€Ÿåº¦éå¸¸å¿«ï¼Œå¯ä»¥è®¤ä¸ºå¯¹å¹¶å‘é‡ä¸ä¼šæœ‰å¤ªå¤§å½±å“ã€‚ï¼ˆä½†ä¹Ÿæ­£å› å¦‚æ­¤ç°å®ä¸­åº”è¯¥åŠ ä¸€ä¸ªå†·å´æœŸæ‰å¯¹ï¼‰ã€‚<strong>ç”Ÿæˆçš„Base64åºåˆ—è½¬ä¸ºå­—ç¬¦ä¸²å³æ˜¯æˆ‘è¦çš„&quot;token&quot;ã€‚</strong></li><li><strong>å°†ç”Ÿæˆçš„çš„&quot;token&quot;æ›´æ–°åˆ°è¡¨çš„<code>passwordData</code>ä¸‹</strong>ï¼Œè¿™æ„å‘³ç€è¿™æœŸé—´ç”¨æˆ·å°†ä¸èƒ½ç™»é™†ã€‚å¹¶å°†é‡ç½®å¯†ç çš„URLå‘é€åˆ°ç”¨æˆ·é‚®ç®±ï¼Œ<strong>ç‚¹å‡»URLåæ¯”å¯¹URLä¸­çš„tokenä¸è¯¥å­¦å·ä¸‹çš„<code>passwordData</code>çš„å†…å®¹ï¼Œè‹¥ä¸€è‡´ï¼Œå°†<code>passwordData</code>çš„å†…å®¹æ›¿æ¢ä¸º123456çš„åŠ å¯†åºåˆ—å³å¯</strong>ã€‚è‹¥ä¸ä¸€è‡´ï¼Œå¯èƒ½tokené”™è¯¯æˆ–è€…é‡æ–°è¿›è¡Œäº†é‡ç½®å¯†ç çš„ç”³è¯·ã€‚</li><li>ä»¥ä¸Šè§£å†³äº†å”¯ä¸€æ€§ä¸å•æ¬¡æœ‰æ•ˆæ€§ï¼Œå› ä¸ºtokenåœ¨éªŒè¯å®Œæˆåå°±ä¼šè¢«æŠ¹å»ï¼Œå°±ç®—ç”¨æˆ·å†æ¬¡ç‚¹å‡»é‡ç½®çš„é“¾æ¥ä¹Ÿåªä¼šæ˜¾ç¤º&quot;tokenå·²è¿‡æœŸ&quot;ã€‚</li></ul><h1>9.å‘é€é‚®ä»¶çš„é—®é¢˜ï¼š</h1><p>ä¸Šé¢æåˆ°äº†å‘é€é‚®ä»¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><p>pom.xmlå¼•å…¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring:  </span><br><span class="line">  mail:</span><br><span class="line">    host: smtpåœ°å€</span><br><span class="line">    username: é‚®ç®±åœ°å€å³å¯</span><br><span class="line">    password: å¯†ç æˆ–æˆæƒç </span><br><span class="line">    properties:</span><br><span class="line">      from: é‚®ç®±åœ°å€</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSenderImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MailSender</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">public</span> JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">sendMimeMail</span><span class="params">(String mail)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                MimeMessageHelper messageHelper = <span class="keyword">new</span> MimeMessageHelper(mailSender.createMimeMessage(), <span class="keyword">true</span>);</span><br><span class="line"> messageHelper.setFrom(mailSender.getJavaMailProperties().getProperty(<span class="string">&quot;from&quot;</span>));</span><br><span class="line">                messageHelper.setTo(mail);</span><br><span class="line">                messageHelper.setText(<span class="string">&quot;text&quot;</span>);</span><br><span class="line">                mailSender.send(messageHelper.getMimeMessage());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¯¥æ–¹æ³•çš„æ—¶å€™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">MailSender mailSender;</span><br></pre></td></tr></table></figure><p>ç„¶åè°ƒç”¨æ–¹æ³•å³å¯ã€‚</p><p><a href="https://cloud.tencent.com/developer/article/1598632">è¯¥æ–‡ç« </a>æœ‰å‚è€ƒï¼Œä½†æœ‰å‘ã€‚</p><h1>10.åŠ¨æ€SQLå¼ºå¤§ä¹‹å¤„</h1><h2 id="å‰è¨€">å‰è¨€</h2><p>è¿™æ¬¡åç«¯å¼€å‘ä¸­å¹¶æ²¡æœ‰åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨å®ä½“ç±»ä¸æ•°æ®åº“è¡¨è¿›è¡Œæ˜ å°„ï¼Œä¸€æ–¹é¢ï¼Œè¿™æ¬¡æ•°æ®åº“è¡¨è€¦åˆåº¦æ¯”è¾ƒé«˜ï¼Œæˆ‘é€‰æ‹©äº†å°†æ‰€æœ‰ä¿¡æ¯è€¦åˆåœ¨ä¸€èµ·çš„æ–¹æ³•å‡å°‘å¤šè¡¨è”æŸ¥å¹¶ä¸”ç›´æ¥å–ä»£äº†å¤–é”®ï¼Œè™½ç„¶åœ¨å®é™…åº”ç”¨ä¸­è¿™æ˜¯éå¸¸ä¸å¯å–çš„ï¼ˆé¢‘ç¹åœ°å¯¹åŒä¸€å¼ è¡¨è¿›è¡Œè¯»å†™ä¸ä»…å¯¼è‡´æœåŠ¡å™¨å‹åŠ›å¤§è€Œä¸”åœ¨å¹¶å‘é‡è¾ƒå¤§æ—¶éš¾ä»¥ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼‰è€Œä¸”è¿˜ä¼šå­˜åœ¨å¤§é‡çš„æ•°æ®å†—ä½™å¯¼è‡´ç©ºé—´åˆ©ç”¨ç‡å…¶å®æ˜¯åä½çš„ï¼Œä½†æ˜¯å¥½å¤„ä¹Ÿååˆ†æ˜æ˜¾ï¼Œåœ¨å¤„ç†åç«¯æ—¶å¯ä»¥å¤§å¤§å‡å°‘å¼€å‘çš„å·¥ä½œé‡ï¼Œä½†ä¹Ÿä»…é™äºè¿™ä¸ªå°é¡¹ç›®è€Œå·²ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘éœ€è¦èƒ½ä»ä¸€å¼ æ•°æ®è¡¨ä¸­ç»„è£…å‡ºå¤šä¸ªå®ä½“å¯¹è±¡ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä¸å¯èƒ½ä½¿ç”¨ä¸Šè¿°çš„æ˜ å°„å…³ç³»ã€‚å…¶å®è¿™ç§æŠ‰æ‹©ä¹Ÿæ˜¯å½“ä¸‹å½¢å¼çš„ä¸€ä¸ªç¼©å½±ï¼Œè¿‘å¹´æ¥å¾ˆå¤šäººå¹æ§â€œä½ä»£ç â€è¿™ä¸€æ¦‚å¿µï¼Œå£°ç§°ç”¨å‡ è¡Œä»£ç å°±å¯ä»¥æ„å»ºä¸€ä¸ªæœåŠ¡ï¼Œä½†å…¶å®è¿™ç§ä¾¿æ·æ€§ä¹Ÿä¼šä½¿å¾—è°ƒç”¨è€…ä»˜å‡ºå·¨å¤§çš„ä»£ä»·ï¼Œå°±æ˜¯ä¸å¯é¿å…çš„â€œå¯å®šåˆ¶æ€§â€æˆ–è€…è¯´â€œè‡ªç”±åº¦&quot;çš„é™ä½ï¼Œä¸ä»£ç çš„å°è£…å…¶å®æ˜¯ä¸€ä¸ªé“ç†ï¼Œå¦‚ä½•å–èˆå…¶å®è¿˜æ˜¯è¦çœ‹å¼€å‘éœ€æ±‚ã€‚</p><h2 id="ä¸ªäººæ„Ÿå—">ä¸ªäººæ„Ÿå—</h2><p>ä¸æ˜¯ç‰¹åˆ«æƒ³è®²åŠ¨æ€SQLï¼Œè¿™æ–¹é¢ä¸ªäººæ„Ÿè§‰å®˜ç½‘è®²çš„å·²ç»éå¸¸æ˜ç™½äº†ï¼ˆ<a href="https://mybatis.org/mybatis-3/zh/dynamic-sql.html">ä¼ é€é—¨</a>ï¼‰ï¼Œè¿™é‡Œè¯´ä¸€äº›ä¸ªäººä½¿ç”¨ä½“éªŒã€‚</p><p>ä»¥ä¸‹çº¯å±ä¸ªè§è§£ã€‚</p><h3 id="1-æ¡ä»¶æ€§select">1.æ¡ä»¶æ€§select</h3><p>é¦–å…ˆï¼ŒåŠ¨æ€SQLæ˜¯<code>myBatis</code>æ•´ä¸ªæ¶æ„ä¸­ç‰¹åˆ«é‡è¦çš„ä¸€ç¯ï¼Œå®ƒçš„å‡ºç°å³ç»§æ‰¿äº†SpringBootè‡ªåŠ¨è£…é…ç®€åŒ–å·¥ä½œé‡çš„ä¼˜åŠ¿ï¼Œä¹Ÿè§£å†³äº†SQLæŸ¥è¯¢çš„ä¸€äº›æ‹“å±•æ€§æˆ–è€…è¯´çµæ´»æ€§çš„é—®é¢˜ã€‚MySQLçš„å…³é”®å­—å›ºç„¶æœ‰å¾ˆå¤šï¼Œä½†æ˜¯å…¶å®å¾ˆå¤§ä¸€éƒ¨åˆ†åœ¨åˆçº§ç”šè‡³ä¸­çº§å¼€å‘ä¸­å¾ˆå°‘ç”¨å¾—åˆ°ã€‚ä½†ä¸ä¹‹å¯¹åº”çš„æˆ‘ä»¬åœ¨æŸ¥è¯¢æ—¶å¾€å¾€æœ‰å¤šä¸ªæ¡ä»¶ä¸€èµ·ç”¨äºæŸ¥è¯¢æˆ–è€…åªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ï¼Œä¼ ç»Ÿçš„SQLå¯¹æ­¤æŸæ‰‹æ— ç­–ï¼ˆå¥½åƒï¼‰ï¼Œä»¥è‡³äºè¿™ä¸ªé—®é¢˜ä¸€ç›´è‡­åæ˜­è‘—ï¼Œä½†æ˜¯åˆ©ç”¨åŠ¨æ€SQLçš„<code>if</code>,<code>when</code>ç­‰å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¤§å¤§å‡å°‘æŸ¥è¯¢çš„å·¥ä½œé‡ä¸å¤æ‚åº¦ã€‚</p><h4 id="ä¸€ä¸ªé—®é¢˜">ä¸€ä¸ªé—®é¢˜</h4><p>ä½†å…¶å®è¿™ä¹Ÿä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå®˜ç½‘ä¹Ÿæœ‰æåˆ°ï¼Œå¹¶ç»™å‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p><blockquote><p>å¯¹äºä¸‹é¢çš„SQL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findActiveBlogLike&quot;</span><br><span class="line">     resultType=&quot;Blog&quot;&gt;</span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE</span><br><span class="line">  &lt;if test=&quot;state != null&quot;&gt;</span><br><span class="line">    state = #&#123;state&#125;</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  &lt;if test=&quot;title != null&quot;&gt;</span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">  &lt;if test=&quot;author != null and author.name != null&quot;&gt;</span><br><span class="line">    AND author_name like #&#123;author.name&#125;</span><br><span class="line">  &lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ¡ä»¶ä¼šæ€ä¹ˆæ ·ï¼Ÿæœ€ç»ˆè¿™æ¡ SQL ä¼šå˜æˆè¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG</span><br><span class="line">WHERE</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ã€‚å¦‚æœåŒ¹é…çš„åªæ˜¯ç¬¬äºŒä¸ªæ¡ä»¶åˆä¼šæ€æ ·ï¼Ÿè¿™æ¡ SQL ä¼šæ˜¯è¿™æ ·:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG</span><br><span class="line">WHERE</span><br><span class="line">AND title like â€˜someTitleâ€™</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢ä¹Ÿä¼šå¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜ä¸èƒ½ç®€å•åœ°ç”¨æ¡ä»¶å…ƒç´ æ¥è§£å†³ã€‚è¿™ä¸ªé—®é¢˜æ˜¯å¦‚æ­¤çš„éš¾ä»¥è§£å†³ï¼Œä»¥è‡³äºè§£å†³è¿‡çš„äººä¸ä¼šå†æƒ³ç¢°åˆ°è¿™ç§é—®é¢˜ã€‚</p><p>MyBatis æœ‰ä¸€ä¸ªç®€å•ä¸”é€‚åˆå¤§å¤šæ•°åœºæ™¯çš„è§£å†³åŠæ³•ã€‚è€Œåœ¨å…¶ä»–åœºæ™¯ä¸­ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ä»¥ç¬¦åˆéœ€æ±‚ã€‚è€Œè¿™ï¼Œåªéœ€è¦ä¸€å¤„ç®€å•çš„æ”¹åŠ¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;findActiveBlogLike&quot;</span><br><span class="line">     resultType=&quot;Blog&quot;&gt;</span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  &lt;where&gt;</span><br><span class="line">    &lt;if test=&quot;state != null&quot;&gt;</span><br><span class="line">         state = #&#123;state&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;title != null&quot;&gt;</span><br><span class="line">        AND title like #&#123;title&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot;author != null and author.name != null&quot;&gt;</span><br><span class="line">        AND author_name like #&#123;author.name&#125;</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">  &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p><p><strong>å¦‚æœ <em>where</em> å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ <em>where</em> å…ƒç´ çš„åŠŸèƒ½</strong>ã€‚æ¯”å¦‚ï¼Œå’Œ <em>where</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure><p><em>prefixOverrides</em> å±æ€§ä¼šå¿½ç•¥é€šè¿‡ç®¡é“ç¬¦åˆ†éš”çš„æ–‡æœ¬åºåˆ—ï¼ˆæ³¨æ„æ­¤ä¾‹ä¸­çš„ç©ºæ ¼æ˜¯å¿…è¦çš„ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¼šç§»é™¤æ‰€æœ‰ <em>prefixOverrides</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ä¸”æ’å…¥ <em>prefix</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ã€‚</p><p>ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš <em>set</em>ã€‚<em>set</em> å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt;</span><br><span class="line">  update Author</span><br><span class="line">    &lt;set&gt;</span><br><span class="line">      &lt;if test=&quot;username != null&quot;&gt;username=#&#123;username&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;password != null&quot;&gt;password=#&#123;password&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;email != null&quot;&gt;email=#&#123;email&#125;,&lt;/if&gt;</span><br><span class="line">      &lt;if test=&quot;bio != null&quot;&gt;bio=#&#123;bio&#125;&lt;/if&gt;</span><br><span class="line">    &lt;/set&gt;</span><br><span class="line">  where id=#&#123;id&#125;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p></blockquote><blockquote><p>æ¥çœ‹çœ‹ä¸ <em>set</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ <em>trim</em> å…ƒç´ å§ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦†ç›–äº†åç¼€å€¼è®¾ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰äº†å‰ç¼€å€¼ã€‚</p></blockquote><h3 id="2-foreachéå†">2.foreachéå†</h3><p><code>foreach</code>å¯¹äºjavaæ¥è¯´éå¸¸å¸¸è§çš„ä½†å¯¹äºSQLæ¥è¯´å´å¹¶ä¸ï¼ŒæŒ‰ç…§å®˜ç½‘çš„è¯´æ³•ï¼š</p><blockquote><p><em>foreach</em> å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦</p></blockquote><p>è€Œå°¤å…¶åœ¨INè¯­å¥ä¸­æ˜¯éå¸¸å®ç”¨çš„ï¼Œä¸è¿‡è¿™æ¬¡å¹¶æ²¡æ€ä¹ˆç”¨åˆ°å°±ä¸è¯´å¤ªå¤šäº†ã€‚</p><h1>11.druidä¸Redis</h1>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œçš„å¼‚æ­¥ä¸okhttp</title>
      <link href="/2021/10/27/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%BC%82%E6%AD%A5/"/>
      <url>/2021/10/27/%E7%BD%91%E7%BB%9C%E7%9A%84%E5%BC%82%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<p>å¯¹äºç½‘ç»œè¯·æ±‚ï¼ŒæŒ‰ç…§å¹³å¸¸æˆ‘ä»¬çš„é€»è¾‘å»å†™çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜</p><p><img src="0.png" alt=""></p><p>ä¸ºå•¥ä¼šæ˜¯nullå‘¢ï¼Ÿæœ‰å¾ˆå¤šåŒå­¦æ¥é—®è¿‡ï¼Œæˆ‘ä¹Ÿè·Ÿä»–ä»¬è§£é‡Šè¿‡ï¼Œæ— è®ºæ˜¯å“ªç§ç¨‹åºï¼Œç½‘ç»œè¯·æ±‚çš„æ‰§è¡Œï¼Œä¸€å®šæ˜¯ç‰¹åˆ«è€—æ—¶çš„æ“ä½œï¼ˆç›¸è¾ƒäºæˆ‘ä»¬æ‰§è¡Œå…¶ä»–å¹³å¸¸çš„ç¨‹åºè¯­å¥ï¼‰æ¯•ç«Ÿæ‰“æ¸¸æˆéƒ½è¿˜æœ‰å»¶è¿Ÿå‘¢ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‡ºç°è¿™ç§æƒ…å†µï¼Œè€Œå¦‚æœä½ çš„ç¨‹åºä¸‹ä¸€æ­¥æ°å¥½å¼€å§‹ç›´æ¥å¯¹è·å–çš„JSONObjectè¿›è¡Œè§£æç­‰æ“ä½œï¼Œé‚£ä¹ˆä½ çš„APPä¸€èˆ¬ä¼šç›´æ¥å´©æºƒã€‚</p><p>æ‰€ä»¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä¸€æ–¹é¢ï¼Œæˆ‘ä»¬æ»¡å¯ä»¥è®©ç¨‹åºåœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚çš„æ—¶å€™åœä¸‹ç­‰ç½‘ç»œè¯·æ±‚æ‰§è¡Œå®Œè·å–åˆ°è¿”å›çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åŒæ­¥è¯·æ±‚ï¼Œä½†æ˜¯è°è¦æ˜¯æ•¢è¿™ä¹ˆå¹²ï¼Œç«‹å³æ‰“æ­»ã€‚å¦ä¸€æ–¹é¢ï¼Œå¯ä»¥ç­‰æ•°æ®è¿”å›åå†é‡æ–°åˆ·æ–°ç•Œé¢ï¼Œç›¸å½“äºåœ¨ç½‘ç»œçº¿ç¨‹ä¸­è¿›è¡Œè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬okhttpç”¨çš„<code>.enqueue(callback)</code>æ–¹æ³•ã€‚</p><h2 id="PS">PS</h2><p>ä½†æ˜¯é¦–å…ˆæˆ‘è§‰å¾—æœ‰å¿…è¦è¯´æ˜ç™½<code>OkHttp</code>çš„å¼‚æ­¥æœºåˆ¶ï¼Œæˆ‘è®²è¿‡ï¼Œ<code>OkHttp</code>ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¼€æ–°çº¿ç¨‹ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘ä»¬åœ¨å¼‚æ­¥æ‰§è¡Œä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™å¼€å¯çš„æ–°çº¿ç¨‹ã€‚<strong>æ‰€ä»¥è¯·æ±‚ä¼ å…¥çš„<code>callback</code>å›è°ƒä¸­çš„ä»£ç å…¶å®éƒ½æ˜¯åœ¨è¿™ä¸ªæ–°çº¿ç¨‹é‡Œæ‰§è¡Œçš„</strong>ã€‚è€Œè¿™ä¸ªçº¿ç¨‹ä¼šæœ€ç»ˆæ‹¿åˆ°ç½‘ç»œè¯·æ±‚çš„è¿”å›æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨æ‹¿åˆ°è¿”å›æ•°æ®çš„<code>callback</code>é‡Œæ›´æ–°UIã€‚</p><h1>æœºåˆ¶è§£æ</h1><p>æˆ‘ä¸Šæ¬¡å‘Šè¯‰å¤§å®¶äº†å¯ä»¥ä½¿ç”¨runOnUiThreadï¼ŒAsyncTaskã€Handlerï¼Œè¿™æ¬¡ç»™å¤§å®¶æ±‡æ€»è§£é‡Šä¸€ä¸‹ã€‚</p><h2 id="Handler">Handler</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒAndroidç¨‹åºè¿è¡Œä¼šå¼€å¯ä¸€ä¸ªUIçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ï¼Œç”¨äºå¤„ç†UIäº‹ä»¶ã€‚åªæœ‰åœ¨UIçº¿ç¨‹ä¸­æ‰èƒ½è¿›è¡Œå¯¹UIçš„å„ç§æ“ä½œï¼Œå¦‚æœåœ¨éUIçº¿ç¨‹ä¸­ç›´æ¥å¯¹ç•Œé¢å…ƒç´ è¿›è¡Œæ“ä½œï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å¯¹ä¸è·å–ç½‘ç»œè¯·æ±‚å¹¶æ›´æ–°UIé¡µé¢è¿™æ ·çš„éœ€æ±‚æ¥è¯´åªèƒ½å°†ä»£ç å†™åˆ°UIçº¿ç¨‹ä¸­ï¼Œè¿™æ ·æ‰èƒ½æ›´æ–°UIçº¿ç¨‹ã€‚ä½†æ˜¯å¯¹äºè¿™ç§ç½‘ç»œè¯·æ±‚æˆ–è€…æ˜¯è€—æ—¶çš„å·¥ä½œï¼Œç”±äºæ‰§è¡Œæ—¶é—´çš„ä¸å¯ç¡®å®šæ€§ï¼Œå¯èƒ½ä¼šåœ¨æ‰§è¡Œä»£ç æ—¶é˜»å¡ã€‚è¦æ˜¯å°†è¿™æ ·çš„ä»£ç å†™åˆ°UIä¸»çº¿ç¨‹ä¸­ï¼Œå°±ä¼šé€ æˆANRï¼ˆapplication not respondingï¼Œå¦‚æœUIçº¿ç¨‹é˜»å¡è¶…è¿‡å‡ ç§’ï¼ˆç°åœ¨ä¸€èˆ¬æ˜¯5ç§’ï¼‰ï¼Œç”¨æˆ·å°±ä¼šçœ‹åˆ°åº”ç”¨æ— å“åº”çš„Dialogï¼‰å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºæ— å“åº”ï¼Œå½±å“å®¢æˆ·ä½“éªŒã€‚æ‰€ä»¥è‡ªAndroid 4.0ä¹‹åï¼ŒAndroidå°±ä¸å…è®¸åœ¨ä¸»çº¿ç¨‹ä¸­è®¿é—®ç½‘ç»œï¼Œå¦åˆ™ä¼šæŠ¥<code>NetworkOnMainThreadException</code>å¼‚å¸¸ã€‚è¿™æ—¶å¦ä¸€ä¸ªæ–¹æ³•æ˜¯æ–°å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼Œç”¨äºç½‘ç»œè®¿é—®ï¼Œå¹¶å°†è·å–çš„æ•°æ®å‘é€ç»™ä¸»çº¿ç¨‹ã€‚è€Œå­çº¿ç¨‹å’ŒUIçº¿ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡çš„æœºåˆ¶å°±æ˜¯Handlerã€‚</p><p>è¯´èµ·Handlerï¼Œå°±ä¸å¾—ä¸æ<code>Message</code>ã€<code>MessageQueue</code>ä»¥åŠ<code>Looper</code>ã€‚<br><img src="1.png" alt=""></p><p><code>Handler</code>:å¼‚æ­¥å›è°ƒæœºåˆ¶ã€‚ä½œç”¨å°±æ˜¯åœ¨å­çº¿ç¨‹ä¸­å‘é€æ•°æ®ï¼Œé€šè¿‡<code>sendMessageï¼ˆï¼‰</code>å‘é€æ•°æ®ï¼›åœ¨UIçº¿ç¨‹ä¸­æ¥æ”¶æ•°æ®ï¼Œé€šè¿‡é‡å†™<code>handlerMessage</code>æ–¹æ³•ã€‚å¦‚æœå¸Œæœ›Handleræ­£å¸¸å·¥ä½œ,åœ¨å½“å‰çº¿ç¨‹ä¸­è¦æœ‰ä¸€ä¸ªLooperå¯¹è±¡<br><code>Looper</code>:æ¯ä¸ªçº¿ç¨‹åªèƒ½å¤Ÿæœ‰ä¸€ä¸ªLooper,ç®¡ç†<code>MessageQueue</code>,ä¸æ–­åœ°ä»ä¸­å–å‡ºMessageåˆ†å‘ç»™å¯¹åº”çš„Handlerå¤„ç†ï¼<br><code>MessageQueue</code>:æ¶ˆæ¯é˜Ÿåˆ—,å…ˆè¿›å…ˆå‡ºç®¡ç†Message,åœ¨åˆå§‹åŒ–Looperå¯¹è±¡æ—¶ä¼šåˆ›å»ºä¸€ä¸ªä¸ä¹‹å…³è”çš„<code>MessageQueue</code>;<br><code>Message</code>:<code>Handler</code>æ¥æ”¶ä¸å¤„ç†çš„æ¶ˆæ¯å¯¹è±¡</p><p>é€šä¿—ä¸€ç‚¹è®²ï¼š<strong>å½“æˆ‘ä»¬çš„å­çº¿ç¨‹æƒ³ä¿®æ”¹Activityä¸­çš„UIç»„ä»¶æ—¶,æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ª<code>Handler</code>å¯¹è±¡,é€šè¿‡è¿™ä¸ªå¯¹è±¡å‘ä¸»çº¿ç¨‹å‘é€ä¿¡æ¯;è€Œæˆ‘ä»¬å‘é€çš„ä¿¡æ¯ä¼šå…ˆåˆ°ä¸»çº¿ç¨‹çš„<code>MessageQueue</code>è¿›è¡Œç­‰å¾…,ç”±<code>Looper</code>æŒ‰å…ˆå…¥å…ˆå‡ºé¡ºåºå–å‡º,å†æ ¹æ®messageå¯¹è±¡çš„whatå±æ€§åˆ†å‘ç»™å¯¹åº”çš„æ–¹æ³•æˆ–è€…å‡½æ•°è¿›è¡Œå¤„ç†ï¼</strong></p><p>æ›´å¤šå…³äºè¿™å››è€…ç›´æ¥å…³ç³»ï¼Œå¦‚ä½•è°ƒç”¨çš„å¯ä»¥çœ‹<a href="https://blog.csdn.net/luoyingxing/article/details/86500542?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-1.no_search_link">è¿™ç¯‡åšå®¢</a></p><p>åæ­£æƒ³è¦è¿›è¡Œç½‘ç»œè¿æ¥ï¼Œå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨Handleræœºåˆ¶ï¼Œè·å–åˆ°å­çº¿ç¨‹å‘æ¥çš„æ•°æ®ã€‚æˆ‘ä»¬åœ¨Androidå®šä¹‰ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶ç”¨handleræ›´æ–°UIã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>  //ä¸»ç±»ä¸»çº¿ç¨‹ä»£ç ï¼Œè¿™ä¸ªHandlerè¦ä½œä¸ºç±»å˜é‡ï¼Œä»–è·å–äº†ä¸»çº¿ç¨‹çš„Looper  Handler mHandler = new Handler(Looper.getMainLooper()) &#123;        @Override        public void handleMessage(Message msg) &#123;            super.handleMessage(msg);            switch (msg.what) &#123;                case 1:                    result = JSON.parseObject(msg.getData().getString(&quot;responseData&quot;));                    //ç»§ç»­å¤„ç†UIï¼Œæ¯”å¦‚ï¼š                    getPassword.setText(result.toString());                    break;                default:                    break;            &#125;        &#125;    &#125;;        //callbackä¸­çš„ä»£ç ï¼š        //è·å–ä¸€ä¸ªmessageå¯¹è±¡        message = Message.obtain();        //åˆ›å»ºä¼ é€’ä¿¡æ¯ç”¨çš„bundle        Bundle messageBundle = new Bundle();        //å­˜å…¥ä¿¡æ¯        messageBundle.putString(&quot;responseData&quot;,responseData);        //ç¡®å®šmessageçš„ç¼–å·        message.what = 1;        //å°†bundleæ³¨å…¥message        message.setData(messageBundle);        //å‘é€ä¿¡æ¯        mHandler.sendMessage(message);                //å®Œæ•´ä»£ç ä¼šæ”¾åœ¨æœ€å</code></pre><p>å…¶ä¸­é‡å†™äº†<code>handleMessageï¼ˆMessage msgï¼‰</code>æ–¹æ³•ï¼Œå…¶ä¸­çš„msgå°±æ˜¯å†™å®Œå­çº¿ç¨‹ååœ¨å­çº¿ç¨‹ä¸­handlerçš„<code>sendMessageï¼ˆMessage msgï¼‰</code>æ‰€ä¼ è¿‡æ¥çš„msgä¿¡æ¯ï¼Œ<code>handleMessage</code>æ–¹æ³•ä¸­å°±å¯ä»¥å¯¹UIçº¿ç¨‹è¿›è¡Œæ“ä½œäº†ã€‚</p><p>åˆ›å»º Handler æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><p>1ã€åœ¨æ„é€ å‡½æ•°ä¸­æŒ‡å®š Looperï¼š<br><code>Handler handler = new Handler(Looper looper);</code></p><p>ç°åœ¨ handleræŒ‡å‘äº†æˆ‘ä»¬æä¾›çš„Looperï¼ˆå®é™…ä¸Šæ˜¯ Looper çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</p></li><li><p>2ã€ä½¿ç”¨ç©ºçš„æ„é€ å‡½æ•°ï¼š<br><code>Handler handler = new Handler();</code></p><p>å½“æˆ‘ä»¬ä½¿ç”¨ç©ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼ŒHandler ä¼šè‡ªåŠ¨æŒ‡å‘å’Œå½“å‰çº¿ç¨‹ç»‘å®šçš„ Looperã€‚çœŸæ–¹ä¾¿ï¼</p><p>Handler æä¾›äº†å¾ˆæ–¹ä¾¿çš„æ–¹æ³•ç”¨äºåˆ›å»ºæ¶ˆæ¯å¹¶è‡ªåŠ¨å°†å®ƒä»¬æ·»åŠ åˆ° Looper æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p></li></ul><h2 id="runOnUiThread">runOnUiThread</h2><p>è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§æ–¹æ³•äº†ï¼Œå¯ä»¥æ— è„‘ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">result = JSON.parseObject(responseData);</span><br><span class="line">GetInfo.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">    <span class="comment">//åœ¨è¿™é‡Œæ›´æ–°UIï¼Œæ¯”å¦‚ï¼š</span></span><br><span class="line">     getPassword.setText(result.toString());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ç ´è§£é­”æ³•">ç ´è§£é­”æ³•</h3><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ Activity æºç ä¸­çš„ç›¸å…³éƒ¨åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Handler mHandler = <span class="keyword">new</span> Handler();</span><br><span class="line"><span class="keyword">private</span> Thread mUiThread;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">runOnUiThread</span><span class="params">(Runnable action)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Thread.currentThread() != mUiThread) &#123;</span><br><span class="line">        mHandler.post(action);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         action.run();</span><br><span class="line">     &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬æ£€æŸ¥å½“å‰è¿è¡Œçš„çº¿ç¨‹æ˜¯å¦æ˜¯ä¸»çº¿çº¿ç¨‹ã€‚</p><p>å¦‚æœæ˜¯ä¸»çº¿ç¨‹â€“å¾ˆæ£’ï¼åªéœ€è¦è°ƒç”¨ Runnable çš„ <code>runï¼ˆï¼‰</code> æ–¹æ³•ã€‚</p><p>ä½†æ˜¯å¦‚æœä¸æ˜¯ä¸»çº¿ç¨‹å‘¢ï¼Ÿ</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ <code>mHandler.post()</code> å¹¶å°†æˆ‘ä»¬çš„ Runnable ä¼ é€’è¿‡å»ã€‚ç„¶ååœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p><h3 id="ä¸€åˆ‡éƒ½ä»-Looper-å¼€å§‹">ä¸€åˆ‡éƒ½ä» Looper å¼€å§‹</h3><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java çº¿ç¨‹æ—¶ï¼Œæˆ‘ä»¬é‡å†™å®ƒçš„ <code>run()</code> æ–¹æ³•ã€‚ä¸€ä¸ªç®€å•çš„çº¿ç¨‹å®ç°çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Do stuff...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½å¥½çš„çœ‹ä¸€ä¸‹ <code>run()</code> æ–¹æ³•ï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®Œè¯¥æ–¹æ³•ä¸­æ‰€æœ‰çš„è¯­å¥åï¼Œçº¿ç¨‹å°±å®Œæˆäº†ã€‚ç»“æŸäº†ã€‚æ²¡ç”¨äº†ã€‚</p><p>å¦‚æˆ‘æˆ‘ä»¬æƒ³é‡å¤ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼ˆä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±å°±æ˜¯é¿å…æ–°çº¿ç¨‹åˆ›å»ºä»¥åŠå‡å°‘å†…å­˜æ¶ˆè€—ï¼‰æˆ‘ä»¬å¿…é¡»è®©å®ƒä¿æŒå­˜æ´»çŠ¶æ€å¹¶ä¸”ç­‰å¾…æ¥æ”¶æ–°çš„æŒ‡ä»¤ã€‚ä¸€ä¸ªå¸¸ç”¨çš„æ–¹å¼å°±æ˜¯åœ¨çº¿ç¨‹çš„ <code>run()</code> æ–¹æ³•é‡Œåˆ›å»ºä¸€ä¸ªå¾ªç¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> running;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (running) &#123;</span><br><span class="line">            <span class="comment">// Do stuff...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦ while å¾ªç¯è¿˜åœ¨æ‰§è¡Œï¼ˆå³ <code>run()</code> æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼‰â€“è¿™ä¸ªçº¿ç¨‹å°±ä¿æŒå­˜æ´»çŠ¶æ€ã€‚</p><p><strong>è¿™å°±æ˜¯ Looper æ‰€åšçš„äº‹æƒ…ï¼š</strong></p><p><strong>Looperã€‚å°±æ˜¯ LOOPINGï¼Œå¹¶ä¿æŒå®ƒçš„çº¿ç¨‹å¤„äºå­˜æ´»çŠ¶æ€</strong></p><p>å…³äº Looper ä»¥ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š</p><ul><li><strong>éä¸»çº¿ç¨‹é»˜è®¤æ²¡æœ‰ Looper</strong></li><li>ä½ å¯åˆ›å»ºä¸€ä¸ª Looper å¹¶å°†å®ƒç»‘å®šåˆ°ä¸€ä¸ªçº¿ç¨‹</li><li><strong>æ¯ä¸€ä¸ªçº¿ç¨‹åªèƒ½ç»‘å®šä¸€ä¸ª Looper</strong></li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†çº¿ç¨‹ä¸­çš„ while å¾ªç¯ç”¨ Looper å®ç°æ¥æ›¿æ¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Looper.prepare(); </span><br><span class="line">        Looper.loop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœŸçš„å¾ˆç®€å•ï¼š</p><p>è°ƒç”¨ <code>Lopper.prepare()</code> æ˜¯æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦è¿˜æ²¡æœ‰ç»‘å®š Lopperï¼ˆè®°ä½ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åªèƒ½ç»‘å®šä¸€ä¸ª Looperï¼‰ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª Looper å¹¶å’Œå½“å‰çº¿ç¨‹ç»‘å®šã€‚</p><p>è°ƒç”¨ <code>Looper.loop()</code> è§¦å‘æˆ‘ä»¬çš„ Looper å¼€å§‹å¾ªç¯ã€‚</p><p>æ‰€ä»¥ï¼Œç°åœ¨ Looper å¼€å§‹å¾ªç¯å¹¶ä¿æŒçº¿ç¨‹å¤„äºå­˜æ´»çŠ¶æ€ï¼Œä½†æ˜¯å¦‚æœä¸èƒ½ä¼ é€’æŒ‡ä»¤ã€ä»»åŠ¡æˆ–è€…å…¶ä»–äº‹æƒ…è®©çº¿ç¨‹æ‰§è¡Œå®é™…çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆä¿æŒçº¿ç¨‹å­˜æ´»æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p><p>å¹¸å¥½ï¼ŒLooper ä¸ä»…ä»…æ˜¯å¾ªç¯ã€‚<strong>å½“æˆ‘ä»¬åˆ›å»º Looper çš„æ—¶å€™ï¼Œä¼šä¸€å¹¶åˆ›å»ºä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—</strong>ï¼ˆè®²Handlerçš„æ—¶å€™æåˆ°è¿‡ï¼‰ã€‚è¿™ä¸ªé˜Ÿåˆ—ç§°ä¸ºæ¶ˆæ¯é˜Ÿåˆ—å› ä¸ºå®ƒæŒæœ‰æ¶ˆæ¯ï¼ˆ<strong>Message</strong>ï¼‰å¯¹è±¡ã€‚Looperé…åˆ<code>viewRootImpl</code>è§†å›¾æ ‘çš„handlerå°†æ‰€æœ‰çš„æ¶ˆæ¯è¿½åŠ åˆ°ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—åé¢ï¼Œä¸€ä¸€æ‰§è¡Œã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>post()</code> æ–¹æ³•å°±åˆ›å»ºä¸€æ¡æ¶ˆæ¯å¹¶å°†å®ƒæ·»åŠ åˆ° Looper é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ¶ˆæ¯æŒæœ‰ä¸€ä¸ªä»»åŠ¡ï¼ˆä¸€ä¸ª Runnableï¼‰ï¼Œæˆ‘ä»¬ç®€å•çš„å°† Runnable å¯¹è±¡ä¼ é€’ç»™ <code>post()</code> æ–¹æ³•å°±å¯ä»¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">handler.post(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">// Do stuff...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å¦‚æœä¸Šé¢çš„handlerç”¨postæ–¹æ³•å…¶å®æœ¬è´¨ä¸Šè·ŸrunOnUiThreadæ˜¯å·®ä¸å¤šçš„ã€‚</p><h3 id="å†æ¥çœ‹çœ‹-Activity-çš„æºç ">å†æ¥çœ‹çœ‹ Activity çš„æºç </h3><p>ç°åœ¨æˆ‘ä»¬å†ä»”ç»†çš„çœ‹ä¸€çœ‹<code>runOnUiThread():</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Handler mHandler = <span class="keyword">new</span> Handler();</span><br><span class="line"><span class="keyword">private</span> Thread mUiThread;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">runOnUiThread</span><span class="params">(Runnable  action)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Thread.currentThread() != mUiThread) &#123;</span><br><span class="line">        mHandler.post(action);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         action.run();</span><br><span class="line">     &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**è®°ä½ï¼š**è¿™æ®µä»£ç æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè¿™æ„å‘³ç€ <code>mHandler</code> æŒ‡å‘ä¸»çº¿ç¨‹çš„ Looperã€‚</p><p>æ˜¯çš„ï¼Œ<strong>åº”ç”¨ä¸»çº¿ç¨‹æ˜¯å”¯ä¸€ä¸€ä¸ªé»˜è®¤ç»‘å®šäº† Looper çº¿ç¨‹</strong>ã€‚</p><p>æ‰€ä»¥ã€‚ã€‚ã€‚å½“è¿™ä¸€è¡Œä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mHandler.post(action);</span><br></pre></td></tr></table></figure><p>Handler ä¼šåˆ›å»ºä¸€æ¡æŒæœ‰æˆ‘ä»¬ä¼ å…¥çš„ Runnable çš„æ¶ˆæ¯ï¼Œè¿™æ¡æ¶ˆæ¯éšåè¢«æ·»åŠ åˆ°ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åç­‰å¾… Handler åœ¨å®ƒçš„Looperçº¿ç¨‹ï¼ˆ<strong>ä¸»çº¿ç¨‹</strong>ï¼‰ä¸­æ‰§è¡Œã€‚</p><h2 id="AsyncTask">AsyncTask</h2><p><strong>ä¸å¤ªæƒ³å†™äº†ï¼Œä»¥ä¸‹AsyncTaskè½¬è½½è‡ª[<a href="https://blog.csdn.net/lidew521/article/details/118072359">credreamerçš„è½¬è½½</a></strong></p><p>é€šè¿‡AsyncTaskå¯ä»¥å®ç°</p><ol><li>å®ç°å¤šçº¿ç¨‹<br>åœ¨å·¥ä½œçº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚ è€—æ—¶ä»»åŠ¡</li><li>å¼‚æ­¥é€šä¿¡ã€æ¶ˆæ¯ä¼ é€’<br><strong>å®ç°å·¥ä½œçº¿ç¨‹ &amp; ä¸»çº¿ç¨‹ï¼ˆ<code>UI</code>çº¿ç¨‹ï¼‰ä¹‹é—´çš„é€šä¿¡</strong>ï¼Œå³ï¼šå°†å·¥ä½œçº¿ç¨‹çš„æ‰§è¡Œç»“æœä¼ é€’ç»™ä¸»çº¿ç¨‹ï¼Œä»è€Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œç›¸å…³çš„<code>UI</code>æ“ä½œ,ä»è€Œä¿è¯çº¿ç¨‹å®‰å…¨</li><li>å¯ä»¥çœ‹çœ‹è¿™ä¸ªAsyncTaskç±»</li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">AsyncTask</span>&lt;<span class="title">Params</span>, <span class="title">Progress</span>, <span class="title">Result</span>&gt; &#123; </span><br><span class="line"> ... </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¸­å‚æ•°ä¸º3ç§æ³›å‹ç±»å‹</span></span><br><span class="line"><span class="comment">// æ•´ä½“ä½œç”¨ï¼šæ§åˆ¶AsyncTaskå­ç±»æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡æ—¶å„ä¸ªé˜¶æ®µçš„è¿”å›ç±»å‹</span></span><br><span class="line"><span class="comment">// å…·ä½“è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">// a. Paramsï¼šå¼€å§‹å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼Œå¯¹åº”excuteï¼ˆï¼‰ä¸­ä¼ é€’çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// b. Progressï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿”å›ä¸‹è½½è¿›åº¦å€¼çš„ç±»å‹</span></span><br><span class="line"><span class="comment">// c. Resultï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œè¿”å›çš„ç»“æœç±»å‹ï¼Œä¸doInBackground()çš„è¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="comment">// æ³¨ï¼š</span></span><br><span class="line"><span class="comment">// a. ä½¿ç”¨æ—¶å¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½è¢«ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// b. è‹¥æ— è¢«ä½¿ç”¨ï¼Œå¯ç”¨java.lang.Voidç±»å‹ä»£æ›¿</span></span><br><span class="line"><span class="comment">// c. è‹¥æœ‰ä¸åŒä¸šåŠ¡ï¼Œéœ€é¢å¤–å†å†™1ä¸ªAsyncTaskçš„å­ç±»</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.ä»–æœ‰ä»¥ä¸‹çš„æ–¹æ³•</p><p><img src="2.png" alt=""></p><p>5.ç„¶åè°ƒç”¨é¡ºåºæ˜¯è¿™æ ·çš„:</p><p><img src="3.png" alt=""></p><p>ç„¶åæˆ‘ä»¬å»å†™ä¸€ä¸ªä¾‹å­çœ‹çœ‹</p><p>1.åˆ›å»º <code>AsyncTask</code> å­ç±» &amp; æ ¹æ®éœ€æ±‚å®ç°æ ¸å¿ƒæ–¹æ³•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ­¥éª¤1ï¼šåˆ›å»ºAsyncTaskå­ç±»</span></span><br><span class="line"><span class="comment">  * æ³¨ï¼š </span></span><br><span class="line"><span class="comment">  *   a. ç»§æ‰¿AsyncTaskç±»</span></span><br><span class="line"><span class="comment">  *   b. ä¸º3ä¸ªæ³›å‹å‚æ•°æŒ‡å®šç±»å‹ï¼›è‹¥ä¸ä½¿ç”¨ï¼Œå¯ç”¨java.lang.Voidç±»å‹ä»£æ›¿</span></span><br><span class="line"><span class="comment">  *   c. æ ¹æ®éœ€æ±‚ï¼Œåœ¨AsyncTaskå­ç±»å†…å®ç°æ ¸å¿ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTask</span> <span class="keyword">extends</span> <span class="title">AsyncTask</span>&lt;<span class="title">Params</span>, <span class="title">Progress</span>, <span class="title">Result</span>&gt; </span>&#123;</span><br><span class="line">        ....</span><br><span class="line">      <span class="comment">// æ–¹æ³•1ï¼šonPreExecuteï¼ˆï¼‰</span></span><br><span class="line">      <span class="comment">// ä½œç”¨ï¼šæ‰§è¡Œ çº¿ç¨‹ä»»åŠ¡å‰çš„æ“ä½œ</span></span><br><span class="line">      <span class="comment">// æ³¨ï¼šæ ¹æ®éœ€æ±‚å¤å†™</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onPreExecute</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">           ...</span><br><span class="line">        &#125;</span><br><span class="line">           </span><br><span class="line">      <span class="comment">// æ–¹æ³•2ï¼šdoInBackgroundï¼ˆï¼‰</span></span><br><span class="line">      <span class="comment">// ä½œç”¨ï¼šæ¥æ”¶è¾“å…¥å‚æ•°ã€æ‰§è¡Œä»»åŠ¡ä¸­çš„è€—æ—¶æ“ä½œã€è¿”å› çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">      <span class="comment">// æ³¨ï¼šå¿…é¡»å¤å†™ï¼Œä»è€Œè‡ªå®šä¹‰çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> <span class="built_in">String</span> <span class="function"><span class="title">doInBackground</span>(<span class="params"><span class="built_in">String</span>... params</span>)</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰çš„çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line">            <span class="comment">// å¯è°ƒç”¨publishProgressï¼ˆï¼‰æ˜¾ç¤ºè¿›åº¦, ä¹‹åå°†æ‰§è¡ŒonProgressUpdateï¼ˆï¼‰</span></span><br><span class="line">             publishProgress(count);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ–¹æ³•3ï¼šonProgressUpdateï¼ˆï¼‰</span></span><br><span class="line">      <span class="comment">// ä½œç”¨ï¼šåœ¨ä¸»çº¿ç¨‹ æ˜¾ç¤ºçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œçš„è¿›åº¦</span></span><br><span class="line">      <span class="comment">// æ³¨ï¼šæ ¹æ®éœ€æ±‚å¤å†™</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onProgressUpdate</span>(<span class="params">Integer... progresses</span>)</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ–¹æ³•4ï¼šonPostExecuteï¼ˆï¼‰</span></span><br><span class="line">      <span class="comment">// ä½œç”¨ï¼šæ¥æ”¶çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œç»“æœã€å°†æ‰§è¡Œç»“æœæ˜¾ç¤ºåˆ°UIç»„ä»¶</span></span><br><span class="line">      <span class="comment">// æ³¨ï¼šå¿…é¡»å¤å†™ï¼Œä»è€Œè‡ªå®šä¹‰UIæ“ä½œ</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onPostExecute</span>(<span class="params"><span class="built_in">String</span> result</span>)</span> &#123;</span><br><span class="line">         ...</span><br><span class="line">         <span class="comment">// UIæ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ–¹æ³•5ï¼šonCancelled()</span></span><br><span class="line">      <span class="comment">// ä½œç”¨ï¼šå°†å¼‚æ­¥ä»»åŠ¡è®¾ç½®ä¸ºï¼šå–æ¶ˆçŠ¶æ€</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onCancelled</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ­¥éª¤2ï¼šåˆ›å»ºAsyncTaskå­ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆå³ ä»»åŠ¡å®ä¾‹ï¼‰</span></span><br><span class="line"><span class="comment">  * æ³¨ï¼šAsyncTaskå­ç±»çš„å®ä¾‹å¿…é¡»åœ¨UIçº¿ç¨‹ä¸­åˆ›å»º</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">          </span><br><span class="line">  MyTask mTask = <span class="keyword">new</span> MyTask();</span><br><span class="line">          </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ­¥éª¤3ï¼šæ‰‹åŠ¨è°ƒç”¨execute(Params... params) ä»è€Œæ‰§è¡Œå¼‚æ­¥çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line"><span class="comment">  * æ³¨ï¼š</span></span><br><span class="line"><span class="comment">  *    a. å¿…é¡»åœ¨UIçº¿ç¨‹ä¸­è°ƒç”¨</span></span><br><span class="line"><span class="comment">  *    b. åŒä¸€ä¸ªAsyncTaskå®ä¾‹å¯¹è±¡åªèƒ½æ‰§è¡Œ1æ¬¡ï¼Œè‹¥æ‰§è¡Œç¬¬2æ¬¡å°†ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">  *    c. æ‰§è¡Œä»»åŠ¡ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨AsyncTaskçš„ä¸€ç³»åˆ—æ–¹æ³•ï¼šonPreExecute() ã€doInBackground()ã€onProgressUpdate() ã€onPostExecute() </span></span><br><span class="line"><span class="comment">  *    d. ä¸èƒ½æ‰‹åŠ¨è°ƒç”¨ä¸Šè¿°æ–¹æ³•</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  mTask.execute()ï¼›</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»º <code>AsyncTask</code>å­ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆå³ ä»»åŠ¡å®ä¾‹ï¼‰</li><li>æ‰‹åŠ¨è°ƒç”¨<code>execute(ï¼ˆï¼‰</code>ä»è€Œæ‰§è¡Œå¼‚æ­¥çº¿ç¨‹ä»»åŠ¡</li></ol><p>3.ä¸Šé¢æ˜¯ä»‹ç»,ç„¶åæˆ‘ä»¬å†å»å†™ä¸ªä¾‹å­å»çœ‹çœ‹:</p><h3 id="6-å®ä¾‹è®²è§£">6. å®ä¾‹è®²è§£</h3><p>ä¸‹é¢ï¼Œæˆ‘å°†ç”¨1ä¸ªå®ä¾‹è®²è§£ å…·ä½“å¦‚ä½•ä½¿ç”¨ <code>AsyncTask</code></p><h4 id="6-1-å®ä¾‹è¯´æ˜">6.1 å®ä¾‹è¯´æ˜</h4><ol><li>ç‚¹å‡»æŒ‰é’® åˆ™ å¼€å¯çº¿ç¨‹æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡</li><li>æ˜¾ç¤ºåå°åŠ è½½è¿›åº¦</li><li>åŠ è½½å®Œæ¯•åæ›´æ–°UIç»„ä»¶</li><li>æœŸé—´è‹¥ç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œåˆ™å–æ¶ˆåŠ è½½</li></ol><p>å¦‚ä¸‹å›¾</p><p><img src="4.gif" alt="img"></p><h4 id="6-2-å…·ä½“å®ç°">6.2 å…·ä½“å®ç°</h4><blockquote><p>å»ºè®®å…ˆä¸‹è½½æºç å†çœ‹ï¼š<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2FCarson-Ho%2FMultiThread_learning">Carson_Hoçš„Githubåœ°å€ï¼šAsyncTask</a></p></blockquote><ul><li>ä¸»å¸ƒå±€æ–‡ä»¶ï¼š<em>activity_main.xml</em></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.example.carson_ho.handler_learning.MainActivity&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;ç‚¹æˆ‘åŠ è½½&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@+id/button&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;è¿˜æ²¡å¼€å§‹åŠ è½½!&quot;</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@+id/text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/progress_bar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;fill_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:progress</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:max</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;?android:attr/progressBarStyleHorizontal&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@+id/progress_bar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cancel&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;cancel&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä¸»é€»è¾‘ä»£ç æ–‡ä»¶ï¼š<em>MainActivity.java</em></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// çº¿ç¨‹å˜é‡</span></span><br><span class="line">    MyTask mTask;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ä¸»å¸ƒå±€ä¸­çš„UIç»„ä»¶</span></span><br><span class="line">    Button button,cancel; <span class="comment">// åŠ è½½ã€å–æ¶ˆæŒ‰é’®</span></span><br><span class="line">    TextView text; <span class="comment">// æ›´æ–°çš„UIç»„ä»¶</span></span><br><span class="line">    ProgressBar progressBar; <span class="comment">// è¿›åº¦æ¡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­¥éª¤1ï¼šåˆ›å»ºAsyncTaskå­ç±»</span></span><br><span class="line"><span class="comment">     * æ³¨ï¼š</span></span><br><span class="line"><span class="comment">     *   a. ç»§æ‰¿AsyncTaskç±»</span></span><br><span class="line"><span class="comment">     *   b. ä¸º3ä¸ªæ³›å‹å‚æ•°æŒ‡å®šç±»å‹ï¼›è‹¥ä¸ä½¿ç”¨ï¼Œå¯ç”¨java.lang.Voidç±»å‹ä»£æ›¿</span></span><br><span class="line"><span class="comment">     *      æ­¤å¤„æŒ‡å®šä¸ºï¼šè¾“å…¥å‚æ•° = Stringç±»å‹ã€æ‰§è¡Œè¿›åº¦ = Integerç±»å‹ã€æ‰§è¡Œç»“æœ = Stringç±»å‹</span></span><br><span class="line"><span class="comment">     *   c. æ ¹æ®éœ€æ±‚ï¼Œåœ¨AsyncTaskå­ç±»å†…å®ç°æ ¸å¿ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTask</span> <span class="keyword">extends</span> <span class="title">AsyncTask</span>&lt;<span class="title">String</span>, <span class="title">Integer</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–¹æ³•1ï¼šonPreExecuteï¼ˆï¼‰</span></span><br><span class="line">        <span class="comment">// ä½œç”¨ï¼šæ‰§è¡Œ çº¿ç¨‹ä»»åŠ¡å‰çš„æ“ä½œ</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onPreExecute</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            text.setText(<span class="string">&quot;åŠ è½½ä¸­&quot;</span>);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œå‰æ˜¾ç¤ºæç¤º</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–¹æ³•2ï¼šdoInBackgroundï¼ˆï¼‰</span></span><br><span class="line">        <span class="comment">// ä½œç”¨ï¼šæ¥æ”¶è¾“å…¥å‚æ•°ã€æ‰§è¡Œä»»åŠ¡ä¸­çš„è€—æ—¶æ“ä½œã€è¿”å› çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">        <span class="comment">// æ­¤å¤„é€šè¿‡è®¡ç®—ä»è€Œæ¨¡æ‹Ÿâ€œåŠ è½½è¿›åº¦â€çš„æƒ…å†µ</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">String</span> <span class="function"><span class="title">doInBackground</span>(<span class="params"><span class="built_in">String</span>... params</span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                int count = <span class="number">0</span>;</span><br><span class="line">                int length = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> (count&lt;<span class="number">99</span>) &#123;</span><br><span class="line"> </span><br><span class="line">                    count += length;</span><br><span class="line">                    <span class="comment">// å¯è°ƒç”¨publishProgressï¼ˆï¼‰æ˜¾ç¤ºè¿›åº¦, ä¹‹åå°†æ‰§è¡ŒonProgressUpdateï¼ˆï¼‰</span></span><br><span class="line">                    publishProgress(count);</span><br><span class="line">                    <span class="comment">// æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡</span></span><br><span class="line">                    Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–¹æ³•3ï¼šonProgressUpdateï¼ˆï¼‰</span></span><br><span class="line">        <span class="comment">// ä½œç”¨ï¼šåœ¨ä¸»çº¿ç¨‹ æ˜¾ç¤ºçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œçš„è¿›åº¦</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onProgressUpdate</span>(<span class="params">Integer... progresses</span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">            progressBar.setProgress(progresses[<span class="number">0</span>]);</span><br><span class="line">            text.setText(<span class="string">&quot;loading...&quot;</span> + progresses[<span class="number">0</span>] + <span class="string">&quot;%&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–¹æ³•4ï¼šonPostExecuteï¼ˆï¼‰</span></span><br><span class="line">        <span class="comment">// ä½œç”¨ï¼šæ¥æ”¶çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œç»“æœã€å°†æ‰§è¡Œç»“æœæ˜¾ç¤ºåˆ°UIç»„ä»¶</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onPostExecute</span>(<span class="params"><span class="built_in">String</span> result</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡Œå®Œæ¯•åï¼Œåˆ™æ›´æ–°UI</span></span><br><span class="line">            text.setText(<span class="string">&quot;åŠ è½½å®Œæ¯•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ–¹æ³•5ï¼šonCancelled()</span></span><br><span class="line">        <span class="comment">// ä½œç”¨ï¼šå°†å¼‚æ­¥ä»»åŠ¡è®¾ç½®ä¸ºï¼šå–æ¶ˆçŠ¶æ€</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onCancelled</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">            text.setText(<span class="string">&quot;å·²å–æ¶ˆ&quot;</span>);</span><br><span class="line">            progressBar.setProgress(<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onCreate</span>(<span class="params">Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// ç»‘å®šUIç»„ä»¶</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"> </span><br><span class="line">        button = (Button) findViewById(R.id.button);</span><br><span class="line">        cancel = (Button) findViewById(R.id.cancel);</span><br><span class="line">        text = (TextView) findViewById(R.id.text);</span><br><span class="line">        progressBar = (ProgressBar) findViewById(R.id.progress_bar);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ­¥éª¤2ï¼šåˆ›å»ºAsyncTaskå­ç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆå³ ä»»åŠ¡å®ä¾‹ï¼‰</span></span><br><span class="line"><span class="comment">         * æ³¨ï¼šAsyncTaskå­ç±»çš„å®ä¾‹å¿…é¡»åœ¨UIçº¿ç¨‹ä¸­åˆ›å»º</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        mTask = <span class="keyword">new</span> MyTask();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// åŠ è½½æŒ‰é’®æŒ‰æŒ‰ä¸‹æ—¶ï¼Œåˆ™å¯åŠ¨AsyncTask</span></span><br><span class="line">        <span class="comment">// ä»»åŠ¡å®Œæˆåæ›´æ–°TextViewçš„æ–‡æœ¬</span></span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onClick</span>(<span class="params">View v</span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * æ­¥éª¤3ï¼šæ‰‹åŠ¨è°ƒç”¨execute(Params... params) ä»è€Œæ‰§è¡Œå¼‚æ­¥çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line"><span class="comment">                 * æ³¨ï¼š</span></span><br><span class="line"><span class="comment">                 *    a. å¿…é¡»åœ¨UIçº¿ç¨‹ä¸­è°ƒç”¨</span></span><br><span class="line"><span class="comment">                 *    b. åŒä¸€ä¸ªAsyncTaskå®ä¾‹å¯¹è±¡åªèƒ½æ‰§è¡Œ1æ¬¡ï¼Œè‹¥æ‰§è¡Œç¬¬2æ¬¡å°†ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">                 *    c. æ‰§è¡Œä»»åŠ¡ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨AsyncTaskçš„ä¸€ç³»åˆ—æ–¹æ³•ï¼šonPreExecute() ã€doInBackground()ã€onProgressUpdate() ã€onPostExecute()</span></span><br><span class="line"><span class="comment">                 *    d. ä¸èƒ½æ‰‹åŠ¨è°ƒç”¨ä¸Šè¿°æ–¹æ³•</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                mTask.execute();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        cancel = (Button) findViewById(R.id.cancel);</span><br><span class="line">        cancel.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onClick</span>(<span class="params">View v</span>)</span> &#123;</span><br><span class="line">                <span class="comment">// å–æ¶ˆä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡,onCancelledæ–¹æ³•å°†ä¼šè¢«è°ƒç”¨</span></span><br><span class="line">                mTask.cancel(<span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ä»£ç </h1><h2 id="æˆ‘çš„httpUtil">æˆ‘çš„<code>httpUtil</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> JSONObject object;</span><br><span class="line">    Callback callback = <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="comment">//è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line">            String responseData = response.body().string();</span><br><span class="line">            <span class="comment">//å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line">            object = JSON.parseObject(responseData);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendGet</span><span class="params">(String address, okhttp3.Callback callback)</span> </span>&#123;</span><br><span class="line">        OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">        Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">                .url(address)</span><br><span class="line">                .get()</span><br><span class="line">                .build();</span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendPost</span><span class="params">(String address, okhttp3.Callback callback,RequestBody body)</span> </span>&#123;</span><br><span class="line">                OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">        Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">                .url(address)</span><br><span class="line">                .post(body)</span><br><span class="line">                .build();</span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">OKHttpWithCallBack</span><span class="params">(<span class="keyword">boolean</span> isGet,String address,Callback callback,RequestBody body)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isGet)&#123;</span><br><span class="line">            sendGet(address,callback);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            sendPost(address,callback,body);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span>  JSONObject <span class="title">OKHttpWithoutCallBack</span><span class="params">(<span class="keyword">boolean</span> isGet,String address, RequestBody body)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isGet)&#123;</span><br><span class="line">            sendGet(address,callback);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            sendPost(address,callback,body);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bodyçš„å†™æ³•ï¼š</p><p><a href="https://www.jianshu.com/p/ca8a982a116b">https://www.jianshu.com/p/ca8a982a116b</a></p><h2 id="Handlerä»£ç ï¼š">Handlerä»£ç ï¼š</h2><p>java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetInfo</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span>  </span>&#123;</span><br><span class="line">    HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    TextView getAccount;</span><br><span class="line">    TextView getPassword;</span><br><span class="line">    EditText textUsername;</span><br><span class="line">    Button buttonGetInfo;</span><br><span class="line">    Button buttonIntent;</span><br><span class="line">    JSONObject result;</span><br><span class="line">    Message message;</span><br><span class="line"></span><br><span class="line">    Handler mHandler = <span class="keyword">new</span> Handler(Looper.getMainLooper()) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">            <span class="keyword">switch</span> (msg.what) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="comment">//æ›´æ–° TextView UI</span></span><br><span class="line">                    result = JSON.parseObject(msg.getData().getString(<span class="string">&quot;responseData&quot;</span>));</span><br><span class="line">                    <span class="comment">//ç»§ç»­å¤„ç†UI</span></span><br><span class="line">                    System.out.println();</span><br><span class="line">                    getPassword.setText(result.toString());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_get_info);</span><br><span class="line">        getAccount = findViewById(R.id.account_text);</span><br><span class="line">        getPassword = findViewById(R.id.password_text);</span><br><span class="line">        textUsername = findViewById(R.id.text_username);</span><br><span class="line">        buttonGetInfo = findViewById(R.id.button_get_info);</span><br><span class="line">        buttonIntent = findViewById(R.id.button_intent2);</span><br><span class="line"></span><br><span class="line">        buttonGetInfo.setOnClickListener(view -&gt; &#123;</span><br><span class="line">            getInfo();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">     httpUtil.OKHttpWithCallBack(</span><br><span class="line">             <span class="keyword">true</span>,</span><br><span class="line">             <span class="string">&quot;http://82.156.169.66:8181/user/login?account=1234&amp;password=1234&quot;</span>,</span><br><span class="line">             callback,</span><br><span class="line">             <span class="keyword">null</span></span><br><span class="line">             );</span><br><span class="line">    &#125;</span><br><span class="line">    Callback callback = <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="comment">//è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line">            String responseData = response.body().string();</span><br><span class="line">            <span class="comment">//å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line">            <span class="keyword">if</span> (responseData != <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">              message = Message.obtain();</span><br><span class="line">              Bundle messageBundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">              messageBundle.putString(<span class="string">&quot;responseData&quot;</span>,responseData);</span><br><span class="line">              message.what = <span class="number">1</span>;</span><br><span class="line">              message.setData(messageBundle);</span><br><span class="line">              mHandler.sendMessage(message);</span><br><span class="line"></span><br><span class="line">             Log.i(<span class="string">&quot;success&quot;</span>, responseData.toString());</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                Log.e(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;onResponse: &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.GetInfo&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/get_account_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/get_info_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;54dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/text_username&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;256dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;12dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/edittext_selector&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;ç”¨æˆ·å&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;16sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/account_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;44dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/password_text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;14dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/button_get_info&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;è·å–&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;90dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@color/blue&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/button_intent2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;è·³è½¬&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">&quot;8dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;18sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@color/blue&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="runOnUiThreadä»£ç ï¼š">runOnUiThreadä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetInfo</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span>  </span>&#123;</span><br><span class="line">    HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    TextView getAccount;</span><br><span class="line">    TextView getPassword;</span><br><span class="line">    EditText textUsername;</span><br><span class="line">    Button buttonGetInfo;</span><br><span class="line">    Button buttonIntent;</span><br><span class="line">    JSONObject result;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_get_info);</span><br><span class="line">        getAccount = findViewById(R.id.account_text);</span><br><span class="line">        getPassword = findViewById(R.id.password_text);</span><br><span class="line">        textUsername = findViewById(R.id.text_username);</span><br><span class="line">        buttonGetInfo = findViewById(R.id.button_get_info);</span><br><span class="line">        buttonIntent = findViewById(R.id.button_intent2);</span><br><span class="line"></span><br><span class="line">        buttonGetInfo.setOnClickListener(view -&gt; &#123;</span><br><span class="line">            getInfo();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">     httpUtil.OKHttpWithCallBack(</span><br><span class="line">             <span class="keyword">true</span>,</span><br><span class="line">             <span class="string">&quot;http://82.156.169.66:8181/user/login?account=1234&amp;password=1234&quot;</span>,</span><br><span class="line">             callback,</span><br><span class="line">             <span class="keyword">null</span></span><br><span class="line">             );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Callback callback = <span class="keyword">new</span> Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="comment">//è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line">            String responseData = response.body().string();</span><br><span class="line">            <span class="comment">//å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line">            <span class="keyword">if</span> (responseData != <span class="keyword">null</span>)&#123;</span><br><span class="line">                </span><br><span class="line">                result = JSON.parseObject(responseData);</span><br><span class="line">                GetInfo.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                    getPassword.setText(result.toString());</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">             Log.i(<span class="string">&quot;success&quot;</span>, responseData.toString());</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                Log.e(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;onResponse: &quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®‰å“åŸç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„2021åä¸ºå¼€å‘è€…å¤§ä¼š</title>
      <link href="/2021/10/24/%E6%88%91%E7%9A%842021%E5%8D%8E%E4%B8%BA%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9A/"/>
      <url>/2021/10/24/%E6%88%91%E7%9A%842021%E5%8D%8E%E4%B8%BA%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9A/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>æœ‰ä¸€è¯´ä¸€çœŸçš„æ²¡æœ‰æƒ³åˆ°ä»Šå¹´èƒ½æœ‰æœºä¼šå‚åŠ è¿™æ¬¡ç››ä¼šï¼ŒçœŸçš„æ˜¯æƒŠå–œã€‚</p><p><img src="0.jpg" alt=""></p><p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œä¸€åå®‰å“å¼€å‘è€…ï¼Œä¸€åèµ„æ·±ï¼ˆå¤§æ¦‚ï¼‰èŠ±ç²‰çš„å®‰å“å¼€å‘è€…ï¼Œèƒ½å¤Ÿæ¥åˆ°åä¸ºåœ¨ä¸œèçš„å°é•‡çœŸçš„æ˜¯ä¸‡åˆ†è£å¹¸ã€‚</p><p>æ¥ä¹‹å‰ä¹Ÿæƒ³è¿‡å¥½å¤šï¼Œå¯¹æœªæ¥çš„è§„åˆ’ä¹Ÿå¥½ï¼Œå¯¹çŸ¥è¯†çš„æœŸè®¸ä¹Ÿç½¢ï¼Œå…¶å®éƒ½æ˜¯æ»¡æ»¡çš„æœŸå¾…ç½¢äº†ã€‚</p><h1>å†ç¨‹</h1><h2 id="The-first-day">The first day</h2><p>é£æœºåŠ å…¥ä½æ‰‹ç»­ï¼Œè™½ç„¶æœ‰äº›ç¹çï¼Œä½†æ˜¯ç–«æƒ…ä¹‹ä¸‹è¿˜æ˜¯è¦ä¿æŠ¤å¥½è‡ªå·±ã€‚</p><img src="1.jpg" style="zoom:50%;" /><p>åœ¨é…’åº—é‡Œä½“éªŒäº†ä¸€æŠŠæ™ºèƒ½å®¶å±…ï¼ŒçœŸçš„æ„Ÿå—åˆ°äº†ä¸‡ç‰©äº’è”çš„ä¸€äº›é­…åŠ›ä¸ä¾¿æ·ã€‚</p><h2 id="The-second-day">The second day</h2><p>ä¸€å¤§æ—©èµ·åºŠæ¥åˆ°ä¸‰ä¸«å¡ç­¾åˆ°ï¼Œè™½ç„¶æœ‰äº›è¿·ç³Šä½†è¿˜æ˜¯å¾ˆæ¿€åŠ¨ã€‚</p><img src="2.jpg" style="zoom:15%;" /><p>è¿›å…¥æ´»åŠ¨ä¼šåœºï¼ˆå¥½å¤§ï¼‰</p><img src="5.jpg" style="zoom:50%;" /><img src="4.jpeg" style="zoom:33%;" /><p>ç„¶åå°±è·Ÿå¤§ä½¬ä»¬ä¸€èµ·å»åšcodelabsï¼Œä¸Šæ‰‹ä½“éªŒåä¸ºå„ç§å¼€æ”¾èƒ½åŠ›çš„å¼€å‘ã€‚å…¶å®æ„Ÿè§‰codelabè¿˜æ˜¯è›®ç®€å•çš„ï¼Œä¸è¿‡ç¬¬ä¸€å¤©ä¸å¤ªç†Ÿæ‚‰ï¼Œåƒä¸ªæ²¡å¤´è‹è‡ä¸€æ ·ä¹±æ’ï¼Œä½“éªŒåˆ°äº†ä¸€äº›è‡ªå·±æ„Ÿå…´è¶£çš„èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯ä¸€äº›æˆ‘æ¯”è¾ƒç†Ÿæ‚‰çš„HMSç›¸å…³æœåŠ¡ï¼Œä¸è¿‡ä¹ŸæŒ‘æˆ˜äº†ç‰¹åˆ«å¤šå‡ ä¹æ²¡æœ‰æ¥è§¦è¿‡çš„çŸ¥è¯†ï¼Œæ¯”å¦‚3Då»ºæ¨¡èƒ½åŠ›ï¼Œsenseæ¸²æŸ“èƒ½åŠ›ï¼ŒHIAIå¼€æ”¾èƒ½åŠ›ï¼Œç”šè‡³ç°å­¦åä¸ºæ¨å‡ºçš„eTSï¼ˆextended TypeScriptï¼‰è¯­è¨€ç„¶åç°å–ï¼ˆæŒ‡ä¿®bugï¼‰ï¼Œäº†è§£äº†ä¸€äº›å‰ç«¯çš„æœ€æ–°çš„å¼€å‘è§„èŒƒï¼Œç”šè‡³å—ç°åœºçš„ä¸€ä½è€å¸ˆé‚€è¯·å½“äº†ä¸€æ³¢ç‰¹é‚€è§‚ä¼—ï¼Œå¬äº†ä»–å¯¹é¸¿è’™å¼€å‘çš„æ¼”è¿›è¿‡ç¨‹çš„åˆ†æä»¥åŠç°é˜¶æ®µé¸¿è’™çš„ä¼˜åŠ¿ï¼Œå…¶ä¸­çš„æ€æƒ³çœŸçš„å€¼å¾—æˆ‘æ€è€ƒã€‚</p><p>eTSç¡®å®ç”¨æ›´å°‘çš„ä»£ç ï¼Œæ›´ä½çš„é—¨æ§›ï¼Œè§£å†³äº†ä¼ ç»Ÿå®‰å“å‘½ä»¤å¼ä»£ç çš„è®¸å¤šé—®é¢˜ï¼Œè€Œä¸”è€¦åˆåº¦ä¹Ÿæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚å®‰å“åŸç”Ÿå¼€å‘çš„å‘½ä»¤å¼ä»£ç ä¸è§†å›¾è·Ÿé€»è¾‘åˆ†ç¦»çš„æ€æƒ³å›ºç„¶æ˜¯å¥½ï¼Œä½†åŒæ—¶é€ æˆäº†å¤§é‡ä»£ç å†—ä½™å’Œæ›´å¤æ‚çš„ä»£ç ç»“æ„ï¼Œè€ŒeTSçš„å£°æ˜å¼ç¼–ç¨‹åˆ™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p><img src="3.jpg" style="zoom:33%;" /><p>codelabï¼š</p><img src="9.jpeg" style="zoom:40%;" /><p>åšçš„æ˜¯HMSçš„è´¦å·æœåŠ¡ï¼Œæˆ‘ä¸€è¯´è¿™ä¸ªæˆ‘åšè¿‡ç»“æœå¼•æ¥äº†ä¸‰ä½è€å¸ˆæ¥æŒ‡å¯¼è®²è§£ï¼ˆé›¾ï¼‰</p><p><img src="10.jpeg" alt=""></p><p>ç„¶åè¿˜é¢†åˆ°äº†è¯ä¹¦ï¼Œå“å˜¿å˜¿ï¼Œæ„Ÿè§‰è¿™å¼ ç…§ç‰‡ç…§çš„æŒºå¥½çš„ï¼Œå°±æ”¾ä¸Šå§ã€‚</p><p>ä¸­åˆè·Ÿå¤§å®¶ä¸€èµ·åƒäº†é¥­ï¼Œä¸‹åˆå¤§å®¶å¬äº†å…¬å¸HRç­‰å¤§ä½¬çš„ä¸€äº›è®²åº§ï¼Œè¿˜å¾ˆè£å¹¸åœ°åœ¨ç°åœºé¢†åˆ°äº†å¸ƒé“å¸ˆè¯ä¹¦å’Œå¥–æ¯ï¼Œå¹¶ä¸”æ¥å—äº†é‡‡è®¿ï¼Œ2333ã€‚</p><p><img src="7.jpg" alt=""></p><p>æ˜Ÿå…‰ä¸è´Ÿèµ¶è·¯äººï¼Œæ„¿æºæ‰‹å‰è¡Œã€‚</p><p><img src="8.jpg" alt=""></p><p><img src="6.jpg" alt=""></p><p>æ™šä¸Šå¤§å®¶ä¸€èµ·èšé¤ï¼ŒèŠå¾—ç‰¹åˆ«å¼€å¿ƒï¼Œï¼ˆå°åŠ©æ‰‹ç–¯ç‹‚è¾“å‡ºï¼‰ï¼Œä¸è¿‡æ²¡æœ‰ç•™ç…§ç‰‡ï¼Œå°±ä¸æ”¾äº†ï¼Œ2333ã€‚</p><h2 id="The-Third-day">The Third day</h2><p>ç¬¬ä¸‰å¤©å¤§å®¶ä¸€èµ·æ‹äº†å¾ˆå¤šç…§ç‰‡ï¼ˆå½“ç„¶ç¬¬äºŒå¤©ä¹Ÿæ‹äº†å¾ˆå¤šï¼‰æˆ‘å°±ä¸€èµ·æ”¾å‡ å¼ å§</p><p><img src="11.jpeg" alt=""></p><p><img src="12.jpeg" alt=""></p><p><img src="13.jpeg" alt=""></p><p>æ‹äº†ç…§å»åšäº†ä¸€ä¼šå„¿codelabï¼Œé¡ºåˆ©äº†å¾ˆå¤šï¼Œä½“éªŒäº†å¾ˆå¤šæƒ³ä½“éªŒçš„æœåŠ¡ï¼Œè™½ç„¶åªåšäº†ä¸€ä¸ªå°æ—¶å°±å»å¬é¸¿è’™å…¬å¼€è¯¾äº†ï¼Œä¸è¿‡åœ¨åšcodelabçš„æ—¶å€™ä¹Ÿè·Ÿå¤§ä½¬ä»¬èŠäº†å¾ˆå¤šæŠ€æœ¯é—®é¢˜ï¼Œæ”¶è·äº† è®¸å¤šçŸ¥è¯†å’Œæ€æƒ³ã€‚</p><p>é¸¿è’™å…¬å¼€è¯¾è®©æˆ‘æ”¶è·é¢‡ä¸°ï¼Œæˆ‘åœ¨è¿™é‡Œå‘ç°äº†æ›´åŠ ä¼˜è´¨çš„èµ„æºï¼Œä½†ä»¤æˆ‘æ„Ÿè§¦æœ€æ·±çš„è¿˜æ˜¯è®²åˆ°çš„å­¦ä¹ é¸¿è’™çš„æ­£ç¡®å§¿åŠ¿ï¼Œä¸€ç§æŠ€æœ¯ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§ä»è¯­è¨€åˆ°å®æ“çš„è·¯ç¨‹å»å­¦ä¹ ï¼ŒçœŸçš„å¾ˆå®¹æ˜“ä»å…¥é—¨åˆ°æ”¾å¼ƒï¼Œä½†å¦‚æœå…ˆä»demoå…¥æ‰‹ï¼Œè¾¹çœ‹è¾¹å­¦ï¼Œå°±èƒ½å®æ—¶åœ°è·å–åˆ°è‡ªå·±çš„å­¦ä¹ åé¦ˆï¼Œå­¦ä¹ å†ç¨‹ä¹Ÿä¼šæ›´è½»æ¾æ›´è‡ªä¿¡ã€‚</p><p>ä¸¤å¤©ä¸‹æ¥å‘ç°ä¸¤ä¸ªèƒŒåŒ…éƒ½è£…æ»¡äº†ï¼ˆé›¾ï¼‰ã€‚</p><p><img src="16.jpg" alt=""></p><h1>å†™åœ¨æœ€å</h1><p>æˆ‘æ€»è§‰å¾—ï¼Œåœ¨æŸäº›æ–¹é¢ï¼Œå­¦æ ¡æ‰€èƒ½æä¾›çš„è¿˜æ˜¯å¤ªå°‘äº†ï¼Œè¿™å¹¶ä¸æ˜¯å­¦æ ¡ä¸è®¤çœŸè´Ÿè´£ï¼Œè€Œæ˜¯è¯´æœ¬å°±å›¿äºè±¡ç‰™å¡”çš„æŸç¼šï¼Œå­¦æ ¡èƒ½å°½åŠ›ä¸ºæˆ‘ä»¬æä¾›çš„æ˜¯çŸ¥è¯†ï¼Œä½†å´å¾ˆéš¾è®©æˆ‘ä»¬çœ‹æ¸…è¡Œä¸šå®æ—¶åŠ¨å‘ä¸ç°çŠ¶ï¼Œå°¤å…¶æ˜¯åœ¨ç–«æƒ…å½“ä¸‹ï¼Œä¸å¤–ç•Œäº¤æµå‡å°‘ï¼Œæ›´åŠ åŠ å‰§äº†è¿™ä¸€å±€é¢ã€‚æˆ‘ä»¬çœŸçš„éœ€è¦èµ°å‡ºå»ï¼Œå»çœ‹ä¸€çœ‹ï¼Œå­¦ä¸€å­¦ï¼Œäº†è§£ä¸€äº›å¯¹æˆ‘ä»¬æœªæ¥å‘å±•æœ‰æŒ‡å¯¼æ€§çš„æ€æƒ³ä¸çŸ¥è¯†ï¼Œäº†è§£ä¸€äº›è¡Œä¸šçš„ç—›ç‚¹ä¸ç°çŠ¶ï¼Œäº†è§£ä¸€äº›å°–ç«¯çš„æŠ€æœ¯ä¸èƒ½åŠ›ï¼Œå…¶é‡è¦æ€§å¹¶ä¸äºšäºå¯¹è¯¾ç¨‹çŸ¥è¯†çš„å­¦ä¹ ã€‚</p><p>è¿™ä¸€å¹´ï¼Œæˆ‘ä»å®‰å“èµ°å‘äº†è·¨å¹³å°ï¼ˆcross-platformï¼‰ï¼Œåˆä»è·¨å¹³å°å¼€å§‹äº†è§£è·¨ç»ˆç«¯ï¼Œå†å²çš„å‘å±•æ€»æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬èº«è¾¹çš„è®¾å¤‡ï¼Œä¸æ˜¯ä¸€ä¸ªä¸ªå­¤ç«‹çš„è®¾å¤‡ï¼Œæ›´ä¸åº”è¯¥æ˜¯æ¯ä¸ªè®¾å¤‡éƒ½æœ‰è‡ªå·±ä¸€å¥—ä½“ç³»è€Œä¸”äº’ç›¸éš¾ä»¥å…¼å®¹çš„å­¤ç«‹è®¾å¤‡ï¼Œæˆ‘ä»¬æ‰€è¿½æ±‚çš„ï¼Œæ˜¯è®©æˆ‘ä»¬ä½¿ç”¨èº«è¾¹çš„æ¯ä¸€ä¸ªè®¾å¤‡çš„æ—¶å€™éƒ½èƒ½åƒä½¿ç”¨è‡ªå·±çš„åŒæ‰‹ä¸€æ ·è‡ªå¦‚ã€‚</p><p>è¯šç„¶ï¼Œå¹³å°ä¸å¹³å°ä¹‹é—´çš„éš”è†œè¿˜å¾ˆéš¾è¢«æ‰“ç ´ï¼Œä½†è®¾å¤‡ä¸è®¾å¤‡é—´çš„äº’è”å´å¾ˆå®¹æ˜“å®Œæˆï¼Œä½†æˆ‘ä»¬äº¦ä¸èƒ½æ­¢æ­¥äºâ€œè”â€ï¼Œæ›´åº”è€ƒè™‘â€œæ™ºâ€ï¼Œå¦‚ä½•è®©è®¾å¤‡ä¹‹é—´çœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå¦‚ä½•èƒ½è®©ç”¨æˆ·åœ¨è®¾å¤‡ä¹‹é—´æ— ç¼åˆ‡æ¢ï¼Œå¦‚ä½•èƒ½è®©è®¾å¤‡å»å­¦ä¹ æ¨æµ‹ä¸»äººçš„æ„å¿—ä»è€Œè‡ªåŠ¨åœ°å®ŒæˆæœåŠ¡ï¼Œå¦‚ä½•èƒ½è®©ç”¨æˆ·å»æ›´å¿«åœ°ä¹ æƒ¯å¹¶æ¥å—è¿™ç§ç”Ÿæ€ï¼Œå„ç§æŠ€æœ¯è¦å¤„äºæ€æ ·çš„åœ°ä½ã€å‘æŒ¥æ€æ ·çš„èƒ½åŠ›ï¼Œç©¶ç«Ÿå“ªäº›æŠ€æœ¯ä¼šè¢«é€æ¸æŠ›å¼ƒã€å“ªäº›æŠ€æœ¯ä¼šæ¸æ¸å…´èµ·ï¼Œè¿™éƒ½æ˜¯æˆ‘ä»¬è¦è€ƒè™‘çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯è¡Œä¸šè¦è€ƒè™‘çš„é—®é¢˜ã€‚</p><p>æ­¤å¤–ï¼Œä»ä¸‡ç‰©äº’è”åˆ°ä¸‡ç‰©è‡ªè”ã€æ™ºè”ï¼Œåä¸ºçš„åŠªåŠ›å’Œæˆæœæœ‰ç›®å…±ç¹ï¼Œä½†æˆ‘ä»¬å¹¶ä¸ä¼šæ­¢æ­¥äºæ­¤ã€‚æ˜Ÿè¾°ä¹‹å…‰è™½ç„¶å¾®å¼±ï¼Œä½†äº¿ä¸‡æ˜Ÿè¾°äº¦å¯æ±‡æˆé“¶æ²³ï¼Œæœªæ¥ï¼Œæˆ‘ä»¬åœ¨è·¯ä¸Šã€‚</p><p><img src="15.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> å€¼å¾—çºªå¿µçš„äº‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åä¸º </tag>
            
            <tag> HSD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸ºHMSé›†æˆï¼š1.å‡†å¤‡ä¸è´¦å·æœåŠ¡</title>
      <link href="/2021/10/19/%E5%8D%8E%E4%B8%BAHMS%E9%9B%86%E6%88%90%EF%BC%9A1-%E5%87%86%E5%A4%87%E4%B8%8E%E8%B4%A6%E5%8F%B7%E6%9C%8D%E5%8A%A1/"/>
      <url>/2021/10/19/%E5%8D%8E%E4%B8%BAHMS%E9%9B%86%E6%88%90%EF%BC%9A1-%E5%87%86%E5%A4%87%E4%B8%8E%E8%B4%A6%E5%8F%B7%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1>å¼•è¨€ï¼šä¸ºä»€ä¹ˆè¦æœ‰HMS</h1><h2 id="é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯HMS">é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯HMS?</h2><p>HMSæ˜¯åä¸ºé¢å‘ç§»åŠ¨åº”ç”¨ç”Ÿæ€æä¾›çš„ä¸€ç»„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼ŒåŒ…å«HMS Coreæ ¸å¿ƒæœåŠ¡ã€AppGalleryåº”ç”¨å¸‚åœºç­‰è‡ªæœ‰ç¨‹åºä»¥åŠå‘¨è¾¹ä¸€ç³»åˆ—çš„å¼€å‘å·¥å…·ã€‚é›†æˆHMSçš„èƒ½åŠ›å’ŒæœåŠ¡ï¼Œå°†ä¼šå¸®åŠ©æ‚¨çš„åº”ç”¨å®ç°æ›´é«˜çš„å¼€å‘æ•ˆç‡ã€è·å¾—æ›´å¤šçš„ç”¨æˆ·ã€æ›´é«˜çš„æ´»è·ƒåº¦ã€ä»¥åŠæ›´å¯è§‚çš„æ”¶å…¥ï¼ˆæ¥è‡ªå®˜æ–¹ç½‘ç«™ï¼‰</p><p><strong>åä¸ºç§»åŠ¨æœåŠ¡</strong>ï¼ˆè‹±è¯­ï¼šHuawei Mobile Servicesï¼ŒHMSï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/%E5%8D%8E%E4%B8%BA">åä¸º</a>çš„ä¸€é¡¹æœåŠ¡ï¼Œè®©ç”¨æˆ·åˆ©ç”¨ç§»åŠ¨ç”µè¯æˆ–å…¶ä»–ç§»åŠ¨è®¾å¤‡ä½¿ç”¨åä¸ºæœç´¢ã€åä¸ºæ²³å›¾ã€åä¸ºæ´›ä¹¦ã€åä¸ºè§†é¢‘ç­‰åä¸ºäº§å“ã€‚ç”¨ä»¥æ›¿ä»£åœ¨<a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E7%BE%8E%E8%B4%B8%E6%98%93%E6%88%98">ä¸­ç¾è´¸æ˜“æˆ˜</a>å¼€å§‹åå¯¹åä¸ºç§»åŠ¨è®¾å¤‡ä¸å¯ç”¨çš„<a href="https://zh.wikipedia.org/wiki/Google%E7%A7%BB%E5%8A%A8%E6%9C%8D%E5%8A%A1">Googleç§»åŠ¨æœåŠ¡</a>ã€‚</p><p>é€šè¿‡HMSï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E6%B5%81%E5%8B%95%E9%9B%BB%E8%A9%B1">ç§»åŠ¨ç”µè¯</a>æˆ–å…¶ä»–<a href="https://zh.wikipedia.org/wiki/%E6%B5%81%E5%8B%95%E8%A3%9D%E7%BD%AE">ç§»åŠ¨è®¾å¤‡</a>ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E5%8D%8E%E4%B8%BA%E5%BA%94%E7%94%A8%E5%B8%82%E5%9C%BA">åä¸ºåº”ç”¨å¸‚åœº</a>ã€<a href="https://zh.wikipedia.org/w/index.php?title=%E5%8D%8E%E4%B8%BA%E5%9C%B0%E5%9B%BE%E6%9C%8D%E5%8A%A1&amp;action=edit&amp;redlink=1">åä¸ºåœ°å›¾æœåŠ¡</a>ã€åä¸ºè´¦å·æœåŠ¡ã€æ•°å­—ç‰ˆæƒæœåŠ¡ã€åä¸ºäº‘å­˜å‚¨ã€åä¸º<a href="https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">æœºå™¨å­¦ä¹ </a>æœåŠ¡ã€å…¨æ™¯æŠ€æœ¯æœåŠ¡ã€<a href="https://zh.wikipedia.org/w/index.php?title=%E5%BA%94%E7%94%A8%E5%86%85%E6%94%AF%E4%BB%98&amp;action=edit&amp;redlink=1">åº”ç”¨å†…æ”¯ä»˜</a>ã€å¹¿å‘ŠæœåŠ¡ã€æ¨é€æœåŠ¡ã€åˆ†ææœåŠ¡ç­‰ã€‚ï¼ˆæ¥è‡ªç»´åŸºç™¾ç§‘ï¼‰</p><h2 id="é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦æœ‰HMS">é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦æœ‰HMS?</h2><p>è¦çŸ¥é“ï¼ŒAndroidè™½ç„¶å¼€æºï¼Œä½†è°·æ­Œå´å¯ä»¥å‡­å€ŸGMSè·å¾—æŒç»­ç¨³å®šçš„åˆ©æ¶¦ï¼Œä¸»è¦æ¥æºäºå¹¿å‘Šä¸šåŠ¡ä¸APPåˆ†æˆï¼ˆè°·æ­Œæ‹¿èµ°30%ï¼‰ï¼Œè€Œè‡ªä¸­ç¾è´¸æ˜“æˆ˜ä¸è°·æ­Œå°æ€åä¸ºæ¥å…¥GMSåï¼Œåä¸ºä¸€æ–¹é¢è¦æ¥å…¥è‡ªå®¶æœåŠ¡ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿè¦å‡­å€Ÿè‡ªå®¶æœåŠ¡å¼€æ‹“æµ·å¤–å¸‚åœºï¼Œè¿™ä¾¿æœ‰äº†HMSã€‚</p><p><strong>å¯ä»¥è¯´ï¼ŒHMSæ˜¯åä¸ºçš„ä¸€æ­¥æ£‹ï¼Œå®ƒä¸‹çš„è¦æ¯”é¸¿è’™æ›´æ—©ï¼Œä½†å…¶é‡è¦æ€§ä¸äºšäºé¸¿è’™ã€‚</strong></p><h1>å‡†å¤‡ï¼šAPPå¦‚ä½•é›†æˆHMS</h1><p><a href="https://developer.huawei.com/consumer/cn/codelab/HMSPreparation/index.html#0">æ”¾å®˜ç½‘</a></p><p>ä¸‹é¢åªè¯´å‡ ä¸ªå‘ï¼š</p><ul><li><p>cmdå¯ä»¥Ctrl+c/vï¼Œ</p></li><li><p>è¦çœ‹æ¸…æ˜¯å“ªä¸ªbuild.gradleæ–‡ä»¶</p></li><li><p>æ³¨æ„apply pluginæ˜¯è¦æ”¾åœ¨androidé—­åŒ…å‰é¢ï¼Œä¸èƒ½æ”¾åœ¨pluginsé—­åŒ…å‰é¢</p></li><li><p>Gradle 7.0ç‰ˆæœ¬åï¼Œ&quot;allprojects &gt; repositories&quot;é…ç½®å·²è¿ç§»åˆ°é¡¹ç›®çº§&quot;settings.gradle&quot;æ–‡ä»¶ä¸­ã€‚</p></li><li><p><code> buildTypes</code>é—­åŒ…è¦æ”¾åœ¨<code>signingConfigs</code>ä¹‹åï¼Œå¦åˆ™æŠ¥é”™ã€‚<code>signingConfigs</code>ä¸è¦å¿˜è®°æ”¹å‚æ•°ã€‚</p></li></ul><h2 id="å¿«é€Ÿé…ç½®ï¼š">å¿«é€Ÿé…ç½®ï¼š</h2><h3 id="1">1</h3><p><code>Build-&gt;Generare Signed Bundle/APK...</code></p><p><a href="https://developer.huawei.com/consumer/cn/codelab/HMSPreparation/index.html#2">https://developer.huawei.com/consumer/cn/codelab/HMSPreparation/index.html#2</a></p><p><strong>æ­¥éª¤ä»¥å®˜ç½‘ä¸ºä¸»</strong></p><h3 id="2">2</h3><p>jksæ–‡ä»¶æ”¾åœ¨appç›®å½•ä¸‹ï¼Œæ‰“å¼€å‘½ä»¤çª—å£ï¼Œå¹¶è¿›å…¥å·²å®‰è£…<strong>JDK</strong>çš„<strong>bin</strong>ç›®å½•ä¸‹ï¼Œåœ¨<strong>bin</strong>ç›®å½•ä¸‹è¿è¡Œï¼Œè¾“å…¥<strong>keytool</strong>æŸ¥çœ‹ç­¾åæ–‡ä»¶æŒ‡ä»¤ï¼Œå¹¶è¿è¡Œã€‚å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore D:\Android\WorkSpcae\HmsDemo\app\HmsDemo.jks</span><br></pre></td></tr></table></figure><p>å°†SHA256å¤åˆ¶åˆ°<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html"><strong>AppGallery Connect</strong></a>ä¸Šã€‚</p><p>è¿™å„¿ä¼šç»™ä¸€ä¸ªé›†æˆsdkçš„æ­¥éª¤ï¼Œä½†æ„Ÿè§‰ä¸å¯¹</p><p>è¿™ä¸ªæ˜¯æ­£ç¡®çš„ï¼š<a href="https://developer.huawei.com/consumer/cn/doc/development/HMSCore-Guides/android-integrating-sdk-0000001050042006">https://developer.huawei.com/consumer/cn/doc/development/HMSCore-Guides/android-integrating-sdk-0000001050042006</a></p><p>å‰©ä¸‹çš„æ­¥éª¤å·²åˆ é™¤</p><p>ä¸€æ–¹é¢ï¼Œå»ºè®®åˆ°å®˜ç½‘çœ‹æ–°çš„ç‰ˆæœ¬å·</p><p>å¦ä¸€æ–¹é¢ï¼Œå¯èƒ½ä¼šæœ‰æ‰€æ”¹åŠ¨ï¼Œä»¥å®˜ç½‘ä¸ºå‡†</p><h1>HMSè´¦å·æœåŠ¡ï¼š</h1><p>MainActivity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwn.myhmsaccountservicedemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hmf.tasks.Task;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.common.ApiException;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.support.account.AccountAuthManager;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.support.account.request.AccountAuthParams;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.support.account.request.AccountAuthParamsHelper;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.support.account.result.AuthAccount;</span><br><span class="line"><span class="keyword">import</span> com.huawei.hms.support.account.service.AccountAuthService;</span><br><span class="line"><span class="keyword">import</span> com.zwn.myhmsaccountservicedemo.util.HttpUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.Call;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Callback;</span><br><span class="line"><span class="keyword">import</span> okhttp3.MultipartBody;</span><br><span class="line"><span class="keyword">import</span> okhttp3.RequestBody;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String TAG = <span class="string">&quot;MainActivity:&quot;</span>;</span><br><span class="line">    HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    JSONObject authorizationObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">    JSONObject IDObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">    AccountAuthService service;</span><br><span class="line"></span><br><span class="line">    Button authorizationButton;</span><br><span class="line">    Button IDSignInButton;</span><br><span class="line">    Button silentSignInButton;</span><br><span class="line">    Button signOut;</span><br><span class="line">    Button cancelAuthorizationCodeButton;</span><br><span class="line">    TextView textView;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        authorizationButton  = findViewById(R.id.AuthorizationCodeSignIn);</span><br><span class="line">        IDSignInButton = findViewById(R.id.IDSignIn);</span><br><span class="line">        silentSignInButton = findViewById(R.id.silentSignIn);</span><br><span class="line">        signOut = findViewById(R.id.signOut);</span><br><span class="line">        cancelAuthorizationCodeButton = findViewById(R.id.cancelAuthorizationCode);</span><br><span class="line">        textView = findViewById(R.id.text_main);</span><br><span class="line"></span><br><span class="line">        authorizationButton.setOnClickListener(view -&gt; authorizationSignIn());</span><br><span class="line">        IDSignInButton.setOnClickListener(view -&gt;IDSignIn());</span><br><span class="line">        silentSignInButton.setOnClickListener(view -&gt; silentSignIn());</span><br><span class="line">        signOut.setOnClickListener(view -&gt; signOut());</span><br><span class="line">        cancelAuthorizationCodeButton.setOnClickListener(view -&gt;cancelAuthorization());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//authorizationSignIn</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">authorizationSignIn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AccountAuthParams authParams = <span class="keyword">new</span> AccountAuthParamsHelper(</span><br><span class="line">                AccountAuthParams.DEFAULT_AUTH_REQUEST_PARAM).setAuthorizationCode().createParams();</span><br><span class="line">         service = AccountAuthManager.getService(MainActivity.<span class="keyword">this</span>, authParams);</span><br><span class="line">        startActivityForResult(service.getSignInIntent(), <span class="number">8888</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    int InfoByAuthorizationCode(boolean isRefresh, String authorizationCode,String refreshToken)&#123;</span></span><br><span class="line"><span class="comment">//        if ((!isRefresh&amp;&amp;authorizationCode.isEmpty())||(isRefresh&amp;&amp;refreshToken.isEmpty()))&#123;</span></span><br><span class="line"><span class="comment">//            return 1;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        MultipartBody.Builder getInfoBuilder = new MultipartBody.Builder()</span></span><br><span class="line"><span class="comment">//                .setType(MultipartBody.FORM)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;grant_type&quot;, &quot;authorization_code&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;client_id&quot;, &quot;104851299&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;client_secret&quot;, &quot;a89367fe561f1f779d63cb3b5866cd3e9fcf1350e6a7c95d7a1ebac1b29802de&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;code&quot;, authorizationCode);</span></span><br><span class="line"><span class="comment">//        MultipartBody.Builder refreshBuilder = new MultipartBody.Builder()</span></span><br><span class="line"><span class="comment">//                .setType(MultipartBody.FORM)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;grant_type&quot;, &quot;refresh_token&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;client_id&quot;, &quot;104851299&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;client_secret&quot;, &quot;a89367fe561f1f779d63cb3b5866cd3e9fcf1350e6a7c95d7a1ebac1b29802de&quot;)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;refresh_token&quot;, refreshToken);</span></span><br><span class="line"><span class="comment">//        RequestBody requestBody = isRefresh?refreshBuilder.build():getInfoBuilder.build();</span></span><br><span class="line"><span class="comment">//        httpUtil.OKHttpWithCallBack(false,</span></span><br><span class="line"><span class="comment">//                &quot;https://oauth-login.cloud.huawei.com/oauth2/v3/token&quot;,InfoByAuthorizationCallback,requestBody);</span></span><br><span class="line"><span class="comment">//        return 0;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    Callback InfoByAuthorizationCallback = new Callback() &#123;</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void onResponse(Call call, Response response) throws IOException &#123;</span></span><br><span class="line"><span class="comment">//            //è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line"><span class="comment">//            String responseData = response.body().string();</span></span><br><span class="line"><span class="comment">//            //å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line"><span class="comment">//            authorizationObject = JSON.parseObject(responseData);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void onFailure(Call call, IOException e) &#123;</span></span><br><span class="line"><span class="comment">//            //æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//IDSignIn</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">IDSignIn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AccountAuthParams authParams = <span class="keyword">new</span> AccountAuthParamsHelper(</span><br><span class="line">                AccountAuthParams.DEFAULT_AUTH_REQUEST_PARAM).setIdToken().createParams();</span><br><span class="line">         service = AccountAuthManager.getService(MainActivity.<span class="keyword">this</span>, authParams);</span><br><span class="line">        startActivityForResult(service.getSignInIntent(), <span class="number">8889</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    //éªŒè¯IDTokenæœ‰æ•ˆæ€§ï¼Œä»…ç”¨äºè°ƒè¯•</span></span><br><span class="line"><span class="comment">//    void identifyIDToken(String IDToken)&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        MultipartBody.Builder builder = new MultipartBody.Builder()</span></span><br><span class="line"><span class="comment">//                .setType(MultipartBody.FORM)</span></span><br><span class="line"><span class="comment">//                .addFormDataPart(&quot;id_token&quot;, IDToken);</span></span><br><span class="line"><span class="comment">//        RequestBody requestBody = builder.build();</span></span><br><span class="line"><span class="comment">//        httpUtil.OKHttpWithCallBack(false,</span></span><br><span class="line"><span class="comment">//                &quot;https://oauth-login.cloud.huawei.com/oauth2/v3/tokeninfo&quot;,IDCallback,requestBody);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    Callback IDCallback = new Callback() &#123;</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void onResponse(Call call, Response response) throws IOException &#123;</span></span><br><span class="line"><span class="comment">//            //è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line"><span class="comment">//            String responseData = response.body().string();</span></span><br><span class="line"><span class="comment">//            //å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line"><span class="comment">//            IDObject = JSON.parseObject(responseData);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void onFailure(Call call, IOException e) &#123;</span></span><br><span class="line"><span class="comment">//            //æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//silentSignIn</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">silentSignIn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        AccountAuthParams authParams = <span class="keyword">new</span> AccountAuthParamsHelper(</span><br><span class="line">                AccountAuthParams.DEFAULT_AUTH_REQUEST_PARAM).createParams();</span><br><span class="line">        AccountAuthService service = AccountAuthManager.getService(MainActivity.<span class="keyword">this</span>, authParams);</span><br><span class="line">        Task&lt;AuthAccount&gt; task = service.silentSignIn();<span class="comment">//é™é»˜ç™»å½•</span></span><br><span class="line"></span><br><span class="line">        task.addOnSuccessListener(authAccount -&gt; &#123;</span><br><span class="line">            <span class="comment">//è·å–å¸å·ä¿¡æ¯</span></span><br><span class="line">            Log.i(TAG, <span class="string">&quot;displayName:&quot;</span> + authAccount.getDisplayName());</span><br><span class="line">            <span class="comment">//è·å–å¸å·ç±»å‹ï¼Œ0è¡¨ç¤ºåä¸ºå¸å·ã€1è¡¨ç¤ºAppTouchå¸å·</span></span><br><span class="line">            Log.i(TAG, <span class="string">&quot;accountFlag:&quot;</span> + authAccount.getAccountFlag());</span><br><span class="line">            builder.append(<span class="string">&quot;displayName&quot;</span>)</span><br><span class="line">                    .append(authAccount.getDisplayName())</span><br><span class="line">                    .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>))</span><br><span class="line">                    .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">            MainActivity.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                textView.setText(builder.toString());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        task.addOnFailureListener(e -&gt; &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•å¤±è´¥ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨getSignInIntent()æ–¹æ³•æ˜¾å¼ç™»å½•</span></span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> ApiException) &#123;</span><br><span class="line">                ApiException apiException = (ApiException) e;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;sign failed status:&quot;</span> + apiException.getStatusCode());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//SignOut</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">signOut</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (service == <span class="keyword">null</span>)&#123;</span><br><span class="line">            Log.e(TAG, <span class="string">&quot;signOut:å°šæœªç™»å½•&quot;</span> );</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            Task&lt;Void&gt; signOutTask = service.signOut();</span><br><span class="line">            signOutTask.addOnCompleteListener(task -&gt; &#123;</span><br><span class="line">                <span class="comment">//å®Œæˆé€€å‡ºåçš„å¤„ç†</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;signOut complete&quot;</span>);</span><br><span class="line">                builder.append(<span class="string">&quot;signOut complete&quot;</span>)</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>))</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                MainActivity.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                    textView.setText(builder.toString());</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//cancelAuthorization</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cancelAuthorization</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//serviceä¸ºç™»å½•æˆæƒæ—¶ä½¿ç”¨getServiceæ–¹æ³•ç”Ÿæˆçš„AccountAuthServiceå®ä¾‹</span></span><br><span class="line">        service.cancelAuthorization().addOnCompleteListener(task -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (task.isSuccessful()) &#123;</span><br><span class="line">                <span class="comment">//å–æ¶ˆæˆæƒæˆåŠŸåçš„å¤„ç†</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;onSuccess: &quot;</span>);</span><br><span class="line">                builder.append(<span class="string">&quot;å–æ¶ˆæˆæƒï¼šé€€å‡ºæˆåŠŸ&quot;</span>)</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>))</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                MainActivity.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                    textView.setText(builder.toString());</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//å¼‚å¸¸å¤„ç†</span></span><br><span class="line">                Exception exception = task.getException();</span><br><span class="line">                <span class="keyword">if</span> (exception <span class="keyword">instanceof</span> ApiException)&#123;</span><br><span class="line">                    <span class="keyword">int</span> statusCode = ((ApiException) exception).getStatusCode();</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;onFailure: &quot;</span> + statusCode);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æˆæƒç™»å½•ç»“æœå¤„ç†ï¼Œä»AuthAccountä¸­è·å–Authorization Code</span></span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        <span class="keyword">if</span> (requestCode == <span class="number">8888</span>) &#123;</span><br><span class="line">            Task&lt;AuthAccount&gt; authAccountTask = AccountAuthManager.parseAuthResultFromIntent(data);</span><br><span class="line">            <span class="keyword">if</span> (authAccountTask.isSuccessful()) &#123;</span><br><span class="line">                <span class="comment">//ç™»å½•æˆåŠŸï¼Œè·å–ç”¨æˆ·çš„å¸å·ä¿¡æ¯å’ŒAuthorization Code</span></span><br><span class="line">                AuthAccount authAccount = authAccountTask.getResult();</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;serverAuthCode:&quot;</span> + authAccount.getAuthorizationCode());</span><br><span class="line">                builder.append(<span class="string">&quot;AuthorizationCode:&quot;</span>)</span><br><span class="line">                        .append(authAccount.getAuthorizationCode())</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>))</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line"><span class="comment">//                int n = InfoByAuthorizationCode(false,authAccount.getAuthorizationCode(),&quot;&quot;);</span></span><br><span class="line"><span class="comment">//                if (n == 0) &#123;</span></span><br><span class="line"><span class="comment">//                    if (authorizationObject != null)&#123;</span></span><br><span class="line"><span class="comment">//                        builder.append(&quot;\n access_token&quot;).append(authorizationObject.getString(&quot;access_token&quot;));</span></span><br><span class="line"><span class="comment">//                    &#125;else &#123;</span></span><br><span class="line"><span class="comment">//                        Log.e(TAG, &quot;onActivityResult: object is null&quot;);</span></span><br><span class="line"><span class="comment">//                    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//                &#125;else &#123;</span></span><br><span class="line"><span class="comment">//                    Log.e(TAG, &quot;onActivityResult: inputError&quot; );</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line">                MainActivity.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                    textView.setText( builder.toString());</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//ç™»å½•å¤±è´¥</span></span><br><span class="line">                Log.e(TAG, <span class="string">&quot;sign in failed:&quot;</span> + ((ApiException) authAccountTask.getException()).getStatusCode());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (requestCode == <span class="number">8889</span>) &#123;</span><br><span class="line">            Task&lt;AuthAccount&gt; authAccountTask = AccountAuthManager.parseAuthResultFromIntent(data);</span><br><span class="line">            <span class="keyword">if</span> (authAccountTask.isSuccessful()) &#123;</span><br><span class="line">                <span class="comment">//ç™»å½•æˆåŠŸï¼Œè·å–ç”¨æˆ·çš„å¸å·ä¿¡æ¯å’ŒID Token</span></span><br><span class="line">                AuthAccount authAccount = authAccountTask.getResult();</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;idToken:&quot;</span> + authAccount.getIdToken());</span><br><span class="line">                <span class="comment">//è·å–å¸å·ç±»å‹ï¼Œ0è¡¨ç¤ºåä¸ºå¸å·ã€1è¡¨ç¤ºAppTouchå¸å·</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;accountFlag:&quot;</span> + authAccount.getAccountFlag());</span><br><span class="line">                builder.append(<span class="string">&quot;IDToken:&quot;</span>)</span><br><span class="line">                        .append(authAccount.getIdToken())</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>))</span><br><span class="line">                        .append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                MainActivity.<span class="keyword">this</span>.runOnUiThread(()-&gt;&#123;</span><br><span class="line">                        textView.setText(builder.toString());</span><br><span class="line">                    &#125;);</span><br><span class="line"><span class="comment">//                identifyIDToken(authAccount.getIdToken());</span></span><br><span class="line"><span class="comment">//                if (IDObject != null)&#123;</span></span><br><span class="line"><span class="comment">//                    builder.append(&quot;IDTokenéªŒè¯ç»“æœï¼š&quot;).append(IDObject.toString());</span></span><br><span class="line"><span class="comment">//                    MainActivity.this.runOnUiThread(()-&gt;&#123;</span></span><br><span class="line"><span class="comment">//                        textView.setText(builder.toString());</span></span><br><span class="line"><span class="comment">//                    &#125;);</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//ç™»å½•å¤±è´¥ï¼Œä¸éœ€è¦åšå¤„ç†ï¼Œæ‰“ç‚¹æ—¥å¿—æ–¹ä¾¿å®šä½</span></span><br><span class="line">                Log.e(TAG, <span class="string">&quot;sign in failed : &quot;</span> +((ApiException) authAccountTask.getException()).getStatusCode());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>activity_main.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;@string/title_main&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/IDSignIn&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;ID-Token Mode SignIn&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/AuthorizationCodeSignIn&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;AuthorizationCode Mode SignIn&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/silentSignIn&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Silent SignIn&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/signOut&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;SignOut&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cancelAuthorizationCode&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Cancel AuthorizationCode&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/text_main&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>themes.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Base application theme. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.MyHmsAccountServiceDemo&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;</span>&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span> <span class="attr">tools:targetApi</span>=<span class="string">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>buttonçš„coloræ˜¯<code>#436c95</code></p><p>string.xmlé‡Œï¼š<code>&lt;string name=&quot;title_main&quot;&gt;Account Usage Process&lt;/string&gt;</code></p>]]></content>
      
      
      <categories>
          
          <category> åä¸ºæŠ€æœ¯å­¦ä¹ ä¹‹è·¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åä¸º </tag>
            
            <tag> HMS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœåŠ¡å™¨é…ç½®mysqlä¸javaè¸©å‘</title>
      <link href="/2021/10/17/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEmysql%E8%B8%A9%E5%9D%91/"/>
      <url>/2021/10/17/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEmysql%E8%B8%A9%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<h1>å®‰è£…MySQLä¸è¿œç¨‹ç™»å½•</h1><h3 id="é¦–å…ˆ">é¦–å…ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–é…ç½®ä¿¡æ¯">åˆå§‹åŒ–é…ç½®ä¿¡æ¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure><ul><li>VALIDATE PASSWORD COMPONENTâ€¦ï¼ˆä½¿ç”¨å¯†ç å¼ºåº¦æ ¡éªŒç»„ä»¶ï¼‰ è¾“å…¥ï¼š n</li><li>New Password:ï¼ˆè®¾ç½®æ–°å¯†ç ,å¹¶é‡å¤ä¸€é)</li><li>Remove anonymous users (åˆ é™¤åŒ¿åç”¨æˆ·) n</li><li>Disallow root login remotely(æ‹’ç»è¿œç¨‹rootè´¦å·ç™»å½•ï¼‰ n</li><li>Remove test database and access to it(ç§»é™¤testæ•°æ®åº“ï¼‰ n</li><li>Reload privilege tables now (ç°åœ¨å°±é‡æ–°è½½å…¥æƒé™è¡¨ï¼‰ y</li></ul><h3 id="ç™»å½•">ç™»å½•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -urppt -p</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹è®¤è¯æ–¹å¼">ä¿®æ”¹è®¤è¯æ–¹å¼</h3><p>å°†èº«ä»½éªŒè¯æ–¹æ³•ä»<code>auth_socket</code>æ›´æ”¹ä¸º<code>mysql_native_password</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="string">&#x27;ä½ çš„å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="å…è®¸è¿œç¨‹è®¿é—®">å…è®¸è¿œç¨‹è®¿é—®</h3><p><strong>å…ˆæ‰“å¼€3306ç«¯å£</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user set Host=&#x27;%&#x27; where User=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure><h4 id="è¸©å‘ï¼š">è¸©å‘ï¼š</h4><ol><li>åœ¨8.0ä»¥å‰ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æˆæƒè¿œç¨‹è¿æ¥æ“ä½œï¼š</li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges <span class="keyword">on</span> *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure><ol><li>ä½†åœ¨8.0ä»¥åï¼Œä½¿ç”¨ä»¥ä¸Šå‘½ä»¤ä¼šæŠ¥é”™ï¼š</li></ol><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="number">1410</span> (<span class="number">42000</span>): You are not allowed to create a user <span class="keyword">with</span> GRANT</span><br></pre></td></tr></table></figure><h5 id="åˆ†æåŸå› ï¼š">åˆ†æåŸå› ï¼š</h5><p>å› ä¸ºåœ¨8.0ä»¥åï¼Œè¿™ä¸ªç‰¹æ€§å·²è¢«ç§»é™¤ï¼Œå®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼š</p><blockquote><p>åŸæ–‡ï¼šUsing GRANT to modify account properties other than privilege assignments. This includes<br>authentication, SSL, and resource-limit properties. Instead, establish such properties at account-creation<br>time with CREATE USER or modify them afterward with ALTER USER.<br>è¯‘æ–‡ï¼šä½¿ç”¨grantä¿®æ”¹è´¦æˆ·æƒé™åˆ†é…ä»¥å¤–çš„è´¦æˆ·å±æ€§ã€‚åŒ…æ‹¬è®¤è¯ï¼ŒSSLï¼Œå’Œèµ„æºé™åˆ¶é…ç½®ç­‰ã€‚å–è€Œä»£ä¹‹çš„æ˜¯åˆ›å»ºç”¨æˆ·create useræˆ–è€…åˆ›å»ºåä¿®æ”¹alter userçš„æ–¹å¼ã€‚</p></blockquote><h3 id="åˆ·æ–°cacheä¸­é…ç½®">åˆ·æ–°cacheä¸­é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é…ç½®">ä¿®æ”¹é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°bind-addresså±æ€§ï¼Œåé¢çš„ipåœ°å€æ”¹æˆ0.0.0.0ä¿å­˜å¹¶é€€å‡ºï¼Œç„¶åé‡å¯mysqlæœåŠ¡(ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰bind-address)</p><p><img src="0.png" alt=""></p><h3 id="é‡å¯mysql">é‡å¯mysql</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysql</span><br></pre></td></tr></table></figure><h3 id="MySQL8-å¸è½½">MySQL8 å¸è½½</h3><ol><li>æŸ¥çœ‹MySQLä¾èµ– ï¼š <code>dpkg --list|grep mysql</code></li><li>å¸è½½ï¼š <code>sudo apt-get remove mysql-common</code></li><li>å¸è½½ï¼š <code>sudo apt-get autoremove --purge mysql-server-8.0</code>(è¿™é‡Œç‰ˆæœ¬å¯¹åº”å³å¯)</li><li>æ¸…é™¤æ®‹ç•™æ•°æ®: <code>dpkg -l|grep ^rc|awk '&#123;print$2&#125;'|sudo xargs dpkg -P</code></li><li>å†æ¬¡æŸ¥çœ‹MySQLçš„å‰©ä½™ä¾èµ–é¡¹: <code>dpkg --list|grep mysql</code>(è¿™é‡Œä¸€èˆ¬å°±æ²¡æœ‰è¾“å‡ºäº†ï¼Œå¦‚æœæœ‰æ‰§è¡Œä¸‹ä¸€æ­¥)</li><li>ç»§ç»­åˆ é™¤å‰©ä½™ä¾èµ–é¡¹ï¼Œå¦‚ï¼š<code>sudo apt-get autoremove --purge mysql-apt-config</code></li></ol><h1>å®‰è£…jdk</h1><h3 id="è§£å‹jdk">è§£å‹jdk</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u121-linux-x64.tar.gz(æ–‡ä»¶å)</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘ç¯å¢ƒå˜é‡">ç¼–è¾‘ç¯å¢ƒå˜é‡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br></pre></td></tr></table></figure><p>æœ«å°¾æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#JDK</span><br><span class="line">export JAVA_HOME=/usr/local/bin/jdk1<span class="number">.8</span><span class="number">.0_271</span>(çœŸå®è·¯å¾„)</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure><p>ç„¶å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£ï¼š3.æ¬§æ‹‰å›¾ä¸å“ˆå¯†é¡¿å›¾</title>
      <link href="/2021/10/17/%E7%A6%BB%E6%95%A3%EF%BC%9A3-%E6%AC%A7%E6%8B%89%E5%9B%BE%E4%B8%8E%E5%93%88%E5%AF%86%E9%A1%BF%E5%9B%BE/"/>
      <url>/2021/10/17/%E7%A6%BB%E6%95%A3%EF%BC%9A3-%E6%AC%A7%E6%8B%89%E5%9B%BE%E4%B8%8E%E5%93%88%E5%AF%86%E9%A1%BF%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h3 id="å®šä¹‰1">å®šä¹‰1</h3><p>è®¾Gæ˜¯ä¸€ä¸ªå›¾ï¼ŒGä¸­åŒ…å«æ‰€æœ‰è¾¹çš„é€šè·¯/è¿¹(å³<strong>æ¯æ¡è¾¹æ°å¥½å‡ºç°ä¸€æ¬¡çš„è·¯å¾„</strong>)ç§°ä¸ºEuleré€šè·¯/è¿¹ï¼Œé—­çš„Eulerè¿¹ç§°ä¸ºEuleré—­è¿¹æˆ–Eulerå›è·¯ï¼›</p><p>å…·æœ‰<strong>Eulerå›è·¯çš„å›¾ç§°ä¸ºEulerå›¾</strong>ï¼Œå¼€çš„Eulerè¿¹ç§°ä¸ºEulerå¼€è¿¹ï¼Œå…·æœ‰Eulerå¼€è¿¹çš„å›¾ç§°ä¸ºåŠEulerå›¾ã€‚</p><h3 id="Terminologies">Terminologies:</h3><ul><li><p>Euler Circuit(æ¬§æ‹‰å›è·¯)ï¼šAn Euler circuit in a graph G is a simple circuit containing every edge of G.</p><ul><li>æ¬§æ‹‰å›è·¯ï¼Œæ˜¯<strong>åŒ…å«ç€Gçš„æ¯ä¸€æ¡è¾¹çš„ç®€å•å›è·¯</strong></li><li>ï¼ˆå›è·¯ï¼Œå³é—­è¿¹ï¼‰</li><li>è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mo>â€¦</mo><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2â€¦e_kv_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ºå›¾<em>G</em>ä¸­çš„ä¸€æ¡è·¯å¾„ï¼Œè‹¥<strong>è¾¹</strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mtext>ï¼Œ</mtext><msub><mi>e</mi><mn>2</mn></msub><mtext>ï¼Œ</mtext><mo>â€¦</mo><mtext>ï¼Œ</mtext><msub><mi>e</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">e_1ï¼Œe_2ï¼Œâ€¦ï¼Œe_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> äº’ä¸ç›¸åŒï¼Œåˆ™ç§°è¯¥è·¯å¾„ä¸º<strong>è¿¹</strong>ï¼›è‹¥<strong>ç‚¹</strong>åºåˆ—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mtext>ï¼Œ</mtext><msub><mi>v</mi><mn>1</mn></msub><mtext>ï¼Œ</mtext><mo>â€¦</mo><mtext>ï¼Œ</mtext><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0ï¼Œv_1ï¼Œâ€¦ï¼Œv_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>äº’ä¸ç›¸åŒï¼Œåˆ™ç§°è¯¥è·¯å¾„ä¸º<strong>è·¯</strong>ã€‚</li></ul></li><li><p>Euler Path(æ¬§æ‹‰é€šè·¯)ï¼šAn Euler path in G is a simple path containing every edge of G.</p><ul><li>æ¬§æ‹‰é€šè·¯ï¼Œæ˜¯<strong>åŒ…å«ç€Gçš„æ¯ä¸€æ¡è¾¹çš„ç®€å•é€šè·¯</strong></li></ul></li><li><p>Euler Graph(æ¬§æ‹‰å›¾)ï¼šA graph contains an Euler circuit.</p><ul><li>åŒ…å«æ¬§æ‹‰å›è·¯çš„å›¾ç§°ä¸ºæ¬§æ‹‰å›¾ã€‚</li></ul></li><li><p>Simple Path/Circuitï¼ˆç®€å•è·¯å¾„/å›è·¯ï¼‰ï¼šA path or circuit is called simple if it does not contain the same edge more than once.</p><ul><li>ä¸åŒ…å«é‡å¤è¾¹çš„è·¯å¾„æˆ–å›è·¯ç§°ä¸ºç®€å•è·¯å¾„/å›è·¯</li></ul></li></ul><h3 id="æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰é€šè·¯çš„å……è¦æ¡ä»¶"><strong>æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰é€šè·¯çš„å……è¦æ¡ä»¶</strong></h3><ul><li><p>è¿é€šå¤šé‡å›¾å…·æœ‰<strong>æ¬§æ‹‰å›è·¯</strong>å½“ä¸”ä»…å½“<strong>å®ƒçš„æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰å¶æ•°åº¦</strong></p></li><li><p>è¿é€šå¤šé‡å›¾<strong>å…·æœ‰æ¬§æ‹‰é€šè·¯è€Œæ— æ¬§æ‹‰å›è·¯</strong>ï¼Œå½“ä¸”ä»…å½“<strong>å®ƒæ°æœ‰ä¸¤ä¸ªå¥‡æ•°åº¦é¡¶ç‚¹</strong></p></li></ul><h3 id="æœ‰å‘å›¾ä¸­çš„æ¬§æ‹‰å›è·¯ä¸æ¬§æ‹‰é€šè·¯"><strong>æœ‰å‘å›¾ä¸­çš„æ¬§æ‹‰å›è·¯ä¸æ¬§æ‹‰é€šè·¯</strong></h3><p>A directed multigraph having no isolated vertices has an Euler circuit if and only if</p><h4 id="ä¸€ä¸ªæ²¡æœ‰å­¤ç«‹é¡¶ç‚¹çš„æœ‰å‘å¤šé‡å›¾å«æœ‰æ¬§æ‹‰å›è·¯çš„å……è¦æ¡ä»¶æ˜¯ï¼š">ä¸€ä¸ªæ²¡æœ‰å­¤ç«‹é¡¶ç‚¹çš„æœ‰å‘å¤šé‡å›¾å«æœ‰æ¬§æ‹‰å›è·¯çš„å……è¦æ¡ä»¶æ˜¯ï¼š</h4><ul><li><p>the graph is weakly connected   å¼±è¿é€šçš„</p></li><li><p>the in-degree and out-degree of each vertex are equal æ¯ä¸ªé¡¶ç‚¹çš„å‡ºåº¦å’Œå…¥åº¦ç›¸ç­‰</p></li></ul><p>A directed multigraph having no isolated vertices has an Euler path but not an Euler circuit if and only if</p><h4 id="ä¸€ä¸ªæ²¡æœ‰å­¤ç«‹é¡¶ç‚¹çš„æœ‰å‘å¤šé‡å›¾å«æœ‰æ¬§æ‹‰é€šè·¯ä½†ä¸å«æ¬§æ‹‰å›è·¯çš„å……è¦æ¡ä»¶æ˜¯ï¼š">ä¸€ä¸ªæ²¡æœ‰å­¤ç«‹é¡¶ç‚¹çš„æœ‰å‘å¤šé‡å›¾å«æœ‰æ¬§æ‹‰é€šè·¯ä½†ä¸å«æ¬§æ‹‰å›è·¯çš„å……è¦æ¡ä»¶æ˜¯ï¼š</h4><ul><li><p>the graph is weakly connected</p><ul><li>å¼±è¿é€šçš„</li></ul></li><li><p>the in-degree and out-degree of each vertex are equal for all but two vertices, one that has in-degree 1 larger than its out-degree and the other that has out-degree 1 larger than its in-degree.</p><ul><li>é™¤å»ä¸¤ä¸ªé¡¶ç‚¹å¤–æ¯ä¸ªé¡¶ç‚¹çš„å‡ºåº¦å’Œå…¥åº¦ç›¸ç­‰ï¼Œå…¶ä¸­ä¸€ä¸ªé¡¶ç‚¹çš„å‡ºåº¦æ¯”å…¥åº¦å¤§1ï¼Œå¦ä¸€ä¸ªé¡¶ç‚¹çš„å…¥åº¦æ¯”å‡ºåº¦å¤§1.</li></ul></li></ul><h3 id="å“ˆå¯†é¡¿é€šè·¯å’Œå›è·¯"><strong>å“ˆå¯†é¡¿é€šè·¯å’Œå›è·¯</strong></h3><ul><li><p>A Hamilton path in a graph G is a path which visits ever vertex in G exactly once.</p><ul><li><strong>å“ˆå¯†é¡¿é€šè·¯æ˜¯ä¸€ä¸ªè®¿é—®å›¾Gä¸­æ¯ä¸ªé¡¶ç‚¹æ¬¡æ•°æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡çš„é€šè·¯</strong></li></ul></li><li><p>AHamilton circuit (or Hamilton cycle) is a cycle which visits every vertex exactly once, except for the first vertex, which is also visited at the end of the cycle.</p><ul><li><strong>å“ˆå¯†é¡¿å›è·¯ï¼Œä»…è®¿é—®æ¯ä¸ªé¡¶ç‚¹ä¸€æ¬¡ï¼Œä½†é™¤å»å§‹ç‚¹ï¼Œè¿™ä¸ªå§‹ç‚¹åŒæ ·ä¹Ÿæ˜¯ç»ˆç‚¹ã€‚</strong></li></ul></li><li><p>If a connected graph G has a Hamilton circuit, then G is called aHamilton graph.</p><ul><li><strong>å¦‚æœä¸€ä¸ªè¿é€šå›¾Gå«æœ‰å“ˆå¯†é¡¿å›è·¯ï¼Œé‚£ä¹ˆGæ˜¯å“ˆå¯†é¡¿å›¾</strong></li></ul><p><strong>Note: å®šä¹‰é€‚ç”¨ä¸æ‰€æœ‰ç±»å‹çš„æœ‰å‘å›¾å’Œæ— å‘å›¾.</strong></p></li></ul><h3 id="å“ˆå¯†é¡¿å›¾çš„å¿…è¦æ¡ä»¶">å“ˆå¯†é¡¿å›¾çš„å¿…è¦æ¡ä»¶</h3><p>å®šç†1</p><p><strong>è®¾Gæ˜¯Hamiltonå›¾ï¼Œåˆ™å¯¹äºé¡¶ç‚¹é›†Vçš„ä»»ä¸€éç©ºçœŸå­é›†Sï¼Œå‡æœ‰<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‰</mi><mo stretchy="false">(</mo><mi>G</mi><mtext>ï¼</mtext><mi>S</mi><mo stretchy="false">)</mo><mo>â‰¤</mo><mi mathvariant="normal">âˆ£</mi><mi>S</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">Ï‰(Gï¼S)â‰¤|S|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord cjk_fallback">ï¼</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">âˆ£</span></span></span></span>ã€‚</strong></p><p>è¿™é‡ŒG-Sè¡¨ç¤ºä»å›¾Gä¸­åˆ å»Sä¸­çš„æ‰€æœ‰é¡¶ç‚¹ä»¥åŠæ‰€å…³è”çš„è¾¹</p><p>è¯æ˜ï¼š è®¾Cæ˜¯Gä¸­ä»»æ„å“ˆå¯†é¡¿å›è·¯ï¼Œ</p><p>å½“Sä¸­çš„é¡¶ç‚¹åœ¨Cä¸­ä¸ç›¸é‚»æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‰</mi><mo stretchy="false">(</mo><mi>G</mi><mtext>ï¼</mtext><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">âˆ£</mi><mi>S</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">Ï‰(Gï¼S)=|S|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord cjk_fallback">ï¼</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">âˆ£</span></span></span></span>ï¼Œè¿™æ—¶å­å›¾ä¸­äº§ç”Ÿçš„åˆ†æ”¯æ•°æœ€å¤šã€‚</p><p>å¦åˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‰</mi><mo stretchy="false">(</mo><mi>G</mi><mtext>ï¼</mtext><mi>S</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi mathvariant="normal">âˆ£</mi><mi>S</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">Ï‰(Gï¼S)&lt;|S|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord cjk_fallback">ï¼</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">âˆ£</span></span></span></span>ã€‚</p><p>æ‰€ä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‰</mi><mo stretchy="false">(</mo><mi>G</mi><mtext>ï¼</mtext><mi>S</mi><mo stretchy="false">)</mo><mo>â‰¤</mo><mi mathvariant="normal">âˆ£</mi><mi>S</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">Ï‰(Gï¼S)â‰¤|S|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord cjk_fallback">ï¼</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">âˆ£</span></span></span></span>ã€‚</p><p><img src="0.png" alt=""></p><p>å› ä¸ºå›¾Gæ˜¯å“ˆå¯†é¡¿å›¾ï¼Œæ‰€ä»¥å¿…å­˜åœ¨å“ˆå¯†é¡¿å›è·¯Cã€‚</p><p>æˆ‘ä»¬æ¥è€ƒå¯Ÿä¸¤ç§æƒ…å†µ</p><p>ï¼ˆiï¼‰Sä¸­çš„é¡¶ç‚¹åœ¨Cä¸­å‡å½¼æ­¤ç›¸é‚»ï¼Œåˆ™ä»Cä¸­åˆ é™¤Sæ‰€æœ‰é¡¶ç‚¹å‡»å…³è”è¾¹ä¸å¢åŠ è¿é€šåˆ†æ”¯ï¼Œå³w(C-S)=1&lt;=|S|</p><p>ï¼ˆiiï¼‰Sä¸­çš„é¡¶ç‚¹åœ¨Cä¸­ä¸ç›¸é‚»ï¼Œä¸å¦¨è®¾æœ‰rä¸ªé¡¶ç‚¹ä¸ç›¸é‚»ï¼Œr&gt;=2,r&lt;=|S|ã€‚åˆ™w(C-S)=r&lt;=|S|</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSä¸­çš„é¡¶ç‚¹åœ¨Cä¸­æ—¢æœ‰ç›¸é‚»çš„ä¹Ÿæœ‰ä¸ç›¸é‚»çš„ã€‚æ‰€ä»¥w(C-Sï¼‰&lt;=|S|ã€‚</p><p>è€ŒG-Sä¸­è¾¹åŒ…å«C-Sçš„è¾¹ï¼Œå› æ­¤w(G-S) &lt;=w(C-S)&lt;=|S|.</p><p><img src="1.png" alt=""></p><p><img src="2.png" alt=""></p><h4 id="å›¾Gçš„é—­åŒ…">å›¾<em>G</em>çš„é—­åŒ…</h4><p>è®¾<em>G</em>æ˜¯ä¸€ä¸ªå›¾ï¼Œåå¤è¿æ¥æ»¡è¶³<em>d</em>(<em>u</em>)ï¼‹<em>d</em>(<em>v</em>)â‰¥nçš„ä¸ç›¸é‚»é¡¶ç‚¹<em>u</em>ï¼Œ<em>v</em>ï¼Œç›´åˆ°æ²¡æœ‰è¿™æ ·çš„é¡¶ç‚¹å¯¹ä¸ºæ­¢ï¼Œè¿™æ ·å¾—åˆ°çš„å›¾ç§°ä½œå›¾<em>G</em>çš„é—­åŒ…ï¼Œè®°ä¸º<em>C</em>(<em>G</em>)ã€‚</p><h4 id="å®šç†ï¼“">å®šç†ï¼“</h4><ul><li>ç®€å•å›¾<em>G</em>æ˜¯Hamiltonå›¾å½“ä¸”ä»…å½“<em>C</em>(<em>G</em>)æ˜¯Hamiltonå›¾ã€‚</li></ul><h4 id="æ¨è®º1">æ¨è®º1</h4><ul><li>è‹¥<em>C</em>(<em>G</em>)æ˜¯å®Œå…¨å›¾ï¼Œåˆ™<em>G</em>æ˜¯Hamiltonå›¾ã€‚</li></ul><h4 id="æ¨è®ºï¼’">æ¨è®ºï¼’</h4><ul><li>è‹¥<em>G</em>ä¸­ä»»æ„ä¸ç›¸é‚»é¡¶ç‚¹<em>u</em>ï¼Œ<em>v</em>å‡æ»¡è¶³<em>d</em>(<em>u</em>)ï¼‹<em>d</em>(<em>v</em>)â‰¥<em>n</em>ï¼Œåˆ™Gæ˜¯Hamiltonå›¾ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦»æ•£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£ï¼š0.å›¾çš„æ¦‚å¿µå’Œæœ¯è¯­</title>
      <link href="/2021/10/12/%E7%A6%BB%E6%95%A3%EF%BC%9A0-%E5%9B%BE%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/"/>
      <url>/2021/10/12/%E7%A6%BB%E6%95%A3%EF%BC%9A0-%E5%9B%BE%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/</url>
      
        <content type="html"><![CDATA[<h1>å›¾çš„æ¦‚å¿µï¼š</h1><h3 id="1ã€å›¾çš„å®šä¹‰ï¼š">1ã€å›¾çš„å®šä¹‰ï¼š</h3><p>ä¸€ä¸ªå›¾G=(V,E)ç”±é¡¶ç‚¹çš„éç©ºé›†Vå’Œè¾¹çš„é›†åˆEæ„æˆï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªé¡¶ç‚¹ä¸å®ƒç›¸è¿ï¼Œè¿™æ ·çš„é¡¶ç‚¹ç§°ä¸ºè¾¹çš„ç«¯ç‚¹ã€‚è¾¹è¿æ¥å®ƒçš„ç«¯ç‚¹ã€‚</p><h3 id="2ã€å›¾çš„åˆ†ç±»">2ã€å›¾çš„åˆ†ç±»</h3><ul><li>æ— å‘å›¾<ul><li>ç®€å•å›¾<ul><li>ç®€å•å›¾G=(V,E)æ˜¯ç”±éç©ºé¡¶ç‚¹é›†Vï¼ˆæœ‰ç©·é›†ï¼‰å’Œè¾¹é›†Eæ‰€ç»„æˆçš„ï¼ŒVçš„ä¸åŒå…ƒç´ çš„æ— åºå¯¹ç§°ä¸ºè¾¹ã€‚ç®€å•å›¾ä¸å­˜åœ¨ç¯ï¼Œä¸”ä¸¤ä¸ªé¡¶ç‚¹é—´æœ€å¤šåªæœ‰ä¸€æ¡è¾¹</li></ul></li><li>å¤šé‡å›¾<ul><li>åœ¨ç®€å•å›¾çš„åŸºç¡€ä¸Šï¼Œå¤šé‡å›¾å…è®¸é¡¶ç‚¹å¯¹ä¹‹é—´æœ‰å¤šé‡è¾¹</li></ul></li><li>ä¼ªå›¾<ul><li>ä¼ªå›¾ä¹Ÿæ˜¯å¤šé‡å›¾ï¼Œå®ƒå¯ä»¥å­˜åœ¨ç¯</li></ul></li></ul></li></ul><p><img src="0.png" alt=""></p><ul><li><p>æœ‰å‘å›¾</p><ul><li>æœ‰å‘å›¾(V,E)æ˜¯ç”±éç©ºé¡¶ç‚¹é›†Vã€è¾¹é›†Eæ‰€ç»„æˆçš„ï¼Œè¾¹Vä¸­å…ƒç´ çš„æœ‰åºå¯¹ã€‚å…è®¸æœ‰ç¯(å³ç›¸åŒå…ƒç´ çš„æœ‰åºå¯¹)ï¼Œä½†ä¸å…è®¸åœ¨ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰åŒå‘çš„å¤šé‡è¾¹ã€‚</li></ul></li><li><p>æœ‰å‘å›¾</p><ul><li>ç®€å•æœ‰å‘å›¾</li><li>æœ‰å‘å¤šé‡å›¾<ul><li>æœ‰å‘å¤šé‡å›¾G=(V,E)æ˜¯ç”±éç©ºé¡¶ç‚¹é›†Vã€è¾¹é›†Eç»„æˆçš„,å…¶ä¸­å¯ä»¥å­˜åœ¨å¤šé‡è¾¹</li></ul></li><li>æ··åˆå›¾</li></ul></li></ul><p><img src="1.png" alt=""></p><h1>å›¾çš„æœ¯è¯­ï¼š</h1><h3 id="degree-of-a-vertex-ï¼ˆé¡¶ç‚¹çš„åº¦ï¼‰">degree of a vertex ï¼ˆé¡¶ç‚¹çš„åº¦ï¼‰</h3><p>åœ¨<strong>æ— å‘å›¾é‡Œé¡¶ç‚¹çš„åº¦æ˜¯ä¸è¯¥é¡¶ç‚¹å…³è”çš„è¾¹çš„æ•°ç›®</strong>ï¼Œä¾‹å¤–çš„æƒ…å½¢æ˜¯ï¼Œé¡¶ç‚¹ä¸Šçš„ç¯ä¸ºé¡¶ç‚¹çš„åº¦åšå‡ºåŒå€è´¡çŒ®</p><ul><li><p>é¡¶ç‚¹vçš„åº¦è®°åšdeg(v)</p></li><li><p>If deg(v) = 0,v is called isolated å­¤ç«‹çš„</p></li><li><p>If deg(v) = 1, v is called pendant æ‚¬æŒ‚çš„</p></li></ul><h4 id="å®šç†ä¸€ï¼šæ¡æ‰‹ç†è®º">å®šç†ä¸€ï¼šæ¡æ‰‹ç†è®º</h4><p><img src="2.png" alt=""></p><h4 id="å®šç†äºŒ">å®šç†äºŒ</h4><p><strong>An undirected graph has an even number of</strong> <strong>vertices of odd degree.</strong> æ— å‘å›¾æœ‰å¶æ•°ä¸ªå¥‡æ•°åº¦é¡¶ç‚¹</p><h3 id="æœ‰å‘å›¾ä¸­çš„åº¦">æœ‰å‘å›¾ä¸­çš„åº¦</h3><p>The in degree å…¥åº¦ of a vertex v, denoted <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><msup><mi>g</mi><mo>âˆ’</mo></msup><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">deg^-(v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ’</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>is the number of edges which terminate at v</p><p>é¡¶ç‚¹vçš„å…¥åº¦æ˜¯ä»¥vä½œä¸ºç»ˆç‚¹çš„è¾¹æ•°ã€‚</p><p>Similarly, the out degree å‡ºåº¦ of v, denoted <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><msup><mi>g</mi><mo>+</mo></msup><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">deg^+(v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>, is the number of edges which initiate at v</p><p>é¡¶ç‚¹vçš„å‡ºåº¦æ˜¯ä»¥vä½œä¸ºèµ·ç‚¹çš„è¾¹æ•°</p><p>å®šç†ä¸‰</p><p><strong>Let</strong> <strong>G = (V, E)</strong> <strong>be a graph with direct edges.</strong> <strong>Then</strong></p><p><img src="3.png" alt=""></p><p><strong>åœ¨å¸¦æœ‰å‘è¾¹çš„å›¾é‡Œï¼Œæ‰€æœ‰é¡¶ç‚¹çš„å…¥åº¦ä¹‹å’Œç­‰äºå‡ºåº¦ä¹‹å’Œã€‚è¿™ä¸¤ä¸ªå’Œéƒ½ç­‰äºå›¾çš„è¾¹æ•°</strong>ã€‚</p><h3 id="ä¸€äº›ç‰¹æ®Šçš„ç®€å•å›¾">ä¸€äº›ç‰¹æ®Šçš„ç®€å•å›¾</h3><ul><li><p><strong>å®Œå…¨å›¾</strong></p><ul><li><strong>nä¸ªé¡¶ç‚¹çš„å®Œå…¨å›¾æ˜¯åœ¨æ¯å¯¹ä¸åŒé¡¶ç‚¹ä¹‹é—´éƒ½æ°æœ‰ä¸€æ¡è¾¹çš„ç®€å•å›¾</strong>ã€‚é€šå¸¸ç”¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">K_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>è¡¨ç¤º</li></ul></li><li><p>åœˆå›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">C_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> (n&gt;2)</p><ul><li>æŒ‡nä¸ªé¡¶ç‚¹å›´æˆä¸€åœˆçš„å›¾</li></ul></li><li><p>è½®å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">W_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>(n&gt;2)</p><ul><li>å½“ç»™åœˆå›¾æ·»åŠ å¦ä¸€ä¸ªé¡¶ç‚¹ï¼Œè€Œä¸”æŠŠè¿™ä¸ªé¡¶ç‚¹ä¸åœˆå›¾é‡Œnä¸ªé¡¶ç‚¹é€ä¸ªè¿æ¥æ—¶ï¼Œå°±å¾—å‡ºè½®å›¾ã€‚</li></ul></li><li><p><strong>å¶å›¾ï¼ˆäºŒåˆ†å›¾ï¼‰</strong></p><ul><li>è‹¥æŠŠç®€å•å›¾Gçš„é¡¶ç‚¹é›†åˆ†æˆä¸¤ä¸ªä¸ç›¸äº¤çš„éç©ºé›†åˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">V_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿å¾—å›¾é‡Œçš„æ¯ä¸€æ¡è¾¹éƒ½è¿æ¥ç€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>é‡Œçš„ä¸€ä¸ªé¡¶ç‚¹ä¸<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">V_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>é‡Œçš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œåˆ™Gç§°ä¸ºå¶å›¾ã€‚</li></ul></li></ul><h3 id="å­å›¾ï¼š">å­å›¾ï¼š</h3><p><img src="4.png" alt=""></p><p>è®¾Gæ˜¯ä¸€ä¸ªå›¾ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub><mo>âŠ†</mo><mi>E</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E_1\subseteq E(G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŠ†</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mclose">)</span></span></span></span>ï¼Œä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºè¾¹é›†ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸­è¾¹çš„ç«¯ç‚¹å…¨ä½“ä¸ºé¡¶ç‚¹é›†æ„æˆçš„å­å›¾ï¼Œç§°ä¸ºç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯¼å‡ºçš„<em>G</em>çš„å­å›¾(è¾¹å¯¼å‡ºå­å›¾)ï¼Œè®°ä¸ºG(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)ã€‚</p><p>åˆè®¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub><mo>âŠ†</mo><mi>V</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_1\subseteq V(G)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŠ†</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mclose">)</span></span></span></span>ï¼Œä»¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºé¡¶ç‚¹é›†ï¼Œç«¯ç‚¹å‡åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸­çš„è¾¹çš„å…¨ä½“ä¸ºè¾¹é›†ï¼Œæ„æˆçš„å­å›¾ï¼Œç§°ä¸ºç”±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯¼å‡ºçš„Gçš„å­å›¾(ç‚¹å¯¼å‡ºå­å›¾)ï¼Œè®°ä¸ºG(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">V_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦»æ•£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸‰æ¬¡åŸ¹è®­ï¼šç½‘ç»œéƒ¨åˆ†</title>
      <link href="/2021/10/11/%E7%AC%AC%E4%B8%89%E6%AC%A1%E5%9F%B9%E8%AE%AD%EF%BC%9A%E7%BD%91%E7%BB%9C%E9%83%A8%E5%88%86/"/>
      <url>/2021/10/11/%E7%AC%AC%E4%B8%89%E6%AC%A1%E5%9F%B9%E8%AE%AD%EF%BC%9A%E7%BD%91%E7%BB%9C%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1>è¡¥å……ï¼šé¡¹ç›®åˆ†åŒ…çš„é—®é¢˜</h1><p>é¡¹ç›®åˆ†åŒ…ï¼Œå…¶å®è·Ÿç”µè„‘åˆ†æ–‡ä»¶å¤¹å½’ç±»æ˜¯ä¸€ä¸ªé“ç†ã€‚å¦‚æœå¤§å®¶ç±»æ¯”è¾ƒå°‘ï¼Œä¸åˆ†åŒ…ä¹Ÿå°±ç®—äº†ï¼Œä½†å¦‚æœåƒè¿™æ ·ï¼š</p><p><img src="3.png" alt=""></p><p>ä¸åˆ†åŒ…ä½ åŠå¤©éƒ½æ‰¾ä¸åˆ°ä½ æƒ³æ‰¾çš„é‚£ä¸ªç±»ã€‚</p><p>æ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹é¡¹ç›®åˆ†åŒ…ï¼ˆæ¶æ„ï¼‰çš„é—®é¢˜ï¼Œå¯¹å¤§å®¶å¤§ä¸€ä¸‹è¯¾è®¾ä¹Ÿæœ‰å¾ˆå¤§å¸®åŠ©ã€‚</p><h2 id="MVCï¼š">MVCï¼š</h2><p>å°±ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹æœ€ç®€å•çš„MVCï¼š</p><p><strong>MVCæ¨¡å¼</strong>ï¼ˆModelâ€“viewâ€“controllerï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B">è½¯ä»¶å·¥ç¨‹</a>ä¸­çš„ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84">è½¯ä»¶æ¶æ„</a>æ¨¡å¼ï¼ŒæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸‰ä¸ªåŸºæœ¬éƒ¨åˆ†ï¼šæ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰å’Œæ§åˆ¶å™¨ï¼ˆControllerï¼‰ã€‚</p><p>MVCæ¨¡å¼æœ€æ—©ç”±<a href="https://zh.wikipedia.org/w/index.php?title=Trygve_Reenskaug&amp;action=edit&amp;redlink=1">Trygve Reenskaug</a>åœ¨1978å¹´æå‡ºï¼Œæ˜¯<a href="https://zh.wikipedia.org/wiki/%E5%B8%95%E7%BE%85%E5%A5%A7%E5%A4%9A%E7%A0%94%E7%A9%B6%E4%B8%AD%E5%BF%83">æ–½ä¹å¸•ç½—å¥¥å¤šç ”ç©¶ä¸­å¿ƒ</a>ï¼ˆXerox PARCï¼‰åœ¨20ä¸–çºª80å¹´ä»£ä¸ºç¨‹åºè¯­è¨€<a href="https://zh.wikipedia.org/wiki/Smalltalk">Smalltalk</a>å‘æ˜çš„ä¸€ç§è½¯ä»¶æ¶æ„ã€‚<strong>MVCæ¨¡å¼</strong>çš„<strong>ç›®çš„æ˜¯å®ç°ä¸€ç§åŠ¨æ€çš„ç¨‹åºè®¾è®¡</strong>ï¼Œ<strong>ä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å’Œæ‰©å±•ç®€åŒ–ï¼Œå¹¶ä¸”ä½¿ç¨‹åºæŸä¸€éƒ¨åˆ†çš„é‡å¤åˆ©ç”¨æˆä¸ºå¯èƒ½</strong>ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ­¤æ¨¡å¼é€è¿‡å¯¹å¤æ‚åº¦çš„ç®€åŒ–ï¼Œä½¿ç¨‹åºç»“æ„æ›´åŠ ç›´è§‚ã€‚è½¯ä»¶ç³»ç»Ÿé€è¿‡å¯¹è‡ªèº«åŸºæœ¬éƒ¨åˆ†åˆ†ç¦»çš„åŒæ—¶ä¹Ÿèµ‹äºˆäº†å„ä¸ªåŸºæœ¬éƒ¨åˆ†åº”æœ‰çš„åŠŸèƒ½ã€‚ä¸“ä¸šäººå‘˜å¯ä»¥ä¾æ®è‡ªèº«çš„ä¸“é•¿åˆ†ç»„ï¼š</p><ul><li>æ¨¡å‹ï¼ˆModelï¼‰ - ç¨‹åºå‘˜ç¼–å†™ç¨‹åºåº”æœ‰çš„åŠŸèƒ½ï¼ˆå®ç°ç®—æ³•ç­‰ç­‰ï¼‰ã€æ•°æ®åº“ä¸“å®¶è¿›è¡Œæ•°æ®ç®¡ç†å’Œæ•°æ®åº“è®¾è®¡(å¯ä»¥å®ç°å…·ä½“çš„åŠŸèƒ½)ã€‚</li><li>è§†å›¾ï¼ˆViewï¼‰ - ç•Œé¢è®¾è®¡äººå‘˜è¿›è¡Œå›¾å½¢ç•Œé¢è®¾è®¡ã€‚</li><li>æ§åˆ¶å™¨ï¼ˆControllerï¼‰- è´Ÿè´£è½¬å‘è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</li></ul><p>ä»¥ä¸Šå¼•è‡ªç»´åŸºç™¾ç§‘ã€‚</p><p>æ‰€ä»¥å¯¹åº”åˆ°æˆ‘ä»¬çš„å®‰å“é¡¹ç›®ä¸­è¦æ€ä¹ˆåˆ†åŒ…å‘¢ï¼Ÿå°±ç°åœ¨è€Œè¨€ï¼Œå…¶å®å¾ˆç®€å•ï¼š</p><ul><li><strong>Model</strong>ï¼ˆentityï¼‰ï¼šå¯¹åº”åˆ°bean</li><li><strong>View</strong>ï¼šå…¶å®å°±æ˜¯æˆ‘ä»¬å†™çš„xmlæ–‡ä»¶ï¼Œå¦‚æœæœ‰åŒå­¦ç”¨javaå®šä¹‰ç»„ä»¶å°±å•ç‹¬åˆ†ç¦»å‡ºæ¥</li><li><strong>Controller</strong>ï¼šå…¶å®å°±æ˜¯æˆ‘ä»¬çš„activityçš„ç±»æ–‡ä»¶</li><li><strong>Dao</strong>ï¼šå¯¹åº”åˆ°å°è£…çš„å¯¹æ•°æ®åº“çš„æ“ä½œ</li><li><strong>Util</strong>ï¼šå·¥å…·ç±»ï¼ˆæ¯”å¦‚recyclerviewçš„adapterï¼‰</li></ul><p>å¦‚ä¸Šç­‰ç­‰ï¼Œä½ å¯èƒ½è§‰å¾—å¥½åƒé¡¹ç›®å¹¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œé‚£æ˜¯å› ä¸ºï¼Œä¸€æ–¹é¢ï¼Œå®‰å“åŸç”Ÿå¯¹ç•Œé¢å’Œé€»è¾‘çš„è§£è€¦æ¯”è¾ƒå½»åº•ï¼Œå¦ä¸€æ–¹é¢ï¼Œç°åœ¨é¡¹ç›®è¿˜å¤ªå°ï¼Œç”šè‡³ä¸è¶³ä»¥ç§°ä¹‹ä¸ºé¡¹ç›®ã€‚ä½†è¿™ä¸ªæ€æƒ³å¿…é¡»è¦æœ‰ï¼Œè¶Šæ—©è¶Šå¥½ã€‚ï¼ˆ<s>è¸©å‘ç»å†</s>ï¼‰</p><h1>javaBean:ç±»ä¸å¯¹è±¡</h1><p>æˆ‘ä»¬å¸¸å¸¸è®²<strong>æŠ½è±¡ç±»</strong>ä¸<strong>å®ä¾‹åŒ–å¯¹è±¡</strong>ï¼Œå…¶å®ä¹Ÿæ­£æ˜¯è¿™ç§æ€æƒ³.</p><ul><li><p>ç±»æ˜¯å¯¹ä¸€ç±»äº‹ç‰©çš„æè¿°ï¼Œæ˜¯<strong>æŠ½è±¡çš„</strong></p></li><li><p>å¯¹è±¡æ˜¯ä¸€ç±»äº‹ç‰©çš„å®ä¾‹ï¼Œæ˜¯<strong>å…·ä½“çš„</strong></p></li><li><p><strong>ç±»æ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä½“</strong></p><hr></li></ul><h2 id="javaä¸­çš„ç±»ï¼š">javaä¸­çš„ç±»ï¼š</h2><ul><li><p>ç°å®ä¸­ï¼Œæè¿°ä¸€ç±»äº‹ç‰©ï¼š</p><ul><li><strong>å±æ€§ï¼šå°±æ˜¯è¯¥äº‹ç‰©çš„çŠ¶æ€ä¿¡æ¯ã€‚</strong></li><li><strong>è¡Œä¸ºï¼šå°±æ˜¯è¯¥äº‹ç‰©èƒ½å¤Ÿåšä»€ä¹ˆã€‚</strong></li></ul></li><li><p>ä¸¾ä¾‹ï¼šçŒ«ã€‚<br>å±æ€§ï¼šåå­—ã€å¹´é¾„ã€é¢œè‰²ã€‚<br>è¡Œä¸ºï¼šèµ°ã€è·‘ã€åƒ</p></li><li><p>ç”¨ä»£ç æ¥è®²ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;walk&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="javaä¸­çš„å¯¹è±¡ï¼š">javaä¸­çš„å¯¹è±¡ï¼š</h2><p>å¦‚æœå°†ç±»çœ‹åšæ¨¡æ¿ï¼Œé‚£ä¹ˆç±»å¯ä»¥çœ‹åšæ¨¡æ¿åŠ å·¥å‡ºçš„å®ä½“ã€‚è¿™ä¸ªå®ä½“è¦æœ‰æ¨¡æ¿çš„æ‰€æœ‰å±æ€§ï¼Œä¹Ÿèƒ½æ‰§è¡Œæ¨¡æ¿çš„æ‰€æœ‰è¡Œä¸ºã€‚</p><p>ä»¥ä¸Šé¢çš„çŒ«ä¸ºä¾‹ï¼Œè¿›è¡Œå¯¹è±¡çš„å®ä¾‹åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cat whc = <span class="keyword">new</span> Cat();</span><br></pre></td></tr></table></figure><p>å¯èƒ½ä¼šé—®ï¼Œéƒ½è¯´äº†å®ä½“è¦æœ‰æ¨¡æ¿çš„æ‰€æœ‰å±æ€§ï¼Œä¹Ÿæ²¡çœ‹è§ä½ å†™ä½ è¿™çŒ«çš„å±æ€§å•Šï¼Ÿ</p><p>é‚£æ˜¯å› ä¸ºæ¯ä¸ªç±»éƒ½æœ‰çº¦å®šå¯¹è±¡è¯¥å¦‚ä½•è¿›è¡Œå®ä¾‹åŒ–çš„<strong>æ„é€ æ–¹æ³•</strong>ï¼Œå¦‚æœç±»é‡Œé¢æ²¡å†™ï¼Œé»˜è®¤ä¼šæ·»åŠ ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ï¼Œå¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;walk&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cat</span><span class="params">(String name, <span class="keyword">int</span> age, String color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™æ—¶å€™ä½ å†åƒä¸Šé¢é‚£æ ·å®šä¹‰<code>whc</code>è¿™ä¸ª<code>cat</code>ï¼Œå°±ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬çš„æ„é€ æ–¹æ³•çº¦å®šäº†åœ¨æ„é€ çŒ«è¿™ä¸ªå¯¹è±¡æ—¶è¦ä¼ å…¥çŒ«çš„æ‰€æœ‰å±æ€§ï¼Œè€Œä¸”æˆ‘ä»¬è‡ªå®šä¹‰äº†æ„é€ æ–¹æ³•ï¼Œjavaä¾¿ä¸å†æ·»åŠ é»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚<strong>ä½†æ˜¯ï¼Œä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ã€‚</strong></p><p>æ­£è§£å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cat eric = <span class="keyword">new</span> Cat(<span class="string">&quot;whc&quot;</span>,<span class="number">6</span>,<span class="string">&quot;yellow&quot;</span>);</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”ï¼Œæˆ‘ä»¬è¿˜èƒ½è®©<code>whc</code>æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">whc.eat();</span><br><span class="line">whc.run();</span><br><span class="line">whc.walk();</span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;walk&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cat</span><span class="params">(String name, <span class="keyword">int</span> age, String color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Cat whc = <span class="keyword">new</span> Cat(<span class="string">&quot;whc&quot;</span>,<span class="number">6</span>,<span class="string">&quot;yellow&quot;</span>);</span><br><span class="line">        whc.eat();</span><br><span class="line">        whc.run();</span><br><span class="line">        whc.walk();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="PS">PS.</h2><p>getterä¸setterå¯ä»¥è‡ªè¡ŒæŸ¥é˜…ï¼Œæ¯”è¾ƒå¥½ç†è§£</p><h1>json:ç½‘ç»œé€šä¿¡çš„è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼</h1><h2 id="å¼•å…¥ï¼š">å¼•å…¥ï¼š</h2><p>æˆ‘ä»¬åº”å½“æ³¨æ„ï¼Œåœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­å¾ˆå°‘ä¼ é€’å¯¹è±¡ã€‚ä¸€æ–¹é¢ï¼Œç½‘ç»œä¼ è¾“é‡‡ç”¨çš„æ˜¯æµçš„æ–¹å¼ï¼Œæœ¬èº«å°±æ¶‰åŠä¸€å®šçš„ç¼–ç é—®é¢˜ï¼Œè¿™å°±å¯¼è‡´ä¸€ä¸ªå¯¹è±¡ä¼ é€’è¿‡æ¥è¿˜éœ€è¦ä¸€å®šçš„æ“ä½œæ‰èƒ½è¿›è¡Œè¿˜åŸï¼Œå¦ä¸€æ–¹é¢ï¼Œä¼ é€’å¯¹è±¡çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œè€Œä¸”å¯¹è±¡çš„æ–¹æ³•æ˜¯æ— æ³•ç¼–ç ä¼ é€’çš„ã€‚ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨æ— æ³•ä¼ è¾“ï¼Œåªæ˜¯ä¸æ¨èï¼‰</p><p>é‚£ä¹ˆä¸€ä¸ªå¯¹è±¡æ˜¯å¦‚ä½•é€šè¿‡ç½‘ç»œä¼ è¾“å‘¢ï¼Ÿè¿™å°±ç”¨åˆ°jsonäº†ã€‚</p><p><img src="0.png" alt=""></p><p>å¯¹è±¡åœ¨ç½‘ç»œä¸­çš„ä¼ é€’æ¶‰åŠåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œ<strong>åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡çŠ¶æ€è½¬æ¢ä¸ºå¯ä¿æŒæˆ–ä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚ä¸åºåˆ—åŒ–ç›¸å¯¹çš„æ˜¯ååºåˆ—åŒ–ï¼Œå®ƒå°†æµè½¬æ¢ä¸ºå¯¹è±¡</strong>ã€‚è¿™ä¸¤ä¸ªè¿‡ç¨‹ç»“åˆèµ·æ¥ï¼Œå¯ä»¥è½»æ¾åœ°å­˜å‚¨å’Œä¼ è¾“æ•°æ®ã€‚</p><p>æ¯”å¦‚ï¼ŒjavaBeanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line">    <span class="keyword">private</span> String[] friends;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªåå«<code>whc</code>çš„<code>cat</code>å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cat whc = <span class="keyword">new</span> Cat(<span class="string">&quot;whc&quot;</span>,<span class="number">6</span>,<span class="string">&quot;yellow&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;lzw&quot;</span>, <span class="string">&quot;kmh&quot;</span>&#125;);</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;whc&quot;</span></span><br><span class="line">    <span class="string">&quot;age&quot;</span>:<span class="number">6</span>,</span><br><span class="line">    <span class="attr">&quot;color&quot;</span>:<span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;friends&quot;</span>:[<span class="string">&quot;lzw&quot;</span>,<span class="string">&quot;kmh&quot;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(JSON.toJSONString(whc));</span><br></pre></td></tr></table></figure><h2 id="JSON-è¯­æ³•è§„åˆ™">JSON è¯­æ³•è§„åˆ™</h2><ul><li>æ•°æ®ä¸º é”®/å€¼ å¯¹ã€‚</li><li>æ•°æ®ç”±é€—å·åˆ†éš”ã€‚</li><li>å¤§æ‹¬å·ä¿å­˜å¯¹è±¡</li><li>æ–¹æ‹¬å·ä¿å­˜æ•°ç»„</li></ul><h2 id="JSONObjectï¼š">JSONObjectï¼š</h2><ul><li><p>ä½¿ç”¨å¤§æ‹¬å·ç¯ç»•</p></li><li><p>å†…å®¹ä¸º<strong>é”®å€¼å¯¹</strong>ï¼Œé”®å€¼ä½¿ç”¨åŠè§’å†’å·åˆ†å¼€</p></li><li><p>é”®çš„ç±»å‹ä¸ºå­—ç¬¦ä¸²</p></li><li><p>å€¼çš„ç±»å‹å¯ä»¥ä¸ºæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€<code>JsonObject</code>ã€<code>JsonArray</code></p></li><li><p>è·å–å€¼æ—¶é€šè¿‡é”®æ¥è·å–</p></li><li><p>ä¸Javaçš„Mapå¯¹åº”</p></li></ul><p>æ¯”å¦‚ï¼Œæˆ‘å¯ä»¥å°†åºåˆ—åŒ–çš„æ»¡è¶³jsonæ ¼å¼çš„Stringååºåˆ—åŒ–ä¸ºJSONObjectï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cat whc = <span class="keyword">new</span> Cat(<span class="string">&quot;whc&quot;</span>,<span class="number">6</span>,<span class="string">&quot;yellow&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;lzw&quot;</span>, <span class="string">&quot;kmh&quot;</span>&#125;);</span><br><span class="line">String whcString = JSON.toJSONString(whc);</span><br><span class="line">-----------------</span><br><span class="line">JSONObject whcObject = JSON.parseObject(whcString);</span><br></pre></td></tr></table></figure><p>ä½†èƒ½ä¸èƒ½å°†JSONObjectè½¬æ¢æˆCatå‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†å¹¶ä¸èƒ½ç›´æ¥è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å°è£…ä¸€ä¸ªæ–¹æ³•ã€‚</p><h2 id="JSONArrayï¼š">JSONArrayï¼š</h2><ul><li><p>ä½¿ç”¨æ–¹æ‹¬å·ç¯ç»•</p></li><li><p>å†…å®¹å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€<code>JsonObject</code>ã€<code>JsonArray</code></p></li><li><p>æ ¹æ®æ•°ç»„ä¸‹æ ‡è·å–æ¯ä¸€é¡¹</p></li><li><p>ä¸Javaçš„Listå¯¹åº”</p></li></ul><p>æ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Cat whc = <span class="keyword">new</span> Cat(<span class="string">&quot;whc&quot;</span>,<span class="number">6</span>,<span class="string">&quot;yellow&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;lzw&quot;</span>, <span class="string">&quot;kmh&quot;</span>&#125;);</span><br><span class="line">String whcString = JSON.toJSONString(whc);</span><br><span class="line">-----------------</span><br><span class="line">JSONObject whcObject = JSON.parseObject(whcString);</span><br><span class="line">JSONArray whcArray = whcObject.getJSONArray(<span class="string">&quot;friends&quot;</span>);</span><br><span class="line">System.out.println(whcArray);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š[&quot;lzw&quot;,&quot;kmh&quot;]</span></span><br></pre></td></tr></table></figure><h2 id="åº“ï¼š">åº“ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.alibaba:fastjson:1.2.62&#x27;</span></span><br><span class="line">implementation <span class="string">&#x27;com.google.code.gson:gson:2.8.6&#x27;</span></span><br></pre></td></tr></table></figure><h1>HTTPè¯·æ±‚:</h1><p><a href="https://www.runoob.com/http/http-tutorial.html">èœé¸Ÿæ•™ç¨‹HTTPè¯¦è§£</a></p><table><thead><tr><th>è¯·æ±‚ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>get</td><td><strong>è¯·æ±‚</strong>æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“ã€‚  (æäº¤æ•°æ®æ”¾åœ¨URLä¹‹å)</td></tr><tr><td>post</td><td>å‘æŒ‡å®šèµ„æº<strong>æäº¤æ•°æ®</strong>ï¼Œè¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚<strong>æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­</strong>ã€‚POST è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚(è¯·æ±‚æ•°æ®æ”¾åœ¨bodyä¸­)</td></tr></tbody></table><h2 id="javaä¸­ä½¿ç”¨HTTPâ€”â€”HttpURLConnection"><strong>javaä¸­ä½¿ç”¨HTTPâ€”â€”HttpURLConnection</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ·ä¾‹,ä»…ä¾›å‚è€ƒ  </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//å¼€å¯çº¿ç¨‹ï¼Œå‘é€è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                HttpURLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">                BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    URL url = <span class="keyword">new</span> URL(<span class="string">&quot;http://wthrcdn.etouch.cn/weather_mini?city=åŒ—äº¬&quot;</span>);</span><br><span class="line">                    connection = (HttpURLConnection) url.openConnection();</span><br><span class="line">                    <span class="comment">//è®¾ç½®è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">                    connection.setRequestMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">                    <span class="comment">//è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">                    connection.setConnectTimeout(<span class="number">5000</span>);</span><br><span class="line">                    <span class="comment">//è®¾ç½®è¯»å–è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">                    connection.setReadTimeout(<span class="number">5000</span>);</span><br><span class="line">                    <span class="comment">//è¿”å›è¾“å…¥æµ</span></span><br><span class="line">                    InputStream in = connection.getInputStream();</span><br><span class="line">                    <span class="comment">//è¯»å–è¾“å…¥æµ</span></span><br><span class="line">                    reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in));</span><br><span class="line">                    StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                    String line;</span><br><span class="line">                    <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        result.append(line);</span><br><span class="line">                    &#125;</span><br><span class="line">              <span class="comment">//å°†Stringæ•°æ®è½¬æ¢æˆjson</span></span><br><span class="line">                    JSONObject jsonObject= JSON.parseObject(result.toString());</span><br><span class="line">                    <span class="comment">//é€šè¿‡get()è·å–æ•°æ®</span></span><br><span class="line">                    String msg = jsonObject.get(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">                    </span><br><span class="line">                    </span><br><span class="line">                    </span><br><span class="line">                &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ProtocolException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            reader.close();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;<span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">                        connection.disconnect();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="OkHttp3"><strong>OkHttp3</strong></h2><p>ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ”¯æŒå¤šç§Httpè¯·æ±‚ï¼Œå¼‚æ­¥å¤„ç†ç»“æœç­‰ç­‰ï¼Œå»ºè®®ä½¿ç”¨</p><h4 id="å¤§è‡´ç»“æ„ï¼š">å¤§è‡´ç»“æ„ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ·ä¾‹ï¼Œä»…ä¾›å‚è€ƒï¼ŒOKHTTPå…¶ä»–ç”¨æ³•è‡ªè¡Œç™¾åº¦ï¼Œå¯ä»¥ç›´æ¥copyï¼Œä½†æ˜¯è‡ªå·±å…ˆå­¦ä¼šå¦‚ä½•ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendOkhttpRequest</span><span class="params">(String address, okhttp3.Callback callback)</span> </span>&#123;</span><br><span class="line">        OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">        Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">                .url(address)</span><br><span class="line">                .get()</span><br><span class="line">                .build();</span><br><span class="line">        client.newCall(request).enqueue(callback);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OKHttp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        sendOkhttpRequest(<span class="string">&quot;http://wthrcdn.etouch.cn/weather_mini?city=åŒ—äº¬&quot;</span>, <span class="keyword">new</span> okhttp3.Callback() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Call call, Response response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                <span class="comment">//è·å–è¿”å›æ•°æ®å¹¶ä»¥Stringæ ¼å¼ä¿å­˜</span></span><br><span class="line">                String responseData = response.body().string();</span><br><span class="line">                <span class="comment">//å°†Stringæ ¼å¼è½¬æ¢ä¸ºjsonæ ¼å¼</span></span><br><span class="line">                JSONObject obj = JSON.parseObject(responseData);</span><br><span class="line">                <span class="comment">//è·å–JSONArray</span></span><br><span class="line">                JSONObject data = JSon.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">   JSONArray array=data.getJSONArray(<span class="string">&quot;forecast&quot;</span>);</span><br><span class="line">                <span class="comment">//å°†JSONArrayä¸­æ¯ä¸ªä½ç½®åˆ†åˆ°JSONobjectæ•°ç»„é‡Œ</span></span><br><span class="line">                JSONObject[] objects = <span class="keyword">new</span> JSONObject[array.size()];</span><br><span class="line">                <span class="comment">//ä¸ä¼šå§ï¼Œä¸ä¼šå§ï¼Œä¸ä¼šçœŸæœ‰äººæç¤ºåˆ°è¿™ç§ç¨‹åº¦äº†è¿˜ä¸ä¼šåšå§ï¼ˆç‹—å¤´ï¼‰</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(Call call, IOException e)</span> </span>&#123;</span><br><span class="line">     <span class="comment">//æ‰“å°å¼‚å¸¸æ ˆ</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="getä¸postè¯·æ±‚çš„åŒºåˆ«ï¼š">getä¸postè¯·æ±‚çš„åŒºåˆ«ï¼š</h4><p>æœ€ç›´è§‚çš„åŒºåˆ«æ˜¯ï¼Œgetçš„å‚æ•°å†™åœ¨URLé‡Œï¼Œç”¨ï¼Ÿï¼ˆå ä½ç¬¦ï¼‰ä¸ipæˆ–è€…åŸŸåéš”å¼€ï¼Œå‚æ•°ä¹‹é—´ç”¨&amp;éš”å¼€ã€‚è€Œpostæ”¾åœ¨bodyé‡Œã€‚</p><p>å¦å¤–ï¼Œgetä¸€èˆ¬ç”¨äºè¯·æ±‚èµ„æºï¼ŒRESTful APIä¸­getä¸€å®šæ˜¯ç”¨æ¥è¯·æ±‚èµ„æºçš„ã€‚postç”¨äºå‘æœåŠ¡å™¨å‘é€èµ„æº/æ•°æ®ã€‚</p><p>å¯¹äºokhttpä¸­æ‰§è¡Œpostè¯·æ±‚ï¼Œä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendPost</span><span class="params">(String address, okhttp3.Callback callback,RequestBody body)</span> </span>&#123;</span><br><span class="line">            OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">    Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">            .url(address)</span><br><span class="line">            .post(body)      <span class="comment">//æ³¨æ„è¿™é‡Œ</span></span><br><span class="line">            .build();</span><br><span class="line">    client.newCall(request).enqueue(callback);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­requestBodyå¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MultipartBody.Builder builder = <span class="keyword">new</span> MultipartBody.Builder()</span><br><span class="line">                     .setType(MultipartBody.FORM)</span><br><span class="line">                     .addFormDataPart(<span class="string">&quot;account&quot;</span>, <span class="string">&quot;1111&quot;</span>);</span><br><span class="line"></span><br><span class="line">RequestBody requestBody = builder.build();</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„ï¼š">æ³¨æ„ï¼š</h4><p>Androidä¸­å‘èµ·httpè¯·æ±‚éœ€è¦æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œä¸èƒ½åœ¨UIä¸»çº¿ç¨‹ä¸­è¿›è¡Œç½‘ç»œè®¿é—®ï¼Œä¸ç„¶å®¹æ˜“å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ï¼Œappå´©æºƒï¼ˆå´©æºƒç†ç”±ä¸ä¼šçš„è‡ªè¡Œç™¾åº¦ï¼‰ã€‚<strong>OKhttpä¼šè‡ªåŠ¨ç»™ä½ å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚</strong></p><p>UIçš„æ›´æ–°åªèƒ½åœ¨ä¸»çº¿ç¨‹è¿›è¡Œï¼Œä¸ç„¶appä¹Ÿä¼šå´©æºƒï¼ˆåŸå› ä¸ä¼šçš„è‡ªè¡Œç™¾åº¦ï¼‰ï¼Œè§£å†³æ–¹æ³•è‡ªè¡Œç™¾åº¦ã€‚</p><p>å¦‚æœä½ æƒ³æ›´æ–°UIï¼Œæç¤ºå¯ä»¥ä½¿ç”¨runOnUiThreadï¼ŒAsyncTaskã€Handlerç­‰ï¼Œç”¨æ³•è‡ªè¡Œå­¦ä¹ ã€‚</p><p>21çº§ä½¿ç”¨runOnUiThreadï¼ŒAsyncTaskã€Handlerç­‰å¯ä»¥åŠ åˆ†ï¼Œ20çº§å¼ºåˆ¶ä½¿ç”¨ï¼ˆå¦‚æœéœ€è¦ç”¨ï¼‰ã€‚</p><h2 id="Androidä¸­çš„ç½‘ç»œè®¿é—®é™åˆ¶">Androidä¸­çš„ç½‘ç»œè®¿é—®é™åˆ¶</h2><ul><li><p>Manifestä¸­éœ€è¦ç”³è¯·INTERNETæƒé™</p></li><li><p>Android PåŠä»¥ä¸Šçš„ç³»ç»Ÿæœ‰å¼ºåˆ¶ä½¿ç”¨httpsé™åˆ¶ï¼Œéœ€æ‰‹åŠ¨ç¼–å†™é…ç½®æ–‡ä»¶ç»•è¿‡</p><p>è¿™ä¸ªå…·ä½“ä½¿ç”¨è™½ç„¶æˆ‘å†™äº†ï¼Œä½†æˆ‘ä¸æ”¾ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œå¾ˆç®€å•ã€‚ï¼ˆæˆ‘å†å†™çš„è¯ä½ ä»¬ä½œä¸šå°±ç›´æ¥å…¨copyå®Œäº†ï¼‰ï¼Œå¤§å®¶ä¸è¦æ€•è¸©å‘ï¼Œåªæœ‰è¸©å‘æ‰ä¼šç§¯ç´¯ç»éªŒã€‚</p></li></ul><h1>æ¥å£æ–‡æ¡£</h1><table><thead><tr><th>ä¿®è®¢ç‰ˆæœ¬å·</th><th>ä¿®è®¢æ—¥æœŸ</th><th>ä¿®æ”¹äºº</th><th>ä¿®æ”¹å†…å®¹</th></tr></thead><tbody><tr><td>1.0</td><td>2021.8.27</td><td>èµµç‚œå®</td><td>Init</td></tr><tr><td>1.1</td><td>8.28</td><td>èµµç‚œå®</td><td>å¯¹å‘åŠ¨æ€çš„èº«ä»½è®¤è¯åšäº†ä¼˜åŒ–</td></tr><tr><td>2.0</td><td>10.16</td><td>èµµç‚œå®</td><td>æ›´æ”¹ç«¯å£ï¼›å¢åŠ ä¸Šä¼ å¤´åƒ</td></tr><tr><td>2.1</td><td>10.20</td><td>èµµç‚œå®</td><td>æ£€ä¿®ï¼Œè¿ç§»ï¼›å¢åŠ è·å–ç”¨æˆ·å</td></tr></tbody></table><h2 id="é¡¹ç›®åŸºæœ¬è¯´æ˜">é¡¹ç›®åŸºæœ¬è¯´æ˜</h2><ul><li><p>é¡¹ç›®æ¥å£æ ¹ç›®å½•ä¸ºhttp://82.156.169.66:8181ï¼Œä¸‹æ–¹ä»¥URLä»£æ›¿</p></li><li><p><strong>ç»Ÿä¸€çš„é”™è¯¯ç </strong></p></li></ul><table><thead><tr><th>é”™è¯¯ç </th><th>ä¿¡æ¯</th></tr></thead><tbody><tr><td>-1</td><td>è¾“å…¥çš„ä¿¡æ¯ä¸å®Œæ•´ï¼ˆç¼ºå°‘ï¼‰æˆ–ä¸åˆæ³•ï¼ˆä¸ºç©ºï¼‰</td></tr><tr><td>-2</td><td>ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²è¢«æ³¨å†Œ</td></tr><tr><td>-3</td><td>å¯†ç é”™è¯¯</td></tr></tbody></table><p><strong>è¿”å›å€¼æ˜¯ç”±codeï¼Œmessageï¼Œdataæ„æˆçš„jsonï¼Œä¸‹æ–‡çš„ä¼ å‡ºå‚æ•°æŒ‡çš„æ˜¯dataéƒ¨åˆ†</strong></p><h2 id="1ã€ç”¨æˆ·æ“ä½œ-URLï¼š-user">1ã€ç”¨æˆ·æ“ä½œ   URLï¼š/user</h2><h3 id="1-1-ç™»å½•">1.1 ç™»å½•</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/login</td><td>GET</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr><tr><td>password</td><td>String</td><td>å¦</td><td>å¯†ç </td></tr></tbody></table><p>ä¹Ÿå°±æ˜¯è¯´ç™»å½•çš„å®Œæ•´URLä¸ºhttp://82.156.169.66:8181/user/login</p><p>æˆåŠŸä¹‹åæ²¡æœ‰è¿”å›çš„æ•°æ®ï¼Œæ ·ä¾‹ï¼š</p><img src="2.png"  style="zoom:80%;" /><h3 id="1-2-æ³¨å†Œ">1.2 æ³¨å†Œ</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/register</td><td>GET</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr><tr><td>password</td><td>String</td><td>å¦</td><td>å¯†ç </td></tr><tr><td>username</td><td>String</td><td>å¦</td><td>ç”¨æˆ·å</td></tr></tbody></table><h3 id="1-3-ä¿®æ”¹å¯†ç ">1.3 ä¿®æ”¹å¯†ç </h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/changePassword</td><td>GET</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr><tr><td>oldPwd</td><td>String</td><td>å¦</td><td>æ—§å¯†ç </td></tr><tr><td>newPwd</td><td>String</td><td>å¦</td><td>æ–°å¯†ç </td></tr></tbody></table><h3 id="1-4-è·å–ç”¨æˆ·å">1.4 è·å–ç”¨æˆ·å</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/username</td><td>GET</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr></tbody></table><table><thead><tr><th>ä¼ å‡ºå‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>username</td><td>String</td><td>ç”¨æˆ·å</td></tr></tbody></table><h2 id="2ã€åŠ¨æ€-URLï¼š-message">2ã€åŠ¨æ€  URLï¼š/message</h2><h3 id="2-1-å‘å¸ƒåŠ¨æ€">2.1 å‘å¸ƒåŠ¨æ€</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/send</td><td>POST</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>senderName</td><td>String</td><td>å¦</td><td>å‘åŠ¨æ€çš„ç”¨æˆ·å</td></tr><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr><tr><td>messageText</td><td>String</td><td>å¦</td><td>åŠ¨æ€å†…å®¹</td></tr></tbody></table><h3 id="2-2è·å–åŠ¨æ€">2.2è·å–åŠ¨æ€</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/get</td><td>GET</td></tr></tbody></table><p>ä¼ å‡ºå‚æ•°dataä¸ºJSONArray</p><table><thead><tr><th>å•ä¸ªä¼ å‡ºå‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>idï¼ˆåºå·ï¼‰</td></tr><tr><td>time</td><td>String</td><td>å‘å¸ƒæ—¶é—´</td></tr><tr><td>senderName</td><td>String</td><td>å‘åŠ¨æ€çš„ç”¨æˆ·å</td></tr><tr><td>messageText</td><td>String</td><td>åŠ¨æ€å†…å®¹</td></tr><tr><td>account</td><td>String</td><td>è´¦å·</td></tr></tbody></table><p>æ ·ä¾‹ï¼š</p><img src="1.png"  style="zoom:60%;" /><h2 id="3ã€-å‘å¸ƒå¤´åƒä¸è·å–å¤´åƒ-RESTful-API">3ã€ å‘å¸ƒå¤´åƒä¸è·å–å¤´åƒ(RESTful API)</h2><h3 id="3-1-å‘å¸ƒå¤´åƒ">3.1 å‘å¸ƒå¤´åƒ</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/headImage</td><td>POST</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr><tr><td>file</td><td>file</td><td>å¦</td><td>å›¾ç‰‡æ–‡ä»¶</td></tr></tbody></table><h3 id="3-2-è·å–å¤´åƒ">3.2 è·å–å¤´åƒ</h3><table><thead><tr><th>URL</th><th>method</th></tr></thead><tbody><tr><td>/headImage</td><td>GET</td></tr></tbody></table><table><thead><tr><th>ä¼ å…¥å‚æ•°</th><th>ç±»å‹</th><th>æ˜¯å¦å¯ä¸ºç©º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>account</td><td>String</td><td>å¦</td><td>è´¦å·</td></tr></tbody></table><table><thead><tr><th>å•ä¸ªä¼ å‡ºå‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>å›¾ç‰‡ä¿å­˜çš„åœ°å€</td></tr></tbody></table><img src="4.png"  style="zoom:60%;" /><h1>ä½œä¸šï¼š</h1><p>é€šè¿‡ä¸‰æ¬¡æ¬¡åŸ¹è®­ï¼Œå®Œæˆä¸€ä¸ªâ€œæ ‘æ´â€æˆ–è€…â€œè¡¨ç™½å¢™â€</p><h3 id="åŸºæœ¬è¦æ±‚ï¼š">åŸºæœ¬è¦æ±‚ï¼š</h3><p>åœ¨ç¬¬äºŒæ¬¡ä½œä¸šçš„åŸºç¡€ä¸Šä½¿ç”¨ç½‘ç»œ</p><p>ä½¿ç”¨ç½‘ç»œè¿›è¡Œç™»å½•ï¼Œæ³¨å†Œï¼Œå‘å¸ƒåŠ¨æ€ï¼Œè·å–åŠ¨æ€ã€‚</p><h3 id="è¿›é˜¶ä»»åŠ¡ï¼š">è¿›é˜¶ä»»åŠ¡ï¼š</h3><p>1ã€å®Œæˆä¿®æ”¹å¯†ç åŠŸèƒ½ã€‚</p><p>2ã€æ›´åŠ å®Œå–„åŠç¾è§‚çš„ç•Œé¢ï¼ˆç±»ä¼¼äºæ ¡åœˆåœˆé‚£ç§ï¼Œè€Œä¸æ˜¯å¯æ€œå·´å·´çš„ä¸‰ä¸ªç•Œé¢ï¼‰ã€‚</p><p>3ã€å®ç°å¤´åƒåŠŸèƒ½ã€‚</p><p><strong>ä¸‰ä¸ªè¿›é˜¶ä»»åŠ¡å®Œæˆåéƒ½æœ‰ç›¸åº”åŠ åˆ†</strong></p><p>æäº¤æ–¹å¼ï¼šå°†srcæ–‡ä»¶å¤¹æ‰“åŒ…åå‘é€åˆ°é‚®ç®±  <a href="mailto:2134356214@qq.com">2134356214@qq.com</a></p><p>ç¬¬äºŒæ¬¡ä½œä¸šä¾æ—§è¦äº¤ï¼Œå‘é€è‡³é‚®ç®± <a href="mailto:718102754@qq.com">718102754@qq.com</a></p><p>DDLï¼š10æœˆ25æ—¥ï¼ˆå‘¨ä¸€ï¼‰ä¸­åˆ12:00</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å“åŸç”Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡åŸåˆ™ä¸MaterialDesignåŸºç¡€åŸåˆ™</title>
      <link href="/2021/10/07/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E4%B8%8EMaterialDesign%E5%9F%BA%E7%A1%80%E5%8E%9F%E5%88%99/"/>
      <url>/2021/10/07/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E4%B8%8EMaterialDesign%E5%9F%BA%E7%A1%80%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1>åŸºç¡€è®¾è®¡åŸåˆ™ï¼š</h1><blockquote><p>ä¸€æ—¦ä½ èƒ½å¤Ÿè¯´å‡ºä»€ä¹ˆä¸œè¥¿çš„åå­—ï¼Œå°±ä¼šå¾ˆå®¹æ˜“æ³¨æ„åˆ°å®ƒã€‚ä½ å°±ä¼šæŒæ¡å®ƒï¼Œæ‹¥æœ‰å®ƒï¼Œä½¿å®ƒåœ¨ä½ çš„æ§åˆ¶ä¹‹ä¸­ã€‚å½“æˆ‘ä»¬æ²¡ç”¨å¬è¯´è¿‡ä¸€äº›è®¾è®¡çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å°±å¾ˆéš¾ä¼šæ³¨æ„åˆ°ä¸€ä¸ªè®¾è®¡ä½œå“ä¸Šçš„é—®é¢˜ã€ç¼ºæ¼ï¼Œæ›´ä¸å¯èƒ½åšå‡ºè‰¯å¥½çš„è®¾è®¡ã€‚</p></blockquote><h2 id="å¯¹æ¯”ï¼ˆContrastï¼‰"><strong>å¯¹æ¯”ï¼ˆContrastï¼‰</strong></h2><blockquote><p>Robinå¯¹æ¯”åŸåˆ™æŒ‡å‡ºï¼šé¡µé¢ä¸Šçš„ä¸åŒå…ƒç´ ä¹‹é—´è¦æœ‰å¯¹æ¯”æ•ˆæœï¼Œè¾¾åˆ°å¸å¼•è¯»è€…çš„å¯¹æ¯”æ•ˆæœã€‚</p></blockquote><h3 id="åŸç†ï¼š">åŸç†ï¼š</h3><p><strong>é¡µé¢ä¸Šçš„ä¸åŒå…ƒç´ ä¼šå­˜åœ¨å…³è”æ€§å’Œå·®å¼‚æ€§ï¼Œå¯¹æ¯”åŸåˆ™å€¡å¯¼é€šè¿‡è§†è§‰å…ƒç´ çš„å¯¹æ¯”æ¥è¡¨ç°è¿™ç§å·®å¼‚æ€§</strong>ã€‚å¯¹æ¯”åŸåˆ™è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•æ›´å¥½çš„å¸å¼•ç”¨æˆ·çš„çœ¼çƒï¼Œä»¥åŠå¦‚ä½•æ›´å¥½çš„ä¸ºç”¨æˆ·å±•ç°ä¸åŒä¿¡æ¯çš„é‡è¦ç¨‹åº¦ã€‚å¦‚æœå…ƒç´ ï¼ˆå­—ä½“ã€é¢œè‰²ã€å¤§å°ã€çº¿å®½ã€å½¢çŠ¶ã€ç©ºé—´ç­‰ï¼‰ä¸ç›¸åŒï¼Œé‚£å°±å¹²è„†è®©å®ƒä»¬æˆªç„¶ä¸åŒã€‚å¯¹æ¯”èƒ½å¤Ÿè®©è®¯æ¯æ›´å‡†ç¡®çš„ä¼ è¾¾ï¼Œå†…å®¹æ›´å®¹æ˜“çš„è¢«æ‰¾åˆ°ã€è¢«è®°ä½ã€‚</p><p>å¯¹æ¯”ä¸ä»…å¯ä»¥ç”¨æ¥å¸å¼•çœ¼çƒï¼Œè¿˜å¯ä»¥ç”¨æ¥ç»„ç»‡ä¿¡æ¯ã€æ¸…æ™°å±‚çº§ã€åœ¨ç•Œé¢ä¸ŠæŒ‡å¼•è¯»è€…ï¼Œå¹¶ä¸”åˆ¶é€ ç„¦ç‚¹ã€‚</p><h3 id="æ ·ä¾‹ï¼š">æ ·ä¾‹ï¼š</h3><p>æ¯”å¦‚ï¼š</p><p><img src="0.webp" alt=""></p><p>åˆæ¯”å¦‚ï¼š</p><img src="1.jpg" style="zoom:30%;" /><p>ä¸ºä»€ä¹ˆæš‚åœã€ä¸Šä¸‹æ›²ç›®æŒ‰é”®æ˜¯ç™½è‰²å®å¿ƒbuttonè€Œå…¶ä»–buttonä¸ä»…å°è€Œä¸”è¿˜æ˜¯ç°è‰²çš„ï¼ŸQQéŸ³ä¹ä½¿ç”¨è¿™ç§å¯¹æ¯”çªå‡ºbuttonå±‚çº§ä¸é‡è¦æ€§ã€‚è€Œæ›²åä¸å…¶ä½™ä¿¡æ¯ä¹Ÿæœ‰æ˜æ˜¾å¯¹æ¯”ã€‚</p><p>åé¢æ•™æï¼š</p><img src="5.jpg" style="zoom:27%;" /><p>èƒŒæ™¯å›¾ç‰‡å¯¼è‡´çš„hintæ–‡å­—çœ‹ä¸æ¸…ï¼Œä¸¤è€…å¯¹æ¯”åº¦è¿‡ä½</p><h3 id="æ€»ç»“ï¼š">æ€»ç»“ï¼š</h3><p>è¦å¢åŠ æœ‰æ„æ€çš„å¯¹æ¯”ï¼Œæœ€å®¹æ˜“çš„æ–¹æ³•å°±æ˜¯å®ç°å­—ä½“å¯¹æ¯”ï¼‰ã€‚ä¸è¿‡ä¸è¦å¿˜è®°ï¼Œè¿˜å¯ä»¥åˆ©ç”¨çº¿ã€é¢œè‰²ã€å…ƒç´ ä¹‹é—´çš„é—´éš”ã€æè´¨ç­‰å½¢æˆå¯¹æ¯”ã€‚å¦‚æœä½ æƒ³è®©å¯¹æ¯”æ•ˆæœæ›´æ˜æ˜¾ï¼Œå°±ä¸€å®šè¦å¤§èƒ†ï¼Œä¸è¦è®©ä¸¤ç§é¢œè‰²çœ‹èµ·æ¥å¥½åƒå·®ä¸é”™åˆä¸ä¸€æ ·ã€‚å½“ç„¶ä¹Ÿä¸è¦åœ¨åŒä¸€ä¸ªé¡µé¢ä½¿ç”¨å¤ªå¤šç§å­—ä½“ã€‚</p><h2 id="é‡å¤ï¼ˆRepetitionï¼‰"><strong>é‡å¤ï¼ˆRepetitionï¼‰</strong></h2><blockquote><p>Robiné‡å¤åŸåˆ™æŒ‡å‡ºï¼šè®¾è®¡çš„æŸäº›æ–¹é¢éœ€è¦åœ¨æ•´ä¸ªä½œå“ä¸­é‡å¤ã€‚</p></blockquote><h3 id="åŸç†ï¼š-2">åŸç†ï¼š</h3><p><strong>é‡å¤çš„ç›®çš„å°±æ˜¯â€œä¸€è‡´æ€§â€</strong>ï¼Œè®©è®¾è®¡ä¸­çš„è§†è§‰è¦ç´ åœ¨æ•´ä¸ªä½œå“ä¸­é‡å¤å‡ºç°ã€‚å¯ä»¥é‡å¤é¢œè‰²ã€å½¢çŠ¶ã€æè´¨ã€ç©ºé—´å…³ç³»ã€çº¿å®½ã€æè´¨ã€ç©ºé—´ç­‰ã€‚è¿™æ ·ä¸€æ¥æ—¢èƒ½å¢åŠ æ¡ç†æ€§ï¼Œåˆèƒ½å¢åŠ ç»Ÿä¸€æ€§ï¼Œå¢å¼ºè§†è§‰æ•ˆæœã€‚</p><p>ä¸è¿‡å‘¢ï¼Œé‡å¤ä¹Ÿä¸èƒ½æ³›æ»¥ï¼Œå¦‚æœä¸€ä¸ªé¡µé¢ä¸Šå…¨æ˜¯ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹æˆ–è€…é£æ ¼ï¼Œé‚£å°±è¿èƒŒäº†ä¸Šé¢çš„å¯¹æ¯”åŸåˆ™ã€‚æ‰€ä»¥æ›´æ¨èè·³è·ƒæ€§é‡å¤ã€‚</p><h4 id="åº”ç”¨æŠ€å·§ï¼š">åº”ç”¨æŠ€å·§ï¼š</h4><ul><li><p>æŠŠå·²æœ‰çš„é‡å¤å…ƒç´ å–å‡ºï¼Œè®©è¿™äº›å…ƒç´ æ•ˆæœæ›´å¼ºã€æ›´ç”ŸåŠ¨ã€‚é€šè¿‡æŠŠé‡å¤è¡¨ç°å¾—æ›´æ˜æ˜¾ï¼Œè¿™æ ·ä¸ä»…é¡µé¢çœ‹ä¸Šå»æ›´æœ‰è¶£ï¼Œè¿˜èƒ½åœ¨è§†è§‰ä¸Šå¢å¼ºå…¶æ¡ç†æ€§å’Œä¸€è‡´æ€§ã€‚</p></li><li><p>å³ä½¿åœ¨ä¸€ä¸ªåªæœ‰ä¸€é¡µçš„æ–‡æ¡£ä¸­ï¼Œé‡å¤å…ƒç´ ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ç§è¿ç»­æ€§ï¼Œå°†æ–‡æ¡£â€œæ•´ä¸ªæ†åœ¨ä¸€èµ·â€ ã€‚å¦‚æœåœ¨åˆ›å»ºä¸€ä¸ªå¤šé¡µçš„ã€ä½œä¸ºä¸€ä¸ªç²¾ç¾åŒ…è£…ä¸€éƒ¨åˆ†çš„æ–‡æ¡£ï¼Œå……åˆ†ä½¿ç”¨é‡å¤å°±å¾ˆå…³é”®ã€‚</p></li><li><p>æœ‰æ—¶é‡å¤çš„é¡¹å¹¶ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œè€Œåªæ˜¯å­˜åœ¨æ˜ç¡®å…³è”çš„ç´§å¯†ç›¸å…³çš„å¯¹è±¡ã€‚ä¸ºäº†å®ç°é‡å¤ï¼Œå®Œå…¨å¯ä»¥ä¸ºæ­¤å¢åŠ ä¸€äº›å…¨æ–°çš„ä¸œè¥¿ã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸€ä¸ªç®€å•çš„å…ƒç´ ï¼Œç„¶åä»¥å¤šç§ä¸åŒçš„æ–¹å¼åŠ ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚è¯´æŒ‡å®šä¸åŒçš„å¤§å°ã€é¢œè‰²æˆ–è§’åº¦ã€‚</p></li><li><p>é€šå¸¸è¿˜å¯ä»¥å¢åŠ å®é™…ä¸Šä¸é¡µé¢ä¸»é¢˜æ²¡æœ‰ä»»ä½•å…³ç³»çš„é‡å¤å…ƒç´ ã€‚åªè¦ç¡®ä¿ï¼Œä½œå“çœ‹èµ·æ¥æ˜¯æœ‰æ„ä¸ºä¹‹ï¼Œè€Œä¸æ˜¯ä¹±ä¸ƒå…«ç³Ÿå°±è¡Œäº†ã€‚</p></li><li><p>ä½¿ç”¨é‡å¤åŸåˆ™æ—¶ï¼Œæœ‰æ—¶å¯ä»¥æŠŠä¸€ä¸ªå…ƒç´ ä»ç°åœ¨çš„è®¾è®¡ä¸­æŠ½å–å‡ºæ¥ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°è®¾è®¡ã€‚</p></li><li><p><strong>é‡å¤æ€§å…ƒç´ å¹¶ä¸å¿…é¡»æ˜¯å›¾å½¢æˆ–è€…å‰ªè´´ç”»ã€‚å¯ä»¥æ˜¯ç©ºç™½ã€çº¿ã€å­—ä½“ã€å¯¹é½ï¼Œæˆ–è€…ä»»ä½•ä½ æœ‰æ„é‡å¤çš„ä¸œè¥¿ã€‚</strong></p></li><li><p>æœ‰æ—¶ï¼Œå°½ç®¡åªæœ‰é‡å¤å…ƒç´ çš„ä¸€ç‚¹å„¿æš—ç¤ºï¼Œä½†è¿™å¯èƒ½ä¸ä½¿ç”¨æ•´ä¸ªå…ƒç´ æœ‰åŒæ ·çš„æ•ˆæœã€‚å¯¹äºä¸€ä¸ªå¤§å®¶éƒ½ç†Ÿæ‚‰çš„å…ƒç´ ï¼Œå¯ä»¥å°è¯•åªåŒ…å«å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…é‡‡ç”¨ä¸åŒçš„æ–¹å¼åŠ ä»¥ä½¿ç”¨ã€‚</p></li><li><p><strong>è¦é¿å…å¤ªå¤šåœ°é‡å¤ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤å¤ªå¤šä¼šè®©äººè®¨åŒ</strong>ã€‚</p><p>æŠ€å·§é€‰è‡ªï¼š<a href="https://blog.csdn.net/u010111837/article/details/118085567">https://blog.csdn.net/u010111837/article/details/118085567</a></p></li></ul><h3 id="æ ·ä¾‹ï¼š-2">æ ·ä¾‹ï¼š</h3><p><img src="4.png" alt=""></p><p>å…¶å®è¿™ä¸ªåç‰‡ä¹Ÿç”¨åˆ°äº†å¯¹æ¯”ï¼Œå…¶å®æ˜¯å¯¹æ¯”ä¸é‡å¤çš„ç»“åˆã€‚</p><p>å†å›åˆ°ä¸Šé¢çš„QQéŸ³ä¹ï¼Œ</p><img src="1.jpg" style="zoom:30%;" /><p>æ‰€æœ‰ç°è‰²buttonçš„è®¾è®¡é£æ ¼éƒ½æ˜¯é‡å¤çš„ï¼Œè¿™ä½¿å¾—æ•´ä¸ªç•Œé¢å¾ˆåè°ƒã€‚</p><h2 id="å¯¹é½ï¼ˆAlignmentï¼‰"><strong>å¯¹é½ï¼ˆAlignmentï¼‰</strong></h2><blockquote><p>Robinå¯¹é½åŸåˆ™æ˜¯æŒ‡ï¼šä»»ä½•å…ƒç´ éƒ½ä¸èƒ½åœ¨é¡µé¢ä¸Šéšæ„å®‰æ”¾ã€‚æ¯ä¸€é¡¹éƒ½åº”å½“ä¸é¡µé¢ä¸Šçš„æŸä¸ªå†…å®¹å­˜åœ¨æŸç§è§†è§‰è”ç³»ã€‚</p></blockquote><h3 id="åŸç†ï¼š-3">åŸç†ï¼š</h3><p>é¡µé¢ä¸Šçš„ä¸åŒå…ƒç´ ä¹‹é—´ä¼šå› ä¸ºå…³è”æ€§ä¸åŒè€Œä¼šæœ‰ä¸åŒçš„ç‰©ç†è·ç¦»ï¼Œ<strong>å¯¹é½åŸåˆ™å€¡å¯¼çš„æ˜¯å°†è¿™äº›ä¸åŒå…ƒç´ å»ºç«‹è§†è§‰ä¸Šçš„æŸç§è”ç³»ï¼Œè€Œä¸æ˜¯è¢«éšæ„çš„æ‘†æ”¾ï¼Œå»ºç«‹è¿™ç§è”ç³»çš„æ–¹å¼å°±æ˜¯ä¸ºå…ƒç´ å¯»æ‰¾æŸç§å¯¹é½ã€‚</strong></p><p>è¿™æ ·èƒ½å¤Ÿå»ºç«‹ä¸€ç§æ¸…æ™°ã€ç²¾å·§è€Œæ¸…çˆ½çš„å¤–è§‚ï¼Œæå‡å¯è¯»æ€§ã€‚é¿å…ä¸€ä¸ªé¡µé¢ä¸Šæ··ç”¨å¤šç§å¯¹å…¶æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸è¦æœ‰ä¸€äº›ç½®å·¦ï¼Œæœ‰ä¸€äº›ç½®å³ã€‚<strong>å°½é‡é¿å…ä½¿ç”¨å±…ä¸­å¯¹é½ï¼Œé™¤éæ˜¯æ¯”è¾ƒæ­£å¼ã€ç¨³é‡çš„è®¾è®¡</strong>ï¼ˆåˆ«åŠ¨ä¸åŠ¨å°±è®©ä»€ä¹ˆéƒ½å±…ä¸­ï¼Œæœ‰äº›æ—¶å€™å±…ä¸­æ˜¯ä¸€ç§å¾ˆåœŸçš„å¯¹é½æ–¹å¼ï¼‰ã€‚</p><p><strong>å¯¹é½æ€§åŸåˆ™è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•å°†è¦å‘ˆç°çš„ä¿¡æ¯æœ‰ç§©åºçš„å±•ç°åœ¨ç”¨æˆ·é¢å‰ã€‚</strong></p><h3 id="æ ·ä¾‹ï¼š-3">æ ·ä¾‹ï¼š</h3><img src="6.png" style="zoom:100%;" /><h4 id="ä¸å»ºè®®åˆå­¦è€…è½»æ˜“ä½¿ç”¨å±…ä¸­å¯¹é½">ä¸å»ºè®®åˆå­¦è€…è½»æ˜“ä½¿ç”¨å±…ä¸­å¯¹é½</h4><p><strong>å¦‚æœæ–‡æœ¬ä¸ºå·¦å¯¹é½æˆ–å³å¯¹é½ï¼Œè®©æ–‡æœ¬è”ç³»åœ¨ä¸€èµ·çš„é‚£æ¡çœ‹ä¸è§çš„çº¿ä¼šæ›´æ˜ç¡®</strong>ï¼Œå› ä¸ºç°åœ¨æœ‰ä¸€æ¡â€œç¡¬â€çš„ç«–è¾¹ã€‚è¿™å°±ä½¿å·¦å¯¹é½å’Œå³å¯¹é½çš„æ–‡æœ¬çœ‹èµ·æ¥å¤–è§‚æ›´æ¸…æ™°ã€æ•ˆæœæ›´åˆ†æ˜ã€‚</p><p><img src="7.webp" alt=""></p><p>å±…ä¸­å¯¹é½ä¼šåˆ›å»ºä¸€ç§æ›´æ­£å¼ã€æ›´ç¨³é‡çš„å¤–è§‚ï¼Œè¿™ç§å¤–è§‚æ˜¾å¾—æ›´ä¸ºä¸­è§„ä¸­çŸ©ï¼Œä½†é€šå¸¸ä¹Ÿå¾ˆä¹å‘³ã€‚è¯·æ³¨æ„ä½ å–œæ¬¢çš„é‚£äº›è®¾è®¡ã€‚æˆ‘æ•¢ä¿è¯ï¼Œå¤§å¤šæ•°çœ‹æ¥ç²¾å·§çš„è®¾è®¡éƒ½æ²¡æœ‰é‡‡ç”¨å±…ä¸­å¯¹é½ã€‚æˆ‘çŸ¥é“ï¼Œä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œè¦å®Œå…¨æ‘’å¼ƒå±…ä¸­å¯¹é½ä¼šå¾ˆéš¾ï¼Œä½†ä½ å¿…é¡»ä»ä¸€å¼€å§‹å°±å¼ºåˆ¶è‡ªå·±é¿å¼€å®ƒã€‚</p><p><strong><u>åœ¨å¾—åˆ°æ›´å¤šåŸ¹è®­ä¹‹å‰ï¼Œä¸€å®šè¦åšæŒä¸€ä¸ªåŸåˆ™ï¼šåªä½¿ç”¨ä¸€ç§å¯¹é½æ–¹å¼</u></strong>ã€‚é¡µé¢ä¸Šåªä½¿ç”¨ä¸€ç§æ–‡æœ¬å¯¹é½ï¼Œæ‰€æœ‰æ–‡æœ¬éƒ½å·¦å¯¹é½ï¼Œæˆ–å³å¯¹é½ï¼Œæˆ–è€…å…¨éƒ¨å±…ä¸­ã€‚</p><img src="8.webp" style="zoom:67%;" /><p><strong>æ˜æ˜¾è€Œæœ‰æ„ä¸ºä¹‹çš„å±…ä¸­å¯¹é½æ•ˆæœæœ€å¥½</strong>ã€‚å½“å¯¹é½ç»è¿‡ç²¾å¿ƒç­–åˆ’è€Œåˆæ˜ç¡®æ—¶ï¼Œä½ å°±å¯ä»¥å¯¹å…¶ä»–å…ƒç´ å……åˆ†å‘æŒ¥åˆ›é€ åŠ›ï¼Œä½œå“çœ‹èµ·æ¥ä»ç„¶æ˜¾å¾—åŒ å¿ƒç‹¬å…·ï¼Œè€Œè¿™äº›å…ƒç´ ä¹Ÿä¸ä¼šåƒæ˜¯è«åå…¶å¦™åœ°æ•£è½åœ¨é¡µé¢ä¸Šä¸€æ ·ã€‚</p><h4 id="é¡µé¢ä¸Šæ¯ä¸€ä¸ªé¡¹éƒ½åº”è¯¥ä¸å…¶ä»–é¡¹å­˜åœ¨æŸç§å¯¹é½">é¡µé¢ä¸Šæ¯ä¸€ä¸ªé¡¹éƒ½åº”è¯¥ä¸å…¶ä»–é¡¹å­˜åœ¨æŸç§å¯¹é½</h4><p>åœ¨é¡µé¢ä¸Šæ”¾å…¶ä»–é¡¹æ—¶ï¼Œä¸€å®šè¦ç¡®ä¿æ¯ä¸€é¡¹éƒ½ä¸é¡µé¢ä¸Šçš„å…¶ä»–é¡¹å­˜åœ¨æŸç§å¯¹é½ã€‚å¦‚æœæ–‡æœ¬è¡Œæ°´å¹³æ‘†æ”¾ï¼Œåˆ™æŒ‰å…¶åŸºçº¿å¯¹é½ã€‚å¦‚æœæœ‰å¤šä¸ªå•ç‹¬çš„æ–‡æœ¬å—ï¼Œåˆ™å¯¹é½å…¶å·¦è¾¹ç•Œæˆ–å³è¾¹ç•Œã€‚å¦‚æœæœ‰å›¾ç‰‡å…ƒç´ ï¼Œå°†å…¶è¾¹ç•Œä¸é¡µé¢çš„å…¶ä»–è¾¹ç•Œå¯¹é½ã€‚</p><img src="9.png" style="zoom: 80%;" /><p>è¿˜æ˜¯è¿™å¼ QQéŸ³ä¹ï¼š</p><img src="10.png" style="zoom:30%;" /><p>æ˜æ˜¾çš„å¯¹é½ä½¿å¾—ç•Œé¢çœ‹èµ·æ¥éå¸¸è§„æ•´ã€‚</p><h3 id="æ€»ç»“ï¼š-2">æ€»ç»“ï¼š</h3><p><strong>å€¾å¬ä½ çš„çœ¼ç›</strong></p><p>çœ¼ç›çœ‹å‘å“ªé‡Œï¼Œè·¯çº¿æ˜¯ä»€ä¹ˆï¼Œè¿™æ˜¯æœ€ä½³è·¯å¾„å—ï¼Ÿé‡è¦çš„ä¿¡æ¯æ˜¯å¦éƒ½å½’å…¥äº†é€»è¾‘äº²å¯†æ€§ä¸­ï¼Ÿå¯¹é½æ˜¯å¦å¯¹æ¸…æ™°çš„è¡¨è¾¾æœ‰å¸®åŠ©ï¼Ÿ</p><h2 id="äº²å¯†æ€§ï¼ˆProximityï¼‰"><strong>äº²å¯†æ€§ï¼ˆProximityï¼‰</strong></h2><blockquote><p>Robinäº²å¯†æ€§åŸåˆ™æ˜¯æŒ‡ï¼šå°†ç›¸å…³çš„é¡¹ç»„ç»‡åœ¨ä¸€èµ·ï¼Œç§»åŠ¨è¿™äº›é¡¹ï¼Œä½¿å®ƒä»¬çš„ç‰©ç†ä½ç½®ç›¸äº’é è¿‘ï¼Œè¿™æ ·ä¸€æ¥ï¼Œç›¸å…³çš„é¡¹å°†è¢«çœ‹ä½œå‡èšä¸ºä¸€ä½“çš„ä¸€ä¸ªç»„ï¼Œè€Œä¸å†æ˜¯ä¸€å †å½¼æ­¤æ— å…³çš„ç‰‡æ®µã€‚</p></blockquote><h3 id="åŸç†ï¼š-4">åŸç†ï¼š</h3><p>å¦‚æœå¤šä¸ªé¡¹ç›¸äº’ä¹‹é—´å­˜åœ¨å¾ˆè¿‘çš„äº²å¯†æ€§ï¼Œå®ƒä»¬å°±ä¼šæˆä¸ºä¸€ä¸ª<strong>è§†è§‰å•å…ƒ</strong>ï¼Œè€Œä¸æ˜¯å¤šä¸ªå­¤ç«‹çš„å…ƒç´ ã€‚è¿™æœ‰åŠ©äºç»„ç»‡ä¿¡æ¯ï¼Œå‡å°‘æ··ä¹±ï¼Œä¸ºè¯»è€…æä¾›æ¸…æ™°çš„ç»“æ„ã€‚<strong>äº²å¯†æ€§åŸåˆ™å€¡å¯¼é€šè¿‡ç‰©ç†è·ç¦»æ¥ç®¡ç†åŒä¸€ä¸ªé¡µé¢ä¸Šä¸åŒå…ƒç´ ä¹‹é—´çš„å…³è”æ€§ï¼Œç›¸å…³æ€§é«˜çš„å…ƒç´ åº”è¯¥ç´§æŒ¨åœ¨ä¸€èµ·ï¼Œç›¸å…³æ€§ä½çš„å…ƒç´ ä¹‹é—´åº”è¯¥ä¿æŒä¸€å®šçš„è·ç¦»</strong>ã€‚äº²å¯†æ€§ï¼ˆå³ç´§å¯†æ€§ï¼‰æ„å‘³ç€å­˜åœ¨å…³è”ã€‚é€»è¾‘ä¸Šå…³è”ç´§å¯†çš„é¡¹ç›®åœ¨å¸ƒå±€ä¸Šä¹Ÿåº”è¯¥ç´§å¯†ï¼Œå…³è”æ€§ä¸å¼ºçš„å…ƒç´ ä¹‹é—´å¯ä»¥é€‚å½“å¢åŠ åŒºéš”ã€‚ä½ç½®æ˜¯å¦é è¿‘å¯ä»¥ä½“ç°å‡ºå…ƒç´ ä¹‹é—´æ˜¯å¦å­˜åœ¨å…³ç³»ã€‚</p><h4 id="äº²å¯†æ€§åŸåˆ™å®ç°æ–¹æ³•">äº²å¯†æ€§åŸåˆ™å®ç°æ–¹æ³•</h4><ul><li>åœ¨è®¾è®¡æ—¶ï¼Œåº”è¯¥å˜æ¸…å“ªäº›ä¿¡æ¯åœ¨é€»è¾‘ä¸Šå­˜åœ¨å…³è”ï¼Œé‚£äº›ä¿¡æ¯åº”å½“å¼ºè°ƒï¼Œè€Œå“ªäº›ä¿¡æ¯ä¸ç”¨å¼ºè°ƒï¼Œç„¶åå¯ä»¥é€šè¿‡åˆ†ç»„å½¢è±¡åœ°è¡¨ç°è¿™ç§ä¿¡æ¯ã€‚åˆ©ç”¨äº²å¯†æ€§åŸåˆ™åˆç†çš„ç»„ç»‡ä¿¡æ¯çš„æ•ˆæœå¯ä»¥ä»ä¸‹é¢çš„å¯¹æ¯”ä¸­çœ‹å‡ºæ¥ï¼Œå°†éœ€è¦è¡¨ç°çš„ä¿¡æ¯è¿›è¡Œåˆ†ç»„ï¼Œä»æ’ç‰ˆä¸Šå°±ä½“ç°è¿™ç§ä¿¡æ¯ä¹‹é—´çš„å…³ç³»ã€‚</li></ul><h4 id="äº²å¯†æ€§åŸåˆ™è¦é¿å…çš„é—®é¢˜">äº²å¯†æ€§åŸåˆ™è¦é¿å…çš„é—®é¢˜</h4><ul><li><p>é¿å…ä¸€ä¸ªé¡µé¢ä¸Šæœ‰å¤ªå¤šå­¤ç«‹çš„å…ƒç´ ã€‚</p></li><li><p><strong>ä¸è¦åœ¨å…ƒç´ ä¹‹é—´ç•™å‡ºåŒæ ·å¤§å°çš„ç©ºç™½</strong>ï¼Œé™¤éå„ç»„åŒå±äºä¸€ä¸ªå­é›†ã€‚</p></li><li><p>æ ‡é¢˜ã€å­æ ‡é¢˜ã€å›¾è¡¨æ ‡é¢˜ã€å›¾ç‰‡èƒ½å¦å½’å…¥å…¶ç›¸å…³ææ–™ï¼Ÿåœ¨è¿™ä¸ªé—®é¢˜ä¸Šä¸€å®šè¦éå¸¸æ¸…æ¥šï¼ˆå“ªæ€•åªæœ‰ä¸€ç‚¹å«ç³Šéƒ½è¦å°½é‡é¿å…ï¼‰ã€‚</p></li><li><p>åœ¨æœ‰å¾ˆè¿‘äº²å¯†æ€§çš„å…ƒç´ ä¹‹é—´å»ºç«‹å…³ç³»ã€‚<strong>ä¸åŒå±ä¸€ç»„çš„å…ƒç´ ä¹‹é—´ä¸è¦å»ºç«‹å…³ç³»</strong>ï¼å¦‚æœå…ƒç´ å½¼æ­¤æ— å…³ï¼Œè¦æŠŠå®ƒä»¬åˆ†å¼€ã€‚ä¸è¦ä»…ä»…å› ä¸ºæœ‰ç©ºç™½å°±æŠŠå…ƒç´ æ”¾åœ¨è§’è½æˆ–ä¸­å¤®ã€‚</p></li></ul><h3 id="æ ·ä¾‹ï¼š-4">æ ·ä¾‹ï¼š</h3><img src="11.png" style="zoom:100%;" /><p>è¿™ä¸ªæ ·ä¾‹å¤ªè¿‡ç»å…¸ï¼Œä¸æƒ³å¤šè¯´ã€‚</p><p>è¿˜æ˜¯è¯´è¯´QQéŸ³ä¹ï¼Œå¤§è‡´ç»™ç•Œé¢å…ƒç´ åˆ†ä¸ªç»„ï¼š</p><img src="12.png" style="zoom:30%;" /><p>åˆåŠï¼Œäº²å¯†æ€§çš„ç»å…¸ç•Œé¢ï¼š</p><img src="13.jpg" style="zoom:33%;" /><p>ä¸ºä»€ä¹ˆè¦ç•™ç™½ï¼Ÿç›´æ¥å¤§æ‚çƒ©ä¸å¥½å—ï¼Ÿæ˜¾ç„¶ä¸å¥½ã€‚è®¸å¤šè®¾ç½®æ˜¯ç›¸ä¼¼çš„ï¼Œæ”¾åœ¨ä¸€èµ·å¹¶åŠ ä»¥åˆ†ç»„ï¼Œèƒ½è®©ç•Œé¢æ›´åŠ æ¡ä¾‹æ¸…æ™°ï¼Œç”¨æˆ·æ„Ÿå—æ›´å¥½ã€‚</p><h3 id="æ€»ç»“ï¼š-3">æ€»ç»“ï¼š</h3><p><strong>äº²å¯†æ€§çš„æ ¹æœ¬ç›®çš„æ˜¯å®ç°ç»„ç»‡æ€§ï¼Œé¿å…ä¸€ä¸ªé¡µé¢ä¸Šå‡ºç°å¤ªå¤šå­¤ç«‹çš„å…ƒç´ ã€‚</strong> å°¤å…¶åœ¨æˆ‘ä»¬æ’ç‰ˆæ—¶è¦æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯å°æ ‡é¢˜å’Œå…¶å¯¹åº”å†…å®¹ä¹‹é—´çš„è·ç¦»è¦å°äºå°æ ‡é¢˜å’Œä¸Šæ–‡çš„è·ç¦»ï¼Œè¿™æ ·å°±èƒ½å°†ä»–ä»¬ä¹‹é—´çš„å…³ç³»è¿…é€Ÿç»‘å®šåœ¨ä¸€èµ·ã€‚</p><h2 id="PS">PS.</h2><p>è‰²å½©æš‚æ—¶ä¸è®²ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ª[(23æ¡æ¶ˆæ¯) é¢œè‰²è¿ç”¨-CSDNåšå®¢</p><p><a href="https://blog.csdn.net/PigBiBiX/article/details/56674737"></a></p><h1>ä¸€äº›APPè®¾è®¡åŸåˆ™ï¼š</h1><h3 id="å……åˆ†è€ƒè™‘ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯">å……åˆ†è€ƒè™‘ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯</h3><p>æ¯”å¦‚å¤§å¤šæ•°äººæ‹¿æ‰‹æœºçš„æ—¶å€™æ˜¯åŒæ‰‹æ¡è¿˜æ˜¯å•æ‰‹æ¡ï¼Œå•æ‰‹æ¡çš„æ—¶å€™æ˜¯å³æ‰‹æ“ä½œè¿˜æ˜¯å·¦æ‰‹æ“ä½œï¼Œæ“ä½œçš„æ—¶å€™ç”¨å“ªä¸ªæ‰‹æŒ‡å°±èƒ½è¿›è¡Œæ“ä½œã€‚è€ƒè™‘åˆ°ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯æœ‰åŠ©äºåœ¨è®¾è®¡æ—¶é¿å¼€æ‰‹æŒ‡çš„è§¦ç¢°ç›²åŒºã€‚æ¯”å¦‚ï¼Œbuttonä¸è¦å¤ªé è¿‘å±å¹•å·¦è¾¹ï¼Œå¯¹å•æ‰‹æ“ä½œæå…¶ä¸å‹å¥½ã€‚</p><h3 id="å°½é‡å‡å°‘äº§å“å±‚çº§ä»¥åŠæ·±åº¦">å°½é‡å‡å°‘äº§å“å±‚çº§ä»¥åŠæ·±åº¦</h3><p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œè¿‡å¤šçš„å±‚çº§ä¼šä½¿ç”¨æˆ·å¤±å»è€å¿ƒè€Œæ”¾å¼ƒå¯¹äº§å“çš„ä½¿ç”¨ã€‚å¦‚æœäº§å“å±‚çº§ç¡®å®è¿‡æ·±ï¼Œè€ƒè™‘ç”¨ä¸€ä¸‹å‡ ç§æ–¹æ³•æ‰å¹³åŒ–ä½ çš„å±‚çº§ç»“æ„ï¼šä½¿ç”¨é€‰é¡¹å¡ï¼ˆtabsï¼‰ç»“åˆåˆ†ç±»å’Œå†…å®¹çš„å±•ç¤ºï¼›å…è®¸ç©¿è¶Šå±‚çº§æ“ä½œï¼Œæ¯”å¦‚å…è®¸ç”¨æˆ·åœ¨ç¬¬ä¸€å±‚çº§å¯¹ç¬¬äºŒå±‚çº§çš„å†…å®¹è¿›è¡Œç›´æ¥æ“ä½œã€‚</p><h3 id="è®¾è®¡è¦ä¸»æ¬¡åˆ†æ˜">è®¾è®¡è¦ä¸»æ¬¡åˆ†æ˜</h3><p>å°†ä¸»æµç”¨æˆ·æœ€å¸¸ç”¨çš„ 20% åŠŸèƒ½è¿›è¡Œæ˜¾ç°ï¼Œå…¶ä»–è¿›è¡Œé€‚åº¦çš„éšè—ï¼Œè¶Šä¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œéšè—çš„å±‚çº§è¶Šæ·±ã€‚ä¾‹å¦‚ï¼šå¾®ä¿¡çš„æ‰«æœ¬æœºäºŒç»´ç ã€‚è¦é¿å…æ–°æµªå¾®åšå¹¿åœºçš„å †ç§¯å¼è®¾è®¡ã€‚ç¡®ä¿ä¸»é¡µçœ‹èµ·æ¥åƒä¸»é¡µï¼ˆä½¿ä¸»é¡µæœ‰åˆ«äºå…¶å®ƒäºŒä¸‰çº§é¡µé¢ï¼‰ã€‚</p><h3 id="APPçš„å¯¼èˆªå°½é‡é‡‡ç”¨åº•éƒ¨å¯¼èˆªçš„æ–¹å¼ï¼Œ3-5ä¸ªä¸ºæœ€ä½³">APPçš„å¯¼èˆªå°½é‡é‡‡ç”¨åº•éƒ¨å¯¼èˆªçš„æ–¹å¼ï¼Œ3-5ä¸ªä¸ºæœ€ä½³</h3><h3 id="è‡ªç„¶è¿‡æ¸¡"><strong>è‡ªç„¶è¿‡æ¸¡</strong></h3><p>ç•Œé¢çš„äº¤äº’éƒ½æ˜¯ç¯ç¯ç›¸æ‰£çš„ï¼Œæ‰€ä»¥è®¾è®¡æ—¶ï¼Œè¦æ·±æ€ç†Ÿè™‘åœ°è€ƒè™‘åˆ°äº¤äº’çš„ä¸‹ä¸€æ­¥ã€‚è€ƒè™‘åˆ°ä¸‹ä¸€æ­¥çš„äº¤äº’æ˜¯æ€æ ·çš„ï¼Œå¹¶ä¸”é€šè¿‡è®¾è®¡å°†å…¶å®ç°ã€‚è¿™å°±å¥½æ¯”æˆ‘ä»¬çš„æ—¥å¸¸è°ˆè¯ï¼Œè¦ä¸ºæ·±å…¥äº¤è°ˆæä¾›è¯ç”±ã€‚å½“ç”¨æˆ·å·²ç»å®Œæˆè¯¥åšçš„æ­¥éª¤ï¼Œä¸è¦è®©ä»–ä»¬ä¸çŸ¥æ‰€æªï¼Œç»™ä»–ä»¬è‡ªç„¶è€Œç„¶ç»§ç»­ä¸‹å»çš„æ–¹æ³•ï¼Œä»¥è¾¾æˆç›®æ ‡ã€‚</p><p>æ¯”å¦‚åˆ é™¤å‰çš„è­¦å‘Šdialogï¼ŒåŠ è½½æ—¶çš„è¿›åº¦æ¡ï¼Œéƒ½æ˜¯å¿…è¦çš„ã€‚</p><h3 id="è‰²å½©å†³å®šAPPé£æ ¼å’Œç”¨æˆ·ä½¿ç”¨æ„Ÿå—"><strong>è‰²å½©å†³å®šAPPé£æ ¼å’Œç”¨æˆ·ä½¿ç”¨æ„Ÿå—</strong></h3><p>çº¢è‰²è®©äººæ„Ÿåˆ°æ¿€æƒ…ã€æ´»æ³¼ï¼Œè€Œç°è‰²ç­‰æš—è‰²è°ƒåˆ™è®©äººæ„Ÿåˆ°å‹æŠ‘ã€‚åˆç†é€‰ç”¨è‰²å½©ï¼Œè®©ç”¨æˆ·æœ‰æ›´å¥½çš„ä½“éªŒã€‚</p><h1>ä¸€äº›ç»„ä»¶ä½¿ç”¨åŸåˆ™ï¼š</h1><ul><li><p>å‡¡æ˜¯æ¶‰åŠæ“ä½œçš„ç»„ä»¶éƒ½è¦åšå‡ºè§†è§‰ä¸Šçš„å“åº”ã€‚</p><ul><li>æ¯”å¦‚buttonæŒ‰ä¸‹å˜è‰²æˆ–è€…ä¸€äº›å…¶ä»–ç‰¹æ•ˆï¼Œè¾“å…¥æ¡†è·å–\è·å¾—ç„¦ç‚¹æ—¶è¾¹æ¡†æˆ–è€…èƒŒæ™¯å˜è‰²ç­‰ç­‰</li></ul></li><li><p>é€‚å½“çš„åœ†è§’æœ‰åˆ©äºç•Œé¢ç¾åŒ–</p><ul><li>å°¤å…¶æ˜¯åœ¨buttonå’Œå¤´åƒã€cardviewæ–¹é¢</li></ul></li><li><p>è¿‡åº¦ç»šä¸½çš„èƒŒæ™¯å¹¶ä¸åˆ©äºä¿¡æ¯å‘ˆç°</p><ul><li>ç›¸åï¼Œæ›´æ¨èçº¯è‰²ã€ç›¸è¿‘è‰²æˆ–è€…æ¸å˜è‰²</li></ul></li><li><p>å·§å¦™çš„è¾¹è·èƒ½äº‹åŠåŠŸå€</p></li><li><p>é£æ ¼ä¸€è‡´æ€§é—®é¢˜ã€‚</p><ul><li>è´¦å·å¯†ç ä¸¤ä¸ªè¾“å…¥æ¡†èƒŒæ™¯é¢œè‰²ä¸ºä»€ä¹ˆè¦ä¸ä¸€æ ·ï¼Ÿ</li><li>ç™»å½•æ³¨å†Œä¸¤ä¸ªbuttonä¸ºä»€ä¹ˆè¦ä¸€å¤§ä¸€å°ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆä»ä¸€ä¸ªæš—è‰²è°ƒç•Œé¢èƒ½ä¸€ä¸‹å­è·³è½¬åˆ°äº®è‰²è°ƒç•Œé¢ï¼Ÿ</li></ul></li><li><p>è®¾è®¡è¦äººæ€§åŒ–</p><ul><li>ä¸ºä»€ä¹ˆè¾“å…¥æ¡†é‚£ä¹ˆçŸ­ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆbuttoné‚£ä¹ˆå°ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆå›¾ç‰‡å æ®é‚£ä¹ˆå¤§çš„ç©ºé—´ï¼Ÿ</li><li>å­—å·çš„å¤§å°è¦æœ‰åŒºåˆ†ï¼Œä½†ä¸è¦æ ‡é¢˜å¤ªå¤§è€Œæ­£æ–‡å¤ªå°</li></ul></li></ul><h1>MaterialDesignåŸºç¡€åŸåˆ™</h1><p>å®ä½“æ„Ÿå°±æ˜¯(é€šè¿‡è®¾è®¡æ–¹å¼æ¥è¡¨è¾¾)éšå–»</p><p>é€šè¿‡æ„å»ºç³»ç»ŸåŒ–çš„åŠ¨æ•ˆå’Œç©ºé—´åˆç†åŒ–åˆ©ç”¨ï¼Œå¹¶å°†ä¸¤ä¸ªç†å¿µåˆäºŒä¸ºä¸€ï¼Œæ„æˆäº†å®ä½“éšå–»ã€‚ä¸ä¼—ä¸åŒçš„è§¦æ„Ÿæ˜¯å®ä½“çš„åŸºç¡€ï¼Œè¿™ä¸€çµæ„Ÿæ¥è‡ªæˆ‘ä»¬å¯¹çº¸å¢¨çš„ç ”ç©¶ï¼Œä½†æ˜¯æˆ‘ä»¬ç›¸ä¿¡ï¼Œéšç€ç§‘æŠ€çš„è¿›æ­¥ï¼Œåº”ç”¨å‰æ™¯å°†ä¸å¯ä¼°é‡ã€‚</p><p><strong>å®ä½“çš„è¡¨é¢å’Œè¾¹ç¼˜æä¾›åŸºäºçœŸå®æ•ˆæœçš„è§†è§‰ä½“éªŒï¼Œç†Ÿæ‚‰çš„è§¦æ„Ÿè®©ç”¨æˆ·å¯ä»¥å¿«é€Ÿåœ°ç†è§£å’Œè®¤çŸ¥ã€‚å®ä½“çš„å¤šæ ·æ€§å¯ä»¥è®©æˆ‘ä»¬å‘ˆç°å‡ºæ›´å¤šåæ˜ çœŸå®ä¸–ç•Œçš„è®¾è®¡æ•ˆæœï¼Œä½†åŒæ—¶åˆç»ä¸ä¼šè„±ç¦»å®¢è§‚çš„ç‰©ç†è§„å¾‹ã€‚</strong></p><p><strong>å…‰æ•ˆã€è¡¨é¢è´¨æ„Ÿã€è¿åŠ¨æ„Ÿ</strong>è¿™ä¸‰ç‚¹æ˜¯è§£é‡Šç‰©ä½“<strong>è¿åŠ¨è§„å¾‹ã€äº¤äº’æ–¹å¼ã€ç©ºé—´å…³ç³»</strong>çš„å…³é”®ã€‚çœŸå®çš„å…‰æ•ˆå¯ä»¥è§£é‡Šç‰©ä½“ä¹‹é—´çš„äº¤åˆå…³ç³»ã€ç©ºé—´å…³ç³»ï¼Œä»¥åŠå•ä¸ªç‰©ä½“çš„è¿åŠ¨ã€‚</p><p>æ–°çš„è§†è§‰è¯­è¨€ï¼Œåœ¨åŸºæœ¬å…ƒç´ çš„å¤„ç†ä¸Šï¼Œå€Ÿé‰´äº†ä¼ ç»Ÿçš„å°åˆ·è®¾è®¡â€”â€”æ’ç‰ˆã€ç½‘æ ¼ã€ç©ºé—´ã€æ¯”ä¾‹ã€é…è‰²ã€å›¾åƒä½¿ç”¨â€”â€”è¿™äº›åŸºç¡€çš„å¹³é¢è®¾è®¡è§„èŒƒã€‚åœ¨è¿™äº›è®¾è®¡åŸºç¡€ä¸Šä¸‹åŠŸå¤«ï¼Œä¸ä½†å¯ä»¥æ„‰æ‚¦ç”¨æˆ·ï¼Œè€Œä¸”èƒ½å¤Ÿæ„å»ºå‡ºè§†è§‰å±‚çº§ã€è§†è§‰æ„ä¹‰ä»¥åŠè§†è§‰èšç„¦ã€‚ç²¾å¿ƒé€‰æ‹©è‰²å½©ã€å›¾åƒã€é€‰æ‹©åˆä¹æ¯”ä¾‹çš„å­—ä½“ã€ç•™ç™½ï¼ŒåŠ›æ±‚æ„å»ºå‡ºé²œæ˜ã€å½¢è±¡çš„ç”¨æˆ·ç•Œé¢ï¼Œè®©ç”¨æˆ·æ²‰æµ¸å…¶ä¸­ã€‚</p><p><strong>Material Design è®¾è®¡è¯­è¨€å¼ºè°ƒæ ¹æ®ç”¨æˆ·è¡Œä¸ºå‡¸æ˜¾æ ¸å¿ƒåŠŸèƒ½ï¼Œè¿›è€Œä¸ºç”¨æˆ·æä¾›æ“ä½œæŒ‡å¼•ã€‚</strong></p><h1>ç¯å¢ƒ</h1><h3 id="ä¸‰ç»´ä¸–ç•Œï¼ˆ3D-worldï¼‰">ä¸‰ç»´ä¸–ç•Œï¼ˆ3D worldï¼‰</h3><p>Material ç¯å¢ƒæ˜¯ä¸€ä¸ªä¸‰ç»´çš„ç©ºé—´ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ x ï¼Œ y ï¼Œ z ä¸‰ç»´åæ ‡å±æ€§ï¼Œz è½´å‚ç›´äºæ˜¾ç¤ºå¹³é¢ï¼Œå¹¶å»¶ä¼¸å‘ç”¨æˆ·è§†è§’,æ¯ä¸ª material å…ƒç´ åœ¨ z è½´ä¸Šå æ®ä¸€å®šçš„ä½ç½®å¹¶ä¸”æœ‰ä¸€ä¸ª 1dp åšåº¦çš„æ ‡å‡†ã€‚ åœ¨ç½‘é¡µä¸Šï¼Œz è½´è¢«ç”¨æ¥åˆ†å±‚è€Œä¸æ˜¯ä¸ºäº†è§†è§’ã€‚3D ç©ºé—´é€šè¿‡æ“çºµ y è½´è¿›è¡Œä»¿çœŸã€‚</p><img src="14.png" style="zoom:80%;" /><h3 id="å…‰å½±å…³ç³»ï¼ˆLight-and-shadowï¼‰">å…‰å½±å…³ç³»ï¼ˆLight and shadowï¼‰</h3><p>åœ¨ material ç¯å¢ƒä¸­ï¼Œ<strong>è™šæ‹Ÿçš„å…‰çº¿ç…§å°„ä½¿åœºæ™¯ä¸­çš„å¯¹è±¡æŠ•å°„å‡ºé˜´å½±ï¼Œä¸»å…‰æºæŠ•å°„å‡ºä¸€ä¸ªå®šå‘çš„é˜´å½±ï¼Œè€Œç¯å¢ƒå…‰ä»å„ä¸ªè§’åº¦æŠ•å°„å‡ºè¿è´¯åˆæŸ”å’Œçš„é˜´å½±ã€‚</strong></p><p>material ç¯å¢ƒä¸­çš„æ‰€æœ‰é˜´å½±éƒ½æ˜¯ç”±è¿™ä¸¤ç§å…‰æŠ•å°„äº§ç”Ÿçš„ï¼Œé˜´å½±æ˜¯å…‰çº¿ç…§å°„ä¸åˆ°çš„åœ°æ–¹ï¼Œå› ä¸ºå„ä¸ªå…ƒç´ åœ¨zè½´ä¸Šå æ®äº†ä¸åŒå¤§å°çš„ä½ç½®é®æŒ¡ä½äº†è¿™äº›å…‰çº¿ã€‚</p><img src="15.png" style="zoom:80%;" /><p>ä»¥ä¸Šæ‘˜è‡ªæå®¢å­¦é™¢ç¿»è¯‘çš„MaterialDesignä¸­æ–‡æ–‡æ¡£ã€‚</p><h3 id="ä¸‹é¢è®²ä¸€ç‚¹æœ€åŸºç¡€çš„é˜´å½±ï¼š">ä¸‹é¢è®²ä¸€ç‚¹æœ€åŸºç¡€çš„é˜´å½±ï¼š</h3><p>ä¸‰ç»´ä¸–ç•Œä¸­ï¼Œzè½´å†³å®šçš„æ˜¯ç»„ä»¶çš„é«˜åº¦ï¼Œé‚£ä¹ˆé«˜åº¦è¯¥å¦‚ä½•è®©ç”¨æˆ·æ¸…æ™°åœ°æ„ŸçŸ¥åˆ°å‘¢ï¼Ÿé é˜´å½±ã€‚æŸä¸€å¯¹è±¡çš„â€œé«˜åº¦â€å†³å®šäº†å…¶å…·ä½“â€œé˜´å½±â€çš„è¡¨ç°å½¢å¼ã€‚é˜´å½±å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œæ ¹æ®ç”¨æˆ·çš„è¡Œä¸ºï¼Œé˜´å½±åº”å½“æœ‰ç›¸åº”çš„å“åº”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡ç†å¿µ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> è®¾è®¡ç†å¿µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typoraæ’å…¥æ•°å­¦ç¬¦å·ä¸å…¬å¼</title>
      <link href="/2021/10/05/typora%E6%8F%92%E5%85%A5%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E4%B8%8E%E5%85%AC%E5%BC%8F/"/>
      <url>/2021/10/05/typora%E6%8F%92%E5%85%A5%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E4%B8%8E%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="å…¬å¼å—ä¸è¡Œå†…å…¬å¼çš„æ·»åŠ ">å…¬å¼å—ä¸è¡Œå†…å…¬å¼çš„æ·»åŠ </h2><p>å…ˆåœ¨åå¥½è®¾ç½®é‡Œé¢æ‰“å¼€å…¬å¼è¾“å…¥ï¼Œç„¶åé‡å¯Typora</p><p>è¿™ä¸ªé½ï¼š<a href="https://www.cnblogs.com/dingdangsunny/p/12312966.html">https://www.cnblogs.com/dingdangsunny/p/12312966.html</a></p><hr><h3 id="å¸¸ç”¨å…¬å¼ä»£ç ">å¸¸ç”¨å…¬å¼ä»£ç </h3><p><strong>ç”¨{}åŒ…è£¹çš„è¡¨è¾¾å¼ä¼šè¢«çœ‹åšä¸€ä¸ªæ•´ä½“</strong></p><p><u><strong>ï¼ˆä¸‹é¢LaTeXä»£ç åœ¨Typoraä¸­ä½¿ç”¨æ—¶è¦ç”¨$åŒ…è£¹èµ·æ¥</strong>ï¼‰</u></p><ul><li>ä¸Šä¸‹æ ‡ï¼Œæ­£è´Ÿæ— ç©·</li><li>åŠ å‡ä¹˜ï¼Œåˆ†å¼ï¼Œæ ¹å·ï¼Œçœç•¥å·</li><li>ä¸‰è§’å‡½æ•°</li><li>çŸ¢é‡ï¼Œç´¯åŠ ç´¯ä¹˜ï¼Œæé™</li><li>å¸Œè…Šå­—æ¯</li><li>æ•°å­¦ç¬¦å·</li></ul><h4 id="ä¸Šä¸‹æ ‡ï¼Œæ­£è´Ÿæ— ç©·"><strong>ä¸Šä¸‹æ ‡ï¼Œæ­£è´Ÿæ— ç©·</strong></h4><p><img src="0.png" alt=""></p><p>å¼å­ä½œä¸ºä¸‹æ ‡ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mi>x</mi><mo>+</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">a_{x+y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> â€“  $a_{x+y}</p><h4 id="åŠ å‡ä¹˜ï¼Œåˆ†å¼ï¼Œæ ¹å·ï¼Œçœç•¥å·"><strong>åŠ å‡ä¹˜ï¼Œåˆ†å¼ï¼Œæ ¹å·ï¼Œçœç•¥å·</strong></h4><p><img src="1.png" alt=""></p><p>ç‚¹ä¹˜ï¼ša \cdot b</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>â‹…</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \cdot b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span></p><p>å‰ä¹˜ï¼ša \times b</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>Ã—</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \times b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span></p><h4 id="ä¸Šä¸‹å–æ•´">ä¸Šä¸‹å–æ•´</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒˆ</mo><mi>x</mi><mo stretchy="false">âŒ‰</mo></mrow><annotation encoding="application/x-tex">\lceil x \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒˆ</span><span class="mord mathnormal">x</span><span class="mclose">âŒ‰</span></span></span></span> ï¼š \lceil x \rceil</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">âŒŠ</mo><mi>x</mi><mo stretchy="false">âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lfloor x \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŒŠ</span><span class="mord mathnormal">x</span><span class="mclose">âŒ‹</span></span></span></span> ï¼š\lfloor x \rfloor</p><h4 id="ä¸‰è§’å‡½æ•°"><strong>ä¸‰è§’å‡½æ•°</strong></h4><p><img src="2.png" alt=""></p><h4 id="çŸ¢é‡ï¼Œç´¯åŠ ç´¯ä¹˜ï¼Œæé™"><strong>çŸ¢é‡ï¼Œç´¯åŠ ç´¯ä¹˜ï¼Œæé™</strong></h4><p><img src="3.png" alt=""></p><h4 id="å¸Œè…Šå­—æ¯"><strong>å¸Œè…Šå­—æ¯</strong></h4><p><img src="4.png" alt=""></p><table><thead><tr><th>å¸Œè…Šå­—æ¯</th><th>latex</th></tr></thead><tbody><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î±</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span></span></span></span></td><td>\alpha</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></td><td>\beta</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span>   <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î“</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î“</span></span></span></span></td><td>\gamma \Gamma</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î´</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span></span></span></span>    <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î”</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î”</span></span></span></span></td><td>\delta \ Delta</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi><mo separator="true">,</mo><mi>Îµ</mi><mo separator="true">,</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">\epsilon, \varepsilon, E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Ïµ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">Îµ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></td><td>\epsilon \varepsilon E</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¶</mi><mo separator="true">,</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">\zeta ,Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">Î¶</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span></span></span></td><td>\zeta Z</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi><mo separator="true">,</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">\eta ,H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span></td><td>\eta H</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi><mo separator="true">,</mo><mi>Ï‘</mi><mo separator="true">,</mo><mi mathvariant="normal">Î˜</mi></mrow><annotation encoding="application/x-tex">\theta ,\vartheta ,\Theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">Ï‘</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î˜</span></span></span></span></td><td>\theta \vartheta \Theta</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¹</mi><mo separator="true">,</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">\iota ,I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Î¹</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span></td><td>\iota I</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Îº</mi><mo separator="true">,</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">\kappa ,K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Îº</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></td><td>\kappa K</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î»</mi><mo separator="true">,</mo><mi mathvariant="normal">Î›</mi></mrow><annotation encoding="application/x-tex">\lambda ,\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Î»</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î›</span></span></span></span></td><td>\lambda \Lambda</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo separator="true">,</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">\mu ,M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Î¼</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></td><td>\mu M</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo separator="true">,</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">\mu ,N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Î¼</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></td><td>\mu N</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¾</mi><mo separator="true">,</mo><mi mathvariant="normal">Î</mi></mrow><annotation encoding="application/x-tex">\xi ,\Xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">Î¾</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î</span></span></span></span></td><td>\xi \Xi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mo separator="true">,</mo><mi>O</mi></mrow><annotation encoding="application/x-tex">o ,O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">o</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span></span></span></span></td><td>o O</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo separator="true">,</mo><mi mathvariant="normal">Î </mi></mrow><annotation encoding="application/x-tex">\pi ,\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î </span></span></span></span></td><td>\pi \Pi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï</mi><mo separator="true">,</mo><mi>Ï±</mi><mo separator="true">,</mo><mi>P</mi></mrow><annotation encoding="application/x-tex">\rho ,\varrho ,P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Ï</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">Ï±</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></td><td>\rho \varrho P</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi><mo separator="true">,</mo><mi mathvariant="normal">Î£</mi></mrow><annotation encoding="application/x-tex">\sigma ,\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î£</span></span></span></span></td><td>\sigma \Sigma</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï„</mi><mo separator="true">,</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">\tau ,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">Ï„</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></td><td>\tau T</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï…</mi><mo separator="true">,</mo><mi mathvariant="normal">Î¥</mi></mrow><annotation encoding="application/x-tex">\upsilon ,\Upsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î¥</span></span></span></span></td><td>\upsilon \Upsilon</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï•</mi><mo separator="true">,</mo><mi>Ï†</mi><mo separator="true">,</mo><mi mathvariant="normal">Î¦</mi></mrow><annotation encoding="application/x-tex">\phi ,\varphi ,\Phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Ï•</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">Ï†</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î¦</span></span></span></span></td><td>\phi \varphi \Phi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‡</mi><mo separator="true">,</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">\chi, X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Ï‡</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></td><td>\chi X</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïˆ</mi><mo separator="true">,</mo><mi mathvariant="normal">Î¨</mi></mrow><annotation encoding="application/x-tex">\psi ,\Psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ïˆ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î¨</span></span></span></span></td><td>\psi \Psi</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï‰</mi><mo separator="true">,</mo><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\omega ,\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">Î©</span></span></span></span></td><td>\omega \Omega</td></tr></tbody></table><h4 id="å…³ç³»è¿ç®—ç¬¦"><strong>å…³ç³»è¿ç®—ç¬¦</strong></h4><p><img src="5.png" alt=""></p><hr><p>å¤§å†™å½¢å¼åªè¦å°†å­—æ¯å¼€å¤´å¤§å†™å³å¯</p><p>ä»¥ä¸Š <a href="https://blog.csdn.net/mingzhuo_126/article/details/82722455">https://blog.csdn.net/mingzhuo_126/article/details/82722455</a></p><h4 id="æ•°å­¦ç¬¦å·"><strong>æ•°å­¦ç¬¦å·</strong></h4><table><thead><tr><th style="text-align:center">æ•°å­¦è¡¨è¾¾å¼</th><th style="text-align:center">ä»£ç </th></tr></thead><tbody><tr><td style="text-align:center">âŸº</td><td style="text-align:center">\iff</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo mathvariant="normal">â‰ </mo></mrow><annotation encoding="application/x-tex">\neq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span></span></span></span></td><td style="text-align:center">\neq</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¡</mo></mrow><annotation encoding="application/x-tex">\equiv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46375em;vertical-align:0em;"></span><span class="mrel">â‰¡</span></span></span></span></td><td style="text-align:center">\equiv</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â†’</span></span></span></span></td><td style="text-align:center">\rightarrow</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‡’</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">â‡’</span></span></span></span></td><td style="text-align:center">\Rightarrow</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:center">\hat{y}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ€</mi></mrow><annotation encoding="application/x-tex">\forall</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">âˆ€</span></span></span></span></td><td style="text-align:center">\forall</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆƒ</mi></mrow><annotation encoding="application/x-tex">\exists</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">âˆƒ</span></span></span></span></td><td style="text-align:center">\exists</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆˆ</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">âˆˆ</span></span></span></span></td><td style="text-align:center">\in</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âŠ‚Ì¸</mo></mrow><annotation encoding="application/x-tex">\not\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">âŠ‚</span></span></span></span></td><td style="text-align:center">\not\subset</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ…</mi></mrow><annotation encoding="application/x-tex">\emptyset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">âˆ…</span></span></span></span></td><td style="text-align:center">\emptyset</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âŠ‚</mo></mrow><annotation encoding="application/x-tex">\subset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">âŠ‚</span></span></span></span></td><td style="text-align:center">\subset</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âŠ†</mo></mrow><annotation encoding="application/x-tex">\subseteq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">âŠ†</span></span></span></span></td><td style="text-align:center">\subseteq</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆµ</mo></mrow><annotation encoding="application/x-tex">\because</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">âˆµ</span></span></span></span></td><td style="text-align:center">\because</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ´</mo></mrow><annotation encoding="application/x-tex">\therefore</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">âˆ´</span></span></span></span></td><td style="text-align:center">\therefore</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆµ</mo></mrow><annotation encoding="application/x-tex">\because</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mrel amsrm">âˆµ</span></span></span></span></td><td style="text-align:center">\because</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ </mi></mrow><annotation encoding="application/x-tex">\angle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69224em;vertical-align:0em;"></span><span class="mord">âˆ </span></span></span></span></td><td style="text-align:center">\angle</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span></td><td style="text-align:center">\infty</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo mathvariant="normal">âˆ‰</mo></mrow><annotation encoding="application/x-tex">\notin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel"><span class="mord"><span class="mrel">âˆˆ</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span></span></span></span></span></td><td style="text-align:center">\notin</td></tr></tbody></table><p>è¡¥å……çš„ä¸€äº›ï¼š</p><table><thead><tr><th style="text-align:center">æ•°å­¦è¡¨è¾¾å¼</th><th style="text-align:center">ä»£ç </th></tr></thead><tbody><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi>x</mi><mo>â‹…</mo><mi>y</mi></mrow><mo stretchy="true">â€¾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{x\cdot y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388899999999999em;vertical-align:-0.19444em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.64445em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.56445em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:center">\overline{x\cdot y}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{dy}{dx}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:center">\dfrac{dy}{dx}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ«</mo><mn>0</mn><mn>4</mn></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\int_{0}^{4} f(x) dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3648280000000002em;vertical-align:-0.35582em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0090080000000001em;"><span style="top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.2579000000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.35582em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></td><td style="text-align:center">\int_{0}^{4} f(x) dx</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><msup><mn>0</mn><mo>âˆ˜</mo></msup></mrow><annotation encoding="application/x-tex">90 ^\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.674115em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ˜</span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center">90 ^\circ</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ¬</mo></mrow><annotation encoding="application/x-tex">\iint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">âˆ¬</span></span></span></span></td><td style="text-align:center">\iint</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ­</mo></mrow><annotation encoding="application/x-tex">\iiint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.111em;vertical-align:-0.306em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">âˆ­</span></span></span></span></td><td style="text-align:center">\iiint</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ¬</mo><mn>0</mn><mn>4</mn></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\iint_{0}^{4} f(x) dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3647080000000003em;vertical-align:-0.3557em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0004999999999999727em;">âˆ¬</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0090080000000001em;"><span style="top:-2.3443em;margin-left:-0.19445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.2579000000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3557em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span></td><td style="text-align:center">\iint_{0}^{4} f(x) dx</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆª</mo><mi>y</mi><mo>âˆ©</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">x \cup y \cap z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆª</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ©</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></td><td style="text-align:center">x \cup y \cap z</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mroot><mn>345</mn><mi>n</mi></mroot></mrow><annotation encoding="application/x-tex">\sqrt[n]{345}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.679944em;"><span style="top:-2.964664em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">345</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:center">\sqrt[n]{345}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">a_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center">a_{ij}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo mathvariant="normal">â€²</mo><mo mathvariant="normal">â€²</mo></mrow></msup></mrow><annotation encoding="application/x-tex">y&#x27;,y&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.946332em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²â€²</span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center">yâ€™,yâ€™â€™</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆ¨</mo><mi>y</mi><mo>âˆ§</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">x \lor y \land z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ¨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.75em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ§</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></td><td style="text-align:center">x \lor y \land z</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ®</mo></mrow><annotation encoding="application/x-tex">\oint</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.11112em;vertical-align:-0.30612em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;">âˆ®</span></span></span></span></td><td style="text-align:center">\oint</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">x</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi><mover><mo><mi>A</mi><mi>B</mi></mo><mstyle mathsize="1.728em"><mo lspace="0em" rspace="0em">âŒ¢</mo></mstyle></mover></mi></mrow><annotation encoding="application/x-tex">\overset{\LARGE{\frown}}{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6013319200000002em;vertical-align:0em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.6013319200000002em;"><span style="top:-3.7279999999999998em;"><span class="pstrut" style="height:3.7279999999999998em;"></span><span><span class="mop"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-4.61133em;margin-left:0em;"><span class="pstrut" style="height:3.7279999999999998em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sizing reset-size3 size9"><span class="mrel">âŒ¢</span></span></span></span></span></span></span></span></span></span></span></span></span></td><td style="text-align:center">\overset{\LARGE{\frown}}{AB}</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><mo><mi>R</mi><mo>â‹ˆ</mo><mi>S</mi></mo><mrow><mi>A</mi><mi>Î¸</mi><mi>B</mi></mrow></munder></mrow><annotation encoding="application/x-tex">\mathop{R \bowtie S} \limits_{A \theta B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4404379999999999em;vertical-align:-0.7571079999999999em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.342892em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">Î¸B</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‹ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7571079999999999em;"><span></span></span></span></span></span></span></span></span></td><td style="text-align:center">\mathop{R \bowtie S} \limits_{A \theta B}</td></tr></tbody></table><p><strong>1. ä½¿ç”¨\ è¡¨ç¤ºç©ºæ ¼</strong></p><p>ä»¥åŠè°ƒæ•´ç©ºæ ¼çš„å¤§å°</p><table><thead><tr><th>quadç©ºæ ¼</th><th>a\ \qquad b</th><th><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mspace width="2em"/><mi>b</mi></mrow><annotation encoding="application/x-tex">a \qquad b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">b</span></span></span></span></th><th>ä¸¤ä¸ª<em>m</em>çš„å®½åº¦</th></tr></thead><tbody><tr><td>quadç©ºæ ¼</td><td>a\ \quad b</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mspace width="1em"/><mi>b</mi></mrow><annotation encoding="application/x-tex">a \quad b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathnormal">b</span></span></span></span></td><td>ä¸€ä¸ª<em>m</em>çš„å®½åº¦</td></tr><tr><td>å¤§ç©ºæ ¼</td><td>a\ b</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>Â </mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">a\ b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace">Â </span><span class="mord mathnormal">b</span></span></span></span></td><td>1/3<em>m</em>å®½åº¦</td></tr><tr><td>ä¸­ç­‰ç©ºæ ¼</td><td>a\;b</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>â€…â€Š</mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">a\;b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal">b</span></span></span></span></td><td>2/7<em>m</em>å®½åº¦</td></tr><tr><td>å°ç©ºæ ¼</td><td>a\,b</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>â€‰</mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">a\,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span></td><td>1/6<em>m</em>å®½åº¦</td></tr><tr><td>æ²¡æœ‰ç©ºæ ¼</td><td>ab</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">ab</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">ab</span></span></span></span></td><td></td></tr><tr><td>ç´§è´´</td><td>a!b</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>â€‰â£</mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">a\!b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mord mathnormal">b</span></span></span></span></td><td>ç¼©è¿›1/6<em>m</em>å®½åº¦</td></tr></tbody></table><p><strong>2. ä½¿ç”¨\ \è¡¨ç¤ºæ¢è¡Œ</strong></p><h2 id="çŸ©é˜µ"><strong>çŸ©é˜µ</strong></h2><p><strong>ç®€å•çŸ©é˜µ</strong></p><p>ä½¿ç”¨<code>\begin&#123;matrix&#125;â€¦\end&#123;matrix&#125;</code>ç”Ÿæˆï¼Œ æ¯ä¸€è¡Œä»¥<code>\\</code>ç»“å°¾è¡¨ç¤ºæ¢è¡Œï¼Œå…ƒç´ é—´ä»¥<code>&amp;</code>é—´éš”ï¼Œå¼å­çš„è¡¨ç¤ºåºå·<code>\tag&#123;1&#125;</code>ï¼ˆå³è¾¹çš„åºå·ï¼‰ã€‚</p><p><img src="6.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> $$</span><br><span class="line">\begin&#123;matrix&#125;</span><br><span class="line"> 1 &amp; 2 &amp; 3 \\</span><br><span class="line"> 4 &amp; 5 &amp; 6 \\</span><br><span class="line"> 7 &amp; 8 &amp; 9 </span><br><span class="line">\end&#123;matrix&#125; \tag&#123;1&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><strong>å¸¦å·¦å³æ‹¬å·çš„çŸ©é˜µ(å¤§ä¸­å°æ‹¬å·)</strong></p><p><strong>æ–¹æ³•ä¸€</strong>ï¼šåœ¨<code>\begin&#123;&#125;</code>ä¹‹å‰å’Œ<code>\end&#123;&#125;</code>ä¹‹åæ·»åŠ å·¦å³æ‹¬å·çš„ä»£ç ã€‚</p><p>å¤§æ‹¬å·ï¼š</p><p><img src="7.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \left\&#123;</span><br><span class="line"> \begin&#123;matrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;matrix&#125;</span><br><span class="line">  \right\&#125; \tag&#123;2&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>ä¸­æ‹¬å·ï¼š</p><p><img src="8.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \left[</span><br><span class="line"> \begin&#123;matrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;matrix&#125;</span><br><span class="line">  \right] \tag&#123;3&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>å°æ‹¬å·ï¼š</p><p><img src="9.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \left(</span><br><span class="line"> \begin&#123;matrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;matrix&#125;</span><br><span class="line">  \right) \tag&#123;4&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•äºŒ</strong>ï¼šæ”¹å˜<code>\begin&#123;matrix&#125;</code>å’Œ<code>\end&#123;matrix&#125;</code>ä¸­<code>&#123;matrix&#125;</code></p><p>å¤§æ‹¬å·ï¼š</p><p><img src="10.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \begin&#123;Bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;Bmatrix&#125; \tag&#123;6&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>ä¸­æ‹¬å·ï¼š</p><p><img src="11.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \begin&#123;bmatrix&#125;</span><br><span class="line">   1 &amp; 2 &amp; 3 \\</span><br><span class="line">   4 &amp; 5 &amp; 6 \\</span><br><span class="line">   7 &amp; 8 &amp; 9</span><br><span class="line">  \end&#123;bmatrix&#125; \tag&#123;6&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><strong>åŒ…å«å¸Œè…Šå­—æ¯ä¸çœç•¥å·</strong></p><p>è¡Œçœç•¥å·<code>\cdots</code>ï¼Œåˆ—çœç•¥å·<code>\vdots</code>ï¼Œæ–œå‘çœç•¥å·ï¼ˆå·¦ä¸Šè‡³å³ä¸‹ï¼‰<code>\ddots</code>ã€‚</p><p><img src="12.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"> \left\&#123;</span><br><span class="line"> \begin&#123;matrix&#125;</span><br><span class="line"> 1      &amp; 2        &amp; \cdots &amp; 5        \\</span><br><span class="line"> 6      &amp; 7        &amp; \cdots &amp; 10       \\</span><br><span class="line"> \vdots &amp; \vdots   &amp; \ddots &amp; \vdots   \\</span><br><span class="line"> \alpha &amp; \alpha+1 &amp; \cdots &amp; \alpha+4 </span><br><span class="line"> \end&#123;matrix&#125;</span><br><span class="line"> \right\&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><hr><h2 id="è¡¨æ ¼">è¡¨æ ¼</h2><p><strong>ç®€æ˜“è¡¨æ ¼</strong></p><p><img src="13.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\begin&#123;array&#125;&#123;|c|c|c|&#125;</span><br><span class="line">\hline 2&amp;9&amp;4\\</span><br><span class="line">\hline 7&amp;5&amp;3\\</span><br><span class="line">\hline 6&amp;1&amp;8\\</span><br><span class="line">\hline</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p><strong>å¼€å¤´ç»“å°¾</strong>ï¼š <code>\begin&#123;array&#125;</code> ï¼Œ <code>\end&#123;array&#125;</code></p><p><strong>å®šä¹‰å¼</strong>ï¼šä¾‹ï¼š<code>&#123;|c|c|c|&#125;</code>ï¼Œå…¶ä¸­<code>c</code> <code>l</code> <code>r</code> åˆ†åˆ«ä»£è¡¨å±…ä¸­ã€å·¦å¯¹é½åŠå³å¯¹é½ã€‚</p><p><strong>åˆ†å‰²çº¿</strong>ï¼šâ‘ <strong>ç«–ç›´åˆ†å‰²çº¿</strong>ï¼šåœ¨å®šä¹‰å¼ä¸­æ’å…¥ <code>|</code>ï¼Œ ï¼ˆ<code>||</code>è¡¨ç¤ºä¸¤æ¡ç«–ç›´åˆ†å‰²çº¿ï¼‰ã€‚</p><p>â‘¡<strong>æ°´å¹³åˆ†å‰²çº¿</strong>ï¼šåœ¨ä¸‹ä¸€è¡Œè¾“å…¥å‰æ’å…¥ <code>\hline</code>ï¼Œä»¥ä¸‹å›¾çœŸå€¼è¡¨ä¸ºä¾‹ã€‚</p><p>å…¶ä»–ï¼šæ¯è¡Œå…ƒç´ é—´å‡é¡»è¦æ’å…¥ <code>&amp;</code> ï¼Œæ¯è¡Œå…ƒç´ ä»¥ <code>\\</code> ç»“å°¾ã€‚</p><p><strong>çœŸå€¼è¡¨</strong></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.1600em" columnalign="center center center" columnlines="none solid" columnspacing="1em" rowlines="solid none none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>A</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>B</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>F</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{cc|c}       A&amp;B&amp;F\\\hline 0&amp;0&amp;0\\       0&amp;1&amp;1\\       1&amp;0&amp;1\\       1&amp;1&amp;1\\\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.000000000000001em;vertical-align:-2.7500000000000004em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.25em;"><span class="pstrut" style="height:5.25em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:6.000000000000001em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-2.7500000000000004em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-7.300000000000001em;"><span class="pstrut" style="height:5.25em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span></span></span></span></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\begin&#123;array&#125;&#123;cc|c&#125;</span><br><span class="line">       A&amp;B&amp;F\\</span><br><span class="line">\hline 0&amp;0&amp;0\\</span><br><span class="line">       0&amp;1&amp;1\\</span><br><span class="line">       1&amp;0&amp;1\\</span><br><span class="line">       1&amp;1&amp;1\\</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><hr><h2 id="å¤šè¡Œç­‰å¼å¯¹é½"><strong>å¤šè¡Œç­‰å¼å¯¹é½</strong></h2><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>b</mi><mo>+</mo><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>d</mi><mo>+</mo><mi>e</mi><mo>+</mo><mi>f</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}a &amp;= b + c \\  &amp;= d + e + f\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">c</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\begin&#123;aligned&#125;</span><br><span class="line">a &amp;= b + c \\</span><br><span class="line">  &amp;= d + e + f</span><br><span class="line">\end&#123;aligned&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><h2 id="æ–¹ç¨‹ç»„ã€æ¡ä»¶è¡¨è¾¾å¼"><strong>æ–¹ç¨‹ç»„ã€æ¡ä»¶è¡¨è¾¾å¼</strong></h2><p>æ–¹ç¨‹ç»„ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.3600em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mi>x</mi><mo>+</mo><mn>5</mn><mi>y</mi><mo>+</mo><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>7</mn><mi>x</mi><mo>âˆ’</mo><mn>2</mn><mi>y</mi><mo>+</mo><mn>4</mn><mi>z</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>6</mn><mi>x</mi><mo>+</mo><mn>3</mn><mi>y</mi><mo>+</mo><mn>2</mn><mi>z</mi></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{cases}3x + 5y +  z \\7x - 2y + 4z \\-6x + 3y + 2z\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500199999999998em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-2.19199em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.31599999999999984em;width:0.889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.889em' height='0.31599999999999984em' style='width:0.889em' viewBox='0 0 889 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-3.15001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.292009999999999em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.31599999999999984em;width:0.889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.889em' height='0.31599999999999984em' style='width:0.889em' viewBox='0 0 889 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-4.600019999999999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">5</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">7</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">4</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">âˆ’</span><span class="mord">6</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\begin&#123;cases&#125;</span><br><span class="line">3x + 5y +  z \\</span><br><span class="line">7x - 2y + 4z \\</span><br><span class="line">-6x + 3y + 2z</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>åŒç†ï¼Œæ¡ä»¶è¡¨è¾¾å¼ï¼š</p><p><img src="16.svg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">f(n) =</span><br><span class="line">\begin&#123;cases&#125; </span><br><span class="line">n/2,  &amp; \text&#123;if &#125;n\text&#123; is even&#125; \\</span><br><span class="line">3n+1, &amp; \text&#123;if &#125;n\text&#123; is odd&#125;</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><hr><h2 id="é—´éš”-å¤§å°ç©ºæ ¼ã€ç´§è´´"><strong>é—´éš” (å¤§å°ç©ºæ ¼ã€ç´§è´´)</strong></h2><p><strong>ç´§è´´ + æ— ç©ºæ ¼ + å°ç©ºæ ¼ + ä¸­ç©ºæ ¼ + å¤§ç©ºæ ¼ + çœŸç©ºæ ¼ + åŒçœŸç©ºæ ¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">a\!b + ab + a\,b + a\;b + a\ b + a\quad b + a\qquad b</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>ç´§è´´<code>\!</code></p><p>æ— ç©ºæ ¼ å°ç©ºæ ¼<code>\,</code> ä¸­ç©ºæ ¼<code>\;</code> å¤§ç©ºæ ¼<code>\</code></p><p>çœŸç©ºæ ¼<code>\quad</code> åŒçœŸç©ºæ ¼<code>\qquad</code></p>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨çŸ¥è¯†(æ‚è°ˆ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ä¸æ±‡æ€» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£ï¼š1.å›¾çš„è¡¨ç¤ºå’ŒåŒæ„åŠè¿é€šæ€§</title>
      <link href="/2021/10/05/%E7%A6%BB%E6%95%A3%EF%BC%9A1.%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%90%8C%E6%9E%84/"/>
      <url>/2021/10/05/%E7%A6%BB%E6%95%A3%EF%BC%9A1.%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%90%8C%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h3 id="å›¾çš„è¡¨ç¤ºï¼š">å›¾çš„è¡¨ç¤ºï¼š</h3><ul><li><p>é‚»æ¥è¡¨</p><p><img src="1.png" alt=""></p></li><li><p>é‚»æ¥çŸ©é˜µ(<strong>æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µæ€»æ˜¯å¯¹ç§°çš„</strong>)</p><ol><li><p>å›¾çš„é‚»æ¥çŸ©é˜µä¾èµ–äºæ‰€é€‰æ‹©çš„é¡¶ç‚¹çš„é¡ºåºã€‚å› æ­¤å¸¦nä¸ªé¡¶ç‚¹çš„å›¾æœ‰n!ä¸ªä¸åŒçš„é‚»æ¥çŸ©é˜µï¼Œå› ä¸ºnä¸ªé¡¶ç‚¹æœ‰n!ä¸ªä¸åŒçš„é¡ºåºã€‚</p></li><li><p>å½“å›¾é‡Œçš„è¾¹ç›¸å¯¹å°‘æ—¶ï¼Œé‚»æ¥çŸ©é˜µæ˜¯ç¨€ç–çŸ©é˜µï¼Œå³åªæœ‰å¾ˆå°‘çš„é0é¡¹çš„çŸ©é˜µã€‚å¯ä»¥ç”¨ç‰¹æ®Šçš„æ–¹æ³•æ¥è¡¨ç¤ºå’Œè®¡ç®—è¿™æ ·çš„çŸ©é˜µã€‚</p></li><li><p>é‚»æ¥çŸ©é˜µä¹Ÿå¯ä»¥è¡¨ç¤ºå¸¦ç¯å’Œå¤šé‡è¾¹çš„æ— å‘å›¾,æŠŠé¡¶ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸Šçš„ç¯è¡¨ç¤ºæˆé‚»æ¥çŸ©é˜µï¼ˆi,iï¼‰ä½ç½®ä¸Šçš„1ã€‚å½“å‡ºç°å¤šé‡è¾¹æ—¶å€™ï¼Œé‚»æ¥çŸ©é˜µä¸å†æ˜¯0ï¼1çŸ©é˜µï¼Œè¿™æ˜¯å› ä¸ºé‚»æ¥çŸ©é˜µçš„ç¬¬( i,j)é¡¹ç­‰äºä¸{<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>}å…³è”çš„è¾¹æ•°ã€‚åŒ…æ‹¬å¤šé‡å›¾ä¸ä¼ªå›¾åœ¨å†…çš„æ‰€æœ‰æ— å‘å›¾éƒ½å…·æœ‰å¯¹ç§°çš„é‚»æ¥çŸ©é˜µ</p></li></ol><p><img src="0.png" alt=""></p><p><strong>å¯¹æ— å‘å›¾æ¥è¯´ï¼Œé‚»æ¥çŸ©é˜µæ¯ä¸€è¡Œå„ä¸ªä½ç½®ä¸Šæ•°å­—ä¹‹å’Œä»£è¡¨ä»€ä¹ˆï¼Ÿ</strong></p><p>ç­‰äºé¡¶ç‚¹içš„åº¦å‡å»åœ¨é¡¶ç‚¹iä¸Šçš„ç¯æ•°</p><p>å¯¹äºæœ‰å‘å›¾è€Œè¨€ï¼Œé‚»æ¥çŸ©é˜µæ¯ä¸€è¡Œå„ä¸ªä½ç½®ä¸Šæ•°å­—ä¹‹å’Œä»£è¡¨ä»€ä¹ˆï¼Ÿä»£è¡¨è¯¥é¡¶ç‚¹çš„å‡ºåº¦ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><msup><mi>g</mi><mo>+</mo></msup><mo stretchy="false">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">deg^+(v_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>,æ¯ä¸€åˆ—å„ä¸ªä½ç½®ä¸Šæ•°å­—ä¹‹å’Œä»£è¡¨ä»€ä¹ˆï¼Ÿä»£è¡¨è¯¥é¡¶ç‚¹çš„å…¥åº¦</p></li><li><p>å…³è”çŸ©é˜µ</p><p><img src="2.png" alt=""></p><p><img src="3.png" alt=""></p></li></ul><h3 id="å›¾çš„åŒæ„">å›¾çš„åŒæ„</h3><p><img src="4.png" alt=""></p><h4 id="æ€ä¹ˆåˆ¤æ–­ä¸¤ä¸ªç®€å•å›¾æ˜¯å¦åŒæ„"><strong>æ€ä¹ˆåˆ¤æ–­ä¸¤ä¸ªç®€å•å›¾æ˜¯å¦åŒæ„</strong>?</h4><h5 id="ç›¸åŒä¸å˜é‡ï¼š">ç›¸åŒä¸å˜é‡ï¼š</h5><ul><li><p>ç›¸åŒçš„é¡¶ç‚¹æ•°</p></li><li><p>æœ‰ç›¸åŒçš„è¾¹æ•°</p></li><li><p><strong>è¿é€šåˆ†æ”¯çš„æ•°ç›®åŠå…¶å¤§å°</strong></p></li><li><p><strong>ä¸¤å›¾åŒæ„åªæœ‰å½“ä»–ä»¬å…·æœ‰ç›¸åŒé•¿åº¦çš„ç®€å•å›è·¯ã€‚</strong></p></li><li><p>åº”ç”¨ä¸¤å›¾ä¸­ç›¸åº”é¡¶ç‚¹å…·æœ‰ç›¸åŒçš„åº¦æ¥åˆ¤æ–­ä¸¤å›¾çš„åŒæ„æƒ…å†µ</p></li></ul><h3 id="è¿é€šæ€§">è¿é€šæ€§</h3><h4 id="å®šä¹‰1-è·¯å¾„">å®šä¹‰1:è·¯å¾„</h4><p>å›¾<em>G</em>çš„ä¸€ä¸ªéç©ºç‚¹ã€è¾¹äº¤æ›¿åºåˆ—<em>W</em>ï¼<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mo>â€¦</mo><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2â€¦e_kv_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ç§°ä¸ºä¸€æ¡<strong>ä»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>åˆ°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„è·¯å¾„</strong>æˆ–(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)è·¯å¾„ï¼Œ</p><p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">v_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>çš„<strong>ç«¯ç‚¹</strong>(1â‰¤iâ‰¤k)ã€‚ ç§°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºWçš„<strong>èµ·ç‚¹</strong>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ä¸ºWçš„<strong>ç»ˆç‚¹</strong>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>(1â‰¤iâ‰¤kï¼1)ä¸ºWçš„å†…ç‚¹ï¼Œkä¸ºWçš„<strong>è·¯é•¿</strong>ã€‚</p><p><img src="5.png" alt=""></p><h4 id="å®šä¹‰ï¼’-è¿¹ä¸è·¯">å®šä¹‰ï¼’:è¿¹ä¸è·¯</h4><p>è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mo>â€¦</mo><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2â€¦e_kv_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ºå›¾<em>G</em>ä¸­çš„ä¸€æ¡è·¯å¾„ï¼Œè‹¥è¾¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mn>1</mn></msub><mi>e</mi><msub><mo separator="true">,</mo><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>e</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">e_1e,_2,...e_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">e</span><span class="mpunct"><span class="mpunct">,</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> äº’ä¸ç›¸åŒï¼Œåˆ™ç§°è¯¥è·¯å¾„ä¸º<strong>è¿¹</strong>ï¼›è‹¥ç‚¹åºåˆ—<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0,v_1,â€¦,v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>äº’ä¸ç›¸åŒï¼Œåˆ™ç§°è¯¥è·¯å¾„ä¸º<strong>è·¯</strong>ã€‚</p><h4 id="å®šä¹‰ï¼“ï¼šå¼€é—­è·¯å¾„ä¸å¼€é—­è¿¹">å®šä¹‰ï¼“ï¼šå¼€é—­è·¯å¾„ä¸å¼€é—­è¿¹</h4><p>è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2...e_k v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯å›¾Gä¸­çš„ä¸€æ¡è·¯å¾„ä¸”kâ‰¥1ï¼Œå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mtext>ï¼</mtext><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0ï¼v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œåˆ™ç§°è¯¥è·¯å¾„ä¸º<strong>é—­è·¯å¾„</strong>ï¼Œå¦åˆ™ç§°ä¸º<strong>å¼€è·¯å¾„</strong>ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œè‹¥<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2...e_kv_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯ä¸€æ¡è¿¹ï¼Œkâ‰¥1ï¼Œå½“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mtext>ï¼</mtext><msub><mi>v</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">v_0ï¼v_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ—¶ç§°ä¸º<strong>é—­è¿¹</strong>ï¼Œå¦åˆ™ç§°ä¸º<strong>å¼€è¿¹</strong>ã€‚ <strong>é—­è¿¹ä¹Ÿç§°ä¸ºå›è·¯</strong>ã€‚</p><h4 id="å®šä¹‰ï¼”ï¼šåœˆ">å®šä¹‰ï¼”ï¼šåœˆ</h4><p>è®¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><msub><mi>e</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><msub><mi>e</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>e</mi><mi>k</mi></msub><msub><mi>v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">v_0e_1v_1e_2v_2...e_k v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">...</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯ä¸€æ¡<strong>é—­è¿¹</strong>ï¼Œ</p><p>å¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mtext>ï¼Œ</mtext><msub><mi>v</mi><mn>1</mn></msub><mtext>ï¼Œ</mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mtext>ï¼Œ</mtext><msub><mi>v</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">v_0ï¼Œv_1ï¼Œ...ï¼Œv_{k-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord">...</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>äº’ä¸ç›¸åŒï¼Œ</p><p>åˆ™ç§°è¯¥é—­è¿¹ä¸º<strong>åœˆæˆ–kåœˆ</strong>ï¼Œ</p><p>ä¸”å½“kä¸ºå¶æ•°æ—¶ç§°ä¸º<strong>å¶åœˆ</strong>ï¼Œkä¸ºå¥‡æ•°æ—¶ç§°ä¸º<strong>å¥‡åœˆ</strong>ã€‚</p><h4 id="PS">PS.</h4><ul><li><strong>ä¸€æ¡è·¯å¿…æ˜¯ä¸€æ¡è¿¹</strong></li><li>è‡ªç¯å’Œä¸¤æ¡å¹³è¡Œè¾¹éƒ½è‡ªæˆä¸€åœˆ</li></ul><h4 id="å®šç†1">å®šç†1</h4><p>è‹¥å›¾<em>G</em>ä¸­æ¯ä¸ªé¡¶ç‚¹åº¦æ•°è‡³å°‘ä¸ºï¼’ï¼Œåˆ™<em>G</em>ä¸­å¿…å«æœ‰åœˆã€‚</p><h4 id="å®šä¹‰ï¼•ï¼šè¿é€š">å®šä¹‰ï¼•ï¼šè¿é€š</h4><p>è®¾<em>G</em>æ˜¯ä¸€ä¸ªå›¾ï¼Œuï¼ŒvâˆˆV(G)ï¼Œ<br>å¦‚æœå­˜åœ¨ä»<em>u</em>åˆ°<em>v</em>çš„è·¯ï¼Œåˆ™ç§°<em>u</em>ï¼Œ<em>v</em>æ˜¯ç›¸è¿çš„æˆ–è¿é€šçš„ï¼Œè‹¥<em>G</em>ä¸­ä»»æ„ä¸¤ç‚¹éƒ½è¿é€šï¼Œåˆ™ç§°å›¾<em>G</em>æ˜¯<strong>è¿é€šçš„</strong>ã€‚</p><p><strong>å›¾Gä¸­é¡¶ç‚¹ä¹‹é—´çš„è¿é€šå…³ç³»æ˜¯ä¸€ä¸ªç­‰ä»·å…³ç³»æ ¹æ®è¯¥å…³ç³»å¯å°†V(G)åˆ’åˆ†æˆä¸€äº›ç­‰ä»·ç±»<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mn>1</mn></msub><mtext>ï¼Œ</mtext><msub><mi>V</mi><mn>2</mn></msub><mtext>ï¼Œ</mtext><mo>â€¦</mo><mtext>ï¼Œ</mtext><msub><mi>V</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">V_1ï¼ŒV_2ï¼Œâ€¦ï¼ŒV_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œæ¯ä¸ª<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">V_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å¯¼å‡ºçš„å­å›¾G(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">V_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)ç§°ä¸ºGçš„ä¸€ä¸ªè¿é€šåˆ†æ”¯ã€‚</strong></p><p>å›¾Gçš„è¿é€šåˆ†æ”¯æ˜¯å›¾Gçš„è¿é€šå­å›¾ï¼Œä¸”è¯¥å­å›¾ä¸æ˜¯å›¾Gçš„å¦ä¸€ä¸ªè¿é€šå­å›¾çš„çœŸå­å›¾ã€‚</p><p><strong>Gçš„è¿é€šåˆ†æ”¯æ•°é€šå¸¸ç”¨Ï‰(G)è¡¨ç¤º</strong><br><strong>Gæ˜¯è¿é€šçš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>â€…â€Š</mtext><mo>âŸº</mo><mtext>â€…â€Š</mtext></mrow><annotation encoding="application/x-tex">\iff</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŸº</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span></span></span>Ï‰(G)ï¼1</strong></p><h4 id="æœ‰å‘å›¾çš„è¿é€šæ€§ä¸è¿é€šå›¾">æœ‰å‘å›¾çš„è¿é€šæ€§ä¸è¿é€šå›¾</h4><p>å­˜åœ¨æœ‰å‘(uï¼Œv)è·¯ï¼Œåˆ™ç§°væ˜¯ä»u<strong>å¯è¾¾çš„</strong>æˆ–è€…<strong>å¼±è¿é€šçš„</strong></p><p>è‹¥uï¼Œväº’ç›¸å¯è¾¾ï¼Œåˆ™ç§°uï¼Œvæ˜¯<strong>åŒå‘è¿é€šçš„</strong>æˆ–è€…è¯´æ˜¯<strong>å¼ºè¿é€šçš„</strong></p><p><u>æ³¨æ„ï¼Œuã€vå¯ä»¥ä¸ç›´æ¥ç›¸è¿ï¼Œè€Œæ˜¯â€œå¯è¾¾â€</u></p><p>è‹¥å¯¹Dä¸­ä»»ä½•ä¸¤é¡¶ç‚¹ï¼Œè‡³å°‘æœ‰ä¸€é¡¶ç‚¹å¯ä»å¦ä¸€é¡¶ç‚¹å¯è¾¾ï¼Œå³ä»»ä½•ä¸¤å®šç‚¹é—´éƒ½æ˜¯å¼±è¿é€šçš„ï¼Œåˆ™ç§°Dæ˜¯<strong>å•å‘è¿é€šå›¾</strong>æˆ–<strong>å¼±è¿é€šå›¾</strong></p><p>è‹¥Dä¸­ä»»ä½•ä¸¤é¡¶ç‚¹éƒ½æ˜¯åŒå‘è¿é€šçš„ï¼Œåˆ™ç§°Dæ˜¯<strong>åŒå‘è¿é€šå›¾æˆ–å¼ºè¿é€šå›¾</strong></p><p>æœ‰å‘å›¾Gçš„å­å›¾æ˜¯å¼ºè¿é€šå›¾ä½†ä¸åŒ…å«åœ¨æ›´å¤§çš„å¼ºè¿é€šå­å›¾ä¸­ï¼Œå¯ç§°ä¸ºGçš„<strong>å¼ºè¿é€šåˆ†æ”¯</strong></p><p>PS.</p><ul><li>åŒå‘è¿é€šå…³ç³»æ˜¯<em>D</em>çš„é¡¶ç‚¹é›†<em>V</em>ä¸Šçš„ä¸€ä¸ªç­‰ä»·å…³ç³»</li><li>åŒå‘åˆ†æ”¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>â€…â€Š</mtext><mo>âŸº</mo><mtext>â€…â€Š</mtext></mrow><annotation encoding="application/x-tex">\iff</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŸº</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span></span></span>å¼ºè¿é€šåˆ†æ”¯</li><li><em>ï¼¤</em>å¼ºè¿é€š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>â€…â€Š</mtext><mo>âŸº</mo><mtext>â€…â€Š</mtext></mrow><annotation encoding="application/x-tex">\iff</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŸº</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span></span></span><em>ï¼¤</em>æ°æœ‰ä¸€ä¸ªå¼ºè¿é€šåˆ†æ”¯ã€‚</li></ul><h4 id="å®šä¹‰ï¼–ï¼šè·ç¦»">å®šä¹‰ï¼–ï¼šè·ç¦»</h4><p>è®¾<em>u</em>ï¼Œ<em>v</em>âˆˆ<em>V</em>(<em>G</em>)ï¼Œè‹¥<em>u</em>ï¼Œ<em>v</em>è¿é€šï¼Œåˆ™ç§°æœ€çŸ­(<em>u</em>ï¼Œ<em>v</em>)è·¯çš„é•¿ä¸º<em>u</em>ï¼Œ<em>v</em>çš„<strong>è·ç¦»</strong>ï¼Œè®°ä¸ºd(uï¼Œv)<br>å½“uï¼Œvä¸è¿é€šæ—¶ï¼Œè®¤ä¸ºuï¼Œvçš„è·ç¦»æ˜¯âˆ</p><h4 id="å®šç†ï¼’">å®šç†ï¼’</h4><p>ä¸€ä¸ªå›¾<em>G</em>æ˜¯äºŒåˆ†å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>â€…â€Š</mtext><mo>âŸº</mo><mtext>â€…â€Š</mtext></mrow><annotation encoding="application/x-tex">\iff</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.549em;vertical-align:-0.024em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âŸº</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span></span></span>Gä¸­ä¸å«å¥‡åœˆ</p><p><img src="6.png" alt=""></p><p><strong>å½“<em>G</em>æœ‰<em>n</em>ä¸ªé¡¶ç‚¹<em>Ï‰</em>ä¸ªåˆ†æ”¯æ—¶ï¼Œæ€æ ·è®©è¾¹æœ€å¤šï¼Ÿ</strong><br><em>G</em>çš„ä¸€ä¸ªè¿é€šåˆ†æ”¯æ˜¯<em>n</em>ï¼<em>Ï‰</em>ï¼‹1ä¸ªç‚¹çš„å®Œå…¨å›¾ï¼Œå…¶ä½™<em>Ï‰</em>ï¼1ä¸ªè¿é€šåˆ†æ”¯å‡æ˜¯å¼§ç«‹ç‚¹ã€‚</p><ul><li>å½“<em>Ï‰</em>ï¼1æ—¶ï¼Œ<em>Îµ</em>â‰¥<em>n</em>ï¼1ã€‚å³<em>n</em>ä¸ªé¡¶ç‚¹çš„è¿é€šå›¾è‡³å°‘æœ‰<em>n</em>ï¼1æ¡è¾¹</li><li>å…·æœ‰<em>n</em>ä¸ªé¡¶ç‚¹ï¼Œ<em>n</em>ï¼1æ¡è¾¹çš„è¿é€šå›¾ç§°ä¸º<strong>æœ€å°è¿é€šå›¾</strong>ã€‚</li></ul><h4 id="å®šä¹‰7ï¼šå‰²ç‚¹ä¸å‰²è¾¹">å®šä¹‰7ï¼šå‰²ç‚¹ä¸å‰²è¾¹</h4><p>æœ‰æ—¶åˆ é™¤ä¸€ä¸ªé¡¶ç‚¹å’Œå®ƒæ‰€å…³è”çš„è¾¹ï¼Œå°±äº§ç”Ÿå¸¦æœ‰æ¯”åŸå›¾æ›´å¤šçš„è¿é€šåˆ†æ”¯çš„å­å›¾ã€‚æŠŠè¿™æ ·çš„<strong>é¡¶ç‚¹</strong>ç§°ä¸º<strong>å‰²ç‚¹</strong>ï¼ˆæˆ–èŠ‚ç‚¹ï¼‰ã€‚ä»è¿é€šå›¾é‡Œåˆ é™¤å‰²ç‚¹ï¼Œå°±äº§ç”Ÿä¸è¿é€šçš„å­å›¾ã€‚<br>åŒç†ï¼ŒæŠŠä¸€æ—¦åˆ é™¤å°±äº§ç”Ÿå¸¦æœ‰æ¯”åŸå›¾æ›´å¤šçš„è¿é€šåˆ†æ”¯çš„å­å›¾çš„<strong>è¾¹</strong>ç§°ä¸º<strong>å‰²è¾¹æˆ–æ¡¥</strong></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¦»æ•£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»˜åˆ¶ï¼špathåŸºç¡€ä¸è´å¡å°”å‡½æ•°</title>
      <link href="/2021/10/04/%E7%BB%98%E5%88%B6%EF%BC%9Apath%E4%B8%8E%E8%B4%9D%E5%A1%9E%E5%B0%94/"/>
      <url>/2021/10/04/%E7%BB%98%E5%88%B6%EF%BC%9Apath%E4%B8%8E%E8%B4%9D%E5%A1%9E%E5%B0%94/</url>
      
        <content type="html"><![CDATA[<h1>ä»¥flutterä¸ºä¾‹çš„pathåŸºç¡€è®²è§£ï¼š</h1><h3 id="è·¯å¾„å½¢æˆçš„åŸºç¡€æ–¹æ³•ï¼š">è·¯å¾„å½¢æˆçš„åŸºç¡€æ–¹æ³•ï¼š</h3><p>å›¾æº<a href="https://juejin.cn/book/6844733827265331214">Flutter ç»˜åˆ¶æŒ‡å— - å¦™ç¬”ç”ŸèŠ±</a>ï¼Œä¸‹é¢æ¡ˆä¾‹åŒï¼Œ</p><p><img src="%E7%BB%98%E5%88%B6%EF%BC%9A0.awebp" alt=""></p><ul><li><p><code>moveTo</code>ï¼šå°†ç”»ç¬”èµ·ç‚¹ç§»åŠ¨åˆ°ç»™å®šåæ ‡</p></li><li><p><code>relativeMoveTo</code>ï¼šç›¸å¯¹å½“å‰ç”»ç¬”èµ·ç‚¹åæ ‡å°†ç”»ç¬”èµ·ç‚¹è¿›è¡Œdxä¸dyçš„å¹³ç§»</p></li><li><p><code>lineTo</code>ï¼šä»ç”»ç¬”èµ·å§‹ç‚¹ç”»ç›´çº¿åˆ°ç»™å®šåæ ‡</p></li><li><p><code>relativeLineTo</code>ï¼šåœ¨èµ·å§‹ç‚¹ä¸ç›¸å¯¹èµ·å§‹ç‚¹dxã€dyè·ç¦»çš„ç‚¹ä¹‹é—´ç”»çº¿</p></li></ul><p><strong>flutterçš„åœ†å¼§éƒ½æ˜¯ä»¥çŸ©å½¢çš„å†…æ¥æ¤­åœ†æˆªå–ç»˜åˆ¶è€Œæ¥çš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„ç”»å¼§çš„æ–¹æ³•ä¼šä¼ å…¥Rect</strong></p><ul><li><code>arcTo</code>:</li></ul><p><img src="1.awebp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//rect: åœ†å¼§æ‰€åœ¨çŸ©å½¢</span><br><span class="line">//startAngle : å¼€å§‹å¼§åº¦</span><br><span class="line">//sweepAngle : éœ€è¦ç»˜åˆ¶çš„å¼§åº¦å¤§å°</span><br><span class="line">//forceMoveTo : å¦‚æœâ€œforceMoveToâ€å‚æ•°ä¸ºfalseï¼Œåˆ™æ·»åŠ ä¸€æ¡ç›´çº¿æ®µå’Œä¸€æ¡å¼§æ®µã€‚</span><br><span class="line">//å¦‚æœâ€œforceMoveToâ€å‚æ•°ä¸ºtrueï¼Œåˆ™å¯åŠ¨ä¸€ä¸ªæ–°çš„å­è·¯å¾„ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¼§æ®µã€‚</span><br><span class="line"></span><br><span class="line">Path path = Path();</span><br><span class="line">Paint paint = Paint()</span><br><span class="line">  ..color = Colors.purpleAccent</span><br><span class="line">  ..strokeWidth = 2</span><br><span class="line">  ..style = PaintingStyle.stroke;</span><br><span class="line"></span><br><span class="line">// ç»˜åˆ¶å·¦ä¾§</span><br><span class="line">//é¦–å…ˆç»˜åˆ¶å¤–æ¥çŸ©å½¢</span><br><span class="line">var rect = Rect.fromCenter(center: Offset(0, 0), width: 160, height: 100);</span><br><span class="line">path.lineTo(30, 30);//ç”»çº¿ï¼Œæ³¨æ„å‘ä¸‹æ–¹å‘æ˜¯yè½´</span><br><span class="line">//forcemoveToä¸ºtrueï¼Œä½¿å¾—ç»˜åˆ¶åœ†å¼§æ—¶èµ·å§‹ç‚¹å¼ºåˆ¶moveToåœ†å¼§çš„èµ·å§‹ç‚¹</span><br><span class="line">path..arcTo(rect, 0, pi * 1.5, true);//æ³¨æ„ç”¨çš„æ˜¯çº§è”</span><br><span class="line">canvas.drawPath(path, paint);</span><br><span class="line"></span><br><span class="line">path.reset();</span><br><span class="line">//ç§»åŠ¨ç”»å¸ƒ</span><br><span class="line">canvas.translate(200, 0);</span><br><span class="line">// ç»˜åˆ¶å³ä¾§</span><br><span class="line">path.lineTo(30, 30);</span><br><span class="line">//forcemoveToä¸ºtrueï¼Œä½¿å¾—ç»˜åˆ¶åœ†å¼§æ—¶èµ·å§‹ç‚¹å¼ºåˆ¶lineToåœ†å¼§çš„èµ·å§‹ç‚¹</span><br><span class="line">path..arcTo(rect, 0, pi * 1.5, false);</span><br><span class="line">canvas.drawPath(path, paint);</span><br></pre></td></tr></table></figure><ul><li><p><code>arcToPoint</code>ï¼šå½“æƒ³è¦ç”»åœ†å¼§åˆ°æŸä¸ªç‚¹ï¼Œç”¨ <code>arcToPoint</code> ä¼šéå¸¸æ–¹ä¾¿</p><ul><li>æ¥å—ä¸€ä¸ª<code>ç‚¹ä½å…¥å‚ Offset</code>ï¼Œæ˜¯åœ†å¼§çš„ç»ˆç‚¹ï¼Œå¯æŒ‡å®š<code>åœ†å¼§åŠå¾„radiusã€æ˜¯å¦ä½¿ç”¨ä¼˜å¼§ã€æ˜¯å¦é¡ºæ—¶é’ˆ</code>ã€‚</li><li>åŠå¾„é»˜è®¤æ˜¯0ï¼Œå³ï¼šä¸æŒ‡å®šåŠå¾„çš„è¯å°±ä¼šç»˜åˆ¶ç›´çº¿ï¼Œå¦‚æœåŠå¾„å°äºç›´å¾„çš„ä¸€åŠåˆ™ä¼šä»¥è¯¥åŠå¾„åšåœ†è¿›è¡Œå¼§åº¦è¿‘ä¼¼ï¼ˆæ‹¼æ¥ï¼‰</li></ul></li><li><p><code>relativeArcToPoint</code>ï¼šä¸<code>arcToPoint</code>ä¸åŒä¹‹å¤„åœ¨äºä¼ å…¥çš„offsetä»£è¡¨dxã€dyã€‚</p></li><li><p><code>conicTo</code>ï¼š<code>conicTo</code> æ¥æ”¶äº”ä¸ªå‚æ•°ç”¨äºç»˜åˆ¶åœ†é”¥æ›²çº¿ï¼ŒåŒ…æ‹¬<code>æ¤­åœ†çº¿</code>ã€<code>æŠ›ç‰©çº¿</code>å’Œ<code>åŒæ›²çº¿</code></p><ul><li>å…¶ä¸­å‰ä¸¤å‚æ˜¯<code>æ§åˆ¶ç‚¹</code>ï¼Œä¸‰å››å‚æ˜¯<code>ç»“æŸç‚¹</code>ï¼Œç¬¬äº”å‚æ˜¯æƒé‡ã€‚(ä¸‹å›¾å·²ç”»å‡ºè¾…åŠ©ç‚¹)<ul><li>å½“<code>æƒé‡&lt; 1</code> æ—¶ï¼Œåœ†é”¥æ›²çº¿æ˜¯<code>æ¤­åœ†çº¿</code>,å¦‚ä¸‹å·¦å›¾</li><li>å½“<code>æƒé‡= 1</code> æ—¶ï¼Œåœ†é”¥æ›²çº¿æ˜¯<code>æŠ›ç‰©çº¿</code>,å¦‚ä¸‹ä¸­å›¾</li><li>å½“<code>æƒé‡&gt; 1</code> æ—¶ï¼Œåœ†é”¥æ›²çº¿æ˜¯<code>åŒæ›²çº¿</code>,å¦‚ä¸‹å³å›¾</li></ul></li></ul></li></ul><p><img src="2.awebp" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">final Offset p1 = Offset(80, -100);</span><br><span class="line">final Offset p2 = Offset(160, 0);</span><br><span class="line"></span><br><span class="line">Path path = Path();</span><br><span class="line">Paint paint = Paint()</span><br><span class="line">  ..color = Colors.purpleAccent</span><br><span class="line">  ..strokeWidth = 2</span><br><span class="line">  ..style = PaintingStyle.stroke;</span><br><span class="line"></span><br><span class="line">//æŠ›ç‰©çº¿</span><br><span class="line">path.conicTo(p1.dx, p1.dy, p2.dx, p2.dy, 1);</span><br><span class="line">canvas.drawPath(path, paint);</span><br><span class="line"></span><br><span class="line">path.reset();</span><br><span class="line">canvas.translate(-180, 0);</span><br><span class="line">//æ¤­åœ†çº¿</span><br><span class="line">path.conicTo(p1.dx, p1.dy, p2.dx, p2.dy, 0.5);</span><br><span class="line">canvas.drawPath(path, paint);</span><br><span class="line"></span><br><span class="line">path.reset();</span><br><span class="line">canvas.translate(180+180.0, 0);</span><br><span class="line">//åŒæ›²çº¿</span><br><span class="line">path.conicTo(p1.dx, p1.dy, p2.dx, p2.dy, 1.5);</span><br><span class="line">canvas.drawPath(path, paint);</span><br></pre></td></tr></table></figure><ul><li><code>relativeConicTo</code>:ä½¿ç”¨ç›¸å¯¹ä½ç½®æ¥åŠ å…¥åœ†é”¥æ›²çº¿è·¯å¾„ï¼Œå‚æ•°å«ä¹‰ä¸ä¸Šé¢ä¸€è‡´ã€‚</li></ul><p>ä»¥ä¸Šå¤§éƒ¨åˆ†å¼•è‡ªå°å†Œï¼Œæœ‰äº›æ³¨é‡Šæ˜¯æˆ‘è‡ªå·±åŠ çš„ã€‚å¤§ä½¬è®²çš„æŒºå¥½ï¼ˆ<s>ç»å¯¹ä¸æ˜¯å› ä¸ºæˆ‘å¹³æ—¶æ ¹æœ¬ä¸ç”¨æ‰å»cvçš„</s>ï¼‰</p><h3 id="PS">PS.</h3><p>å®‰å“åŸç”Ÿä¹Ÿå¯ä»¥ç”»å¼§ä½†ä¸èƒ½ç”»åŒæ›²çº¿ï¼Œç”»å¼§çš„ç­–ç•¥ä¸flutterä¸€æ ·ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addArc</span> <span class="params">(RectF oval, <span class="keyword">float</span> startAngle, <span class="keyword">float</span> sweepAngle)</span></span></span><br></pre></td></tr></table></figure><p>float startAngleï¼šå¼€å§‹çš„è§’åº¦ï¼ŒXè½´æ­£æ–¹å‘ä¸º0åº¦ï¼Œfloat sweepAngelï¼šæŒç»­çš„åº¦æ•°ï¼›è€Œä¸”å¥½åƒåªèƒ½é¡ºæ—¶é’ˆç”»</p><h3 id="è´å¡å°”å‡½æ•°ï¼š">è´å¡å°”å‡½æ•°ï¼š</h3><p>æ„Ÿè°¢<a href="https://qijian.blog.csdn.net/">å¯èˆ°</a>å¤§ä½¬çš„åŠ¨å›¾</p><h4 id="ä¸€é˜¶ï¼š">ä¸€é˜¶ï¼š</h4><p>è™½ç„¶ä¸€é˜¶è´å¡å°”å‡½æ•°æ²¡å•¥ç”¨ï¼Œä½†å®ƒæ˜¯è®¤è¯†é«˜é˜¶è´å¡å°”å‡½æ•°çš„åŸºç¡€ã€‚</p><p>å¯¹äºä¸€é˜¶è´èµ›å°”æ›²çº¿ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºåœ¨èµ·å§‹ç‚¹å’Œç»ˆç‚¹å½¢æˆçš„è¿™æ¡ç›´çº¿ä¸Šï¼ŒåŒ€é€Ÿç§»åŠ¨çš„ç‚¹å–å€¼å½¢æˆçš„è½¨è¿¹ï¼Œå…¶å®ä¸è¿™æ¡ç›´çº¿æ²¡æœ‰åŒºåˆ«ã€‚</p><h4 id="äºŒé˜¶ï¼š">äºŒé˜¶ï¼š</h4><p><img src="3.png" alt=""></p><p>æœ‰ä¸€è¯´ä¸€ä¸ç ”ç©¶çœŸçš„çœ‹ä¸æ˜ç™½ï¼Œå¥½åœ¨å‘ç°äº†å¤§ä½¬åšçš„åŠ¨ç”»:</p><p><img src="4" alt=""></p><p>å¯ä»¥å‘ç°äºŒé˜¶å…¶å®å°±æ˜¯ä¸¤ä¸ªä¸€é˜¶æ‹¼æˆçš„ç›´çº¿ä¸­åˆå–äº†ä¸€æ¬¡ä¸€é˜¶è´å¡å°”å‡½æ•°</p><p><code>quadraticBezierTo</code>ï¼šå‡è®¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">P_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>æ˜¯èµ·å§‹ç‚¹ï¼Œé‚£ä¹ˆå‰ä¸¤ä¸ªå‚æ•°ä»£è¡¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œåä¸¤ä¸ªå‚æ•°ä»£è¡¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</p><p><code>relativeQuadraticBezierTo</code>ï¼šåŒä¸Šï¼Œä¸è¿‡å‚æ•°éƒ½ä»£è¡¨dxã€dy</p><h4 id="ä¸‰é˜¶ï¼š">ä¸‰é˜¶ï¼š</h4><p><img src="5" alt=""></p><p>å…¶å®å°±æ˜¯è´å¡å°”æ›²çº¿é€æ¸é™é˜¶çš„è¿‡ç¨‹ã€‚</p><p><code>cubicTo</code>ï¼šä¸‰é˜¶ï¼Œä¸¤ä¸ªæ§åˆ¶ç‚¹ï¼Œä¸€ä¸ªç»“æŸç‚¹</p><p><code>relativeCubicTo</code>ï¼šåŒç†</p><p>PS.å®‰å“é™¤äº†æ–¹æ³•åå¤–ï¼Œå‚æ•°å¹¶æ— ä¸åŒã€‚</p><h1>è´å¡å°”å‡½æ•°çš„ä½¿ç”¨</h1><h3 id="ä½œç”¨ï¼š">ä½œç”¨ï¼š</h3><p>ä¸€èˆ¬æ¥è¯´æœ€å¸¸è§çš„åº”ç”¨æ˜¯å…³äºç»˜åˆ¶æ—¶çš„ä¼˜åŒ–ï¼ˆæŠ—é”¯é½¿ï¼‰ä»¥åŠæ³¢çº¹çš„ç›¸å…³åŠ¨ç”»ã€‚</p><h4 id="ç»˜åˆ¶ä¼˜åŒ–ï¼š">ç»˜åˆ¶ä¼˜åŒ–ï¼š</h4><p>å¦‚æœæŒ‰ç…§æœ€åŸºç¡€çš„ç‚¹åŠ¨æˆçº¿ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_DOWN: &#123;</span><br><span class="line">            mPath.moveTo(event.getX(), event.getY());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">            mPath.lineTo(event.getX(), event.getY());</span><br><span class="line">            postInvalidate();<span class="comment">//ç•Œé¢é‡ç»˜</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„pathåªæœ‰è°ƒç”¨<code>canvas.paint</code>çš„æ—¶å€™æ‰ä¼šè¿›è¡Œç»˜åˆ¶å—·</p><p>è‡³äºæ•ˆæœå˜›ï¼Œæ„Ÿè§‰é”¯é½¿æ¯”è¾ƒä¸¥é‡ï¼Œè€Œä¸”ç‰¹åˆ«ç”Ÿç¡¬ï¼š</p><img src="6.png" style="zoom:50%;" /><p>ç„¶åï¼Œæˆ‘çš„ç­–ç•¥æ˜¯å¾ˆç®€å•çš„æš´åŠ›è´å¡å°”ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> x,y;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">         <span class="keyword">case</span> MotionEvent.ACTION_DOWN: &#123;</span><br><span class="line">             x = event.getX();</span><br><span class="line">             y = event.getY();</span><br><span class="line">             mPath.moveTo(event.getX(), event.getY());</span><br><span class="line">             <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">             mPath.quadTo(x,y,event.getX(), event.getY());</span><br><span class="line">             x = event.getX();</span><br><span class="line">             y = event.getY();</span><br><span class="line">             postInvalidate();</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">default</span>:</span><br><span class="line">             <span class="keyword">break</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå˜›ï¼Œemmmï¼Œæ€ä¹ˆæ„Ÿè§‰å¥½åƒæ²¡èµ·ä½œç”¨ï¼Ÿ</p><p>é‚£æˆ‘æ¥å‘Šè¯‰ä½ ç­”æ¡ˆï¼Œå°±æ˜¯æ²¡èµ·ä½œç”¨ï¼</p><img src="7.png" style="zoom:50%;" /><p>é—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿå¯ä»¥çœ‹çœ‹å¯èˆ°å¤§ä½¬ç»™çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> mPreX,mPreY;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_DOWN:&#123;</span><br><span class="line">            mPath.moveTo(event.getX(),event.getY());</span><br><span class="line">            mPreX = event.getX();</span><br><span class="line">            mPreY = event.getY();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">case</span> MotionEvent.ACTION_MOVE:&#123;</span><br><span class="line">            <span class="keyword">float</span> endX = (mPreX+event.getX())/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">float</span> endY = (mPreY+event.getY())/<span class="number">2</span>;</span><br><span class="line">            mPath.quadTo(mPreX,mPreY,endX,endY);</span><br><span class="line">            mPreX = event.getX();</span><br><span class="line">            mPreY =event.getY();</span><br><span class="line">            invalidate();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</span><br></pre></td></tr></table></figure><p>åŒºåˆ«å°±åœ¨äº<code>MotionEvent.ACTION_MOVE</code>ä¸Šï¼šé¦–å…ˆå°†ä¸Šæ¬¡çš„åæ ‡ä¸è¿™æ¬¡çš„åæ ‡å–äº†ä¸­ç‚¹ï¼Œä½œä¸ºç»“æŸç‚¹ï¼Œç”¨ä¸Šæ¬¡åæ ‡ä½œä¸ºæ§åˆ¶ç‚¹è¿›è¡Œè·¯å¾„æ·»åŠ ï¼Œä¸€ä¸ª<code>quadTo</code>çš„ç»ˆç‚¹ï¼Œæ˜¯ä¸‹ä¸€ä¸ª<code>quadTo</code>çš„èµ·å§‹ç‚¹ã€‚æ‰€ä»¥è¿™é‡Œçš„èµ·å§‹ç‚¹ï¼Œå°±æ˜¯ä¸Šä¸€ä¸ªçº¿æ®µçš„ä¸­é—´ç‚¹ã€‚é‚£ä¹ˆæ˜¾ç„¶æˆ‘ç»™çš„ä»£ç èµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹æ˜¯ä¸€ä¸ªç‚¹ï¼Œé‚£ä¸å°±æ˜¯ä¸€é˜¶è´å¡å°”å‡½æ•°å˜›ï¼Œé‚£æ‘†æ˜äº†å°±æ˜¯ç›´çº¿ç›¸è¿ï¼Œèƒ½æœ‰å•¥ä½œç”¨ã€‚</p><p>å›¾ç¤ºï¼š</p><img src="9.png" style="zoom:50%;" /><p>ä¸‹é¢æ˜¯æ›´æ­£åçš„æ•ˆæœå›¾ï¼Œè¦å¥½å¾ˆå¤šï¼š</p><img src="8.png" style="zoom:50%;" /><h5 id="PSï¼š">PSï¼š</h5><p>flutterå†™èµ·æ¥ç›¸å¯¹éº»çƒ¦ä¸€äº›ï¼Œå› ä¸ºæ— æ³•ç›´æ¥è°ƒç”¨ç›‘å¬ï¼Œæ‰€ä»¥å°±éœ€è¦æ‰‹åŠ¿ç›‘å¬è·å–åæ ‡</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">                onPanDown: (details) &#123;</span><br><span class="line">                    <span class="comment">//å‡†å¤‡å½“å‰å›¾å±‚çš„ç”»ç¬”é¢œè‰²å’Œç²—ç»†</span></span><br><span class="line">                    imageDrawLogic.isClear = <span class="keyword">false</span>;</span><br><span class="line">                    imageDrawLogic.points[imageDrawLogic.curFrame].color</span><br><span class="line">                    = imageDrawLogic.selectedColor;</span><br><span class="line">                    imageDrawLogic.points[imageDrawLogic.curFrame].strokeWidth</span><br><span class="line">                    = imageDrawLogic.strokeWidth;</span><br><span class="line">                &#125;,</span><br><span class="line">                onPanUpdate: (details) &#123;</span><br><span class="line">                    <span class="comment">//æ”¶é›†ç‚¹åæ ‡</span></span><br><span class="line">                    <span class="comment">//å› ä¸ºæ˜¯æ”¾åœ¨StatefulBuilder(builder: (context, state) &#123;&#125;</span></span><br><span class="line">                    <span class="comment">//å†…ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ç”¨stateåˆ·æ–°çŠ¶æ€</span></span><br><span class="line">                    RenderBox referenceBox = context.findRenderObject() <span class="keyword">as</span> RenderBox;</span><br><span class="line">                    Offset localPosition =</span><br><span class="line">                    referenceBox.globalToLocal(details.globalPosition);</span><br><span class="line">                    state(() &#123;                  imageDrawLogic.points[imageDrawLogic.curFrame].points.add(localPosition);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;,</span><br><span class="line">                onPanEnd: (details) &#123;</span><br><span class="line">                  <span class="comment">//å‡†å¤‡ä¸‹æ¬¡ç»˜åˆ¶</span></span><br><span class="line">                    imageDrawLogic.points.add(</span><br><span class="line">                        Point(</span><br><span class="line">                            imageDrawLogic.selectedColor,</span><br><span class="line">                            imageDrawLogic.strokeWidth,</span><br><span class="line">                            []</span><br><span class="line">                        ));</span><br><span class="line">                    imageDrawLogic.curFrame++;</span><br><span class="line">                &#125;,</span><br><span class="line">              )</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç»˜åˆ¶æ—¶ï¼Œ</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</span><br><span class="line">  <span class="keyword">final</span> Path linePath = <span class="keyword">new</span> Path() ;</span><br><span class="line">  <span class="keyword">final</span> rect = Rect.fromLTRB(<span class="number">0.0</span>, <span class="number">0.0</span>, size.width, size.height);</span><br><span class="line">  canvas.clipRect(rect);<span class="comment">//è£å‰ªç”»å¸ƒ</span></span><br><span class="line">  <span class="keyword">if</span> (isClear || points.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; points.length; i++) &#123;</span><br><span class="line">      </span><br><span class="line">    _linePaint..color = points[i].color;</span><br><span class="line">    _linePaint..strokeWidth = points[i].strokeWidth;</span><br><span class="line">    <span class="built_in">List</span>&lt;Offset&gt; curPoints = points[i].points;</span><br><span class="line">    <span class="keyword">if</span> (curPoints.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="built_in">double</span> x = curPoints[<span class="number">0</span>].dx<span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">double</span> y = curPoints[<span class="number">0</span>].dy<span class="number">-1</span>;</span><br><span class="line">    linePath.moveTo(x, y);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; curPoints.length; i++) &#123;</span><br><span class="line">      <span class="built_in">double</span> endX = (x + curPoints[i].dx)/<span class="number">2</span>;</span><br><span class="line">      <span class="built_in">double</span> endY = (y + curPoints[i].dy)/<span class="number">2</span>;</span><br><span class="line">      linePath.quadraticBezierTo(x,y,endX,endY);</span><br><span class="line">       x = curPoints[i].dx;</span><br><span class="line">       y = curPoints[i].dy;</span><br><span class="line">    &#125;</span><br><span class="line">    canvas.drawPath(linePath, _linePaint);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ°´æ³¢çº¹æ•ˆæœ">æ°´æ³¢çº¹æ•ˆæœ</h4><p>ï¼ˆå‘ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ç»˜åˆ¶åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
            <tag> ç»˜åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»˜åˆ¶ï¼šå®‰å“åŸç”Ÿï¼ˆäºŒã€Regionï¼‰</title>
      <link href="/2021/10/03/%E7%BB%98%E5%88%B6%EF%BC%9A%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9FRegion/"/>
      <url>/2021/10/03/%E7%BB%98%E5%88%B6%EF%BC%9A%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9FRegion/</url>
      
        <content type="html"><![CDATA[<h1>å®‰å“åŸç”ŸRegionï¼š</h1><p>ä»Šå¤©æ²¡æœ‰è®²flutterï¼Œè²Œä¼¼ï¼Œflutterå¹¶æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„å†…å®¹ã€‚</p><p>Regionï¼Œä¸­æ–‡æ„æ€å³åŒºåŸŸçš„æ„æ€ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯canvaså›¾å±‚ä¸Šçš„æŸä¸€å—å°é—­çš„åŒºåŸŸã€‚</p><p>ä½ å¯èƒ½ä¼šé—®ï¼Œæ—¢ç„¶å·²ç»æœ‰canvasï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰regionï¼Ÿ</p><p>è¿™æ˜¯å› ä¸ºï¼Œå®‰å“åŸç”Ÿçš„ç»„ä»¶æ— æ³•åƒflutteré‚£æ ·ï¼Œé€šè¿‡ä½¿ç”¨GestureDetectoræˆ–è€…GestureRecognizerå¯¹ç»„ä»¶è¿›è¡ŒåŒ…è£¹ä»è€Œéå¸¸æ–¹ä¾¿çš„å®ç°æ§ä»¶çš„æ‰‹åŠ¿æ§åˆ¶ï¼Œè€Œæ˜¯è¦è¿›è¡Œå®ä¾‹åŒ–ä¸è°ƒç”¨ï¼Œé‚£ä¹ˆåœ¨è‡ªç»˜ç»„ä»¶çš„æ—¶å€™å¦‚ä½•å®ç°æ‰‹åŠ¿æ§åˆ¶å‘¢ï¼Ÿè¿™å…¶å®å°±æ˜¯regionçš„åŠŸèƒ½ä¹‹ä¸€äº†ã€‚</p><h2 id="é¦–å…ˆæ”¾ä¸ŠåŸºæœ¬ä¸Šæ‰€æœ‰çš„APIï¼š">é¦–å…ˆæ”¾ä¸ŠåŸºæœ¬ä¸Šæ‰€æœ‰çš„APIï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**æ„é€ æ–¹æ³•*/</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">Region</span><span class="params">()</span>  <span class="comment">//åˆ›å»ºä¸€ä¸ªç©ºçš„åŒºåŸŸ</span></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="title">Region</span><span class="params">(Region region)</span> <span class="comment">//æ‹·è´ä¸€ä¸ªregionçš„èŒƒå›´</span></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="title">Region</span><span class="params">(Rect r)</span>  <span class="comment">//åˆ›å»ºä¸€ä¸ªçŸ©å½¢çš„åŒºåŸŸ</span></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="title">Region</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> <span class="comment">//åˆ›å»ºä¸€ä¸ªçŸ©å½¢çš„åŒºåŸŸ</span></span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="comment">/**ä¸€ç³»åˆ—setæ–¹æ³•ï¼Œè¿™äº›setæ–¹æ³•ï¼Œå’Œä¸Šé¢æ„é€ æ–¹æ³•å½¢å¼å·®ä¸å¤š*/</span></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(Region region)</span> </span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(Rect r)</span> </span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span></span><br><span class="line"><span class="function"> <span class="comment">/*å¾€ä¸€ä¸ªRegionä¸­æ·»åŠ ä¸€ä¸ªPathåªæœ‰è¿™ç§æ–¹æ³•ï¼Œå‚æ•°clipä»£è¡¨è¿™ä¸ªæ•´ä¸ªRegionçš„åŒºåŸŸï¼Œåœ¨åœ¨é‡Œé¢è£å‰ªå‡ºpathèŒƒå›´çš„åŒºåŸŸ*/</span></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">setPath</span><span class="params">(Path path, Region clip)</span> <span class="comment">//ç”¨æŒ‡å®šçš„Pathå’Œè£å‰ªèŒƒå›´æ„å»ºä¸€ä¸ªåŒºåŸŸ</span></span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="comment">/**å‡ ä¸ªåˆ¤æ–­æ–¹æ³•*/</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;<span class="comment">//åˆ¤æ–­è¯¥åŒºåŸŸæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">isRect</span><span class="params">()</span></span>; <span class="comment">//æ˜¯å¦æ˜¯ä¸€ä¸ªçŸ©é˜µ</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">isComplex</span><span class="params">()</span></span>;<span class="comment">//æ˜¯å¦æ˜¯å¤šä¸ªçŸ©é˜µç»„åˆ</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/**ä¸€ç³»åˆ—çš„getBoundæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªRegionçš„è¾¹ç•Œ*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Rect <span class="title">getBounds</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getBounds</span><span class="params">(Rect r)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Path <span class="title">getBoundaryPath</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getBoundaryPath</span><span class="params">(Path path)</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">/**ä¸€ç³»åˆ—çš„åˆ¤æ–­æ˜¯å¦åŒ…å«æŸç‚¹ å’Œæ˜¯å¦ç›¸äº¤*/</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;<span class="comment">//æ˜¯å¦åŒ…å«æŸç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">quickContains</span><span class="params">(Rect r)</span><span class="comment">//æ˜¯å¦åŒ…å«æŸçŸ©é˜µ</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickContains</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right,<span class="keyword">int</span> bottom)</span><span class="comment">//æ˜¯å¦åŒ…å«æŸçŸ©é˜µ</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(Rect r)</span> <span class="comment">//æ˜¯å¦æ²¡å’Œè¯¥çŸ©é˜µç›¸äº¤</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span></span>; <span class="comment">//æ˜¯å¦æ²¡å’Œè¯¥çŸ©é˜µç›¸äº¤</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(Region rgn)</span></span>;  <span class="comment">//æ˜¯å¦æ²¡å’Œè¯¥çŸ©é˜µç›¸äº¤</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/**å‡ ä¸ªå¹³ç§»å˜æ¢çš„æ–¹æ³•*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">translate</span><span class="params">(<span class="keyword">int</span> dx, <span class="keyword">int</span> dy)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">translate</span><span class="params">(<span class="keyword">int</span> dx, <span class="keyword">int</span> dy, Region dst)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scale</span><span class="params">(<span class="keyword">float</span> scale)</span> <span class="comment">//hide</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">scale</span><span class="params">(<span class="keyword">float</span> scale, Region dst)</span></span>;<span class="comment">//hide</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**ä¸€ç³»åˆ—ç»„åˆçš„æ–¹æ³•*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">union</span><span class="params">(Rect r)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Rect r, Op op)</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom, Op op)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Region region, Op op)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Rect rect, Region region, Op op)</span> </span></span><br></pre></td></tr></table></figure><p>è¯´æ˜ä¸€ä¸‹æœ€åçš„ä¸€ç»„å…³äºRegionç»„åˆçš„æ–¹å¼ã€‚ç»„åˆå³å½“å‰çš„Regionå’Œå¦å¤–çš„ä¸€ä¸ªRegionç»„åˆï¼Œå¯ä»¥ç”¨ä¸åŒçš„Opæ–¹å¼æ¥è¿›è¡Œç»„åˆ,Opæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå®šä¹‰åœ¨Regionç±»ä¸­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Op</span> </span>&#123;</span><br><span class="line">        DIFFERENCE(<span class="number">0</span>), <span class="comment">//æœ€ç»ˆåŒºåŸŸä¸ºregion1 ä¸ region2ä¸åŒçš„åŒºåŸŸ</span></span><br><span class="line">        INTERSECT(<span class="number">1</span>), <span class="comment">// æœ€ç»ˆåŒºåŸŸä¸ºregion1 ä¸ region2ç›¸äº¤çš„åŒºåŸŸ</span></span><br><span class="line">        UNION(<span class="number">2</span>),      <span class="comment">//æœ€ç»ˆåŒºåŸŸä¸ºregion1 ä¸ region2ç»„åˆä¸€èµ·çš„åŒºåŸŸ</span></span><br><span class="line">        XOR(<span class="number">3</span>),        <span class="comment">//æœ€ç»ˆåŒºåŸŸä¸ºregion1 ä¸ region2ç›¸äº¤ä¹‹å¤–çš„åŒºåŸŸ</span></span><br><span class="line">        REVERSE_DIFFERENCE(<span class="number">4</span>), <span class="comment">//æœ€ç»ˆåŒºåŸŸä¸ºregion2 ä¸ region1ä¸åŒçš„åŒºåŸŸ</span></span><br><span class="line">        REPLACE(<span class="number">5</span>); <span class="comment">//æœ€ç»ˆåŒºåŸŸä¸ºä¸ºregion2çš„åŒºåŸŸ</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜æœ‰çŸ©å½¢é›†æšä¸¾åŒºåŸŸâ€”â€”RegionIteratorç±»</p><p>å¯¹äºç‰¹å®šçš„åŒºåŸŸï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨å¤šä¸ªçŸ©å½¢æ¥è¡¨ç¤ºå…¶å¤§è‡´å½¢çŠ¶ã€‚äº‹å®ä¸Šï¼Œå¦‚æœçŸ©å½¢è¶³å¤Ÿå°ï¼Œä¸€å®šæ•°é‡çš„çŸ©å½¢å°±èƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºåŒºåŸŸçš„å½¢çŠ¶ï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€å®šæ•°é‡çš„çŸ©å½¢æ‰€åˆæˆçš„å½¢çŠ¶ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨åŒºåŸŸçš„å½¢çŠ¶</strong>ã€‚RegionIteratorç±»ï¼Œå®ç°äº†è·å–ç»„æˆåŒºåŸŸçš„çŸ©å½¢é›†çš„åŠŸèƒ½ï¼Œå…¶å®RegionIteratorç±»éå¸¸ç®€å•ï¼Œæ€»å…±å°±ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ„é€ å‡½æ•°å’Œä¸€ä¸ªè·å–ä¸‹ä¸€ä¸ªçŸ©å½¢çš„å‡½æ•°ï¼›<br>RegionIterator(Region region) //æ ¹æ®åŒºåŸŸæ„å»ºå¯¹åº”çš„çŸ©å½¢é›†<br>boolean next(Rect r) //è·å–ä¸‹ä¸€ä¸ªçŸ©å½¢ï¼Œç»“æœä¿å­˜åœ¨å‚æ•°Rect r ä¸­</p><p>ç”±äºåœ¨Canvasä¸­æ²¡æœ‰ç›´æ¥ç»˜åˆ¶Regionçš„å‡½æ•°ï¼Œæˆ‘ä»¬æƒ³è¦ç»˜åˆ¶ä¸€ä¸ªåŒºåŸŸï¼Œå°±åªèƒ½é€šè¿‡åˆ©ç”¨RegionIteratoræ„é€ çŸ©å½¢é›†æ¥é€¼è¿‘çš„æ˜¾ç¤ºåŒºåŸŸã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawRegion</span><span class="params">(Canvas canvas,Region rgn,Paint paint)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">RegionIterator iter = <span class="keyword">new</span> RegionIterator(rgn);</span><br><span class="line">Rect r = <span class="keyword">new</span> Rect();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (iter.next(r)) &#123;</span><br><span class="line">  canvas.drawRect(r, paint);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å„ä¸ªAPIå…·ä½“ä½¿ç”¨åœ¨<a href="https://blog.csdn.net/coderinchina">zhoushenxian</a>çš„è¿™ç¯‡<a href="https://blog.csdn.net/coderinchina/article/details/74975180">åšå®¢</a>é‡Œæœ‰è¯¦ç»†æ¡ˆä¾‹ï¼Œä½†æˆ‘æ„Ÿè§‰æœ‰ç‚¹å¤ªè¿‡å•°å—¦ã€‚</p><h2 id="ä¸‹é¢è®²å‡ ä¸ªæˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ–¹æ³•ï¼š">ä¸‹é¢è®²å‡ ä¸ªæˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ–¹æ³•ï¼š</h2><h3 id="ä½¿ç”¨SetPathï¼ˆï¼‰æ„é€ ä¸è§„åˆ™åŒºåŸŸ">ä½¿ç”¨SetPathï¼ˆï¼‰æ„é€ ä¸è§„åˆ™åŒºåŸŸ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">setPath</span> <span class="params">(Path path, Region clip)</span></span></span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š<br>Path pathï¼šç”¨æ¥æ„é€ çš„åŒºåŸŸçš„è·¯å¾„<br>Region clipï¼šä¸å‰é¢çš„pathæ‰€æ„æˆçš„è·¯å¾„å–äº¤é›†ï¼Œå¹¶å°†ä¸¤äº¤é›†è®¾ç½®ä¸ºæœ€ç»ˆçš„åŒºåŸŸ</p><p>ç”±äºè·¯å¾„æœ‰å¾ˆå¤šç§æ„é€ æ–¹æ³•ï¼Œè€Œä¸”å¯ä»¥è½»æ„æ„é€ å‡ºéçŸ©å½¢çš„è·¯å¾„ï¼Œè¿™å°±æ‘†è„±äº†å‰é¢çš„æ„é€ å‡½æ•°åªèƒ½æ„é€ çŸ©å½¢åŒºåŸŸçš„é™åˆ¶ã€‚ä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯è¦æŒ‡å®šå¦ä¸€ä¸ªåŒºåŸŸæ¥å–å…±åŒçš„äº¤é›†ï¼Œå½“ç„¶å¦‚æœæƒ³æ˜¾ç¤ºè·¯å¾„æ„é€ çš„åŒºåŸŸï¼ŒRegion clipå‚æ•°å¯ä»¥ä¼ ä¸€ä¸ªæ¯”PathèŒƒå›´å¤§çš„å¤šçš„åŒºåŸŸï¼Œå–å®Œäº¤é›†ä¹‹åï¼Œå½“ç„¶æ˜¯Pathå‚æ•°æ‰€å¯¹åº”çš„åŒºåŸŸå–½ã€‚æœºæ™ºçš„å­©å­ã€‚</p><p>ä¸‹é¢ï¼Œå…ˆæ„é€ ä¸€ä¸ªæ¤­åœ†è·¯å¾„ï¼Œç„¶ååœ¨SetPathæ—¶ï¼Œä¼ è¿›å»ä¸€ä¸ªæ¯”Pathå°çš„çŸ©å½¢åŒºåŸŸï¼Œè®©å®ƒä»¬ä¸¤ä¸ªå–äº¤é›†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRegionView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyRegionView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>(context);</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–Paint</span></span><br><span class="line">Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">paint.setColor(Color.RED);</span><br><span class="line">paint.setStyle(Style.FILL);</span><br><span class="line">paint.setStrokeWidth(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//æ„é€ ä¸€ä¸ªæ¤­åœ†è·¯å¾„</span></span><br><span class="line">Path ovalPath = <span class="keyword">new</span> Path();</span><br><span class="line">RectF rect =  <span class="keyword">new</span> RectF(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">500</span>);  </span><br><span class="line">ovalPath.addOval(rect, Direction.CCW);</span><br><span class="line"><span class="comment">//SetPathæ—¶,ä¼ å…¥ä¸€ä¸ªæ¯”æ¤­åœ†åŒºåŸŸå°çš„çŸ©å½¢åŒºåŸŸ,è®©å…¶å–äº¤é›†</span></span><br><span class="line">Region rgn = <span class="keyword">new</span> Region();</span><br><span class="line">rgn.setPath(ovalPath,<span class="keyword">new</span>  Region(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>));</span><br><span class="line"><span class="comment">//ç”»å‡ºè·¯å¾„</span></span><br><span class="line">drawRegion(canvas, rgn, paint);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawRegion</span><span class="params">(Canvas canvas,Region rgn,Paint paint)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">RegionIterator iter = <span class="keyword">new</span> RegionIterator(rgn);</span><br><span class="line">Rect r = <span class="keyword">new</span> Rect();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (iter.next(r)) &#123;</span><br><span class="line">  canvas.drawRect(r, paint);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="0.png" alt=""></p><p>ä¸Šé¢çš„ä¾‹å­å…¶å®å¯ä»¥çœ‹å‡ºregionçš„ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯å¯¹å›¾å½¢çš„æˆªå–ï¼Œå› ä¸ºæœ‰äº›æ—¶å€™æˆ‘ä»¬å¹¶ä¸èƒ½é€šè¿‡ç»˜åˆ¶çš„æ–¹æ³•å®Œç¾åœ°ç»˜åˆ¶å‡ºæˆ‘ä»¬æƒ³è¦çš„å›¾å½¢ã€‚ä½†å…¶å®ä¹Ÿæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå°±æ˜¯ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªè·¯å¾„ä¸regionå–äº¤é›†ã€‚å¤šä¸ªè·¯å¾„çš„è¯ï¼Œå…ˆæŠŠè·¯å¾„åˆå¹¶ä¸å°±å®Œäº†å˜›ã€‚</p><h3 id="åŒºåŸŸçš„åˆå¹¶ã€äº¤å‰ç­‰æ“ä½œ">åŒºåŸŸçš„åˆå¹¶ã€äº¤å‰ç­‰æ“ä½œ</h3><p>æ— è®ºæ˜¯åŒºåŸŸè¿˜æ˜¯çŸ©å½¢ï¼Œéƒ½ä¼šæ¶‰åŠåˆ°ä¸å¦ä¸€ä¸ªåŒºåŸŸçš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚å–äº¤é›†ã€å–å¹¶é›†ç­‰ï¼Œæ¶‰åŠåˆ°çš„å‡½æ•°æœ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">union</span><span class="params">(Rect r)</span>   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Rect r, Op op)</span> </span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom, Op op)</span>   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Region region, Op op)</span>   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">op</span><span class="params">(Rect rect, Region region, Op op)</span>   </span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Region;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint.Style;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Region.Op;</span><br><span class="line"><span class="keyword">import</span> android.graphics.RegionIterator;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRegionView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyRegionView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>(context);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ ä¸¤ä¸ªçŸ©å½¢</span></span><br><span class="line">Rect rect1 = <span class="keyword">new</span> Rect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">400</span>,<span class="number">200</span>);</span><br><span class="line">Rect rect2 = <span class="keyword">new</span> Rect(<span class="number">200</span>,<span class="number">0</span>,<span class="number">300</span>,<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ ä¸€ä¸ªç”»ç¬”ï¼Œç”»å‡ºçŸ©å½¢è½®å»“</span></span><br><span class="line">Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">paint.setColor(Color.RED);</span><br><span class="line">paint.setStyle(Style.STROKE);</span><br><span class="line">paint.setStrokeWidth(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">canvas.drawRect(rect1, paint);</span><br><span class="line">canvas.drawRect(rect2, paint);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ ä¸¤ä¸ªRegion</span></span><br><span class="line">Region region = <span class="keyword">new</span> Region(rect1);</span><br><span class="line">Region region2= <span class="keyword">new</span> Region(rect2);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªåŒºåŸŸçš„äº¤é›†</span></span><br><span class="line">region.op(region2, Op.INTERSECT);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†æ„é€ ä¸€ä¸ªç”»ç¬”,å¡«å……Regionæ“ä½œç»“æœ</span></span><br><span class="line">Paint paint_fill = <span class="keyword">new</span> Paint();</span><br><span class="line">paint_fill.setColor(Color.GREEN);</span><br><span class="line">paint_fill.setStyle(Style.FILL);</span><br><span class="line">drawRegion(canvas, region, paint_fill);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawRegion</span><span class="params">(Canvas canvas,Region rgn,Paint paint)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">RegionIterator iter = <span class="keyword">new</span> RegionIterator(rgn);</span><br><span class="line">Rect r = <span class="keyword">new</span> Rect();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (iter.next(r)) &#123;</span><br><span class="line">  canvas.drawRect(r, paint);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯å–äº†äº¤é›†ï¼Œå…¶ä½™æƒ…å†µå¦‚å›¾ï¼š</p><p><img src="1.png" alt=""></p><h3 id="åˆ¤æ–­åŒ…å«ä¸ç›¸äº¤ï¼š">åˆ¤æ–­åŒ…å«ä¸ç›¸äº¤ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**ä¸€ç³»åˆ—çš„åˆ¤æ–­æ˜¯å¦åŒ…å«æŸç‚¹ å’Œæ˜¯å¦ç›¸äº¤*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;<span class="comment">//æ˜¯å¦åŒ…å«æŸç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">quickContains</span><span class="params">(Rect r)</span><span class="comment">//æ˜¯å¦åŒ…å«æŸçŸ©é˜µ</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickContains</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right,<span class="keyword">int</span> bottom)</span><span class="comment">//æ˜¯å¦åŒ…å«æŸçŸ©é˜µ</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(Rect r)</span> <span class="comment">//æ˜¯å¦å’Œè¯¥çŸ©é˜µä¸ç›¸äº¤</span></span></span><br><span class="line"><span class="function"><span class="comment">//å®˜æ–¹æ³¨é‡Šï¼š</span></span></span><br><span class="line"><span class="function"><span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="function"> * Return true if the region is empty, or if the specified rectangle does</span></span></span><br><span class="line"><span class="comment"><span class="function"> * not intersect the region. Returning false is not a guarantee that they</span></span></span><br><span class="line"><span class="comment"><span class="function"> * intersect, but returning true is a guarantee that they do not.</span></span></span><br><span class="line"><span class="comment"><span class="function"> */</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span></span>; <span class="comment">//æ˜¯å¦å’Œè¯¥çŸ©é˜µä¸ç›¸äº¤</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">quickReject</span><span class="params">(Region rgn)</span></span>;  <span class="comment">//æ˜¯å¦å’Œè¯¥çŸ©é˜µä¸ç›¸äº¤</span></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­è§¦ç‚¹æ˜¯å¦åœ¨æŸregionå†…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> downX = (<span class="keyword">int</span>)event.getX();</span><br><span class="line">    <span class="keyword">int</span> downY = (<span class="keyword">int</span>)event.getY();</span><br><span class="line">    <span class="keyword">boolean</span> isContain =  region.contains(downX,downY);</span><br><span class="line">    <span class="keyword">if</span>(isContain)&#123;</span><br><span class="line">        Toast.makeText(getContext(),<span class="string">&quot;è¿™ä¸ªç‚¹åœ¨è¿™ä¸ªåŒºåŸŸå†…&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        Toast.makeText(getContext(),<span class="string">&quot;è¿™ä¸ªç‚¹ä¸åœ¨è¿™ä¸ªåŒºåŸŸå†…&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸ªäººçš„ä¸€äº›ç†è§£ï¼š">ä¸ªäººçš„ä¸€äº›ç†è§£ï¼š</h2><p>regionçš„ä½¿ç”¨ï¼Œç»™äº†å¼€å‘è€…æ›´é«˜çš„çµæ´»æ€§ï¼Œæ¯•ç«Ÿcanvasåªæœ‰ä¸€ä¸ªï¼Œå°†ç»„ä»¶çš„å„ä¸ªéƒ¨åˆ†åˆ©ç”¨regionè§£è€¦ï¼Œèƒ½å¤Ÿåœ¨å¼€å‘ä¸­ä¸å¼€å‘åå¸¦æ¥æ›´å¤§çš„ä¾¿åˆ©ã€‚è¿™é‡Œç±»ä¼¼äºå°†flutterçš„ç»„ä»¶ç»„åˆä¸ç»˜åˆ¶èåˆèµ·æ¥çš„ä¸€ç§ç­–ç•¥ï¼Œç»†ç»†æƒ³æ¥ä¹Ÿç¡®å®æ˜¯æ˜¾å¾—æ›´åŠ ä¾¿åˆ©ï¼Œæ¯•ç«Ÿregionæ—¢æ‹¥æœ‰ç±»ä¼¼äºcanvasçš„â€œç»˜åˆ¶â€èƒ½åŠ›ï¼Œä¹Ÿæ‹¥æœ‰ç±»ä¼¼äºGestureDetectorçš„ç‚¹å‡»ç›‘å¬ï¼Œè™½ç„¶æ²¡æœ‰å…¶ä»–æ‰‹åŠ¿ç›‘å¬ï¼Œç¡®å®æ˜¾å¾—æœ‰äº›é—æ†¾ï¼Œä½†regionçš„ä»»åŠ¡æ›´åå‘äºç»˜åˆ¶ï¼Œä¹Ÿæ˜¾å¾—æ›´åŠ å†…èšäº†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/harvic880925/article/details/39056701">è‡ªå®šä¹‰æ§ä»¶ä¹‹ç»˜å›¾ç¯‡ï¼ˆä¸‰ï¼‰ï¼šåŒºåŸŸï¼ˆRangeï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> ç»˜åˆ¶åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
            <tag> ç»˜åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JetBrainsç³»åˆ—å¸¸ç”¨å¿«æ·é”®æ±‡æ€»</title>
      <link href="/2021/10/02/JetBrains%E7%B3%BB%E5%88%97%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%B1%87%E6%80%BB/"/>
      <url>/2021/10/02/JetBrains%E7%B3%BB%E5%88%97%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<h1>å¼•è¨€ï¼š</h1><p>ä½œä¸ºä¸€åèµ„æ·±å’¸é±¼ï¼Œç¾è§‚å¼ºå¤§çš„ç¼–è¯‘å™¨ä¸€ç›´æ˜¯æˆ‘çš„è¿½æ±‚ï¼Œæ‰€è°“å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œå½“ç„¶äº†ï¼Œä¹Ÿè¦å­¦ä¼šé«˜æ•ˆåœ°ä½¿ç”¨ç¼–è¯‘å™¨ï¼Œæ‰èƒ½è®²ç¼–è¯‘å™¨çš„ä¼˜ç‚¹æœ€å¤§åŒ–ã€‚ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œä¸‹é¢æ±‡æ€»ä¸€äº›JetBrainså®¶IDEçš„å¸¸ç”¨å¿«æ·é”®ä¸è®¾ç½®ã€‚</p><h1>å¿«æ·é”®æ±‡æ€»ï¼š</h1><p>é¦–å…ˆï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººæ¨èKey Promoter X è¿™æ¬¾æ’ä»¶ï¼Œå½“ä½ ä½¿ç”¨é¼ æ ‡å’Œèœå•é¡¹æ—¶ï¼Œè¿™ä¸ªæ’ä»¶ä¼šæç¤ºç›¸åº”çš„å¿«æ·é”®ã€‚æˆ‘åˆšå®‰è£…ï¼Œå…ˆè¯•è¯•æ°´ã€‚</p><p><img src="0.png" alt=""></p><h2 id="å¯¼èˆªç±»å¿«æ·é”®">å¯¼èˆªç±»å¿«æ·é”®</h2><h3 id="Ctrl-Tabï¼ˆ-Tabï¼‰-â€”â€”-åˆ‡æ¢æ ‡ç­¾é¡µï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Ctrl + Tab</code>ï¼ˆ<code>^ Tab</code>ï¼‰ â€”â€” åˆ‡æ¢æ ‡ç­¾é¡µï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>å¿«é€Ÿåˆ‡æ¢æ‰“å¼€çš„æ–‡ä»¶ã€‚æŒ‰ä½ Ctrl é”®ä¸é‡Šæ”¾æ—¶å¯ä»¥åœ¨æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ä¸­é€ä¸ªç§»åŠ¨ï¼Œé‡Šæ”¾æ—¶ä¼šåˆ‡æ¢åˆ°ç›¸åº”æ–‡ä»¶ã€‚</p><h3 id="Ctrl-B-ï¼ˆâŒ˜-Bï¼‰-â€”â€”-è·³è½¬åˆ°å£°æ˜-å®ç°"><code>Ctrl + B</code> ï¼ˆ<code>âŒ˜ B</code>ï¼‰ â€”â€” è·³è½¬åˆ°å£°æ˜/å®ç°</h3><p>åœ¨æŸä¸€æ–¹æ³•å¤„æŒ‰æ­¤å¿«æ·é”®ï¼Œä¼šè·³è½¬åˆ°è¯¥æ–¹æ³•çš„å£°æ˜å¤„ï¼Œä¾‹å¦‚ï¼Œå¯¹åº”çš„æ¥å£ã€‚ç›¸åï¼ŒæŒ‰ä¸‹ <code>Ctrl + Alt + B</code>ï¼ˆ<code>âŒ˜ âŒ¥ B</code>ï¼‰ä¸ä¼šè·³è½¬åˆ°æ¥å£ï¼Œè€Œæ˜¯è·³è½¬åˆ°æ¥å£çš„å®ç°ï¼Œå¾ˆå¤šæ—¶å€™è¿™èƒ½èŠ‚çœä¸å°‘æ—¶é—´ã€‚</p><h3 id="æŒ‰ä¸¤ä¸‹-Shiftï¼ˆâ‡§â‡§ï¼‰-â€”â€”-æœç´¢ä»»æ„å†…å®¹">æŒ‰ä¸¤ä¸‹ <code>Shift</code>ï¼ˆ<code>â‡§â‡§</code>ï¼‰ â€”â€” æœç´¢ä»»æ„å†…å®¹</h3><p>å¿«é€Ÿç‚¹æŒ‰ä¸¤ä¸‹ shiftï¼Œå¿«é€Ÿæœç´¢é¡¹ç›®ä¸­çš„ä»»æ„å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€è¡ŒåŠ¨ã€ç±»åœ¨å†…çš„ä»»æ„å†…å®¹ã€‚</p><h3 id="Ctrl-N-ï¼ˆâŒ˜-Oï¼‰-â€”â€”-æŸ¥æ‰¾ç±»"><code>Ctrl + N</code> ï¼ˆ<code>âŒ˜ O</code>ï¼‰ â€”â€” æŸ¥æ‰¾ç±»</h3><p>å¦‚æœå·²çŸ¥éœ€è¦æŸ¥æ‰¾çš„æ˜¯ç±»ï¼Œé‚£ä¹ˆå°±ä¸å¿…ä½¿ç”¨ä¸Šé¢çš„æœç´¢ä»»æ„å†…å®¹çš„å¿«æ·é”®ã€‚æŒ‰ä¸‹æ­¤å¿«æ·é”®åï¼Œå¼€å§‹è¾“å…¥ç±»åã€‚ä¸å¿…è¾“å…¥å®Œæ•´çš„ç±»åï¼Œåªéœ€è¾“å…¥å‰é¢çš„éƒ¨åˆ†ï¼Œæˆ–è€…ä»…è¾“å…¥ç±»åä¸­çš„å¤§å†™å­—æ¯ï¼Œè¿˜å¯ä»¥è¾“å…¥æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰è¡¨ç¤ºé€šé…ç¬¦ã€‚</p><h3 id="Ctrl-Shift-N-ï¼ˆâŒ˜-â‡§-Oï¼‰-â€”â€”-æŸ¥æ‰¾æ–‡ä»¶"><code>Ctrl + Shift + N</code> ï¼ˆ<code>âŒ˜ â‡§ O</code>ï¼‰ â€”â€” æŸ¥æ‰¾æ–‡ä»¶</h3><p>éœ€è¦æŸ¥æ‰¾æ–‡æœ¬æ–‡ä»¶æˆ–é…ç½®æ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªå¿«æ·é”®å¾ˆæ–¹ä¾¿ã€‚</p><h3 id="Ctrl-Shift-T-ï¼ˆâ‡§-âŒ˜-Tï¼‰-â€”â€”-è·³è½¬è‡³æµ‹è¯•"><code>Ctrl + Shift + T</code> ï¼ˆ<code>â‡§ âŒ˜ T</code>ï¼‰ â€”â€” è·³è½¬è‡³æµ‹è¯•</h3><p>å¦‚æœä½ å¯¹æµ‹è¯•è½»åº¦ä¸Šç˜¾ï¼Œé‚£ä¹ˆè¿™ä¸ªå¿«æ·é”®å¯ä»¥è®©ä½ åœ¨æµ‹è¯•å’Œå®ç°é—´å¿«é€Ÿè·³è½¬ã€‚å½“åœ¨æµ‹è¯•å¤„æŒ‰æ­¤å¿«æ·é”®ï¼Œä¼šè·³è½¬è‡³ç›¸åº”å®ç°ã€‚åä¹‹ï¼Œåœ¨å®ç°å¤„æŒ‰æ­¤å¿«æ·é”®ï¼Œåˆ™ä¼šè·³è½¬è‡³ç›¸åº”æµ‹è¯•ã€‚å¦‚æœæµ‹è¯•ä¸å­˜åœ¨ï¼Œä¼šæ ¹æ®ä½ é€‰æ‹©çš„æµ‹è¯•æ¡†æ¶ï¼Œè‡ªåŠ¨åˆ›å»ºç›¸åº”çš„æµ‹è¯•ç±»ã€‚</p><h3 id="Ctrl-Alt-F7-ï¼ˆâŒ˜-âŒ¥-F7ï¼‰-â€”â€”-æ˜¾ç¤ºç”¨ä¾‹"><code>Ctrl + Alt + F7</code> ï¼ˆ<code>âŒ˜ âŒ¥ F7</code>ï¼‰ â€”â€” æ˜¾ç¤ºç”¨ä¾‹</h3><p>åœ¨å¼¹å‡ºå¯¹è¯æ¡†ä¸­æ˜¾ç¤ºå½“å‰æ–¹æ³•ã€ç±»ã€å˜é‡çš„æ‰€æœ‰ç”¨ä¾‹ï¼Œè®©ä½ å¯ä»¥è¿…é€Ÿè·³è½¬ã€‚</p><h3 id="Ctrl-F12-ï¼ˆâŒ˜-F12ï¼‰-â€”â€”-ç»“æ„è§†å›¾"><code>Ctrl + F12</code> ï¼ˆ<code>âŒ˜ F12</code>ï¼‰ â€”â€” ç»“æ„è§†å›¾</h3><p>æ˜¾ç¤ºå±æ€§ã€æ–¹æ³•åˆ—è¡¨ï¼Œæ–¹ä¾¿å¿«æ·åœ°å¤§è‡´äº†è§£å½“å‰ç±»çš„ç”¨é€”ã€‚</p><h3 id="Ctrl-G-ï¼ˆâŒ˜-Lï¼‰-â€”â€”-è·³è½¬è‡³è¡Œ"><code>Ctrl + G</code> ï¼ˆ<code>âŒ˜ L</code>ï¼‰ â€”â€” è·³è½¬è‡³è¡Œ</h3><p>æœ‰åŒäº‹é—®ä½ ç¬¬ 45 è¡Œçš„ä»£ç æ˜¯åšä»€ä¹ˆçš„æ—¶ï¼Œè¿™ä¸ªæ–¹ä¾¿çš„å¿«æ·é”®è®©ä½ å¯ä»¥è¿…é€Ÿè·³è½¬è‡³ç›¸åº”ä»£ç ã€‚</p><h3 id="F2-ï¼ˆF2ï¼‰-â€”â€”-è·³è½¬è‡³æŠ¥é”™-è­¦å‘Š"><code>F2</code> ï¼ˆ<code>F2</code>ï¼‰ â€”â€” è·³è½¬è‡³æŠ¥é”™/è­¦å‘Š</h3><p>IntelliJ æœ‰æŠ¥é”™æˆ–è­¦å‘Šæ—¶ï¼ˆç¼–è¾‘åŒºåŸŸå³ä¸Šè§’ä¼šæ˜¾ç¤ºä¸€ä¸ªå°çš„çŠ¶æ€å›¾æ ‡ï¼‰ï¼ŒæŒ‰ä¸‹ F2 ä¼šè·³è½¬è‡³ä¸‹ä¸€å¤„é”™è¯¯/è­¦å‘Šã€‚è¿™ä¸ªå¿«æ·é”®æœ‰åŠ©äºä½ ä¿æŒçŠ¶æ€å›¾æ ‡å¸¸ç»¿ã€‚</p><h2 id="ç¼–è¾‘ç±»å¿«æ·é”®">ç¼–è¾‘ç±»å¿«æ·é”®</h2><p>é™¤äº†å¯¼èˆªï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½åœ¨ç¼–å†™ä»£ç æ—¶æé€Ÿã€‚ä»¥ä¸‹å¿«æ·é”®æœ‰åŠ©äºæˆ‘ä»¬è¾¾æˆè¿™ä¸€ç‚¹ã€‚</p><h3 id="Ctrl-W-ï¼ˆâŒ¥-Upï¼‰-â€”â€”-æ‰©å±•é€‰æ‹©åŒºåŸŸï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Ctrl + W</code> ï¼ˆ<code>âŒ¥ Up</code>ï¼‰ â€”â€” æ‰©å±•é€‰æ‹©åŒºåŸŸï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>è¿™æ˜¯æˆ‘ä¸ªäººæœ€å¸¸ç”¨çš„å¿«æ·é”®ã€‚ä¸éœ€è¦ç”¨é¼ æ ‡é€‰æ‹©æ–‡æœ¬äº†ï¼Œåªéœ€è·³è½¬è‡³ä»£ç ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œç„¶åæŒ‰ä¸‹æ­¤å¿«æ·é”®ã€‚å®ƒä¼šæ™ºèƒ½åœ°æ‰©å±•é€‰æ‹©åŒºåŸŸï¼Œä»å•è¯åˆ°è¯­å¥ï¼Œä»è¯­å¥åˆ°ä»£ç å—ï¼Œä»ä»£ç å—åˆ°æ–¹æ³•ï¼Œä»¥æ­¤ç±»æ¨ã€‚åœ¨ä½ æƒ³è¦æå–æ–¹æ³•æ—¶å°¤ä¸ºä¾¿æ·ã€‚<code>Ctrl + Shift + W</code> ï¼ˆ<code>âŒ¥ Down</code>ï¼‰åˆ™ä¼šç¼©å°é€‰æ‹©åŒºåŸŸã€‚</p><h3 id="Alt-Enter-ï¼ˆâŒ¥-Enterï¼‰-â€”â€”-æ˜¾ç¤ºæ„å›¾ï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Alt + Enter</code> ï¼ˆ<code>âŒ¥ Enter</code>ï¼‰ â€”â€” æ˜¾ç¤ºæ„å›¾ï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>ä¿®æ­£å¼•å…¥ï¼Œè¿è¡Œæµ‹è¯•ï¼Œä¼˜åŒ–å¼•å…¥ï¼Œç­‰ç­‰ã€‚å¦‚æœä½ çš„ä»£ç æœ‰é—®é¢˜ï¼Œè®©è¿™ä¸ªå¿«æ·é”®æ¥ä¿®å¤ã€‚å¦‚æœä½ çš„ä»£ç æ²¡é—®é¢˜ï¼Œè¿™ä¸ªå¿«æ·é”®èƒ½è®©ä½ çš„ä»£ç å˜å¾—æ›´å¥½ã€‚</p><h3 id="Ctrl-Shift-Enter-ï¼ˆâŒ˜-â‡§-Enterï¼‰-â€”â€”-è¡¥å…¨è¯­å¥"><code>Ctrl + Shift + Enter</code> ï¼ˆ<code>âŒ˜ â‡§ Enter</code>ï¼‰ â€”â€” è¡¥å…¨è¯­å¥</h3><p>å°±æˆ‘çš„ç»éªŒè€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªè¢«ä¸¥é‡ä½ä¼°çš„å¿«æ·é”®ã€‚å°‘ä¸ªæ‹¬å·ï¼Ÿå°‘äº†è¡Œå°¾çš„åˆ†å·ï¼Ÿä¸ç®¡å…‰æ ‡æ˜¯ä¸æ˜¯åœ¨è¡Œå°¾ï¼ŒæŒ‰ä¸‹æ­¤å¿«æ·é”®ä¾¿å¯è¡¥å…¨å¿…è¦çš„å­—ç¬¦ã€‚</p><h3 id="Ctrl-D-ï¼ˆâŒ˜-Dï¼‰-â€”â€”-å¤åˆ¶å½“å‰è¡Œï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Ctrl + D</code> ï¼ˆ<code>âŒ˜ D</code>ï¼‰ â€”â€” å¤åˆ¶å½“å‰è¡Œï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿˜æ˜¯æœ‰è®¸å¤šäººä½¿ç”¨é¼ æ ‡é€‰ä¸­å½“å‰è¡Œï¼Œå¤åˆ¶ï¼Œç„¶åç²˜è´´ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>Ctrl + D</code> ï¼ˆ<code>âŒ˜ D</code>ï¼‰å¯ä»¥èŠ‚çº¦å¾ˆå¤šæ—¶é—´ï¼šæŒ‰ä¸‹ä¹‹åå°±å¯ä»¥æ–°å¢ä¸€è¡Œï¼Œå†…å®¹å’Œå½“å‰è¡Œä¸€æ ·ã€‚å¦‚æœå½“å‰é€‰ä¸­äº†å¤šè¡Œï¼Œè¿™ä¸ªå¿«æ·é”®ä¼šé‡å¤æ•´ä¸ªä»£ç å—ã€‚</p><h3 id="Ctrl-Y-ï¼ˆâŒ˜-âŒ«ï¼‰-â€”â€”-åˆ é™¤å½“å‰è¡Œ"><code>Ctrl + Y</code> ï¼ˆ<code>âŒ˜ âŒ«</code>ï¼‰ â€”â€” åˆ é™¤å½“å‰è¡Œ</h3><p>ç±»ä¼¼ <code>Ctrl + D</code> ï¼ˆ<code>âŒ˜ D</code>ï¼‰ï¼Œè¿™ä¸ªå¿«æ·é”®å¯ä»¥åˆ é™¤ä»£ç è¡Œã€‚</p><h3 id="Ctrl-ï¼ˆâŒ˜-ï¼‰-â€”â€”-æ³¨é‡Šå½“å‰è¡Œ"><code>Ctrl + /</code> ï¼ˆ<code>âŒ˜ /</code>ï¼‰ â€”â€” æ³¨é‡Šå½“å‰è¡Œ</h3><p>ä¸ç®¡å…‰æ ‡åœ¨å½“å‰è¡Œçš„ä»€ä¹ˆä½ç½®ï¼Œåªéœ€æŒ‰ä¸‹è¿™ä¸ªå¿«æ·é”®å°±å¯ä»¥æ³¨é‡Šæ‰å½“å‰è¡Œã€‚æˆ‘ä¸ªäººä»ä¸ç”¨è¿™ä¸ªå¿«æ·é”®æ³¨é‡Šä»£ç ï¼Œä¸è¿‡æœ‰æ—¶å€™æˆ‘ä¼šç”¨è¿™ä¸ªå¿«æ·é”®åˆ‡æ¢æŸæ®µä»£ç æ˜¯å¦è¿è¡Œã€‚ä¸è¿‡ï¼Œè®°å¾—æ°¸è¿œä¸è¦æäº¤æ³¨é‡Šæ‰çš„ä»£ç ã€‚</p><h3 id="Ctrl-Shift-â€”â€”å—æ³¨é‡Š"><code>Ctrl + Shift + /</code>  â€”â€”å—æ³¨é‡Š (/**/)</h3><h3 id="Ctrl-Alt-L-â€”â€”æ ¼å¼åŒ–ä»£ç ï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Ctrl + Alt + L</code> â€”â€”æ ¼å¼åŒ–ä»£ç ï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œå†™çš„ä»£ç æ ¼å¼ä¸æ•´é½ç»Ÿä¸€ï¼Œè¿™ä¸ªå¾ˆæœ‰ç”¨</p><h3 id="Ctrl-z-Ctrl-x-Ctrl-c-Ctrl-v-Ctrl-F-è€ç”Ÿå¸¸è°ˆï¼Œä¸æäº†">Ctrl + z , Ctrl + x ,Ctrl + c ,Ctrl + v ,Ctrl + F è€ç”Ÿå¸¸è°ˆï¼Œä¸æäº†</h3><h2 id="é‡æ„å¿«æ·é”®">é‡æ„å¿«æ·é”®</h2><p>IntelliJ çš„æœ€å¤§å¼ºé¡¹ä¹‹ä¸€å°±æ˜¯å……è£•åˆ°è¿‡å‰©çš„é‡æ„æœºä¼šã€‚å°½ç®¡é‡æ„ä»£ç çš„æœºä¼šå¾ˆå¤šï¼Œå®è·µä¸­ 90% çš„æƒ…å†µä¸‹ï¼Œç”¨åˆ°çš„é‡æ„å¿«æ·é”®æ˜¯æˆ‘ä¸‹é¢åˆ—å‡ºçš„ã€‚</p><h3 id="Ctrl-Alt-M-ï¼ˆâŒ˜-âŒ¥-Mï¼‰-â€”â€”-æå–æ–¹æ³•"><code>Ctrl + Alt + M</code> ï¼ˆ<code>âŒ˜ âŒ¥ M</code>ï¼‰ â€”â€” æå–æ–¹æ³•</h3><p>é€‰ä¸­ä¸€æ®µä»£ç ï¼ˆæ¯”å¦‚ä½¿ç”¨ä¹‹å‰æåˆ°çš„ <code>Ctrl + W</code> / <code>âŒ¥ Up</code> å¿«æ·é”®ï¼‰ï¼Œæ¥ç€æŒ‰ä¸‹ <code>Ctrl + Alt + M</code> ï¼ˆ<code>âŒ˜ âŒ¥ M</code>ï¼‰ï¼Œä¾¿å¯å°†é€‰ä¸­çš„ä»£ç æå–ä¸ºæ–°æ–¹æ³•æˆ–åŒ¿åå‡½æ•°è¡¨è¾¾å¼ã€‚</p><h3 id="Shift-F6-ï¼ˆâ‡§-F6ï¼‰-â€”â€”-é‡å‘½åï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰"><code>Shift + F6</code> ï¼ˆ<code>â‡§ F6</code>ï¼‰ â€”â€” é‡å‘½åï¼ˆç‰¹åˆ«å¥½ç”¨ï¼‰</h3><p>ä¸ç®¡æ˜¯æ–¹æ³•ã€å˜é‡ï¼Œè¿˜æ˜¯ç±»ï¼ŒæŒ‰ä¸‹ <code>Shift + F6</code> ï¼ˆâ‡§ F6ï¼‰ä¾¿å¯å°†å½“å‰é€‰ä¸­å…ƒç´ åœ¨æ‰€æœ‰ä»£ç ä¸­çš„ç”¨ä¾‹ä¸€æ¬¡æ€§æ›¿æ¢ã€‚ä¸è¿‡è¦å°å¿ƒç‚¹ï¼ŒIntelliJ çš„é»˜è®¤é…ç½®æœ‰ç‚¹æ¿€è¿›ï¼ŒåŒæ—¶ä¹Ÿä¼šæ›¿æ¢æ–‡æœ¬ä¸­çš„ç”¨ä¾‹ï¼Œè¿™å¸¸å¸¸ä¸åˆä½ æ„ã€‚æŒ‰ä¸‹ä¸¤æ¬¡ <code>Shift + F6</code> ï¼ˆâ‡§ F6ï¼‰å°†æä¾›é‡å‘½åé€‰é¡¹ï¼Œè®©ä½ å¯ä»¥å®šåˆ¶è®¾å®šã€‚æˆ‘å»ºè®®åªæ›¿æ¢ä»£ç ï¼Œå…³é—­æ–‡æœ¬æ›¿æ¢é€‰é¡¹ã€‚</p><h3 id="Ctrl-Alt-V-ï¼ˆâŒ˜-âŒ¥-Vï¼‰-â€”â€”-æå–å˜é‡"><code>Ctrl + Alt + V</code> ï¼ˆ<code>âŒ˜ âŒ¥ V</code>ï¼‰ â€”â€” æå–å˜é‡</h3><p>åŒæ ·ï¼Œä½¿ç”¨ <code>Ctrl + W</code> / <code>âŒ¥ Up</code> é€‰ä¸­ä¸€æ®µä»£ç ï¼Œæ¥ç€æŒ‰ä¸‹ <code>Ctrl + Alt + V</code> ï¼ˆ<code>âŒ˜ âŒ¥ V</code>ï¼‰ï¼Œä¾¿å¯åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œå˜é‡çš„ç±»å‹å¸¸å¸¸æ˜¯æ­£ç¡®çš„ï¼Œå‘½åå¸¸å¸¸æ˜¯åˆç†çš„ã€‚å°†è¡¨è¾¾å¼ä¼ å…¥æ–¹æ³•æˆ–ç±»æ—¶ï¼Œèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡å¸¸å¸¸å¯ä»¥å¢å¼ºå¯è¯»æ€§ï¼Œæ­¤æ—¶è¿™ä¸ªå¿«æ·é”®å¾ˆæ–¹ä¾¿ã€‚</p><h2 id="è°ƒè¯•ç±»å¿«æ·é”®ï¼ˆç”¨çš„ä¸æ˜¯å¤ªå¤šï¼‰">è°ƒè¯•ç±»å¿«æ·é”®ï¼ˆç”¨çš„ä¸æ˜¯å¤ªå¤šï¼‰</h2><table><thead><tr><th>æŒ‰é”®</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>F8</td><td>è·³è¿‡</td></tr><tr><td>F7</td><td>æ­¥è¿›</td></tr><tr><td>Shift + F8</td><td>è·³å‡º</td></tr><tr><td>Alt + F8</td><td>è¡¨è¾¾å¼æ±‚å€¼</td></tr><tr><td>F9</td><td>æ¢å¤ç¨‹åº</td></tr><tr><td>Ctrl + F8</td><td>åˆ‡æ–­æ–­ç‚¹</td></tr><tr><td>Ctrl+Shift+F8</td><td>æŸ¥çœ‹æ–­ç‚¹</td></tr></tbody></table><h2 id="ä»¥ä¸Šé€‰è‡ªErik-Pragtçš„åŸåˆ›ä»¥åŠkumfo">ä»¥ä¸Šé€‰è‡ª<a href="https://nextfe.com/jetbrains-ide-shortcuts/">Erik Pragtçš„åŸåˆ›</a>ä»¥åŠ<a href="https://segmentfault.com/a/1190000007206543">kumfo</a></h2><h1>IDEè®¾ç½®æ±‡æ€»ï¼š</h1><h2 id="å¯¼åŒ…è®¾ç½®ï¼š">å¯¼åŒ…è®¾ç½®ï¼š</h2><ul><li>Add unambiguous imports on the flyï¼šå¿«é€Ÿæ·»åŠ æ˜ç¡®çš„å¯¼å…¥ã€‚</li><li>Optimize imports on the flyï¼šå¿«é€Ÿä¼˜åŒ–å¯¼å…¥ï¼Œä¼˜åŒ–çš„æ„æ€å³è‡ªåŠ¨å¸®åŠ©åˆ é™¤æ— ç”¨çš„å¯¼å…¥ã€‚</li></ul><p><img src="1.png" alt=""></p><h2 id="é…ç½®Logé¢œè‰²ï¼š">é…ç½®Logé¢œè‰²ï¼š</h2><p><img src="2.png" alt=""></p><p>çœ‹ä¸ªäººå–œå¥½å³å¯</p><h2 id="ç¼©å†™è®¾ç½®ï¼šï¼ˆæ´»åŠ¨æ¨¡æ¿ï¼‰">ç¼©å†™è®¾ç½®ï¼šï¼ˆæ´»åŠ¨æ¨¡æ¿ï¼‰</h2><p>Android Studio ä¸­é»˜è®¤æä¾›äº†å¾ˆå¤šéå¸¸æ–¹ä¾¿çš„æ´»åŠ¨æ¨¡æ¿(Live Templates)ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬è¾“å…¥ sout åæŒ‰ enter é”®ï¼Œ Android Studio ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å†™å…¥ System.out.println();</p><p><img src="3.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°IDEå·²ç»å¸®æˆ‘ä»¬å®šä¹‰å¥½äº†å¾ˆå¤šï¼Œæƒ³æ·»åŠ è‡ªå®šä¹‰çš„æ¨¡æ¿ç›´æ¥ç‚¹å‡»å³ä¸Šè§’åŠ å·å°±å¯ä»¥äº†ã€‚</p><h3 id="å¸¸ç”¨çš„æ¯”å¦‚ï¼š">å¸¸ç”¨çš„æ¯”å¦‚ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//psvm:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sout</span></span><br><span class="line">System.out.println();</span><br><span class="line"><span class="comment">//souf</span></span><br><span class="line">System.out.printf(<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fori</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ; i++) &#123;&#125;</span><br><span class="line"><span class="comment">//itar</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Array.length; i++) &#123; <span class="keyword">int</span> i1 = Array[i];&#125;<span class="comment">//éå†æ•°ç»„</span></span><br><span class="line"><span class="comment">//foreach</span></span><br><span class="line"><span class="keyword">for</span> (:) &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//psf</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  </span><br><span class="line"><span class="comment">//psfi</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>  </span><br><span class="line"><span class="comment">//psfs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String  </span><br></pre></td></tr></table></figure><p>ç­‰ç­‰ç­‰ç­‰</p><h1>è™šæ‹Ÿæœºç­‰å¤§æ–‡ä»¶è¿å‡ºï¼š</h1><p>android studioäº§ç”Ÿçš„.gradle .android .androidStudioç¼“å­˜é»˜è®¤å­˜åœ¨Cç›˜ï¼Œæ—¶é—´é•¿äº†ä¹‹åä¼šå ç”¨å¤§é‡ç©ºé—´ï¼Œå»ºè®®æå‰è¿›è¡Œè¿ç§»ã€‚</p><p>ç”±äºæˆ‘å·²ç»è¿å‡ºè¿‡äº†ï¼Œå°±ä¸å†æ¼”ç¤ºäº†</p><p>æ”¾é“¾æ¥ï¼š</p><p><a href="https://blog.csdn.net/SmallWalnutBG/article/details/107463138?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-7.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-7.no_search_link">https://blog.csdn.net/SmallWalnutBG/article/details/107463138?utm_medium=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~default-7.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~default-7.no_search_link</a></p><h1>PS. å¦‚æœCç›˜æ»¡äº†åˆä¸æ•¢ä¹±åˆ æ€ä¹ˆåŠï¼š</h1><h2 id="1-åˆ é™¤ä¸€äº›ä¸œè¥¿ï¼š">1.åˆ é™¤ä¸€äº›ä¸œè¥¿ï¼š</h2><p>è¿™ä¸ªåˆ é™¤å½“ç„¶ä¸æ˜¯ä¹±åˆ ï¼Œå»ºè®®ä¸‹è½½spaceSnifferå¯¹Cç›˜ç©ºé—´è¿›è¡Œåˆ†æåˆ æ‰ä¸€äº›å®‰è£…åŒ…æˆ–è€…ä¸´æ—¶æ–‡ä»¶ä»€ä¹ˆçš„ã€‚</p><p><img src="4.png" alt=""></p><h2 id="2-æ‰©å®¹Cç›˜ï¼š">2.æ‰©å®¹Cç›˜ï¼š</h2><p>å¸¸è§„æ–¹æ³•æ˜¯æ— æ³•æ‰©å®¹Cç›˜çš„ï¼Œä½†å¯ä»¥å€ŸåŠ©ä¸€äº›è½¯ä»¶</p><p>æˆ‘ä½¿ç”¨çš„DiskGeniusï¼Œå…è´¹è€Œä¸”åŠŸèƒ½å¼ºå¤§ï¼Œæˆ‘å°±ç”¨å®ƒç»™æˆ‘çš„Cç›˜æ‰©å®¹è¿‡</p><p><img src="5.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨çŸ¥è¯†(æ‚è°ˆ) </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ä¸æ±‡æ€» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»˜åˆ¶ï¼šå®‰å“åŸç”Ÿä¸flutter(ä¸€ã€å¼•è¨€ä¸ç»˜å›¾)</title>
      <link href="/2021/10/01/%E7%BB%98%E5%88%B6%EF%BC%9A%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F%E4%B8%8Eflutter/"/>
      <url>/2021/10/01/%E7%BB%98%E5%88%B6%EF%BC%9A%E5%AE%89%E5%8D%93%E5%8E%9F%E7%94%9F%E4%B8%8Eflutter/</url>
      
        <content type="html"><![CDATA[<h1>å…ˆæ”¾ä¸Š <a href="https://blog.csdn.net/harvic880925/article/details/50995268">å®‰å“å¤§ä½¬</a> å’Œ<a href="https://juejin.cn/book/6844733827265331214/section/6844733827214999565">flutterå¤§ä½¬</a>é•‡æ¥¼</h1><h1>å¼•è¨€ï¼šæˆ‘ä¸ºä»€ä¹ˆè¦å­¦ç»˜åˆ¶</h1><p>â€‹       å…¶å®å¯¹äºflutteræ¥è¯´ï¼Œè‡ªç»˜çš„éœ€æ±‚å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œå°¤å…¶æ˜¯ç»„ä»¶çš„è‡ªç»˜ï¼Œä¸€æ–¹é¢ï¼Œflutterçš„ç»„ä»¶å°±æ˜¯ä¾æ®MaterialDesigné£æ ¼ç»˜åˆ¶çš„ï¼Œæœ¬æ¥å°±å¾ˆå¥½çœ‹ï¼Œå¦ä¸€æ–¹é¢ï¼Œä¸€äº›å¤æ‚çš„ç»„ä»¶ä¹Ÿå®Œå…¨å¯ä»¥é€šè¿‡ç»„ä»¶ç»„è£…çš„æ–¹å¼è¿›è¡Œæ„å»ºï¼Œæ¯”è‡ªç»˜è¦çœäº‹ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€flutteræ²¡æœ‰è‡ªç»˜ç»„ä»¶çš„éœ€æ±‚ï¼Œä¸€äº›é«˜åº¦è‡ªå®šä¹‰çš„ç»„ä»¶ï¼ˆæ¯”å¦‚QQç¼–è¾‘å›¾ç‰‡çš„æ—¶å€™èƒ½åœ¨å›¾ç‰‡ä¸Šè´´è¡¨æƒ…æˆ–è€…åŠ æ–‡å­—æ—¶æ˜¾ç¤ºçš„æ–‡å­—æ¡†ä»¥åŠæ–‡å­—è¾“å…¥æ¡†çš„æ‹–åŠ¨ç¼©æ”¾æ—‹è½¬ç­‰ç­‰ç­‰ç­‰ï¼‰è¿˜æ˜¯éœ€è¦æˆ‘ä»¬å»è‡ªç»˜ç»„ä»¶çš„ã€‚</p><p>â€‹       ä¸è¿‡å¯¹äºå®‰å“åŸç”Ÿå˜›ï¼Œå˜¿å˜¿ï¼Œå°±å¼€å§‹ç¦»è°±äº†ã€‚åŸç”Ÿç»„ä»¶UIä¹Ÿä¸ç®—ã€‚ã€‚ç‰¹åˆ«ä¸‘ï¼Œä½†æ˜¯ç›¸è¾ƒäºflutteræ¥è¯´ï¼Œé«˜ä¸‹ç«‹åˆ¤ã€‚ä¸€æ–¹é¢ï¼ŒåŸç”Ÿç»„ä»¶æœ€å¥½è¿˜æ˜¯ä¸è¦ç›´æ¥æ‹¿æ¥ç”¨ï¼Œè¿˜æ˜¯å»ºè®®è¿›è¡Œå°è£…ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸç”Ÿçš„åŠ¨ç”»æ•ˆæœåšçš„å¹¶ä¸æ¯”flutterå¥½ï¼Œè€Œä¸”ç»„ä»¶ä¹Ÿæ¯”è¾ƒå•ä¸€ï¼Œéƒ½ç•™ç»™äº†è‡ªç»˜å¾ˆå¤§çš„å‘å±•ç©ºé—´ï¼ˆ<s>ç»™å¼€å‘è€…å¢åŠ äº†å·¥ä½œé‡</s>ï¼‰ã€‚</p><p><img src="1.jpg" alt=""></p><p>ä»¥ä¸‹å†…å®¹é€‰è‡ª<a href="https://juejin.cn/user/149189281194766">å¼ é£æ·ç‰¹çƒˆ</a>çš„å°å†Œ<a href="https://juejin.cn/book/6844733827265331214/section">Flutter ç»˜åˆ¶æŒ‡å— - å¦™ç¬”ç”ŸèŠ±</a>ï¼Œæˆ‘è§‰å¾—è¯´çš„æŒºå¥½ï¼š</p><h5 id="ä¸ºä»€ä¹ˆè¦å­¦ç»˜åˆ¶">ä¸ºä»€ä¹ˆè¦å­¦ç»˜åˆ¶</h5><p>æ‰“å¼€ä½ çš„<code>æ‰‹æœº</code>ã€<code>ç”µè„‘</code>ã€<code>å¹³æ¿</code>ï¼Œä½ å¯è§†çš„æ‰€æœ‰çš„ä¸€åˆ‡åœ¨æœ¬è´¨ä¸Šéƒ½æ˜¯<code>ä¾é ç»˜åˆ¶å®ç°</code>çš„ã€‚æ¯ä¸ªå¹³å°éƒ½ä¼šæœ‰è‡ªèº«çš„ç»˜åˆ¶ä½“ç³»ï¼Œå¹³å°è‡ªèº«çš„æ§ä»¶å¾ˆå¤šæ—¶å€™å¯èƒ½<code>å¹¶ä¸èƒ½æ»¡è¶³</code>è®¾è®¡çš„éœ€æ±‚ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ§ä»¶æ˜¯å’Œé¡¹ç›®<code>ç‰¹ç‚¹é«˜åº¦å¥‘åˆ</code>çš„ï¼Œæ‰€ä»¥å¹³å°ä¼š<code>æš´éœ²å‡ºç»˜åˆ¶çš„æ¥å£</code>ç»™å¼€å‘è€…ï¼Œè®©å¼€å‘è€…å¯¹ç•Œé¢å…ƒç´ æ‹¥æœ‰ <code>é«˜åº¦çš„å¯å®šåˆ¶æ€§</code>ã€‚</p><p>ä½†å‡¡<code>å¯å®šåˆ¶æ€§</code>çš„ä¸œè¥¿ï¼Œéƒ½æ„å‘³ç€ä¸€å®šçš„<code>é—¨æ§›</code>ï¼Œè¿™å¯èƒ½ä¼šè®©å¾ˆå¤šäºº<code>æœ›è€Œå´æ­¥</code>ï¼Œæ‰€ä»¥ç»˜åˆ¶è¿™ä¸ªæŠ€èƒ½æ€»æ˜¯è¢«å¼€å‘è€…æ‰€å†·æ¼ ï¼Œæ¯•ç«ŸæŠ±ç€<code>åˆä¸æ˜¯ä¸èƒ½ç”¨</code>å¿ƒæ€çš„äººä¸åœ¨å°‘æ•°ï¼Œè€Œä¸”ä¼Ÿå¤§çš„å…ˆé©±è€…ä»¬ä¹Ÿä¸ºæˆ‘ä»¬ç•™ä¸‹æ¥<code>ä¸°å¯Œçš„èµ„æº</code>ï¼Œè¿™äº›è½®å­ï¼Œè£…ä¸Šå°±èƒ½è·‘ï¼Œå²‚ä¸ç¾å“‰ï¼Œå¹²å˜›è´¹å¿ƒè´¹åŠ›åœ°è‡ªå·±ç”»ï¼Ÿ</p><p>ä½†ä¸è¦å¿˜è®°: ç”¨åˆ«äººçš„ä¸œè¥¿ï¼Œæ˜¯<code>è¢«çº¦æŸ</code>çš„ä¸€æ–¹ï¼Œç”¨èµ·æ¥æŸæ‰‹æŸè„šã€‚è€Œä¸”åˆ«äººçš„ä»£ç ä¸ä¸€å®šèƒ½ç™¾åˆ†ç™¾ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œå¾ˆå¤šæ—¶å€™è¿˜æ˜¯éœ€è¦è‡ªå·±æ”¹æ”¹ï¼Œå¦‚æœä½ ä¸ä¼šç»˜åˆ¶çš„çŸ¥è¯†ï¼Œé‚£å°†éå¸¸ç—›è‹¦ã€‚å¦‚æœ<code>æ‰¾ä¸åˆ°</code>èƒ½ç”¨çš„è½®å­ï¼Œè‡ªå·±çš„ç»˜åˆ¶æŠ€èƒ½åˆè¿™ä¹ˆè¹©è„šï¼Œé‚£å°±åªèƒ½å»é—®ï¼Œæˆ–èŠ±é’±æ‰¾åˆ«äººå®ç°ã€‚ä¸ºä»€ä¹ˆè¦è®©è‡ªå·±æ··è¿™ä¹ˆæƒ¨å‘¢ï¼Œ<code>ä½•ä¸é£Ÿè‚‰ç³œï¼Ÿ</code></p><p>æœ‰è½®å­å’Œè‡ªå·±ä¼šç»˜åˆ¶å¹¶ä¸å†²çªï¼Œå°±åƒ<code>æœ‰é’±èŠ±</code>å’Œ<code>æ‹¥æœ‰æŒ£é’±çš„èƒ½åŠ›</code>ä¸€æ ·ï¼Œä¸¤è€…å¯ä»¥å¾ˆå¥½åœ°<code>ç›¸è¾…ç›¸æˆ</code>ï¼Œä¸€æ—¦ä½ æ‡‚äº†ï¼Œå°±èƒ½æ›´å¥½çš„å»ç”¨ï¼Œç”šè‡³å»ä¿®æ”¹è½®å­æ¥æ»¡è¶³è‡ªèº«çš„è®¾è®¡éœ€æ±‚ï¼Œæˆ–å‘ç°è½®å­ä¸­çš„ç¼ºç‚¹åŠ ä»¥æ”¹æ­£ï¼Œ<code>ä½¿ç”¨è€…å’Œåˆ›é€ è€…</code>çš„èº«ä»½å¹¶ä¸å†²çªã€‚</p><p><strong>æ€»è€Œè¨€ä¹‹ï¼Œæ²¡æœ‰å‰‘ï¼Œå’Œæœ‰å‰‘ä¸ç”¨ï¼Œæ˜¯ä¸¤ç äº‹</strong>ã€‚</p><h1>ç»˜å›¾åŸºç¡€ä»‹ç»ä¸å¯¹æ¯”</h1><h2 id="åŸç”Ÿï¼šPaint-Canvas-å³ç”»ç¬”ä¸ç”»å¸ƒ">åŸç”Ÿï¼šPaint&amp;Canvas,å³ç”»ç¬”ä¸ç”»å¸ƒ</h2><h3 id="ä»£ç ç»“æ„ä¸è°ƒç”¨ï¼šå¦‚ä½•è®©IDEçŸ¥é“ä½ æ˜¯åœ¨è¿›è¡Œç»˜åˆ¶å‘¢ï¼Ÿç»˜åˆ¶å®Œå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ">ä»£ç ç»“æ„ä¸è°ƒç”¨ï¼šå¦‚ä½•è®©IDEçŸ¥é“ä½ æ˜¯åœ¨è¿›è¡Œç»˜åˆ¶å‘¢ï¼Ÿç»˜åˆ¶å®Œå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</h3><p>å…¶å®æ–¹æ³•å¾ˆç®€å•ï¼Œè®©ä½ çš„ç±»ç»§æ‰¿viewç±»å¹¶é‡å†™OnDrawï¼ˆï¼‰å‡½æ•°ï¼ŒOnDrawï¼ˆï¼‰å‡½æ•°ä¸­è¿›è¡Œç”»ç¬”ç”»æ¿é…ç½®å¹¶è°ƒç”¨ç”»æ¿å¯¹è±¡å³å¯å®Œæˆç»˜åˆ¶ã€‚ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">Context m_context;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>(context);</span><br><span class="line">m_context=context;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡å†™OnDrawï¼ˆï¼‰å‡½æ•°ï¼Œåœ¨æ¯æ¬¡é‡ç»˜æ—¶è‡ªä¸»å®ç°ç»˜å›¾</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="keyword">super</span>.onDraw(canvas);</span><br><span class="line"><span class="comment">//è®¾ç½®ç”»ç¬”</span></span><br><span class="line">Paint paint=<span class="keyword">new</span> Paint();</span><br><span class="line">        </span><br><span class="line">paint.set....</span><br><span class="line">        <span class="comment">//ç”»</span></span><br><span class="line">        canvas.draw....</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ï¼šå¤§ä½¬åœ¨ä»–çš„åšå®¢é‡Œä½¿ç”¨çš„æ˜¯é€šè¿‡ç±»æ–‡ä»¶è¿›è¡Œæ·»åŠ ï¼Œä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œä½†è¿˜æ˜¯æ”¾ä¸Šï¼š</p><p>é»˜è®¤çš„XMLæ”¹æˆFrameLayoutå¸ƒå±€ï¼Œå¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/root&quot;</span>//æ³¨æ„è¿™é‡Œï¼Œåœ¨ç±»æ–‡ä»¶ä¸­ä¼šç”¨åˆ°</span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.example.try_paint_blog.MainActivity&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç±»æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        </span><br><span class="line">      setContentView(R.layout.activity_main);</span><br><span class="line">      FrameLayout root=(FrameLayout)findViewById(R.id.root);<span class="comment">//å¯¹åº”xmlä¸­çš„framelayout</span></span><br><span class="line">      root.addView(<span class="keyword">new</span> MyView(MainActivity.<span class="keyword">this</span>));<span class="comment">//æ·»åŠ </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        æˆ‘ä¸ºä»€ä¹ˆä¸å–œæ¬¢è¿™ä¹ˆç”¨å‘¢ï¼Ÿä¸ªäººè®¤ä¸ºï¼Œé™¤éå¿…è¦ï¼ˆæŒ‡éœ€è¦åŠ¨æ€æ·»åŠ æˆ–è€…åˆ é™¤çš„ç»„ä»¶ï¼‰ï¼Œé™æ€ç»„ä»¶å°±åº”è¯¥åœ¨xmlæ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜ï¼Œé¿å…å› è§†å›¾å±‚ä¸é€»è¾‘å±‚è€¦åˆè¿‡é«˜è€Œå¯¼è‡´åæœŸç»´æŠ¤å›°éš¾ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“ä½ é‡å†™ä¸€ä¸ªç•Œé¢ï¼Œå´å‘ç°æ€»æœ‰ä¸ªxmlä¸­æ²¡å®šä¹‰è¿‡çš„ç»„ä»¶å‡ºç°åœ¨UIé‡Œï¼Œé‚£å…«æˆæ˜¯åœ¨é€»è¾‘å±‚é‡ŒåŠ¨æ€æ·»åŠ çš„ã€‚ä½†å¦‚æœä¸‡ä¸€ä½ åŠ¨æ€æ·»åŠ çš„è¿™ä¸ªç»„ä»¶æ˜¯é€æ˜çš„ï¼Œé‚£ä½ å°±ä¼šå‘ç°è‡ªå·±çš„UIæ’å¸ƒéå¸¸å¥‡æ€ªåˆæ‰¾ä¸å‡ºåŸå› ã€‚</p><p>bbäº†åŠå¤©ï¼Œå†™ä¸€ä¸‹æˆ‘æ¨èçš„xmlä¸­çš„å†™æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.example.try_paint_blog.MainActivity&quot;</span> &gt;</span> </span><br><span class="line">      </span><br><span class="line">    <span class="tag">&lt;<span class="name">com.zwn.view.MyView</span>       //ç”¨è·¯å¾„å»è¿›è¡Œå®šä¹‰</span></span><br><span class="line"><span class="tag">         <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span>             </span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Paintçš„åŸºæœ¬è®¾ç½®å‡½æ•°ï¼š">Paintçš„åŸºæœ¬è®¾ç½®å‡½æ•°ï¼š</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">paint.setAntiAlias(<span class="keyword">true</span>);<span class="comment">//æŠ—é”¯é½¿åŠŸèƒ½</span></span><br><span class="line">paint.setColor(Color.RED);  <span class="comment">//è®¾ç½®ç”»ç¬”é¢œè‰²    </span></span><br><span class="line">paint.setStyle(Style.FILL);<span class="comment">//è®¾ç½®å¡«å……æ ·å¼</span></span><br><span class="line">paint.setStrokeWidth(<span class="number">30</span>);<span class="comment">//è®¾ç½®ç”»ç¬”å®½åº¦</span></span><br><span class="line">paint.setShadowLayer(<span class="number">10</span>, <span class="number">15</span>, <span class="number">15</span>, Color.GREEN);<span class="comment">//è®¾ç½®é˜´å½±</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¯¹äºå¡«å……æ ·å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setStyle</span> <span class="params">(Paint.Style style)</span>     <span class="comment">//è®¾ç½®å¡«å……æ ·å¼</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Paint.Style.FILL             <span class="comment">//ï¼šå¡«å……å†…éƒ¨</span></span></span><br><span class="line"><span class="function">Paint.Style.FILL_AND_STROKE  <span class="comment">//ï¼šå¡«å……å†…éƒ¨å’Œæè¾¹</span></span></span><br><span class="line"><span class="function">Paint.Style.STROKE           <span class="comment">//ï¼šä»…æè¾¹</span></span></span><br></pre></td></tr></table></figure><p>FILLä¸FILL_AND_STROKEåœ¨<strong>ç”»ç¬”æ¯”è¾ƒç»†æ—¶</strong>æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œæè¾¹ä¸€èˆ¬æ­é…ç”»ç¬”å®½åº¦ä½¿ç”¨</p><p>å¯¹äºé˜´å½±ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setShadowLayer</span> <span class="params">(<span class="keyword">float</span> radius, <span class="keyword">float</span> dx, <span class="keyword">float</span> dy, <span class="keyword">int</span> color)</span>    <span class="comment">//æ·»åŠ é˜´å½±</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//å‚æ•°ï¼š</span></span></span><br><span class="line"><span class="function"><span class="comment">//radius:é˜´å½±çš„å€¾æ–œåº¦</span></span></span><br><span class="line"><span class="function"><span class="comment">//dx:æ°´å¹³ä½ç§»</span></span></span><br><span class="line"><span class="function"><span class="comment">//dy:å‚ç›´ä½ç§»</span></span></span><br></pre></td></tr></table></figure><h3 id="ç„¶åæ˜¯Canvasçš„è®¾ç½®ï¼š">ç„¶åæ˜¯Canvasçš„è®¾ç½®ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">canvas.drawColor(Color.BLUE);</span><br><span class="line">canvas.drawRGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);  <span class="comment">//è¿™ä¸¤ä¸ªåŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨æ¥è®¾ç½®èƒŒæ™¯é¢œè‰²çš„ã€‚</span></span><br><span class="line">canvas.drawRect();</span><br><span class="line">canvas.drawRoundRect();</span><br><span class="line">canvas.drawCircle();</span><br><span class="line">canvas.drawPath();</span><br><span class="line">canvas.drawLine();</span><br><span class="line">canvas.drawArc();</span><br><span class="line">canvas.drawOval();</span><br><span class="line">canvas.drawPoint();</span><br><span class="line">canvas.drawPoints();</span><br><span class="line">canvas.drawText();</span><br><span class="line">canvas.drawTextOnPath();</span><br><span class="line">canvas.drawBitmap();</span><br></pre></td></tr></table></figure><p><a href="https://juejin.cn/post/7011904646348275725#heading-0">canvasçš„å„ä¸ªç»˜åˆ¶å‡½æ•°</a><br><a href="https://juejin.cn/post/7012646921470738469">canvasçš„å˜æ¢</a></p><h3 id="åŸºæœ¬å‡ ä½•å›¾å½¢ï¼š">åŸºæœ¬å‡ ä½•å›¾å½¢ï¼š</h3><h4 id="å•Šä¸æƒ³å†™äº†ï¼Œè¿™éƒ¨åˆ†å¤ªåŸºç¡€äº†ï¼Œä¸€èˆ¬ç”¨åˆ°çš„æƒ…å†µä¹Ÿä¸å¤ªå¤šï¼Œç›´æ¥çœ‹å¤§ä½¬å†™çš„å§ã€‚">å•Šä¸æƒ³å†™äº†ï¼Œè¿™éƒ¨åˆ†å¤ªåŸºç¡€äº†ï¼Œä¸€èˆ¬ç”¨åˆ°çš„æƒ…å†µä¹Ÿä¸å¤ªå¤šï¼Œç›´æ¥çœ‹å¤§ä½¬å†™çš„å§ã€‚</h4><p><a href="https://blog.csdn.net/harvic880925/article/details/38875149">æ¦‚è¿°åŠåŸºæœ¬å‡ ä½•å›¾å½¢ç»˜åˆ¶</a><br><a href="https://blog.csdn.net/harvic880925/article/details/38926877">è·¯å¾„åŠæ–‡å­—</a></p><p>æ„Ÿè§‰æœ€åŸºæœ¬çš„è¿˜æ˜¯ä¸ªäººæŠ½è±¡æ€ç»´ä¸é€»è¾‘æ€ç»´ã€‚</p><p><img src="2.jpg" alt=""></p><h2 id="flutter-ï¼šPaint-Canvas-Path-å³ç”»ç¬”ã€ç”»å¸ƒä¸è·¯å¾„ï¼Œ">flutter ï¼šPaint&amp;Canvas&amp;Path,å³ç”»ç¬”ã€ç”»å¸ƒä¸è·¯å¾„ï¼Œ</h2><h3 id="åŒæ ·åœ°ï¼Œä»£ç ç»“æ„ï¼š">åŒæ ·åœ°ï¼Œä»£ç ç»“æ„ï¼š</h3><p>ä¸åŸç”Ÿä¸åŒçš„æ˜¯ï¼Œflutteråœ¨å¼€å‘è¿‡ç¨‹ä¸­å¹¶ä¸å­˜åœ¨åŠ¨æ€æ·»åŠ çš„é—®é¢˜ã€‚æƒ³è¦è°ƒç”¨è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œåªéœ€è¦è°ƒç”¨ä¸€ä¸ªCustomPaintï¼ˆï¼‰ï¼Œåœ¨å…¶painterç±»ä¸­å¯¹ç»˜åˆ¶çš„é€»è¾‘è¿›è¡Œè®¾ç½®å³å¯ã€‚æ ·ä¾‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Paper</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      child: CustomPaint( <span class="comment">// ä½¿ç”¨CustomPaint</span></span><br><span class="line">        painter: PaperPainter(),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaperPainter</span> <span class="keyword">extends</span> <span class="title">CustomPainter</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºç”»ç¬”</span></span><br><span class="line">    <span class="keyword">final</span> Paint paint = Paint();</span><br><span class="line">    <span class="comment">// ç»˜åˆ¶åœ†</span></span><br><span class="line">    canvas.drawCircle(Offset(<span class="number">100</span>, <span class="number">100</span>), <span class="number">10</span>, paint);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> shouldRepaint(CustomPainter oldDelegate) =&gt; <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­painterç±»ç»§æ‰¿äº†CustomPainterï¼Œå¹¶é‡å†™paintæ–¹æ³•ç”¨äºç»˜åˆ¶ï¼Œå…¶å®ä¸åŸç”Ÿä¸€æ ·çš„é€»è¾‘ã€‚æœ€ç»ˆpainterå‚æ•°ä¼ ç»™CustomPaintè¿›è¡Œç»˜åˆ¶ã€‚</p><h3 id="Canvas-æ–¹æ³•ä¸€è§ˆ">Canvas æ–¹æ³•ä¸€è§ˆ :</h3><blockquote><p>Canvas çš„æ–¹æ³•éå¸¸å¤šï¼Œä½†å¤§å¤šæ•°é¡¾åæ€ä¹‰ã€‚å…¶ä¸­ç”»å¸ƒ<code>çŠ¶æ€</code>ã€<code>å˜æ¢</code>å°†æ˜¯æœ€éš¾çš„åœ°æ–¹ã€‚</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">----&gt;[ç”»å¸ƒçŠ¶æ€]----</span><br><span class="line"><span class="keyword">void</span> save()</span><br><span class="line"><span class="keyword">void</span> saveLayer(Rect bounds, Paint paint)</span><br><span class="line"><span class="keyword">void</span> restore()</span><br><span class="line"><span class="built_in">int</span> getSaveCount()</span><br><span class="line"></span><br><span class="line">----&gt;[ç”»å¸ƒå˜æ¢]----</span><br><span class="line"><span class="keyword">void</span> skew(<span class="built_in">double</span> sx, <span class="built_in">double</span> sy)</span><br><span class="line"><span class="keyword">void</span> rotate(<span class="built_in">double</span> radians)</span><br><span class="line"><span class="keyword">void</span> scale(<span class="built_in">double</span> sx, [<span class="built_in">double</span> sy])</span><br><span class="line"><span class="keyword">void</span> translate(<span class="built_in">double</span> dx, <span class="built_in">double</span> dy)</span><br><span class="line"><span class="keyword">void</span> transform(Float64List matrix4)</span><br><span class="line"></span><br><span class="line">----&gt;[ç”»å¸ƒè£å‰ª]----</span><br><span class="line"><span class="keyword">void</span> clipRect(Rect rect, &#123; ClipOp clipOp = ClipOp.intersect, <span class="built_in">bool</span> doAntiAlias = <span class="keyword">true</span> &#125;)</span><br><span class="line"><span class="keyword">void</span> clipRRect(RRect rrect, &#123;<span class="built_in">bool</span> doAntiAlias = <span class="keyword">true</span>&#125;) </span><br><span class="line"><span class="keyword">void</span> clipPath(Path path, &#123;<span class="built_in">bool</span> doAntiAlias = <span class="keyword">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--ç‚¹ç›¸å…³]----</span><br><span class="line"><span class="keyword">void</span> drawPoints(PointMode pointMode, <span class="built_in">List</span>&lt;Offset&gt; points, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawRawPoints(PointMode pointMode, Float32List points, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawLine(Offset p1, Offset p2, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawVertices(Vertices vertices, BlendMode blendMode, Paint paint)</span><br><span class="line"></span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--çŸ©å½¢ç›¸å…³]----</span><br><span class="line"><span class="keyword">void</span> drawRect(Rect rect, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawRRect(RRect rrect, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawDRRect(RRect outer, RRect inner, Paint paint)</span><br><span class="line">  </span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--ç±»åœ†ç›¸å…³]----</span><br><span class="line"><span class="keyword">void</span> drawOval(Rect rect, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawCircle(Offset c, <span class="built_in">double</span> radius, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawArc(Rect rect, <span class="built_in">double</span> startAngle, <span class="built_in">double</span> sweepAngle, <span class="built_in">bool</span> useCenter, Paint paint)</span><br><span class="line"></span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--å›¾ç‰‡ç›¸å…³]----</span><br><span class="line"><span class="keyword">void</span> drawImage(Image image, Offset p, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawImageRect(Image image, Rect src, Rect dst, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawImageNine(Image image, Rect center, Rect dst, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawAtlas(Image atlas,<span class="built_in">List</span>&lt;RSTransform&gt; transforms,<span class="built_in">List</span>&lt;Rect&gt; rects,<span class="built_in">List</span>&lt;Color&gt; colors,BlendMode blendMode,Rect cullRect,Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawRawAtlas(Image atlas,Float32List rstTransforms,Float32List rects,Int32List colors,BlendMode blendMode,Rect cullRect,Paint paint)</span><br><span class="line">  </span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--æ–‡å­—]----</span><br><span class="line"><span class="keyword">void</span> drawParagraph(Paragraph paragraph, Offset offset)</span><br><span class="line">  </span><br><span class="line">----&gt;[ç”»å¸ƒç»˜åˆ¶--å…¶ä»–]----</span><br><span class="line"><span class="keyword">void</span> drawColor(Color color, BlendMode blendMode)</span><br><span class="line"><span class="keyword">void</span> drawPath(Path path, Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawPaint(Paint paint)</span><br><span class="line"><span class="keyword">void</span> drawShadow(Path path, Color color, <span class="built_in">double</span> elevation, <span class="built_in">bool</span> transparentOccluder)</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ—¶ç»˜åˆ¶ä¸€ä¸ªå›¾å½¢ Pathï¼Œç¬¬äºŒä¸ªæ˜¯è®¾ç½®é˜´å½±é¢œè‰²ï¼Œç¬¬ä¸‰ä¸ªä¸ºé˜´å½±èŒƒå›´ï¼Œæœ€åä¸€ä¸ªé˜´å½±èŒƒå›´æ˜¯å¦å¡«å……æ»¡</span></span><br><span class="line"><span class="keyword">void</span> drawPicture(Image image)</span><br></pre></td></tr></table></figure><hr><h3 id="Paint-å±æ€§ä¸€è§ˆ">Paint å±æ€§ä¸€è§ˆ :</h3><blockquote><p>ç²—ç•¥æ•°äº†ä¸€ä¸‹å¤§æ¦‚æœ‰ 14 ä¸ªå±æ€§: è¿™äº›éƒ½æ˜¯ä¹‹åéœ€è¦è¯¦ç»†ä»‹ç»çš„<br>ä¸‹é¢ä»£ç æ˜¯ç®€å•ä½¿ç”¨ Paint å’Œ Canvas ç»˜åˆ¶çš„æ–œçº¿ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">isAntiAlias(æŠ—é”¯é½¿) color(é¢œè‰²)          blendMode(æ··åˆæ¨¡å¼)     style(ç”»ç¬”æ ·å¼)</span><br><span class="line">strokeWidth(çº¿å®½)   strokeCap(çº¿å¸½ç±»å‹)  strokeJoin(çº¿æ¥ç±»å‹)    strokeMiterLimit(æ–œæ¥é™åˆ¶)  </span><br><span class="line">maskFilter(é®ç½©æ»¤é•œ) shader(ç€è‰²å™¨)      colorFilter(é¢œè‰²æ»¤é•œ)    imageFilter(å›¾ç‰‡æ»¤é•œ)</span><br><span class="line">invertColors(æ˜¯å¦åè‰²)                  filterQuality(æ»¤é•œè´¨é‡)</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> paint(Canvas canvas, Size size) &#123;</span><br><span class="line">  <span class="keyword">final</span> Paint paint = Paint(); <span class="comment">// åˆ›å»ºç”»ç¬”</span></span><br><span class="line">  paint</span><br><span class="line">    ..color = Colors.blue <span class="comment">//é¢œè‰²</span></span><br><span class="line">    ..strokeWidth = <span class="number">4</span> <span class="comment">//çº¿å®½</span></span><br><span class="line">    ..style = PaintingStyle.stroke; <span class="comment">//æ¨¡å¼--çº¿å‹</span></span><br><span class="line">  canvas.drawLine(Offset(<span class="number">0</span>, <span class="number">0</span>), Offset(<span class="number">100</span>, <span class="number">100</span>), paint);  <span class="comment">//ç»˜åˆ¶çº¿</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="Path-æ–¹æ³•ä¸€è§ˆ">Path æ–¹æ³•ä¸€è§ˆ :</h3><blockquote><p>å¯ä»¥è¯´ <code>Canvas</code> çš„ä¸€ä¸ª <code>drawPath</code> æ–¹æ³•ï¼Œä¸ºç»˜åˆ¶æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€æ— é™å¯èƒ½çš„å¤§é—¨ã€‚<br>é€šè¿‡ Path å¯ä»¥å®Œæˆéå¸¸å¤šçš„æ•ˆæœï¼ŒPath çš„è¿™äº›æ–¹æ³•å°†åœ¨ <code>[Pathç¯‡]</code> è¿›è¡Œè¯¦ç»†é˜è¿°ã€‚</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">----&gt;[è·¯å¾„ç»å¯¹ç§»åŠ¨]----</span><br><span class="line"><span class="keyword">void</span> moveTo(<span class="built_in">double</span> x, <span class="built_in">double</span> y)</span><br><span class="line"><span class="keyword">void</span> lineTo(<span class="built_in">double</span> x, <span class="built_in">double</span> y)</span><br><span class="line"><span class="keyword">void</span> quadraticBezierTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2)</span><br><span class="line"><span class="keyword">void</span> cubicTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2, <span class="built_in">double</span> x3, <span class="built_in">double</span> y3)</span><br><span class="line"><span class="keyword">void</span> conicTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2, <span class="built_in">double</span> w)</span><br><span class="line"><span class="keyword">void</span> arcTo(Rect rect, <span class="built_in">double</span> startAngle, <span class="built_in">double</span> sweepAngle, <span class="built_in">bool</span> forceMoveTo)</span><br><span class="line"><span class="keyword">void</span> arcToPoint(Offset arcEnd, &#123;Radius radius = Radius.zero, <span class="built_in">double</span> rotation = <span class="number">0.0</span>, <span class="built_in">bool</span> largeArc = <span class="keyword">false</span>, <span class="built_in">bool</span> clockwise = <span class="keyword">true</span>,&#125;)</span><br><span class="line"></span><br><span class="line">----&gt;[è·¯å¾„ç›¸å¯¹ç§»åŠ¨]----</span><br><span class="line"><span class="keyword">void</span> relativeMoveTo(<span class="built_in">double</span> dx, <span class="built_in">double</span> dy)</span><br><span class="line"><span class="keyword">void</span> relativeLineTo(<span class="built_in">double</span> dx, <span class="built_in">double</span> dy)</span><br><span class="line"><span class="keyword">void</span> relativeQuadraticBezierTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2)</span><br><span class="line"><span class="keyword">void</span> relativeCubicTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2, <span class="built_in">double</span> x3, <span class="built_in">double</span> y3)</span><br><span class="line"><span class="keyword">void</span> relativeConicTo(<span class="built_in">double</span> x1, <span class="built_in">double</span> y1, <span class="built_in">double</span> x2, <span class="built_in">double</span> y2, <span class="built_in">double</span> w)</span><br><span class="line"><span class="keyword">void</span> relativeArcToPoint(Offset arcEndDelta, &#123; Radius radius = Radius.zero, <span class="built_in">double</span> rotation = <span class="number">0.0</span>, <span class="built_in">bool</span> largeArc = <span class="keyword">false</span>, <span class="built_in">bool</span> clockwise = <span class="keyword">true</span>, &#125;)</span><br><span class="line"></span><br><span class="line">----&gt;[è·¯å¾„æ·»åŠ ]----</span><br><span class="line"><span class="keyword">void</span> addRect(Rect rect)</span><br><span class="line"><span class="keyword">void</span> addRRect(RRect rrect)</span><br><span class="line"><span class="keyword">void</span> addOval(Rect oval)</span><br><span class="line"><span class="keyword">void</span> addArc(Rect oval, <span class="built_in">double</span> startAngle, <span class="built_in">double</span> sweepAngle)</span><br><span class="line"><span class="keyword">void</span> addPolygon(<span class="built_in">List</span>&lt;Offset&gt; points, <span class="built_in">bool</span> close)</span><br><span class="line"><span class="keyword">void</span> addPath(Path path, Offset offset, &#123;Float64List matrix4&#125;)</span><br><span class="line"><span class="keyword">void</span> extendWithPath(Path path, Offset offset, &#123;Float64List matrix4&#125;)</span><br><span class="line"></span><br><span class="line">----&gt;[è·¯å¾„æ“ä½œ]----</span><br><span class="line"><span class="keyword">void</span> close()</span><br><span class="line"><span class="keyword">void</span> reset()</span><br><span class="line"><span class="built_in">bool</span> contains(Offset point)</span><br><span class="line">Path shift(Offset offset)</span><br><span class="line">Path transform(Float64List matrix4)</span><br><span class="line">Rect getBounds()   </span><br><span class="line"><span class="keyword">set</span> fillType(PathFillType value)</span><br><span class="line"><span class="keyword">static</span> Path combine(PathOperation operation, Path path1, Path path2)</span><br><span class="line">PathMetrics computeMetrics(&#123;<span class="built_in">bool</span> forceClosed = <span class="keyword">false</span>&#125;)</span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šdartä»£ç å‡å¼•è‡ªhttps://juejin.cn/book/6844733827265331214/section/6844733827214999565</strong></p><p>â€‹        ç²—ç•¥å¯¹æ¯”ï¼Œå…¶å®flutterçš„ç»˜åˆ¶é€»è¾‘è·ŸåŸç”ŸåŸºæœ¬æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œflutteråœ¨paintçš„å±æ€§ä¸Šè¦å¤šä¸€ç‚¹ï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´å…¶å®ç”¨åˆ°çš„ä¹Ÿå°±æ˜¯è·ŸåŸç”Ÿä¸€æ ·çš„é‚£å‡ ä¸ªã€‚ä¸è¿‡flutterçš„æ»¤é•œä¸å‡ºæ„å¤–æ˜¯ä¸€å±‚å°è£…ï¼Œå› ä¸ºå®‰å“åŸç”Ÿä¹Ÿèƒ½é€šè¿‡çŸ©é˜µå˜æ¢å®ç°æ»¤é•œæ•ˆæœï¼Œå°±æ˜¯æœ‰ç‚¹è´¹å¤´å‘ï¼ˆé›¾ï¼‰ã€‚</p><p>â€‹        ä¸è¿‡å‘¢ï¼Œflutterçš„canvasçš„drawShadowæ–¹æ³•è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼Œè¿™å¤§æ¦‚ä¹Ÿä»ä¾§é¢è¯´æ˜äº†flutterç»„ä»¶ä¸­å¹¿æ³›å­˜åœ¨çš„é˜´å½±çš„æœ€åŸºæœ¬ç»˜åˆ¶æ–¹æ³•ã€‚è€ŒåŸç”Ÿcanvas.drawBitmap()ä¸flutterçš„canvas.drawPicture(Picture picture)æ˜¯ç›¸å¯¹åº”çš„ï¼Œä½†åŸç”Ÿçš„bitmapé€Ÿåº¦ç†è®ºä¸Šæ˜¯æ¯”è¾ƒå¿«çš„ï¼Œè€Œflutterä½¿ç”¨çš„æ˜¯imageä½œä¸ºå‚æ•°è€Œä¸æ˜¯fileæˆ–è€…Uint8Listï¼Œå…¶æ€§èƒ½å°šæœªå¯çŸ¥ã€‚</p><p>â€‹        å¦å¤–ï¼Œflutteræ˜¾ç„¶å¯¹Pathç±»æ›´åŠ ä¸Šå¿ƒï¼Œç›¸å¯¹äºåŸç”Ÿï¼Œflutterè€ƒè™‘åˆ°äº†ç»˜åˆ¶çš„çµæ´»æ€§ï¼Œä¸ºç»˜åˆ¶æ·»åŠ äº†é€šè¿‡ç›¸å¯¹ä½ç½®æ·»åŠ è·¯å¾„çš„æ–¹æ³•ï¼Œä½¿å¾—åœ¨ç»„åˆç±»ç»„ä»¶ä¸­ï¼Œä½¿ç”¨flutterå¼€å‘æ›´åŠ ç®€å•ï¼Œä¸è¿‡è¿˜æ˜¯å› éœ€æ±‚è€Œå¼‚ã€‚</p><p>â€‹       <s>è€Œä¸”æœ‰çº§è”è¯­æ³•ç³–</s></p><p>â€‹      åˆï¼Œcanvasçš„å˜æ¢æ˜¯è¦ç»å¸¸ç”¨åˆ°çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…ç»˜åˆ¶å‡ºç•Œä»¥åŠç”»å¸ƒæ–¹å‘çš„é—®é¢˜ã€‚ä½†æ˜¯å‘¢ï¼Œmatrix4æˆ–è€…è¯´çŸ©é˜µå˜æ¢ç›¸å…³çš„é—®é¢˜ï¼Œæ˜¾ç„¶æ˜¯éäººç±»ç®€å•èƒ½ç†è§£çš„ï¼Œå¹¶ä¸å»ºè®®ä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç»˜åˆ¶åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
            <tag> å®‰å“åŸç”Ÿ </tag>
            
            <tag> ç»˜åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦çº¿ojæ€è·¯è®²è§£</title>
      <link href="/2021/09/30/%E5%AD%A6%E7%BA%BFoj%E6%80%9D%E8%B7%AF%E8%AE%B2%E8%A7%A3/"/>
      <url>/2021/09/30/%E5%AD%A6%E7%BA%BFoj%E6%80%9D%E8%B7%AF%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<img src="0.jpg"  /><h3 id="å­¦çº¿ï¼Œé›†åˆï¼-by-zwn">å­¦çº¿ï¼Œé›†åˆï¼(by zwn)</h3><h4 id="éš¾åº¦ï¼šç®€å•-tagï¼šæ•°ç»„ï¼Œè®¡ç®—ï¼Œé€åˆ†é¢˜">éš¾åº¦ï¼šç®€å•  tagï¼šæ•°ç»„ï¼Œè®¡ç®—ï¼Œé€åˆ†é¢˜</h4><p>åˆåˆ°äº†ä¸€å¹´ä¸€åº¦çš„è¿æ–°å­£ï¼Œç”±äºå­¦çº¿ç¦åˆ©å¾…é‡å¥½ï¼Œåˆæœ‰æ–°åŠå…¬å®¤ï¼Œå¯¼è‡´ä»Šå¹´è¿æ–°å±•å°å¼‚å¸¸ç«çˆ†ã€‚å­”ç«™ç«é€Ÿå¬é›†å­¦çº¿åŒå­¦å‰æ¥å¸®å¿™ã€‚ç°åœ¨æŠŠå‰æ¥å¸®å¿™çš„åŒå­¦çš„ä½ç½®æ ‡è®°åœ¨æ•°è½´ä¸Šï¼Œæ¯ä¸ªåŒå­¦çš„ä½ç½®ä¹Ÿå­˜åœ¨æ•°ç»„ locate å½“ä¸­ã€‚</p><p>å­”ç«™å¯ä»¥å¯¹ ä»»ä½•åŒå­¦ æ‰§è¡Œä¸‹é¢ä¸¤ç§æ“ä½œä¹‹ä¸€ï¼ˆä¸é™æ“ä½œæ¬¡æ•°ï¼Œ0 æ¬¡ä¹Ÿå¯ä»¥ï¼‰ï¼š</p><p>å°†ä»»æ„ä¸€ä¸ªåŒå­¦å‘å·¦æˆ–è€…å³ç§»åŠ¨ 2 ä¸ªå•ä½ï¼Œä»£ä»·ä¸º 0ã€‚<br>å°†ä»»æ„ä¸€ä¸ªåŒå­¦å‘å·¦æˆ–è€…å³ç§»åŠ¨ 1 ä¸ªå•ä½ï¼Œä»£ä»·ä¸º 1ã€‚</p><p>è¾“å…¥æ•°ç»„locateï¼Œè¿”å›å°†æ‰€æœ‰åŒå­¦ç§»åŠ¨åˆ°åŒä¸€ä½ç½®ï¼ˆä»»æ„ä½ç½®ï¼‰ä¸Šæ‰€éœ€è¦çš„æœ€å°ä»£ä»·ã€‚</p><p><strong>æœ€å¼€å§‹çš„æ—¶å€™ï¼ŒåŒä¸€ä½ç½®ä¸Šä¹Ÿå¯èƒ½æœ‰ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„åŒå­¦å“¦ã€‚</strong></p><p>è¾“å…¥æ ·ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ ·ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è§£é‡Šï¼šç¬¬äºŒä¸ªç­¹ç ç§»åŠ¨åˆ°ä½ç½®ä¸‰çš„ä»£ä»·æ˜¯ 1ï¼Œç¬¬ä¸€ä¸ªç­¹ç ç§»åŠ¨åˆ°ä½ç½®ä¸‰çš„ä»£ä»·æ˜¯ 0ï¼Œæ€»ä»£ä»·ä¸º 1ã€‚</span><br></pre></td></tr></table></figure><h4 id="æ€è·¯ï¼šæœ€åŸºç¡€çš„è´ªå¿ƒæ€æƒ³">æ€è·¯ï¼šæœ€åŸºç¡€çš„è´ªå¿ƒæ€æƒ³</h4><h5 id="è´ªå¿ƒç®—æ³•ï¼š"><strong>è´ªå¿ƒç®—æ³•</strong>ï¼š</h5><p>ï¼ˆè‹±è¯­ï¼šgreedy algorithmï¼‰ï¼Œåˆç§°<strong>è´ªå©ªç®—æ³•</strong>ï¼Œæ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯æœ€å¥½æˆ–æœ€ä¼˜çš„<a href="https://zh.wikipedia.org/wiki/%E7%AE%97%E6%B3%95">ç®—æ³•</a>ã€‚æ¯”å¦‚åœ¨<a href="https://zh.wikipedia.org/wiki/%E6%97%85%E8%A1%8C%E6%8E%A8%E9%94%80%E5%91%98%E9%97%AE%E9%A2%98">æ—…è¡Œæ¨é”€å‘˜é—®é¢˜</a>ä¸­ï¼Œå¦‚æœæ—…è¡Œå‘˜æ¯æ¬¡éƒ½é€‰æ‹©æœ€è¿‘çš„åŸå¸‚ï¼Œé‚£è¿™å°±æ˜¯ä¸€ç§è´ªå¿ƒç®—æ³•ã€‚</p><p><strong>è´ªå¿ƒç®—æ³•åœ¨æœ‰æœ€ä¼˜å­ç»“æ„çš„é—®é¢˜ä¸­å°¤ä¸ºæœ‰æ•ˆã€‚æœ€ä¼˜å­ç»“æ„çš„æ„æ€æ˜¯å±€éƒ¨æœ€ä¼˜è§£èƒ½å†³å®šå…¨å±€æœ€ä¼˜è§£ã€‚ç®€å•åœ°è¯´ï¼Œé—®é¢˜èƒ½å¤Ÿåˆ†è§£æˆå­é—®é¢˜æ¥è§£å†³ï¼Œå­é—®é¢˜çš„æœ€ä¼˜è§£èƒ½é€’æ¨åˆ°æœ€ç»ˆé—®é¢˜çš„æœ€ä¼˜è§£ã€‚</strong></p><p>è´ªå¿ƒç®—æ³•ä¸<a href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">åŠ¨æ€è§„åˆ’</a>çš„ä¸åŒåœ¨äºå®ƒå¯¹æ¯ä¸ªå­é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéƒ½åšå‡ºé€‰æ‹©ï¼Œä¸èƒ½å›é€€ã€‚åŠ¨æ€è§„åˆ’åˆ™ä¼šä¿å­˜ä»¥å‰çš„è¿ç®—ç»“æœï¼Œå¹¶æ ¹æ®ä»¥å‰çš„ç»“æœå¯¹å½“å‰è¿›è¡Œé€‰æ‹©ï¼Œæœ‰å›é€€åŠŸèƒ½ã€‚</p><p>è´ªå¿ƒæ³•å¯ä»¥è§£å†³ä¸€äº›<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E4%BC%98%E5%8C%96">æœ€ä¼˜åŒ–</a>é—®é¢˜ï¼Œå¦‚ï¼šæ±‚<a href="https://zh.wikipedia.org/wiki/%E5%9B%BE">å›¾</a>ä¸­çš„<a href="https://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91">æœ€å°ç”Ÿæˆæ ‘</a>ã€æ±‚<a href="https://zh.wikipedia.org/wiki/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81">å“ˆå¤«æ›¼ç¼–ç </a>â€¦â€¦å¯¹äºå…¶ä»–é—®é¢˜ï¼Œ**è´ªå¿ƒæ³•ä¸€èˆ¬ä¸èƒ½å¾—åˆ°æˆ‘ä»¬æ‰€è¦æ±‚çš„ç­”æ¡ˆã€‚ä¸€æ—¦ä¸€ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡è´ªå¿ƒæ³•æ¥è§£å†³ï¼Œé‚£ä¹ˆè´ªå¿ƒæ³•ä¸€èˆ¬æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ€å¥½åŠæ³•ã€‚**ç”±äºè´ªå¿ƒæ³•çš„é«˜æ•ˆæ€§ä»¥åŠå…¶æ‰€æ±‚å¾—çš„ç­”æ¡ˆæ¯”è¾ƒæ¥è¿‘æœ€ä¼˜ç»“æœï¼Œè´ªå¿ƒæ³•ä¹Ÿå¯ä»¥ç”¨ä½œè¾…åŠ©ç®—æ³•æˆ–è€…ç›´æ¥è§£å†³ä¸€äº›è¦æ±‚ç»“æœä¸ç‰¹åˆ«ç²¾ç¡®çš„é—®é¢˜ã€‚åœ¨ä¸åŒæƒ…å†µï¼Œé€‰æ‹©æœ€ä¼˜çš„è§£ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¾›æ™®æ£®æ‚–è®ºï¼ˆSimpsonâ€™s Paradoxï¼‰ï¼Œä¸ä¸€å®šå‡ºç°æœ€ä¼˜çš„è§£ã€‚</p><h5 id="åŸºæœ¬æ­¥éª¤ï¼š"><strong>åŸºæœ¬æ­¥éª¤ï¼š</strong></h5><p>æ­¥éª¤1ï¼šä»æŸä¸ªåˆå§‹è§£å‡ºå‘ï¼›<br>æ­¥éª¤2ï¼šé‡‡ç”¨è¿­ä»£çš„è¿‡ç¨‹ï¼Œå½“å¯ä»¥å‘ç›®æ ‡å‰è¿›ä¸€æ­¥æ—¶ï¼Œå°±æ ¹æ®å±€éƒ¨æœ€ä¼˜ç­–ç•¥ï¼Œå¾—åˆ°ä¸€éƒ¨åˆ†è§£ï¼Œç¼©å°é—®é¢˜è§„æ¨¡ï¼›<br>æ­¥éª¤3ï¼šå°†æ‰€æœ‰è§£ç»¼åˆèµ·æ¥ã€‚</p><h5 id="æ —å­ï¼š"><strong>æ —å­</strong>ï¼š</h5><p><strong>æ‰¾é›¶é’±é—®é¢˜</strong></p><p>å‡è®¾ä½ å¼€äº†é—´å°åº—ï¼Œä¸èƒ½ç”µå­æ”¯ä»˜ï¼Œé’±æŸœé‡Œçš„è´§å¸åªæœ‰ <strong>25 åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†</strong>å››ç§ç¡¬å¸ï¼Œå¦‚æœä½ æ˜¯å”®è´§å‘˜ä¸”è¦æ‰¾ç»™å®¢æˆ· <strong>41 åˆ†é’±çš„ç¡¬å¸</strong>ï¼Œå¦‚ä½•å®‰æ’æ‰èƒ½æ‰¾ç»™å®¢äººçš„é’±æ—¢<strong>æ­£ç¡®</strong>ä¸”ç¡¬å¸çš„ä¸ªæ•°åˆ<strong>æœ€å°‘</strong>ï¼Ÿ</p><p>è¿™é‡Œéœ€è¦æ˜ç¡®çš„å‡ ä¸ªç‚¹ï¼š<br>1.è´§å¸åªæœ‰ 25 åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸ï¼›<br>2.æ‰¾ç»™å®¢æˆ· 41 åˆ†é’±çš„ç¡¬å¸ï¼›<br>3.ç¡¬å¸æœ€å°‘åŒ–</p><p>ï¼ˆå›é¡¾ä¸€ä¸‹ä¸Šæ–‡è´ªå©ªæ³•çš„åŸºæœ¬æ­¥éª¤ï¼Œ1ï¼Œ2ï¼Œ3ï¼‰</p><p>1.æ‰¾ç»™é¡¾å®¢sum_money=41åˆ†é’±ï¼Œå¯é€‰æ‹©çš„æ˜¯25 åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸ã€‚èƒ½æ‰¾25åˆ†çš„ï¼Œä¸æ‰¾10åˆ†çš„åŸåˆ™ï¼Œåˆæ¬¡å…ˆæ‰¾ç»™é¡¾å®¢25åˆ†ï¼›<br>2.è¿˜å·®é¡¾å®¢sum_money=41-25=16ã€‚ç„¶åä»25 åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸é€‰å–å±€éƒ¨æœ€ä¼˜çš„ç»™é¡¾å®¢ï¼Œä¹Ÿå°±æ˜¯é€‰10åˆ†çš„ï¼Œæ­¤æ—¶sum_money=16-10=6ã€‚é‡å¤è¿­ä»£è¿‡ç¨‹ï¼Œè¿˜éœ€è¦sum_money=6-5=1,sum_money=1-1=0ã€‚è‡³æ­¤ï¼Œé¡¾å®¢æ”¶åˆ°é›¶é’±ï¼Œäº¤æ˜“ç»“æŸï¼›<br>3.æ­¤æ—¶41åˆ†ï¼Œåˆ†æˆäº†1ä¸ª25ï¼Œ1ä¸ª10ï¼Œ1ä¸ª5ï¼Œ1ä¸ª1ï¼Œå…±å››æšç¡¬å¸ã€‚</p><p><strong>ä½†æ˜¯ï¼Œæˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹ç¬¬ä¸€ä¸ªäº‹ä¾‹é—®é¢˜</strong></p><p>ç°åœ¨é—®é¢˜å˜äº†ï¼Œè¿˜æ˜¯éœ€è¦æ‰¾ç»™é¡¾å®¢41åˆ†é’±ï¼Œç°åœ¨çš„è´§å¸åªæœ‰ 25 åˆ†ã€20åˆ†ã€10 åˆ†ã€5 åˆ†å’Œ 1 åˆ†å››ç§ç¡¬å¸ï¼›è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p><strong>æŒ‰ç…§è´ªå¿ƒç®—æ³•çš„ä¸‰ä¸ªæ­¥éª¤ï¼š</strong></p><p>1.41åˆ†ï¼Œå±€éƒ¨æœ€ä¼˜åŒ–åŸåˆ™ï¼Œå…ˆæ‰¾ç»™é¡¾å®¢25åˆ†ï¼›<br>2.æ­¤æ—¶ï¼Œ41-25=16åˆ†ï¼Œè¿˜éœ€è¦æ‰¾ç»™é¡¾å®¢10åˆ†ï¼Œç„¶å5åˆ†ï¼Œç„¶å1åˆ†ï¼›<br>3.æœ€ç»ˆï¼Œæ‰¾ç»™é¡¾å®¢ä¸€ä¸ª25åˆ†ï¼Œä¸€ä¸ª10åˆ†ï¼Œä¸€ä¸ª5åˆ†ï¼Œä¸€ä¸ª1åˆ†ï¼Œå…±å››æšç¡¬å¸ã€‚</p><p><strong>æ˜¯ä¸æ˜¯è§‰å¾—å“ªé‡Œä¸å¤ªå¯¹ï¼Œå¦‚æœç»™ä»–2ä¸ª20åˆ†ï¼ŒåŠ ä¸€ä¸ª1åˆ†ï¼Œä¸‰æšç¡¬å¸å°±å¯ä»¥äº†å‘¢ï¼Ÿ^_^;</strong></p><h5 id="å¯¹äºæœ¬é¢˜ï¼š">å¯¹äºæœ¬é¢˜ï¼š</h5><p>æ—¢ç„¶è¦è´ªå¿ƒï¼Œå³ä¿è¯æ€»å¼€é”€å€¼æœ€å°ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€æ¬¡çš„ç§»åŠ¨é€‰æ‹©ï¼Œæˆ‘ä»¬å¦‚æœèƒ½é€‰æ‹©å¼€é”€ä¸º0çš„ç§»åŠ¨æ–¹å¼ï¼Œå°±ç»å¯¹ä¸é€‰æ‹©å¼€é”€ä¸º1çš„ç§»åŠ¨æ–¹å¼ã€‚å› æ­¤æˆ‘ä»¬å°½é‡é€šè¿‡æ–¹å¼ä¸€å…ˆå°†å°½é‡å¤šçš„åŒå­¦ç§»åŠ¨åˆ°ä¸€èµ·ï¼Œåœ¨å‰©ä¸‹çš„åŒå­¦æ— æ³•å†é€šè¿‡æ–¹å¼ä¸€æ¥ç§»åŠ¨åˆ°åŒä¸€ä½ç½®çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨æœ€å°‘æ¬¡æ•°çš„æ–¹å¼äºŒæ¥ç§»åŠ¨ã€‚</p><p>é‚£ä¹ˆï¼Œä¸å¦¨å…ˆå°†å¤„äºå¥‡æ•°ä½çš„åŒå­¦ç§»åŠ¨åˆ°1çš„ä½ç½®ï¼Œå¶æ•°ä½éƒ½ç§»åŠ¨åˆ°2ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œ0å¼€é”€ï¼Œç„¶åå†å°†ä¸¤ç»„åŒå­¦åˆå¹¶ï¼Œå“ªç»„åŒå­¦äººæ•°å°‘å°±ç§»åŠ¨åˆ°å¦ä¸€ç»„é‡Œå»ï¼Œä»ç„¶æ˜¯ä¸€æ­¥è´ªå¿ƒã€‚</p><h5 id="æ€»ç»“ï¼š"><strong>æ€»ç»“ï¼š</strong></h5><p><strong>è´ªå¿ƒç®—æ³•çš„ä¼˜ç¼ºç‚¹</strong></p><p><strong>ä¼˜ç‚¹ï¼šç®€å•ï¼Œé«˜æ•ˆï¼Œçœå»äº†ä¸ºäº†æ‰¾æœ€ä¼˜è§£å¯èƒ½éœ€è¦ç©·ä¸¾æ“ä½œï¼Œé€šå¸¸ä½œä¸ºå…¶å®ƒç®—æ³•çš„è¾…åŠ©ç®—æ³•æ¥ä½¿ç”¨ï¼›</strong></p><p><strong>ç¼ºç‚¹ï¼šä¸ä»æ€»ä½“ä¸Šè€ƒè™‘å…¶å®ƒå¯èƒ½æƒ…å†µï¼Œæ¯æ¬¡é€‰å–å±€éƒ¨æœ€ä¼˜è§£ï¼Œä¸å†è¿›è¡Œå›æº¯å¤„ç†ï¼Œæ‰€ä»¥å¾ˆå°‘æƒ…å†µä¸‹å¾—åˆ°æœ€ä¼˜è§£ã€‚</strong></p><p>ï¼ˆæ ·ä¾‹é€‰è‡ª<a href="https://zhuanlan.zhihu.com/p/53334049">å°ç™½ç®—æ³•</a>ï¼‰</p><h3 id="åƒæœå†»-by-zwn">åƒæœå†»(by zwn)</h3><h4 id="éš¾åº¦ï¼šä¸€èˆ¬-tagï¼š-Stringæ“ä½œ-æµç¨‹æ§åˆ¶-åŸºæœ¬æ•°æ®ç±»å‹">éš¾åº¦ï¼šä¸€èˆ¬    tagï¼š Stringæ“ä½œ æµç¨‹æ§åˆ¶ åŸºæœ¬æ•°æ®ç±»å‹</h4><p>ä¼—~~~æ‰€å‘¨çŸ¥ï¼Œycjjæœ€å–œæ¬¢åƒæœå†»ã€‚ä»Šå¤©ycjjå…´è‡´å‹ƒå‹ƒåœ°å»è¶…å¸‚ä¹°æœå†»ï¼Œä½†ç°åœ¨è¶…å¸‚å”®è´§æœºå‡ºç°äº†ä¹±ç ï¼Œè€æ¿è¡¨ç¤ºåªè¦ycjjèƒ½å†™ç¨‹åºæ‰¾å¯¹ä¹±ç ä¸­â€œæœå†»â€å‡ºç°çš„æ¬¡æ•°å°±å¯ä»¥è®©ycjjå…è´¹åƒç›¸åº”æ•°é‡çš„æœå†»ï¼Œä½†ycjjè¡¨ç¤ºï¼šæˆ‘éƒ½è½¬ä¸“ä¸šäº†ä½ ç«Ÿç„¶è¿˜è®©æˆ‘å†™ä»£ç ï¼Œä½ ç¤¼è²Œå—ï¼Ÿäºæ˜¯æ‰¾åˆ°äº†ä½ æ¥å¸®å¥¹å†™ä»£ç ï¼Œå¹¶ä¿è¯ä¼šæ ¹æ®ä»£ç çš„æ­£ç¡®æ€§ç»™äºˆä¸€å®šçš„ojåˆ†æ•°ä½œä¸ºå›æŠ¥ã€‚ç°åœ¨æœ‰å¤šè¡Œä¹±ç ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œè€æ¿ä¿è¯æ¯è¡Œå­—ç¬¦ä¸²ä¸å«ç©ºæ ¼ï¼Œè¯·ä½ è¾“å‡ºå…¶ä¸­â€œæœå†»â€è¿™ä¸¤ä¸ªå­—å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a14&amp;&amp;æœå†»*guhj</span><br><span class="line">bæœå†»%haskæœå†»</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ ·ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><h4 id="æ€è·¯ï¼š">æ€è·¯ï¼š</h4><p>è€ç”Ÿå¸¸è°ˆçš„ä¸€ç±»é¢˜ç›®ï¼Œå¯¹äºjavaæ¥è¯´ç‰¹åˆ«å‹å¥½ï¼Œå¯ç”¨çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä½†åŸºæœ¬éƒ½ç»•ä¸å¼€splitæ–¹æ³•ã€‚</p><p>ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨å­—ç¬¦ä¸²å¾ªç¯æˆªå–ï¼Œå¯¹äºè¾“å…¥çš„æ¯ä¸€è¡Œï¼Œåªè¦è¯¥è¡Œä»ç„¶åŒ…å«ç›®æ ‡å­—ç¬¦ä¸²ï¼Œå°±å°†è¯¥è¡Œå­—ç¬¦ä¸²æˆªå–ä¸ºä»è¯¥è¡Œæœ€å‰é¢çš„ç›®æ ‡å­—ç¬¦ä¸²çš„ä¸‹ä¸€ä¸ªå­—ç¬¦åˆ°å­—ç¬¦ä¸²æœ€åçš„ä¸€ä¸ªå­ä¸²ï¼ŒåŒæ—¶æ¬¡æ•°++ï¼Œå¦‚æ­¤ä¾æ¬¡å¤„ç†å„è¡Œå­—ç¬¦ä¸²å³å¯ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•å¯ä»¥é‡‡ç”¨å­—ç¬¦ä¸²ç›´æ¥æˆªå–ï¼Œå¯¹ä¸€è¡Œå­—ç¬¦ä¸²ï¼Œå¦‚æœåŒ…å«ç›®æ ‡å­—ç¬¦ä¸²ï¼Œç›´æ¥è°ƒç”¨splitå°†å…¶åˆ’åˆ†ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œå°†æ•°ç»„é•¿åº¦å‡ä¸€å³ä¸ºåŒ…å«çš„ç›®æ ‡å­—ç¬¦ä¸²ä¸ªæ•°ã€‚ä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç›®æ ‡å­—ç¬¦ä¸²åœ¨å¼€å¤´æˆ–ç»“å°¾ï¼Œsplitåˆ’åˆ†å‡ºæ¥çš„å­—ç¬¦ä¸²æ•°ç»„ä¸­ä¸ä¼šå«æœ‰ç©ºå­—ç¬¦ä¸²ï¼Œå¯¼è‡´å†ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ä¼šå¯¼è‡´ç­”æ¡ˆé”™è¯¯ã€‚æ¯”å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">&quot;æœå†»å•Šæœå†»çœŸå¥½&quot;</span>;</span><br><span class="line">System.out.print(Arrays.toString(str.split(<span class="string">&quot;æœå†»&quot;</span>)));</span><br><span class="line"><span class="comment">//[&quot;å•Š&quot;,&quot;çœŸå¥½&quot;]</span></span><br></pre></td></tr></table></figure><p>é‚£è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘æœ€å–œæ¬¢çš„æ–¹æ³•æ˜¯æ‹¼æ¥æ— å…³å­ä¸²ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¯è¡Œå­—ç¬¦ä¸²çš„ä¸¤ç«¯åŠ ä¸Šä¸ç›¸å…³çš„å­—ç¬¦ä¸²ï¼Œç„¶åå†splitå°±å¥½äº†ã€‚</p><h3 id="wnggçˆ¬å…«æ¥¼-by-zwn">wnggçˆ¬å…«æ¥¼(by zwn)</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œwnggä½åœ¨å…«æ¥¼ï¼Œæ¯å¤©éƒ½è¦çˆ¬å¥½å¤šæ¥¼æ¢¯ï¼Œwnggå‘ç°è‡ªå·±æ¯å¤©è¦çˆ¬Mé˜¶æ¥¼æ¢¯ï¼Œç”±äºwnggè…¿é•¿ï¼Œwnggå¯ä»¥ä¸€æ¬¡ä¸Šä¸¤çº§æ¥¼æ¢¯ï¼Œä½†ç´¯äº†ä¹Ÿå¯ä»¥ä¸€æ¬¡ä¸Šä¸€çº§ï¼Œå³æ¯æ¬¡ä¸Šä¸€çº§æ¥¼æ¢¯æˆ–è€…ä¸¤çº§æ¥¼æ¢¯éƒ½å¯ä»¥ã€‚wnggçªå‘å¥‡æƒ³è®©ä½ æ¥ç®—ç®—ä»–çˆ¬æ¥¼æ¢¯çˆ¬åˆ°Mçº§ä¸€å…±æœ‰å¤šå°‘ç§æ–¹æ³•ã€‚</p><p><strong>åˆå§‹æ—¶wnggåœ¨ç¬¬ä¸€çº§å°é˜¶ï¼Œå¹¶ä¸”è®¤ä¸ºçˆ¬åˆ°ç¬¬ä¸€çº§ä¸€å…±æœ‰0ç§æ–¹æ³•ã€‚åŒæ ·åœ°ä¹Ÿå¯ä»¥çŸ¥é“ä¸Šåˆ°ç¬¬äºŒçº§æœ‰1ç§æ–¹æ³•ã€‚</strong></p><p>Input</p><p>è¾“å…¥æ•°æ®é¦–å…ˆåŒ…å«ä¸€ä¸ªæ•´æ•°Nï¼Œè¡¨ç¤ºæµ‹è¯•å®ä¾‹çš„ä¸ªæ•°ï¼Œç„¶åæ˜¯Nè¡Œæ•°æ®ï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°Mï¼ˆ1&lt;=M&lt;=40ï¼‰,è¡¨ç¤ºæ¥¼æ¢¯çš„çº§æ•°ã€‚</p><p>Output</p><p>å¯¹äºæ¯ä¸ªæµ‹è¯•å®ä¾‹ï¼Œè¯·è¾“å‡ºä¸åŒèµ°æ³•çš„æ•°é‡ï¼Œå…±Nè¡Œã€‚</p><p>Sample Input 1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p>Sample Output 1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure><p>Sample Input 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">8</span><br></pre></td></tr></table></figure><p>Sample Output 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">21</span><br></pre></td></tr></table></figure><p>Hint</p><p>è¿™æ˜¯é«˜ä¸­å¸¸è§ï¼Œç®—æ³•å…¥é—¨ï¼Œå‡ ä¹æ¯æœ¬ç¼–ç¨‹ä¹¦éƒ½ä¼šè®²çš„ä¸€ç±»é—®é¢˜ã€‚å»ºè®®é€†å‘æ€è€ƒï¼Œæ­£å‘ç¼–ç¨‹ã€‚</p><h4 id="æ€è·¯ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—">æ€è·¯ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—</h4><p>é€†å‘æ€è€ƒï¼Œæ­£å‘ç¼–ç¨‹ï¼Œå¾ªç¯å°±èƒ½è§£å†³ã€‚é€†å‘æ€è€ƒï¼Œé€†å‘ç¼–ç¨‹ï¼Œé€’å½’ã€‚</p><p>è¿™é“é¢˜æƒ³æ˜ç™½äº†å°±å¾ˆç®€å•ï¼Œé™¤äº†å‡ ä¸ªå°å‘ã€‚</p><p>éƒ½è¯´äº†è¦<strong>é€†å‘æ€è€ƒ</strong>ï¼ŒæŒ‡çš„æ˜¯æˆ‘ä»¬ä¸è¦ä»ç¬¬ä¸€çº§å°é˜¶è€ƒè™‘å¦‚ä½•ä¸Šåˆ°ç¬¬nçº§å°é˜¶ï¼Œè€Œæ˜¯è¦è€ƒè™‘ï¼Œåœ¨ç¬¬nçº§å°é˜¶çš„æ—¶å€™ï¼Œæˆ‘æ˜¯ä»å“ªé‡Œä¸Šæ¥çš„ã€‚é‚£ä¹ˆå¾ˆæ˜æ˜¾ï¼Œåªèƒ½ä»ç¬¬n-1çº§æˆ–è€…n-2çº§å°é˜¶èµ°åˆ°ç¬¬nçº§å°é˜¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œèµ°åˆ°ç¬¬nçº§å°é˜¶çš„æ–¹æ³•å°±æ˜¯èµ°åˆ°ç¬¬n-1çº§å’Œn-2çº§å°é˜¶çš„æ–¹æ³•çš„æ±‚å’Œï¼Œé‚£ä¹ˆä¸€ç›´é€’æ¨åˆ°ç¬¬1çº§å°é˜¶å°±å¾ˆæ˜¾ç„¶æ˜¯ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œä½†æ˜¯å¦‚æœè¦ä»ç¬¬nçº§å°é˜¶å¼€å§‹é€’æ¨ï¼Œæ˜¾ç„¶æ˜¯ä¸€ä¸ªé€’å½’é—®é¢˜ï¼Œä½†æ˜¯æ—¢ç„¶çŸ¥é“äº†æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œä¸ºå•¥ä¸ç›´æ¥ä»ç¬¬ä¸€çº§å°é˜¶å¼€å§‹ç”¨å¾ªç¯è¿›è¡Œé€’åŠ å‘¢ï¼Œéš¾åº¦ç¬é—´é™ä½ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æ­£å‘ç¼–ç¨‹ã€‚</p><p><strong>é‚£ä¹ˆï¼Œå‘åœ¨å“ªï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œè¯»é¢˜é—®é¢˜ã€‚wnggåˆå§‹åœ¨ç¬¬ä¸€çº§å°é˜¶ï¼Œå¹¶ä¸”è®¤ä¸ºçˆ¬åˆ°ç¬¬ä¸€çº§ä¸€å…±æœ‰0ç§æ–¹æ³•ã€‚æˆ‘éƒ½ç»™ä½ åŠ ç²—äº†ä½ éƒ½çœ‹ä¸è§è¿™èƒ½èµ–è°ã€‚</p><p>å…¶æ¬¡ï¼Œä¸€ä¸ªæ€ç»´æƒ¯æ€§çš„å°å‘ã€‚å¾ˆå¤šæƒ…å†µæ—¶å¾€å¾€æ˜¯ä¸€äº›ç‰¹æ®Šæƒ…å†µæˆ‘ä»¬æ²¡æœ‰è€ƒè™‘åˆ°ä½è€Œå¯¼è‡´æ— æ³•ACã€‚è¿™é“é¢˜ï¼Œç¬¬ä¸€ã€ç¬¬äºŒçº§å°é˜¶æ˜¯ç‰¹æ®Šæƒ…å†µéœ€è¦å•ç‹¬å¤„ç†ï¼Œè¿™æ˜¯ä¸€èˆ¬æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æƒ¯æ€§æ€ç»´ï¼Œä½†ä¹Ÿæ°æ°ä¼šå¿½ç•¥ï¼Œå…¶å®ç¬¬ä¸‰æå°é˜¶ä¹Ÿéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</p><p>èµ°åˆ°ç¬¬ä¸€çº§ï¼Œæ–¹æ³•æœ‰0ç§ã€‚ç¬¬äºŒçº§ï¼Œæ–¹æ³•æœ‰1ç§ï¼Œç¬¬ä¸‰çº§ï¼Œæ–¹æ³•æœ‰2ç§ï¼Œä»ç¬¬å››çº§å¼€å§‹æ‰æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ã€‚ï¼ˆæˆ‘çš„æ ·ä¾‹é‡Œé¢éƒ½ç›´æ¥å†™äº†ä½ è¿˜åšä¸å¯¹ï¼‰</p><img src="1.jpg" style="zoom:140%;"  /><img src="2.jpg"  style="zoom:33%;" />]]></content>
      
      
      <categories>
          
          <category> å­¦çº¿åŸ¹è®­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çº¿åŸ¹è®­ </tag>
            
            <tag> oj </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flutterwebé¼ æ ‡ç§»å…¥æ—¶æ”¹å˜cardçš„é˜´å½±</title>
      <link href="/2021/09/29/flutterweb%E9%BC%A0%E6%A0%87%E7%A7%BB%E5%85%A5%E6%97%B6%E6%94%B9%E5%8F%98card%E7%9A%84%E9%98%B4%E5%BD%B1/"/>
      <url>/2021/09/29/flutterweb%E9%BC%A0%E6%A0%87%E7%A7%BB%E5%85%A5%E6%97%B6%E6%94%B9%E5%8F%98card%E7%9A%84%E9%98%B4%E5%BD%B1/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åšflutter webæ­£å¥½æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå°±éšæ‰‹æ‰¾äº†æ‰¾ï¼Œæœ€ç»ˆçœ‹ä¸Šäº†inkwellï¼Œï¼ˆinkwellä¸åªæ˜¯æ°´æ³¢çº¹å•Šå–‚ï¼‰<br>åŸºæœ¬æ€è·¯å°±æ˜¯è°ƒç”¨inkwellçš„onhoveræ–¹æ³•å¯¹é¼ æ ‡äº‹ä»¶è¿›è¡Œç›‘å¬ï¼ŒçŠ¶æ€ç®¡ç†ç”¨çš„getxï¼Œä»£ç ï¼š</p><h3 id="viewï¼š-ä¹Ÿç®—æ˜¯å°è£…äº†ä¸ªç»„ä»¶ï¼‰">viewï¼š(ä¹Ÿç®—æ˜¯å°è£…äº†ä¸ªç»„ä»¶ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;logic.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicCard</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> basicCardLogic = Get.put(BasicCardLogic());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> ShapeBorder? shape;</span><br><span class="line">  <span class="keyword">final</span> EdgeInsetsGeometry? margin;</span><br><span class="line">  <span class="keyword">final</span> Widget? child;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  BasicCard(&#123;</span><br><span class="line">    <span class="keyword">this</span>.shape,</span><br><span class="line">    <span class="keyword">this</span>.margin,</span><br><span class="line">    <span class="keyword">this</span>.child</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function">Widget <span class="title">build</span><span class="params">(BuildContext context)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> GetBuilder&lt;BasicCardLogic&gt;(</span><br><span class="line">        builder: (logic)=&gt;</span><br><span class="line">         InkWell(</span><br><span class="line">            onTap: ()&#123;&#125;,</span><br><span class="line">            child: Card(</span><br><span class="line">              elevation: basicCardLogic.elevation.value,</span><br><span class="line">              shape: shape,</span><br><span class="line">              margin: margin,</span><br><span class="line">              child: child,</span><br><span class="line">            ),</span><br><span class="line">            onHover: (value)&#123;</span><br><span class="line">              value ? basicCardLogic.cursorMoveIn() : basicCardLogic.cursorMoveOut();</span><br><span class="line">            &#125;,</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="logic-binding">logic&amp;binding</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicCardLogic</span> <span class="keyword">extends</span> <span class="title">GetxController</span> </span>&#123;</span><br><span class="line">  RxDouble elevation = <span class="number">1.0</span>.obs;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">cursorMoveIn</span><span class="params">()</span></span>&#123;</span><br><span class="line">    elevation.value = <span class="number">5.0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">cursorMoveOut</span><span class="params">()</span></span>&#123;</span><br><span class="line">    elevation.value = <span class="number">1.0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicCardBinding</span> <span class="keyword">extends</span> <span class="title">Bindings</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">dependencies</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Get.lazyPut(() =&gt; BasicCardLogic());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¸©å‘ï¼š">è¸©å‘ï¼š</h3><p>inkwellå¦‚æœæ²¡å†™onTapæ–¹æ³•çš„é‚£ä¸ªåŒ¿åå‡½æ•°ä¼šå¯¼è‡´onHoveræ— æ•ˆã€‚</p><h3 id="9-28æ›´æ–°">9.28æ›´æ–°:</h3><p>å¹²æ‰äº†inkwellçš„è‡ªå¸¦é˜´å½±ï¼Œå¦å¤–æä¾›äº†å¦ä¸€ç§å®ç°æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> GetBuilder&lt;BasicCardLogic&gt;(</span><br><span class="line">    builder: (logic) =&gt;InkWell(</span><br><span class="line">      focusColor: MyTheme.transparent,</span><br><span class="line">      hoverColor: MyTheme.transparent,</span><br><span class="line">      highlightColor: MyTheme.transparent,</span><br><span class="line">      splashColor: MyTheme.transparent,</span><br><span class="line">      onTap: ()&#123;&#125;,</span><br><span class="line">      child: Container(</span><br><span class="line">          child: Card(</span><br><span class="line">            shape: <span class="keyword">const</span> RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">8.0</span>))), <span class="comment">//è®¾ç½®åœ†è§’</span></span><br><span class="line">            elevation: basicCardLogic.elevation.value,</span><br><span class="line">            margin: margin,</span><br><span class="line">            child: child,</span><br><span class="line">          ),</span><br><span class="line">          <span class="comment">// decoration: BoxDecoration(</span></span><br><span class="line">          <span class="comment">//   borderRadius: BorderRadius.all(Radius.circular(8)),</span></span><br><span class="line">          <span class="comment">//   boxShadow: [</span></span><br><span class="line">          <span class="comment">//     BoxShadow(</span></span><br><span class="line">          <span class="comment">//       color: basicCardLogic.cursorIn.value ? Colors.black45 : Colors.black12,  //åº•è‰²,é˜´å½±é¢œè‰²</span></span><br><span class="line">          <span class="comment">//       offset: Offset(4, 4), //é˜´å½±ä½ç½®,ä»ä»€ä¹ˆä½ç½®å¼€å§‹</span></span><br><span class="line">          <span class="comment">//       blurRadius: 16,  // é˜´å½±æ¨¡ç³Šå±‚åº¦</span></span><br><span class="line">          <span class="comment">//       spreadRadius: 0,  //é˜´å½±æ¨¡ç³Šå¤§å°</span></span><br><span class="line">          <span class="comment">//     )],</span></span><br><span class="line">          <span class="comment">// )</span></span><br><span class="line">      ),</span><br><span class="line">      onHover: (value)&#123;</span><br><span class="line">        value ? basicCardLogic.cursorMoveIn() : basicCardLogic.cursorMoveOut();</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-16æ›´æ–°">12.16æ›´æ–°:</h3><p>getBuilderæœ‰å¼‚å¸¸å¯¼è‡´å‡ºç°UIé—®é¢˜</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> InkWell(</span><br><span class="line">      <span class="comment">// focusColor: Colors.transparent,</span></span><br><span class="line">      <span class="comment">// hoverColor: Colors.transparent,</span></span><br><span class="line">      <span class="comment">// highlightColor: Colors.transparent,</span></span><br><span class="line">      <span class="comment">// splashColor: Colors.transparent,</span></span><br><span class="line">      onTap: ()&#123;&#125;,</span><br><span class="line">      child: Container(</span><br><span class="line">        child:Obx(()=&gt;Card(</span><br><span class="line">          shape: <span class="keyword">const</span> RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(<span class="number">8.0</span>))), <span class="comment">//è®¾ç½®åœ†è§’</span></span><br><span class="line">          elevation: basicCardLogic.elevation.value,</span><br><span class="line">          margin: margin,</span><br><span class="line">          child: child,</span><br><span class="line">        ),)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// decoration: BoxDecoration(</span></span><br><span class="line">        <span class="comment">//   borderRadius: BorderRadius.all(Radius.circular(8)),</span></span><br><span class="line">        <span class="comment">//   boxShadow: [</span></span><br><span class="line">        <span class="comment">//     BoxShadow(</span></span><br><span class="line">        <span class="comment">//       color: basicCardLogic.cursorIn.value ? Colors.black45 : Colors.black12,  //åº•è‰²,é˜´å½±é¢œè‰²</span></span><br><span class="line">        <span class="comment">//       offset: Offset(4, 4), //é˜´å½±ä½ç½®,ä»ä»€ä¹ˆä½ç½®å¼€å§‹</span></span><br><span class="line">        <span class="comment">//       blurRadius: 16,  // é˜´å½±æ¨¡ç³Šå±‚åº¦</span></span><br><span class="line">        <span class="comment">//       spreadRadius: 0,  //é˜´å½±æ¨¡ç³Šå¤§å°</span></span><br><span class="line">        <span class="comment">//     )],</span></span><br><span class="line">        <span class="comment">// )</span></span><br><span class="line">      ),</span><br><span class="line">      onHover: (value)&#123;</span><br><span class="line">        value ? basicCardLogic.cursorMoveIn() : basicCardLogic.cursorMoveOut();</span><br><span class="line">      &#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-19æ›´æ–°ï¼š">12.19æ›´æ–°ï¼š</h3><p>å‘ç°å¦‚æœä¸€ä¸ªç•Œé¢ä¸­æœ‰å¤šä¸ª<code>basicCard</code>ï¼Œåœ¨é¼ æ ‡ç§»å…¥æ—¶éƒ½ä¼šå˜è‰²ï¼Œï¼ˆæˆ‘ä¸æå§ï¼‰ã€‚ç†è®ºä¸Šè®²å¤šä¸ª<code>baseCard</code>æ˜¯å¤šä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä»–ä»¬çš„<code>logic</code>åº”è¯¥æ˜¯å„è‡ªç‹¬ç«‹çš„æ‰å¯¹ï¼Œä½†å…¶è¡¨ç°å‡ºæ¥çš„ç°è±¡å´è®©äººè§‰å¾—è¿™å‡ ä¸ªlogicæ˜¯ä¸€æ ·çš„ã€‚åæœŸå‘ç°ç¡®å®åªæœ‰ä¸€ä¸ªcardå“åº”äº†é¼ æ ‡ç§»å…¥äº‹ä»¶ï¼Œä½†æ˜¯æ‰€æœ‰çš„å¡ç‰‡ä¹Ÿç¡®å®éƒ½å˜è‰²äº†ã€‚äºæ˜¯æ›´æ–°ï¼Œç›´æ¥å¼ƒç”¨äº†getxï¼Œæ”¹ç”¨äº†<code>StatefulWidget</code>ã€‚</p><p>åˆï¼šåªæœ‰<code>onTap</code>æ–¹æ³•ä¼ å…¥çš„æ—¶å€™<code>onHover</code>æ‰æœ‰æ•ˆï¼ŒåŸå› æœªçŸ¥ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicCard</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> ShapeBorder? shape;</span><br><span class="line">  <span class="keyword">final</span> EdgeInsetsGeometry? margin;</span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span>() onTap;</span><br><span class="line"></span><br><span class="line">  BasicCard(&#123;</span><br><span class="line">    <span class="keyword">this</span>.shape,</span><br><span class="line">    <span class="keyword">this</span>.margin,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.child,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.onTap</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _BasicCardState createState() =&gt;_BasicCardState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BasicCardState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BasicCard</span>&gt;</span>&#123;</span><br><span class="line">  Color cardColor = Colors.white;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> InkWell(</span><br><span class="line">        focusColor: Colors.transparent,</span><br><span class="line">        hoverColor: Colors.transparent,</span><br><span class="line">        highlightColor: Colors.transparent,</span><br><span class="line">        splashColor: Colors.transparent,</span><br><span class="line">        onTap: widget.onTap,</span><br><span class="line">        child: Container(</span><br><span class="line">          child:Card(</span><br><span class="line">            color: cardColor,</span><br><span class="line">            shape:widget.shape==<span class="keyword">null</span> ? RoundedRectangleBorder(</span><br><span class="line">                borderRadius: BorderRadius.all(Radius.circular(<span class="number">6.0</span>))):widget.shape, <span class="comment">//è®¾ç½®åœ†è§’</span></span><br><span class="line">            <span class="comment">// elevation: basicCardLogic.elevation.value,</span></span><br><span class="line">            margin: widget.margin,</span><br><span class="line">            child: widget.child,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        onHover: (value)&#123;</span><br><span class="line">          setState(() &#123;</span><br><span class="line">            cardColor = value ? Colors.blue : Colors.white;</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
